(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var hn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function X9(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var w2={exports:{}},mc={},_2={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var As=Symbol.for("react.element"),q9=Symbol.for("react.portal"),Y9=Symbol.for("react.fragment"),J9=Symbol.for("react.strict_mode"),Q9=Symbol.for("react.profiler"),Z9=Symbol.for("react.provider"),e8=Symbol.for("react.context"),t8=Symbol.for("react.forward_ref"),n8=Symbol.for("react.suspense"),r8=Symbol.for("react.memo"),i8=Symbol.for("react.lazy"),O1=Symbol.iterator;function a8(t){return t===null||typeof t!="object"?null:(t=O1&&t[O1]||t["@@iterator"],typeof t=="function"?t:null)}var E2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D2=Object.assign,O2={};function vo(t,e,n){this.props=t,this.context=e,this.refs=O2,this.updater=n||E2}vo.prototype.isReactComponent={};vo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function b2(){}b2.prototype=vo.prototype;function wp(t,e,n){this.props=t,this.context=e,this.refs=O2,this.updater=n||E2}var _p=wp.prototype=new b2;_p.constructor=wp;D2(_p,vo.prototype);_p.isPureReactComponent=!0;var b1=Array.isArray,N2=Object.prototype.hasOwnProperty,Ep={current:null},M2={key:!0,ref:!0,__self:!0,__source:!0};function R2(t,e,n){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)N2.call(e,r)&&!M2.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:As,type:t,key:a,ref:o,props:i,_owner:Ep.current}}function o8(t,e){return{$$typeof:As,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Dp(t){return typeof t=="object"&&t!==null&&t.$$typeof===As}function s8(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var N1=/\/+/g;function Jc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?s8(""+t.key):e.toString(36)}function Ku(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case As:case q9:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Jc(o,0):r,b1(i)?(n="",t!=null&&(n=t.replace(N1,"$&/")+"/"),Ku(i,e,n,"",function(l){return l})):i!=null&&(Dp(i)&&(i=o8(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(N1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",b1(t))for(var s=0;s<t.length;s++){a=t[s];var u=r+Jc(a,s);o+=Ku(a,e,n,u,i)}else if(u=a8(t),typeof u=="function")for(t=u.call(t),s=0;!(a=t.next()).done;)a=a.value,u=r+Jc(a,s++),o+=Ku(a,e,n,u,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function tu(t,e,n){if(t==null)return t;var r=[],i=0;return Ku(t,r,"","",function(a){return e.call(n,a,i++)}),r}function u8(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},Xu={transition:null},c8={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:Xu,ReactCurrentOwner:Ep};function F2(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:tu,forEach:function(t,e,n){tu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tu(t,function(){e++}),e},toArray:function(t){return tu(t,function(e){return e})||[]},only:function(t){if(!Dp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ae.Component=vo;Ae.Fragment=Y9;Ae.Profiler=Q9;Ae.PureComponent=wp;Ae.StrictMode=J9;Ae.Suspense=n8;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c8;Ae.act=F2;Ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=D2({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Ep.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(u in e)N2.call(e,u)&&!M2.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&s!==void 0?s[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:As,type:t.type,key:i,ref:a,props:r,_owner:o}};Ae.createContext=function(t){return t={$$typeof:e8,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Z9,_context:t},t.Consumer=t};Ae.createElement=R2;Ae.createFactory=function(t){var e=R2.bind(null,t);return e.type=t,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(t){return{$$typeof:t8,render:t}};Ae.isValidElement=Dp;Ae.lazy=function(t){return{$$typeof:i8,_payload:{_status:-1,_result:t},_init:u8}};Ae.memo=function(t,e){return{$$typeof:r8,type:t,compare:e===void 0?null:e}};Ae.startTransition=function(t){var e=Xu.transition;Xu.transition={};try{t()}finally{Xu.transition=e}};Ae.unstable_act=F2;Ae.useCallback=function(t,e){return Qt.current.useCallback(t,e)};Ae.useContext=function(t){return Qt.current.useContext(t)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};Ae.useEffect=function(t,e){return Qt.current.useEffect(t,e)};Ae.useId=function(){return Qt.current.useId()};Ae.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};Ae.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};Ae.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};Ae.useMemo=function(t,e){return Qt.current.useMemo(t,e)};Ae.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};Ae.useRef=function(t){return Qt.current.useRef(t)};Ae.useState=function(t){return Qt.current.useState(t)};Ae.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};Ae.useTransition=function(){return Qt.current.useTransition()};Ae.version="18.3.1";_2.exports=Ae;var Ga=_2.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l8=Ga,f8=Symbol.for("react.element"),p8=Symbol.for("react.fragment"),h8=Object.prototype.hasOwnProperty,g8=l8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d8={key:!0,ref:!0,__self:!0,__source:!0};function L2(t,e,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)h8.call(e,r)&&!d8.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:f8,type:t,key:a,ref:o,props:i,_owner:g8.current}}mc.Fragment=p8;mc.jsx=L2;mc.jsxs=L2;w2.exports=mc;var x0=w2.exports,k2={exports:{}},mn={},B2={exports:{}},V2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,F){var B=k.length;k.push(F);e:for(;0<B;){var $=B-1>>>1,H=k[$];if(0<i(H,F))k[$]=F,k[B]=H,B=$;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var F=k[0],B=k.pop();if(B!==F){k[0]=B;e:for(var $=0,H=k.length,X=H>>>1;$<X;){var J=2*($+1)-1,q=k[J],ee=J+1,re=k[ee];if(0>i(q,B))ee<H&&0>i(re,q)?(k[$]=re,k[ee]=B,$=ee):(k[$]=q,k[J]=B,$=J);else if(ee<H&&0>i(re,B))k[$]=re,k[ee]=B,$=ee;else break e}}return F}function i(k,F){var B=k.sortIndex-F.sortIndex;return B!==0?B:k.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var u=[],l=[],p=1,c=null,f=3,h=!1,v=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function d(k){for(var F=n(l);F!==null;){if(F.callback===null)r(l);else if(F.startTime<=k)r(l),F.sortIndex=F.expirationTime,e(u,F);else break;F=n(l)}}function S(k){if(y=!1,d(k),!v)if(n(u)!==null)v=!0,G(T);else{var F=n(l);F!==null&&j(S,F.startTime-k)}}function T(k,F){v=!1,y&&(y=!1,m(_),_=-1),h=!0;var B=f;try{for(d(F),c=n(u);c!==null&&(!(c.expirationTime>F)||k&&!O());){var $=c.callback;if(typeof $=="function"){c.callback=null,f=c.priorityLevel;var H=$(c.expirationTime<=F);F=t.unstable_now(),typeof H=="function"?c.callback=H:c===n(u)&&r(u),d(F)}else r(u);c=n(u)}if(c!==null)var X=!0;else{var J=n(l);J!==null&&j(S,J.startTime-F),X=!1}return X}finally{c=null,f=B,h=!1}}var C=!1,w=null,_=-1,E=5,D=-1;function O(){return!(t.unstable_now()-D<E)}function N(){if(w!==null){var k=t.unstable_now();D=k;var F=!0;try{F=w(!0,k)}finally{F?R():(C=!1,w=null)}}else C=!1}var R;if(typeof g=="function")R=function(){g(N)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,A=M.port2;M.port1.onmessage=N,R=function(){A.postMessage(null)}}else R=function(){x(N,0)};function G(k){w=k,C||(C=!0,R())}function j(k,F){_=x(function(){k(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){v||h||(v=!0,G(T))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(k){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var B=f;f=F;try{return k()}finally{f=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,F){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var B=f;f=k;try{return F()}finally{f=B}},t.unstable_scheduleCallback=function(k,F,B){var $=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?$+B:$):B=$,k){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=B+H,k={id:p++,callback:F,priorityLevel:k,startTime:B,expirationTime:H,sortIndex:-1},B>$?(k.sortIndex=B,e(l,k),n(u)===null&&k===n(l)&&(y?(m(_),_=-1):y=!0,j(S,B-$))):(k.sortIndex=H,e(u,k),v||h||(v=!0,G(T))),k},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(k){var F=f;return function(){var B=f;f=F;try{return k.apply(this,arguments)}finally{f=B}}}})(V2);B2.exports=V2;var v8=B2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y8=Ga,yn=v8;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A2=new Set,ls={};function la(t,e){Za(t,e),Za(t+"Capture",e)}function Za(t,e){for(ls[t]=e,t=0;t<e.length;t++)A2.add(e[t])}var Mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ql=Object.prototype.hasOwnProperty,m8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M1={},R1={};function x8(t){return Ql.call(R1,t)?!0:Ql.call(M1,t)?!1:m8.test(t)?R1[t]=!0:(M1[t]=!0,!1)}function S8(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function T8(t,e,n,r){if(e===null||typeof e>"u"||S8(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zt(t,e,n,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var At={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){At[t]=new Zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];At[e]=new Zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){At[t]=new Zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){At[t]=new Zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){At[t]=new Zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){At[t]=new Zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){At[t]=new Zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){At[t]=new Zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){At[t]=new Zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Op=/[\-:]([a-z])/g;function bp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Op,bp);At[e]=new Zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Op,bp);At[e]=new Zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Op,bp);At[e]=new Zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){At[t]=new Zt(t,1,!1,t.toLowerCase(),null,!1,!1)});At.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){At[t]=new Zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Np(t,e,n,r){var i=At.hasOwnProperty(e)?At[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(T8(e,n,i,r)&&(n=null),r||i===null?x8(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vr=y8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nu=Symbol.for("react.element"),_a=Symbol.for("react.portal"),Ea=Symbol.for("react.fragment"),Mp=Symbol.for("react.strict_mode"),Zl=Symbol.for("react.profiler"),U2=Symbol.for("react.provider"),G2=Symbol.for("react.context"),Rp=Symbol.for("react.forward_ref"),ef=Symbol.for("react.suspense"),tf=Symbol.for("react.suspense_list"),Fp=Symbol.for("react.memo"),Xr=Symbol.for("react.lazy"),P2=Symbol.for("react.offscreen"),F1=Symbol.iterator;function wo(t){return t===null||typeof t!="object"?null:(t=F1&&t[F1]||t["@@iterator"],typeof t=="function"?t:null)}var ht=Object.assign,Qc;function ko(t){if(Qc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Qc=e&&e[1]||""}return`
`+Qc+t}var Zc=!1;function el(t,e){if(!t||Zc)return"";Zc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=s);break}}}finally{Zc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ko(t):""}function C8(t){switch(t.tag){case 5:return ko(t.type);case 16:return ko("Lazy");case 13:return ko("Suspense");case 19:return ko("SuspenseList");case 0:case 2:case 15:return t=el(t.type,!1),t;case 11:return t=el(t.type.render,!1),t;case 1:return t=el(t.type,!0),t;default:return""}}function nf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ea:return"Fragment";case _a:return"Portal";case Zl:return"Profiler";case Mp:return"StrictMode";case ef:return"Suspense";case tf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case G2:return(t.displayName||"Context")+".Consumer";case U2:return(t._context.displayName||"Context")+".Provider";case Rp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fp:return e=t.displayName||null,e!==null?e:nf(t.type)||"Memo";case Xr:e=t._payload,t=t._init;try{return nf(t(e))}catch{}}return null}function w8(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nf(e);case 8:return e===Mp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function di(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function I2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _8(t){var e=I2(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ru(t){t._valueTracker||(t._valueTracker=_8(t))}function z2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=I2(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function S0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rf(t,e){var n=e.checked;return ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function L1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=di(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function W2(t,e){e=e.checked,e!=null&&Np(t,"checked",e,!1)}function af(t,e){W2(t,e);var n=di(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?of(t,e.type,n):e.hasOwnProperty("defaultValue")&&of(t,e.type,di(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function k1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function of(t,e,n){(e!=="number"||S0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bo=Array.isArray;function Pa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+di(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function sf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function B1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ce(92));if(Bo(n)){if(1<n.length)throw Error(ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:di(n)}}function j2(t,e){var n=di(e.value),r=di(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function V1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var iu,H2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(iu=iu||document.createElement("div"),iu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=iu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E8=["Webkit","ms","Moz","O"];Object.keys(Yo).forEach(function(t){E8.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yo[e]=Yo[t]})});function K2(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yo.hasOwnProperty(t)&&Yo[t]?(""+e).trim():e+"px"}function X2(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=K2(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var D8=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cf(t,e){if(e){if(D8[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function lf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ff=null;function Lp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pf=null,Ia=null,za=null;function A1(t){if(t=Ps(t)){if(typeof pf!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=wc(e),pf(t.stateNode,t.type,e))}}function q2(t){Ia?za?za.push(t):za=[t]:Ia=t}function Y2(){if(Ia){var t=Ia,e=za;if(za=Ia=null,A1(t),e)for(t=0;t<e.length;t++)A1(e[t])}}function J2(t,e){return t(e)}function Q2(){}var tl=!1;function Z2(t,e,n){if(tl)return t(e,n);tl=!0;try{return J2(t,e,n)}finally{tl=!1,(Ia!==null||za!==null)&&(Q2(),Y2())}}function ps(t,e){var n=t.stateNode;if(n===null)return null;var r=wc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ce(231,e,typeof n));return n}var hf=!1;if(Mr)try{var _o={};Object.defineProperty(_o,"passive",{get:function(){hf=!0}}),window.addEventListener("test",_o,_o),window.removeEventListener("test",_o,_o)}catch{hf=!1}function O8(t,e,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(p){this.onError(p)}}var Jo=!1,T0=null,C0=!1,gf=null,b8={onError:function(t){Jo=!0,T0=t}};function N8(t,e,n,r,i,a,o,s,u){Jo=!1,T0=null,O8.apply(b8,arguments)}function M8(t,e,n,r,i,a,o,s,u){if(N8.apply(this,arguments),Jo){if(Jo){var l=T0;Jo=!1,T0=null}else throw Error(ce(198));C0||(C0=!0,gf=l)}}function fa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ev(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function U1(t){if(fa(t)!==t)throw Error(ce(188))}function R8(t){var e=t.alternate;if(!e){if(e=fa(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return U1(i),t;if(a===r)return U1(i),e;a=a.sibling}throw Error(ce(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o)throw Error(ce(189))}}if(n.alternate!==r)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?t:e}function tv(t){return t=R8(t),t!==null?nv(t):null}function nv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nv(t);if(e!==null)return e;t=t.sibling}return null}var rv=yn.unstable_scheduleCallback,G1=yn.unstable_cancelCallback,F8=yn.unstable_shouldYield,L8=yn.unstable_requestPaint,St=yn.unstable_now,k8=yn.unstable_getCurrentPriorityLevel,kp=yn.unstable_ImmediatePriority,iv=yn.unstable_UserBlockingPriority,w0=yn.unstable_NormalPriority,B8=yn.unstable_LowPriority,av=yn.unstable_IdlePriority,xc=null,sr=null;function V8(t){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(xc,t,void 0,(t.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:G8,A8=Math.log,U8=Math.LN2;function G8(t){return t>>>=0,t===0?32:31-(A8(t)/U8|0)|0}var au=64,ou=4194304;function Vo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _0(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var s=o&~i;s!==0?r=Vo(s):(a&=o,a!==0&&(r=Vo(a)))}else o=n&~i,o!==0?r=Vo(o):a!==0&&(r=Vo(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kn(e),i=1<<n,r|=t[n],e&=~i;return r}function P8(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function I8(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Kn(a),s=1<<o,u=i[o];u===-1?(!(s&n)||s&r)&&(i[o]=P8(s,e)):u<=e&&(t.expiredLanes|=s),a&=~s}}function df(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ov(){var t=au;return au<<=1,!(au&4194240)&&(au=64),t}function nl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Us(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kn(e),t[e]=n}function z8(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Kn(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function Bp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Xe=0;function sv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uv,Vp,cv,lv,fv,vf=!1,su=[],oi=null,si=null,ui=null,hs=new Map,gs=new Map,Jr=[],W8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function P1(t,e){switch(t){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":si=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":hs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gs.delete(e.pointerId)}}function Eo(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Ps(e),e!==null&&Vp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function j8(t,e,n,r,i){switch(e){case"focusin":return oi=Eo(oi,t,e,n,r,i),!0;case"dragenter":return si=Eo(si,t,e,n,r,i),!0;case"mouseover":return ui=Eo(ui,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return hs.set(a,Eo(hs.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,gs.set(a,Eo(gs.get(a)||null,t,e,n,r,i)),!0}return!1}function pv(t){var e=Pi(t.target);if(e!==null){var n=fa(e);if(n!==null){if(e=n.tag,e===13){if(e=ev(n),e!==null){t.blockedOn=e,fv(t.priority,function(){cv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ff=r,n.target.dispatchEvent(r),ff=null}else return e=Ps(n),e!==null&&Vp(e),t.blockedOn=n,!1;e.shift()}return!0}function I1(t,e,n){qu(t)&&n.delete(e)}function $8(){vf=!1,oi!==null&&qu(oi)&&(oi=null),si!==null&&qu(si)&&(si=null),ui!==null&&qu(ui)&&(ui=null),hs.forEach(I1),gs.forEach(I1)}function Do(t,e){t.blockedOn===e&&(t.blockedOn=null,vf||(vf=!0,yn.unstable_scheduleCallback(yn.unstable_NormalPriority,$8)))}function ds(t){function e(i){return Do(i,t)}if(0<su.length){Do(su[0],t);for(var n=1;n<su.length;n++){var r=su[n];r.blockedOn===t&&(r.blockedOn=null)}}for(oi!==null&&Do(oi,t),si!==null&&Do(si,t),ui!==null&&Do(ui,t),hs.forEach(e),gs.forEach(e),n=0;n<Jr.length;n++)r=Jr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Jr.length&&(n=Jr[0],n.blockedOn===null);)pv(n),n.blockedOn===null&&Jr.shift()}var Wa=Vr.ReactCurrentBatchConfig,E0=!0;function H8(t,e,n,r){var i=Xe,a=Wa.transition;Wa.transition=null;try{Xe=1,Ap(t,e,n,r)}finally{Xe=i,Wa.transition=a}}function K8(t,e,n,r){var i=Xe,a=Wa.transition;Wa.transition=null;try{Xe=4,Ap(t,e,n,r)}finally{Xe=i,Wa.transition=a}}function Ap(t,e,n,r){if(E0){var i=yf(t,e,n,r);if(i===null)pl(t,e,r,D0,n),P1(t,r);else if(j8(i,t,e,n,r))r.stopPropagation();else if(P1(t,r),e&4&&-1<W8.indexOf(t)){for(;i!==null;){var a=Ps(i);if(a!==null&&uv(a),a=yf(t,e,n,r),a===null&&pl(t,e,r,D0,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else pl(t,e,r,null,n)}}var D0=null;function yf(t,e,n,r){if(D0=null,t=Lp(r),t=Pi(t),t!==null)if(e=fa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ev(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return D0=t,null}function hv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(k8()){case kp:return 1;case iv:return 4;case w0:case B8:return 16;case av:return 536870912;default:return 16}default:return 16}}var ei=null,Up=null,Yu=null;function gv(){if(Yu)return Yu;var t,e=Up,n=e.length,r,i="value"in ei?ei.value:ei.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[a-r];r++);return Yu=i.slice(t,1<r?1-r:void 0)}function Ju(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function uu(){return!0}function z1(){return!1}function xn(t){function e(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?uu:z1,this.isPropagationStopped=z1,this}return ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=uu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=uu)},persist:function(){},isPersistent:uu}),e}var yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gp=xn(yo),Gs=ht({},yo,{view:0,detail:0}),X8=xn(Gs),rl,il,Oo,Sc=ht({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oo&&(Oo&&t.type==="mousemove"?(rl=t.screenX-Oo.screenX,il=t.screenY-Oo.screenY):il=rl=0,Oo=t),rl)},movementY:function(t){return"movementY"in t?t.movementY:il}}),W1=xn(Sc),q8=ht({},Sc,{dataTransfer:0}),Y8=xn(q8),J8=ht({},Gs,{relatedTarget:0}),al=xn(J8),Q8=ht({},yo,{animationName:0,elapsedTime:0,pseudoElement:0}),Z8=xn(Q8),e6=ht({},yo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),t6=xn(e6),n6=ht({},yo,{data:0}),j1=xn(n6),r6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},a6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function o6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=a6[t])?!!e[t]:!1}function Pp(){return o6}var s6=ht({},Gs,{key:function(t){if(t.key){var e=r6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ju(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?i6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pp,charCode:function(t){return t.type==="keypress"?Ju(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ju(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),u6=xn(s6),c6=ht({},Sc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$1=xn(c6),l6=ht({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pp}),f6=xn(l6),p6=ht({},yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),h6=xn(p6),g6=ht({},Sc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),d6=xn(g6),v6=[9,13,27,32],Ip=Mr&&"CompositionEvent"in window,Qo=null;Mr&&"documentMode"in document&&(Qo=document.documentMode);var y6=Mr&&"TextEvent"in window&&!Qo,dv=Mr&&(!Ip||Qo&&8<Qo&&11>=Qo),H1=" ",K1=!1;function vv(t,e){switch(t){case"keyup":return v6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Da=!1;function m6(t,e){switch(t){case"compositionend":return yv(e);case"keypress":return e.which!==32?null:(K1=!0,H1);case"textInput":return t=e.data,t===H1&&K1?null:t;default:return null}}function x6(t,e){if(Da)return t==="compositionend"||!Ip&&vv(t,e)?(t=gv(),Yu=Up=ei=null,Da=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dv&&e.locale!=="ko"?null:e.data;default:return null}}var S6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function X1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!S6[t.type]:e==="textarea"}function mv(t,e,n,r){q2(r),e=O0(e,"onChange"),0<e.length&&(n=new Gp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zo=null,vs=null;function T6(t){Nv(t,0)}function Tc(t){var e=Na(t);if(z2(e))return t}function C6(t,e){if(t==="change")return e}var xv=!1;if(Mr){var ol;if(Mr){var sl="oninput"in document;if(!sl){var q1=document.createElement("div");q1.setAttribute("oninput","return;"),sl=typeof q1.oninput=="function"}ol=sl}else ol=!1;xv=ol&&(!document.documentMode||9<document.documentMode)}function Y1(){Zo&&(Zo.detachEvent("onpropertychange",Sv),vs=Zo=null)}function Sv(t){if(t.propertyName==="value"&&Tc(vs)){var e=[];mv(e,vs,t,Lp(t)),Z2(T6,e)}}function w6(t,e,n){t==="focusin"?(Y1(),Zo=e,vs=n,Zo.attachEvent("onpropertychange",Sv)):t==="focusout"&&Y1()}function _6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tc(vs)}function E6(t,e){if(t==="click")return Tc(e)}function D6(t,e){if(t==="input"||t==="change")return Tc(e)}function O6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qn=typeof Object.is=="function"?Object.is:O6;function ys(t,e){if(qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ql.call(e,i)||!qn(t[i],e[i]))return!1}return!0}function J1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Q1(t,e){var n=J1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=J1(n)}}function Tv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Tv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Cv(){for(var t=window,e=S0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=S0(t.document)}return e}function zp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function b6(t){var e=Cv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Tv(n.ownerDocument.documentElement,n)){if(r!==null&&zp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=Q1(n,a);var o=Q1(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var N6=Mr&&"documentMode"in document&&11>=document.documentMode,Oa=null,mf=null,es=null,xf=!1;function Z1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xf||Oa==null||Oa!==S0(r)||(r=Oa,"selectionStart"in r&&zp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),es&&ys(es,r)||(es=r,r=O0(mf,"onSelect"),0<r.length&&(e=new Gp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Oa)))}function cu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ba={animationend:cu("Animation","AnimationEnd"),animationiteration:cu("Animation","AnimationIteration"),animationstart:cu("Animation","AnimationStart"),transitionend:cu("Transition","TransitionEnd")},ul={},wv={};Mr&&(wv=document.createElement("div").style,"AnimationEvent"in window||(delete ba.animationend.animation,delete ba.animationiteration.animation,delete ba.animationstart.animation),"TransitionEvent"in window||delete ba.transitionend.transition);function Cc(t){if(ul[t])return ul[t];if(!ba[t])return t;var e=ba[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in wv)return ul[t]=e[n];return t}var _v=Cc("animationend"),Ev=Cc("animationiteration"),Dv=Cc("animationstart"),Ov=Cc("transitionend"),bv=new Map,eg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xi(t,e){bv.set(t,e),la(e,[t])}for(var cl=0;cl<eg.length;cl++){var ll=eg[cl],M6=ll.toLowerCase(),R6=ll[0].toUpperCase()+ll.slice(1);xi(M6,"on"+R6)}xi(_v,"onAnimationEnd");xi(Ev,"onAnimationIteration");xi(Dv,"onAnimationStart");xi("dblclick","onDoubleClick");xi("focusin","onFocus");xi("focusout","onBlur");xi(Ov,"onTransitionEnd");Za("onMouseEnter",["mouseout","mouseover"]);Za("onMouseLeave",["mouseout","mouseover"]);Za("onPointerEnter",["pointerout","pointerover"]);Za("onPointerLeave",["pointerout","pointerover"]);la("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));la("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));la("onBeforeInput",["compositionend","keypress","textInput","paste"]);la("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));la("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));la("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ao));function tg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,M8(r,e,void 0,t),t.currentTarget=null}function Nv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;tg(i,s,l),a=u}else for(o=0;o<r.length;o++){if(s=r[o],u=s.instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;tg(i,s,l),a=u}}}if(C0)throw t=gf,C0=!1,gf=null,t}function nt(t,e){var n=e[_f];n===void 0&&(n=e[_f]=new Set);var r=t+"__bubble";n.has(r)||(Mv(e,t,2,!1),n.add(r))}function fl(t,e,n){var r=0;e&&(r|=4),Mv(n,t,r,e)}var lu="_reactListening"+Math.random().toString(36).slice(2);function ms(t){if(!t[lu]){t[lu]=!0,A2.forEach(function(n){n!=="selectionchange"&&(F6.has(n)||fl(n,!1,t),fl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[lu]||(e[lu]=!0,fl("selectionchange",!1,e))}}function Mv(t,e,n,r){switch(hv(e)){case 1:var i=H8;break;case 4:i=K8;break;default:i=Ap}n=i.bind(null,e,n,t),i=void 0,!hf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function pl(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;s!==null;){if(o=Pi(s),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}s=s.parentNode}}r=r.return}Z2(function(){var l=a,p=Lp(n),c=[];e:{var f=bv.get(t);if(f!==void 0){var h=Gp,v=t;switch(t){case"keypress":if(Ju(n)===0)break e;case"keydown":case"keyup":h=u6;break;case"focusin":v="focus",h=al;break;case"focusout":v="blur",h=al;break;case"beforeblur":case"afterblur":h=al;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=W1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Y8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=f6;break;case _v:case Ev:case Dv:h=Z8;break;case Ov:h=h6;break;case"scroll":h=X8;break;case"wheel":h=d6;break;case"copy":case"cut":case"paste":h=t6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=$1}var y=(e&4)!==0,x=!y&&t==="scroll",m=y?f!==null?f+"Capture":null:f;y=[];for(var g=l,d;g!==null;){d=g;var S=d.stateNode;if(d.tag===5&&S!==null&&(d=S,m!==null&&(S=ps(g,m),S!=null&&y.push(xs(g,S,d)))),x)break;g=g.return}0<y.length&&(f=new h(f,v,null,n,p),c.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==ff&&(v=n.relatedTarget||n.fromElement)&&(Pi(v)||v[Rr]))break e;if((h||f)&&(f=p.window===p?p:(f=p.ownerDocument)?f.defaultView||f.parentWindow:window,h?(v=n.relatedTarget||n.toElement,h=l,v=v?Pi(v):null,v!==null&&(x=fa(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(h=null,v=l),h!==v)){if(y=W1,S="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=$1,S="onPointerLeave",m="onPointerEnter",g="pointer"),x=h==null?f:Na(h),d=v==null?f:Na(v),f=new y(S,g+"leave",h,n,p),f.target=x,f.relatedTarget=d,S=null,Pi(p)===l&&(y=new y(m,g+"enter",v,n,p),y.target=d,y.relatedTarget=x,S=y),x=S,h&&v)t:{for(y=h,m=v,g=0,d=y;d;d=ga(d))g++;for(d=0,S=m;S;S=ga(S))d++;for(;0<g-d;)y=ga(y),g--;for(;0<d-g;)m=ga(m),d--;for(;g--;){if(y===m||m!==null&&y===m.alternate)break t;y=ga(y),m=ga(m)}y=null}else y=null;h!==null&&ng(c,f,h,y,!1),v!==null&&x!==null&&ng(c,x,v,y,!0)}}e:{if(f=l?Na(l):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var T=C6;else if(X1(f))if(xv)T=D6;else{T=_6;var C=w6}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=E6);if(T&&(T=T(t,l))){mv(c,T,n,p);break e}C&&C(t,f,l),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&of(f,"number",f.value)}switch(C=l?Na(l):window,t){case"focusin":(X1(C)||C.contentEditable==="true")&&(Oa=C,mf=l,es=null);break;case"focusout":es=mf=Oa=null;break;case"mousedown":xf=!0;break;case"contextmenu":case"mouseup":case"dragend":xf=!1,Z1(c,n,p);break;case"selectionchange":if(N6)break;case"keydown":case"keyup":Z1(c,n,p)}var w;if(Ip)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Da?vv(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(dv&&n.locale!=="ko"&&(Da||_!=="onCompositionStart"?_==="onCompositionEnd"&&Da&&(w=gv()):(ei=p,Up="value"in ei?ei.value:ei.textContent,Da=!0)),C=O0(l,_),0<C.length&&(_=new j1(_,t,null,n,p),c.push({event:_,listeners:C}),w?_.data=w:(w=yv(n),w!==null&&(_.data=w)))),(w=y6?m6(t,n):x6(t,n))&&(l=O0(l,"onBeforeInput"),0<l.length&&(p=new j1("onBeforeInput","beforeinput",null,n,p),c.push({event:p,listeners:l}),p.data=w))}Nv(c,e)})}function xs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function O0(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=ps(t,n),a!=null&&r.unshift(xs(t,a,i)),a=ps(t,e),a!=null&&r.push(xs(t,a,i))),t=t.return}return r}function ga(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ng(t,e,n,r,i){for(var a=e._reactName,o=[];n!==null&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&l!==null&&(s=l,i?(u=ps(n,a),u!=null&&o.unshift(xs(n,u,s))):i||(u=ps(n,a),u!=null&&o.push(xs(n,u,s)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var L6=/\r\n?/g,k6=/\u0000|\uFFFD/g;function rg(t){return(typeof t=="string"?t:""+t).replace(L6,`
`).replace(k6,"")}function fu(t,e,n){if(e=rg(e),rg(t)!==e&&n)throw Error(ce(425))}function b0(){}var Sf=null,Tf=null;function Cf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wf=typeof setTimeout=="function"?setTimeout:void 0,B6=typeof clearTimeout=="function"?clearTimeout:void 0,ig=typeof Promise=="function"?Promise:void 0,V6=typeof queueMicrotask=="function"?queueMicrotask:typeof ig<"u"?function(t){return ig.resolve(null).then(t).catch(A6)}:wf;function A6(t){setTimeout(function(){throw t})}function hl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ds(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ds(e)}function ci(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ag(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var mo=Math.random().toString(36).slice(2),or="__reactFiber$"+mo,Ss="__reactProps$"+mo,Rr="__reactContainer$"+mo,_f="__reactEvents$"+mo,U6="__reactListeners$"+mo,G6="__reactHandles$"+mo;function Pi(t){var e=t[or];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Rr]||n[or]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ag(t);t!==null;){if(n=t[or])return n;t=ag(t)}return e}t=n,n=t.parentNode}return null}function Ps(t){return t=t[or]||t[Rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Na(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function wc(t){return t[Ss]||null}var Ef=[],Ma=-1;function Si(t){return{current:t}}function it(t){0>Ma||(t.current=Ef[Ma],Ef[Ma]=null,Ma--)}function tt(t,e){Ma++,Ef[Ma]=t.current,t.current=e}var vi={},Wt=Si(vi),rn=Si(!1),Qi=vi;function eo(t,e){var n=t.type.contextTypes;if(!n)return vi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function an(t){return t=t.childContextTypes,t!=null}function N0(){it(rn),it(Wt)}function og(t,e,n){if(Wt.current!==vi)throw Error(ce(168));tt(Wt,e),tt(rn,n)}function Rv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ce(108,w8(t)||"Unknown",i));return ht({},n,r)}function M0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vi,Qi=Wt.current,tt(Wt,t),tt(rn,rn.current),!0}function sg(t,e,n){var r=t.stateNode;if(!r)throw Error(ce(169));n?(t=Rv(t,e,Qi),r.__reactInternalMemoizedMergedChildContext=t,it(rn),it(Wt),tt(Wt,t)):it(rn),tt(rn,n)}var Cr=null,_c=!1,gl=!1;function Fv(t){Cr===null?Cr=[t]:Cr.push(t)}function P6(t){_c=!0,Fv(t)}function Ti(){if(!gl&&Cr!==null){gl=!0;var t=0,e=Xe;try{var n=Cr;for(Xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Cr=null,_c=!1}catch(i){throw Cr!==null&&(Cr=Cr.slice(t+1)),rv(kp,Ti),i}finally{Xe=e,gl=!1}}return null}var Ra=[],Fa=0,R0=null,F0=0,Dn=[],On=0,Zi=null,Er=1,Dr="";function Li(t,e){Ra[Fa++]=F0,Ra[Fa++]=R0,R0=t,F0=e}function Lv(t,e,n){Dn[On++]=Er,Dn[On++]=Dr,Dn[On++]=Zi,Zi=t;var r=Er;t=Dr;var i=32-Kn(r)-1;r&=~(1<<i),n+=1;var a=32-Kn(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Er=1<<32-Kn(e)+i|n<<i|r,Dr=a+t}else Er=1<<a|n<<i|r,Dr=t}function Wp(t){t.return!==null&&(Li(t,1),Lv(t,1,0))}function jp(t){for(;t===R0;)R0=Ra[--Fa],Ra[Fa]=null,F0=Ra[--Fa],Ra[Fa]=null;for(;t===Zi;)Zi=Dn[--On],Dn[On]=null,Dr=Dn[--On],Dn[On]=null,Er=Dn[--On],Dn[On]=null}var vn=null,dn=null,st=!1,zn=null;function kv(t,e){var n=Nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ug(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,dn=ci(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zi!==null?{id:Er,overflow:Dr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vn=t,dn=null,!0):!1;default:return!1}}function Df(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Of(t){if(st){var e=dn;if(e){var n=e;if(!ug(t,e)){if(Df(t))throw Error(ce(418));e=ci(n.nextSibling);var r=vn;e&&ug(t,e)?kv(r,n):(t.flags=t.flags&-4097|2,st=!1,vn=t)}}else{if(Df(t))throw Error(ce(418));t.flags=t.flags&-4097|2,st=!1,vn=t}}}function cg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function pu(t){if(t!==vn)return!1;if(!st)return cg(t),st=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Cf(t.type,t.memoizedProps)),e&&(e=dn)){if(Df(t))throw Bv(),Error(ce(418));for(;e;)kv(t,e),e=ci(e.nextSibling)}if(cg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dn=ci(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dn=null}}else dn=vn?ci(t.stateNode.nextSibling):null;return!0}function Bv(){for(var t=dn;t;)t=ci(t.nextSibling)}function to(){dn=vn=null,st=!1}function $p(t){zn===null?zn=[t]:zn.push(t)}var I6=Vr.ReactCurrentBatchConfig;function bo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var r=n.stateNode}if(!r)throw Error(ce(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,t))}return t}function hu(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lg(t){var e=t._init;return e(t._payload)}function Vv(t){function e(m,g){if(t){var d=m.deletions;d===null?(m.deletions=[g],m.flags|=16):d.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function i(m,g){return m=hi(m,g),m.index=0,m.sibling=null,m}function a(m,g,d){return m.index=d,t?(d=m.alternate,d!==null?(d=d.index,d<g?(m.flags|=2,g):d):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function s(m,g,d,S){return g===null||g.tag!==6?(g=Tl(d,m.mode,S),g.return=m,g):(g=i(g,d),g.return=m,g)}function u(m,g,d,S){var T=d.type;return T===Ea?p(m,g,d.props.children,S,d.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Xr&&lg(T)===g.type)?(S=i(g,d.props),S.ref=bo(m,g,d),S.return=m,S):(S=i0(d.type,d.key,d.props,null,m.mode,S),S.ref=bo(m,g,d),S.return=m,S)}function l(m,g,d,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==d.containerInfo||g.stateNode.implementation!==d.implementation?(g=Cl(d,m.mode,S),g.return=m,g):(g=i(g,d.children||[]),g.return=m,g)}function p(m,g,d,S,T){return g===null||g.tag!==7?(g=Xi(d,m.mode,S,T),g.return=m,g):(g=i(g,d),g.return=m,g)}function c(m,g,d){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Tl(""+g,m.mode,d),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case nu:return d=i0(g.type,g.key,g.props,null,m.mode,d),d.ref=bo(m,null,g),d.return=m,d;case _a:return g=Cl(g,m.mode,d),g.return=m,g;case Xr:var S=g._init;return c(m,S(g._payload),d)}if(Bo(g)||wo(g))return g=Xi(g,m.mode,d,null),g.return=m,g;hu(m,g)}return null}function f(m,g,d,S){var T=g!==null?g.key:null;if(typeof d=="string"&&d!==""||typeof d=="number")return T!==null?null:s(m,g,""+d,S);if(typeof d=="object"&&d!==null){switch(d.$$typeof){case nu:return d.key===T?u(m,g,d,S):null;case _a:return d.key===T?l(m,g,d,S):null;case Xr:return T=d._init,f(m,g,T(d._payload),S)}if(Bo(d)||wo(d))return T!==null?null:p(m,g,d,S,null);hu(m,d)}return null}function h(m,g,d,S,T){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(d)||null,s(g,m,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case nu:return m=m.get(S.key===null?d:S.key)||null,u(g,m,S,T);case _a:return m=m.get(S.key===null?d:S.key)||null,l(g,m,S,T);case Xr:var C=S._init;return h(m,g,d,C(S._payload),T)}if(Bo(S)||wo(S))return m=m.get(d)||null,p(g,m,S,T,null);hu(g,S)}return null}function v(m,g,d,S){for(var T=null,C=null,w=g,_=g=0,E=null;w!==null&&_<d.length;_++){w.index>_?(E=w,w=null):E=w.sibling;var D=f(m,w,d[_],S);if(D===null){w===null&&(w=E);break}t&&w&&D.alternate===null&&e(m,w),g=a(D,g,_),C===null?T=D:C.sibling=D,C=D,w=E}if(_===d.length)return n(m,w),st&&Li(m,_),T;if(w===null){for(;_<d.length;_++)w=c(m,d[_],S),w!==null&&(g=a(w,g,_),C===null?T=w:C.sibling=w,C=w);return st&&Li(m,_),T}for(w=r(m,w);_<d.length;_++)E=h(w,m,_,d[_],S),E!==null&&(t&&E.alternate!==null&&w.delete(E.key===null?_:E.key),g=a(E,g,_),C===null?T=E:C.sibling=E,C=E);return t&&w.forEach(function(O){return e(m,O)}),st&&Li(m,_),T}function y(m,g,d,S){var T=wo(d);if(typeof T!="function")throw Error(ce(150));if(d=T.call(d),d==null)throw Error(ce(151));for(var C=T=null,w=g,_=g=0,E=null,D=d.next();w!==null&&!D.done;_++,D=d.next()){w.index>_?(E=w,w=null):E=w.sibling;var O=f(m,w,D.value,S);if(O===null){w===null&&(w=E);break}t&&w&&O.alternate===null&&e(m,w),g=a(O,g,_),C===null?T=O:C.sibling=O,C=O,w=E}if(D.done)return n(m,w),st&&Li(m,_),T;if(w===null){for(;!D.done;_++,D=d.next())D=c(m,D.value,S),D!==null&&(g=a(D,g,_),C===null?T=D:C.sibling=D,C=D);return st&&Li(m,_),T}for(w=r(m,w);!D.done;_++,D=d.next())D=h(w,m,_,D.value,S),D!==null&&(t&&D.alternate!==null&&w.delete(D.key===null?_:D.key),g=a(D,g,_),C===null?T=D:C.sibling=D,C=D);return t&&w.forEach(function(N){return e(m,N)}),st&&Li(m,_),T}function x(m,g,d,S){if(typeof d=="object"&&d!==null&&d.type===Ea&&d.key===null&&(d=d.props.children),typeof d=="object"&&d!==null){switch(d.$$typeof){case nu:e:{for(var T=d.key,C=g;C!==null;){if(C.key===T){if(T=d.type,T===Ea){if(C.tag===7){n(m,C.sibling),g=i(C,d.props.children),g.return=m,m=g;break e}}else if(C.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Xr&&lg(T)===C.type){n(m,C.sibling),g=i(C,d.props),g.ref=bo(m,C,d),g.return=m,m=g;break e}n(m,C);break}else e(m,C);C=C.sibling}d.type===Ea?(g=Xi(d.props.children,m.mode,S,d.key),g.return=m,m=g):(S=i0(d.type,d.key,d.props,null,m.mode,S),S.ref=bo(m,g,d),S.return=m,m=S)}return o(m);case _a:e:{for(C=d.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===d.containerInfo&&g.stateNode.implementation===d.implementation){n(m,g.sibling),g=i(g,d.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=Cl(d,m.mode,S),g.return=m,m=g}return o(m);case Xr:return C=d._init,x(m,g,C(d._payload),S)}if(Bo(d))return v(m,g,d,S);if(wo(d))return y(m,g,d,S);hu(m,d)}return typeof d=="string"&&d!==""||typeof d=="number"?(d=""+d,g!==null&&g.tag===6?(n(m,g.sibling),g=i(g,d),g.return=m,m=g):(n(m,g),g=Tl(d,m.mode,S),g.return=m,m=g),o(m)):n(m,g)}return x}var no=Vv(!0),Av=Vv(!1),L0=Si(null),k0=null,La=null,Hp=null;function Kp(){Hp=La=k0=null}function Xp(t){var e=L0.current;it(L0),t._currentValue=e}function bf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ja(t,e){k0=t,Hp=La=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tn=!0),t.firstContext=null)}function Rn(t){var e=t._currentValue;if(Hp!==t)if(t={context:t,memoizedValue:e,next:null},La===null){if(k0===null)throw Error(ce(308));La=t,k0.dependencies={lanes:0,firstContext:t}}else La=La.next=t;return e}var Ii=null;function qp(t){Ii===null?Ii=[t]:Ii.push(t)}function Uv(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,qp(e)):(n.next=i.next,i.next=n),e.interleaved=n,Fr(t,r)}function Fr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qr=!1;function Yp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function li(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,We&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fr(t,n)}return i=r.interleaved,i===null?(e.next=e,qp(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fr(t,n)}function Qu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bp(t,n)}}function fg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function B0(t,e,n,r){var i=t.updateQueue;qr=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var u=s,l=u.next;u.next=null,o===null?a=l:o.next=l,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,s=p.lastBaseUpdate,s!==o&&(s===null?p.firstBaseUpdate=l:s.next=l,p.lastBaseUpdate=u))}if(a!==null){var c=i.baseState;o=0,p=l=u=null,s=a;do{var f=s.lane,h=s.eventTime;if((r&f)===f){p!==null&&(p=p.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=t,y=s;switch(f=e,h=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){c=v.call(h,c,f);break e}c=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(h,c,f):v,f==null)break e;c=ht({},c,f);break e;case 2:qr=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},p===null?(l=p=h,u=c):p=p.next=h,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(p===null&&(u=c),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);ta|=o,t.lanes=o,t.memoizedState=c}}function pg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ce(191,i));i.call(r)}}}var Is={},ur=Si(Is),Ts=Si(Is),Cs=Si(Is);function zi(t){if(t===Is)throw Error(ce(174));return t}function Jp(t,e){switch(tt(Cs,e),tt(Ts,t),tt(ur,Is),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uf(e,t)}it(ur),tt(ur,e)}function ro(){it(ur),it(Ts),it(Cs)}function Pv(t){zi(Cs.current);var e=zi(ur.current),n=uf(e,t.type);e!==n&&(tt(Ts,t),tt(ur,n))}function Qp(t){Ts.current===t&&(it(ur),it(Ts))}var lt=Si(0);function V0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dl=[];function Zp(){for(var t=0;t<dl.length;t++)dl[t]._workInProgressVersionPrimary=null;dl.length=0}var Zu=Vr.ReactCurrentDispatcher,vl=Vr.ReactCurrentBatchConfig,ea=0,pt=null,_t=null,Nt=null,A0=!1,ts=!1,ws=0,z6=0;function Gt(){throw Error(ce(321))}function eh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qn(t[n],e[n]))return!1;return!0}function th(t,e,n,r,i,a){if(ea=a,pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zu.current=t===null||t.memoizedState===null?H6:K6,t=n(r,i),ts){a=0;do{if(ts=!1,ws=0,25<=a)throw Error(ce(301));a+=1,Nt=_t=null,e.updateQueue=null,Zu.current=X6,t=n(r,i)}while(ts)}if(Zu.current=U0,e=_t!==null&&_t.next!==null,ea=0,Nt=_t=pt=null,A0=!1,e)throw Error(ce(300));return t}function nh(){var t=ws!==0;return ws=0,t}function rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?pt.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function Fn(){if(_t===null){var t=pt.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=Nt===null?pt.memoizedState:Nt.next;if(e!==null)Nt=e,_t=t;else{if(t===null)throw Error(ce(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Nt===null?pt.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function _s(t,e){return typeof e=="function"?e(t):e}function yl(t){var e=Fn(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=_t,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var s=o=null,u=null,l=a;do{var p=l.lane;if((ea&p)===p)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var c={lane:p,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=c,o=r):u=u.next=c,pt.lanes|=p,ta|=p}l=l.next}while(l!==null&&l!==a);u===null?o=r:u.next=s,qn(r,e.memoizedState)||(tn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,pt.lanes|=a,ta|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ml(t){var e=Fn(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);qn(a,e.memoizedState)||(tn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Iv(){}function zv(t,e){var n=pt,r=Fn(),i=e(),a=!qn(r.memoizedState,i);if(a&&(r.memoizedState=i,tn=!0),r=r.queue,rh($v.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Nt!==null&&Nt.memoizedState.tag&1){if(n.flags|=2048,Es(9,jv.bind(null,n,r,i,e),void 0,null),Rt===null)throw Error(ce(349));ea&30||Wv(n,e,i)}return i}function Wv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function jv(t,e,n,r){e.value=n,e.getSnapshot=r,Hv(e)&&Kv(t)}function $v(t,e,n){return n(function(){Hv(e)&&Kv(t)})}function Hv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qn(t,n)}catch{return!0}}function Kv(t){var e=Fr(t,1);e!==null&&Xn(e,t,1,-1)}function hg(t){var e=rr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:t},e.queue=t,t=t.dispatch=$6.bind(null,pt,t),[e.memoizedState,t]}function Es(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Xv(){return Fn().memoizedState}function e0(t,e,n,r){var i=rr();pt.flags|=t,i.memoizedState=Es(1|e,n,void 0,r===void 0?null:r)}function Ec(t,e,n,r){var i=Fn();r=r===void 0?null:r;var a=void 0;if(_t!==null){var o=_t.memoizedState;if(a=o.destroy,r!==null&&eh(r,o.deps)){i.memoizedState=Es(e,n,a,r);return}}pt.flags|=t,i.memoizedState=Es(1|e,n,a,r)}function gg(t,e){return e0(8390656,8,t,e)}function rh(t,e){return Ec(2048,8,t,e)}function qv(t,e){return Ec(4,2,t,e)}function Yv(t,e){return Ec(4,4,t,e)}function Jv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Qv(t,e,n){return n=n!=null?n.concat([t]):null,Ec(4,4,Jv.bind(null,e,t),n)}function ih(){}function Zv(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&eh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function e3(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&eh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function t3(t,e,n){return ea&21?(qn(n,e)||(n=ov(),pt.lanes|=n,ta|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=n)}function W6(t,e){var n=Xe;Xe=n!==0&&4>n?n:4,t(!0);var r=vl.transition;vl.transition={};try{t(!1),e()}finally{Xe=n,vl.transition=r}}function n3(){return Fn().memoizedState}function j6(t,e,n){var r=pi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},r3(t))i3(e,n);else if(n=Uv(t,e,n,r),n!==null){var i=Jt();Xn(n,t,r,i),a3(n,e,r)}}function $6(t,e,n){var r=pi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(r3(t))i3(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,qn(s,o)){var u=e.interleaved;u===null?(i.next=i,qp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Uv(t,e,i,r),n!==null&&(i=Jt(),Xn(n,t,r,i),a3(n,e,r))}}function r3(t){var e=t.alternate;return t===pt||e!==null&&e===pt}function i3(t,e){ts=A0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function a3(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Bp(t,n)}}var U0={readContext:Rn,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},H6={readContext:Rn,useCallback:function(t,e){return rr().memoizedState=[t,e===void 0?null:e],t},useContext:Rn,useEffect:gg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,e0(4194308,4,Jv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return e0(4194308,4,t,e)},useInsertionEffect:function(t,e){return e0(4,2,t,e)},useMemo:function(t,e){var n=rr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=rr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=j6.bind(null,pt,t),[r.memoizedState,t]},useRef:function(t){var e=rr();return t={current:t},e.memoizedState=t},useState:hg,useDebugValue:ih,useDeferredValue:function(t){return rr().memoizedState=t},useTransition:function(){var t=hg(!1),e=t[0];return t=W6.bind(null,t[1]),rr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=pt,i=rr();if(st){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=e(),Rt===null)throw Error(ce(349));ea&30||Wv(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,gg($v.bind(null,r,a,t),[t]),r.flags|=2048,Es(9,jv.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=rr(),e=Rt.identifierPrefix;if(st){var n=Dr,r=Er;n=(r&~(1<<32-Kn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ws++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=z6++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},K6={readContext:Rn,useCallback:Zv,useContext:Rn,useEffect:rh,useImperativeHandle:Qv,useInsertionEffect:qv,useLayoutEffect:Yv,useMemo:e3,useReducer:yl,useRef:Xv,useState:function(){return yl(_s)},useDebugValue:ih,useDeferredValue:function(t){var e=Fn();return t3(e,_t.memoizedState,t)},useTransition:function(){var t=yl(_s)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:Iv,useSyncExternalStore:zv,useId:n3,unstable_isNewReconciler:!1},X6={readContext:Rn,useCallback:Zv,useContext:Rn,useEffect:rh,useImperativeHandle:Qv,useInsertionEffect:qv,useLayoutEffect:Yv,useMemo:e3,useReducer:ml,useRef:Xv,useState:function(){return ml(_s)},useDebugValue:ih,useDeferredValue:function(t){var e=Fn();return _t===null?e.memoizedState=t:t3(e,_t.memoizedState,t)},useTransition:function(){var t=ml(_s)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:Iv,useSyncExternalStore:zv,useId:n3,unstable_isNewReconciler:!1};function Un(t,e){if(t&&t.defaultProps){e=ht({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Nf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ht({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Dc={isMounted:function(t){return(t=t._reactInternals)?fa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jt(),i=pi(t),a=br(r,i);a.payload=e,n!=null&&(a.callback=n),e=li(t,a,i),e!==null&&(Xn(e,t,i,r),Qu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jt(),i=pi(t),a=br(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=li(t,a,i),e!==null&&(Xn(e,t,i,r),Qu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),r=pi(t),i=br(n,r);i.tag=2,e!=null&&(i.callback=e),e=li(t,i,r),e!==null&&(Xn(e,t,r,n),Qu(e,t,r))}};function dg(t,e,n,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!ys(n,r)||!ys(i,a):!0}function o3(t,e,n){var r=!1,i=vi,a=e.contextType;return typeof a=="object"&&a!==null?a=Rn(a):(i=an(e)?Qi:Wt.current,r=e.contextTypes,a=(r=r!=null)?eo(t,i):vi),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Dc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function vg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Dc.enqueueReplaceState(e,e.state,null)}function Mf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Yp(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Rn(a):(a=an(e)?Qi:Wt.current,i.context=eo(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Nf(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Dc.enqueueReplaceState(i,i.state,null),B0(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function io(t,e){try{var n="",r=e;do n+=C8(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function xl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Rf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var q6=typeof WeakMap=="function"?WeakMap:Map;function s3(t,e,n){n=br(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){P0||(P0=!0,If=r),Rf(t,e)},n}function u3(t,e,n){n=br(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Rf(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Rf(t,e),typeof r!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function yg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new q6;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=cx.bind(null,t,e,n),e.then(t,t))}function mg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=br(-1,1),e.tag=2,li(n,e,1))),n.lanes|=1),t)}var Y6=Vr.ReactCurrentOwner,tn=!1;function qt(t,e,n,r){e.child=t===null?Av(e,null,n,r):no(e,t.child,n,r)}function Sg(t,e,n,r,i){n=n.render;var a=e.ref;return ja(e,i),r=th(t,e,n,r,a,i),n=nh(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Lr(t,e,i)):(st&&n&&Wp(e),e.flags|=1,qt(t,e,r,i),e.child)}function Tg(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!ph(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,c3(t,e,a,r,i)):(t=i0(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:ys,n(o,r)&&t.ref===e.ref)return Lr(t,e,i)}return e.flags|=1,t=hi(a,r),t.ref=e.ref,t.return=e,e.child=t}function c3(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(ys(a,r)&&t.ref===e.ref)if(tn=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(tn=!0);else return e.lanes=t.lanes,Lr(t,e,i)}return Ff(t,e,n,r,i)}function l3(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(Ba,pn),pn|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,tt(Ba,pn),pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,tt(Ba,pn),pn|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,tt(Ba,pn),pn|=r;return qt(t,e,i,n),e.child}function f3(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ff(t,e,n,r,i){var a=an(n)?Qi:Wt.current;return a=eo(e,a),ja(e,i),n=th(t,e,n,r,a,i),r=nh(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Lr(t,e,i)):(st&&r&&Wp(e),e.flags|=1,qt(t,e,n,i),e.child)}function Cg(t,e,n,r,i){if(an(n)){var a=!0;M0(e)}else a=!1;if(ja(e,i),e.stateNode===null)t0(t,e),o3(e,n,r),Mf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Rn(l):(l=an(n)?Qi:Wt.current,l=eo(e,l));var p=n.getDerivedStateFromProps,c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||u!==l)&&vg(e,o,r,l),qr=!1;var f=e.memoizedState;o.state=f,B0(e,r,o,i),u=e.memoizedState,s!==r||f!==u||rn.current||qr?(typeof p=="function"&&(Nf(e,n,p,r),u=e.memoizedState),(s=qr||dg(e,n,s,r,f,u,l))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Gv(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:Un(e.type,s),o.props=l,c=e.pendingProps,f=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Rn(u):(u=an(n)?Qi:Wt.current,u=eo(e,u));var h=n.getDerivedStateFromProps;(p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==c||f!==u)&&vg(e,o,r,u),qr=!1,f=e.memoizedState,o.state=f,B0(e,r,o,i);var v=e.memoizedState;s!==c||f!==v||rn.current||qr?(typeof h=="function"&&(Nf(e,n,h,r),v=e.memoizedState),(l=qr||dg(e,n,l,r,f,v,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Lf(t,e,n,r,a,i)}function Lf(t,e,n,r,i,a){f3(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&sg(e,n,!1),Lr(t,e,a);r=e.stateNode,Y6.current=e;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=no(e,t.child,null,a),e.child=no(e,null,s,a)):qt(t,e,s,a),e.memoizedState=r.state,i&&sg(e,n,!0),e.child}function p3(t){var e=t.stateNode;e.pendingContext?og(t,e.pendingContext,e.pendingContext!==e.context):e.context&&og(t,e.context,!1),Jp(t,e.containerInfo)}function wg(t,e,n,r,i){return to(),$p(i),e.flags|=256,qt(t,e,n,r),e.child}var kf={dehydrated:null,treeContext:null,retryLane:0};function Bf(t){return{baseLanes:t,cachePool:null,transitions:null}}function h3(t,e,n){var r=e.pendingProps,i=lt.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),tt(lt,i&1),t===null)return Of(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Nc(o,r,0,null),t=Xi(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Bf(n),e.memoizedState=kf,t):ah(e,o));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return J6(t,e,o,r,s,i,n);if(a){a=r.fallback,o=e.mode,i=t.child,s=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=hi(i,u),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=hi(s,a):(a=Xi(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?Bf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=kf,r}return a=t.child,t=a.sibling,r=hi(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ah(t,e){return e=Nc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gu(t,e,n,r){return r!==null&&$p(r),no(e,t.child,null,n),t=ah(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function J6(t,e,n,r,i,a,o){if(n)return e.flags&256?(e.flags&=-257,r=xl(Error(ce(422))),gu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Nc({mode:"visible",children:r.children},i,0,null),a=Xi(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&no(e,t.child,null,o),e.child.memoizedState=Bf(o),e.memoizedState=kf,a);if(!(e.mode&1))return gu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,a=Error(ce(419)),r=xl(a,r,void 0),gu(t,e,o,r)}if(s=(o&t.childLanes)!==0,tn||s){if(r=Rt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Fr(t,i),Xn(r,t,i,-1))}return fh(),r=xl(Error(ce(421))),gu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=lx.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,dn=ci(i.nextSibling),vn=e,st=!0,zn=null,t!==null&&(Dn[On++]=Er,Dn[On++]=Dr,Dn[On++]=Zi,Er=t.id,Dr=t.overflow,Zi=e),e=ah(e,r.children),e.flags|=4096,e)}function _g(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bf(t.return,e,n)}function Sl(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function g3(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(qt(t,e,r.children,n),r=lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_g(t,n,e);else if(t.tag===19)_g(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(tt(lt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&V0(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Sl(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&V0(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Sl(e,!0,n,null,a);break;case"together":Sl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function t0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Lr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ta|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,n=hi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Q6(t,e,n){switch(e.tag){case 3:p3(e),to();break;case 5:Pv(e);break;case 1:an(e.type)&&M0(e);break;case 4:Jp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;tt(L0,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(tt(lt,lt.current&1),e.flags|=128,null):n&e.child.childLanes?h3(t,e,n):(tt(lt,lt.current&1),t=Lr(t,e,n),t!==null?t.sibling:null);tt(lt,lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return g3(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),tt(lt,lt.current),r)break;return null;case 22:case 23:return e.lanes=0,l3(t,e,n)}return Lr(t,e,n)}var d3,Vf,v3,y3;d3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vf=function(){};v3=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,zi(ur.current);var a=null;switch(n){case"input":i=rf(t,i),r=rf(t,r),a=[];break;case"select":i=ht({},i,{value:void 0}),r=ht({},r,{value:void 0}),a=[];break;case"textarea":i=sf(t,i),r=sf(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=b0)}cf(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ls.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var u=r[l];if(s=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(o in s)!s.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&s[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(a=a||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(ls.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&nt("scroll",t),a||s===u||(a=[])):(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(e.updateQueue=l)&&(e.flags|=4)}};y3=function(t,e,n,r){n!==r&&(e.flags|=4)};function No(t,e){if(!st)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Z6(t,e,n){var r=e.pendingProps;switch(jp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(e),null;case 1:return an(e.type)&&N0(),Pt(e),null;case 3:return r=e.stateNode,ro(),it(rn),it(Wt),Zp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zn!==null&&(jf(zn),zn=null))),Vf(t,e),Pt(e),null;case 5:Qp(e);var i=zi(Cs.current);if(n=e.type,t!==null&&e.stateNode!=null)v3(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ce(166));return Pt(e),null}if(t=zi(ur.current),pu(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[or]=e,r[Ss]=a,t=(e.mode&1)!==0,n){case"dialog":nt("cancel",r),nt("close",r);break;case"iframe":case"object":case"embed":nt("load",r);break;case"video":case"audio":for(i=0;i<Ao.length;i++)nt(Ao[i],r);break;case"source":nt("error",r);break;case"img":case"image":case"link":nt("error",r),nt("load",r);break;case"details":nt("toggle",r);break;case"input":L1(r,a),nt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},nt("invalid",r);break;case"textarea":B1(r,a),nt("invalid",r)}cf(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?r.textContent!==s&&(a.suppressHydrationWarning!==!0&&fu(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&fu(r.textContent,s,t),i=["children",""+s]):ls.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&nt("scroll",r)}switch(n){case"input":ru(r),k1(r,a,!0);break;case"textarea":ru(r),V1(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=b0)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$2(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[or]=e,t[Ss]=r,d3(t,e,!1,!1),e.stateNode=t;e:{switch(o=lf(n,r),n){case"dialog":nt("cancel",t),nt("close",t),i=r;break;case"iframe":case"object":case"embed":nt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ao.length;i++)nt(Ao[i],t);i=r;break;case"source":nt("error",t),i=r;break;case"img":case"image":case"link":nt("error",t),nt("load",t),i=r;break;case"details":nt("toggle",t),i=r;break;case"input":L1(t,r),i=rf(t,r),nt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ht({},r,{value:void 0}),nt("invalid",t);break;case"textarea":B1(t,r),i=sf(t,r),nt("invalid",t);break;default:i=r}cf(n,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="style"?X2(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&H2(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&fs(t,u):typeof u=="number"&&fs(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ls.hasOwnProperty(a)?u!=null&&a==="onScroll"&&nt("scroll",t):u!=null&&Np(t,a,u,o))}switch(n){case"input":ru(t),k1(t,r,!1);break;case"textarea":ru(t),V1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+di(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Pa(t,!!r.multiple,a,!1):r.defaultValue!=null&&Pa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=b0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pt(e),null;case 6:if(t&&e.stateNode!=null)y3(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ce(166));if(n=zi(Cs.current),zi(ur.current),pu(e)){if(r=e.stateNode,n=e.memoizedProps,r[or]=e,(a=r.nodeValue!==n)&&(t=vn,t!==null))switch(t.tag){case 3:fu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fu(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[or]=e,e.stateNode=r}return Pt(e),null;case 13:if(it(lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(st&&dn!==null&&e.mode&1&&!(e.flags&128))Bv(),to(),e.flags|=98560,a=!1;else if(a=pu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(ce(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ce(317));a[or]=e}else to(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pt(e),a=!1}else zn!==null&&(jf(zn),zn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?Et===0&&(Et=3):fh())),e.updateQueue!==null&&(e.flags|=4),Pt(e),null);case 4:return ro(),Vf(t,e),t===null&&ms(e.stateNode.containerInfo),Pt(e),null;case 10:return Xp(e.type._context),Pt(e),null;case 17:return an(e.type)&&N0(),Pt(e),null;case 19:if(it(lt),a=e.memoizedState,a===null)return Pt(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)No(a,!1);else{if(Et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=V0(t),o!==null){for(e.flags|=128,No(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return tt(lt,lt.current&1|2),e.child}t=t.sibling}a.tail!==null&&St()>ao&&(e.flags|=128,r=!0,No(a,!1),e.lanes=4194304)}else{if(!r)if(t=V0(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),No(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!st)return Pt(e),null}else 2*St()-a.renderingStartTime>ao&&n!==1073741824&&(e.flags|=128,r=!0,No(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=St(),e.sibling=null,n=lt.current,tt(lt,r?n&1|2:n&1),e):(Pt(e),null);case 22:case 23:return lh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?pn&1073741824&&(Pt(e),e.subtreeFlags&6&&(e.flags|=8192)):Pt(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function ex(t,e){switch(jp(e),e.tag){case 1:return an(e.type)&&N0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ro(),it(rn),it(Wt),Zp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qp(e),null;case 13:if(it(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));to()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(lt),null;case 4:return ro(),null;case 10:return Xp(e.type._context),null;case 22:case 23:return lh(),null;case 24:return null;default:return null}}var du=!1,It=!1,tx=typeof WeakSet=="function"?WeakSet:Set,ge=null;function ka(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dt(t,e,r)}else n.current=null}function Af(t,e,n){try{n()}catch(r){dt(t,e,r)}}var Eg=!1;function nx(t,e){if(Sf=E0,t=Cv(),zp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,s=-1,u=-1,l=0,p=0,c=t,f=null;t:for(;;){for(var h;c!==n||i!==0&&c.nodeType!==3||(s=o+i),c!==a||r!==0&&c.nodeType!==3||(u=o+r),c.nodeType===3&&(o+=c.nodeValue.length),(h=c.firstChild)!==null;)f=c,c=h;for(;;){if(c===t)break t;if(f===n&&++l===i&&(s=o),f===a&&++p===r&&(u=o),(h=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=h}n=s===-1||u===-1?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tf={focusedElem:t,selectionRange:n},E0=!1,ge=e;ge!==null;)if(e=ge,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ge=t;else for(;ge!==null;){e=ge;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,x=v.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:Un(e.type,y),x);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var d=e.stateNode.containerInfo;d.nodeType===1?d.textContent="":d.nodeType===9&&d.documentElement&&d.removeChild(d.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(S){dt(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,ge=t;break}ge=e.return}return v=Eg,Eg=!1,v}function ns(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Af(e,n,a)}i=i.next}while(i!==r)}}function Oc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Uf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function m3(t){var e=t.alternate;e!==null&&(t.alternate=null,m3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[or],delete e[Ss],delete e[_f],delete e[U6],delete e[G6])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function x3(t){return t.tag===5||t.tag===3||t.tag===4}function Dg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||x3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=b0));else if(r!==4&&(t=t.child,t!==null))for(Gf(t,e,n),t=t.sibling;t!==null;)Gf(t,e,n),t=t.sibling}function Pf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Pf(t,e,n),t=t.sibling;t!==null;)Pf(t,e,n),t=t.sibling}var Bt=null,Pn=!1;function Ur(t,e,n){for(n=n.child;n!==null;)S3(t,e,n),n=n.sibling}function S3(t,e,n){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(xc,n)}catch{}switch(n.tag){case 5:It||ka(n,e);case 6:var r=Bt,i=Pn;Bt=null,Ur(t,e,n),Bt=r,Pn=i,Bt!==null&&(Pn?(t=Bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Bt.removeChild(n.stateNode));break;case 18:Bt!==null&&(Pn?(t=Bt,n=n.stateNode,t.nodeType===8?hl(t.parentNode,n):t.nodeType===1&&hl(t,n),ds(t)):hl(Bt,n.stateNode));break;case 4:r=Bt,i=Pn,Bt=n.stateNode.containerInfo,Pn=!0,Ur(t,e,n),Bt=r,Pn=i;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Af(n,e,o),i=i.next}while(i!==r)}Ur(t,e,n);break;case 1:if(!It&&(ka(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){dt(n,e,s)}Ur(t,e,n);break;case 21:Ur(t,e,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,Ur(t,e,n),It=r):Ur(t,e,n);break;default:Ur(t,e,n)}}function Og(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tx),e.forEach(function(r){var i=fx.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:Bt=s.stateNode,Pn=!1;break e;case 3:Bt=s.stateNode.containerInfo,Pn=!0;break e;case 4:Bt=s.stateNode.containerInfo,Pn=!0;break e}s=s.return}if(Bt===null)throw Error(ce(160));S3(a,o,i),Bt=null,Pn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){dt(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)T3(e,t),e=e.sibling}function T3(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ln(e,t),Jn(t),r&4){try{ns(3,t,t.return),Oc(3,t)}catch(y){dt(t,t.return,y)}try{ns(5,t,t.return)}catch(y){dt(t,t.return,y)}}break;case 1:Ln(e,t),Jn(t),r&512&&n!==null&&ka(n,n.return);break;case 5:if(Ln(e,t),Jn(t),r&512&&n!==null&&ka(n,n.return),t.flags&32){var i=t.stateNode;try{fs(i,"")}catch(y){dt(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,s=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&W2(i,a),lf(s,o);var l=lf(s,a);for(o=0;o<u.length;o+=2){var p=u[o],c=u[o+1];p==="style"?X2(i,c):p==="dangerouslySetInnerHTML"?H2(i,c):p==="children"?fs(i,c):Np(i,p,c,l)}switch(s){case"input":af(i,a);break;case"textarea":j2(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?Pa(i,!!a.multiple,h,!1):f!==!!a.multiple&&(a.defaultValue!=null?Pa(i,!!a.multiple,a.defaultValue,!0):Pa(i,!!a.multiple,a.multiple?[]:"",!1))}i[Ss]=a}catch(y){dt(t,t.return,y)}}break;case 6:if(Ln(e,t),Jn(t),r&4){if(t.stateNode===null)throw Error(ce(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(y){dt(t,t.return,y)}}break;case 3:if(Ln(e,t),Jn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ds(e.containerInfo)}catch(y){dt(t,t.return,y)}break;case 4:Ln(e,t),Jn(t);break;case 13:Ln(e,t),Jn(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(uh=St())),r&4&&Og(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(It=(l=It)||p,Ln(e,t),It=l):Ln(e,t),Jn(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!p&&t.mode&1)for(ge=t,p=t.child;p!==null;){for(c=ge=p;ge!==null;){switch(f=ge,h=f.child,f.tag){case 0:case 11:case 14:case 15:ns(4,f,f.return);break;case 1:ka(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){dt(r,n,y)}}break;case 5:ka(f,f.return);break;case 22:if(f.memoizedState!==null){Ng(c);continue}}h!==null?(h.return=f,ge=h):Ng(c)}p=p.sibling}e:for(p=null,c=t;;){if(c.tag===5){if(p===null){p=c;try{i=c.stateNode,l?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=c.stateNode,u=c.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=K2("display",o))}catch(y){dt(t,t.return,y)}}}else if(c.tag===6){if(p===null)try{c.stateNode.nodeValue=l?"":c.memoizedProps}catch(y){dt(t,t.return,y)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;p===c&&(p=null),c=c.return}p===c&&(p=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Ln(e,t),Jn(t),r&4&&Og(t);break;case 21:break;default:Ln(e,t),Jn(t)}}function Jn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(x3(n)){var r=n;break e}n=n.return}throw Error(ce(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(fs(i,""),r.flags&=-33);var a=Dg(t);Pf(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,s=Dg(t);Gf(t,s,o);break;default:throw Error(ce(161))}}catch(u){dt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rx(t,e,n){ge=t,C3(t)}function C3(t,e,n){for(var r=(t.mode&1)!==0;ge!==null;){var i=ge,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||du;if(!o){var s=i.alternate,u=s!==null&&s.memoizedState!==null||It;s=du;var l=It;if(du=o,(It=u)&&!l)for(ge=i;ge!==null;)o=ge,u=o.child,o.tag===22&&o.memoizedState!==null?Mg(i):u!==null?(u.return=o,ge=u):Mg(i);for(;a!==null;)ge=a,C3(a),a=a.sibling;ge=i,du=s,It=l}bg(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ge=a):bg(t)}}function bg(t){for(;ge!==null;){var e=ge;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||Oc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Un(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&pg(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}pg(e,o,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var p=l.memoizedState;if(p!==null){var c=p.dehydrated;c!==null&&ds(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}It||e.flags&512&&Uf(e)}catch(f){dt(e,e.return,f)}}if(e===t){ge=null;break}if(n=e.sibling,n!==null){n.return=e.return,ge=n;break}ge=e.return}}function Ng(t){for(;ge!==null;){var e=ge;if(e===t){ge=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ge=n;break}ge=e.return}}function Mg(t){for(;ge!==null;){var e=ge;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Oc(4,e)}catch(u){dt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){dt(e,i,u)}}var a=e.return;try{Uf(e)}catch(u){dt(e,a,u)}break;case 5:var o=e.return;try{Uf(e)}catch(u){dt(e,o,u)}}}catch(u){dt(e,e.return,u)}if(e===t){ge=null;break}var s=e.sibling;if(s!==null){s.return=e.return,ge=s;break}ge=e.return}}var ix=Math.ceil,G0=Vr.ReactCurrentDispatcher,oh=Vr.ReactCurrentOwner,Mn=Vr.ReactCurrentBatchConfig,We=0,Rt=null,Ct=null,Vt=0,pn=0,Ba=Si(0),Et=0,Ds=null,ta=0,bc=0,sh=0,rs=null,en=null,uh=0,ao=1/0,xr=null,P0=!1,If=null,fi=null,vu=!1,ti=null,I0=0,is=0,zf=null,n0=-1,r0=0;function Jt(){return We&6?St():n0!==-1?n0:n0=St()}function pi(t){return t.mode&1?We&2&&Vt!==0?Vt&-Vt:I6.transition!==null?(r0===0&&(r0=ov()),r0):(t=Xe,t!==0||(t=window.event,t=t===void 0?16:hv(t.type)),t):1}function Xn(t,e,n,r){if(50<is)throw is=0,zf=null,Error(ce(185));Us(t,n,r),(!(We&2)||t!==Rt)&&(t===Rt&&(!(We&2)&&(bc|=n),Et===4&&Qr(t,Vt)),on(t,r),n===1&&We===0&&!(e.mode&1)&&(ao=St()+500,_c&&Ti()))}function on(t,e){var n=t.callbackNode;I8(t,e);var r=_0(t,t===Rt?Vt:0);if(r===0)n!==null&&G1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&G1(n),e===1)t.tag===0?P6(Rg.bind(null,t)):Fv(Rg.bind(null,t)),V6(function(){!(We&6)&&Ti()}),n=null;else{switch(sv(r)){case 1:n=kp;break;case 4:n=iv;break;case 16:n=w0;break;case 536870912:n=av;break;default:n=w0}n=M3(n,w3.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function w3(t,e){if(n0=-1,r0=0,We&6)throw Error(ce(327));var n=t.callbackNode;if($a()&&t.callbackNode!==n)return null;var r=_0(t,t===Rt?Vt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=z0(t,r);else{e=r;var i=We;We|=2;var a=E3();(Rt!==t||Vt!==e)&&(xr=null,ao=St()+500,Ki(t,e));do try{sx();break}catch(s){_3(t,s)}while(!0);Kp(),G0.current=a,We=i,Ct!==null?e=0:(Rt=null,Vt=0,e=Et)}if(e!==0){if(e===2&&(i=df(t),i!==0&&(r=i,e=Wf(t,i))),e===1)throw n=Ds,Ki(t,0),Qr(t,r),on(t,St()),n;if(e===6)Qr(t,r);else{if(i=t.current.alternate,!(r&30)&&!ax(i)&&(e=z0(t,r),e===2&&(a=df(t),a!==0&&(r=a,e=Wf(t,a))),e===1))throw n=Ds,Ki(t,0),Qr(t,r),on(t,St()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ce(345));case 2:ki(t,en,xr);break;case 3:if(Qr(t,r),(r&130023424)===r&&(e=uh+500-St(),10<e)){if(_0(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Jt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=wf(ki.bind(null,t,en,xr),e);break}ki(t,en,xr);break;case 4:if(Qr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Kn(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=St()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ix(r/1960))-r,10<r){t.timeoutHandle=wf(ki.bind(null,t,en,xr),r);break}ki(t,en,xr);break;case 5:ki(t,en,xr);break;default:throw Error(ce(329))}}}return on(t,St()),t.callbackNode===n?w3.bind(null,t):null}function Wf(t,e){var n=rs;return t.current.memoizedState.isDehydrated&&(Ki(t,e).flags|=256),t=z0(t,e),t!==2&&(e=en,en=n,e!==null&&jf(e)),t}function jf(t){en===null?en=t:en.push.apply(en,t)}function ax(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!qn(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qr(t,e){for(e&=~sh,e&=~bc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kn(e),r=1<<n;t[n]=-1,e&=~r}}function Rg(t){if(We&6)throw Error(ce(327));$a();var e=_0(t,0);if(!(e&1))return on(t,St()),null;var n=z0(t,e);if(t.tag!==0&&n===2){var r=df(t);r!==0&&(e=r,n=Wf(t,r))}if(n===1)throw n=Ds,Ki(t,0),Qr(t,e),on(t,St()),n;if(n===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ki(t,en,xr),on(t,St()),null}function ch(t,e){var n=We;We|=1;try{return t(e)}finally{We=n,We===0&&(ao=St()+500,_c&&Ti())}}function na(t){ti!==null&&ti.tag===0&&!(We&6)&&$a();var e=We;We|=1;var n=Mn.transition,r=Xe;try{if(Mn.transition=null,Xe=1,t)return t()}finally{Xe=r,Mn.transition=n,We=e,!(We&6)&&Ti()}}function lh(){pn=Ba.current,it(Ba)}function Ki(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,B6(n)),Ct!==null)for(n=Ct.return;n!==null;){var r=n;switch(jp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&N0();break;case 3:ro(),it(rn),it(Wt),Zp();break;case 5:Qp(r);break;case 4:ro();break;case 13:it(lt);break;case 19:it(lt);break;case 10:Xp(r.type._context);break;case 22:case 23:lh()}n=n.return}if(Rt=t,Ct=t=hi(t.current,null),Vt=pn=e,Et=0,Ds=null,sh=bc=ta=0,en=rs=null,Ii!==null){for(e=0;e<Ii.length;e++)if(n=Ii[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}Ii=null}return t}function _3(t,e){do{var n=Ct;try{if(Kp(),Zu.current=U0,A0){for(var r=pt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}A0=!1}if(ea=0,Nt=_t=pt=null,ts=!1,ws=0,oh.current=null,n===null||n.return===null){Et=1,Ds=e,Ct=null;break}e:{var a=t,o=n.return,s=n,u=e;if(e=Vt,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,p=s,c=p.tag;if(!(p.mode&1)&&(c===0||c===11||c===15)){var f=p.alternate;f?(p.updateQueue=f.updateQueue,p.memoizedState=f.memoizedState,p.lanes=f.lanes):(p.updateQueue=null,p.memoizedState=null)}var h=mg(o);if(h!==null){h.flags&=-257,xg(h,o,s,a,e),h.mode&1&&yg(a,l,e),e=h,u=l;var v=e.updateQueue;if(v===null){var y=new Set;y.add(u),e.updateQueue=y}else v.add(u);break e}else{if(!(e&1)){yg(a,l,e),fh();break e}u=Error(ce(426))}}else if(st&&s.mode&1){var x=mg(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),xg(x,o,s,a,e),$p(io(u,s));break e}}a=u=io(u,s),Et!==4&&(Et=2),rs===null?rs=[a]:rs.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var m=s3(a,u,e);fg(a,m);break e;case 1:s=u;var g=a.type,d=a.stateNode;if(!(a.flags&128)&&(typeof g.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(fi===null||!fi.has(d)))){a.flags|=65536,e&=-e,a.lanes|=e;var S=u3(a,s,e);fg(a,S);break e}}a=a.return}while(a!==null)}O3(n)}catch(T){e=T,Ct===n&&n!==null&&(Ct=n=n.return);continue}break}while(!0)}function E3(){var t=G0.current;return G0.current=U0,t===null?U0:t}function fh(){(Et===0||Et===3||Et===2)&&(Et=4),Rt===null||!(ta&268435455)&&!(bc&268435455)||Qr(Rt,Vt)}function z0(t,e){var n=We;We|=2;var r=E3();(Rt!==t||Vt!==e)&&(xr=null,Ki(t,e));do try{ox();break}catch(i){_3(t,i)}while(!0);if(Kp(),We=n,G0.current=r,Ct!==null)throw Error(ce(261));return Rt=null,Vt=0,Et}function ox(){for(;Ct!==null;)D3(Ct)}function sx(){for(;Ct!==null&&!F8();)D3(Ct)}function D3(t){var e=N3(t.alternate,t,pn);t.memoizedProps=t.pendingProps,e===null?O3(t):Ct=e,oh.current=null}function O3(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ex(n,e),n!==null){n.flags&=32767,Ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Et=6,Ct=null;return}}else if(n=Z6(n,e,pn),n!==null){Ct=n;return}if(e=e.sibling,e!==null){Ct=e;return}Ct=e=t}while(e!==null);Et===0&&(Et=5)}function ki(t,e,n){var r=Xe,i=Mn.transition;try{Mn.transition=null,Xe=1,ux(t,e,n,r)}finally{Mn.transition=i,Xe=r}return null}function ux(t,e,n,r){do $a();while(ti!==null);if(We&6)throw Error(ce(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(z8(t,a),t===Rt&&(Ct=Rt=null,Vt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vu||(vu=!0,M3(w0,function(){return $a(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Mn.transition,Mn.transition=null;var o=Xe;Xe=1;var s=We;We|=4,oh.current=null,nx(t,n),T3(n,t),b6(Tf),E0=!!Sf,Tf=Sf=null,t.current=n,rx(n),L8(),We=s,Xe=o,Mn.transition=a}else t.current=n;if(vu&&(vu=!1,ti=t,I0=i),a=t.pendingLanes,a===0&&(fi=null),V8(n.stateNode),on(t,St()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(P0)throw P0=!1,t=If,If=null,t;return I0&1&&t.tag!==0&&$a(),a=t.pendingLanes,a&1?t===zf?is++:(is=0,zf=t):is=0,Ti(),null}function $a(){if(ti!==null){var t=sv(I0),e=Mn.transition,n=Xe;try{if(Mn.transition=null,Xe=16>t?16:t,ti===null)var r=!1;else{if(t=ti,ti=null,I0=0,We&6)throw Error(ce(331));var i=We;for(We|=4,ge=t.current;ge!==null;){var a=ge,o=a.child;if(ge.flags&16){var s=a.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(ge=l;ge!==null;){var p=ge;switch(p.tag){case 0:case 11:case 15:ns(8,p,a)}var c=p.child;if(c!==null)c.return=p,ge=c;else for(;ge!==null;){p=ge;var f=p.sibling,h=p.return;if(m3(p),p===l){ge=null;break}if(f!==null){f.return=h,ge=f;break}ge=h}}}var v=a.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}ge=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ge=o;else e:for(;ge!==null;){if(a=ge,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ns(9,a,a.return)}var m=a.sibling;if(m!==null){m.return=a.return,ge=m;break e}ge=a.return}}var g=t.current;for(ge=g;ge!==null;){o=ge;var d=o.child;if(o.subtreeFlags&2064&&d!==null)d.return=o,ge=d;else e:for(o=g;ge!==null;){if(s=ge,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Oc(9,s)}}catch(T){dt(s,s.return,T)}if(s===o){ge=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,ge=S;break e}ge=s.return}}if(We=i,Ti(),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(xc,t)}catch{}r=!0}return r}finally{Xe=n,Mn.transition=e}}return!1}function Fg(t,e,n){e=io(n,e),e=s3(t,e,1),t=li(t,e,1),e=Jt(),t!==null&&(Us(t,1,e),on(t,e))}function dt(t,e,n){if(t.tag===3)Fg(t,t,n);else for(;e!==null;){if(e.tag===3){Fg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fi===null||!fi.has(r))){t=io(n,t),t=u3(e,t,1),e=li(e,t,1),t=Jt(),e!==null&&(Us(e,1,t),on(e,t));break}}e=e.return}}function cx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,Rt===t&&(Vt&n)===n&&(Et===4||Et===3&&(Vt&130023424)===Vt&&500>St()-uh?Ki(t,0):sh|=n),on(t,e)}function b3(t,e){e===0&&(t.mode&1?(e=ou,ou<<=1,!(ou&130023424)&&(ou=4194304)):e=1);var n=Jt();t=Fr(t,e),t!==null&&(Us(t,e,n),on(t,n))}function lx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),b3(t,n)}function fx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ce(314))}r!==null&&r.delete(e),b3(t,n)}var N3;N3=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rn.current)tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tn=!1,Q6(t,e,n);tn=!!(t.flags&131072)}else tn=!1,st&&e.flags&1048576&&Lv(e,F0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;t0(t,e),t=e.pendingProps;var i=eo(e,Wt.current);ja(e,n),i=th(null,e,r,t,i,n);var a=nh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,an(r)?(a=!0,M0(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Yp(e),i.updater=Dc,e.stateNode=i,i._reactInternals=e,Mf(e,r,t,n),e=Lf(null,e,r,!0,a,n)):(e.tag=0,st&&a&&Wp(e),qt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(t0(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=hx(r),t=Un(r,t),i){case 0:e=Ff(null,e,r,t,n);break e;case 1:e=Cg(null,e,r,t,n);break e;case 11:e=Sg(null,e,r,t,n);break e;case 14:e=Tg(null,e,r,Un(r.type,t),n);break e}throw Error(ce(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),Ff(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),Cg(t,e,r,i,n);case 3:e:{if(p3(e),t===null)throw Error(ce(387));r=e.pendingProps,a=e.memoizedState,i=a.element,Gv(t,e),B0(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=io(Error(ce(423)),e),e=wg(t,e,r,n,i);break e}else if(r!==i){i=io(Error(ce(424)),e),e=wg(t,e,r,n,i);break e}else for(dn=ci(e.stateNode.containerInfo.firstChild),vn=e,st=!0,zn=null,n=Av(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(to(),r===i){e=Lr(t,e,n);break e}qt(t,e,r,n)}e=e.child}return e;case 5:return Pv(e),t===null&&Of(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Cf(r,i)?o=null:a!==null&&Cf(r,a)&&(e.flags|=32),f3(t,e),qt(t,e,o,n),e.child;case 6:return t===null&&Of(e),null;case 13:return h3(t,e,n);case 4:return Jp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=no(e,null,r,n):qt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),Sg(t,e,r,i,n);case 7:return qt(t,e,e.pendingProps,n),e.child;case 8:return qt(t,e,e.pendingProps.children,n),e.child;case 12:return qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,tt(L0,r._currentValue),r._currentValue=o,a!==null)if(qn(a.value,o)){if(a.children===i.children&&!rn.current){e=Lr(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=br(-1,n&-n),u.tag=2;var l=a.updateQueue;if(l!==null){l=l.shared;var p=l.pending;p===null?u.next=u:(u.next=p.next,p.next=u),l.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),bf(a.return,n,e),s.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ce(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),bf(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}qt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ja(e,n),i=Rn(i),r=r(i),e.flags|=1,qt(t,e,r,n),e.child;case 14:return r=e.type,i=Un(r,e.pendingProps),i=Un(r.type,i),Tg(t,e,r,i,n);case 15:return c3(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Un(r,i),t0(t,e),e.tag=1,an(r)?(t=!0,M0(e)):t=!1,ja(e,n),o3(e,r,i),Mf(e,r,i,n),Lf(null,e,r,!0,t,n);case 19:return g3(t,e,n);case 22:return l3(t,e,n)}throw Error(ce(156,e.tag))};function M3(t,e){return rv(t,e)}function px(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,n,r){return new px(t,e,n,r)}function ph(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hx(t){if(typeof t=="function")return ph(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rp)return 11;if(t===Fp)return 14}return 2}function hi(t,e){var n=t.alternate;return n===null?(n=Nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function i0(t,e,n,r,i,a){var o=2;if(r=t,typeof t=="function")ph(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ea:return Xi(n.children,i,a,e);case Mp:o=8,i|=8;break;case Zl:return t=Nn(12,n,e,i|2),t.elementType=Zl,t.lanes=a,t;case ef:return t=Nn(13,n,e,i),t.elementType=ef,t.lanes=a,t;case tf:return t=Nn(19,n,e,i),t.elementType=tf,t.lanes=a,t;case P2:return Nc(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U2:o=10;break e;case G2:o=9;break e;case Rp:o=11;break e;case Fp:o=14;break e;case Xr:o=16,r=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=Nn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Xi(t,e,n,r){return t=Nn(7,t,r,e),t.lanes=n,t}function Nc(t,e,n,r){return t=Nn(22,t,r,e),t.elementType=P2,t.lanes=n,t.stateNode={isHidden:!1},t}function Tl(t,e,n){return t=Nn(6,t,null,e),t.lanes=n,t}function Cl(t,e,n){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gx(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nl(0),this.expirationTimes=nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function hh(t,e,n,r,i,a,o,s,u){return t=new gx(t,e,n,s,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Nn(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yp(a),t}function dx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_a,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function R3(t){if(!t)return vi;t=t._reactInternals;e:{if(fa(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(an(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var n=t.type;if(an(n))return Rv(t,n,e)}return e}function F3(t,e,n,r,i,a,o,s,u){return t=hh(n,r,!0,t,i,a,o,s,u),t.context=R3(null),n=t.current,r=Jt(),i=pi(n),a=br(r,i),a.callback=e??null,li(n,a,i),t.current.lanes=i,Us(t,i,r),on(t,r),t}function Mc(t,e,n,r){var i=e.current,a=Jt(),o=pi(i);return n=R3(n),e.context===null?e.context=n:e.pendingContext=n,e=br(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=li(i,e,o),t!==null&&(Xn(t,i,o,a),Qu(t,i,o)),o}function W0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function gh(t,e){Lg(t,e),(t=t.alternate)&&Lg(t,e)}function vx(){return null}var L3=typeof reportError=="function"?reportError:function(t){console.error(t)};function dh(t){this._internalRoot=t}Rc.prototype.render=dh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));Mc(t,e,null,null)};Rc.prototype.unmount=dh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;na(function(){Mc(null,t,null,null)}),e[Rr]=null}};function Rc(t){this._internalRoot=t}Rc.prototype.unstable_scheduleHydration=function(t){if(t){var e=lv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Jr.length&&e!==0&&e<Jr[n].priority;n++);Jr.splice(n,0,t),n===0&&pv(t)}};function vh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kg(){}function yx(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var l=W0(o);a.call(l)}}var o=F3(e,r,t,0,null,!1,!1,"",kg);return t._reactRootContainer=o,t[Rr]=o.current,ms(t.nodeType===8?t.parentNode:t),na(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var l=W0(u);s.call(l)}}var u=hh(t,0,!1,null,null,!1,!1,"",kg);return t._reactRootContainer=u,t[Rr]=u.current,ms(t.nodeType===8?t.parentNode:t),na(function(){Mc(e,u,n,r)}),u}function Lc(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var u=W0(o);s.call(u)}}Mc(e,o,t,i)}else o=yx(n,e,t,i,r);return W0(o)}uv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Vo(e.pendingLanes);n!==0&&(Bp(e,n|1),on(e,St()),!(We&6)&&(ao=St()+500,Ti()))}break;case 13:na(function(){var r=Fr(t,1);if(r!==null){var i=Jt();Xn(r,t,1,i)}}),gh(t,1)}};Vp=function(t){if(t.tag===13){var e=Fr(t,134217728);if(e!==null){var n=Jt();Xn(e,t,134217728,n)}gh(t,134217728)}};cv=function(t){if(t.tag===13){var e=pi(t),n=Fr(t,e);if(n!==null){var r=Jt();Xn(n,t,e,r)}gh(t,e)}};lv=function(){return Xe};fv=function(t,e){var n=Xe;try{return Xe=t,e()}finally{Xe=n}};pf=function(t,e,n){switch(e){case"input":if(af(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wc(r);if(!i)throw Error(ce(90));z2(r),af(r,i)}}}break;case"textarea":j2(t,n);break;case"select":e=n.value,e!=null&&Pa(t,!!n.multiple,e,!1)}};J2=ch;Q2=na;var mx={usingClientEntryPoint:!1,Events:[Ps,Na,wc,q2,Y2,ch]},Mo={findFiberByHostInstance:Pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xx={bundleType:Mo.bundleType,version:Mo.version,rendererPackageName:Mo.rendererPackageName,rendererConfig:Mo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tv(t),t===null?null:t.stateNode},findFiberByHostInstance:Mo.findFiberByHostInstance||vx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yu.isDisabled&&yu.supportsFiber)try{xc=yu.inject(xx),sr=yu}catch{}}mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mx;mn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vh(e))throw Error(ce(200));return dx(t,e,null,n)};mn.createRoot=function(t,e){if(!vh(t))throw Error(ce(299));var n=!1,r="",i=L3;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=hh(t,1,!1,null,null,n,!1,r,i),t[Rr]=e.current,ms(t.nodeType===8?t.parentNode:t),new dh(e)};mn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=tv(e),t=t===null?null:t.stateNode,t};mn.flushSync=function(t){return na(t)};mn.hydrate=function(t,e,n){if(!Fc(e))throw Error(ce(200));return Lc(null,t,e,!0,n)};mn.hydrateRoot=function(t,e,n){if(!vh(t))throw Error(ce(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=L3;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=F3(e,null,t,1,n??null,i,!1,a,o),t[Rr]=e.current,ms(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Rc(e)};mn.render=function(t,e,n){if(!Fc(e))throw Error(ce(200));return Lc(null,t,e,!1,n)};mn.unmountComponentAtNode=function(t){if(!Fc(t))throw Error(ce(40));return t._reactRootContainer?(na(function(){Lc(null,null,t,!1,function(){t._reactRootContainer=null,t[Rr]=null})}),!0):!1};mn.unstable_batchedUpdates=ch;mn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Fc(n))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return Lc(t,e,n,!1,r)};mn.version="18.3.1-next-f1338f8080-20240426";function k3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(k3)}catch(t){console.error(t)}}k3(),k2.exports=mn;var Sx=k2.exports,B3,Bg=Sx;B3=Bg.createRoot,Bg.hydrateRoot;var Ie=1e-6,Ft=typeof Float32Array<"u"?Float32Array:Array,Tx=Math.PI/180;function Cx(t){return t*Tx}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function yh(){var t=new Ft(9);return Ft!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function kc(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function wx(t){var e=new Ft(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function _x(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ex(t,e,n,r,i,a,o,s,u){var l=new Ft(9);return l[0]=t,l[1]=e,l[2]=n,l[3]=r,l[4]=i,l[5]=a,l[6]=o,l[7]=s,l[8]=u,l}function V3(t,e,n,r,i,a,o,s,u,l){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t[8]=l,t}function gr(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function mh(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function zs(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],p=e[8],c=p*o-s*l,f=-p*a+s*u,h=l*a-o*u,v=n*c+r*f+i*h;return v?(v=1/v,t[0]=c*v,t[1]=(-p*r+i*l)*v,t[2]=(s*r-i*o)*v,t[3]=f*v,t[4]=(p*n-i*u)*v,t[5]=(-s*n+i*a)*v,t[6]=h*v,t[7]=(-l*n+r*u)*v,t[8]=(o*n-r*a)*v,t):null}function Dx(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],p=e[8];return t[0]=o*p-s*l,t[1]=i*l-r*p,t[2]=r*s-i*o,t[3]=s*u-a*p,t[4]=n*p-i*u,t[5]=i*a-n*s,t[6]=a*l-o*u,t[7]=r*u-n*l,t[8]=n*o-r*a,t}function Ox(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=t[8];return e*(l*a-o*u)+n*(-l*i+o*s)+r*(u*i-a*s)}function j0(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],p=e[7],c=e[8],f=n[0],h=n[1],v=n[2],y=n[3],x=n[4],m=n[5],g=n[6],d=n[7],S=n[8];return t[0]=f*r+h*o+v*l,t[1]=f*i+h*s+v*p,t[2]=f*a+h*u+v*c,t[3]=y*r+x*o+m*l,t[4]=y*i+x*s+m*p,t[5]=y*a+x*u+m*c,t[6]=g*r+d*o+S*l,t[7]=g*i+d*s+S*p,t[8]=g*a+d*u+S*c,t}function bx(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],p=e[7],c=e[8],f=n[0],h=n[1];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=f*r+h*o+l,t[7]=f*i+h*s+p,t[8]=f*a+h*u+c,t}function Nx(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],p=e[7],c=e[8],f=Math.sin(n),h=Math.cos(n);return t[0]=h*r+f*o,t[1]=h*i+f*s,t[2]=h*a+f*u,t[3]=h*o-f*r,t[4]=h*s-f*i,t[5]=h*u-f*a,t[6]=l,t[7]=p,t[8]=c,t}function Mx(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Rx(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Fx(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Lx(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function kx(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Bx(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,u=i+i,l=n*o,p=r*o,c=r*s,f=i*o,h=i*s,v=i*u,y=a*o,x=a*s,m=a*u;return t[0]=1-c-v,t[3]=p-m,t[6]=f+x,t[1]=p+m,t[4]=1-l-v,t[7]=h-y,t[2]=f-x,t[5]=h+y,t[8]=1-l-c,t}function Vx(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],p=e[8],c=e[9],f=e[10],h=e[11],v=e[12],y=e[13],x=e[14],m=e[15],g=n*s-r*o,d=n*u-i*o,S=n*l-a*o,T=r*u-i*s,C=r*l-a*s,w=i*l-a*u,_=p*y-c*v,E=p*x-f*v,D=p*m-h*v,O=c*x-f*y,N=c*m-h*y,R=f*m-h*x,M=g*R-d*N+S*O+T*D-C*E+w*_;return M?(M=1/M,t[0]=(s*R-u*N+l*O)*M,t[1]=(u*D-o*R-l*E)*M,t[2]=(o*N-s*D+l*_)*M,t[3]=(i*N-r*R-a*O)*M,t[4]=(n*R-i*D+a*E)*M,t[5]=(r*D-n*N-a*_)*M,t[6]=(y*w-x*C+m*T)*M,t[7]=(x*S-v*w-m*d)*M,t[8]=(v*C-y*S+m*g)*M,t):null}function Ax(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Ux(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Gx(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Px(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function A3(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Ix(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function zx(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Wx(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function jx(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],p=t[8],c=e[0],f=e[1],h=e[2],v=e[3],y=e[4],x=e[5],m=e[6],g=e[7],d=e[8];return Math.abs(n-c)<=Ie*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-f)<=Ie*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-h)<=Ie*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-v)<=Ie*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(o-y)<=Ie*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(s-x)<=Ie*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(u-m)<=Ie*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(l-g)<=Ie*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(p-d)<=Ie*Math.max(1,Math.abs(p),Math.abs(d))}var $x=j0,Hx=A3;const Kx=Object.freeze(Object.defineProperty({__proto__:null,add:Px,adjoint:Dx,clone:wx,copy:_x,create:yh,determinant:Ox,equals:jx,exactEquals:Wx,frob:Gx,fromMat2d:kx,fromMat4:kc,fromQuat:Bx,fromRotation:Fx,fromScaling:Lx,fromTranslation:Rx,fromValues:Ex,identity:gr,invert:zs,mul:$x,multiply:j0,multiplyScalar:Ix,multiplyScalarAndAdd:zx,normalFromMat4:Vx,projection:Ax,rotate:Nx,scale:Mx,set:V3,str:Ux,sub:Hx,subtract:A3,translate:bx,transpose:mh},Symbol.toStringTag,{value:"Module"}));function xh(){var t=new Ft(16);return Ft!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Xx(t){var e=new Ft(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ft(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function qx(t,e,n,r,i,a,o,s,u,l,p,c,f,h,v,y){var x=new Ft(16);return x[0]=t,x[1]=e,x[2]=n,x[3]=r,x[4]=i,x[5]=a,x[6]=o,x[7]=s,x[8]=u,x[9]=l,x[10]=p,x[11]=c,x[12]=f,x[13]=h,x[14]=v,x[15]=y,x}function Yx(t,e,n,r,i,a,o,s,u,l,p,c,f,h,v,y,x){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t[8]=l,t[9]=p,t[10]=c,t[11]=f,t[12]=h,t[13]=v,t[14]=y,t[15]=x,t}function ye(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Fe(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function yt(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],p=e[8],c=e[9],f=e[10],h=e[11],v=e[12],y=e[13],x=e[14],m=e[15],g=n*s-r*o,d=n*u-i*o,S=n*l-a*o,T=r*u-i*s,C=r*l-a*s,w=i*l-a*u,_=p*y-c*v,E=p*x-f*v,D=p*m-h*v,O=c*x-f*y,N=c*m-h*y,R=f*m-h*x,M=g*R-d*N+S*O+T*D-C*E+w*_;return M?(M=1/M,t[0]=(s*R-u*N+l*O)*M,t[1]=(i*N-r*R-a*O)*M,t[2]=(y*w-x*C+m*T)*M,t[3]=(f*C-c*w-h*T)*M,t[4]=(u*D-o*R-l*E)*M,t[5]=(n*R-i*D+a*E)*M,t[6]=(x*S-v*w-m*d)*M,t[7]=(p*w-f*S+h*d)*M,t[8]=(o*N-s*D+l*_)*M,t[9]=(r*D-n*N-a*_)*M,t[10]=(v*C-y*S+m*g)*M,t[11]=(c*S-p*C-h*g)*M,t[12]=(s*E-o*O-u*_)*M,t[13]=(n*O-r*E+i*_)*M,t[14]=(y*d-v*T-x*g)*M,t[15]=(p*T-c*d+f*g)*M,t):null}function Jx(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],p=e[8],c=e[9],f=e[10],h=e[11],v=e[12],y=e[13],x=e[14],m=e[15];return t[0]=s*(f*m-h*x)-c*(u*m-l*x)+y*(u*h-l*f),t[1]=-(r*(f*m-h*x)-c*(i*m-a*x)+y*(i*h-a*f)),t[2]=r*(u*m-l*x)-s*(i*m-a*x)+y*(i*l-a*u),t[3]=-(r*(u*h-l*f)-s*(i*h-a*f)+c*(i*l-a*u)),t[4]=-(o*(f*m-h*x)-p*(u*m-l*x)+v*(u*h-l*f)),t[5]=n*(f*m-h*x)-p*(i*m-a*x)+v*(i*h-a*f),t[6]=-(n*(u*m-l*x)-o*(i*m-a*x)+v*(i*l-a*u)),t[7]=n*(u*h-l*f)-o*(i*h-a*f)+p*(i*l-a*u),t[8]=o*(c*m-h*y)-p*(s*m-l*y)+v*(s*h-l*c),t[9]=-(n*(c*m-h*y)-p*(r*m-a*y)+v*(r*h-a*c)),t[10]=n*(s*m-l*y)-o*(r*m-a*y)+v*(r*l-a*s),t[11]=-(n*(s*h-l*c)-o*(r*h-a*c)+p*(r*l-a*s)),t[12]=-(o*(c*x-f*y)-p*(s*x-u*y)+v*(s*f-u*c)),t[13]=n*(c*x-f*y)-p*(r*x-i*y)+v*(r*f-i*c),t[14]=-(n*(s*x-u*y)-o*(r*x-i*y)+v*(r*u-i*s)),t[15]=n*(s*f-u*c)-o*(r*f-i*c)+p*(r*u-i*s),t}function Qx(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],p=t[9],c=t[10],f=t[11],h=t[12],v=t[13],y=t[14],x=t[15],m=e*o-n*a,g=e*s-r*a,d=e*u-i*a,S=n*s-r*o,T=n*u-i*o,C=r*u-i*s,w=l*v-p*h,_=l*y-c*h,E=l*x-f*h,D=p*y-c*v,O=p*x-f*v,N=c*x-f*y;return m*N-g*O+d*D+S*E-T*_+C*w}function Le(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],p=e[7],c=e[8],f=e[9],h=e[10],v=e[11],y=e[12],x=e[13],m=e[14],g=e[15],d=n[0],S=n[1],T=n[2],C=n[3];return t[0]=d*r+S*s+T*c+C*y,t[1]=d*i+S*u+T*f+C*x,t[2]=d*a+S*l+T*h+C*m,t[3]=d*o+S*p+T*v+C*g,d=n[4],S=n[5],T=n[6],C=n[7],t[4]=d*r+S*s+T*c+C*y,t[5]=d*i+S*u+T*f+C*x,t[6]=d*a+S*l+T*h+C*m,t[7]=d*o+S*p+T*v+C*g,d=n[8],S=n[9],T=n[10],C=n[11],t[8]=d*r+S*s+T*c+C*y,t[9]=d*i+S*u+T*f+C*x,t[10]=d*a+S*l+T*h+C*m,t[11]=d*o+S*p+T*v+C*g,d=n[12],S=n[13],T=n[14],C=n[15],t[12]=d*r+S*s+T*c+C*y,t[13]=d*i+S*u+T*f+C*x,t[14]=d*a+S*l+T*h+C*m,t[15]=d*o+S*p+T*v+C*g,t}function Ze(t,e,n){var r=n[0],i=n[1],a=n[2],o,s,u,l,p,c,f,h,v,y,x,m;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*a+e[12],t[13]=e[1]*r+e[5]*i+e[9]*a+e[13],t[14]=e[2]*r+e[6]*i+e[10]*a+e[14],t[15]=e[3]*r+e[7]*i+e[11]*a+e[15]):(o=e[0],s=e[1],u=e[2],l=e[3],p=e[4],c=e[5],f=e[6],h=e[7],v=e[8],y=e[9],x=e[10],m=e[11],t[0]=o,t[1]=s,t[2]=u,t[3]=l,t[4]=p,t[5]=c,t[6]=f,t[7]=h,t[8]=v,t[9]=y,t[10]=x,t[11]=m,t[12]=o*r+p*i+v*a+e[12],t[13]=s*r+c*i+y*a+e[13],t[14]=u*r+f*i+x*a+e[14],t[15]=l*r+h*i+m*a+e[15]),t}function kr(t,e,n){var r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Vn(t,e,n,r){var i=r[0],a=r[1],o=r[2],s=Math.hypot(i,a,o),u,l,p,c,f,h,v,y,x,m,g,d,S,T,C,w,_,E,D,O,N,R,M,A;return s<Ie?null:(s=1/s,i*=s,a*=s,o*=s,u=Math.sin(n),l=Math.cos(n),p=1-l,c=e[0],f=e[1],h=e[2],v=e[3],y=e[4],x=e[5],m=e[6],g=e[7],d=e[8],S=e[9],T=e[10],C=e[11],w=i*i*p+l,_=a*i*p+o*u,E=o*i*p-a*u,D=i*a*p-o*u,O=a*a*p+l,N=o*a*p+i*u,R=i*o*p+a*u,M=a*o*p-i*u,A=o*o*p+l,t[0]=c*w+y*_+d*E,t[1]=f*w+x*_+S*E,t[2]=h*w+m*_+T*E,t[3]=v*w+g*_+C*E,t[4]=c*D+y*O+d*N,t[5]=f*D+x*O+S*N,t[6]=h*D+m*O+T*N,t[7]=v*D+g*O+C*N,t[8]=c*R+y*M+d*A,t[9]=f*R+x*M+S*A,t[10]=h*R+m*M+T*A,t[11]=v*R+g*M+C*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function Sh(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],p=e[9],c=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+l*r,t[5]=o*i+p*r,t[6]=s*i+c*r,t[7]=u*i+f*r,t[8]=l*i-a*r,t[9]=p*i-o*r,t[10]=c*i-s*r,t[11]=f*i-u*r,t}function Th(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],u=e[3],l=e[8],p=e[9],c=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-l*r,t[1]=o*i-p*r,t[2]=s*i-c*r,t[3]=u*i-f*r,t[8]=a*r+l*i,t[9]=o*r+p*i,t[10]=s*r+c*i,t[11]=u*r+f*i,t}function Ch(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],u=e[3],l=e[4],p=e[5],c=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+l*r,t[1]=o*i+p*r,t[2]=s*i+c*r,t[3]=u*i+f*r,t[4]=l*i-a*r,t[5]=p*i-o*r,t[6]=c*i-s*r,t[7]=f*i-u*r,t}function wh(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function _h(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function U3(t,e,n){var r=n[0],i=n[1],a=n[2],o=Math.hypot(r,i,a),s,u,l;return o<Ie?null:(o=1/o,r*=o,i*=o,a*=o,s=Math.sin(e),u=Math.cos(e),l=1-u,t[0]=r*r*l+u,t[1]=i*r*l+a*s,t[2]=a*r*l-i*s,t[3]=0,t[4]=r*i*l-a*s,t[5]=i*i*l+u,t[6]=a*i*l+r*s,t[7]=0,t[8]=r*a*l+i*s,t[9]=i*a*l-r*s,t[10]=a*a*l+u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function Zx(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function e7(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function t7(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function G3(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=r+r,u=i+i,l=a+a,p=r*s,c=r*u,f=r*l,h=i*u,v=i*l,y=a*l,x=o*s,m=o*u,g=o*l;return t[0]=1-(h+y),t[1]=c+g,t[2]=f-m,t[3]=0,t[4]=c-g,t[5]=1-(p+y),t[6]=v+x,t[7]=0,t[8]=f+m,t[9]=v-x,t[10]=1-(p+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function n7(t,e){var n=new Ft(3),r=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],u=e[5],l=e[6],p=e[7],c=r*r+i*i+a*a+o*o;return c>0?(n[0]=(s*o+p*r+u*a-l*i)*2/c,n[1]=(u*o+p*i+l*r-s*a)*2/c,n[2]=(l*o+p*a+s*i-u*r)*2/c):(n[0]=(s*o+p*r+u*a-l*i)*2,n[1]=(u*o+p*i+l*r-s*a)*2,n[2]=(l*o+p*a+s*i-u*r)*2),G3(t,e,n),t}function r7(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function P3(t,e){var n=e[0],r=e[1],i=e[2],a=e[4],o=e[5],s=e[6],u=e[8],l=e[9],p=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(a,o,s),t[2]=Math.hypot(u,l,p),t}function $f(t,e){var n=new Ft(3);P3(n,e);var r=1/n[0],i=1/n[1],a=1/n[2],o=e[0]*r,s=e[1]*i,u=e[2]*a,l=e[4]*r,p=e[5]*i,c=e[6]*a,f=e[8]*r,h=e[9]*i,v=e[10]*a,y=o+p+v,x=0;return y>0?(x=Math.sqrt(y+1)*2,t[3]=.25*x,t[0]=(c-h)/x,t[1]=(f-u)/x,t[2]=(s-l)/x):o>p&&o>v?(x=Math.sqrt(1+o-p-v)*2,t[3]=(c-h)/x,t[0]=.25*x,t[1]=(s+l)/x,t[2]=(f+u)/x):p>v?(x=Math.sqrt(1+p-o-v)*2,t[3]=(f-u)/x,t[0]=(s+l)/x,t[1]=.25*x,t[2]=(c+h)/x):(x=Math.sqrt(1+v-o-p)*2,t[3]=(s-l)/x,t[0]=(f+u)/x,t[1]=(c+h)/x,t[2]=.25*x),t}function I3(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=e[3],u=i+i,l=a+a,p=o+o,c=i*u,f=i*l,h=i*p,v=a*l,y=a*p,x=o*p,m=s*u,g=s*l,d=s*p,S=r[0],T=r[1],C=r[2];return t[0]=(1-(v+x))*S,t[1]=(f+d)*S,t[2]=(h-g)*S,t[3]=0,t[4]=(f-d)*T,t[5]=(1-(c+x))*T,t[6]=(y+m)*T,t[7]=0,t[8]=(h+g)*C,t[9]=(y-m)*C,t[10]=(1-(c+v))*C,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function i7(t,e,n,r,i){var a=e[0],o=e[1],s=e[2],u=e[3],l=a+a,p=o+o,c=s+s,f=a*l,h=a*p,v=a*c,y=o*p,x=o*c,m=s*c,g=u*l,d=u*p,S=u*c,T=r[0],C=r[1],w=r[2],_=i[0],E=i[1],D=i[2],O=(1-(y+m))*T,N=(h+S)*T,R=(v-d)*T,M=(h-S)*C,A=(1-(f+m))*C,G=(x+g)*C,j=(v+d)*w,k=(x-g)*w,F=(1-(f+y))*w;return t[0]=O,t[1]=N,t[2]=R,t[3]=0,t[4]=M,t[5]=A,t[6]=G,t[7]=0,t[8]=j,t[9]=k,t[10]=F,t[11]=0,t[12]=n[0]+_-(O*_+M*E+j*D),t[13]=n[1]+E-(N*_+A*E+k*D),t[14]=n[2]+D-(R*_+G*E+F*D),t[15]=1,t}function $0(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,u=i+i,l=n*o,p=r*o,c=r*s,f=i*o,h=i*s,v=i*u,y=a*o,x=a*s,m=a*u;return t[0]=1-c-v,t[1]=p+m,t[2]=f-x,t[3]=0,t[4]=p-m,t[5]=1-l-v,t[6]=h+y,t[7]=0,t[8]=f+x,t[9]=h-y,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function a7(t,e,n,r,i,a,o){var s=1/(n-e),u=1/(i-r),l=1/(a-o);return t[0]=a*2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a*2*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(o+a)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*l,t[15]=0,t}function z3(t,e,n,r,i){var a=1/Math.tan(e/2),o;return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}var o7=z3;function s7(t,e,n,r,i){var a=1/Math.tan(e/2),o;return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=i*o,t[14]=i*r*o):(t[10]=-1,t[14]=-r),t}function u7(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+s),l=2/(i+a);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-((o-s)*u*.5),t[9]=(i-a)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function W3(t,e,n,r,i,a,o){var s=1/(e-n),u=1/(r-i),l=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(o+a)*l,t[15]=1,t}var j3=W3;function c7(t,e,n,r,i,a,o){var s=1/(e-n),u=1/(r-i),l=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=a*l,t[15]=1,t}function $3(t,e,n,r){var i,a,o,s,u,l,p,c,f,h,v=e[0],y=e[1],x=e[2],m=r[0],g=r[1],d=r[2],S=n[0],T=n[1],C=n[2];return Math.abs(v-S)<Ie&&Math.abs(y-T)<Ie&&Math.abs(x-C)<Ie?ye(t):(p=v-S,c=y-T,f=x-C,h=1/Math.hypot(p,c,f),p*=h,c*=h,f*=h,i=g*f-d*c,a=d*p-m*f,o=m*c-g*p,h=Math.hypot(i,a,o),h?(h=1/h,i*=h,a*=h,o*=h):(i=0,a=0,o=0),s=c*o-f*a,u=f*i-p*o,l=p*a-c*i,h=Math.hypot(s,u,l),h?(h=1/h,s*=h,u*=h,l*=h):(s=0,u=0,l=0),t[0]=i,t[1]=s,t[2]=p,t[3]=0,t[4]=a,t[5]=u,t[6]=c,t[7]=0,t[8]=o,t[9]=l,t[10]=f,t[11]=0,t[12]=-(i*v+a*y+o*x),t[13]=-(s*v+u*y+l*x),t[14]=-(p*v+c*y+f*x),t[15]=1,t)}function l7(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=r[0],u=r[1],l=r[2],p=i-n[0],c=a-n[1],f=o-n[2],h=p*p+c*c+f*f;h>0&&(h=1/Math.sqrt(h),p*=h,c*=h,f*=h);var v=u*f-l*c,y=l*p-s*f,x=s*c-u*p;return h=v*v+y*y+x*x,h>0&&(h=1/Math.sqrt(h),v*=h,y*=h,x*=h),t[0]=v,t[1]=y,t[2]=x,t[3]=0,t[4]=c*x-f*y,t[5]=f*v-p*x,t[6]=p*y-c*v,t[7]=0,t[8]=p,t[9]=c,t[10]=f,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t}function f7(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function p7(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function h7(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function H3(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function g7(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function d7(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function v7(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function y7(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],p=t[8],c=t[9],f=t[10],h=t[11],v=t[12],y=t[13],x=t[14],m=t[15],g=e[0],d=e[1],S=e[2],T=e[3],C=e[4],w=e[5],_=e[6],E=e[7],D=e[8],O=e[9],N=e[10],R=e[11],M=e[12],A=e[13],G=e[14],j=e[15];return Math.abs(n-g)<=Ie*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-d)<=Ie*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-S)<=Ie*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(a-T)<=Ie*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(o-C)<=Ie*Math.max(1,Math.abs(o),Math.abs(C))&&Math.abs(s-w)<=Ie*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(u-_)<=Ie*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(l-E)<=Ie*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(p-D)<=Ie*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(c-O)<=Ie*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(f-N)<=Ie*Math.max(1,Math.abs(f),Math.abs(N))&&Math.abs(h-R)<=Ie*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(v-M)<=Ie*Math.max(1,Math.abs(v),Math.abs(M))&&Math.abs(y-A)<=Ie*Math.max(1,Math.abs(y),Math.abs(A))&&Math.abs(x-G)<=Ie*Math.max(1,Math.abs(x),Math.abs(G))&&Math.abs(m-j)<=Ie*Math.max(1,Math.abs(m),Math.abs(j))}var H0=Le,m7=H3;const Os=Object.freeze(Object.defineProperty({__proto__:null,add:h7,adjoint:Jx,clone:Xx,copy:ft,create:xh,determinant:Qx,equals:y7,exactEquals:v7,frob:p7,fromQuat:$0,fromQuat2:n7,fromRotation:U3,fromRotationTranslation:G3,fromRotationTranslationScale:I3,fromRotationTranslationScaleOrigin:i7,fromScaling:_h,fromTranslation:wh,fromValues:qx,fromXRotation:Zx,fromYRotation:e7,fromZRotation:t7,frustum:a7,getRotation:$f,getScaling:P3,getTranslation:r7,identity:ye,invert:yt,lookAt:$3,mul:H0,multiply:Le,multiplyScalar:g7,multiplyScalarAndAdd:d7,ortho:j3,orthoNO:W3,orthoZO:c7,perspective:o7,perspectiveFromFieldOfView:u7,perspectiveNO:z3,perspectiveZO:s7,rotate:Vn,rotateX:Sh,rotateY:Th,rotateZ:Ch,scale:kr,set:Yx,str:f7,sub:m7,subtract:H3,targetTo:l7,translate:Ze,transpose:Fe},Symbol.toStringTag,{value:"Module"}));function K3(){var t=new Ft(3);return Ft!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ha(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Vg(t,e,n){var r=new Ft(3);return r[0]=t,r[1]=e,r[2]=n,r}function Ke(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Uo(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function ni(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function x7(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function S7(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function Sr(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function X3(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function cr(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function bs(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ka(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],u=n[2];return t[0]=i*u-a*s,t[1]=a*o-r*u,t[2]=r*s-i*o,t}function Re(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,t}function a0(t,e,n){var r=e[0],i=e[1],a=e[2];return t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8],t}function T7(t){return t[0]=0,t[1]=0,t[2]=0,t}function Ag(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Ug(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],s=e[2];return Math.abs(n-a)<=Ie*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=Ie*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=Ie*Math.max(1,Math.abs(i),Math.abs(s))}var Hf=ni,C7=x7,q3=Ha;(function(){var t=K3();return function(e,n,r,i,a,o){var s,u;for(n||(n=3),r||(r=0),i?u=Math.min(i*n+r,e.length):u=e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}})();function w7(){var t=new Ft(4);return Ft!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function _7(t,e,n,r){var i=new Ft(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function Gg(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function E7(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=a*o,t}function Wi(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,t}(function(){var t=w7();return function(e,n,r,i,a,o){var s,u;for(n||(n=4),r||(r=0),i?u=Math.min(i*n+r,e.length):u=e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}})();function ra(){var t=new Ft(4);return Ft!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Eh(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function D7(t,e){var n=Math.acos(e[3])*2,r=Math.sin(n/2);return r>Ie?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Pg(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],u=n[1],l=n[2],p=n[3];return t[0]=r*p+o*s+i*l-a*u,t[1]=i*p+o*u+a*s-r*l,t[2]=a*p+o*l+r*u-i*s,t[3]=o*p-r*s-i*u-a*l,t}function o0(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=e[3],u=n[0],l=n[1],p=n[2],c=n[3],f,h,v,y,x;return h=i*u+a*l+o*p+s*c,h<0&&(h=-h,u=-u,l=-l,p=-p,c=-c),1-h>Ie?(f=Math.acos(h),v=Math.sin(f),y=Math.sin((1-r)*f)/v,x=Math.sin(r*f)/v):(y=1-r,x=r),t[0]=y*i+x*u,t[1]=y*a+x*l,t[2]=y*o+x*p,t[3]=y*s+x*c,t}function O7(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function b7(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(e[i*3+i]-e[a*3+a]-e[o*3+o]+1),t[i]=.5*r,r=.5/r,t[3]=(e[a*3+o]-e[o*3+a])*r,t[a]=(e[a*3+i]+e[i*3+a])*r,t[o]=(e[o*3+i]+e[i*3+o])*r}return t}var Ig=_7,Y3=E7;(function(){var t=K3(),e=Vg(1,0,0),n=Vg(0,1,0);return function(r,i,a){var o=bs(i,a);return o<-.999999?(Ka(t,e,i),q3(t)<1e-6&&Ka(t,n,i),cr(t,t),Eh(r,t,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Ka(t,i,a),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+o,Y3(r,r))}})();(function(){var t=ra(),e=ra();return function(n,r,i,a,o,s){return o0(t,r,o,s),o0(e,i,a,s),o0(n,t,e,2*s*(1-s)),n}})();(function(){var t=yh();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],Y3(e,b7(e,t))}})();var N7=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;i--!==0;){var o=a[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const J3=yc(N7);var zg=Object.prototype.toString,Q3=function(e){var n=zg.call(e),r=n==="[object Arguments]";return r||(r=n!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&zg.call(e.callee)==="[object Function]"),r},wl,Wg;function M7(){if(Wg)return wl;Wg=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Q3,i=Object.prototype.propertyIsEnumerable,a=!i.call({toString:null},"toString"),o=i.call(function(){},"prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(f){var h=f.constructor;return h&&h.prototype===f},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if(typeof window>"u")return!1;for(var f in window)try{if(!l["$"+f]&&e.call(window,f)&&window[f]!==null&&typeof window[f]=="object")try{u(window[f])}catch{return!0}}catch{return!0}return!1}(),c=function(f){if(typeof window>"u"||!p)return u(f);try{return u(f)}catch{return!1}};t=function(h){var v=h!==null&&typeof h=="object",y=n.call(h)==="[object Function]",x=r(h),m=v&&n.call(h)==="[object String]",g=[];if(!v&&!y&&!x)throw new TypeError("Object.keys called on a non-object");var d=o&&y;if(m&&h.length>0&&!e.call(h,0))for(var S=0;S<h.length;++S)g.push(String(S));if(x&&h.length>0)for(var T=0;T<h.length;++T)g.push(String(T));else for(var C in h)!(d&&C==="prototype")&&e.call(h,C)&&g.push(String(C));if(a)for(var w=c(h),_=0;_<s.length;++_)!(w&&s[_]==="constructor")&&e.call(h,s[_])&&g.push(s[_]);return g}}return wl=t,wl}var R7=Array.prototype.slice,F7=Q3,jg=Object.keys,s0=jg?function(e){return jg(e)}:M7(),$g=Object.keys;s0.shim=function(){if(Object.keys){var e=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);e||(Object.keys=function(r){return F7(r)?$g(R7.call(r)):$g(r)})}else Object.keys=s0;return Object.keys||s0};var L7=s0,k7=Error,B7=EvalError,V7=RangeError,A7=ReferenceError,Z3=SyntaxError,ey=TypeError,U7=URIError,G7=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,n);if(o.value!==i||o.enumerable!==!0)return!1}return!0},Hg=typeof Symbol<"u"&&Symbol,P7=G7,I7=function(){return typeof Hg!="function"||typeof Symbol!="function"||typeof Hg("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:P7()},_l={__proto__:null,foo:{}},z7=Object,W7=function(){return{__proto__:_l}.foo===_l.foo&&!(_l instanceof z7)},j7="Function.prototype.bind called on incompatible ",$7=Object.prototype.toString,H7=Math.max,K7="[object Function]",Kg=function(e,n){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var a=0;a<n.length;a+=1)r[a+e.length]=n[a];return r},X7=function(e,n){for(var r=[],i=n,a=0;i<e.length;i+=1,a+=1)r[a]=e[i];return r},q7=function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n},Y7=function(e){var n=this;if(typeof n!="function"||$7.apply(n)!==K7)throw new TypeError(j7+n);for(var r=X7(arguments,1),i,a=function(){if(this instanceof i){var p=n.apply(this,Kg(r,arguments));return Object(p)===p?p:this}return n.apply(e,Kg(r,arguments))},o=H7(0,n.length-r.length),s=[],u=0;u<o;u++)s[u]="$"+u;if(i=Function("binder","return function ("+q7(s,",")+"){ return binder.apply(this,arguments); }")(a),n.prototype){var l=function(){};l.prototype=n.prototype,i.prototype=new l,l.prototype=null}return i},J7=Y7,ty=Function.prototype.bind||J7,Q7=Function.prototype.call,Z7=Object.prototype.hasOwnProperty,eS=ty,tS=eS.call(Q7,Z7),Ge,nS=k7,rS=B7,iS=V7,aS=A7,oo=Z3,Xa=ey,oS=U7,ny=Function,El=function(t){try{return ny('"use strict"; return ('+t+").constructor;")()}catch{}},qi=Object.getOwnPropertyDescriptor;if(qi)try{qi({},"")}catch{qi=null}var Dl=function(){throw new Xa},sS=qi?function(){try{return arguments.callee,Dl}catch{try{return qi(arguments,"callee").get}catch{return Dl}}}():Dl,da=I7(),uS=W7(),bt=Object.getPrototypeOf||(uS?function(t){return t.__proto__}:null),wa={},cS=typeof Uint8Array>"u"||!bt?Ge:bt(Uint8Array),Yi={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Ge:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ge:ArrayBuffer,"%ArrayIteratorPrototype%":da&&bt?bt([][Symbol.iterator]()):Ge,"%AsyncFromSyncIteratorPrototype%":Ge,"%AsyncFunction%":wa,"%AsyncGenerator%":wa,"%AsyncGeneratorFunction%":wa,"%AsyncIteratorPrototype%":wa,"%Atomics%":typeof Atomics>"u"?Ge:Atomics,"%BigInt%":typeof BigInt>"u"?Ge:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ge:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ge:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ge:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":nS,"%eval%":eval,"%EvalError%":rS,"%Float32Array%":typeof Float32Array>"u"?Ge:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ge:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ge:FinalizationRegistry,"%Function%":ny,"%GeneratorFunction%":wa,"%Int8Array%":typeof Int8Array>"u"?Ge:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ge:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ge:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":da&&bt?bt(bt([][Symbol.iterator]())):Ge,"%JSON%":typeof JSON=="object"?JSON:Ge,"%Map%":typeof Map>"u"?Ge:Map,"%MapIteratorPrototype%":typeof Map>"u"||!da||!bt?Ge:bt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ge:Promise,"%Proxy%":typeof Proxy>"u"?Ge:Proxy,"%RangeError%":iS,"%ReferenceError%":aS,"%Reflect%":typeof Reflect>"u"?Ge:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ge:Set,"%SetIteratorPrototype%":typeof Set>"u"||!da||!bt?Ge:bt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ge:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":da&&bt?bt(""[Symbol.iterator]()):Ge,"%Symbol%":da?Symbol:Ge,"%SyntaxError%":oo,"%ThrowTypeError%":sS,"%TypedArray%":cS,"%TypeError%":Xa,"%Uint8Array%":typeof Uint8Array>"u"?Ge:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ge:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ge:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ge:Uint32Array,"%URIError%":oS,"%WeakMap%":typeof WeakMap>"u"?Ge:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ge:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ge:WeakSet};if(bt)try{null.error}catch(t){var lS=bt(bt(t));Yi["%Error.prototype%"]=lS}var fS=function t(e){var n;if(e==="%AsyncFunction%")n=El("async function () {}");else if(e==="%GeneratorFunction%")n=El("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=El("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&bt&&(n=bt(i.prototype))}return Yi[e]=n,n},Xg={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ws=ty,K0=tS,pS=Ws.call(Function.call,Array.prototype.concat),hS=Ws.call(Function.apply,Array.prototype.splice),qg=Ws.call(Function.call,String.prototype.replace),X0=Ws.call(Function.call,String.prototype.slice),gS=Ws.call(Function.call,RegExp.prototype.exec),dS=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,vS=/\\(\\)?/g,yS=function(e){var n=X0(e,0,1),r=X0(e,-1);if(n==="%"&&r!=="%")throw new oo("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new oo("invalid intrinsic syntax, expected opening `%`");var i=[];return qg(e,dS,function(a,o,s,u){i[i.length]=s?qg(u,vS,"$1"):o||a}),i},mS=function(e,n){var r=e,i;if(K0(Xg,r)&&(i=Xg[r],r="%"+i[0]+"%"),K0(Yi,r)){var a=Yi[r];if(a===wa&&(a=fS(r)),typeof a>"u"&&!n)throw new Xa("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:a}}throw new oo("intrinsic "+e+" does not exist!")},ry=function(e,n){if(typeof e!="string"||e.length===0)throw new Xa("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Xa('"allowMissing" argument must be a boolean');if(gS(/^%?[^%]*%?$/,e)===null)throw new oo("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=yS(e),i=r.length>0?r[0]:"",a=mS("%"+i+"%",n),o=a.name,s=a.value,u=!1,l=a.alias;l&&(i=l[0],hS(r,pS([0,1],l)));for(var p=1,c=!0;p<r.length;p+=1){var f=r[p],h=X0(f,0,1),v=X0(f,-1);if((h==='"'||h==="'"||h==="`"||v==='"'||v==="'"||v==="`")&&h!==v)throw new oo("property names with quotes must have matching quotes");if((f==="constructor"||!c)&&(u=!0),i+="."+f,o="%"+i+"%",K0(Yi,o))s=Yi[o];else if(s!=null){if(!(f in s)){if(!n)throw new Xa("base intrinsic for "+e+" exists, but the property is not available.");return}if(qi&&p+1>=r.length){var y=qi(s,f);c=!!y,c&&"get"in y&&!("originalValue"in y.get)?s=y.get:s=s[f]}else c=K0(s,f),s=s[f];c&&!u&&(Yi[o]=s)}}return s},xS=ry,u0=xS("%Object.defineProperty%",!0)||!1;if(u0)try{u0({},"a",{value:1})}catch{u0=!1}var iy=u0,SS=ry,c0=SS("%Object.getOwnPropertyDescriptor%",!0);if(c0)try{c0([],"length")}catch{c0=null}var TS=c0,Yg=iy,CS=Z3,va=ey,Jg=TS,wS=function(e,n,r){if(!e||typeof e!="object"&&typeof e!="function")throw new va("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new va("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new va("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new va("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new va("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new va("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,u=!!Jg&&Jg(e,n);if(Yg)Yg(e,n,{configurable:o===null&&u?u.configurable:!o,enumerable:i===null&&u?u.enumerable:!i,value:r,writable:a===null&&u?u.writable:!a});else if(s||!i&&!a&&!o)e[n]=r;else throw new CS("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Kf=iy,ay=function(){return!!Kf};ay.hasArrayLengthDefineBug=function(){if(!Kf)return null;try{return Kf([],"length",{value:1}).length!==1}catch{return!0}};var _S=ay,ES=L7,DS=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",OS=Object.prototype.toString,bS=Array.prototype.concat,Qg=wS,NS=function(t){return typeof t=="function"&&OS.call(t)==="[object Function]"},oy=_S(),MS=function(t,e,n,r){if(e in t){if(r===!0){if(t[e]===n)return}else if(!NS(r)||!r())return}oy?Qg(t,e,n,!0):Qg(t,e,n)},sy=function(t,e){var n=arguments.length>2?arguments[2]:{},r=ES(e);DS&&(r=bS.call(r,Object.getOwnPropertySymbols(e)));for(var i=0;i<r.length;i+=1)MS(t,r[i],e[r[i]],n[r[i]])};sy.supportsDescriptors=!!oy;var uy=sy,l0={exports:{}};typeof self<"u"?l0.exports=self:typeof window<"u"?l0.exports=window:l0.exports=Function("return this")();var cy=l0.exports,RS=cy,ly=function(){return typeof hn!="object"||!hn||hn.Math!==Math||hn.Array!==Array?RS:hn},FS=uy,LS=ly,kS=function(){var e=LS();if(FS.supportsDescriptors){var n=Object.getOwnPropertyDescriptor(e,"globalThis");(!n||n.configurable&&(n.enumerable||!n.writable||globalThis!==e))&&Object.defineProperty(e,"globalThis",{configurable:!0,enumerable:!1,value:e,writable:!0})}else(typeof globalThis!="object"||globalThis!==e)&&(e.globalThis=e);return e},BS=uy,VS=cy,fy=ly,AS=kS,US=fy(),py=function(){return US};BS(py,{getPolyfill:fy,implementation:VS,shim:AS});var GS=py;const PS=yc(GS),Wn=PS(),hy={vtkObject:()=>null};function Hn(t){if(t==null||t.isA)return t;if(!t.vtkClass)return Wn.console&&Wn.console.error&&Wn.console.error("Invalid VTK object"),null;const e=hy[t.vtkClass];if(!e)return Wn.console&&Wn.console.error&&Wn.console.error(`No vtk class found for Object of type ${t.vtkClass}`),null;const n={...t};Object.keys(n).forEach(i=>{n[i]&&typeof n[i]=="object"&&n[i].vtkClass&&(n[i]=Hn(n[i]))});const r=e(n);return r&&r.modified&&r.modified(),r}function IS(t,e){hy[t]=e}Hn.register=IS;class Ol extends Array{push(){for(let e=0;e<arguments.length;e++)this.includes(arguments[e])||super.push(arguments[e]);return this.length}}let Xf=0;const gy=Symbol("void");function zS(){return Xf}const dy={};function Vi(){}const WS=["log","debug","info","warn","error","time","timeEnd","group","groupEnd"];WS.forEach(t=>{dy[t]=Vi});Wn.console=console.hasOwnProperty("log")?console:dy;const yi={debug:Vi,error:Wn.console.error||Vi,info:Wn.console.info||Vi,log:Wn.console.log||Vi,warn:Wn.console.warn||Vi};function vy(t,e){yi[t]&&(yi[t]=e||Vi)}function yy(){yi.log(...arguments)}function my(){yi.info(...arguments)}function q0(){yi.debug(...arguments)}function Me(){yi.error(...arguments)}function Bc(){yi.warn(...arguments)}const Zg={};function xy(t){Zg[t]||(yi.error(t),Zg[t]=!0)}const jt=Object.create(null);jt.Float32Array=Float32Array;jt.Float64Array=Float64Array;jt.Uint8Array=Uint8Array;jt.Int8Array=Int8Array;jt.Uint16Array=Uint16Array;jt.Int16Array=Int16Array;jt.Uint32Array=Uint32Array;jt.Int32Array=Int32Array;jt.Uint8ClampedArray=Uint8ClampedArray;try{jt.BigInt64Array=BigInt64Array,jt.BigUint64Array=BigUint64Array}catch{}function xo(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new(jt[t]||Float64Array)(...n)}function Vc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return(jt[t]||Float64Array).from(...n)}function Ac(t){return t.charAt(0).toUpperCase()+t.slice(1)}function mt(t){return Ac(t[0]==="_"?t.slice(1):t)}function Sy(t){return t.charAt(0).toLowerCase()+t.slice(1)}function Ty(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;const r=["TB","GB","MB","KB"];let i=Number(t),a="B";for(;i>n;)i/=n,a=r.pop();return`${i.toFixed(e)} ${a}`}function Cy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ";const n=[];let r=t;for(;r>1e3;)n.push(`000${r%1e3}`.slice(-3)),r=Math.floor(r/1e3);return r>0&&n.push(r),n.reverse(),n.join(e)}function wy(t){Object.keys(t).forEach(e=>{Array.isArray(t[e])&&(t[e]=[].concat(t[e]))})}function jS(t){return Object.values(jt).some(e=>t instanceof e)}function $S(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}function HS(t,e){return Object.keys(t).find(n=>t[n]===e)}function _y(t){return t&&t.isA?t.getState():t}function Dh(t){setTimeout(t,0)}function Ey(t,e){const n=performance.now();t.finally(()=>{const r=performance.now()-n;e(r)})}function qe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};wy(e);const n=[];if(Number.isInteger(e.mtime)||(e.mtime=++Xf),!("classHierarchy"in e))e.classHierarchy=new Ol("vtkObject");else if(!(e.classHierarchy instanceof Ol)){const a=new Ol;for(let o=0;o<e.classHierarchy.length;o++)a.push(e.classHierarchy[o]);e.classHierarchy=a}function r(a){n[a]=null}function i(a){function o(){r(a)}return Object.freeze({unsubscribe:o})}return t.isDeleted=()=>!!e.deleted,t.modified=a=>{if(e.deleted){Me("instance deleted - cannot call any method");return}a&&a<t.getMTime()||(e.mtime=++Xf,n.forEach(o=>o&&o(t)))},t.onModified=a=>{if(e.deleted)return Me("instance deleted - cannot call any method"),null;const o=n.length;return n.push(a),i(o)},t.getMTime=()=>e.mtime,t.isA=a=>{let o=e.classHierarchy.length;for(;o--;)if(e.classHierarchy[o]===a)return!0;return!1},t.getClassName=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.classHierarchy[e.classHierarchy.length-1-a]},t.set=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,u=!1;return Object.keys(a).forEach(l=>{const p=s?null:t[`set${Ac(l)}`];p&&Array.isArray(a[l])&&p.length>1?u=p(...a[l])||u:p?u=p(a[l])||u:(["mtime"].indexOf(l)===-1&&!o&&Bc(`Warning: Set value to model directly ${l}, ${a[l]}`),u=e[l]!==a[l]||u,e[l]=a[l])}),u},t.get=function(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];if(!o.length)return e;const u={};return o.forEach(l=>{u[l]=e[l]}),u},t.getReferenceByName=a=>e[a],t.delete=()=>{Object.keys(e).forEach(a=>delete e[a]),n.forEach((a,o)=>r(o)),e.deleted=!0},t.getState=()=>{if(e.deleted)return null;const a={...e,vtkClass:t.getClassName()};Object.keys(a).forEach(s=>{a[s]===null||a[s]===void 0||s[0]==="_"?delete a[s]:a[s].isA?a[s]=a[s].getState():Array.isArray(a[s])?a[s]=a[s].map(_y):jS(a[s])&&(a[s]=Array.from(a[s]))});const o={};return Object.keys(a).sort().forEach(s=>{o[s]=a[s]}),o.mtime&&delete o.mtime,o},t.shallowCopy=function(a){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(a.getClassName()!==t.getClassName())throw new Error(`Cannot ShallowCopy ${a.getClassName()} into ${t.getClassName()}`);const s=a.get(),u=Object.keys(e).sort();Object.keys(s).sort().forEach(p=>{const c=u.indexOf(p);c===-1?o&&q0(`add ${p} in shallowCopy`):u.splice(c,1),e[p]=s[p]}),u.length&&o&&q0(`Untouched keys: ${u.join(", ")}`),t.modified()},t.toJSON=function(){return t.getState()},t}const KS={object(t,e,n){return function(){return{...e[n.name]}}}};function Ut(t,e,n){n.forEach(r=>{if(typeof r=="object"){const i=KS[r.type];i?t[`get${mt(r.name)}`]=i(t,e,r):t[`get${mt(r.name)}`]=()=>e[r.name]}else t[`get${mt(r)}`]=()=>e[r]})}const Dy={enum(t,e,n){const r=`_on${mt(n.name)}Changed`;return i=>{var a;if(typeof i=="string"){if(n.enum[i]!==void 0)return e[n.name]!==n.enum[i]?(e[n.name]=n.enum[i],t.modified(),!0):!1;throw Me(`Set Enum with invalid argument ${n}, ${i}`),new RangeError("Set Enum with invalid string argument")}if(typeof i=="number"){if(e[n.name]!==i){if(Object.keys(n.enum).map(o=>n.enum[o]).indexOf(i)!==-1){const o=e[n.name];return e[n.name]=i,(a=e[r])==null||a.call(e,t,e,i,o),t.modified(),!0}throw Me(`Set Enum outside numeric range ${n}, ${i}`),new RangeError("Set Enum outside numeric range")}return!1}throw Me(`Set Enum with invalid argument (String/Number) ${n}, ${i}`),new TypeError("Set Enum with invalid argument (String/Number)")}},object(t,e,n){var i;((i=n.params)==null?void 0:i.length)===1&&Bc('Setter of type "object" with a single "param" field is not supported');const r=`_on${mt(n.name)}Changed`;return function(){var l,p;for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];let u;if(o.length>1&&((l=n.params)!=null&&l.length)?u=n.params.reduce((c,f,h)=>Object.assign(c,{[f]:o[h]}),{}):u=o[0],!J3(e[n.name],u)){const c=e[n.name];return e[n.name]=u,(p=e[r])==null||p.call(e,t,e,u,c),t.modified(),!0}return!1}}};function ed(t){if(typeof t=="object"){const e=Dy[t.type];if(e)return(n,r)=>e(n,r,t);throw Me(`No setter for field ${t}`),new TypeError("No setter for field")}return function(n,r){const i=`_on${mt(t)}Changed`;return function(o){var s;if(r.deleted)return Me("instance deleted - cannot call any method"),!1;if(r[t]!==o){const u=r[t.name];return r[t]=o,(s=r[i])==null||s.call(r,n,r,o,u),n.modified(),!0}return!1}}}function js(t,e,n){n.forEach(r=>{typeof r=="object"?t[`set${mt(r.name)}`]=ed(r)(t,e):t[`set${mt(r)}`]=ed(r)(t,e)})}function ut(t,e,n){Ut(t,e,n),js(t,e,n)}function So(t,e,n){n.forEach(r=>{t[`get${mt(r)}`]=()=>e[r]?Array.from(e[r]):e[r],t[`get${mt(r)}ByReference`]=()=>e[r]})}function Oh(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;n.forEach(a=>{if(e[a]&&r&&e[a].length!==r)throw new RangeError(`Invalid initial number of values for array (${a})`);const o=`_on${mt(a)}Changed`;t[`set${mt(a)}`]=function(){var h;if(e.deleted)return Me("instance deleted - cannot call any method"),!1;for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];let p=u,c,f=!1;if(p.length===1&&(p[0]==null||p[0].length>=0)&&(p=p[0],f=!0),p==null)c=e[a]!==p;else{if(r&&p.length!==r)if(p.length<r&&i!==void 0)for(p=Array.from(p),f=!1;p.length<r;)p.push(i);else throw new RangeError(`Invalid number of values for array setter (${a})`);c=e[a]==null||e[a].length!==p.length;for(let v=0;!c&&v<p.length;++v)c=e[a][v]!==p[v];c&&f&&(p=Array.from(p))}if(c){const v=e[a.name];e[a]=p,(h=e[o])==null||h.call(e,t,e,p,v),t.modified()}return c},t[`set${mt(a)}From`]=s=>{const u=e[a];s.forEach((l,p)=>{u[p]=l})}})}function bh(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;So(t,e,n),Oh(t,e,n,r,i)}function $s(t,e,n){for(let r=0;r<n.length;r++){const i=n[r];e[i]!==void 0&&(e[`_${i}`]=e[i],delete e[i])}}function Nh(t,e,n,r){e.inputData?e.inputData=e.inputData.map(Hn):e.inputData=[],e.inputConnection?e.inputConnection=e.inputConnection.map(Hn):e.inputConnection=[],e.output?e.output=e.output.map(Hn):e.output=[],e.inputArrayToProcess?e.inputArrayToProcess=e.inputArrayToProcess.map(Hn):e.inputArrayToProcess=[],e.numberOfInputs=n;function i(h){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){Me("instance deleted - cannot call any method");return}if(v>=e.numberOfInputs){Me(`algorithm ${t.getClassName()} only has ${e.numberOfInputs} input ports. To add more input ports, use addInputData()`);return}(e.inputData[v]!==h||e.inputConnection[v])&&(e.inputData[v]=h,e.inputConnection[v]=null,t.modified&&t.modified())}function a(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[h]&&(e.inputData[h]=e.inputConnection[h]()),e.inputData[h]}function o(h){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){Me("instance deleted - cannot call any method");return}if(v>=e.numberOfInputs){let y=`algorithm ${t.getClassName()} only has `;y+=`${e.numberOfInputs}`,y+=" input ports. To add more input ports, use addInputConnection()",Me(y);return}e.inputData[v]=null,e.inputConnection[v]=h}function s(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[h]}function u(){let h=e.numberOfInputs;for(;h&&!e.inputData[h-1]&&!e.inputConnection[h-1];)h--;return h===e.numberOfInputs&&e.numberOfInputs++,h}function l(h){if(e.deleted){Me("instance deleted - cannot call any method");return}o(h,u())}function p(h){if(e.deleted){Me("instance deleted - cannot call any method");return}i(h,u())}function c(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.deleted?(Me("instance deleted - cannot call any method"),null):(t.shouldUpdate()&&t.update(),e.output[h])}t.shouldUpdate=()=>{var x,m;const h=t.getMTime();let v=1/0,y=r;for(;y--;){if(!e.output[y]||e.output[y].isDeleted())return!0;const g=e.output[y].getMTime();if(g<h)return!0;g<v&&(v=g)}for(y=e.numberOfInputs;y--;)if((x=e.inputConnection[y])!=null&&x.filter.shouldUpdate()||((m=t.getInputData(y))==null?void 0:m.getMTime())>v)return!0;return!1};function f(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const v=()=>c(h);return v.filter=t,v}if(e.numberOfInputs){let h=e.numberOfInputs;for(;h--;)e.inputData.push(null),e.inputConnection.push(null);t.setInputData=i,t.setInputConnection=o,t.addInputData=p,t.addInputConnection=l,t.getInputData=a,t.getInputConnection=s}r&&(t.getOutputData=c,t.getOutputPort=f),t.update=()=>{const h=[];if(e.numberOfInputs){let v=0;for(;v<e.numberOfInputs;)h[v]=t.getInputData(v),v++}t.shouldUpdate()&&t.requestData&&t.requestData(h,e.output)},t.getNumberOfInputPorts=()=>e.numberOfInputs,t.getNumberOfOutputPorts=()=>r||e.output.length,t.getInputArrayToProcess=h=>{const v=e.inputArrayToProcess[h],y=e.inputData[h];return v&&y?y[`get${v.fieldAssociation}`]().getArray(v.arrayName):null},t.setInputArrayToProcess=function(h,v,y){let x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Scalars";for(;e.inputArrayToProcess.length<h;)e.inputArrayToProcess.push(null);e.inputArrayToProcess[h]={arrayName:v,fieldAssociation:y,attributeType:x}}}const Mh=Symbol("Event abort");function Oy(t,e,n){const r=[],i=t.delete;let a=1;function o(l){for(let p=0;p<r.length;++p){const[c]=r[p];if(c===l){r.splice(p,1);return}}}function s(l){function p(){o(l)}return Object.freeze({unsubscribe:p})}function u(){if(e.deleted){Me("instance deleted - cannot call any method");return}const l=r.slice();for(let p=0;p<l.length;++p){const[,c,f]=l[p];if(c){if(f<0)setTimeout(()=>c.apply(t,arguments),1-f);else if(c.apply(t,arguments)===Mh)break}}}t[`invoke${mt(n)}`]=u,t[`on${mt(n)}`]=function(l){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!l.apply)return console.error(`Invalid callback for event ${n}`),null;if(e.deleted)return Me("instance deleted - cannot call any method"),null;const c=a++;return r.push([c,l,p]),r.sort((f,h)=>h[2]-f[2]),s(c)},t.delete=()=>{i(),r.forEach(l=>{let[p]=l;return o(p)})}}function ze(t,e){const n=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i={},a={};return t(a,i,r),Object.freeze(a)};return e&&Hn.register(e,n),n}function Hs(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e.filter(o=>!!o).map(o=>o(...i))}}function Rh(t){return t&&t.isA&&t.isA("vtkObject")}function Y0(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];if(Rh(t)){if(r.indexOf(t)>=0)return n;r.push(t);const i=e(t);i!==void 0&&n.push(i);const a=t.get();Object.keys(a).forEach(o=>{const s=a[o];Array.isArray(s)?s.forEach(u=>{Y0(u,e,n,r)}):Y0(s,e,n,r)})}return n}function by(t,e,n){var r=this;let i;const a=function(){for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];const l=r,p=()=>{i=null,n||t.apply(l,s)},c=n&&!i;clearTimeout(i),i=setTimeout(p,e),c&&t.apply(l,s)};return a.cancel=()=>clearTimeout(i),a}function Ny(t,e){let n=!1,r=null;function i(){n=!1,r!==null&&(a(...r),r=null)}function a(){for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];if(n){r=s;return}n=!0,t(...s),setTimeout(i,e)}return a}function Fh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e.keystore=Object.assign(e.keystore||{},n),t.setKey=(r,i)=>{e.keystore[r]=i},t.getKey=r=>e.keystore[r],t.getAllKeys=()=>Object.keys(e.keystore),t.deleteKey=r=>delete e.keystore[r],t.clearKeystore=()=>t.getAllKeys().forEach(r=>delete e.keystore[r])}let XS=1;const mu="__root__";function My(t,e){Fh(t,e);const n=t.delete;e.proxyId=`${XS++}`,e.ui=JSON.parse(JSON.stringify(e.ui||[])),Ut(t,e,["proxyId","proxyGroup","proxyName"]),ut(t,e,["proxyManager"]);const r={},i={};function a(l,p){i[p]||(i[p]=[]);const c=i[p];for(let f=0;f<l.length;f++)c.push(l[f].name),r[l[f].name]=l[f],l[f].children&&l[f].children.length&&a(l[f].children,l[f].name)}a(e.ui,mu),t.updateUI=l=>{e.ui=JSON.parse(JSON.stringify(l||[])),Object.keys(r).forEach(p=>delete r[p]),Object.keys(i).forEach(p=>delete i[p]),a(e.ui,mu),t.modified()};function o(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mu;return i[l]}t.updateProxyProperty=(l,p)=>{const c=r[l];c?Object.assign(c,p):r[l]={...p}},t.activate=()=>{if(e.proxyManager){const l=`setActive${mt(t.getProxyGroup().slice(0,-1))}`;e.proxyManager[l]&&e.proxyManager[l](t)}},e.propertyLinkSubscribers={},t.registerPropertyLinkForGC=(l,p)=>{p in e.propertyLinkSubscribers||(e.propertyLinkSubscribers[p]=[]),e.propertyLinkSubscribers[p].push(l)},t.gcPropertyLinks=l=>{const p=e.propertyLinkSubscribers[l]||[];for(;p.length;)p.pop().unbind(t)},e.propertyLinkMap={},t.getPropertyLink=function(l){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.propertyLinkMap[l])return e.propertyLinkMap[l];let c=null;const f=[];let h=0,v=!1;function y(S){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(v)return null;const C=[];let w=null;for(h=f.length;h--;){const E=f[h];E.instance===S?w=E:C.push(E)}if(!w)return null;const _=w.instance[`get${mt(w.propertyName)}`]();if(!$S(_,c)||T){for(c=_,v=!0;C.length;){const E=C.pop();E.instance.set({[E.propertyName]:c})}v=!1}return e.propertyLinkMap[l].persistent&&(e.propertyLinkMap[l].value=_),_}function x(S,T){const C=[];for(h=f.length;h--;){const w=f[h];w.instance===S&&(w.propertyName===T||T===void 0)&&(w.subscription.unsubscribe(),C.push(h))}for(;C.length;)f.splice(C.pop(),1)}function m(S,T){let C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const w=S.onModified(y),_=f[0];return f.push({instance:S,propertyName:T,subscription:w}),C&&(e.propertyLinkMap[l].persistent&&e.propertyLinkMap[l].value!==void 0?S.set({[T]:e.propertyLinkMap[l].value}):_&&y(_.instance,!0)),{unsubscribe:()=>x(S,T)}}function g(){for(;f.length;)f.pop().subscription.unsubscribe()}const d={bind:m,unbind:x,unsubscribe:g,persistent:p};return e.propertyLinkMap[l]=d,d};function s(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mu;const p=[],c=e.proxyId,f=o(l)||[];for(let h=0;h<f.length;h++){const v=f[h],y=t[`get${mt(v)}`],x=y?y():void 0,m={id:c,name:v,value:x},g=s(v);g.length&&(m.children=g),p.push(m)}return p}t.listPropertyNames=()=>s().map(l=>l.name),t.getPropertyByName=l=>s().find(p=>p.name===l),t.getPropertyDomainByName=l=>(r[l]||{}).domain,t.getProxySection=()=>({id:e.proxyId,name:e.proxyGroup,ui:e.ui,properties:s()}),t.delete=()=>{const l=Object.keys(e.propertyLinkMap);let p=l.length;for(;p--;)e.propertyLinkMap[l[p]].unsubscribe();Object.keys(e.propertyLinkSubscribers).forEach(t.gcPropertyLinks),n()},t.getState=()=>null;function u(){if(e.links)for(let l=0;l<e.links.length;l++){const{link:p,property:c,persistent:f,updateOnBind:h,type:v}=e.links[l];if(v==="application"){const y=e.proxyManager.getPropertyLink(p,f);t.registerPropertyLinkForGC(y,"application"),y.bind(t,c,h)}}}Dh(u)}function Ry(t,e,n){const r=t.delete,i=[],a=Object.keys(n);let o=a.length;for(;o--;){const s=a[o],{modelKey:u,property:l,modified:p=!0}=n[s],c=mt(l),f=mt(s);t[`get${f}`]=e[u][`get${c}`],t[`set${f}`]=e[u][`set${c}`],p&&i.push(e[u].onModified(t.modified))}t.delete=()=>{for(;i.length;)i.pop().unsubscribe();r()}}function Fy(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};e.this=t;function i(s){const u=Object.keys(s);let l=u.length;for(;l--;){const p=u[l];e[p].set(s[p])}}const a=Object.keys(r);let o=a.length;for(;o--;){const s=a[o];e[s]=r[s];const u=n[s];t[`set${mt(s)}`]=l=>{if(l!==e[s]){e[s]=l;const p=u[l];i(p),t.modified()}}}a.length&&Ut(t,e,a)}const td=10,nd=40,rd=800;function Ly(t){let e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*td,i=n*td,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||i)&&t.deltaMode&&(t.deltaMode===1?(r*=nd,i*=nd):(r*=rd,i*=rd)),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n||e,pixelX:r,pixelY:i||r}}var P={algo:Nh,capitalize:Ac,chain:Hs,debounce:by,enumToString:HS,event:Oy,EVENT_ABORT:Mh,formatBytesToProperUnit:Ty,formatNumbersWithThousandSeparator:Cy,get:Ut,getArray:So,getCurrentGlobalMTime:zS,getStateArrayMapFunc:_y,isVtkObject:Rh,keystore:Fh,measurePromiseExecution:Ey,moveToProtected:$s,newInstance:ze,newTypedArray:xo,newTypedArrayFrom:Vc,normalizeWheel:Ly,obj:qe,proxy:My,proxyPropertyMapping:Ry,proxyPropertyState:Fy,safeArrays:wy,set:js,setArray:Oh,setGet:ut,setGetArray:bh,setImmediate:Dh,setLoggerFunction:vy,throttle:Ny,traverseInstanceTree:Y0,TYPED_ARRAYS:jt,uncapitalize:Sy,VOID:gy,vtkDebugMacro:q0,vtkErrorMacro:Me,vtkInfoMacro:my,vtkLogMacro:yy,vtkOnceErrorMacro:xy,vtkWarningMacro:Bc,objectSetterMap:Dy},un=Object.freeze({__proto__:null,VOID:gy,setLoggerFunction:vy,vtkLogMacro:yy,vtkInfoMacro:my,vtkDebugMacro:q0,vtkErrorMacro:Me,vtkWarningMacro:Bc,vtkOnceErrorMacro:xy,TYPED_ARRAYS:jt,newTypedArray:xo,newTypedArrayFrom:Vc,capitalize:Ac,_capitalize:mt,uncapitalize:Sy,formatBytesToProperUnit:Ty,formatNumbersWithThousandSeparator:Cy,setImmediateVTK:Dh,measurePromiseExecution:Ey,obj:qe,get:Ut,set:js,setGet:ut,getArray:So,setArray:Oh,setGetArray:bh,moveToProtected:$s,algo:Nh,EVENT_ABORT:Mh,event:Oy,newInstance:ze,chain:Hs,isVtkObject:Rh,traverseInstanceTree:Y0,debounce:by,throttle:Ny,keystore:Fh,proxy:My,proxyPropertyMapping:Ry,proxyPropertyState:Fy,normalizeWheel:Ly,default:P});const{vtkErrorMacro:qS}=P,YS=["Build","Render"];function JS(t,e){e.classHierarchy.push("vtkViewNode"),t.build=r=>{},t.render=r=>{},t.traverse=r=>{const i=r.getTraverseOperation(),a=t[i];if(a){a(r);return}t.apply(r,!0);for(let o=0;o<e.children.length;o++)e.children[o].traverse(r);t.apply(r,!1)},t.apply=(r,i)=>{const a=t[r.getOperation()];a&&a(i,r)},t.getViewNodeFor=r=>{if(e.renderable===r)return t;for(let i=0;i<e.children.length;++i){const o=e.children[i].getViewNodeFor(r);if(o)return o}},t.getFirstAncestorOfType=r=>e._parent?e._parent.isA(r)?e._parent:e._parent.getFirstAncestorOfType(r):null,t.getLastAncestorOfType=r=>{if(!e._parent)return null;const i=e._parent.getLastAncestorOfType(r);return i||(e._parent.isA(r)?e._parent:null)},t.addMissingNode=r=>{if(!r)return;const i=e._renderableChildMap.get(r);if(i!==void 0)return i.setVisited(!0),i;const a=t.createViewNode(r);if(a)return a.setParent(t),a.setVisited(!0),e._renderableChildMap.set(r,a),e.children.push(a),a},t.addMissingNodes=r=>{if(!(!r||!r.length))for(let i=0;i<r.length;++i){const a=r[i];t.addMissingNode(a)}},t.addMissingChildren=r=>{if(!(!r||!r.length))for(let i=0;i<r.length;++i){const a=r[i];if(e.children.indexOf(a)===-1){a.setParent(t),e.children.push(a);const s=a.getRenderable();s&&e._renderableChildMap.set(s,a)}a.setVisited(!0)}},t.removeNode=r=>{const i=e.children.findIndex(o=>o===r);if(i<0)return!1;const a=r.getRenderable();return a&&e._renderableChildMap.delete(a),r.delete(),e.children.splice(i,1),!0},t.prepareNodes=()=>{for(let r=0;r<e.children.length;++r)e.children[r].setVisited(!1)},t.setVisited=r=>{e.visited=r},t.removeUnusedNodes=()=>{let r=0;for(let i=0;i<e.children.length;++i){const a=e.children[i];if(a.getVisited())e.children[r++]=a,a.setVisited(!1);else{const s=a.getRenderable();s&&e._renderableChildMap.delete(s),a.delete()}}e.children.length=r},t.createViewNode=r=>{if(!e.myFactory)return qS("Cannot create view nodes without my own factory"),null;const i=e.myFactory.createNode(r);return i&&i.setRenderable(r),i};const n=t.delete;t.delete=()=>{for(let r=0;r<e.children.length;r++)e.children[r].delete();n()}}const QS={renderable:null,myFactory:null,children:[],visited:!1};function ky(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,QS,n),P.obj(t,e),P.event(t,e,"event"),e._renderableChildMap=new Map,P.get(t,e,["visited"]),P.setGet(t,e,["_parent","renderable","myFactory"]),P.getArray(t,e,["children"]),P.moveToProtected(t,e,["parent"]),JS(t,e)}const ZS=P.newInstance(ky,"vtkViewNode");var He={newInstance:ZS,extend:ky,PASS_TYPES:YS};function eT(t,e){e.overrides||(e.overrides={}),e.classHierarchy.push("vtkViewNodeFactory"),t.createNode=n=>{if(n.isDeleted())return null;let r=0,i=n.getClassName(r++),a=!1;const o=Object.keys(e.overrides);for(;i&&!a;)o.indexOf(i)!==-1?a=!0:i=n.getClassName(r++);if(!a)return null;const s=e.overrides[i]();return s.setMyFactory(t),s}}const tT={};function By(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,tT,n),P.obj(t,e),eT(t,e)}const nT=P.newInstance(By,"vtkViewNodeFactory");var Vy={newInstance:nT,extend:By};const Ay=Object.create(null);function Lt(t,e){Ay[t]=e}function rT(t,e){e.classHierarchy.push("vtkOpenGLViewNodeFactory")}const iT={};function Uy(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,iT,n),e.overrides=Ay,Vy.extend(t,e,n),rT(t,e)}const aT=P.newInstance(Uy,"vtkOpenGLViewNodeFactory");var oT={newInstance:aT,extend:Uy};function sT(t,e){e.classHierarchy.push("vtkOpenGLCamera"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext())},t.opaquePass=n=>{if(n){const r=e._openGLRenderer.getTiledSizeAndOrigin();e.context.viewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize),e.context.scissor(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)}},t.translucentPass=t.opaquePass,t.zBufferPass=t.opaquePass,t.opaqueZBufferPass=t.opaquePass,t.volumePass=t.opaquePass,t.getKeyMatrices=n=>{if(n!==e.lastRenderer||e._openGLRenderWindow.getMTime()>e.keyMatrixTime.getMTime()||t.getMTime()>e.keyMatrixTime.getMTime()||n.getMTime()>e.keyMatrixTime.getMTime()||e.renderable.getMTime()>e.keyMatrixTime.getMTime()){ft(e.keyMatrices.wcvc,e.renderable.getViewMatrix()),kc(e.keyMatrices.normalMatrix,e.keyMatrices.wcvc),zs(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),Fe(e.keyMatrices.wcvc,e.keyMatrices.wcvc);const r=e._openGLRenderer.getAspectRatio();ft(e.keyMatrices.vcpc,e.renderable.getProjectionMatrix(r,-1,1)),Fe(e.keyMatrices.vcpc,e.keyMatrices.vcpc),Le(e.keyMatrices.wcpc,e.keyMatrices.vcpc,e.keyMatrices.wcvc),e.keyMatrixTime.modified(),e.lastRenderer=n}return e.keyMatrices}}const uT={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};function cT(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,uT,n),He.extend(t,e,n),e.keyMatrixTime={},qe(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(9),vcpc:new Float64Array(16),wcvc:new Float64Array(16),wcpc:new Float64Array(16)},ut(t,e,["context","keyMatrixTime"]),sT(t,e)}const lT=ze(cT);Lt("vtkCamera",lT);const{vtkDebugMacro:fT}=un;function pT(t,e){e.classHierarchy.push("vtkOpenGLRenderer"),t.buildPass=n=>{if(n){if(!e.renderable)return;t.updateLights(),t.prepareNodes(),t.addMissingNode(e.renderable.getActiveCamera()),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps()),t.removeUnusedNodes()}},t.updateLights=()=>{let n=0;const r=e.renderable.getLightsByReference();for(let i=0;i<r.length;++i)r[i].getSwitch()>0&&n++;return n||(fT("No lights are on, creating one."),e.renderable.createLight()),n},t.zBufferPass=n=>{if(n){let r=0;const i=e.context;e.renderable.getTransparent()||(e.context.clearColor(1,0,0,1),r|=i.COLOR_BUFFER_BIT),e.renderable.getPreserveDepthBuffer()||(i.clearDepth(1),r|=i.DEPTH_BUFFER_BIT,e.context.depthMask(!0));const a=t.getTiledSizeAndOrigin();i.enable(i.SCISSOR_TEST),i.scissor(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),i.viewport(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),i.colorMask(!0,!0,!0,!0),r&&i.clear(r),i.enable(i.DEPTH_TEST)}},t.opaqueZBufferPass=n=>t.zBufferPass(n),t.cameraPass=n=>{n&&t.clear()},t.getAspectRatio=()=>{const n=e._parent.getSizeByReference(),r=e.renderable.getViewportByReference();return n[0]*(r[2]-r[0])/((r[3]-r[1])*n[1])},t.getTiledSizeAndOrigin=()=>{const n=e.renderable.getViewportByReference(),r=[0,0,1,1],i=n[0]-r[0],a=n[1]-r[1],o=e._parent.normalizedDisplayToDisplay(i,a),s=Math.round(o[0]),u=Math.round(o[1]),l=n[2]-r[0],p=n[3]-r[1],c=e._parent.normalizedDisplayToDisplay(l,p);let f=Math.round(c[0])-s,h=Math.round(c[1])-u;return f<0&&(f=0),h<0&&(h=0),{usize:f,vsize:h,lowerLeftU:s,lowerLeftV:u}},t.clear=()=>{let n=0;const r=e.context;if(!e.renderable.getTransparent()){const a=e.renderable.getBackgroundByReference();r.clearColor(a[0],a[1],a[2],a[3]),n|=r.COLOR_BUFFER_BIT}e.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),n|=r.DEPTH_BUFFER_BIT,r.depthMask(!0)),r.colorMask(!0,!0,!0,!0);const i=t.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),r.viewport(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),n&&r.clear(n),r.enable(r.DEPTH_TEST)},t.releaseGraphicsResources=()=>{e.selector!==null&&e.selector.releaseGraphicsResources(),e.renderable&&e.renderable.getViewProps().forEach(n=>{n.modified()})},t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))}}const hT={context:null,_openGLRenderWindow:null,selector:null};function gT(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,hT,n),He.extend(t,e,n),Ut(t,e,["shaderCache"]),ut(t,e,["selector"]),$s(t,e,["openGLRenderWindow"]),pT(t,e)}const dT=ze(gT,"vtkOpenGLRenderer");Lt("vtkRenderer",dT);function vT(t,e){e.classHierarchy.push("vtkOpenGLActor"),t.buildPass=n=>{if(n){e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let r=0;r<e.children.length;r++){const i=e.children[r];i.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(i)):e.oglmapper=i}}},t.traverseZBufferPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseOpaqueZBufferPass=n=>t.traverseOpaquePass(n),t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let n=0;n<e.ogltextures.length;n++){const r=e.ogltextures[n];r.render(),r.getHandle()&&e.activeTextures.push(r)}}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.zBufferPass=(n,r)=>t.opaquePass(n,r),t.opaqueZBufferPass=(n,r)=>t.opaquePass(n,r),t.opaquePass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()},t.translucentPass=(n,r)=>{if(n)e.context.depthMask(e._openGLRenderer.getSelector()&&e.renderable.getNestedPickable()),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(e.renderable.computeMatrix(),ft(e.keyMatrices.mcwc,e.renderable.getMatrix()),Fe(e.keyMatrices.mcwc,e.keyMatrices.mcwc),e.renderable.getIsIdentity()?gr(e.keyMatrices.normalMatrix):(kc(e.keyMatrices.normalMatrix,e.keyMatrices.mcwc),zs(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),mh(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),e.keyMatrixTime.modified()),e.keyMatrices)}const yT={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null};function mT(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,yT,n),He.extend(t,e,n),e.keyMatrixTime={},qe(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:gr(new Float64Array(9)),mcwc:ye(new Float64Array(16))},ut(t,e,["context"]),Ut(t,e,["activeTextures"]),vT(t,e)}const xT=ze(mT);Lt("vtkActor",xT);function ST(t,e){e.classHierarchy.push("vtkOpenGLActor2D"),t.buildPass=n=>{if(n){if(!e.renderable)return;e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let r=0;r<e.children.length;r++){const i=e.children[r];i.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(i)):e.oglmapper=i}}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementOverlayActorCount()}},t.traverseOpaquePass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseOverlayPass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let n=0;n<e.ogltextures.length;n++){const r=e.ogltextures[n];r.render(),r.getHandle()&&e.activeTextures.push(r)}}},t.opaquePass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()},t.translucentPass=(n,r)=>{if(n)e.context.depthMask(!1),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()},t.overlayPass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()}}const TT={context:null,activeTextures:null};function CT(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,TT,n),He.extend(t,e,n),ut(t,e,["context"]),Ut(t,e,["activeTextures"]),ST(t,e)}const wT=ze(CT);Lt("vtkActor2D",wT);function f0(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _T(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Gy(t){let e,n,r;t.length!==2?(e=f0,n=(s,u)=>f0(t(s),u),r=(s,u)=>t(s)-u):(e=t===f0||t===_T?t:ET,n=t,r=t);function i(s,u,l=0,p=s.length){if(l<p){if(e(u,u)!==0)return p;do{const c=l+p>>>1;n(s[c],u)<0?l=c+1:p=c}while(l<p)}return l}function a(s,u,l=0,p=s.length){if(l<p){if(e(u,u)!==0)return p;do{const c=l+p>>>1;n(s[c],u)<=0?l=c+1:p=c}while(l<p)}return l}function o(s,u,l=0,p=s.length){const c=i(s,u,l,p-1);return c>l&&r(s[c-1],u)>-r(s[c],u)?c-1:c}return{left:i,center:o,right:a}}function ET(){return 0}function DT(t){return t===null?NaN:+t}const OT=Gy(f0),bT=OT.right;Gy(DT).center;const NT=Math.sqrt(50),MT=Math.sqrt(10),RT=Math.sqrt(2);function J0(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=NT?10:a>=MT?5:a>=RT?2:1;let s,u,l;return i<0?(l=Math.pow(10,-i)/o,s=Math.round(t*l),u=Math.round(e*l),s/l<t&&++s,u/l>e&&--u,l=-l):(l=Math.pow(10,i)*o,s=Math.round(t/l),u=Math.round(e/l),s*l<t&&++s,u*l>e&&--u),u<s&&.5<=n&&n<2?J0(t,e,n*2):[s,u,l]}function FT(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?J0(e,t,n):J0(t,e,n);if(!(a>=i))return[];const s=a-i+1,u=new Array(s);if(r)if(o<0)for(let l=0;l<s;++l)u[l]=(a-l)/-o;else for(let l=0;l<s;++l)u[l]=(a-l)*o;else if(o<0)for(let l=0;l<s;++l)u[l]=(i+l)/-o;else for(let l=0;l<s;++l)u[l]=(i+l)*o;return u}function qf(t,e,n){return e=+e,t=+t,n=+n,J0(t,e,n)[2]}function LT(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?qf(e,t,n):qf(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function kT(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Lh(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Py(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ks(){}var Ns=.7,Q0=1/Ns,qa="\\s*([+-]?\\d+)\\s*",Ms="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",BT=/^#([0-9a-f]{3,8})$/,VT=new RegExp(`^rgb\\(${qa},${qa},${qa}\\)$`),AT=new RegExp(`^rgb\\(${lr},${lr},${lr}\\)$`),UT=new RegExp(`^rgba\\(${qa},${qa},${qa},${Ms}\\)$`),GT=new RegExp(`^rgba\\(${lr},${lr},${lr},${Ms}\\)$`),PT=new RegExp(`^hsl\\(${Ms},${lr},${lr}\\)$`),IT=new RegExp(`^hsla\\(${Ms},${lr},${lr},${Ms}\\)$`),id={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Lh(Ks,Rs,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ad,formatHex:ad,formatHex8:zT,formatHsl:WT,formatRgb:od,toString:od});function ad(){return this.rgb().formatHex()}function zT(){return this.rgb().formatHex8()}function WT(){return Iy(this).formatHsl()}function od(){return this.rgb().formatRgb()}function Rs(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=BT.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?sd(e):n===3?new nn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?xu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?xu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=VT.exec(t))?new nn(e[1],e[2],e[3],1):(e=AT.exec(t))?new nn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=UT.exec(t))?xu(e[1],e[2],e[3],e[4]):(e=GT.exec(t))?xu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=PT.exec(t))?ld(e[1],e[2]/100,e[3]/100,1):(e=IT.exec(t))?ld(e[1],e[2]/100,e[3]/100,e[4]):id.hasOwnProperty(t)?sd(id[t]):t==="transparent"?new nn(NaN,NaN,NaN,0):null}function sd(t){return new nn(t>>16&255,t>>8&255,t&255,1)}function xu(t,e,n,r){return r<=0&&(t=e=n=NaN),new nn(t,e,n,r)}function jT(t){return t instanceof Ks||(t=Rs(t)),t?(t=t.rgb(),new nn(t.r,t.g,t.b,t.opacity)):new nn}function Yf(t,e,n,r){return arguments.length===1?jT(t):new nn(t,e,n,r??1)}function nn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Lh(nn,Yf,Py(Ks,{brighter(t){return t=t==null?Q0:Math.pow(Q0,t),new nn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ns:Math.pow(Ns,t),new nn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new nn(Ji(this.r),Ji(this.g),Ji(this.b),Z0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ud,formatHex:ud,formatHex8:$T,formatRgb:cd,toString:cd}));function ud(){return`#${ji(this.r)}${ji(this.g)}${ji(this.b)}`}function $T(){return`#${ji(this.r)}${ji(this.g)}${ji(this.b)}${ji((isNaN(this.opacity)?1:this.opacity)*255)}`}function cd(){const t=Z0(this.opacity);return`${t===1?"rgb(":"rgba("}${Ji(this.r)}, ${Ji(this.g)}, ${Ji(this.b)}${t===1?")":`, ${t})`}`}function Z0(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ji(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ji(t){return t=Ji(t),(t<16?"0":"")+t.toString(16)}function ld(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new jn(t,e,n,r)}function Iy(t){if(t instanceof jn)return new jn(t.h,t.s,t.l,t.opacity);if(t instanceof Ks||(t=Rs(t)),!t)return new jn;if(t instanceof jn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new jn(o,s,u,t.opacity)}function HT(t,e,n,r){return arguments.length===1?Iy(t):new jn(t,e,n,r??1)}function jn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Lh(jn,HT,Py(Ks,{brighter(t){return t=t==null?Q0:Math.pow(Q0,t),new jn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ns:Math.pow(Ns,t),new jn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new nn(bl(t>=240?t-240:t+120,i,r),bl(t,i,r),bl(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new jn(fd(this.h),Su(this.s),Su(this.l),Z0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Z0(this.opacity);return`${t===1?"hsl(":"hsla("}${fd(this.h)}, ${Su(this.s)*100}%, ${Su(this.l)*100}%${t===1?")":`, ${t})`}`}}));function fd(t){return t=(t||0)%360,t<0?t+360:t}function Su(t){return Math.max(0,Math.min(1,t||0))}function bl(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const kh=t=>()=>t;function KT(t,e){return function(n){return t+n*e}}function XT(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function qT(t){return(t=+t)==1?zy:function(e,n){return n-e?XT(e,n,t):kh(isNaN(e)?n:e)}}function zy(t,e){var n=e-t;return n?KT(t,n):kh(isNaN(t)?e:t)}const pd=function t(e){var n=qT(e);function r(i,a){var o=n((i=Yf(i)).r,(a=Yf(a)).r),s=n(i.g,a.g),u=n(i.b,a.b),l=zy(i.opacity,a.opacity);return function(p){return i.r=o(p),i.g=s(p),i.b=u(p),i.opacity=l(p),i+""}}return r.gamma=t,r}(1);function YT(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function JT(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function QT(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Bh(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function ZT(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ec(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function eC(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Bh(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Jf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nl=new RegExp(Jf.source,"g");function tC(t){return function(){return t}}function nC(t){return function(e){return t(e)+""}}function rC(t,e){var n=Jf.lastIndex=Nl.lastIndex=0,r,i,a,o=-1,s=[],u=[];for(t=t+"",e=e+"";(r=Jf.exec(t))&&(i=Nl.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:ec(r,i)})),n=Nl.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?nC(u[0].x):tC(e):(e=u.length,function(l){for(var p=0,c;p<e;++p)s[(c=u[p]).i]=c.x(l);return s.join("")})}function Bh(t,e){var n=typeof e,r;return e==null||n==="boolean"?kh(e):(n==="number"?ec:n==="string"?(r=Rs(e))?(e=r,pd):rC:e instanceof Rs?pd:e instanceof Date?ZT:JT(e)?YT:Array.isArray(e)?QT:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?eC:ec)(t,e)}function iC(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function aC(t){return function(){return t}}function oC(t){return+t}var hd=[0,1];function Va(t){return t}function Qf(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:aC(isNaN(e)?NaN:.5)}function sC(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function uC(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=Qf(i,r),a=n(o,a)):(r=Qf(r,i),a=n(a,o)),function(s){return a(r(s))}}function cC(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Qf(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var u=bT(t,s,1,r)-1;return a[u](i[u](s))}}function lC(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function fC(){var t=hd,e=hd,n=Bh,r,i,a,o=Va,s,u,l;function p(){var f=Math.min(t.length,e.length);return o!==Va&&(o=sC(t[0],t[f-1])),s=f>2?cC:uC,u=l=null,c}function c(f){return f==null||isNaN(f=+f)?a:(u||(u=s(t.map(r),e,n)))(r(o(f)))}return c.invert=function(f){return o(i((l||(l=s(e,t.map(r),ec)))(f)))},c.domain=function(f){return arguments.length?(t=Array.from(f,oC),p()):t.slice()},c.range=function(f){return arguments.length?(e=Array.from(f),p()):e.slice()},c.rangeRound=function(f){return e=Array.from(f),n=iC,p()},c.clamp=function(f){return arguments.length?(o=f?!0:Va,p()):o!==Va},c.interpolate=function(f){return arguments.length?(n=f,p()):n},c.unknown=function(f){return arguments.length?(a=f,c):a},function(f,h){return r=f,i=h,p()}}function pC(){return fC()(Va,Va)}function hC(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function tc(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function so(t){return t=tc(Math.abs(t)),t?t[1]:NaN}function gC(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function dC(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var vC=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nc(t){if(!(e=vC.exec(t)))throw new Error("invalid format: "+t);var e;return new Vh({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}nc.prototype=Vh.prototype;function Vh(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Vh.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function yC(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Wy;function mC(t,e){var n=tc(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Wy=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+tc(t,Math.max(0,e+a-1))[0]}function gd(t,e){var n=tc(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const dd={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:hC,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>gd(t*100,e),r:gd,s:mC,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function vd(t){return t}var yd=Array.prototype.map,md=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function xC(t){var e=t.grouping===void 0||t.thousands===void 0?vd:gC(yd.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?vd:dC(yd.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(c){c=nc(c);var f=c.fill,h=c.align,v=c.sign,y=c.symbol,x=c.zero,m=c.width,g=c.comma,d=c.precision,S=c.trim,T=c.type;T==="n"?(g=!0,T="g"):dd[T]||(d===void 0&&(d=12),S=!0,T="g"),(x||f==="0"&&h==="=")&&(x=!0,f="0",h="=");var C=y==="$"?n:y==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",w=y==="$"?r:/[%p]/.test(T)?o:"",_=dd[T],E=/[defgprs%]/.test(T);d=d===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d));function D(O){var N=C,R=w,M,A,G;if(T==="c")R=_(O)+R,O="";else{O=+O;var j=O<0||1/O<0;if(O=isNaN(O)?u:_(Math.abs(O),d),S&&(O=yC(O)),j&&+O==0&&v!=="+"&&(j=!1),N=(j?v==="("?v:s:v==="-"||v==="("?"":v)+N,R=(T==="s"?md[8+Wy/3]:"")+R+(j&&v==="("?")":""),E){for(M=-1,A=O.length;++M<A;)if(G=O.charCodeAt(M),48>G||G>57){R=(G===46?i+O.slice(M+1):O.slice(M))+R,O=O.slice(0,M);break}}}g&&!x&&(O=e(O,1/0));var k=N.length+O.length+R.length,F=k<m?new Array(m-k+1).join(f):"";switch(g&&x&&(O=e(F+O,F.length?m-R.length:1/0),F=""),h){case"<":O=N+O+R+F;break;case"=":O=N+F+O+R;break;case"^":O=F.slice(0,k=F.length>>1)+N+O+R+F.slice(k);break;default:O=F+N+O+R;break}return a(O)}return D.toString=function(){return c+""},D}function p(c,f){var h=l((c=nc(c),c.type="f",c)),v=Math.max(-8,Math.min(8,Math.floor(so(f)/3)))*3,y=Math.pow(10,-v),x=md[8+v/3];return function(m){return h(y*m)+x}}return{format:l,formatPrefix:p}}var Tu,jy,$y;SC({thousands:",",grouping:[3],currency:["$",""]});function SC(t){return Tu=xC(t),jy=Tu.format,$y=Tu.formatPrefix,Tu}function TC(t){return Math.max(0,-so(Math.abs(t)))}function CC(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(so(e)/3)))*3-so(Math.abs(t)))}function wC(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,so(e)-so(t))+1}function _C(t,e,n,r){var i=LT(t,e,n),a;switch(r=nc(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=CC(i,o))&&(r.precision=a),$y(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=wC(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=TC(i))&&(r.precision=a-(r.type==="%")*2);break}}return jy(r)}function EC(t){var e=t.domain;return t.ticks=function(n){var r=e();return FT(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return _C(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],u,l,p=10;for(s<o&&(l=o,o=s,s=l,l=i,i=a,a=l);p-- >0;){if(l=qf(o,s,n),l===u)return r[i]=o,r[a]=s,e(r);if(l>0)o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l;else if(l<0)o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l;else break;u=l}return t},t}function Ah(){var t=pC();return t.copy=function(){return lC(t,Ah())},kT.apply(t,arguments),EC(t)}var Uh={exports:{}};Uh.exports;(function(t){(function(e,n,r){function i(u){var l=this,p=s();l.next=function(){var c=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=c-(l.c=c|0)},l.c=1,l.s0=p(" "),l.s1=p(" "),l.s2=p(" "),l.s0-=p(u),l.s0<0&&(l.s0+=1),l.s1-=p(u),l.s1<0&&(l.s1+=1),l.s2-=p(u),l.s2<0&&(l.s2+=1),p=null}function a(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function o(u,l){var p=new i(u),c=l&&l.state,f=p.next;return f.int32=function(){return p.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,c&&(typeof c=="object"&&a(c,p),f.state=function(){return a(p,{})}),f}function s(){var u=4022871197,l=function(p){p=String(p);for(var c=0;c<p.length;c++){u+=p.charCodeAt(c);var f=.02519603282416938*u;u=f>>>0,f-=u,f*=u,u=f>>>0,f-=u,u+=f*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=o:this.alea=o})(hn,t)})(Uh);var DC=Uh.exports,Gh={exports:{}};Gh.exports;(function(t){(function(e,n,r){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var c=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^c^c>>>8},s===(s|0)?u.x=s:l+=s;for(var p=0;p<l.length+64;p++)u.x^=l.charCodeAt(p)|0,u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function o(s,u){var l=new i(s),p=u&&u.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,v=(f+h)/(1<<21);while(v===0);return v},c.int32=l.next,c.quick=c,p&&(typeof p=="object"&&a(p,l),c.state=function(){return a(l,{})}),c}n&&n.exports?n.exports=o:this.xor128=o})(hn,t)})(Gh);var OC=Gh.exports,Ph={exports:{}};Ph.exports;(function(t){(function(e,n,r){function i(s){var u=this,l="";u.next=function(){var c=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(c^c<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(s|0)?u.x=s:l+=s;for(var p=0;p<l.length+64;p++)u.x^=l.charCodeAt(p)|0,p==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function o(s,u){var l=new i(s),p=u&&u.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,v=(f+h)/(1<<21);while(v===0);return v},c.int32=l.next,c.quick=c,p&&(typeof p=="object"&&a(p,l),c.state=function(){return a(l,{})}),c}n&&n.exports?n.exports=o:this.xorwow=o})(hn,t)})(Ph);var bC=Ph.exports,Ih={exports:{}};Ih.exports;(function(t){(function(e,n,r){function i(s){var u=this;u.next=function(){var p=u.x,c=u.i,f,h;return f=p[c],f^=f>>>7,h=f^f<<24,f=p[c+1&7],h^=f^f>>>10,f=p[c+3&7],h^=f^f>>>3,f=p[c+4&7],h^=f^f<<7,f=p[c+7&7],f=f^f<<13,h^=f^f<<9,p[c]=h,u.i=c+1&7,h};function l(p,c){var f,h=[];if(c===(c|0))h[0]=c;else for(c=""+c,f=0;f<c.length;++f)h[f&7]=h[f&7]<<15^c.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],p.x=h,p.i=0,f=256;f>0;--f)p.next()}l(u,s)}function a(s,u){return u.x=s.x.slice(),u.i=s.i,u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),p=u&&u.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,v=(f+h)/(1<<21);while(v===0);return v},c.int32=l.next,c.quick=c,p&&(p.x&&a(p,l),c.state=function(){return a(l,{})}),c}n&&n.exports?n.exports=o:this.xorshift7=o})(hn,t)})(Ih);var NC=Ih.exports,zh={exports:{}};zh.exports;(function(t){(function(e,n,r){function i(s){var u=this;u.next=function(){var p=u.w,c=u.X,f=u.i,h,v;return u.w=p=p+1640531527|0,v=c[f+34&127],h=c[f=f+1&127],v^=v<<13,h^=h<<17,v^=v>>>15,h^=h>>>12,v=c[f]=v^h,u.i=f,v+(p^p>>>16)|0};function l(p,c){var f,h,v,y,x,m=[],g=128;for(c===(c|0)?(h=c,c=null):(c=c+"\0",h=0,g=Math.max(g,c.length)),v=0,y=-32;y<g;++y)c&&(h^=c.charCodeAt((y+32)%c.length)),y===0&&(x=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,y>=0&&(x=x+1640531527|0,f=m[y&127]^=h+x,v=f==0?v+1:0);for(v>=128&&(m[(c&&c.length||0)&127]=-1),v=127,y=4*128;y>0;--y)h=m[v+34&127],f=m[v=v+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,m[v]=h^f;p.w=x,p.X=m,p.i=v}l(u,s)}function a(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function o(s,u){s==null&&(s=+new Date);var l=new i(s),p=u&&u.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,v=(f+h)/(1<<21);while(v===0);return v},c.int32=l.next,c.quick=c,p&&(p.X&&a(p,l),c.state=function(){return a(l,{})}),c}n&&n.exports?n.exports=o:this.xor4096=o})(hn,t)})(zh);var MC=zh.exports,Wh={exports:{}};Wh.exports;(function(t){(function(e,n,r){function i(s){var u=this,l="";u.next=function(){var c=u.b,f=u.c,h=u.d,v=u.a;return c=c<<25^c>>>7^f,f=f-h|0,h=h<<24^h>>>8^v,v=v-c|0,u.b=c=c<<20^c>>>12^f,u.c=f=f-h|0,u.d=h<<16^f>>>16^v,u.a=v-c|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=s|0):l+=s;for(var p=0;p<l.length+20;p++)u.b^=l.charCodeAt(p)|0,u.next()}function a(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function o(s,u){var l=new i(s),p=u&&u.state,c=function(){return(l.next()>>>0)/4294967296};return c.double=function(){do var f=l.next()>>>11,h=(l.next()>>>0)/4294967296,v=(f+h)/(1<<21);while(v===0);return v},c.int32=l.next,c.quick=c,p&&(typeof p=="object"&&a(p,l),c.state=function(){return a(l,{})}),c}n&&n.exports?n.exports=o:this.tychei=o})(hn,t)})(Wh);var RC=Wh.exports,Hy={exports:{}};const FC={},LC=Object.freeze(Object.defineProperty({__proto__:null,default:FC},Symbol.toStringTag,{value:"Module"})),kC=X9(LC);(function(t){(function(e,n,r){var i=256,a=6,o=52,s="random",u=r.pow(i,a),l=r.pow(2,o),p=l*2,c=i-1,f;function h(S,T,C){var w=[];T=T==!0?{entropy:!0}:T||{};var _=m(x(T.entropy?[S,d(n)]:S??g(),3),w),E=new v(w),D=function(){for(var O=E.g(a),N=u,R=0;O<l;)O=(O+R)*i,N*=i,R=E.g(1);for(;O>=p;)O/=2,N/=2,R>>>=1;return(O+R)/N};return D.int32=function(){return E.g(4)|0},D.quick=function(){return E.g(4)/4294967296},D.double=D,m(d(E.S),n),(T.pass||C||function(O,N,R,M){return M&&(M.S&&y(M,E),O.state=function(){return y(E,{})}),R?(r[s]=O,N):O})(D,_,"global"in T?T.global:this==r,T.state)}function v(S){var T,C=S.length,w=this,_=0,E=w.i=w.j=0,D=w.S=[];for(C||(S=[C++]);_<i;)D[_]=_++;for(_=0;_<i;_++)D[_]=D[E=c&E+S[_%C]+(T=D[_])],D[E]=T;(w.g=function(O){for(var N,R=0,M=w.i,A=w.j,G=w.S;O--;)N=G[M=c&M+1],R=R*i+G[c&(G[M]=G[A=c&A+N])+(G[A]=N)];return w.i=M,w.j=A,R})(i)}function y(S,T){return T.i=S.i,T.j=S.j,T.S=S.S.slice(),T}function x(S,T){var C=[],w=typeof S,_;if(T&&w=="object")for(_ in S)try{C.push(x(S[_],T-1))}catch{}return C.length?C:w=="string"?S:S+"\0"}function m(S,T){for(var C=S+"",w,_=0;_<C.length;)T[c&_]=c&(w^=T[c&_]*19)+C.charCodeAt(_++);return d(T)}function g(){try{var S;return f&&(S=f.randomBytes)?S=S(i):(S=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(S)),d(S)}catch{var T=e.navigator,C=T&&T.plugins;return[+new Date,e,C,e.screen,d(n)]}}function d(S){return String.fromCharCode.apply(0,S)}if(m(r.random(),n),t.exports){t.exports=h;try{f=kC}catch{}}else r["seed"+s]=h})(typeof self<"u"?self:hn,[],Math)})(Hy);var BC=Hy.exports,VC=DC,AC=OC,UC=bC,GC=NC,PC=MC,IC=RC,pa=BC;pa.alea=VC;pa.xor128=AC;pa.xorwow=UC;pa.xorshift7=GC;pa.xor4096=PC;pa.tychei=IC;var zC=pa;const WC=yc(zC),jh=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],jC=[1,0,0,0,1,0,0,0,1],$h=1e-6,Hh=1e-12,{vtkErrorMacro:Ky,vtkWarningMacro:ia}=P;let Xy=0;const xd=20;function Xs(t){return()=>Ky(`vtkMath::${t} - NOT IMPLEMENTED`)}function as(t,e,n,r){let i;for(let a=0;a<e;a++)i=t[n*e+a],t[n*e+a]=t[r*e+a],t[r*e+a]=i}function Go(t,e,n,r){let i;for(let a=0;a<e;a++)i=t[a*e+n],t[a*e+n]=t[a*e+r],t[a*e+r]=i}function et(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3;const e=Array(t);for(let n=0;n<t;++n)e[n]=0;return e}const $C=()=>Math.PI;function HC(t,e){return e>1023?t*2**1023*2**(e-1023):e<-1074?t*2**-1074*2**(e+1074):t*2**e}function gt(t){return t/180*Math.PI}function uo(t){return t*180/Math.PI}const{round:Po,floor:Kh,ceil:KC,min:XC,max:qC}=Math;function YC(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=1/0;for(let i=e,a=t.length;i<a;i+=n)t[i]<r&&(r=t[i]);return r}function JC(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=-1/0;for(let i=e,a=t.length;i<a;i+=n)r<t[i]&&(r=t[i]);return r}function QC(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=1/0,i=-1/0;for(let a=e,o=t.length;a<o;a+=n)t[a]<r&&(r=t[a]),i<t[a]&&(i=t[a]);return[r,i]}const ZC=Xs("ceilLog2"),ew=Xs("factorial");function bn(t){let e=1;for(;e<t;)e*=2;return e}function Io(t){return t===bn(t)}function tw(t,e){let n=1;for(let r=1;r<=e;++r)n*=(t-r+1)/r;return Math.floor(n)}function nw(t,e){if(t<e)return 0;const n=et(e);for(let r=0;r<e;++r)n[r]=r;return n}function rw(t,e,n){let r=0;for(let i=e-1;i>=0;--i)if(n[i]<t-e+i){let a=n[i]+1;for(;i<e;)n[i++]=a++;r=1;break}return r}function iw(t){WC(`${t}`,{global:!0}),Xy=t}function aw(){return Xy}function ow(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:1)-t;return t+n*Math.random()}const sw=Xs("gaussian");function rc(t,e,n){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function Nr(t,e,n){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}function qy(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,t}function Yy(t,e){return t[0]*=e,t[1]*=e,t}function Zf(t,e,n,r){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r[2]=t[2]+e[2]*n,r}function uw(t,e,n,r){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r}function Oe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function cw(t,e,n){n[0]=t[0]*e[0],n[1]=t[0]*e[1],n[2]=t[0]*e[2],n[3]=t[1]*e[0],n[4]=t[1]*e[1],n[5]=t[1]*e[2],n[6]=t[2]*e[0],n[7]=t[2]*e[1],n[8]=t[2]*e[2]}function pr(t,e,n){const r=t[1]*e[2]-t[2]*e[1],i=t[2]*e[0]-t[0]*e[2],a=t[0]*e[1]-t[1]*e[0];return n[0]=r,n[1]=i,n[2]=a,n}function ri(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;switch(e){case 1:return Math.abs(t);case 2:return Math.sqrt(t[0]*t[0]+t[1]*t[1]);case 3:return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);default:{let n=0;for(let r=0;r<e;r++)n+=t[r]*t[r];return Math.sqrt(n)}}}function aa(t){const e=ri(t);return e!==0&&(t[0]/=e,t[1]/=e,t[2]/=e),e}function lw(t,e,n,r){const i=t[0]*t[0],a=t[1]*t[1],o=t[2]*t[2],s=Math.sqrt(i+a+o);let u,l,p;i>a&&i>o?(u=0,l=1,p=2):a>o?(u=1,l=2,p=0):(u=2,l=0,p=1);const c=t[u]/s,f=t[l]/s,h=t[p]/s,v=Math.sqrt(c*c+h*h);if(r!==0){const y=Math.sin(r),x=Math.cos(r);e&&(e[u]=(h*x-c*f*y)/v,e[l]=y*v,e[p]=(-(c*x)-f*h*y)/v),n&&(n[u]=(-(h*y)-c*f*x)/v,n[l]=x*v,n[p]=(c*y-f*h*x)/v)}else e&&(e[u]=h/v,e[l]=0,e[p]=-c/v),n&&(n[u]=-c*f/v,n[l]=v,n[p]=-f*h/v)}function fw(t,e,n){const r=Oe(e,e);if(r===0)return n[0]=0,n[1]=0,n[2]=0,!1;const i=Oe(t,e)/r;for(let a=0;a<3;a++)n[a]=e[a];return qy(n,i),!0}function ep(t,e){return t[0]*e[0]+t[1]*e[1]}function pw(t,e,n){const r=ep(e,e);if(r===0)return n[0]=0,n[1]=0,!1;const i=ep(t,e)/r;for(let a=0;a<2;a++)n[a]=e[a];return Yy(n,i),!0}function In(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2])}function hw(t,e){const n=[0,0,0];return pr(t,e,n),Math.atan2(ri(n),Oe(t,e))}function gw(t,e,n){const r=Math.abs(t-n);return 1/Math.sqrt(2*Math.PI*e)*Math.exp(-(r**2)/(2*e))}function dw(t,e,n){const r=Math.abs(t-n);return Math.exp(-(r**2)/(2*e))}function vw(t,e,n){n[0]=t[0]*e[0],n[1]=t[0]*e[1],n[2]=t[1]*e[0],n[3]=t[1]*e[1]}function Jy(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Qy(t){const e=Jy(t);return e!==0&&(t[0]/=e,t[1]/=e),e}function ct(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===2?e[0][0]*e[1][1]-e[1][0]*e[0][1]:e.length===4?e[0]*e[3]-e[1]*e[2]:Number.NaN}function yw(t,e){let n,r,i;const a=[0,0,0];for(let o=0;o<3;o++)i=Math.abs(t[o*3]),(r=Math.abs(t[o*3+1]))>i&&(i=r),(r=Math.abs(t[o*3+2]))>i&&(i=r),a[o]=1/i;i=a[0]*Math.abs(t[0]),n=0,(r=a[1]*Math.abs(t[3]))>=i&&(i=r,n=1),(r=a[2]*Math.abs(t[6]))>=i&&(n=2),n!==0&&(as(t,3,n,0),a[n]=a[0]),e[0]=n,t[3]/=t[0],t[6]/=t[0],t[4]-=t[3]*t[1],t[7]-=t[6]*t[1],i=a[1]*Math.abs(t[4]),n=1,(r=a[2]*Math.abs(t[7]))>=i&&(n=2,as(t,3,1,2),a[2]=a[1]),e[1]=n,t[7]/=t[4],t[5]-=t[3]*t[2],t[8]-=t[6]*t[2]+t[7]*t[5],e[2]=2}function mw(t,e,n){let r=n[e[0]];n[e[0]]=n[0],n[0]=r,r=n[e[1]],n[e[1]]=n[1],n[1]=r-t[3]*n[0],r=n[e[2]],n[e[2]]=n[2],n[2]=r-t[6]*n[0]-t[7]*n[1],n[2]/=t[8],n[1]=(n[1]-t[5]*n[2])/t[4],n[0]=(n[0]-t[1]*n[1]-t[2]*n[2])/t[0]}function xw(t,e,n){const r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],p=t[7],c=t[8],f=+ct(s,p,u,c),h=-ct(o,l,u,c),v=+ct(o,l,s,p),y=-ct(i,p,a,c),x=+ct(r,l,a,c),m=-ct(r,l,i,p),g=+ct(i,s,a,u),d=-ct(r,o,a,u),S=+ct(r,o,i,s),T=r*f+i*h+a*v,C=f*e[0]+y*e[1]+g*e[2],w=h*e[0]+x*e[1]+d*e[2],_=v*e[0]+m*e[1]+S*e[2];n[0]=C/T,n[1]=w/T,n[2]=_/T}function Sw(t,e,n){const r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2],i=t[3]*e[0]+t[4]*e[1]+t[5]*e[2],a=t[6]*e[0]+t[7]*e[1]+t[8]*e[2];n[0]=r,n[1]=i,n[2]=a}function tp(t,e,n){const r=[...t],i=[...e];for(let a=0;a<3;a++)n[a]=r[0]*i[a]+r[1]*i[a+3]+r[2]*i[a+6],n[a+3]=r[3]*i[a]+r[4]*i[a+3]+r[5]*i[a+6],n[a+6]=r[6]*i[a]+r[7]*i[a+3]+r[8]*i[a+6]}function Tw(t,e,n,r,i,a,o){r!==i&&Ky("Number of columns of A must match number of rows of B.");const s=[...t],u=[...e];for(let l=0;l<n;l++)for(let p=0;p<a;p++){o[l*a+p]=0;for(let c=0;c<r;c++)o[l*a+p]+=s[l*r+c]*u[p+a*c]}}function Ya(t,e){let n;n=t[3],e[3]=t[1],e[1]=n,n=t[6],e[6]=t[2],e[2]=n,n=t[7],e[7]=t[5],e[5]=n,e[0]=t[0],e[4]=t[4],e[8]=t[8]}function Cw(t,e){const n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],p=t[8],c=+ct(o,l,s,p),f=-ct(a,u,s,p),h=+ct(a,u,o,l),v=-ct(r,l,i,p),y=+ct(n,u,i,p),x=-ct(n,u,r,l),m=+ct(r,o,i,s),g=-ct(n,a,i,s),d=+ct(n,a,r,o),S=n*c+r*f+i*h;S===0&&ia("Matrix has 0 determinant"),e[0]=c/S,e[3]=f/S,e[6]=h/S,e[1]=v/S,e[4]=y/S,e[7]=x/S,e[2]=m/S,e[5]=g/S,e[8]=d/S}function Uc(t){return t[0]*t[4]*t[8]+t[3]*t[7]*t[2]+t[6]*t[1]*t[5]-t[0]*t[7]*t[5]-t[3]*t[1]*t[8]-t[6]*t[4]*t[2]}function Zy(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$h;if(t.length!==e.length)return!1;function r(i,a){return Math.abs(i-e[a])<=n}return t.every(r)}const qs=Zy;function em(t){for(let e=0;e<3;e++)t[e*3]=t[e*3+1]=t[e*3+2]=0,t[e*3+e]=1}function tm(t,e){for(let n=0;n<t;n++){for(let r=0;r<t;r++)e[n*t+r]=0;e[n*t+n]=1}return e}function ww(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$h;return qs(t,jh,e)}function _w(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$h;return qs(t,jC,e)}function nm(t,e){const n=t[0]*t[0],r=t[0]*t[1],i=t[0]*t[2],a=t[0]*t[3],o=t[1]*t[1],s=t[2]*t[2],u=t[3]*t[3],l=t[1]*t[2],p=t[1]*t[3],c=t[2]*t[3],f=o+s+u;let h=1/(n+f);const v=(n-f)*h;h*=2,e[0]=o*h+v,e[3]=(l+a)*h,e[6]=(p-i)*h,e[1]=(l-a)*h,e[4]=s*h+v,e[7]=(c+r)*h,e[2]=(p+i)*h,e[5]=(c-r)*h,e[8]=u*h+v}function p0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!`${t}`.includes("e"))return+`${Math.round(`${t}e+${e}`)}e-${e}`;const n=`${t}`.split("e");let r="";return+n[1]+e>0&&(r="+"),+`${Math.round(`${+n[0]}e${r}${+n[1]+e}`)}e-${e}`}function np(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return e[0]=p0(t[0],n),e[1]=p0(t[1],n),e[2]=p0(t[2],n),e}function Ys(t,e,n,r){let i,a,o,s,u,l,p,c,f,h,v,y,x,m,g,d;const S=et(e),T=et(e),C=(_,E,D)=>{m=_[E],x=_[D],_[E]=m-y*(x+m*h),_[D]=x+y*(m-x*h)};for(tm(e,r),u=0;u<e;u++)S[u]=n[u]=t[u+u*e],T[u]=0;for(i=0;i<xd;i++){for(v=0,u=0;u<e-1;u++)for(s=u+1;s<e;s++)v+=Math.abs(t[u*e+s]);if(v===0)break;for(i<3?p=.2*v/(e*e):p=0,u=0;u<e-1;u++)for(s=u+1;s<e;s++)if(m=100*Math.abs(t[u*e+s]),i>3&&Math.abs(n[u])+m===Math.abs(n[u])&&Math.abs(n[s])+m===Math.abs(n[s]))t[u*e+s]=0;else if(Math.abs(t[u*e+s])>p){for(x=n[s]-n[u],Math.abs(x)+m===Math.abs(x)?f=t[u*e+s]/x:(c=.5*x/t[u*e+s],f=1/(Math.abs(c)+Math.sqrt(1+c*c)),c<0&&(f=-f)),g=1/Math.sqrt(1+f*f),y=f*g,h=y/(1+g),x=f*t[u*e+s],T[u]-=x,T[s]+=x,n[u]-=x,n[s]+=x,t[u*e+s]=0,a=0;a<=u-1;a++)C(t,a*e+u,a*e+s);for(a=u+1;a<=s-1;a++)C(t,u*e+a,a*e+s);for(a=s+1;a<e;a++)C(t,u*e+a,s*e+a);for(a=0;a<e;a++)C(r,a*e+u,a*e+s)}for(u=0;u<e;u++)S[u]+=T[u],n[u]=S[u],T[u]=0}if(i>=xd)return ia("vtkMath::Jacobi: Error extracting eigenfunctions"),0;for(a=0;a<e-1;a++){for(o=a,d=n[o],i=a+1;i<e;i++)(n[i]>=d||Math.abs(n[i]-d)<Hh)&&(o=i,d=n[o]);o!==a&&(n[o]=n[a],n[a]=d,Go(r,e,a,o))}const w=(e>>1)+(e&1);for(l=0,i=0;i<e*e;i++)r[i]>=0&&l++;if(l<w)for(i=0;i<e;i++)r[i*e+a]*=-1;return 1}function rm(t,e){const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];n[0]=t[0]+t[4]+t[8],n[5]=t[0]-t[4]-t[8],n[10]=-t[0]+t[4]-t[8],n[15]=-t[0]-t[4]+t[8],n[1]=n[4]=t[7]-t[5],n[2]=n[8]=t[2]-t[6],n[3]=n[12]=t[3]-t[1],n[6]=n[9]=t[3]+t[1],n[7]=n[13]=t[2]+t[6],n[11]=n[14]=t[7]+t[5];const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],a=[...n];Ys(a,4,i,r),e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12]}function Ew(t,e,n){const r=t[0]*e[0],i=t[0]*e[1],a=t[0]*e[2],o=t[0]*e[3],s=t[1]*e[0],u=t[1]*e[1],l=t[1]*e[2],p=t[1]*e[3],c=t[2]*e[0],f=t[2]*e[1],h=t[2]*e[2],v=t[2]*e[3],y=t[3]*e[0],x=t[3]*e[1],m=t[3]*e[2],g=t[3]*e[3];n[0]=r-u-h-g,n[1]=i+s+v-m,n[2]=a-p+c+x,n[3]=o+l-f+y}function im(t,e){for(let f=0;f<9;f++)e[f]=t[f];const n=et(3),r=et(3);let i;for(let f=0;f<3;f++){const h=Math.abs(e[f*3]),v=Math.abs(e[f*3+1]),y=Math.abs(e[f*3+2]);i=v>h?v:h,i=y>i?y:i,n[f]=1,i!==0&&(n[f]/=i)}const a=Math.abs(e[0])*n[0],o=Math.abs(e[3])*n[1],s=Math.abs(e[6])*n[2];r[0]=0,i=a,o>=i&&(i=o,r[0]=1),s>=i&&(r[0]=2),r[0]!==0&&(Go(e,3,r[0],0),n[r[0]]=n[0]);const u=Math.abs(e[4])*n[1],l=Math.abs(e[7])*n[2];r[1]=1,i=u,l>=i&&(r[1]=2,Go(e,3,1,2)),r[2]=2;let p=0;if(Uc(e)<0){p=1;for(let f=0;f<9;f++)e[f]=-e[f]}const c=et(4);if(rm(e,c),nm(c,e),p)for(let f=0;f<9;f++)e[f]=-e[f];r[1]!==1&&Go(e,3,r[1],1),r[0]!==0&&Go(e,3,r[0],0)}function am(t,e,n){let r,i,a,o,s,u;const l=[...t];if(Ys(l,3,e,n),e[0]===e[1]&&e[0]===e[2]){em(n);return}for(Ya(n,n),r=0;r<3;r++)if(e[(r+1)%3]===e[(r+2)%3]){for(u=Math.abs(n[r*3]),o=0,i=1;i<3;i++)u<(s=Math.abs(n[r*3+i]))&&(u=s,o=i);o!==r&&(s=e[o],e[o]=e[r],e[r]=s,as(n,3,r,o)),n[o*3+o]<0&&(n[o*3]=-n[o*3],n[o*3+1]=-n[o*3+1],n[o*3+2]=-n[o*3+2]),i=(o+1)%3,a=(o+2)%3,n[i*3]=0,n[i*3+1]=0,n[i*3+2]=0,n[i*3+i]=1;const p=pr([n[o*3],n[o*3+1],n[o*3+2]],[n[i*3],n[i*3+1],n[i*3+2]],[]);aa(p);const c=pr(p,[n[o*3],n[o*3+1],n[o*3+2]],[]);for(let f=0;f<3;f++)n[a*3+f]=p[f],n[i*3+f]=c[f];Ya(n,n);return}for(u=Math.abs(n[0]),o=0,r=1;r<3;r++)u<(s=Math.abs(n[r*3]))&&(u=s,o=r);if(o!==0){const p=e[o];e[o]=e[0],e[0]=p,as(n,3,o,0)}if(Math.abs(n[4])<Math.abs(n[7])){const p=e[2];e[2]=e[1],e[1]=p,as(n,3,1,2)}for(r=0;r<2;r++)n[r*3+r]<0&&(n[r*3]=-n[r*3],n[r*3+1]=-n[r*3+1],n[r*3+2]=-n[r*3+2]);Uc(n)<0&&(n[6]=-n[6],n[7]=-n[7],n[8]=-n[8]),Ya(n,n)}function Dw(t,e,n,r){let i;const a=[...t],o=Uc(a);if(o<0)for(i=0;i<9;i++)a[i]=-a[i];im(a,e),Ya(a,a),tp(a,e,r),am(r,n,r),tp(e,r,e),Ya(r,r),o<0&&(n[0]=-n[0],n[1]=-n[1],n[2]=-n[2])}function Xh(t,e,n){let r,i,a,o,s=0,u,l,p;const c=et(n);for(r=0;r<n;r++){for(o=0,i=0;i<n;i++)(p=Math.abs(t[r*n+i]))>o&&(o=p);if(o===0)return ia("Unable to factor linear system"),0;c[r]=1/o}for(i=0;i<n;i++){for(r=0;r<i;r++){for(u=t[r*n+i],a=0;a<r;a++)u-=t[r*n+a]*t[a*n+i];t[r*n+i]=u}for(o=0,r=i;r<n;r++){for(u=t[r*n+i],a=0;a<i;a++)u-=t[r*n+a]*t[a*n+i];t[r*n+i]=u,(l=c[r]*Math.abs(u))>=o&&(o=l,s=r)}if(i!==s){for(a=0;a<n;a++)l=t[s*n+a],t[s*n+a]=t[i*n+a],t[i*n+a]=l;c[s]=c[i]}if(e[i]=s,Math.abs(t[i*n+i])<=Hh)return ia("Unable to factor linear system"),0;if(i!==n-1)for(l=1/t[i*n+i],r=i+1;r<n;r++)t[r*n+i]*=l}return 1}function qh(t,e,n,r){let i,a,o,s,u;for(o=-1,i=0;i<r;i++){if(s=e[i],u=n[s],n[s]=n[i],o>=0)for(a=o;a<=i-1;a++)u-=t[i*r+a]*n[a];else u!==0&&(o=i);n[i]=u}for(i=r-1;i>=0;i--){for(u=n[i],a=i+1;a<r;a++)u-=t[i*r+a]*n[a];n[i]=u/t[i*r+i]}}function om(t,e,n){if(n===2){const i=et(2),a=ct(t[0],t[1],t[2],t[3]);return a===0?0:(i[0]=(t[3]*e[0]-t[1]*e[1])/a,i[1]=(-(t[2]*e[0])+t[0]*e[1])/a,e[0]=i[0],e[1]=i[1],1)}if(n===1)return t[0]===0?0:(e[0]/=t[0],1);const r=et(n);return Xh(t,r,n)===0?0:(qh(t,r,e,n),1)}function sm(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;const a=r||et(n),o=i||et(n);if(Xh(t,a,n)===0)return null;for(let s=0;s<n;s++){for(let u=0;u<n;u++)o[u]=0;o[s]=1,qh(t,a,o,n);for(let u=0;u<n;u++)e[u*n+s]=o[u]}return e}function Ow(t,e){let n=+Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let i=0;i<e;i++)for(let a=i;a<e;a++)Math.abs(t[i*e+a])>r&&(r=Math.abs(t[i*e+a]));for(let i=0;i<e;i++)Math.abs(t[i*e+i])<n&&(n=Math.abs(t[i*e+i]));return n===0?Number.MAX_VALUE:r/n}function bw(t,e,n){return Ys(t,3,e,n)}function rp(t,e,n,r){if(t<n)return ia("Insufficient number of samples. Underdetermined."),0;let i,a,o;const s=et(n*n),u=et(n),l=et(n*n);for(o=0;o<t;o++)for(i=0;i<n;i++)for(a=i;a<n;a++)s[i*n+a]+=e[o*n+i]*e[o*n+a];for(i=0;i<n;i++)for(a=0;a<i;a++)s[i*n+a]=s[a*n+i];for(Ys(s,n,u,l),i=0;i<n;i++)r[i]=l[i*n+n-1];return 1}function Nw(t,e,n,r,i,a){let o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!0;if(t<n||t<i)return ia("Insufficient number of samples. Underdetermined."),0;const s=et(i);let u=1,l,p=0,c,f,h,v=0;if(o){for(f=0;f<i;f++)s[f]=1;for(c=0;c<t;c++)for(f=0;f<i;f++)Math.abs(r[c*i+f])>Hh&&(u=0,s[f]=0);if(u&&i===1)return ia("Detected homogeneous system (Y=0), calling SolveHomogeneousLeastSquares()"),rp(t,e,n,a);if(u)v=1;else for(f=0;f<i;f++)s[f]&&(v=1)}v&&(l=et(n),p=rp(t,e,n,l));const y=et(n*n),x=et(n*n),m=et(n*i);for(h=0;h<t;h++)for(c=0;c<n;c++){for(f=c;f<n;f++)y[c*n+f]+=e[h*n+c]*e[h*n+f];for(f=0;f<i;f++)m[c*i+f]+=e[h*n+c]*r[h*i+f]}for(c=0;c<n;c++)for(f=0;f<c;f++)y[c*n+f]=y[f*n+c];const g=sm(y,x,n);if(g)for(c=0;c<n;c++)for(f=0;f<i;f++)for(a[c*i+f]=0,h=0;h<n;h++)a[c*i+f]+=x[c*n+h]*m[h*i+f];if(v){for(f=0;f<i;f++)if(s[f])for(c=0;c<n;c++)a[c*i+f]=l[c*i]}return v?p&&g:g}function Mw(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,.5,1];switch(t.length){case 3:return e[0]=parseInt(t[0],16)*17/255,e[1]=parseInt(t[1],16)*17/255,e[2]=parseInt(t[2],16)*17/255,e;case 4:return e[0]=parseInt(t[1],16)*17/255,e[1]=parseInt(t[2],16)*17/255,e[2]=parseInt(t[3],16)*17/255,e;case 6:return e[0]=parseInt(t.substr(0,2),16)/255,e[1]=parseInt(t.substr(2,2),16)/255,e[2]=parseInt(t.substr(4,2),16)/255,e;case 7:return e[0]=parseInt(t.substr(1,2),16)/255,e[1]=parseInt(t.substr(3,2),16)/255,e[2]=parseInt(t.substr(5,2),16)/255,e;case 9:return e[0]=parseInt(t.substr(1,2),16)/255,e[1]=parseInt(t.substr(3,2),16)/255,e[2]=parseInt(t.substr(5,2),16)/255,e[3]=parseInt(t.substr(7,2),16)/255,e;default:return e}}function zo(t,e){let n,r;const[i,a,o]=t,s=1/3,u=1/6,l=2/3;let p=i,c=i;a>p?p=a:a<c&&(c=a),o>p?p=o:o<c&&(c=o);const f=p;f>0?r=(p-c)/p:r=0,r>0?(i===p?n=u*(a-o)/(p-c):a===p?n=s+u*(o-i)/(p-c):n=l+u*(i-a)/(p-c),n<0&&(n+=1)):n=0,e[0]=n,e[1]=r,e[2]=f}function Ai(t,e){const[n,r,i]=t,a=1/3,o=1/6,s=2/3,u=5/6;let l,p,c;n>o&&n<=a?(p=1,l=(a-n)/o,c=0):n>a&&n<=.5?(p=1,c=(n-a)/o,l=0):n>.5&&n<=s?(c=1,p=(s-n)/o,l=0):n>s&&n<=u?(c=1,l=(n-s)/o,p=0):n>u&&n<=1?(l=1,c=(1-n)/o,p=0):(l=1,p=n/o,c=0),l=r*l+(1-r),p=r*p+(1-r),c=r*c+(1-r),l*=i,p*=i,c*=i,e[0]=l,e[1]=p,e[2]=c}function um(t,e){const[n,r,i]=t;let a=(n+16)/116,o=r/500+a,s=a-i/200;a**3>.008856?a**=3:a=(a-16/116)/7.787,o**3>.008856?o**=3:o=(o-16/116)/7.787,s**3>.008856?s**=3:s=(s-16/116)/7.787;const u=.9505,l=1,p=1.089;e[0]=u*o,e[1]=l*a,e[2]=p*s}function cm(t,e){const[n,r,i]=t,a=.9505,o=1,s=1.089;let u=n/a,l=r/o,p=i/s;u>.008856?u**=1/3:u=7.787*u+16/116,l>.008856?l**=1/3:l=7.787*l+16/116,p>.008856?p**=1/3:p=7.787*p+16/116,e[0]=116*l-16,e[1]=500*(u-l),e[2]=200*(l-p)}function lm(t,e){const[n,r,i]=t;let a=n*3.2406+r*-1.5372+i*-.4986,o=n*-.9689+r*1.8758+i*.0415,s=n*.0557+r*-.204+i*1.057;a>.0031308?a=1.055*a**(1/2.4)-.055:a*=12.92,o>.0031308?o=1.055*o**(1/2.4)-.055:o*=12.92,s>.0031308?s=1.055*s**(1/2.4)-.055:s*=12.92;let u=a;u<o&&(u=o),u<s&&(u=s),u>1&&(a/=u,o/=u,s/=u),a<0&&(a=0),o<0&&(o=0),s<0&&(s=0),e[0]=a,e[1]=o,e[2]=s}function fm(t,e){let[n,r,i]=t;n>.04045?n=((n+.055)/1.055)**2.4:n/=12.92,r>.04045?r=((r+.055)/1.055)**2.4:r/=12.92,i>.04045?i=((i+.055)/1.055)**2.4:i/=12.92,e[0]=n*.4124+r*.3576+i*.1805,e[1]=n*.2126+r*.7152+i*.0722,e[2]=n*.0193+r*.1192+i*.9505}function $i(t,e){const n=[0,0,0];fm(t,n),cm(n,e)}function ic(t,e){const n=[0,0,0];um(t,n),lm(n,e)}function To(t){return t[0]=1,t[1]=-1,t[2]=1,t[3]=-1,t[4]=1,t[5]=-1,t}function h0(t){return!(t[1]-t[0]<0)}function Rw(t,e,n){return n[0]=Math.min(t[0],e[0]),n[1]=Math.max(t[0],e[0]),n[2]=Math.min(t[1],e[1]),n[3]=Math.max(t[1],e[1]),n[4]=Math.min(t[2],e[2]),n[5]=Math.max(t[2],e[2]),n}function ii(t,e,n){return t<e?e:t>n?n:t}function ip(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[0,0,0];return r[0]=ii(t[0],e[0],n[0]),r[1]=ii(t[1],e[1],n[1]),r[2]=ii(t[2],e[2],n[2]),r}function Fw(t,e){let n=0;return e[0]!==e[1]&&(t<e[0]?n=e[0]:t>e[1]?n=e[1]:n=t,n=(n-e[0])/(e[1]-e[0])),n}const Lw=Xs("GetScalarTypeFittingRange"),kw=Xs("GetAdjustedScalarRange");function Bw(t,e){if(!t||!e)return 0;for(let n=0;n<6;n+=2)if(t[n]<e[n]||t[n]>e[n+1]||t[n+1]<e[n]||t[n+1]>e[n+1])return 0;return 1}function Vw(t,e,n){if(!t||!e)return 0;for(let r=0;r<6;r+=2)if(t[r]+n[r/2]<e[r]||t[r]-n[r/2]>e[r+1]||t[r+1]+n[r/2]<e[r]||t[r+1]-n[r/2]>e[r+1])return 0;return 1}function Aw(t,e,n){if(!t||!e||!n)return 0;for(let r=0;r<3;r++)if(t[r]+n[r]<e[2*r]||t[r]-n[r]>e[2*r+1])return 0;return 1}function Uw(t,e,n,r){const i=et(3),a=et(3),o=et(3),s=et(3),u=et(3),l=et(3);for(let S=0;S<3;++S)i[S]=t[S]-e[S],a[S]=e[S]-n[S],o[S]=n[S]-t[S],s[S]=-i[S],u[S]=-a[S],l[S]=-o[S];const p=ri(s),c=ri(u),f=ri(o),h=et(3);pr(i,a,h);const v=ri(h),y=p*c*f/(2*v),x=2*v*v,m=c*c*Oe(i,l)/x,g=f*f*Oe(s,a)/x,d=p*p*Oe(o,u)/x;for(let S=0;S<3;++S)r[S]=m*t[S]+g*e[S]+d*n[S];return y}const Gw=1/0,Pw=-1/0,pm=t=>!Number.isFinite(t),{isFinite:Iw,isNaN:ap}=Number,ac=ap;function Js(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}function zw(t){let e=-1,n=-1;for(let r=0;r<t.length;r++){const i=Math.abs(t[r]);i>e&&(n=r,e=i)}return n}function Ww(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;const n=new Array(e),r=new Array(e);for(let a=0;a<e;++a)n[a]=a,r[a]=a;for(let a=e-1;a>0;a--){let o=-1/0,s=0,u=0;for(let l=0;l<=a;++l){const p=n[l];for(let c=0;c<=a;++c){const f=r[c],h=Math.abs(t[p+e*f]);h>o&&(o=h,s=l,u=c)}}[n[a],n[s]]=[n[s],n[a]],[r[a],r[u]]=[r[u],r[a]]}const i=new Array(e*e).fill(0);for(let a=0;a<e;++a){const o=n[a]+e*r[a];i[o]=t[o]<0?-1:1}return i}function hm(t){const e=Math.floor(t*255);return e>15?e.toString(16):`0${e.toString(16)}`}function jw(t){return`${arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#"}${t.map(hm).join("")}`}function Cu(t){return Math.round(t*255)}function $w(t){return t.length===3?`rgb(${t.map(Cu).join(", ")})`:`rgba(${Cu(t[0]||0)}, ${Cu(t[1]||0)}, ${Cu(t[2]||0)}, ${t[3]||0})`}var Wo={Pi:$C,ldexp:HC,radiansFromDegrees:gt,degreesFromRadians:uo,round:Po,floor:Kh,ceil:KC,ceilLog2:ZC,min:XC,max:qC,arrayMin:YC,arrayMax:JC,arrayRange:QC,isPowerOfTwo:Io,nearestPowerOfTwo:bn,factorial:ew,binomial:tw,beginCombination:nw,nextCombination:rw,randomSeed:iw,getSeed:aw,random:ow,gaussian:sw,add:rc,subtract:Nr,multiplyScalar:qy,multiplyScalar2D:Yy,multiplyAccumulate:Zf,multiplyAccumulate2D:uw,dot:Oe,outer:cw,cross:pr,norm:ri,normalize:aa,perpendiculars:lw,projectVector:fw,projectVector2D:pw,distance2BetweenPoints:In,angleBetweenVectors:hw,gaussianAmplitude:gw,gaussianWeight:dw,dot2D:ep,outer2D:vw,norm2D:Jy,normalize2D:Qy,determinant2x2:ct,LUFactor3x3:yw,LUSolve3x3:mw,linearSolve3x3:xw,multiply3x3_vect3:Sw,multiply3x3_mat3:tp,multiplyMatrix:Tw,transpose3x3:Ya,invert3x3:Cw,identity3x3:em,identity:tm,isIdentity:ww,isIdentity3x3:_w,determinant3x3:Uc,quaternionToMatrix3x3:nm,areEquals:Zy,areMatricesEqual:qs,roundNumber:p0,roundVector:np,matrix3x3ToQuaternion:rm,multiplyQuaternion:Ew,orthogonalize3x3:im,diagonalize3x3:am,singularValueDecomposition3x3:Dw,solveLinearSystem:om,invertMatrix:sm,luFactorLinearSystem:Xh,luSolveLinearSystem:qh,estimateMatrixCondition:Ow,jacobi:bw,jacobiN:Ys,solveHomogeneousLeastSquares:rp,solveLeastSquares:Nw,hex2float:Mw,rgb2hsv:zo,hsv2rgb:Ai,lab2xyz:um,xyz2lab:cm,xyz2rgb:lm,rgb2xyz:fm,rgb2lab:$i,lab2rgb:ic,uninitializeBounds:To,areBoundsInitialized:h0,computeBoundsFromPoints:Rw,clampValue:ii,clampVector:ip,clampAndNormalizeValue:Fw,getScalarTypeFittingRange:Lw,getAdjustedScalarRange:kw,extentIsWithinOtherExtent:Bw,boundsIsWithinOtherBounds:Vw,pointIsWithinBounds:Aw,solve3PointCircle:Uw,inf:Gw,negInf:Pw,isInf:pm,isNan:ap,isNaN:ap,isFinite:Iw,createUninitializedBounds:Js,getMajorAxisIndex:zw,getSparseOrthogonalMatrix:Ww,floatToHex2:hm,floatRGB2HexCode:jw,float2CssRGBA:$w};function Hw(t,e){e.classHierarchy.push("vtkImplicitFunction"),t.functionValue=n=>{if(!e.transform)return t.evaluateFunction(n);const r=[];return e.transform.transformPoint(n,r),t.evaluateFunction(r)},t.evaluateFunction=n=>{P.vtkErrorMacro("not implemented")}}const Kw={};function gm(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Kw,n),P.obj(t,e),P.setGet(t,e,["transform"]),Hw(t,e)}const Xw=P.newInstance(gm,"vtkImplicitFunction");var qw={newInstance:Xw,extend:gm};const op=1e-6,dm="coincide",vm="disjoint";function Yw(t,e,n){return t[0]*(n[0]-e[0])+t[1]*(n[1]-e[1])+t[2]*(n[2]-e[2])}function ym(t,e,n){const r=n[0]*(t[0]-e[0])+n[1]*(t[1]-e[1])+n[2]*(t[2]-e[2]);return Math.abs(r)}function mm(t,e,n,r){const i=[];Nr(t,e,i);const a=Oe(n,i);r[0]=t[0]-a*n[0],r[1]=t[1]-a*n[1],r[2]=t[2]-a*n[2]}function xm(t,e,n){const r=Oe(t,e);let i=Oe(e,e);return i===0&&(i=1),n[0]=t[0]-r*e[0]/i,n[1]=t[1]-r*e[1]/i,n[2]=t[2]-r*e[2]/i,n}function Sm(t,e,n,r){const i=[];Nr(t,e,i);const a=Oe(n,i),o=Oe(n,n);o!==0?(r[0]=t[0]-a*n[0]/o,r[1]=t[1]-a*n[1]/o,r[2]=t[2]-a*n[2]/o):(r[0]=t[0],r[1]=t[1],r[2]=t[2])}function Tm(t,e,n,r){const i={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},a=[],o=[];Nr(e,t,a),Nr(n,t,o);const s=Oe(r,o),u=Oe(r,a);let l,p;return u<0?l=-u:l=u,s<0?p=-s*op:p=s*op,l<=p||(i.t=s/u,i.x[0]=t[0]+i.t*a[0],i.x[1]=t[1]+i.t*a[1],i.x[2]=t[2]+i.t*a[2],i.intersection=!0,i.betweenPoints=i.t>=0&&i.t<=1),i}function Cm(t,e,n,r){const i={intersection:!1,l0:[],l1:[],error:null},a=[];pr(e,r,a);const o=a.map(c=>Math.abs(c));if(o[0]+o[1]+o[2]<op){const c=[];return Nr(t,n,c),Oe(e,c)===0?i.error=dm:i.error=vm,i}let s;o[0]>o[1]&&o[0]>o[2]?s="x":o[1]>o[2]?s="y":s="z";const u=[],l=-Oe(e,t),p=-Oe(r,n);switch(s){case"x":u[0]=0,u[1]=(p*e[2]-l*r[2])/a[0],u[2]=(l*r[1]-p*e[1])/a[0];break;case"y":u[0]=(l*r[2]-p*e[2])/a[1],u[1]=0,u[2]=(p*e[0]-l*r[0])/a[1];break;case"z":u[0]=(p*e[1]-l*r[1])/a[2],u[1]=(l*r[0]-p*e[0])/a[2],u[2]=0;break}return i.l0=u,rc(u,a,i.l1),i.intersection=!0,i}const Jw={evaluate:Yw,distanceToPlane:ym,projectPoint:mm,projectVector:xm,generalizedProjectPoint:Sm,intersectWithLine:Tm,intersectWithPlane:Cm,DISJOINT:vm,COINCIDE:dm};function Qw(t,e){e.classHierarchy.push("vtkPlane"),t.distanceToPlane=n=>ym(n,e.origin,e.normal),t.projectPoint=(n,r)=>{mm(n,e.origin,e.normal,r)},t.projectVector=(n,r)=>xm(n,e.normal,r),t.push=n=>{if(n!==0)for(let r=0;r<3;r++)e.origin[r]+=n*e.normal[r]},t.generalizedProjectPoint=(n,r)=>{Sm(n,e.origin,e.normal,r)},t.evaluateFunction=(n,r,i)=>Array.isArray(n)?e.normal[0]*(n[0]-e.origin[0])+e.normal[1]*(n[1]-e.origin[1])+e.normal[2]*(n[2]-e.origin[2]):e.normal[0]*(n-e.origin[0])+e.normal[1]*(r-e.origin[1])+e.normal[2]*(i-e.origin[2]),t.evaluateGradient=n=>[e.normal[0],e.normal[1],e.normal[2]],t.intersectWithLine=(n,r)=>Tm(n,r,e.origin,e.normal),t.intersectWithPlane=(n,r)=>Cm(n,r,e.origin,e.normal)}const Zw={normal:[0,0,1],origin:[0,0,0]};function wm(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Zw,n),qw.extend(t,e,n),P.setGetArray(t,e,["normal","origin"],3),Qw(t,e)}const e_=P.newInstance(wm,"vtkPlane");var oa={newInstance:e_,extend:wm,...Jw};const Gc=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function _m(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function Br(t){return(t==null?void 0:t.length)>=6&&t[0]<=t[1]&&t[2]<=t[3]&&t[4]<=t[5]}function Yh(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Jh(t){return Yh(t,Gc)}function oc(t,e,n,r){const[i,a,o,s,u,l]=t;return t[0]=i<e?i:e,t[1]=a>e?a:e,t[2]=o<n?o:n,t[3]=s>n?s:n,t[4]=u<r?u:r,t[5]=l>r?l:r,t}function Qh(t,e){if(e.length===0)return t;if(Array.isArray(e[0]))for(let n=0;n<e.length;++n)oc(t,...e[n]);else for(let n=0;n<e.length;n+=3)oc(t,...e.slice(n,n+3));return t}function Em(t,e,n,r,i,a,o){const[s,u,l,p,c,f]=t;return o===void 0?(t[0]=Math.min(e[0],s),t[1]=Math.max(e[1],u),t[2]=Math.min(e[2],l),t[3]=Math.max(e[3],p),t[4]=Math.min(e[4],c),t[5]=Math.max(e[5],f)):(t[0]=Math.min(e,s),t[1]=Math.max(n,u),t[2]=Math.min(r,l),t[3]=Math.max(i,p),t[4]=Math.min(a,c),t[5]=Math.max(o,f)),t}function Dm(t,e,n,r){const[i,a,o,s,u,l]=t;return t[0]=e,t[1]=e>a?e:a,t[2]=n,t[3]=n>s?n:s,t[4]=r,t[5]=r>l?r:l,i!==e||o!==n||u!==r}function Om(t,e,n,r){const[i,a,o,s,u,l]=t;return t[0]=e<i?e:i,t[1]=e,t[2]=n<o?n:o,t[3]=n,t[4]=r<u?r:u,t[5]=r,a!==e||s!==n||l!==r}function bm(t,e){return t[0]-=e,t[1]+=e,t[2]-=e,t[3]+=e,t[4]-=e,t[5]+=e,t}function Zh(t,e,n,r){return Br(t)?(e>=0?(t[0]*=e,t[1]*=e):(t[0]=e*t[1],t[1]=e*t[0]),n>=0?(t[2]*=n,t[3]*=n):(t[2]=n*t[3],t[3]=n*t[2]),r>=0?(t[4]*=r,t[5]*=r):(t[4]=r*t[5],t[5]=r*t[4]),!0):!1}function e1(t){return[.5*(t[0]+t[1]),.5*(t[2]+t[3]),.5*(t[4]+t[5])]}function t_(t,e,n,r){if(!Br(t))return!1;const i=e1(t);return t[0]-=i[0],t[1]-=i[0],t[2]-=i[1],t[3]-=i[1],t[4]-=i[2],t[5]-=i[2],Zh(t,e,n,r),t[0]+=i[0],t[1]+=i[0],t[2]+=i[1],t[3]+=i[1],t[4]+=i[2],t[5]+=i[2],!0}function os(t,e){return t[e*2+1]-t[e*2]}function Pc(t){return[os(t,0),os(t,1),os(t,2)]}function Nm(t){return t.slice(0,2)}function Mm(t){return t.slice(2,4)}function Rm(t){return t.slice(4,6)}function Fm(t){const e=Pc(t);return e[0]>e[1]?e[0]>e[2]?e[0]:e[2]:e[1]>e[2]?e[1]:e[2]}function Lm(t){if(Br(t)){const e=Pc(t);return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}return null}function t1(t){return[t[0],t[2],t[4]]}function n1(t){return[t[1],t[3],t[5]]}function wu(t,e){return t<=0&&e>=0||t>=0&&e<=0}function r1(t,e){let n=0;for(let r=0;r<2;r++)for(let i=2;i<4;i++)for(let a=4;a<6;a++)e[n++]=[t[r],t[i],t[a]];return e}function km(t,e,n){return e[0]=t[0],e[1]=t[2],e[2]=t[4],n[0]=t[1],n[1]=t[3],n[2]=t[5],e}function Bm(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const r=r1(t,[]);for(let i=0;i<r.length;++i)Re(r[i],r[i],e);return Jh(n),Qh(n,r)}function Vm(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e[0]=.5*(t[1]-t[0]),e[1]=.5*(t[3]-t[2]),e[2]=.5*(t[5]-t[4]),e}function Am(t,e,n,r){const i=[].concat(Gc),a=t.getData();for(let o=0;o<a.length;o+=3){const s=[a[o],a[o+1],a[o+2]],u=Oe(s,e);i[0]=Math.min(u,i[0]),i[1]=Math.max(u,i[1]);const l=Oe(s,n);i[2]=Math.min(l,i[2]),i[3]=Math.max(l,i[3]);const p=Oe(s,r);i[4]=Math.min(p,i[4]),i[5]=Math.max(p,i[5])}return i}function Um(t,e,n,r,i){let a=!0;const o=[];let s=0;const u=[],l=[0,0,0],p=0,c=1,f=2;for(let h=0;h<3;h++)e[h]<t[2*h]?(o[h]=c,l[h]=t[2*h],a=!1):e[h]>t[2*h+1]?(o[h]=p,l[h]=t[2*h+1],a=!1):o[h]=f;if(a)return r[0]=e[0],r[1]=e[1],r[2]=e[2],i[0]=0,1;for(let h=0;h<3;h++)o[h]!==f&&n[h]!==0?u[h]=(l[h]-e[h])/n[h]:u[h]=-1;for(let h=0;h<3;h++)u[s]<u[h]&&(s=h);if(u[s]>1||u[s]<0)return 0;i[0]=u[s];for(let h=0;h<3;h++)if(s!==h){if(r[h]=e[h]+u[s]*n[h],r[h]<t[2*h]||r[h]>t[2*h+1])return 0}else r[h]=l[h];return 1}function Gm(t,e,n){const r=[];let i=0,a=1,o=1;for(let s=4;s<=5;++s){r[2]=t[s];for(let u=2;u<=3;++u){r[1]=t[u];for(let l=0;l<=1;++l)if(r[0]=t[l],i=oa.evaluate(n,e,r),o&&(a=i>=0?1:-1,o=0),i===0||a>0&&i<0||a<0&&i>0)return 1}}return 0}function Pm(t,e){if(!(Br(t)&&Br(e)))return!1;const n=[0,0,0,0,0,0];let r;for(let i=0;i<3;i++)if(r=!1,e[i*2]>=t[i*2]&&e[i*2]<=t[i*2+1]?(r=!0,n[i*2]=e[i*2]):t[i*2]>=e[i*2]&&t[i*2]<=e[i*2+1]&&(r=!0,n[i*2]=t[i*2]),e[i*2+1]>=t[i*2]&&e[i*2+1]<=t[i*2+1]?(r=!0,n[i*2+1]=e[2*i+1]):t[i*2+1]>=e[i*2]&&t[i*2+1]<=e[i*2+1]&&(r=!0,n[i*2+1]=t[i*2+1]),!r)return!1;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],!0}function sc(t,e){if(!(Br(t)&&Br(e)))return!1;for(let n=0;n<3;n++)if(!(e[n*2]>=t[n*2]&&e[n*2]<=t[n*2+1])&&!(t[n*2]>=e[n*2]&&t[n*2]<=e[n*2+1])&&!(e[n*2+1]>=t[n*2]&&e[n*2+1]<=t[n*2+1])&&!(t[n*2+1]>=e[n*2]&&t[n*2+1]<=e[n*2+1]))return!1;return!0}function uc(t,e,n,r){return!(e<t[0]||e>t[1]||n<t[2]||n>t[3]||r<t[4]||r>t[5])}function n_(t,e){return!(!sc(t,e)||!uc(t,...t1(e))||!uc(t,...n1(e)))}function Im(t,e,n){const r=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],i=[0,0,0,0,0,0,0,0];let a=0;for(let c=0;c<2;c++)for(let f=2;f<4;f++)for(let h=4;h<6;h++){const v=[t[c],t[f],t[h]];i[a++]=oa.evaluate(n,e,v)}let o=2;for(;o--&&!(wu(i[r[o][0]],i[r[o][4]])&&wu(i[r[o][1]],i[r[o][5]])&&wu(i[r[o][2]],i[r[o][6]])&&wu(i[r[o][3]],i[r[o][7]])););if(o<0)return!1;const s=Math.sign(n[o]),u=Math.abs((t[o*2+1]-t[o*2])*n[o]);let l=s>0?1:0;for(let c=0;c<4;c++){if(u===0)continue;const f=Math.abs(i[r[o][c]])/u;s>0&&f<l&&(l=f),s<0&&f>l&&(l=f)}const p=(1-l)*t[o*2]+l*t[o*2+1];return s>0?t[o*2]=p:t[o*2+1]=p,!0}class r_{constructor(e){this.bounds=e,this.bounds||(this.bounds=new Float64Array(Gc))}getBounds(){return this.bounds}equals(e){return _m(this.bounds,e)}isValid(){return Br(this.bounds)}setBounds(e){return Yh(this.bounds,e)}reset(){return Jh(this.bounds)}addPoint(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return oc(this.bounds,...n)}addPoints(e){return Qh(this.bounds,e)}addBounds(e,n,r,i,a,o){return Em(this.bounds,e,n,r,i,a,o)}setMinPoint(e,n,r){return Dm(this.bounds,e,n,r)}setMaxPoint(e,n,r){return Om(this.bounds,e,n,r)}inflate(e){return bm(this.bounds,e)}scale(e,n,r){return Zh(this.bounds,e,n,r)}getCenter(){return e1(this.bounds)}getLength(e){return os(this.bounds,e)}getLengths(){return Pc(this.bounds)}getMaxLength(){return Fm(this.bounds)}getDiagonalLength(){return Lm(this.bounds)}getMinPoint(){return t1(this.bounds)}getMaxPoint(){return n1(this.bounds)}getXRange(){return Nm(this.bounds)}getYRange(){return Mm(this.bounds)}getZRange(){return Rm(this.bounds)}getCorners(e){return r1(this.bounds,e)}computeCornerPoints(e,n){return km(this.bounds,e,n)}computeLocalBounds(e,n,r){return Am(this.bounds,e,n,r)}transformBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Bm(this.bounds,e,n)}computeScale3(e){return Vm(this.bounds,e)}cutWithPlane(e,n){return Im(this.bounds,e,n)}intersectBox(e,n,r,i){return Um(this.bounds,e,n,r,i)}intersectPlane(e,n){return Gm(this.bounds,e,n)}intersect(e){return Pm(this.bounds,e)}intersects(e){return sc(this.bounds,e)}containsPoint(e,n,r){return uc(this.bounds,e,n,r)}contains(e){return sc(this.bounds,e)}}function i_(t){const e=t&&t.bounds;return new r_(e)}const a_={equals:_m,isValid:Br,setBounds:Yh,reset:Jh,addPoint:oc,addPoints:Qh,addBounds:Em,setMinPoint:Dm,setMaxPoint:Om,inflate:bm,scale:Zh,scaleAboutCenter:t_,getCenter:e1,getLength:os,getLengths:Pc,getMaxLength:Fm,getDiagonalLength:Lm,getMinPoint:t1,getMaxPoint:n1,getXRange:Nm,getYRange:Mm,getZRange:Rm,getCorners:r1,computeCornerPoints:km,computeLocalBounds:Am,transformBounds:Bm,computeScale3:Vm,cutWithPlane:Im,intersectBox:Um,intersectPlane:Gm,intersect:Pm,intersects:sc,containsPoint:uc,contains:n_,INIT_BOUNDS:Gc};var Ye={newInstance:i_,...a_};const o_={DISPLAY:0,WORLD:1};var zm={CoordinateSystem:o_};const{CoordinateSystem:sp}=zm;function Sd(t){return()=>P.vtkErrorMacro(`vtkProp::${t} - NOT IMPLEMENTED`)}function s_(t,e){e.classHierarchy.push("vtkProp"),t.getMTime=()=>{let n=e.mtime;for(let r=0;r<e.textures.length;++r){const i=e.textures[r].getMTime();i>n&&(n=i)}return n},t.processSelectorPixelBuffers=(n,r)=>{},t.getNestedProps=()=>null,t.getActors=()=>[],t.getActors2D=()=>[],t.getVolumes=()=>[],t.pick=Sd("pick"),t.hasKey=Sd("hasKey"),t.getNestedVisibility=()=>e.visibility&&(!e._parentProp||e._parentProp.getNestedVisibility()),t.getNestedPickable=()=>e.pickable&&(!e._parentProp||e._parentProp.getNestedPickable()),t.getNestedDragable=()=>e.dragable&&(!e._parentProp||e._parentProp.getNestedDragable()),t.getRedrawMTime=()=>e.mtime,t.setEstimatedRenderTime=n=>{e.estimatedRenderTime=n,e.savedEstimatedRenderTime=n},t.restoreEstimatedRenderTime=()=>{e.estimatedRenderTime=e.savedEstimatedRenderTime},t.addEstimatedRenderTime=n=>{e.estimatedRenderTime+=n},t.setAllocatedRenderTime=n=>{e.allocatedRenderTime=n,e.savedEstimatedRenderTime=e.estimatedRenderTime,e.estimatedRenderTime=0},t.getSupportsSelection=()=>!1,t.getTextures=()=>e.textures,t.hasTexture=n=>e.textures.indexOf(n)!==-1,t.addTexture=n=>{n&&!t.hasTexture(n)&&(e.textures=e.textures.concat(n),t.modified())},t.removeTexture=n=>{const r=e.textures.filter(i=>i!==n);e.textures.length!==r.length&&(e.textures=r,t.modified())},t.removeAllTextures=()=>{e.textures=[],t.modified()},t.setCoordinateSystemToWorld=()=>t.setCoordinateSystem(sp.WORLD),t.setCoordinateSystemToDisplay=()=>t.setCoordinateSystem(sp.DISPLAY)}const u_={allocatedRenderTime:10,coordinateSystem:sp.WORLD,dragable:!0,estimatedRenderTime:0,paths:null,pickable:!0,renderTimeMultiplier:1,savedEstimatedRenderTime:0,textures:[],useBounds:!0,visibility:!0};function Wm(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,u_,n),P.obj(t,e),P.get(t,e,["estimatedRenderTime","allocatedRenderTime"]),P.setGet(t,e,["_parentProp","coordinateSystem","dragable","pickable","renderTimeMultiplier","useBounds","visibility"]),P.moveToProtected(t,e,["parentProp"]),s_(t,e)}const c_=P.newInstance(Wm,"vtkProp");var Qs={newInstance:c_,extend:Wm,...zm};const l_=1e-6;function f_(t,e){e.classHierarchy.push("vtkProp3D"),t.addPosition=r=>{e.position=e.position.map((i,a)=>i+r[a]),t.modified()},t.getOrientationWXYZ=()=>{const r=ra();$f(r,e.rotation);const i=new Float64Array(3),a=D7(i,r);return[uo(a),i[0],i[1],i[2]]},t.getOrientationQuaternion=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return $f(r,e.rotation)},t.rotateX=r=>{r!==0&&(Sh(e.rotation,e.rotation,gt(r)),t.modified())},t.rotateY=r=>{r!==0&&(Th(e.rotation,e.rotation,gt(r)),t.modified())},t.rotateZ=r=>{r!==0&&(Ch(e.rotation,e.rotation,gt(r)),t.modified())},t.rotateWXYZ=(r,i,a,o)=>{if(r===0||i===0&&a===0&&o===0)return;const s=gt(r),u=ra();Eh(u,[i,a,o],s);const l=new Float64Array(16);$0(l,u),Le(e.rotation,e.rotation,l),t.modified()},t.rotateQuaternion=r=>{if(Math.abs(r[3])>=1-l_)return;const i=$0(new Float64Array(16),r);Le(e.rotation,e.rotation,i),t.modified()},t.setOrientation=(r,i,a)=>r===e.orientation[0]&&i===e.orientation[1]&&a===e.orientation[2]?!1:(e.orientation=[r,i,a],ye(e.rotation),t.rotateZ(a),t.rotateX(r),t.rotateY(i),t.modified(),!0),t.setUserMatrix=r=>qs(e.userMatrix,r)?!1:(ft(e.userMatrix,r),t.modified(),!0),t.getMatrix=()=>(t.computeMatrix(),e.matrix),t.computeMatrix=()=>{if(t.getMTime()>e.matrixMTime.getMTime()){ye(e.matrix),e.userMatrix&&Le(e.matrix,e.matrix,e.userMatrix),Ze(e.matrix,e.matrix,e.origin),Ze(e.matrix,e.matrix,e.position),Le(e.matrix,e.matrix,e.rotation),kr(e.matrix,e.matrix,e.scale),Ze(e.matrix,e.matrix,[-e.origin[0],-e.origin[1],-e.origin[2]]),Fe(e.matrix,e.matrix),e.isIdentity=!0;for(let r=0;r<4;++r)for(let i=0;i<4;++i)(r===i?1:0)!==e.matrix[r+i*4]&&(e.isIdentity=!1);e.matrixMTime.modified()}},t.getCenter=()=>Ye.getCenter(e.bounds),t.getLength=()=>Ye.getLength(e.bounds),t.getXRange=()=>Ye.getXRange(e.bounds),t.getYRange=()=>Ye.getYRange(e.bounds),t.getZRange=()=>Ye.getZRange(e.bounds),t.getUserMatrix=()=>e.userMatrix;function n(){t.computeMatrix()}t.onModified(n)}const p_={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],rotation:null,scale:[1,1,1],bounds:[1,-1,1,-1,1,-1],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function jm(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,p_,n),Qs.extend(t,e,n),e.matrixMTime={},P.obj(e.matrixMTime),P.get(t,e,["bounds","isIdentity"]),P.getArray(t,e,["orientation"]),P.setGetArray(t,e,["origin","position","scale"],3),e.matrix=ye(new Float64Array(16)),e.rotation=ye(new Float64Array(16)),e.userMatrix=ye(new Float64Array(16)),e.transform=null,f_(t,e)}const h_=P.newInstance(jm,"vtkProp3D");var $m={newInstance:h_,extend:jm};const Hm={FLAT:0,GOURAUD:1,PHONG:2},zt={POINTS:0,WIREFRAME:1,SURFACE:2},g_=Hm;var Km={Shading:Hm,Representation:zt,Interpolation:g_};const{Representation:jo,Interpolation:$o}=Km;function Td(t){return()=>P.vtkErrorMacro(`vtkProperty::${t} - NOT IMPLEMENTED`)}function d_(t,e){e.classHierarchy.push("vtkProperty"),t.setColor=(n,r,i)=>{Array.isArray(n)?(e.color[0]!==n[0]||e.color[1]!==n[1]||e.color[2]!==n[2])&&(e.color[0]=n[0],e.color[1]=n[1],e.color[2]=n[2],t.modified()):(e.color[0]!==n||e.color[1]!==r||e.color[2]!==i)&&(e.color[0]=n,e.color[1]=r,e.color[2]=i,t.modified()),t.setDiffuseColor(e.color),t.setAmbientColor(e.color),t.setSpecularColor(e.color)},t.computeCompositeColor=Td("ComputeCompositeColor"),t.getColor=()=>{let n=0;e.ambient+e.diffuse+e.specular>0&&(n=1/(e.ambient+e.diffuse+e.specular));for(let r=0;r<3;r++)e.color[r]=n*(e.ambient*e.ambientColor[r]+e.diffuse*e.diffuseColor[r]+e.specular*e.specularColor[r]);return[].concat(e.color)},t.setSpecularPower=n=>{const r=1/Math.max(1,n);(e.roughness!==r||e.specularPower!==n)&&(e.specularPower=n,e.roughness=r,t.modified())},t.addShaderVariable=Td("AddShaderVariable"),t.setInterpolationToFlat=()=>t.setInterpolation($o.FLAT),t.setInterpolationToGouraud=()=>t.setInterpolation($o.GOURAUD),t.setInterpolationToPhong=()=>t.setInterpolation($o.PHONG),t.getInterpolationAsString=()=>P.enumToString($o,e.interpolation),t.setRepresentationToWireframe=()=>t.setRepresentation(jo.WIREFRAME),t.setRepresentationToSurface=()=>t.setRepresentation(jo.SURFACE),t.setRepresentationToPoints=()=>t.setRepresentation(jo.POINTS),t.getRepresentationAsString=()=>P.enumToString(jo,e.representation)}const v_={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,metallic:0,roughness:.6,normalStrength:1,emission:1,baseIOR:1.45,specular:0,specularPower:1,opacity:1,interpolation:$o.GOURAUD,representation:jo.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null};function Xm(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,v_,n),P.obj(t,e),P.setGet(t,e,["lighting","interpolation","ambient","diffuse","metallic","roughness","normalStrength","emission","baseIOR","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation","diffuseTexture","metallicTexture","roughnessTexture","normalTexture","ambientOcclusionTexture","emissionTexture"]),P.setGetArray(t,e,["ambientColor","specularColor","diffuseColor","edgeColor"],3),d_(t,e)}const y_=P.newInstance(Xm,"vtkProperty");var Co={newInstance:y_,extend:Xm,...Km};const{vtkDebugMacro:m_}=P;function x_(t,e){e.classHierarchy.push("vtkActor");const n={...t};t.getActors=()=>[t],t.getIsOpaque=()=>{if(e.forceOpaque)return!0;if(e.forceTranslucent)return!1;e.property||t.getProperty();let r=e.property.getOpacity()>=1;return r=r&&(!e.texture||!e.texture.isTranslucent()),r=r&&(!e.mapper||e.mapper.getIsOpaque()),r},t.hasTranslucentPolygonalGeometry=()=>e.mapper===null?!1:(e.property===null&&t.setProperty(t.makeProperty()),!t.getIsOpaque()),t.makeProperty=Co.newInstance,t.getProperty=()=>(e.property===null&&(e.property=t.makeProperty()),e.property),t.getBounds=()=>{if(e.mapper===null)return e.bounds;const r=e.mapper.getBounds();if(!r||r.length!==6)return r;if(r[0]>r[1])return e.mapperBounds=r.concat(),e.bounds=[1,-1,1,-1,1,-1],e.boundsMTime.modified(),r;if(!e.mapperBounds||r[0]!==e.mapperBounds[0]||r[1]!==e.mapperBounds[1]||r[2]!==e.mapperBounds[2]||r[3]!==e.mapperBounds[3]||r[4]!==e.mapperBounds[4]||r[5]!==e.mapperBounds[5]||t.getMTime()>e.boundsMTime.getMTime()){m_("Recomputing bounds..."),e.mapperBounds=r.concat();const i=[];Ye.getCorners(r,i),t.computeMatrix();const a=new Float64Array(16);Fe(a,e.matrix),i.forEach(o=>Re(o,o,a)),e.bounds[0]=e.bounds[2]=e.bounds[4]=Number.MAX_VALUE,e.bounds[1]=e.bounds[3]=e.bounds[5]=-Number.MAX_VALUE,e.bounds=e.bounds.map((o,s)=>s%2===0?i.reduce((u,l)=>u>l[s/2]?l[s/2]:u,o):i.reduce((u,l)=>u<l[(s-1)/2]?l[(s-1)/2]:u,o)),e.boundsMTime.modified()}return e.bounds},t.getMTime=()=>{let r=n.getMTime();if(e.property!==null){const i=e.property.getMTime();r=i>r?i:r}if(e.backfaceProperty!==null){const i=e.backfaceProperty.getMTime();r=i>r?i:r}return r},t.getRedrawMTime=()=>{let r=e.mtime;if(e.mapper!==null){let i=e.mapper.getMTime();r=i>r?i:r,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),i=e.mapper.getInput().getMTime(),r=i>r?i:r)}return r},t.getSupportsSelection=()=>e.mapper?e.mapper.getSupportsSelection():!1,t.processSelectorPixelBuffers=(r,i)=>{e.mapper&&e.mapper.processSelectorPixelBuffers&&e.mapper.processSelectorPixelBuffers(r,i)}}const S_={mapper:null,property:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1,bounds:[1,-1,1,-1,1,-1]};function qm(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,S_,n),$m.extend(t,e,n),e.boundsMTime={},P.obj(e.boundsMTime),P.set(t,e,["property"]),P.setGet(t,e,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),x_(t,e)}const T_=P.newInstance(qm,"vtkActor");var sa={newInstance:T_,extend:qm};const i1={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Be={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",UNSIGNED_CHAR_CLAMPED:"Uint8ClampedArray",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},C_=Be.FLOAT;var Ym={DefaultDataType:C_,DataTypeByteSize:i1,VtkDataTypes:Be};const{vtkErrorMacro:w_}=un,{DefaultDataType:__}=Ym,E_=1e-6;function up(t,e,n){const r=t.length;let i=Number.MAX_VALUE,a=-Number.MAX_VALUE,o,s;for(s=e;s<r;s+=n)if(!Number.isNaN(t[s])){i=t[s],a=i;break}for(;s<r;s+=n)o=t[s],o<i?i=o:o>a&&(a=o);return{min:i,max:a}}function D_(){let t=Number.MAX_VALUE,e=-Number.MAX_VALUE,n=0,r=0;return{add(i){t>i&&(t=i),e<i&&(e=i),n++,r+=i},get(){return{min:t,max:e,count:n,sum:r,mean:r/n}},getRange(){return{min:t,max:e}}}}function Jm(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(e<0&&n>1){const i=t.length/n,a=new Float64Array(i);for(let o=0,s=0;o<i;++o){for(let u=s+n;s<u;++s)a[o]+=t[s]*t[s];a[o]**=.5}return up(a,0,1)}return up(t,e<0?0:e,n)}function Cd(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=t||[];for(;n.length<=e;)n.push(null);return n}function a1(t){return Object.prototype.toString.call(t).slice(8,-1)}function O_(t){const e=t.getNumberOfComponents();let n=0;const r=new Array(e);for(let i=0;i<t.getNumberOfTuples();++i){t.getTuple(i,r);const a=ri(r,e);a>n&&(n=a)}return n}const b_={computeRange:Jm,createRangeHelper:D_,fastComputeRange:up,getDataType:a1,getMaxNorm:O_};function N_(t,e){e.classHierarchy.push("vtkDataArray");function n(r){if(r<0)return!1;const i=t.getNumberOfComponents(),a=e.values.length/(i>0?i:1);if(r===a)return!0;if(r>a){const o=e.values;return e.values=xo(e.dataType,(r+a)*i),e.values.set(o),!0}return e.size>r*i&&(e.size=r*i,t.dataChange()),!0}t.dataChange=()=>{e.ranges=null,t.modified()},t.resize=r=>{n(r);const i=r*t.getNumberOfComponents();return e.size!==i?(e.size=i,t.dataChange(),!0):!1},t.initialize=()=>{t.resize(0)},t.getElementComponentSize=()=>e.values.BYTES_PER_ELEMENT,t.getComponent=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.values[r*e.numberOfComponents+i]},t.setComponent=(r,i,a)=>{a!==e.values[r*e.numberOfComponents+i]&&(e.values[r*e.numberOfComponents+i]=a,t.dataChange())},t.getValue=r=>{const i=r/e.numberOfComponents,a=r%e.numberOfComponents;return t.getComponent(i,a)},t.setValue=(r,i)=>{const a=r/e.numberOfComponents,o=r%e.numberOfComponents;t.setComponent(a,o,i)},t.getData=()=>e.size===e.values.length?e.values:e.values.subarray(0,e.size),t.getRange=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,i=r;i<0&&(i=e.numberOfComponents===1?0:e.numberOfComponents);let a=null;return e.ranges||(e.ranges=Cd(e.ranges,e.numberOfComponents)),a=e.ranges[i],a?(e.rangeTuple[0]=a.min,e.rangeTuple[1]=a.max,e.rangeTuple):(a=Jm(t.getData(),r,e.numberOfComponents),e.ranges[i]=a,e.rangeTuple[0]=a.min,e.rangeTuple[1]=a.max,e.rangeTuple)},t.setRange=(r,i)=>{e.ranges||(e.ranges=Cd(e.ranges,e.numberOfComponents));const a={min:r.min,max:r.max};return e.ranges[i]=a,e.rangeTuple[0]=a.min,e.rangeTuple[1]=a.max,e.rangeTuple},t.setTuple=(r,i)=>{const a=r*e.numberOfComponents;for(let o=0;o<e.numberOfComponents;o++)e.values[a+o]=i[o]},t.setTuples=(r,i)=>{let a=r*e.numberOfComponents;const o=Math.min(i.length,e.size-a);for(let s=0;s<o;)e.values[a++]=i[s++]},t.insertTuple=(r,i)=>(e.size<=r*e.numberOfComponents&&(e.size=(r+1)*e.numberOfComponents,n(r+1)),t.setTuple(r,i),r),t.insertTuples=(r,i)=>{const a=r+i.length/e.numberOfComponents;return e.size<a*e.numberOfComponents&&(e.size=a*e.numberOfComponents,n(a)),t.setTuples(r,i),a},t.insertNextTuple=r=>{const i=e.size/e.numberOfComponents;return t.insertTuple(i,r)},t.insertNextTuples=r=>{const i=e.size/e.numberOfComponents;return t.insertTuples(i,r)},t.findTuple=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:E_;for(let a=0;a<e.size;a+=e.numberOfComponents)if(Math.abs(r[0]-e.values[a])<=i){let o=!0;for(let s=1;s<e.numberOfComponents;++s)if(Math.abs(r[s]-e.values[a+s])>i){o=!1;break}if(o)return a/e.numberOfComponents}return-1},t.getTuple=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const a=e.numberOfComponents||1,o=r*a;switch(a){case 4:i[3]=e.values[o+3];case 3:i[2]=e.values[o+2];case 2:i[1]=e.values[o+1];case 1:i[0]=e.values[o];break;default:for(let s=a-1;s>=0;--s)i[s]=e.values[o+s]}return i},t.getTuples=(r,i)=>{const a=(r??0)*e.numberOfComponents,o=(i??t.getNumberOfTuples())*e.numberOfComponents,s=t.getData().subarray(a,o);return s.length>0?s:null},t.getTupleLocation=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*e.numberOfComponents},t.getNumberOfComponents=()=>e.numberOfComponents,t.getNumberOfValues=()=>e.size,t.getNumberOfTuples=()=>e.size/e.numberOfComponents,t.getDataType=()=>e.dataType,t.newClone=()=>Zm({empty:!0,name:e.name,dataType:e.dataType,numberOfComponents:e.numberOfComponents}),t.getName=()=>(e.name||(t.modified(),e.name=`vtkDataArray${t.getMTime()}`),e.name),t.setData=(r,i)=>{e.values=r,e.size=r.length,e.dataType=a1(r),i&&(e.numberOfComponents=i),e.size%e.numberOfComponents!==0&&(e.numberOfComponents=1),t.dataChange()},t.getState=()=>{if(e.deleted)return null;const r={...e,vtkClass:t.getClassName()};r.values=Array.from(r.values),delete r.buffer,Object.keys(r).forEach(a=>{r[a]||delete r[a]});const i={};return Object.keys(r).sort().forEach(a=>{i[a]=r[a]}),i.mtime&&delete i.mtime,i},t.deepCopy=r=>{const i=t.getDataType(),a=e.values;t.shallowCopy(r),(a==null?void 0:a.length)>=r.getNumberOfValues()&&i===r.getDataType()?(a.set(r.getData()),e.values=a,t.dataChange()):t.setData(r.getData().slice())},t.interpolateTuple=(r,i,a,o,s,u)=>{const l=e.numberOfComponents||1;(l!==i.getNumberOfComponents()||l!==o.getNumberOfComponents())&&w_("numberOfComponents must match");const p=i.getTuple(a),c=o.getTuple(s),f=[];switch(f.length=l,l){case 4:f[3]=p[3]+(c[3]-p[3])*u;case 3:f[2]=p[2]+(c[2]-p[2])*u;case 2:f[1]=p[1]+(c[1]-p[1])*u;case 1:f[0]=p[0]+(c[0]-p[0])*u;break;default:for(let h=0;h<l;h++)f[h]=p[h]+(c[h]-p[h])*u}return t.insertTuple(r,f)}}const M_={name:"",numberOfComponents:1,dataType:__,rangeTuple:[0,0]};function Qm(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,M_,n),!e.empty&&!e.values&&!e.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");if(e.values?Array.isArray(e.values)&&(e.values=Vc(e.dataType,e.values)):e.values=xo(e.dataType,e.size),e.values&&(e.size=e.size??e.values.length,e.dataType=a1(e.values)),qe(t,e),js(t,e,["name","numberOfComponents"]),e.size%e.numberOfComponents!==0)throw new RangeError("model.size is not a multiple of model.numberOfComponents");N_(t,e)}const Zm=ze(Qm,"vtkDataArray");var Ee={newInstance:Zm,extend:Qm,...b_,...Ym};function R_(t,e){e.classHierarchy.push("vtkAbstractMapper"),t.update=()=>{t.getInputData()},t.addClippingPlane=n=>n.isA("vtkPlane")?e.clippingPlanes.includes(n)?!1:(e.clippingPlanes.push(n),t.modified(),!0):!1,t.getNumberOfClippingPlanes=()=>e.clippingPlanes.length,t.removeAllClippingPlanes=()=>e.clippingPlanes.length===0?!1:(e.clippingPlanes.length=0,t.modified(),!0),t.removeClippingPlane=n=>{const r=e.clippingPlanes.indexOf(n);return r===-1?!1:(e.clippingPlanes.splice(r,1),t.modified(),!0)},t.getClippingPlanes=()=>e.clippingPlanes,t.setClippingPlanes=n=>{if(n)if(!Array.isArray(n))t.addClippingPlane(n);else{const r=n.length;for(let i=0;i<r&&i<6;i++)t.addClippingPlane(n[i])}},t.getClippingPlaneInDataCoords=(n,r,i)=>{const a=e.clippingPlanes,o=n;if(a){const s=a.length;if(r>=0&&r<s){const u=a[r],l=u.getNormal(),p=u.getOrigin(),c=l[0],f=l[1],h=l[2],v=-(c*p[0]+f*p[1]+h*p[2]);i[0]=c*o[0]+f*o[4]+h*o[8]+v*o[12],i[1]=c*o[1]+f*o[5]+h*o[9]+v*o[13],i[2]=c*o[2]+f*o[6]+h*o[10]+v*o[14],i[3]=c*o[3]+f*o[7]+h*o[11]+v*o[15];return}}P.vtkErrorMacro(`Clipping plane index ${r} is out of range.`)}}const F_={clippingPlanes:[]};function L_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,F_,n),P.obj(t,e),P.algo(t,e,1,0),e.clippingPlanes||(e.clippingPlanes=[]),R_(t,e)}var e5={extend:L_};function k_(t,e){t.getBounds=()=>(P.vtkErrorMacro("vtkAbstractMapper3D.getBounds - NOT IMPLEMENTED"),Js()),t.getCenter=()=>{var r;const n=t.getBounds();return e.center=Ye.isValid(n)?Ye.getCenter(n):null,(r=e.center)==null?void 0:r.slice()},t.getLength=()=>{const n=t.getBounds();return Ye.getDiagonalLength(n)}}const B_=t=>({bounds:[...Ye.INIT_BOUNDS],center:[0,0,0],viewSpecificProperties:{},...t});function V_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,B_(n)),e5.extend(t,e,n),P.setGet(t,e,["viewSpecificProperties"]),k_(t,e)}var t5={extend:V_};const{vtkErrorMacro:wd,vtkWarningMacro:A_}=P;function U_(t,e){e.classHierarchy.push("vtkFieldData");const n=t.getState;e.arrays&&(e.arrays=e.arrays.map(r=>({data:Hn(r.data)}))),t.initialize=()=>{t.initializeFields(),t.copyAllOn(),t.clearFieldFlags()},t.initializeFields=()=>{e.arrays=[],e.copyFieldFlags={},t.modified()},t.copyStructure=r=>{t.initializeFields(),e.copyFieldFlags=r.getCopyFieldFlags().map(i=>i),e.arrays=r.arrays().map(i=>({array:i}))},t.getNumberOfArrays=()=>e.arrays.length,t.getNumberOfActiveArrays=()=>e.arrays.length,t.addArray=r=>{const i=r.getName(),{array:a,index:o}=t.getArrayWithIndex(i);return a!=null?(e.arrays[o]={data:r},o):(e.arrays=[].concat(e.arrays,{data:r}),e.arrays.length-1)},t.removeAllArrays=()=>{e.arrays=[]},t.removeArray=r=>{const i=e.arrays.findIndex(a=>a.data.getName()===r);return t.removeArrayByIndex(i)},t.removeArrayByIndex=r=>r!==-1&&r<e.arrays.length?(e.arrays.splice(r,1),!0):!1,t.getArrays=()=>e.arrays.map(r=>r.data),t.getArray=r=>typeof r=="number"?t.getArrayByIndex(r):t.getArrayByName(r),t.getArrayByName=r=>e.arrays.reduce((i,a,o)=>a.data.getName()===r?a.data:i,null),t.getArrayWithIndex=r=>{const i=e.arrays.findIndex(a=>a.data.getName()===r);return{array:i!==-1?e.arrays[i].data:null,index:i}},t.getArrayByIndex=r=>r>=0&&r<e.arrays.length?e.arrays[r].data:null,t.hasArray=r=>t.getArrayWithIndex(r).index>=0,t.getArrayName=r=>{const i=e.arrays[r];return i?i.data.getName():""},t.getCopyFieldFlags=()=>e.copyFieldFlags,t.getFlag=r=>e.copyFieldFlags[r],t.passData=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;r.getArrays().forEach(o=>{const s=t.getFlag(o.getName());if(s!==!1&&!(e.doCopyAllOff&&s!==!0)&&o){let u=t.getArrayByName(o.getName());if(u)if(o.getNumberOfComponents()===u.getNumberOfComponents())if(i>-1&&i<o.getNumberOfTuples()){const l=a>-1?a:i;u.insertTuple(l,o.getTuple(i))}else u.insertTuples(0,o.getTuples());else wd("Unhandled case in passData");else if(i<0||i>o.getNumberOfTuples())t.addArray(o),r.getAttributes(o).forEach(l=>{t.setAttribute(o,l)});else{const l=o.getNumberOfComponents();let p=o.getNumberOfValues();const c=a>-1?a:i;p<=c*l&&(p=(c+1)*l),u=Ee.newInstance({name:o.getName(),dataType:o.getDataType(),numberOfComponents:l,values:P.newTypedArray(o.getDataType(),p),size:0}),u.insertTuple(c,o.getTuple(i)),t.addArray(u),r.getAttributes(o).forEach(f=>{t.setAttribute(u,f)})}}})},t.interpolateData=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5;r.getArrays().forEach(u=>{const l=t.getFlag(u.getName());if(l!==!1&&!(e.doCopyAllOff&&l!==!0)&&u){let p=t.getArrayByName(u.getName());if(p)if(u.getNumberOfComponents()===p.getNumberOfComponents())if(i>-1&&i<u.getNumberOfTuples()){const c=o>-1?o:i;p.interpolateTuple(c,u,i,u,a,s),A_("Unexpected case in interpolateData")}else p.insertTuples(u.getTuples());else wd("Unhandled case in interpolateData");else if(i<0||a<0||i>u.getNumberOfTuples())t.addArray(u),r.getAttributes(u).forEach(c=>{t.setAttribute(u,c)});else{const c=u.getNumberOfComponents();let f=u.getNumberOfValues();const h=o>-1?o:i;f<=h*c&&(f=(h+1)*c),p=Ee.newInstance({name:u.getName(),dataType:u.getDataType(),numberOfComponents:c,values:P.newTypedArray(u.getDataType(),f),size:0}),p.interpolateTuple(h,u,i,u,a,s),t.addArray(p),r.getAttributes(u).forEach(v=>{t.setAttribute(p,v)})}}})},t.copyFieldOn=r=>{e.copyFieldFlags[r]=!0},t.copyFieldOff=r=>{e.copyFieldFlags[r]=!1},t.copyAllOn=()=>{(!e.doCopyAllOn||e.doCopyAllOff)&&(e.doCopyAllOn=!0,e.doCopyAllOff=!1,t.modified())},t.copyAllOff=()=>{(e.doCopyAllOn||!e.doCopyAllOff)&&(e.doCopyAllOn=!1,e.doCopyAllOff=!0,t.modified())},t.clearFieldFlags=()=>{e.copyFieldFlags={}},t.deepCopy=r=>{e.arrays=r.getArrays().map(i=>{const a=i.newClone();return a.deepCopy(i),{data:a}})},t.copyFlags=r=>r.getCopyFieldFlags().map(i=>i),t.reset=()=>e.arrays.forEach(r=>r.data.reset()),t.getMTime=()=>e.arrays.reduce((r,i)=>i.data.getMTime()>r?i.data.getMTime():r,e.mtime),t.getNumberOfComponents=()=>e.arrays.reduce((r,i)=>r+i.data.getNumberOfComponents(),0),t.getNumberOfTuples=()=>e.arrays.length>0?e.arrays[0].getNumberOfTuples():0,t.getState=()=>{const r=n();return r&&(r.arrays=e.arrays.map(i=>({data:i.data.getState()}))),r}}const G_={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function n5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,G_,n),P.obj(t,e),U_(t,e)}const P_=P.newInstance(n5,"vtkFieldData");var I_={newInstance:P_,extend:n5};const z_={SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},W_={MAX:0,EXACT:1,NOLIMIT:2},j_={DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},$_={DUPLICATEPOINT:1,HIDDENPOINT:2},H_={COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},K_="vtkGhostType",X_={DEFAULT:0,SINGLE:1,DOUBLE:2};var r5={AttributeCopyOperations:H_,AttributeLimitTypes:W_,AttributeTypes:z_,CellGhostTypes:j_,DesiredOutputPrecision:X_,PointGhostTypes:$_,ghostArrayName:K_};const{AttributeTypes:Gr,AttributeCopyOperations:wi}=r5,{vtkWarningMacro:_u}=P;function q_(t,e){const n=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function r(o){let s=n.find(u=>Gr[u.toUpperCase()]===o||typeof o!="number"&&u.toLowerCase()===o.toLowerCase());return typeof s>"u"&&(s=null),s}e.classHierarchy.push("vtkDataSetAttributes");const i={...t};t.checkNumberOfComponents=o=>!0,t.setAttribute=(o,s)=>{const u=r(s);if(o&&u.toUpperCase()==="PEDIGREEIDS"&&!o.isA("vtkDataArray"))return _u(`Cannot set attribute ${u}. The attribute must be a vtkDataArray.`),-1;if(o&&!t.checkNumberOfComponents(o,u))return _u(`Cannot set attribute ${u}. Incorrect number of components.`),-1;let l=e[`active${u}`];if(l>=0&&l<e.arrays.length){if(e.arrays[l]===o)return l;t.removeArrayByIndex(l)}return o?(l=t.addArray(o),e[`active${u}`]=l):e[`active${u}`]=-1,t.modified(),e[`active${u}`]},t.getAttributes=o=>n.filter(s=>t[`get${s}`]()===o),t.setActiveAttributeByName=(o,s)=>t.setActiveAttributeByIndex(t.getArrayWithIndex(o).index,s),t.setActiveAttributeByIndex=(o,s)=>{const u=r(s);if(o>=0&&o<e.arrays.length){if(u.toUpperCase()!=="PEDIGREEIDS"){const l=t.getArrayByIndex(o);if(!l.isA("vtkDataArray"))return _u(`Cannot set attribute ${u}. Only vtkDataArray subclasses can be set as active attributes.`),-1;if(!t.checkNumberOfComponents(l,u))return _u(`Cannot set attribute ${u}. Incorrect number of components.`),-1}return e[`active${u}`]=o,t.modified(),o}return o===-1&&(e[`active${u}`]=o,t.modified()),-1},t.getActiveAttribute=o=>{const s=r(o);return t[`get${s}`]()},t.removeAllArrays=()=>{n.forEach(o=>{e[`active${o}`]=-1}),i.removeAllArrays()},t.removeArrayByIndex=o=>(o!==-1&&n.forEach(s=>{o===e[`active${s}`]?e[`active${s}`]=-1:o<e[`active${s}`]&&(e[`active${s}`]-=1)}),i.removeArrayByIndex(o)),n.forEach(o=>{const s=`active${o}`;t[`get${o}`]=()=>t.getArrayByIndex(e[s]),t[`set${o}`]=u=>t.setAttribute(u,o),t[`setActive${o}`]=u=>t.setActiveAttributeByIndex(t.getArrayWithIndex(u).index,o),t[`copy${o}Off`]=()=>{const u=o.toUpperCase();e.copyAttributeFlags[wi.PASSDATA][Gr[u]]=!1},t[`copy${o}On`]=()=>{const u=o.toUpperCase();e.copyAttributeFlags[wi.PASSDATA][Gr[u]]=!0}}),t.initializeAttributeCopyFlags=()=>{e.copyAttributeFlags=[],Object.keys(wi).filter(o=>o!=="ALLCOPY").forEach(o=>{e.copyAttributeFlags[wi[o]]=Object.keys(Gr).filter(s=>s!=="NUM_ATTRIBUTES").reduce((s,u)=>(s[Gr[u]]=!0,s),[])}),e.copyAttributeFlags[wi.COPYTUPLE][Gr.GLOBALIDS]=!1,e.copyAttributeFlags[wi.INTERPOLATE][Gr.GLOBALIDS]=!1,e.copyAttributeFlags[wi.COPYTUPLE][Gr.PEDIGREEIDS]=!1},t.initialize=P.chain(t.initialize,t.initializeAttributeCopyFlags),e.dataArrays&&Object.keys(e.dataArrays).length&&Object.keys(e.dataArrays).forEach(o=>{!e.dataArrays[o].ref&&e.dataArrays[o].type==="vtkDataArray"&&t.addArray(Ee.newInstance(e.dataArrays[o]))});const a=t.shallowCopy;t.shallowCopy=(o,s)=>{a(o,s),e.arrays=o.getArrays().map(u=>{const l=u.newClone();return l.shallowCopy(u,s),{data:l}})},t.initializeAttributeCopyFlags()}const Y_={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function i5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Y_,n),I_.extend(t,e,n),P.setGet(t,e,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),e.arrays||(e.arrays={}),q_(t,e)}const J_=P.newInstance(i5,"vtkDataSetAttributes");var _d={newInstance:J_,extend:i5,...r5};const Q_={UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},Z_={FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7};var eE={FieldDataTypes:Q_,FieldAssociations:Z_};const cp=["pointData","cellData","fieldData"];function tE(t,e){e.classHierarchy.push("vtkDataSet"),cp.forEach(r=>{e[r]?e[r]=Hn(e[r]):e[r]=_d.newInstance()});const n=t.shallowCopy;t.shallowCopy=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(r,i),cp.forEach(a=>{e[a]=_d.newInstance(),e[a].shallowCopy(r.getReferenceByName(a))})}}const nE={};function a5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,nE,n),P.obj(t,e),P.setGet(t,e,cp),tE(t,e)}const rE=P.newInstance(a5,"vtkDataSet");var ha={newInstance:rE,extend:a5,...eE};const An={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9};var o5={StructuredType:An};const{StructuredType:vr}=o5;function iE(t){let e=0;for(let n=0;n<3;++n)t[n*2]<t[n*2+1]&&e++;return t[0]>t[1]||t[2]>t[3]||t[4]>t[5]?vr.EMPTY:e===3?vr.XYZ_GRID:e===2?t[0]===t[1]?vr.YZ_PLANE:t[2]===t[3]?vr.XZ_PLANE:vr.XY_PLANE:e===1?t[0]<t[1]?vr.X_LINE:t[2]<t[3]?vr.Y_LINE:vr.Z_LINE:vr.SINGLE_POINT}var aE={getDataDescriptionFromExtent:iE,...o5};const{vtkErrorMacro:_i}=P;function oE(t,e){e.classHierarchy.push("vtkImageData"),t.setExtent=function(){if(e.deleted)return _i("instance deleted - cannot call any method"),!1;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const a=r.length===1?r[0]:r;if(a.length!==6)return!1;const o=e.extent.some((s,u)=>s!==a[u]);return o&&(e.extent=a.slice(),e.dataDescription=aE.getDataDescriptionFromExtent(e.extent),t.modified()),o},t.setDimensions=function(){let n,r,i;if(e.deleted){_i("instance deleted - cannot call any method");return}if(arguments.length===1){const a=arguments.length<=0?void 0:arguments[0];n=a[0],r=a[1],i=a[2]}else if(arguments.length===3)n=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2];else{_i("Bad dimension specification");return}t.setExtent(0,n-1,0,r-1,0,i-1)},t.getDimensions=()=>[e.extent[1]-e.extent[0]+1,e.extent[3]-e.extent[2]+1,e.extent[5]-e.extent[4]+1],t.getNumberOfCells=()=>{const n=t.getDimensions();let r=1;for(let i=0;i<3;i++){if(n[i]===0)return 0;n[i]>1&&(r*=n[i]-1)}return r},t.getNumberOfPoints=()=>{const n=t.getDimensions();return n[0]*n[1]*n[2]},t.getPoint=n=>{const r=t.getDimensions();if(r[0]===0||r[1]===0||r[2]===0)return _i("Requesting a point from an empty image."),null;const i=new Float64Array(3);switch(e.dataDescription){case An.EMPTY:return null;case An.SINGLE_POINT:break;case An.X_LINE:i[0]=n;break;case An.Y_LINE:i[1]=n;break;case An.Z_LINE:i[2]=n;break;case An.XY_PLANE:i[0]=n%r[0],i[1]=n/r[0];break;case An.YZ_PLANE:i[1]=n%r[1],i[2]=n/r[1];break;case An.XZ_PLANE:i[0]=n%r[0],i[2]=n/r[0];break;case An.XYZ_GRID:i[0]=n%r[0],i[1]=n/r[0]%r[1],i[2]=n/(r[0]*r[1]);break;default:_i("Invalid dataDescription");break}const a=[0,0,0];return t.indexToWorld(i,a),a},t.getBounds=()=>t.extentToBounds(t.getSpatialExtent()),t.extentToBounds=n=>Ye.transformBounds(n,e.indexToWorld),t.getSpatialExtent=()=>Ye.inflate([...e.extent],.5),t.computeTransforms=()=>{wh(e.indexToWorld,e.origin),e.indexToWorld[0]=e.direction[0],e.indexToWorld[1]=e.direction[1],e.indexToWorld[2]=e.direction[2],e.indexToWorld[4]=e.direction[3],e.indexToWorld[5]=e.direction[4],e.indexToWorld[6]=e.direction[5],e.indexToWorld[8]=e.direction[6],e.indexToWorld[9]=e.direction[7],e.indexToWorld[10]=e.direction[8],kr(e.indexToWorld,e.indexToWorld,e.spacing),yt(e.worldToIndex,e.indexToWorld)},t.indexToWorld=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Re(r,n,e.indexToWorld),r},t.indexToWorldVec3=t.indexToWorld,t.worldToIndex=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Re(r,n,e.worldToIndex),r},t.worldToIndexVec3=t.worldToIndex,t.indexToWorldBounds=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ye.transformBounds(n,e.indexToWorld,r)},t.worldToIndexBounds=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ye.transformBounds(n,e.worldToIndex,r)},t.onModified(t.computeTransforms),t.computeTransforms(),t.getCenter=()=>Ye.getCenter(t.getBounds()),t.computeHistogram=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const i=[0,0,0,0,0,0];t.worldToIndexBounds(n,i);const a=[0,0,0],o=[0,0,0];Ye.computeCornerPoints(i,a,o),np(a,a),np(o,o);const s=t.getDimensions();ip(a,[0,0,0],[s[0]-1,s[1]-1,s[2]-1],a),ip(o,[0,0,0],[s[0]-1,s[1]-1,s[2]-1],o);const u=s[0],l=s[0]*s[1],p=t.getPointData().getScalars().getData();let c=-1/0,f=1/0,h=0,v=0,y=0;for(let d=a[2];d<=o[2];d++)for(let S=a[1];S<=o[1];S++){let T=a[0]+S*u+d*l;for(let C=a[0];C<=o[0];C++){if(!r||r([C,S,d],i)){const w=p[T];w>c&&(c=w),w<f&&(f=w),h+=w*w,v+=w,y+=1}++T}}const x=y>0?v/y:0,m=y?Math.abs(h/y-x*x):0,g=Math.sqrt(m);return{minimum:f,maximum:c,average:x,variance:m,sigma:g,count:y}},t.computeIncrements=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const i=[];let a=r;for(let o=0;o<3;++o)i[o]=a,a*=n[o*2+1]-n[o*2]+1;return i},t.computeOffsetIndex=n=>{let[r,i,a]=n;const o=t.getExtent(),s=t.getPointData().getScalars().getNumberOfComponents(),u=t.computeIncrements(o,s);return Math.floor((Math.round(r)-o[0])*u[0]+(Math.round(i)-o[2])*u[1]+(Math.round(a)-o[4])*u[2])},t.getOffsetIndexFromWorld=n=>{const r=t.getExtent(),i=t.worldToIndex(n);for(let a=0;a<3;++a)if(i[a]<r[a*2]||i[a]>r[a*2+1])return _i(`GetScalarPointer: Pixel ${i} is not in memory. Current extent = ${r}`),NaN;return t.computeOffsetIndex(i)},t.getScalarValueFromWorld=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=t.getPointData().getScalars().getNumberOfComponents();if(r<0||r>=i)return _i(`GetScalarPointer: Scalar Component ${r} is not within bounds. Current Scalar numberOfComponents: ${i}`),NaN;const a=t.getOffsetIndexFromWorld(n);return Number.isNaN(a)?a:t.getPointData().getScalars().getComponent(a,r)}}const sE={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:An.EMPTY};function s5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,sE,n),ha.extend(t,e,n),e.direction?Array.isArray(e.direction)&&(e.direction=new Float64Array(e.direction.slice(0,9))):e.direction=gr(new Float64Array(9)),e.indexToWorld=new Float64Array(16),e.worldToIndex=new Float64Array(16),P.get(t,e,["indexToWorld","worldToIndex"]),P.setGetArray(t,e,["origin","spacing"],3),P.setGetArray(t,e,["direction"],9),P.getArray(t,e,["extent"],6),oE(t,e)}const uE=P.newInstance(s5,"vtkImageData");var u5={newInstance:uE,extend:s5};const cE={MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},lp={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4};var o1={VectorMode:cE,ScalarMappingTarget:lp};const lE={DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},fE={DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5},pE={BY_ID:0,BY_NAME:1};var Ic={ColorMode:lE,GetArray:pE,ScalarMode:fE};const{ScalarMappingTarget:Ed,VectorMode:tr}=o1,{VtkDataTypes:Pr}=Ee,{ColorMode:Eu}=Ic,{vtkErrorMacro:Dd}=P;function hE(t){return t}function Od(t){return Math.floor(t*255+.5)}function gE(t,e){e.classHierarchy.push("vtkScalarsToColors"),t.setVectorModeToMagnitude=()=>t.setVectorMode(tr.MAGNITUDE),t.setVectorModeToComponent=()=>t.setVectorMode(tr.COMPONENT),t.setVectorModeToRGBColors=()=>t.setVectorMode(tr.RGBCOLORS),t.build=()=>{},t.isOpaque=()=>!0,t.setAnnotations=(n,r)=>{if(!(n&&!r||!n&&r)){if(n&&r&&n.length!==r.length){Dd("Values and annotations do not have the same number of tuples so ignoring");return}if(e.annotationArray=[],r&&n){const i=r.length;for(let a=0;a<i;a++)e.annotationArray.push({value:n[a],annotation:String(r[a])})}t.updateAnnotatedValueMap(),t.modified()}},t.setAnnotation=(n,r)=>{let i=t.checkForAnnotatedValue(n),a=!1;return i>=0?e.annotationArray[i].annotation!==r&&(e.annotationArray[i].annotation=r,a=!0):(e.annotationArray.push({value:n,annotation:r}),i=e.annotationArray.length-1,a=!0),a&&(t.updateAnnotatedValueMap(),t.modified()),i},t.getNumberOfAnnotatedValues=()=>e.annotationArray.length,t.getAnnotatedValue=n=>n<0||n>=e.annotationArray.length?null:e.annotationArray[n].value,t.getAnnotation=n=>e.annotationArray[n]===void 0?null:e.annotationArray[n].annotation,t.getAnnotatedValueIndex=n=>e.annotationArray.length?t.checkForAnnotatedValue(n):-1,t.removeAnnotation=n=>{const r=t.checkForAnnotatedValue(n),i=r>=0;return i&&(e.annotationArray.splice(r,1),t.updateAnnotatedValueMap(),t.modified()),i},t.resetAnnotations=()=>{e.annotationArray=[],e.annotatedValueMap=[],t.modified()},t.getAnnotationColor=(n,r)=>{if(e.indexedLookup){const i=t.getAnnotatedValueIndex(n);t.getIndexedColor(i,r)}else t.getColor(parseFloat(n),r),r[3]=1},t.checkForAnnotatedValue=n=>t.getAnnotatedValueIndexInternal(n),t.getAnnotatedValueIndexInternal=n=>{if(e.annotatedValueMap[n]!==void 0){const r=e.annotationArray.length;return e.annotatedValueMap[n]%r}return-1},t.getIndexedColor=(n,r)=>{r[0]=0,r[1]=0,r[2]=0,r[3]=0},t.updateAnnotatedValueMap=()=>{e.annotatedValueMap=[];const n=e.annotationArray.length;for(let r=0;r<n;r++)e.annotatedValueMap[e.annotationArray[r].value]=r},t.mapScalars=(n,r,i)=>{const a=n.getNumberOfComponents();let o=null;if(r===Eu.DEFAULT&&(n.getDataType()===Pr.UNSIGNED_CHAR||n.getDataType()===Pr.UNSIGNED_CHAR_CLAMPED)||r===Eu.DIRECT_SCALARS&&n)o=t.convertToRGBA(n,a,n.getNumberOfTuples());else{const s={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:Pr.UNSIGNED_CHAR},u=P.newTypedArray(s.dataType,4*n.getNumberOfTuples());s.values=u,s.size=u.length,o=Ee.newInstance(s);let l=i;l<0&&a>1?t.mapVectorsThroughTable(n,o,Ed.RGBA,-1,-1):(l<0&&(l=0),l>=a&&(l=a-1),t.mapScalarsThroughTable(n,o,Ed.RGBA,l))}return o},t.mapVectorsToMagnitude=(n,r,i)=>{const a=n.getNumberOfTuples(),o=n.getNumberOfComponents(),s=r.getData(),u=n.getData();for(let l=0;l<a;l++){let p=0;for(let c=0;c<i;c++)p+=u[l*o+c]*u[l*o+c];s[l]=Math.sqrt(p)}},t.mapVectorsThroughTable=(n,r,i,a,o)=>{let s=t.getVectorMode(),u=o,l=a;const p=n.getNumberOfComponents();s===tr.COMPONENT?(l===-1&&(l=t.getVectorComponent()),l<0&&(l=0),l>=p&&(l=p-1)):(u===-1&&(u=t.getVectorSize()),u<=0?(l=0,u=p):(l<0&&(l=0),l>=p&&(l=p-1),l+u>p&&(u=p-l)),s===tr.MAGNITUDE&&(p===1||u===1)&&(s=tr.COMPONENT));let c=0;switch(l>0&&(c=l),s){case tr.COMPONENT:{t.mapScalarsThroughTable(n,r,i,c);break}case tr.RGBCOLORS:break;case tr.MAGNITUDE:default:{const f=Ee.newInstance({numberOfComponents:1,values:new Float32Array(n.getNumberOfTuples())});t.mapVectorsToMagnitude(n,f,u),t.mapScalarsThroughTable(f,r,i,0);break}}},t.luminanceToRGBA=(n,r,i,a)=>{const o=a(i),s=r.getData(),u=n.getData(),l=s.length,p=0,c=1;let f=0;for(let h=p;h<l;h+=c){const v=a(s[h]);u[f*4]=v,u[f*4+1]=v,u[f*4+2]=v,u[f*4+3]=o,f++}},t.luminanceAlphaToRGBA=(n,r,i,a)=>{const o=r.getData(),s=n.getData(),u=o.length,l=0,p=2;let c=0;for(let f=l;f<u;f+=p){const h=a(o[f]);s[c]=h,s[c+1]=h,s[c+2]=h,s[c+3]=a(o[f+1])*i,c+=4}},t.rGBToRGBA=(n,r,i,a)=>{const o=Od(i),s=r.getData(),u=n.getData(),l=s.length,p=0,c=3;let f=0;for(let h=p;h<l;h+=c)u[f*4]=a(s[h]),u[f*4+1]=a(s[h+1]),u[f*4+2]=a(s[h+2]),u[f*4+3]=o,f++},t.rGBAToRGBA=(n,r,i,a)=>{const o=r.getData(),s=n.getData(),u=o.length,l=0,p=4;let c=0;for(let f=l;f<u;f+=p)s[c*4]=a(o[f]),s[c*4+1]=a(o[f+1]),s[c*4+2]=a(o[f+2]),s[c*4+3]=a(o[f+3])*i,c++},t.convertToRGBA=(n,r,i)=>{let{alpha:a}=e;if(r===4&&a>=1&&n.getDataType()===Pr.UNSIGNED_CHAR)return n;const o=Ee.newInstance({numberOfComponents:4,empty:!0,size:4*i,dataType:Pr.UNSIGNED_CHAR});if(i<=0)return o;a=a>0?a:0,a=a<1?a:1;let s=hE;switch((n.getDataType()===Pr.FLOAT||n.getDataType()===Pr.DOUBLE)&&(s=Od),r){case 1:t.luminanceToRGBA(o,n,a,s);break;case 2:t.luminanceAlphaToRGBA(o,n,s);break;case 3:t.rGBToRGBA(o,n,a,s);break;case 4:t.rGBAToRGBA(o,n,a,s);break;default:return Dd("Cannot convert colors"),null}return o},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>256*256*256,t.setRange=(n,r)=>t.setMappingRange(n,r),t.getRange=()=>t.getMappingRange(),t.areScalarsOpaque=(n,r,i)=>{if(!n)return t.isOpaque();const a=n.getNumberOfComponents();return r===Eu.DEFAULT&&n.getDataType()===Pr.UNSIGNED_CHAR||r===Eu.DIRECT_SCALARS?a===3||a===1?e.alpha>=1:n.getRange(a-1)[0]===255:!0}}const dE={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:tr.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1};function c5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dE,n),P.obj(t,e),e.mappingRange=[0,255],e.annotationArray=[],e.annotatedValueMap=[],P.setGet(t,e,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),P.setArray(t,e,["mappingRange"],2),P.getArray(t,e,["mappingRange"]),gE(t,e)}const vE=P.newInstance(c5,"vtkScalarsToColors");var zc={newInstance:vE,extend:c5,...o1};const{vtkErrorMacro:bd}=P,Nd=0,Md=1,Ml=2;function yE(t,e){e.classHierarchy.push("vtkLookupTable"),t.isOpaque=()=>{if(e.opaqueFlagBuildTime.getMTime()<t.getMTime()){let n=!0;e.nanColor[3]<1&&(n=0),e.useBelowRangeColor&&e.belowRangeColor[3]<1&&(n=0),e.useAboveRangeColor&&e.aboveRangeColor[3]<1&&(n=0);for(let r=3;r<e.table.length&&n;r+=4)e.table[r]<255&&(n=!1);e.opaqueFlag=n,e.opaqueFlagBuildTime.modified()}return e.opaqueFlag},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>e.table.length/4-3,t.linearIndexLookup=(n,r)=>{let i=0;const a=Number(n);return a<r.range[0]?i=r.maxIndex+Nd+1.5:a>r.range[1]?i=r.maxIndex+Md+1.5:(i=(a+r.shift)*r.scale,i=i<r.maxIndex?i:r.maxIndex),Math.floor(i)},t.linearLookup=(n,r,i)=>{let a=0;ac(n)?a=Math.floor(i.maxIndex+1.5+Ml):a=t.linearIndexLookup(n,i);const o=4*a;return r.slice(o,o+4)},t.indexedLookupFunction=(n,r,i)=>{let a=t.getAnnotatedValueIndexInternal(n);a===-1&&(a=e.numberOfColors+Ml);const o=4*a;return[r[o],r[o+1],r[o+2],r[o+3]]},t.lookupShiftAndScale=(n,r)=>{r.shift=-n[0],r.scale=Number.MAX_VALUE,n[1]>n[0]&&(r.scale=(r.maxIndex+1)/(n[1]-n[0]))},t.mapScalarsThroughTable=(n,r,i,a)=>{let o=t.linearLookup;e.indexedLookup&&(o=t.indexedLookupFunction);const s=t.getMappingRange(),u={maxIndex:t.getNumberOfColors()-1,range:s,shift:0,scale:0};t.lookupShiftAndScale(s,u);const l=t.getAlpha(),p=n.getNumberOfTuples(),c=n.getNumberOfComponents(),f=r.getData(),h=n.getData();if(l>=1){if(i===lp.RGBA)for(let v=0;v<p;v++){const y=o(h[v*c+a],e.table,u);f[v*4]=y[0],f[v*4+1]=y[1],f[v*4+2]=y[2],f[v*4+3]=y[3]}}else if(i===lp.RGBA)for(let v=0;v<p;v++){const y=o(h[v*c+a],e.table,u);f[v*4]=y[0],f[v*4+1]=y[1],f[v*4+2]=y[2],f[v*4+3]=Math.floor(y[3]*l+.5)}},t.forceBuild=()=>{let n=0,r=0,i=0,a=0;const o=e.numberOfColors-1;o&&(n=(e.hueRange[1]-e.hueRange[0])/o,r=(e.saturationRange[1]-e.saturationRange[0])/o,i=(e.valueRange[1]-e.valueRange[0])/o,a=(e.alphaRange[1]-e.alphaRange[0])/o),e.table.length=4*o+16;const s=[],u=[];for(let l=0;l<=o;l++)s[0]=e.hueRange[0]+l*n,s[1]=e.saturationRange[0]+l*r,s[2]=e.valueRange[0]+l*i,Ai(s,u),u[3]=e.alphaRange[0]+l*a,e.table[l*4]=u[0]*255+.5,e.table[l*4+1]=u[1]*255+.5,e.table[l*4+2]=u[2]*255+.5,e.table[l*4+3]=u[3]*255+.5;t.buildSpecialColors(),e.buildTime.modified()},t.setTable=n=>{if(Array.isArray(n)){const i=n[0].length;e.numberOfColors=n.length;const a=4-i;let o=0;for(let s=0;s<e.numberOfColors;s++)e.table[s*4]=255,e.table[s*4+1]=255,e.table[s*4+2]=255,e.table[s*4+3]=255;for(let s=0;s<n.length;s++){const u=n[s];for(let l=0;l<i;l++)e.table[o++]=u[l];o+=a}return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0}if(n.getNumberOfComponents()!==4)return bd("Expected 4 components for RGBA colors"),!1;if(n.getDataType()!==Be.UNSIGNED_CHAR)return bd("Expected unsigned char values for RGBA colors"),!1;e.numberOfColors=n.getNumberOfTuples();const r=n.getData();e.table.length=r.length;for(let i=0;i<r.length;i++)e.table[i]=r[i];return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0},t.buildSpecialColors=()=>{const{numberOfColors:n}=e,r=e.table;let i=(n+Nd)*4;e.useBelowRangeColor||n===0?(r[i]=e.belowRangeColor[0]*255+.5,r[i+1]=e.belowRangeColor[1]*255+.5,r[i+2]=e.belowRangeColor[2]*255+.5,r[i+3]=e.belowRangeColor[3]*255+.5):(r[i]=r[0],r[i+1]=r[1],r[i+2]=r[2],r[i+3]=r[3]),i=(n+Md)*4,e.useAboveRangeColor||n===0?(r[i]=e.aboveRangeColor[0]*255+.5,r[i+1]=e.aboveRangeColor[1]*255+.5,r[i+2]=e.aboveRangeColor[2]*255+.5,r[i+3]=e.aboveRangeColor[3]*255+.5):(r[i]=r[4*(n-1)+0],r[i+1]=r[4*(n-1)+1],r[i+2]=r[4*(n-1)+2],r[i+3]=r[4*(n-1)+3]),i=(n+Ml)*4,r[i]=e.nanColor[0]*255+.5,r[i+1]=e.nanColor[1]*255+.5,r[i+2]=e.nanColor[2]*255+.5,r[i+3]=e.nanColor[3]*255+.5},t.build=()=>{(e.table.length<1||t.getMTime()>e.buildTime.getMTime()&&e.insertTime.getMTime()<=e.buildTime.getMTime())&&t.forceBuild()},e.table.length>0&&(t.buildSpecialColors(),e.insertTime.modified())}const mE={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function l5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,mE,n),zc.extend(t,e,n),e.table||(e.table=[]),e.buildTime={},P.obj(e.buildTime),e.opaqueFlagBuildTime={},P.obj(e.opaqueFlagBuildTime,{mtime:0}),e.insertTime={},P.obj(e.insertTime,{mtime:0}),P.get(t,e,["buildTime"]),P.setGet(t,e,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),P.setArray(t,e,["alphaRange","hueRange","saturationRange","valueRange"],2),P.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),P.getArray(t,e,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),yE(t,e)}const xE=P.newInstance(l5,"vtkLookupTable");var cc={newInstance:xE,extend:l5};const Yn={Off:0,PolygonOffset:1};let fp=Yn.PolygonOffset,lc=Yn.Off;const SE=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function TE(){return fp}function CE(t){const e=fp===t;return fp=t,e}function wE(){return lc}function Wc(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const e=lc===t;return lc=t,e}function _E(){return Wc(Yn.Off)}function EE(){return Wc(Yn.Off)}function DE(){return Wc(Yn.PolygonOffset)}function OE(){return SE[lc]}var pp={Resolve:Yn,getResolveCoincidentTopologyAsString:OE,getResolveCoincidentTopologyPolygonOffsetFaces:TE,getResolveCoincidentTopology:wE,setResolveCoincidentTopology:Wc,setResolveCoincidentTopologyPolygonOffsetFaces:CE,setResolveCoincidentTopologyToDefault:_E,setResolveCoincidentTopologyToOff:EE,setResolveCoincidentTopologyToPolygonOffset:DE};function f5(t,e,n){n.forEach(r=>{t[`get${r.method}`]=()=>e[r.key],t[`set${r.method}`]=P.objectSetterMap.object(t,e,{name:r.key,params:["factor","offset"]})})}const s1=["Polygon","Line","Point"],bE={Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},NE=()=>{},Ui={modified:NE};f5(Ui,bE,s1.map(t=>({key:t,method:`ResolveCoincidentTopology${t}OffsetParameters`})));function ME(t,e){e.resolveCoincidentTopology===void 0&&(e.resolveCoincidentTopology=!1),P.setGet(t,e,["resolveCoincidentTopology"]),e.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},Object.keys(pp).forEach(n=>{t[n]=pp[n]}),Object.keys(Ui).filter(n=>n!=="modified").forEach(n=>{t[n]=Ui[n]}),f5(t,e.topologyOffset,s1.map(n=>({key:n,method:`RelativeCoincidentTopology${n}OffsetParameters`}))),t.getCoincidentTopologyPolygonOffsetParameters=()=>{const n=Ui.getResolveCoincidentTopologyPolygonOffsetParameters(),r=t.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}},t.getCoincidentTopologyLineOffsetParameters=()=>{const n=Ui.getResolveCoincidentTopologyLineOffsetParameters(),r=t.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}},t.getCoincidentTopologyPointOffsetParameter=()=>{const n=Ui.getResolveCoincidentTopologyPointOffsetParameters(),r=t.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}}}var p5={implementCoincidentTopologyMethods:ME,staticOffsetAPI:Ui,otherStaticMethods:pp,CATEGORIES:s1,Resolve:Yn};const Yt={MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,ID_HIGH24:3,MAX_KNOWN_PASS:3};var h5={PassTypes:Yt};const{FieldAssociations:Rd}=ha,{staticOffsetAPI:RE,otherStaticMethods:FE}=p5,{ColorMode:Du,ScalarMode:Ei,GetArray:Rl}=Ic,{VectorMode:LE}=o1,{VtkDataTypes:kE}=Ee;function Ro(t){return()=>P.vtkErrorMacro(`vtkMapper::${t} - NOT IMPLEMENTED`)}function BE(t,e){const n=t[1]%2===0?1:-1;if(t[0]+=n,t[0]>=e[0]||t[0]<0){const r=t[2]%2===0?1:-1;t[0]-=n,t[1]+=r,(t[1]>=e[1]||t[1]<0)&&(t[1]-=r,t[2]++)}}function VE(t,e){return t[0]+e[0]*(t[1]+e[1]*t[2])}function Fd(t,e,n){const r=Math.floor(e),i=r%(2*n[0]);let a,o;i<n[0]?(t[0]=i,a=1,o=t[0]===n[0]-1):(t[0]=2*n[0]-1-i,a=-1,o=t[0]===0);const s=Math.floor(r/n[0]),u=s%(2*n[1]);let l,p;u<n[1]?(t[1]=u,l=1,p=t[1]===n[1]-1):(t[1]=2*n[1]-1-u,l=-1,p=t[1]===0),t[2]=Math.floor(s/n[1]);const c=e-r;o?p?t[2]+=c:t[1]+=l*c:t[0]+=a*c,t[0]=(t[0]+.5)/n[0],t[1]=(t[1]+.5)/n[1],t[2]=(t[2]+.5)/n[2]}const Ld=new WeakMap;function AE(t,e,n,r,i,a,o){var N;const s=new Array(arguments.length);for(let R=0;R<arguments.length;++R){const M=arguments[R];s[R]=((N=M.getMTime)==null?void 0:N.call(M))??M}const u=s.join("/"),l=Ld.get(t);if(l&&l.stringHash===u)return l.textureCoordinates;const p=(n[1]-n[0])/(r-1),[c,f]=[n[0]-p,n[1]+p],h=c-.5*p,v=1/(f-c+p),y=c,x=(r+1)/(f-c),m=t.getData(),g=t.getNumberOfTuples(),d=t.getNumberOfComponents(),S=e<0||e>=d,T=i[2]<=1?2:3,C=Ee.newInstance({numberOfComponents:T,values:new Float32Array(g*T)}),w=C.getData(),_=[0,0,0];Fd(_,r+2,i);let E=0,D=0;const O=[.5,.5,.5];for(let R=0;R<g;++R){let M;if(S){let A=0;for(let G=0;G<d;++G){const j=m[E+G];A+=j*j}M=Math.sqrt(A)}else M=m[E+e];if(E+=d,a&&(M=cc.applyLogScale(M,n,n)),ac(M))O[0]=_[0],O[1]=_[1],O[2]=_[2];else if(o){let A=(M-y)*x;A<1?A=0:A>r&&(A=r+1),Fd(O,A,i)}else{O[1]=.49;const A=(M-h)*v;A>1e3?O[0]=1e3:A<-1e3?O[0]=-1e3:O[0]=A}for(let A=0;A<T;++A)w[D++]=O[A]}return Ld.set(t,{stringHash:u,textureCoordinates:C}),C}function UE(t,e){e.classHierarchy.push("vtkMapper"),t.getBounds=()=>{const n=t.getInputData();return n?(e.static||t.update(),e.bounds=n.getBounds()):e.bounds=Js(),e.bounds},t.setForceCompileOnly=n=>{e.forceCompileOnly=n},t.setSelectionWebGLIdsToVTKIds=n=>{e.selectionWebGLIdsToVTKIds=n},t.createDefaultLookupTable=()=>{e.lookupTable=cc.newInstance()},t.getColorModeAsString=()=>P.enumToString(Du,e.colorMode),t.setColorModeToDefault=()=>t.setColorMode(0),t.setColorModeToMapScalars=()=>t.setColorMode(1),t.setColorModeToDirectScalars=()=>t.setColorMode(2),t.getScalarModeAsString=()=>P.enumToString(Ei,e.scalarMode),t.setScalarModeToDefault=()=>t.setScalarMode(0),t.setScalarModeToUsePointData=()=>t.setScalarMode(1),t.setScalarModeToUseCellData=()=>t.setScalarMode(2),t.setScalarModeToUsePointFieldData=()=>t.setScalarMode(3),t.setScalarModeToUseCellFieldData=()=>t.setScalarMode(4),t.setScalarModeToUseFieldData=()=>t.setScalarMode(5),t.getAbstractScalars=(n,r,i,a,o)=>{if(!n||!e.scalarVisibility)return{scalars:null,cellFlag:!1};let s=null,u=!1;if(r===Ei.DEFAULT)s=n.getPointData().getScalars(),s||(s=n.getCellData().getScalars(),u=!0);else if(r===Ei.USE_POINT_DATA)s=n.getPointData().getScalars();else if(r===Ei.USE_CELL_DATA)s=n.getCellData().getScalars(),u=!0;else if(r===Ei.USE_POINT_FIELD_DATA){const l=n.getPointData();i===Rl.BY_ID?s=l.getArrayByIndex(a):s=l.getArrayByName(o)}else if(r===Ei.USE_CELL_FIELD_DATA){const l=n.getCellData();u=!0,i===Rl.BY_ID?s=l.getArrayByIndex(a):s=l.getArrayByName(o)}else if(r===Ei.USE_FIELD_DATA){const l=n.getFieldData();i===Rl.BY_ID?s=l.getArrayByIndex(a):s=l.getArrayByName(o)}return{scalars:s,cellFlag:u}},t.mapScalars=(n,r)=>{const{scalars:i,cellFlag:a}=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName);if(e.areScalarsMappedFromCells=a,!i){e.colorCoordinates=null,e.colorTextureMap=null,e.colorMapColors=null;return}const o=`${t.getMTime()}${i.getMTime()}${r}`;if(e.colorBuildString!==o){if(e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]),t.canUseTextureMapForColoring(i,a))e.mapScalarsToTexture(i,a,r);else{e.colorCoordinates=null,e.colorTextureMap=null;const s=t.getLookupTable();s&&(s.build(),e.colorMapColors=s.mapScalars(i,e.colorMode,e.fieldDataTupleId))}e.colorBuildString=`${t.getMTime()}${i.getMTime()}${r}`}},e.mapScalarsToTexture=(n,r,i)=>{const a=e.lookupTable.getRange(),o=e.lookupTable.usingLogScale();o&&cc.getLogRange(a,a);const s=e.lookupTable.getAlpha();if(e.colorMapColors=null,e.colorTextureMap==null||t.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getAlpha()!==i){e.lookupTable.setAlpha(i),e.colorTextureMap=null,e.lookupTable.build();const l=e.lookupTable.getNumberOfAvailableColors(),p=2048,c=p**3-3,h=4096-2,v=2,y=r?c:h;e.numberOfColorsInRange=Math.min(Math.max(l,v),y);const x=e.numberOfColorsInRange+3,m=e.numberOfColorsInRange+2,g=r?[Math.min(Math.ceil(x/p**0),p),Math.min(Math.ceil(x/p**1),p),Math.min(Math.ceil(x/p**2),p)]:[m,2,1],d=g[0]*g[1]*g[2],S=new Float64Array(d);S.fill(NaN);const T=e.numberOfColorsInRange,C=T+2,w=[0,0,0],_=a[0],E=a[1]-a[0];for(let N=0;N<C;++N){const R=VE(w,g),M=_+E*(N-1)/(T-1);S[R]=o?10**M:M,BE(w,g)}const D=Ee.newInstance({numberOfComponents:1,values:S}),O=e.lookupTable.mapScalars(D,e.colorMode,0);e.colorTextureMap=u5.newInstance(),e.colorTextureMap.setDimensions(g),e.colorTextureMap.getPointData().setScalars(O),e.lookupTable.setAlpha(s)}const u=e.lookupTable.getVectorMode()===LE.MAGNITUDE&&n.getNumberOfComponents()>1?-1:e.lookupTable.getVectorComponent();e.colorCoordinates=AE(n,u,a,e.numberOfColorsInRange,e.colorTextureMap.getDimensions(),o,r)},t.getIsOpaque=()=>{const n=t.getInputData(),i=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!e.scalarVisibility||i==null)return!0;const a=t.getLookupTable();return a?(a.build(),a.areScalarsOpaque(i,e.colorMode,-1)):!0},t.canUseTextureMapForColoring=(n,r)=>r&&e.colorMode!==Du.DIRECT_SCALARS?!0:!(!e.interpolateScalarsBeforeMapping||e.lookupTable&&e.lookupTable.getIndexedLookup()||!n||e.colorMode===Du.DEFAULT&&n.getDataType()===kE.UNSIGNED_CHAR||e.colorMode===Du.DIRECT_SCALARS),t.clearColorArrays=()=>{e.colorMapColors=null,e.colorCoordinates=null,e.colorTextureMap=null},t.getLookupTable=()=>(e.lookupTable||t.createDefaultLookupTable(),e.lookupTable),t.getMTime=()=>{let n=e.mtime;if(e.lookupTable!==null){const r=e.lookupTable.getMTime();n=r>n?r:n}return n},t.getPrimitiveCount=()=>{const n=t.getInputData();return{points:n.getPoints().getNumberOfValues()/3,verts:n.getVerts().getNumberOfValues()-n.getVerts().getNumberOfCells(),lines:n.getLines().getNumberOfValues()-2*n.getLines().getNumberOfCells(),triangles:n.getPolys().getNumberOfValues()-3*n.getPolys().getNumberOfCells()}},t.acquireInvertibleLookupTable=Ro("AcquireInvertibleLookupTable"),t.valueToColor=Ro("ValueToColor"),t.colorToValue=Ro("ColorToValue"),t.useInvertibleColorFor=Ro("UseInvertibleColorFor"),t.clearInvertibleColor=Ro("ClearInvertibleColor"),t.processSelectorPixelBuffers=(n,r)=>{if(!n||!e.selectionWebGLIdsToVTKIds||!e.populateSelectionSettings)return;const i=n.getRawPixelBuffer(Yt.ID_LOW24),a=n.getRawPixelBuffer(Yt.ID_HIGH24),o=n.getCurrentPass(),s=n.getFieldAssociation();let u=null;s===Rd.FIELD_ASSOCIATION_POINTS?u=e.selectionWebGLIdsToVTKIds.points:s===Rd.FIELD_ASSOCIATION_CELLS&&(u=e.selectionWebGLIdsToVTKIds.cells),u&&r.forEach(l=>{if(o===Yt.ID_LOW24){let p=0;a&&(p+=a[l],p*=256),p+=i[l+2],p*=256,p+=i[l+1],p*=256,p+=i[l];const c=u[p],f=n.getPixelBuffer(Yt.ID_LOW24);f[l]=c&255,f[l+1]=(c&65280)>>8,f[l+2]=(c&16711680)>>16}else if(o===Yt.ID_HIGH24&&a){let p=0;p+=a[l],p*=256,p+=i[l+2],p*=256,p+=i[l+1],p*=256,p+=i[l];const c=u[p],f=n.getPixelBuffer(Yt.ID_HIGH24);f[l]=(c&4278190080)>>24}})}}const GE={colorMapColors:null,areScalarsMappedFromCells:!1,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,populateSelectionSettings:!0,selectionWebGLIdsToVTKIds:null,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,numberOfColorsInRange:0,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,customShaderAttributes:[]};function g5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,GE,n),t5.extend(t,e,n),P.get(t,e,["areScalarsMappedFromCells","colorCoordinates","colorMapColors","colorTextureMap","numberOfColorsInRange","selectionWebGLIdsToVTKIds"]),P.setGet(t,e,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","populateSelectionSettings","renderTime","scalarMode","scalarVisibility","static","useLookupTableScalarRange","customShaderAttributes"]),P.setGetArray(t,e,["scalarRange"],2),p5.implementCoincidentTopologyMethods(t,e),UE(t,e)}const PE=P.newInstance(g5,"vtkMapper");var ua={newInstance:PE,extend:g5,...RE,...FE,...Ic};function d5(t){let e=0;return t.filter((n,r)=>r===e?(e+=n+1,!0):!1)}function v5(t){let e=0;for(let n=0;n<t.length;)n+=t[n]+1,e++;return e}const IE={extractCellSizes:d5,getNumberOfCells:v5};function zE(t,e){e.classHierarchy.push("vtkCellArray");const n={...t};t.getNumberOfCells=r=>(e.numberOfCells!==void 0&&!r||(e.cellSizes?e.numberOfCells=e.cellSizes.length:e.numberOfCells=v5(t.getData())),e.numberOfCells),t.getCellSizes=r=>(e.cellSizes!==void 0&&!r||(e.cellSizes=d5(t.getData())),e.cellSizes),t.resize=r=>{const i=t.getNumberOfTuples();n.resize(r);const a=t.getNumberOfTuples();a<i&&(a===0?(e.numberOfCells=0,e.cellSizes=[]):(e.numberOfCells=void 0,e.cellSizes=void 0))},t.setData=r=>{n.setData(r,1),e.numberOfCells=void 0,e.cellSizes=void 0},t.getCell=r=>{let i=r;const a=e.values[i++];return e.values.subarray(i,i+a)},t.insertNextCell=r=>{const i=t.getNumberOfCells();return t.insertNextTuples([r.length,...r]),++e.numberOfCells,e.cellSizes!=null&&e.cellSizes.push(r.length),i}}function WE(t){return{empty:!0,numberOfComponents:1,dataType:Be.UNSIGNED_INT,...t}}function y5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Ee.extend(t,e,WE(n)),zE(t,e)}const jE=P.newInstance(y5,"vtkCellArray");var Fs={newInstance:jE,extend:y5,...IE};const{vtkErrorMacro:$E}=P,HE=[1,-1,1,-1,1,-1];function KE(t,e){e.classHierarchy.push("vtkPoints"),t.getNumberOfPoints=t.getNumberOfTuples,t.setNumberOfPoints=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;t.getNumberOfPoints()!==n&&(e.size=n*r,e.values=P.newTypedArray(e.dataType,e.size),t.setNumberOfComponents(r),t.modified())},t.setPoint=function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];t.setTuple(n,i)},t.getPoint=t.getTuple,t.findPoint=t.findTuple,t.insertNextPoint=(n,r,i)=>t.insertNextTuple([n,r,i]),t.getBounds=()=>{if(t.getNumberOfComponents()===3){const i=t.getRange(0);e.bounds[0]=i[0],e.bounds[1]=i[1];const a=t.getRange(1);e.bounds[2]=a[0],e.bounds[3]=a[1];const o=t.getRange(2);return e.bounds[4]=o[0],e.bounds[5]=o[1],e.bounds}if(t.getNumberOfComponents()!==2)return $E(`getBounds called on an array with components of
        ${t.getNumberOfComponents()}`),HE;const n=t.getRange(0);e.bounds[0]=n[0],e.bounds[1]=n[1];const r=t.getRange(1);return e.bounds[2]=r[0],e.bounds[3]=r[1],e.bounds[4]=0,e.bounds[5]=0,e.bounds},t.computeBounds=t.getBounds,t.setNumberOfComponents(e.numberOfComponents<2?3:e.numberOfComponents)}const XE={empty:!0,numberOfComponents:3,dataType:Be.FLOAT,bounds:[1,-1,1,-1,1,-1]};function m5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,XE,n),Ee.extend(t,e,n),KE(t,e)}const qE=P.newInstance(m5,"vtkPoints");var fc={newInstance:qE,extend:m5};function YE(t,e){e.classHierarchy.push("vtkCell"),t.initialize=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(r){e.pointsIds=r;let i=e.points.getData();i.length!==3*e.pointsIds.length&&(i=P.newTypedArray(n.getDataType(),3*e.pointsIds.length));const a=n.getData();e.pointsIds.forEach((o,s)=>{let u=3*o,l=3*s;i[l]=a[u],i[++l]=a[++u],i[++l]=a[++u]}),e.points.setData(i)}else{e.points=n,e.pointsIds=new Array(n.getNumberOfPoints());for(let i=n.getNumberOfPoints()-1;i>=0;--i)e.pointsIds[i]=i}},t.getBounds=()=>{const n=e.points.getNumberOfPoints(),r=[];if(n){e.points.getPoint(0,r),e.bounds[0]=r[0],e.bounds[1]=r[0],e.bounds[2]=r[1],e.bounds[3]=r[1],e.bounds[4]=r[2],e.bounds[5]=r[2];for(let i=1;i<n;i++)e.points.getPoint(i,r),e.bounds[0]=r[0]<e.bounds[0]?r[0]:e.bounds[0],e.bounds[1]=r[0]>e.bounds[1]?r[0]:e.bounds[1],e.bounds[2]=r[1]<e.bounds[2]?r[1]:e.bounds[2],e.bounds[3]=r[1]>e.bounds[3]?r[1]:e.bounds[3],e.bounds[4]=r[2]<e.bounds[4]?r[2]:e.bounds[4],e.bounds[5]=r[2]>e.bounds[5]?r[2]:e.bounds[5]}else To(e.bounds);return e.bounds},t.getLength2=()=>{t.getBounds();let n=0,r=0;for(let i=0;i<3;i++)r=e.bounds[2*i+1]-e.bounds[2*i],n+=r*r;return n},t.getParametricDistance=n=>{let r,i=0;for(let a=0;a<3;a++)n[a]<0?r=-n[a]:n[a]>1?r=n[a]-1:r=0,r>i&&(i=r);return i},t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.deepCopy=n=>{n.initialize(e.points,e.pointsIds)},t.getCellDimension=()=>{},t.intersectWithLine=(n,r,i,a,o,s,u)=>{},t.evaluatePosition=(n,r,i,a,o,s)=>{P.vtkErrorMacro("vtkCell.evaluatePosition is not implemented.")}}const JE={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function x5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,JE,n),P.obj(t,e),e.points||(e.points=fc.newInstance()),P.get(t,e,["points","pointsIds"]),YE(t,e)}const QE=P.newInstance(x5,"vtkCell");var pc={newInstance:QE,extend:x5};function ZE(t,e){let n=e;for(e>=t.array.length&&(n+=t.array.length);n>t.array.length;)t.array.push({ncells:0,cells:null});t.array.length=n}function eD(t,e){e.classHierarchy.push("vtkCellLinks"),t.buildLinks=n=>{const r=n.getPoints().getNumberOfPoints(),i=n.getNumberOfCells(),a=new Uint32Array(r);if(n.isA("vtkPolyData")){for(let o=0;o<i;++o){const{cellPointIds:s}=n.getCellPoints(o);s.forEach(u=>{t.incrementLinkCount(u)})}t.allocateLinks(r),e.maxId=r-1;for(let o=0;o<i;++o){const{cellPointIds:s}=n.getCellPoints(o);s.forEach(u=>{t.insertCellReference(u,a[u]++,o)})}}else{for(let o=0;o<i;o++)pc.newInstance().getPointsIds().forEach(u=>{t.incrementLinkCount(u)});t.allocateLinks(r),e.maxId=r-1;for(let o=0;o<i;++o)pc.newInstance().getPointsIds().forEach(u=>{t.insertCellReference(u,a[u]++,o)})}},t.allocate=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.array=Array(n).fill().map(()=>({ncells:0,cells:null})),e.extend=r,e.maxId=-1},t.initialize=()=>{e.array=null},t.getLink=n=>e.array[n],t.getNcells=n=>e.array[n].ncells,t.getCells=n=>e.array[n].cells,t.insertNextPoint=n=>{e.array.push({ncells:n,cells:Array(n)}),++e.maxId},t.insertNextCellReference=(n,r)=>{e.array[n].cells[e.array[n].ncells++]=r},t.deletePoint=n=>{e.array[n].ncells=0,e.array[n].cells=null},t.removeCellReference=(n,r)=>{e.array[r].cells=e.array[r].cells.filter(i=>i!==n),e.array[r].ncells=e.array[r].cells.length},t.addCellReference=(n,r)=>{e.array[r].cells[e.array[r].ncells++]=n},t.resizeCellList=(n,r)=>{e.array[n].cells.length=r},t.squeeze=()=>{ZE(e,e.maxId+1)},t.reset=()=>{e.maxId=-1},t.deepCopy=n=>{e.array=[...n.array],e.extend=n.extend,e.maxId=n.maxId},t.incrementLinkCount=n=>{++e.array[n].ncells},t.allocateLinks=n=>{for(let r=0;r<n;++r)e.array[r].cells=new Array(e.array[r].ncells)},t.insertCellReference=(n,r,i)=>{e.array[n].cells[r]=i}}const tD={array:null,maxId:0,extend:0};function S5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,tD,n),P.obj(t,e),eD(t,e)}const nD=P.newInstance(S5,"vtkCellLinks");var rD={newInstance:nD,extend:S5};const Qe={VTK_EMPTY_CELL:0,VTK_VERTEX:1,VTK_POLY_VERTEX:2,VTK_LINE:3,VTK_POLY_LINE:4,VTK_TRIANGLE:5,VTK_TRIANGLE_STRIP:6,VTK_POLYGON:7,VTK_PIXEL:8,VTK_QUAD:9,VTK_TETRA:10,VTK_VOXEL:11,VTK_HEXAHEDRON:12,VTK_WEDGE:13,VTK_PYRAMID:14,VTK_PENTAGONAL_PRISM:15,VTK_HEXAGONAL_PRISM:16,VTK_QUADRATIC_EDGE:21,VTK_QUADRATIC_TRIANGLE:22,VTK_QUADRATIC_QUAD:23,VTK_QUADRATIC_POLYGON:36,VTK_QUADRATIC_TETRA:24,VTK_QUADRATIC_HEXAHEDRON:25,VTK_QUADRATIC_WEDGE:26,VTK_QUADRATIC_PYRAMID:27,VTK_BIQUADRATIC_QUAD:28,VTK_TRIQUADRATIC_HEXAHEDRON:29,VTK_QUADRATIC_LINEAR_QUAD:30,VTK_QUADRATIC_LINEAR_WEDGE:31,VTK_BIQUADRATIC_QUADRATIC_WEDGE:32,VTK_BIQUADRATIC_QUADRATIC_HEXAHEDRON:33,VTK_BIQUADRATIC_TRIANGLE:34,VTK_CUBIC_LINE:35,VTK_CONVEX_POINT_SET:41,VTK_POLYHEDRON:42,VTK_PARAMETRIC_CURVE:51,VTK_PARAMETRIC_SURFACE:52,VTK_PARAMETRIC_TRI_SURFACE:53,VTK_PARAMETRIC_QUAD_SURFACE:54,VTK_PARAMETRIC_TETRA_REGION:55,VTK_PARAMETRIC_HEX_REGION:56,VTK_HIGHER_ORDER_EDGE:60,VTK_HIGHER_ORDER_TRIANGLE:61,VTK_HIGHER_ORDER_QUAD:62,VTK_HIGHER_ORDER_POLYGON:63,VTK_HIGHER_ORDER_TETRAHEDRON:64,VTK_HIGHER_ORDER_WEDGE:65,VTK_HIGHER_ORDER_PYRAMID:66,VTK_HIGHER_ORDER_HEXAHEDRON:67,VTK_LAGRANGE_CURVE:68,VTK_LAGRANGE_TRIANGLE:69,VTK_LAGRANGE_QUADRILATERAL:70,VTK_LAGRANGE_TETRAHEDRON:71,VTK_LAGRANGE_HEXAHEDRON:72,VTK_LAGRANGE_WEDGE:73,VTK_LAGRANGE_PYRAMID:74,VTK_NUMBER_OF_CELL_TYPES:75},hp=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];function iD(t){return t<hp.length?hp[t]:"UnknownClass"}function aD(t){return hp.findIndex(t)}function oD(t){return t<Qe.VTK_QUADRATIC_EDGE||t===Qe.VTK_CONVEX_POINT_SET||t===Qe.VTK_POLYHEDRON}function sD(t){return t===Qe.VTK_TRIANGLE_STRIP||t===Qe.VTK_POLY_LINE||t===Qe.VTK_POLY_VERTEX}const uD={getClassNameFromTypeId:iD,getTypeIdFromClassName:aD,isLinear:oD,hasSubCells:sD};function cD(t,e){e.classHierarchy.push("vtkCellTypes"),t.allocate=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:512,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.size=n>0?n:1,e.extend=r>0?r:1,e.maxId=-1,e.typeArray=new Uint8Array(n),e.locationArray=new Uint32Array(n)},t.insertCell=(n,r,i)=>{e.typeArray[n]=r,e.locationArray[n]=i,n>e.maxId&&(e.maxId=n)},t.insertNextCell=(n,r)=>(t.insertCell(++e.maxId,n,r),e.maxId),t.setCellTypes=(n,r,i)=>{e.size=n,e.typeArray=r,e.locationArray=i,e.maxId=n-1},t.getCellLocation=n=>e.locationArray[n],t.deleteCell=n=>{e.typeArray[n]=Qe.VTK_EMPTY_CELL},t.getNumberOfTypes=()=>e.maxId+1,t.isType=n=>{const r=t.getNumberOfTypes();for(let i=0;i<r;++i)if(n===t.getCellType(i))return!0;return!1},t.insertNextType=n=>t.insertNextCell(n,-1),t.getCellType=n=>e.typeArray[n],t.reset=()=>{e.maxId=-1},t.deepCopy=n=>{t.allocate(n.getSize(),n.getExtend()),e.typeArray.set(n.getTypeArray()),e.locationArray.set(n.getLocationArray()),e.maxId=n.getMaxId()}}const lD={size:0,maxId:-1,extend:1e3};function T5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,lD,n),P.obj(t,e),P.get(t,e,["size","maxId","extend"]),P.getArray(t,e,["typeArray","locationArray"]),cD(t,e)}const fD=P.newInstance(T5,"vtkCellTypes");var pD={newInstance:fD,extend:T5,...uD};const hD={NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2};var C5={IntersectionState:hD};const{IntersectionState:g0}=C5;function Aa(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;const i={t:Number.MIN_VALUE,distance:0},a=[];let o;a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2];const s=a[0]*(t[0]-e[0])+a[1]*(t[1]-e[1])+a[2]*(t[2]-e[2]),u=Oe(a,a);let l=1e-5*s;return u!==0&&(i.t=s/u),l<0&&(l=-l),-l<u&&u<l||u<=0||i.t<0?o=e:i.t>1?o=n:(o=a,a[0]=e[0]+i.t*a[0],a[1]=e[1]+i.t*a[1],a[2]=e[2]+i.t*a[2]),r&&(r[0]=o[0],r[1]=o[1],r[2]=o[2]),i.distance=In(o,t),i}function w5(t,e,n,r,i,a){const o=[],s=[],u=[];i[0]=0,a[0]=0,Nr(e,t,o),Nr(r,n,s),Nr(n,t,u);const l=[Oe(o,o),-Oe(o,s),-Oe(o,s),Oe(s,s)],p=[];if(p[0]=Oe(o,u),p[1]=-Oe(s,u),om(l,p,2)===0){let c=Number.MAX_VALUE;const f=[t,e,n,r],h=[n,n,t,t],v=[r,r,e,e];a[0],a[0],i[0],i[0],i[0],i[0],a[0],a[0];let y;for(let x=0;x<4;x++)y=Aa(f[x],h[x],v[x]),y.distance<c&&(c=y.distance);return g0.ON_LINE}return i[0]=p[0],a[0]=p[1],i[0]>=0&&i[0]<=1&&a[0]>=0&&a[0]<=1?g0.YES_INTERSECTION:g0.NO_INTERSECTION}const gD={distanceToLine:Aa,intersection:w5};function dD(t,e){e.classHierarchy.push("vtkLine");function n(r){return r>=0&&r<=1}t.getCellDimension=()=>1,t.intersectWithLine=(r,i,a,o,s)=>{const u={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null};s[1]=0,s[2]=0;const l=[],p=[],c=[];e.points.getPoint(0,p),e.points.getPoint(1,c);const f=[],h=[],v=w5(r,i,p,c,f,h);if(u.t=f[0],u.betweenPoints=n(u.t),s[0]=h[0],v===g0.YES_INTERSECTION){for(let y=0;y<3;y++)o[y]=p[y]+s[0]*(c[y]-p[y]),l[y]=r[y]+u.t*(i[y]-r[y]);if(In(o,l)<=a*a)return u.intersect=1,u}else{let y;if(u.t<0)return y=Aa(r,p,c,o),y.distance<=a*a&&(u.t=0,u.intersect=1,u.betweenPoints=!0),u;if(u.t>1)return y=Aa(i,p,c,o),y.distance<=a*a&&(u.t=1,u.intersect=1,u.betweenPoints=!0),u;if(s[0]<0)return s[0]=0,y=Aa(p,r,i,o),u.t=y.t,y.distance<=a*a&&(u.intersect=1),u;if(s[0]>1)return s[0]=1,y=Aa(c,r,i,o),u.t=y.t,y.distance<=a*a&&(u.intersect=1),u}return u},t.evaluateLocation=(r,i,a)=>{const o=[],s=[];e.points.getPoint(0,o),e.points.getPoint(1,s);for(let u=0;u<3;u++)i[u]=o[u]+r[0]*(s[u]-o[u]);a[0]=1-r[0],a[1]=r[0]},t.evaluateOrientation=(r,i,a)=>e.orientations?(o0(i,e.orientations[0],e.orientations[1],r[0]),a[0]=1-r[0],a[1]=r[0],!0):!1}const vD={orientations:null};function _5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vD,n),pc.extend(t,e,n),P.setGet(t,e,["orientations"]),dD(t,e)}const yD=P.newInstance(_5,"vtkLine");var wn={newInstance:yD,extend:_5,...gD,...C5};function mD(t,e){e.classHierarchy.push("vtkPointSet"),e.points?e.points=Hn(e.points):e.points=fc.newInstance(),t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.getBounds=()=>e.points.getBounds(),t.computeBounds=()=>{t.getBounds()};const n=t.shallowCopy;t.shallowCopy=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(r,i),e.points=fc.newInstance(),e.points.shallowCopy(r.getPoints())}}const xD={};function E5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,xD,n),ha.extend(t,e,n),P.setGet(t,e,["points"]),mD(t,e)}const SD=P.newInstance(E5,"vtkPointSet");var TD={newInstance:SD,extend:E5};function u1(t,e,n,r){const i=n[0]-e[0],a=n[1]-e[1],o=n[2]-e[2],s=t[0]-e[0],u=t[1]-e[1],l=t[2]-e[2];r[0]=a*l-o*u,r[1]=o*s-i*l,r[2]=i*u-a*s}function hc(t,e,n,r){u1(t,e,n,r);const i=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);i!==0&&(r[0]/=i,r[1]/=i,r[2]/=i)}function CD(t,e,n,r,i,a){let o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1e-6,s=!1;const u=[],l=[],p=[],c=[],f=[];hc(t,e,n,c),hc(r,i,a,f);const h=-Oe(c,t),v=-Oe(f,r),y=[Oe(f,t)+v,Oe(f,e)+v,Oe(f,n)+v];if(y[0]*y[1]>o&&y[0]*y[2]>o)return{intersect:!1,coplanar:s,pt1:u,pt2:l,surfaceId:p};const x=[Oe(c,r)+h,Oe(c,i)+h,Oe(c,a)+h];if(x[0]*x[1]>o&&x[0]*x[2]>o)return{intersect:!1,coplanar:s,pt1:u,pt2:l,surfaceId:p};if(Math.abs(c[0]-f[0])<1e-9&&Math.abs(c[1]-f[1])<1e-9&&Math.abs(c[2]-f[2])<1e-9&&Math.abs(h-v)<1e-9)return s=!0,{intersect:!1,coplanar:s,pt1:u,pt2:l,surfaceId:p};const m=[t,e,n],g=[r,i,a],d=Oe(c,f),S=(h-v*d)/(d*d-1),T=(v-h*d)/(d*d-1),C=[S*c[0]+T*f[0],S*c[1]+T*f[1],S*c[2]+T*f[2]],w=pr(c,f,[]);aa(w);let _=0,E=0;const D=[],O=[];let N=50,R=50;for(let G=0;G<3;G++){const j=G,k=(G+1)%3,F=oa.intersectWithLine(m[j],m[k],r,f);F.intersection&&F.t>0-o&&F.t<1+o&&(F.t<1+o&&F.t>1-o&&(N=_),D[_++]=Oe(F.x,w)-Oe(C,w));const B=oa.intersectWithLine(g[j],g[k],t,c);B.intersection&&B.t>0-o&&B.t<1+o&&(B.t<1+o&&B.t>1-o&&(R=E),O[E++]=Oe(B.x,w)-Oe(C,w))}if(_>2){_--;const G=D[2];D[2]=D[N],D[N]=G}if(E>2){E--;const G=O[2];O[2]=O[R],O[R]=G}if(_!==2||E!==2)return{intersect:!1,coplanar:s,pt1:u,pt2:l,surfaceId:p};if(Number.isNaN(D[0])||Number.isNaN(D[1])||Number.isNaN(O[0])||Number.isNaN(O[1]))return{intersect:!1,coplanar:s,pt1:u,pt2:l,surfaceId:p};if(D[0]>D[1]){const G=D[1];D[1]=D[0],D[0]=G}if(O[0]>O[1]){const G=O[1];O[1]=O[0],O[0]=G}let M,A;return D[1]<O[0]||O[1]<D[0]?{intersect:!1,coplanar:s,pt1:u,pt2:l,surfaceId:p}:(D[0]<O[0]?D[1]<O[1]?(p[0]=2,p[1]=1,M=O[0],A=D[1]):(p[0]=2,p[1]=2,M=O[0],A=O[1]):D[1]<O[1]?(p[0]=1,p[1]=1,M=D[0],A=D[1]):(p[0]=1,p[1]=2,M=D[0],A=O[1]),Zf(C,w,M,u),Zf(C,w,A,l),{intersect:!0,coplanar:s,pt1:u,pt2:l,surfaceId:p})}const wD={computeNormalDirection:u1,computeNormal:hc,intersectWithTriangle:CD};function _D(t,e){e.classHierarchy.push("vtkTriangle"),t.getCellDimension=()=>2,t.intersectWithLine=(n,r,i,a,o)=>{const s={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1};o[2]=0;const u=[],l=i*i,p=[],c=[],f=[];e.points.getPoint(0,p),e.points.getPoint(1,c),e.points.getPoint(2,f);const h=[],v=[];if(hc(p,c,f,h),h[0]!==0||h[1]!==0||h[2]!==0){const d=oa.intersectWithLine(n,r,p,h);if(s.betweenPoints=d.betweenPoints,s.t=d.t,a[0]=d.x[0],a[1]=d.x[1],a[2]=d.x[2],!d.intersection)return o[0]=0,o[1]=0,s.intersect=0,s;const S=t.evaluatePosition(a,u,o,v);if(S.evaluation>=0)return S.dist2<=l?(s.intersect=1,s):(s.intersect=S.evaluation,s)}const y=In(p,c),x=In(c,f),m=In(f,p);e.line||(e.line=wn.newInstance()),y>x&&y>m?(e.line.getPoints().setPoint(0,p),e.line.getPoints().setPoint(1,c)):x>m&&x>y?(e.line.getPoints().setPoint(0,c),e.line.getPoints().setPoint(1,f)):(e.line.getPoints().setPoint(0,f),e.line.getPoints().setPoint(1,p));const g=e.line.intersectWithLine(n,r,i,a,o);if(s.betweenPoints=g.betweenPoints,s.t=g.t,g.intersect){const d=[],S=[],T=[];for(let C=0;C<3;C++)d[C]=p[C]-f[C],S[C]=c[C]-f[C],T[C]=a[C]-f[C];return o[0]=Oe(T,d)/m,o[1]=Oe(T,S)/x,s.intersect=1,s}return o[0]=0,o[1]=0,s.intersect=0,s},t.evaluatePosition=(n,r,i,a)=>{const o={subId:0,dist2:0,evaluation:-1};let s,u;const l=[],p=[],c=[],f=[];let h;const v=[],y=[],x=[];let m=0,g=0;const d=[];let S,T,C,w=[];const _=[],E=[],D=[];o.subId=0,i[2]=0,e.points.getPoint(1,l),e.points.getPoint(2,p),e.points.getPoint(0,c),u1(l,p,c,f),oa.generalizedProjectPoint(n,l,f,D);let O=0;for(s=0;s<3;s++)f[s]<0?h=-f[s]:h=f[s],h>O&&(O=h,g=s);for(u=0,s=0;s<3;s++)s!==g&&(d[u++]=s);for(s=0;s<2;s++)v[s]=D[d[s]]-c[d[s]],y[s]=l[d[s]]-c[d[s]],x[s]=p[d[s]]-c[d[s]];if(m=ct(y,x),m===0)return i[0]=0,i[1]=0,o.evaluation=-1,o;if(i[0]=ct(v,x)/m,i[1]=ct(y,v)/m,a[0]=1-(i[0]+i[1]),a[1]=i[0],a[2]=i[1],a[0]>=0&&a[0]<=1&&a[1]>=0&&a[1]<=1&&a[2]>=0&&a[2]<=1)r&&(o.dist2=In(D,n),r[0]=D[0],r[1]=D[1],r[2]=D[2]),o.evaluation=1;else{let N;if(r){if(a[1]<0&&a[2]<0)for(S=In(n,c),T=wn.distanceToLine(n,l,c,N,_),C=wn.distanceToLine(n,c,p,N,E),S<T?(o.dist2=S,w=c):(o.dist2=T,w=_),C<o.dist2&&(o.dist2=C,w=E),s=0;s<3;s++)r[s]=w[s];else if(a[2]<0&&a[0]<0)for(S=In(n,l),T=wn.distanceToLine(n,l,c,N,_),C=wn.distanceToLine(n,l,p,N,E),S<T?(o.dist2=S,w=l):(o.dist2=T,w=_),C<o.dist2&&(o.dist2=C,w=E),s=0;s<3;s++)r[s]=w[s];else if(a[1]<0&&a[0]<0)for(S=In(n,p),T=wn.distanceToLine(n,p,c,N,_),C=wn.distanceToLine(n,l,p,N,E),S<T?(o.dist2=S,w=p):(o.dist2=T,w=_),C<o.dist2&&(o.dist2=C,w=E),s=0;s<3;s++)r[s]=w[s];else if(a[0]<0){const R=wn.distanceToLine(n,l,p,r);o.dist2=R.distance}else if(a[1]<0){const R=wn.distanceToLine(n,p,c,r);o.dist2=R.distance}else if(a[2]<0){const R=wn.distanceToLine(n,l,c,r);o.dist2=R.distance}}o.evaluation=0}return o},t.evaluateLocation=(n,r,i)=>{const a=[],o=[],s=[];e.points.getPoint(0,a),e.points.getPoint(1,o),e.points.getPoint(2,s);const u=1-n[0]-n[1];for(let l=0;l<3;l++)r[l]=a[l]*u+o[l]*n[0]+s[l]*n[1];i[0]=u,i[1]=n[0],i[2]=n[1]},t.getParametricDistance=n=>{let r,i=0;const a=[];a[0]=n[0],a[1]=n[1],a[2]=1-n[0]-n[1];for(let o=0;o<3;o++)a[o]<0?r=-a[o]:a[o]>1?r=a[o]-1:r=0,r>i&&(i=r);return i}}const ED={};function D5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ED,n),pc.extend(t,e,n),_D(t,e)}const DD=P.newInstance(D5,"vtkTriangle");var OD={newInstance:DD,extend:D5,...wD};const Fl=["verts","lines","polys","strips"],{vtkWarningMacro:kd}=P,bD={[Qe.VTK_LINE]:wn,[Qe.VTK_POLY_LINE]:wn,[Qe.VTK_TRIANGLE]:OD};function ND(t,e){e.classHierarchy.push("vtkPolyData");function n(i){return i.replace(/(?:^\w|[A-Z]|\b\w)/g,a=>a.toUpperCase()).replace(/\s+/g,"")}Fl.forEach(i=>{t[`getNumberOf${n(i)}`]=()=>e[i].getNumberOfCells(),e[i]?e[i]=Hn(e[i]):e[i]=Fs.newInstance()}),t.getNumberOfCells=()=>Fl.reduce((i,a)=>i+e[a].getNumberOfCells(),0);const r=t.shallowCopy;t.shallowCopy=function(i){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r(i,a),Fl.forEach(o=>{e[o]=Fs.newInstance(),e[o].shallowCopy(i.getReferenceByName(o))})},t.buildCells=()=>{const i=t.getNumberOfVerts(),a=t.getNumberOfLines(),o=t.getNumberOfPolys(),s=t.getNumberOfStrips(),u=i+a+o+s,l=new Uint8Array(u);let p=l;const c=new Uint32Array(u);let f=c;if(i){let h=0;e.verts.getCellSizes().forEach((v,y)=>{f[y]=h,p[y]=v>1?Qe.VTK_POLY_VERTEX:Qe.VTK_VERTEX,h+=v+1}),f=f.subarray(i),p=p.subarray(i)}if(a){let h=0;e.lines.getCellSizes().forEach((v,y)=>{f[y]=h,p[y]=v>2?Qe.VTK_POLY_LINE:Qe.VTK_LINE,v===1&&kd("Building VTK_LINE ",y," with only one point, but VTK_LINE needs at least two points. Check the input."),h+=v+1}),f=f.subarray(a),p=p.subarray(a)}if(o){let h=0;e.polys.getCellSizes().forEach((v,y)=>{switch(f[y]=h,v){case 3:p[y]=Qe.VTK_TRIANGLE;break;case 4:p[y]=Qe.VTK_QUAD;break;default:p[y]=Qe.VTK_POLYGON;break}v<3&&kd("Building VTK_TRIANGLE ",y," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),h+=v+1}),f+=f.subarray(o),p+=p.subarray(o)}if(s){let h=0;p.fill(Qe.VTK_TRIANGLE_STRIP,0,s),e.strips.getCellSizes().forEach((v,y)=>{f[y]=h,h+=v+1})}e.cells=pD.newInstance(),e.cells.setCellTypes(u,l,c)},t.buildLinks=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;e.cells===void 0&&t.buildCells(),e.links=rD.newInstance(),i>0?e.links.allocate(i):e.links.allocate(t.getPoints().getNumberOfPoints()),e.links.buildLinks(t)},t.getCellType=i=>e.cells.getCellType(i),t.getCellPoints=i=>{const a=t.getCellType(i);let o=null;switch(a){case Qe.VTK_VERTEX:case Qe.VTK_POLY_VERTEX:o=e.verts;break;case Qe.VTK_LINE:case Qe.VTK_POLY_LINE:o=e.lines;break;case Qe.VTK_TRIANGLE:case Qe.VTK_QUAD:case Qe.VTK_POLYGON:o=e.polys;break;case Qe.VTK_TRIANGLE_STRIP:o=e.strips;break;default:return o=null,{type:0,cellPointIds:null}}const s=e.cells.getCellLocation(i),u=o.getCell(s);return{cellType:a,cellPointIds:u}},t.getPointCells=i=>e.links.getCells(i),t.getCellEdgeNeighbors=(i,a,o)=>{const s=e.links.getLink(a),u=e.links.getLink(o);return s.cells.filter(l=>l!==i&&u.cells.indexOf(l)!==-1)},t.getCell=function(i){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const o=t.getCellPoints(i),s=a||bD[o.cellType].newInstance();return s.initialize(t.getPoints(),o.cellPointIds),s}}const MD={};function O5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,MD,n),TD.extend(t,e,n),P.get(t,e,["cells","links"]),P.setGet(t,e,["verts","lines","polys","strips"]),ND(t,e)}const RD=P.newInstance(O5,"vtkPolyData");var sn={newInstance:RD,extend:O5};function FD(t,e){e.classHierarchy.push("vtkTexture"),t.imageLoaded=()=>{e.image.removeEventListener("load",t.imageLoaded),e.imageLoaded=!0,t.modified()},t.setJsImageData=n=>{e.jsImageData!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.canvas=null),e.jsImageData=n,e.imageLoaded=!0,t.modified())},t.setCanvas=n=>{e.canvas!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.jsImageData=null),e.canvas=n,t.modified())},t.setImage=n=>{e.image!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.canvas=null,e.jsImageData=null),e.image=n,e.imageLoaded=!1,n.complete?t.imageLoaded():n.addEventListener("load",t.imageLoaded),t.modified())},t.getDimensionality=()=>{let n=0,r=0,i=1;if(t.getInputData()){const o=t.getInputData();n=o.getDimensions()[0],r=o.getDimensions()[1],i=o.getDimensions()[2]}return e.jsImageData&&(n=e.jsImageData.width,r=e.jsImageData.height),e.canvas&&(n=e.canvas.width,r=e.canvas.height),e.image&&(n=e.image.width,r=e.image.height),(n>1)+(r>1)+(i>1)},t.getInputAsJsImageData=()=>{if(!e.imageLoaded||t.getInputData())return null;if(e.jsImageData)return e.jsImageData();if(e.canvas)return e.canvas.getContext("2d").getImageData(0,0,e.canvas.width,e.canvas.height);if(e.image){const n=document.createElement("canvas");n.width=e.image.width,n.height=e.image.height;const r=n.getContext("2d");return r.translate(0,n.height),r.scale(1,-1),r.drawImage(e.image,0,0,e.image.width,e.image.height),r.getImageData(0,0,n.width,n.height)}return null}}const LD=(t,e,n,r)=>{const i=[1,2,1],a=4,o=i,s=a,u=t.length/(e*n);let l=e,p=n,c=t;const f=[c];for(let h=0;h<r;h++){const v=[...c];l/=2,p/=2,c=new Uint8ClampedArray(l*p*u);const y=u*l;let x=0;for(let g=0;g<c.length;g+=u){g%y===0&&(x+=2*u*l);for(let d=0;d<u;d++){let S=v[x+d];S+=v[x+u+d],S+=v[x-2*y+d],S+=v[x-2*y+u+d],S/=4,c[g+d]=S}x+=2*u}let m=[...c];for(let g=0;g<c.length;g+=u)for(let d=0;d<u;d++){let S=-(o.length-1)/2,T=s,C=0;for(let w=0;w<o.length;w++){let _=g+d+S*u;const E=_%y-(g+d)%y;E>u&&(_+=y),E<-u&&(_-=y),m[_]?C+=m[_]*o[w]:T-=o[w],S+=1}c[g+d]=C/T}m=[...c];for(let g=0;g<c.length;g+=u)for(let d=0;d<u;d++){let S=-(o.length-1)/2,T=s,C=0;for(let w=0;w<o.length;w++){const _=g+d+S*y;m[_]?C+=m[_]*o[w]:T-=o[w],S+=1}c[g+d]=C/T}f.push(c)}return f},kD={image:null,canvas:null,jsImageData:null,imageLoaded:!1,repeat:!1,interpolate:!1,edgeClamp:!1,mipLevel:0,resizable:!1};function b5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,kD,n),P.obj(t,e),P.algo(t,e,6,0),P.get(t,e,["canvas","image","jsImageData","imageLoaded","resizable"]),P.setGet(t,e,["repeat","edgeClamp","interpolate","mipLevel"]),FD(t,e)}const BD=P.newInstance(b5,"vtkTexture"),VD={generateMipmaps:LD};var jc={newInstance:BD,extend:b5,...VD};const AD=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],Bd=[[8,7,11,3],[9,1,10,5],[4,9,0,8],[2,11,6,10],[0,3,2,1],[4,5,6,7]],Ou=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[3,7],[2,6]],Vd=[0,1,0,1,0,1,0,1,2,2,2,2],ot=[[1,2],[1,2],[0,2],[0,2],[0,1],[0,1]],De=new Float64Array(3),bu=new Float64Array(3),$e=new Float64Array(3),Gi=new Float64Array(3),Di=new Float64Array(3),Nu=new Float64Array(3),Ll=new Float64Array(16);function kl(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font=`${e.fontStyle} ${e.fontSize}px ${e.fontFamily}`}function N5(t){const e=[],n=[];for(let r=0;r<3;r++){const i=Ah().domain([t[r*2],t[r*2+1]]);e[r]=i.ticks(5);const a=i.tickFormat(5);n[r]=e[r].map(a)}return{ticks:e,tickStrings:n}}function UD(t,e){e.classHierarchy.push("vtkCubeAxesActorHelper"),t.setRenderable=n=>{e.renderable!==n&&(e.renderable=n,e.tmActor.addTexture(e.renderable.getTmTexture()),e.tmActor.setProperty(n.getProperty()),e.tmActor.setParentProp(n),t.modified())},t.createPolyDataForOneLabel=(n,r,i,a,o,s,u)=>{const l=e.renderable.get_tmAtlas().get(n);if(!l)return;const p=e.renderable.getTextPolyData().getPoints().getData(),c=e.lastSize;De[0]=p[r*3],De[1]=p[r*3+1],De[2]=p[r*3+2],Re($e,De,i),$e[0]+=.1,Re(bu,$e,a),ni(Di,bu,De),$e[0]-=.1,$e[1]+=.1,Re(bu,$e,a),ni(Nu,bu,De);for(let v=0;v<3;v++)Di[v]/=.5*.1*c[0],Nu[v]/=.5*.1*c[1];let f=u.ptIdx,h=u.cellIdx;De[0]=p[r*3],De[1]=p[r*3+1],De[2]=p[r*3+2],o[0]<-.5?Sr($e,Di,o[0]*s-l.width):o[0]>.5?Sr($e,Di,o[0]*s):Sr($e,Di,o[0]*s-l.width/2),Uo(De,De,$e),Sr($e,Nu,o[1]*s-l.height/2),Uo(De,De,$e),u.points[f*3]=De[0],u.points[f*3+1]=De[1],u.points[f*3+2]=De[2],u.tcoords[f*2]=l.tcoords[0],u.tcoords[f*2+1]=l.tcoords[1],f++,Sr($e,Di,l.width),Uo(De,De,$e),u.points[f*3]=De[0],u.points[f*3+1]=De[1],u.points[f*3+2]=De[2],u.tcoords[f*2]=l.tcoords[2],u.tcoords[f*2+1]=l.tcoords[3],f++,Sr($e,Nu,l.height),Uo(De,De,$e),u.points[f*3]=De[0],u.points[f*3+1]=De[1],u.points[f*3+2]=De[2],u.tcoords[f*2]=l.tcoords[4],u.tcoords[f*2+1]=l.tcoords[5],f++,Sr($e,Di,l.width),ni(De,De,$e),u.points[f*3]=De[0],u.points[f*3+1]=De[1],u.points[f*3+2]=De[2],u.tcoords[f*2]=l.tcoords[6],u.tcoords[f*2+1]=l.tcoords[7],f++,u.polys[h*4]=3,u.polys[h*4+1]=f-4,u.polys[h*4+2]=f-3,u.polys[h*4+3]=f-2,h++,u.polys[h*4]=3,u.polys[h*4+1]=f-4,u.polys[h*4+2]=f-2,u.polys[h*4+3]=f-1,u.ptIdx+=4,u.cellIdx+=2},t.updateTexturePolyData=()=>{const n=e.camera.getCompositeProjectionMatrix(e.lastAspectRatio,-1,1);Fe(n,n);const r=e.renderable.getTextValues().length,i=r*4,a=r*2,o=new Float64Array(i*3),s=new Uint16Array(a*4),u=new Float32Array(i*2);yt(Ll,n);const l={ptIdx:0,cellIdx:0,polys:s,points:o,tcoords:u};let p=0,c=0,f=0;const h=e.renderable.getTextPolyData().getPoints().getData(),v=e.renderable.getTextValues();for(;p<h.length/3;){De[0]=h[p*3],De[1]=h[p*3+1],De[2]=h[p*3+2],Re($e,De,n),De[0]=h[p*3+3],De[1]=h[p*3+4],De[2]=h[p*3+5],Re(Gi,De,n),ni($e,$e,Gi);const x=[$e[0],$e[1]];Qy(x),t.createPolyDataForOneLabel(v[c],p,n,Ll,x,e.renderable.getAxisTitlePixelOffset(),l),p+=2,c++;for(let m=0;m<e.renderable.getTickCounts()[f];m++)t.createPolyDataForOneLabel(v[c],p,n,Ll,x,e.renderable.getTickLabelPixelOffset(),l),p++,c++;f++}const y=Ee.newInstance({numberOfComponents:2,values:u,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(y),e.tmPolyData.getPoints().setData(o,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(s,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updateAPISpecificData=(n,r,i)=>{(e.lastSize[0]!==n[0]||e.lastSize[1]!==n[1])&&(e.lastSize[0]=n[0],e.lastSize[1]=n[1],e.lastAspectRatio=n[0]/n[1],e.forceUpdate=!0),e.camera=r,t.updateTexturePolyData()}}const GD=P.newInstance(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},n),P.obj(t,e),e.tmPolyData=sn.newInstance(),e.tmMapper=ua.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmActor=sa.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),P.setGet(t,e,["renderable"]),P.get(t,e,["lastSize","lastAspectRatio","axisTextStyle","tickTextStyle","tmActor","ticks"]),e.forceUpdate=!1,e.lastRedrawTime={},P.obj(e.lastRedrawTime,{mtime:0}),e.lastRebuildTime={},P.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.lastTickBounds=[],UD(t,e)},"vtkCubeAxesActorHelper");function PD(t,e){e.classHierarchy.push("vtkCubeAxesActor"),t.setCamera=r=>{e.camera!==r&&(e.cameraModifiedSub&&(e.cameraModifiedSub.unsubscribe(),e.cameraModifiedSub=null),e.camera=r,r&&(e.cameraModifiedSub=r.onModified(t.update)),t.update(),t.modified())},t.computeFacesToDraw=()=>{const r=e.camera.getViewMatrix();Fe(r,r);let i=!1;const a=Ye.getDiagonalLength(e.dataBounds),o=Math.sin(e.faceVisibilityAngle*Math.PI/180);for(let s=0;s<6;s++){let u=!1;const l=Math.floor(s/2),p=(l+1)%3,c=(l+2)%3;e.dataBounds[p*2]!==e.dataBounds[p*2+1]&&e.dataBounds[c*2]!==e.dataBounds[c*2+1]&&(De[l]=e.dataBounds[s]-.1*a*AD[s][l],De[p]=.5*(e.dataBounds[p*2]+e.dataBounds[p*2+1]),De[c]=.5*(e.dataBounds[c*2]+e.dataBounds[c*2+1]),Re($e,De,r),De[l]=e.dataBounds[s],Re(Gi,De,r),ni($e,Gi,$e),cr($e,$e),u=$e[2]>o,e.camera.getParallelProjection()||(cr(Gi,Gi),u=bs(Gi,$e)>o)),u!==e.lastFacesToDraw[s]&&(e.lastFacesToDraw[s]=u,i=!0)}return i},t.updatePolyData=(r,i,a)=>{let o=0,s=0;o+=8;let u=0;for(let h=0;h<12;h++)i[h]>0&&u++;if(s+=u,e.gridLines)for(let h=0;h<6;h++)r[h]&&(o+=a[ot[h][0]].length*2+a[ot[h][1]].length*2,s+=a[ot[h][0]].length+a[ot[h][1]].length);const l=new Float64Array(o*3),p=new Uint32Array(s*3);let c=0,f=0;for(let h=0;h<2;h++)for(let v=0;v<2;v++)for(let y=0;y<2;y++)l[c*3]=e.dataBounds[y],l[c*3+1]=e.dataBounds[2+v],l[c*3+2]=e.dataBounds[4+h],c++;for(let h=0;h<12;h++)i[h]>0&&(p[f*3]=2,p[f*3+1]=Ou[h][0],p[f*3+2]=Ou[h][1],f++);if(e.gridLines){for(let h=0;h<6;h++)if(r[h]){const v=Math.floor(h/2);let y=a[ot[h][0]];for(let x=0;x<y.length;x++)l[c*3+v]=e.dataBounds[h],l[c*3+ot[h][0]]=y[x],l[c*3+ot[h][1]]=e.dataBounds[ot[h][1]*2],c++,l[c*3+v]=e.dataBounds[h],l[c*3+ot[h][0]]=y[x],l[c*3+ot[h][1]]=e.dataBounds[ot[h][1]*2+1],c++,p[f*3]=2,p[f*3+1]=c-2,p[f*3+2]=c-1,f++;y=a[ot[h][1]];for(let x=0;x<y.length;x++)l[c*3+v]=e.dataBounds[h],l[c*3+ot[h][1]]=y[x],l[c*3+ot[h][0]]=e.dataBounds[ot[h][0]*2],c++,l[c*3+v]=e.dataBounds[h],l[c*3+ot[h][1]]=y[x],l[c*3+ot[h][0]]=e.dataBounds[ot[h][0]*2+1],c++,p[f*3]=2,p[f*3+1]=c-2,p[f*3+2]=c-1,f++}}e.polyData.getPoints().setData(l,3),e.polyData.getPoints().modified(),e.polyData.getLines().setData(p,1),e.polyData.getLines().modified(),e.polyData.modified()},t.updateTextData=(r,i,a,o)=>{let s=0;for(let h=0;h<12;h++)i[h]===1&&(s+=2,s+=a[Vd[h]].length);const u=e.polyData.getPoints().getData(),l=new Float64Array(s*3);let p=0,c=0,f=0;for(let h=0;h<6;h++)if(r[h])for(let v=0;v<4;v++){const y=Bd[h][v];if(i[y]===1){const x=Vd[y],m=Ou[y][0]*3,g=Ou[y][1]*3;l[p*3]=.5*(u[m]+u[g]),l[p*3+1]=.5*(u[m+1]+u[g+1]),l[p*3+2]=.5*(u[m+2]+u[g+2]),p++;const d=Math.floor(h/2);l[p*3+d]=e.dataBounds[h],l[p*3+ot[h][0]]=.5*(e.dataBounds[ot[h][0]*2]+e.dataBounds[ot[h][0]*2+1]),l[p*3+ot[h][1]]=.5*(e.dataBounds[ot[h][1]*2]+e.dataBounds[ot[h][1]*2+1]),p++,e.textValues[c]=e.axisLabels[x],c++;const S=(x+1)%3,T=(x+2)%3,C=a[x],w=o[x];e.tickCounts[f]=C.length;for(let _=0;_<C.length;_++)l[p*3+x]=C[_],l[p*3+S]=u[m+S],l[p*3+T]=u[m+T],p++,e.textValues[c]=w[_],c++;f++}}e.textPolyData.getPoints().setData(l,3),e.textPolyData.modified()},t.update=()=>{if(!e.camera)return;const r=t.computeFacesToDraw(),i=e.lastFacesToDraw;let a=!1;for(let o=0;o<6;o++)e.dataBounds[o]!==e.lastTickBounds[o]&&(a=!0,e.lastTickBounds[o]=e.dataBounds[o]);if(r||a||e.forceUpdate){const o=new Array(12).fill(0);for(let u=0;u<6;u++)if(i[u])for(let l=0;l<4;l++)o[Bd[u][l]]++;const s=e.generateTicks(e.dataBounds);t.updatePolyData(i,o,s.ticks),t.updateTextData(i,o,s.ticks,s.tickStrings),(a||e.forceUpdate)&&t.updateTextureAtlas(s.tickStrings)}e.forceUpdate=!1},t.updateTextureAtlas=r=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e._tmAtlas.clear();let i=0,a=1;for(let o=0;o<3;o++){if(!e._tmAtlas.has(e.axisLabels[o])){kl(e.tmContext,e.axisTextStyle);const s=e.tmContext.measureText(e.axisLabels[o]),u={height:s.actualBoundingBoxAscent+2,startingHeight:a,width:s.width+2,textStyle:e.axisTextStyle};e._tmAtlas.set(e.axisLabels[o],u),a+=u.height,i<u.width&&(i=u.width)}kl(e.tmContext,e.tickTextStyle);for(let s=0;s<r[o].length;s++)if(!e._tmAtlas.has(r[o][s])){const u=e.tmContext.measureText(r[o][s]),l={height:u.actualBoundingBoxAscent+2,startingHeight:a,width:u.width+2,textStyle:e.tickTextStyle};e._tmAtlas.set(r[o][s],l),a+=l.height,i<l.width&&(i=l.width)}}i=bn(i),a=bn(a),e._tmAtlas.forEach(o=>{o.tcoords=[0,(a-o.startingHeight-o.height)/a,o.width/i,(a-o.startingHeight-o.height)/a,o.width/i,(a-o.startingHeight)/a,0,(a-o.startingHeight)/a]}),e.tmCanvas.width=i,e.tmCanvas.height=a,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,i,a),e._tmAtlas.forEach((o,s)=>{kl(e.tmContext,o.textStyle),e.tmContext.fillText(s,1,o.startingHeight+o.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified()},t.onModified(()=>{e.forceUpdate=!0,t.update()}),t.setTickTextStyle=r=>{e.tickTextStyle={...e.tickTextStyle,...r},t.modified()},t.setAxisTextStyle=r=>{e.axisTextStyle={...e.axisTextStyle,...r},t.modified()},t.get_tmAtlas=()=>e._tmAtlas,t.getBounds=()=>(t.update(),Ye.setBounds(e.bounds,e.gridActor.getBounds()),Ye.scaleAboutCenter(e.bounds,e.boundsScaleFactor,e.boundsScaleFactor,e.boundsScaleFactor),e.bounds);const n=P.chain(t.setProperty,e.gridActor.setProperty);t.setProperty=r=>n(r)[0]}function ID(t,e,n){return{boundsScaleFactor:1.3,camera:null,dataBounds:[...Ye.INIT_BOUNDS],faceVisibilityAngle:8,gridLines:!0,axisLabels:null,axisTitlePixelOffset:35,tickLabelPixelOffset:12,generateTicks:N5,...n,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif",...n==null?void 0:n.axisTextStyle},tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif",...n==null?void 0:n.tickTextStyle}}}function M5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};sa.extend(t,e,ID(t,e,n)),e.lastFacesToDraw=[!1,!1,!1,!1,!1,!1],e.axisLabels=["X-Axis","Y-Axis","Z-Axis"],e.tickCounts=[],e.textValues=[],e.lastTickBounds=[],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.tmTexture=jc.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),e.gridMapper=ua.newInstance(),e.polyData=sn.newInstance(),e.gridMapper.setInputData(e.polyData),e.gridActor=sa.newInstance(),e.gridActor.setMapper(e.gridMapper),e.gridActor.setProperty(t.getProperty()),e.gridActor.setParentProp(t),e.textPolyData=sn.newInstance(),P.setGet(t,e,["axisTitlePixelOffset","boundsScaleFactor","faceVisibilityAngle","gridLines","tickLabelPixelOffset","generateTicks"]),P.setGetArray(t,e,["dataBounds"],6),P.setGetArray(t,e,["axisLabels"],3),P.get(t,e,["axisTextStyle","tickTextStyle","camera","tmTexture","textValues","textPolyData","tickCounts","gridActor"]),PD(t,e)}const zD=P.newInstance(M5,"vtkCubeAxesActor");var R5={newInstance:zD,extend:M5,newCubeAxesActorHelper:GD,defaultGenerateTicks:N5};function WD(t,e){e.classHierarchy.push("vtkOpenGLCubeAxesActor"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const i=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,a=e._openGLRenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([a.usize,a.vsize],i,e._openGLRenderWindow.getRenderable())}}}const jD={};function $D(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,jD,n),He.extend(t,e,n),e.CubeAxesActorHelper=R5.newCubeAxesActorHelper(),WD(t,e)}const HD=ze($D,"vtkOpenGLCubeAxesActor");Lt("vtkCubeAxesActor",HD);const ss={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2};var F5={ObjectType:ss};const{ObjectType:d0}=F5,KD={};function XD(t,e){e.classHierarchy.push("vtkOpenGLBufferObject");function n(s){switch(s){case d0.ELEMENT_ARRAY_BUFFER:return e.context.ELEMENT_ARRAY_BUFFER;case d0.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in e.context)return e.context.TEXTURE_BUFFER;case d0.ARRAY_BUFFER:default:return e.context.ARRAY_BUFFER}}let r=null,i=null,a=!0,o="";t.getType=()=>r,t.setType=s=>{r=s},t.getHandle=()=>i,t.isReady=()=>a===!1,t.generateBuffer=s=>{const u=n(s);return i===null&&(i=e.context.createBuffer(),r=s),n(r)===u},t.upload=(s,u)=>t.generateBuffer(u)?(e.context.bindBuffer(n(r),i),e.context.bufferData(n(r),s,e.context.STATIC_DRAW),e.allocatedGPUMemoryInBytes=s.length*s.BYTES_PER_ELEMENT,a=!1,!0):(o="Trying to upload array buffer to incompatible buffer.",!1),t.bind=()=>i?(e.context.bindBuffer(n(r),i),!0):!1,t.release=()=>i?(e.context.bindBuffer(n(r),null),!0):!1,t.releaseGraphicsResources=()=>{i!==null&&(e.context.bindBuffer(n(r),null),e.context.deleteBuffer(i),i=null,e.allocatedGPUMemoryInBytes=0)},t.setOpenGLRenderWindow=s=>{e._openGLRenderWindow!==s&&(t.releaseGraphicsResources(),e._openGLRenderWindow=s,e.context=null,s&&(e.context=e._openGLRenderWindow.getContext()))},t.getError=()=>o}const qD={objectType:d0.ARRAY_BUFFER,context:null,allocatedGPUMemoryInBytes:0};function L5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,qD,n),P.obj(t,e),P.get(t,e,["_openGLRenderWindow","allocatedGPUMemoryInBytes"]),P.moveToProtected(t,e,["openGLRenderWindow"]),XD(t,e)}const YD=P.newInstance(L5);var k5={newInstance:YD,extend:L5,...KD,...F5};const{vtkErrorMacro:Ad}=P;function JD(t,e){const n=new Float64Array(3);X3(n,e);const r=new Float64Array(16);return I3(r,ra(),t,n),r}function QD(t,e){return t===null||e===null?!1:!(Ag(t,[0,0,0])&&Ag(e,[1,1,1]))}function ZD(t,e){e.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),t.setType(ss.ARRAY_BUFFER),t.createVBO=function(n,r,i,a){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!n.getData()||!n.getData().length)return e.elementCount=0,0;e.blockSize=3,e.vertexOffset=0,e.normalOffset=0,e.tCoordOffset=0,e.tCoordComponents=0,e.colorComponents=0,e.colorOffset=0,e.customData=[];const s=a.points.getData();let u=null,l=null,p=null;const c=a.colors?a.colors.getNumberOfComponents():0,f=a.tcoords?a.tcoords.getNumberOfComponents():0;a.normals&&(e.normalOffset=4*e.blockSize,e.blockSize+=3,u=a.normals.getData()),a.customAttributes&&a.customAttributes.forEach(F=>{F&&(e.customData.push({data:F.getData(),offset:4*e.blockSize,components:F.getNumberOfComponents(),name:F.getName()}),e.blockSize+=F.getNumberOfComponents())}),a.tcoords&&(e.tCoordOffset=4*e.blockSize,e.tCoordComponents=f,e.blockSize+=f,l=a.tcoords.getData()),a.colors?(e.colorComponents=a.colors.getNumberOfComponents(),e.colorOffset=0,p=a.colors.getData(),e.colorBO||(e.colorBO=k5.newInstance()),e.colorBO.setOpenGLRenderWindow(e._openGLRenderWindow)):e.colorBO=null,e.stride=4*e.blockSize;let h=0,v=0,y=0,x=0,m=0,g=0,d;const S={anythingToPoints(F,B,$,H){for(let X=0;X<F;++X)d(B[$+X],H)},linesToWireframe(F,B,$,H){for(let X=0;X<F-1;++X)d(B[$+X],H),d(B[$+X+1],H)},polysToWireframe(F,B,$,H){if(F>2)for(let X=0;X<F;++X)d(B[$+X],H),d(B[$+(X+1)%F],H)},stripsToWireframe(F,B,$,H){if(F>2){for(let X=0;X<F-1;++X)d(B[$+X],H),d(B[$+X+1],H);for(let X=0;X<F-2;X++)d(B[$+X],H),d(B[$+X+2],H)}},polysToSurface(F,B,$,H){for(let X=0;X<F-2;X++)d(B[$+0],H),d(B[$+X+1],H),d(B[$+X+2],H)},stripsToSurface(F,B,$,H){for(let X=0;X<F-2;X++)d(B[$+X],H),d(B[$+X+1+X%2],H),d(B[$+X+1+(X+1)%2],H)}},T={anythingToPoints(F,B){return F},linesToWireframe(F,B){return F>1?(F-1)*2:0},polysToWireframe(F,B){return F>2?F*2:0},stripsToWireframe(F,B){return F>2?F*4-6:0},polysToSurface(F,B){return F>2?(F-2)*3:0},stripsToSurface(F,B,$){return F>2?(F-2)*3:0}};let C=null,w=null;i===zt.POINTS||r==="verts"?(C=S.anythingToPoints,w=T.anythingToPoints):i===zt.WIREFRAME||r==="lines"?(C=S[`${r}ToWireframe`],w=T[`${r}ToWireframe`]):(C=S[`${r}ToSurface`],w=T[`${r}ToSurface`]);const _=n.getData(),E=_.length;let D=0;for(let F=0;F<E;)D+=w(_[F],_),F+=_[F]+1;let O=null;const N=new Float32Array(D*e.blockSize);p&&(O=new Uint8Array(D*4));let R=0,M=0,A=0,G=0;for(let F=0;F<3;++F){const B=a.points.getRange(F),$=B[1]-B[0];A+=$*$;const H=.5*(B[1]+B[0]);G+=H*H}if(A>0&&(Math.abs(G)/A>1e6||Math.abs(Math.log10(A))>3||A===0&&G>1e6)){const F=new Float64Array(3),B=new Float64Array(3);for(let $=0;$<3;++$){const H=a.points.getRange($),X=H[1]-H[0];F[$]=.5*(H[1]+H[0]),B[$]=X>0?1/X:1}t.setCoordShiftAndScale(F,B)}else e.coordShiftAndScaleEnabled===!0&&t.setCoordShiftAndScale(null,null);if(o)if(!o.points&&!o.cells)o.points=new Int32Array(D),o.cells=new Int32Array(D);else{const F=new Int32Array(D+o.points.length);F.set(o.points),o.points=F;const B=new Int32Array(D+o.cells.length);B.set(o.cells),o.cells=B}let k=a.vertexOffset;d=function(B,$){if(o&&(o.points[k]=B,o.cells[k]=g+a.cellOffset),++k,h=B*3,e.coordShiftAndScaleEnabled?(N[R++]=(s[h++]-e.coordShift[0])*e.coordScale[0],N[R++]=(s[h++]-e.coordShift[1])*e.coordScale[1],N[R++]=(s[h++]-e.coordShift[2])*e.coordScale[2]):(N[R++]=s[h++],N[R++]=s[h++],N[R++]=s[h++]),u!==null&&(a.haveCellNormals?v=(g+a.cellOffset)*3:v=B*3,N[R++]=u[v++],N[R++]=u[v++],N[R++]=u[v++]),e.customData.forEach(H=>{m=B*H.components;for(let X=0;X<H.components;++X)N[R++]=H.data[m++]}),l!==null){a.useTCoordsPerCell?y=$*f:y=B*f;for(let H=0;H<f;++H)N[R++]=l[y++]}p!==null&&(a.haveCellScalars?x=(g+a.cellOffset)*c:x=B*c,O[M++]=p[x++],O[M++]=p[x++],O[M++]=p[x++],O[M++]=c===4?p[x++]:255)};for(let F=0;F<E;F+=_[F]+1,g++)C(_[F],_,F+1,g+a.cellOffset);return e.elementCount=D,t.upload(N,ss.ARRAY_BUFFER),e.colorBO&&(e.colorBOStride=4,e.colorBO.upload(O,ss.ARRAY_BUFFER)),g},t.setCoordShiftAndScale=(n,r)=>{if(n!==null&&(n.constructor!==Float64Array||n.length!==3)){Ad("Wrong type for coordShift, expected vec3 or null");return}if(r!==null&&(r.constructor!==Float64Array||r.length!==3)){Ad("Wrong type for coordScale, expected vec3 or null");return}(e.coordShift===null||n===null||!Ug(n,e.coordShift))&&(e.coordShift=n),(e.coordScale===null||r===null||!Ug(r,e.coordScale))&&(e.coordScale=r),e.coordShiftAndScaleEnabled=QD(e.coordShift,e.coordScale),e.coordShiftAndScaleEnabled?e.inverseShiftAndScaleMatrix=JD(e.coordShift,e.coordScale):e.inverseShiftAndScaleMatrix=null}}const eO={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[],coordShift:null,coordScale:null,coordShiftAndScaleEnabled:!1,inverseShiftAndScaleMatrix:null};function B5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,eO,n),k5.extend(t,e,n),P.setGet(t,e,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),P.get(t,e,["coordShift","coordScale","coordShiftAndScaleEnabled","inverseShiftAndScaleMatrix"]),ZD(t,e)}const tO=P.newInstance(B5);var nO={newInstance:tO,extend:B5};const{vtkErrorMacro:rO}=P;function iO(t,e){e.classHierarchy.push("vtkShader"),t.compile=()=>{let n=e.context.VERTEX_SHADER;if(!e.source||!e.source.length||e.shaderType==="Unknown")return!1;switch(e.handle!==0&&(e.context.deleteShader(e.handle),e.handle=0),e.shaderType){case"Fragment":n=e.context.FRAGMENT_SHADER;break;case"Vertex":default:n=e.context.VERTEX_SHADER;break}if(e.handle=e.context.createShader(n),e.context.shaderSource(e.handle,e.source),e.context.compileShader(e.handle),!e.context.getShaderParameter(e.handle,e.context.COMPILE_STATUS)){const i=e.context.getShaderInfoLog(e.handle);return rO(`Error compiling shader '${e.source}': ${i}`),e.context.deleteShader(e.handle),e.handle=0,!1}return!0},t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(e.context.deleteShader(e.handle),e.handle=0,e.dirty=!0)}}const aO={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function V5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,aO,n),P.obj(t,e),P.setGet(t,e,["shaderType","source","error","handle","context"]),iO(t,e)}const oO=P.newInstance(V5,"vtkShader");var Bl={newInstance:oO,extend:V5};const{vtkErrorMacro:Qn}=P;function sO(t,e,n,r){const i=typeof n=="string"?n:n.join(`
`),a=r===!1?e:new RegExp(e,"g"),o=t.replace(a,i);return{replace:o!==i,result:o}}function uO(t,e){e.classHierarchy.push("vtkShaderProgram"),t.compileShader=()=>e.vertexShader.compile()?e.fragmentShader.compile()?!t.attachShader(e.vertexShader)||!t.attachShader(e.fragmentShader)?(Qn(e.error),0):t.link()?(t.setCompiled(!0),1):(Qn(`Links failed: ${e.error}`),0):(Qn(e.fragmentShader.getSource().split(`
`).map((n,r)=>`${r}: ${n}`).join(`
`)),Qn(e.fragmentShader.getError()),0):(Qn(e.vertexShader.getSource().split(`
`).map((n,r)=>`${r}: ${n}`).join(`
`)),Qn(e.vertexShader.getError()),0),t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(t.release(),e.vertexShaderHandle!==0&&(e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=0),e.fragmentShaderHandle!==0&&(e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=0),e.context.deleteProgram(e.handle),e.handle=0,t.setCompiled(!1))},t.bind=()=>!e.linked&&!t.link()?!1:(e.context.useProgram(e.handle),t.setBound(!0),!0),t.isBound=()=>!!e.bound,t.release=()=>{e.context.useProgram(null),t.setBound(!1)},t.setContext=n=>{e.vertexShader.setContext(n),e.fragmentShader.setContext(n),e.geometryShader.setContext(n)},t.link=()=>{if(e.linked)return!0;if(e.handle===0)return e.error="Program has not been initialized, and/or does not have shaders.",!1;if(e.uniformLocs={},e.context.linkProgram(e.handle),!e.context.getProgramParameter(e.handle,e.context.LINK_STATUS)){const r=e.context.getProgramInfoLog(e.handle);return Qn(`Error linking shader ${r}`),e.handle=0,!1}return t.setLinked(!0),e.attributeLocs={},!0},t.setUniformMatrix=(n,r)=>{const i=t.findUniform(n);if(i===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;const a=new Float32Array(r);return e.context.uniformMatrix4fv(i,!1,a),!0},t.setUniformMatrix3x3=(n,r)=>{const i=t.findUniform(n);if(i===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;const a=new Float32Array(r);return e.context.uniformMatrix3fv(i,!1,a),!0},t.setUniformf=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1f(i,r),!0)},t.setUniformfv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1fv(i,r),!0)},t.setUniformi=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1i(i,r),!0)},t.setUniformiv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1iv(i,r),!0)},t.setUniform2f=(n,r,i)=>{const a=t.findUniform(n);if(a===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(i===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2f(a,r,i),!0},t.setUniform2fv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform2fv(i,r),!0)},t.setUniform2i=(n,r,i)=>{const a=t.findUniform(n);if(a===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(i===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2i(a,r,i),!0},t.setUniform2iv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform2iv(i,r),!0)},t.setUniform3f=(n,r,i,a)=>{const o=t.findUniform(n);if(o===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(a===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(o,r,i,a),!0},t.setUniform3fArray=(n,r)=>{const i=t.findUniform(n);if(i===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(!Array.isArray(r)||r.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(i,r[0],r[1],r[2]),!0},t.setUniform3fv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform3fv(i,r),!0)},t.setUniform3i=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];let s=a;if(s.length===1&&Array.isArray(s[0])&&(s=s[0]),s.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3i(r,s[0],s[1],s[2]),!0},t.setUniform3iv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform3iv(i,r),!0)},t.setUniform4f=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];let s=a;if(s.length===1&&Array.isArray(s[0])&&(s=s[0]),s.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4f(r,s[0],s[1],s[2],s[3]),!0},t.setUniform4fv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform4fv(i,r),!0)},t.setUniform4i=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];let s=a;if(s.length===1&&Array.isArray(s[0])&&(s=s[0]),s.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4i(r,s[0],s[1],s[2],s[3]),!0},t.setUniform4iv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform4iv(i,r),!0)},t.findUniform=n=>{if(!n||!e.linked)return-1;let r=e.uniformLocs[n];return r!==void 0?r:(r=e.context.getUniformLocation(e.handle,n),r===null?(e.error=`Uniform ${n} not found in current shader program.`,e.uniformLocs[n]=-1,-1):(e.uniformLocs[n]=r,r))},t.isUniformUsed=n=>{if(!n)return!1;let r=e.uniformLocs[n];return r!==void 0?r!==null:e.linked?(r=e.context.getUniformLocation(e.handle,n),e.uniformLocs[n]=r,r!==null):(Qn("attempt to find uniform when the shader program is not linked"),!1)},t.isAttributeUsed=n=>{if(!n)return!1;if(n in e.attributeLocs)return!0;if(!e.linked)return Qn("attempt to find uniform when the shader program is not linked"),!1;const r=e.context.getAttribLocation(e.handle,n);return r===-1?!1:(e.attributeLocs[n]=r,!0)},t.attachShader=n=>{if(n.getHandle()===0)return e.error="Shader object was not initialized, cannot attach it.",!1;if(n.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;if(e.handle===0){const r=e.context.createProgram();if(r===0)return e.error="Could not create shader program.",!1;e.handle=r,e.linked=!1}return n.getShaderType()==="Vertex"&&(e.vertexShaderHandle!==0&&e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=n.getHandle()),n.getShaderType()==="Fragment"&&(e.fragmentShaderHandle!==0&&e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=n.getHandle()),e.context.attachShader(e.handle,n.getHandle()),t.setLinked(!1),!0},t.detachShader=n=>{if(n.getHandle()===0)return e.error="shader object was not initialized, cannot attach it.",!1;if(n.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;switch(e.handle===0&&(e.error="This shader program has not been initialized yet."),n.getShaderType()){case"Vertex":return e.vertexShaderHandle!==n.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,n.getHandle()),e.vertexShaderHandle=0,e.linked=!1,!0);case"Fragment":return e.fragmentShaderHandle!==n.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,n.getHandle()),e.fragmentShaderHandle=0,e.linked=!1,!0);default:return!1}},t.setContext=n=>{e.context=n,e.vertexShader.setContext(n),e.fragmentShader.setContext(n),e.geometryShader.setContext(n)},t.setLastCameraMTime=n=>{e.lastCameraMTime=n}}const cO={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function A5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,cO,n),e.attributesLocs={},e.uniformLocs={},e.vertexShader=Bl.newInstance(),e.vertexShader.setShaderType("Vertex"),e.fragmentShader=Bl.newInstance(),e.fragmentShader.setShaderType("Fragment"),e.geometryShader=Bl.newInstance(),e.geometryShader.setShaderType("Geometry"),P.obj(t,e),P.get(t,e,["lastCameraMTime"]),P.setGet(t,e,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),uO(t,e)}const lO=P.newInstance(A5,"vtkShaderProgram");var Q={newInstance:lO,extend:A5,substitute:sO};function fO(t,e){e.classHierarchy.push("vtkOpenGLVertexArrayObject"),t.exposedMethod=()=>{},t.initialize=()=>{e.instancingExtension=null,e._openGLRenderWindow.getWebgl2()||(e.instancingExtension=e.context.getExtension("ANGLE_instanced_arrays")),!e.forceEmulation&&e._openGLRenderWindow&&e._openGLRenderWindow.getWebgl2()?(e.extension=null,e.supported=!0,e.handleVAO=e.context.createVertexArray()):(e.extension=e.context.getExtension("OES_vertex_array_object"),!e.forceEmulation&&e.extension?(e.supported=!0,e.handleVAO=e.extension.createVertexArrayOES()):e.supported=!1)},t.isReady=()=>e.handleVAO!==0||e.supported===!1,t.bind=()=>{if(t.isReady()||t.initialize(),t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(e.handleVAO):e.context.bindVertexArray(e.handleVAO);else if(t.isReady()){const n=e.context;for(let r=0;r<e.buffers.length;++r){const i=e.buffers[r];e.context.bindBuffer(n.ARRAY_BUFFER,i.buffer);for(let a=0;a<i.attributes.length;++a){const o=i.attributes[a],s=o.isMatrix?o.size:1;for(let u=0;u<s;++u)n.enableVertexAttribArray(o.index+u),n.vertexAttribPointer(o.index+u,o.size,o.type,o.normalize,o.stride,o.offset+o.stride*u/o.size),o.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(o.index+u,1):n.vertexAttribDivisor(o.index+u,1))}}}},t.release=()=>{if(t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(null):e.context.bindVertexArray(null);else if(t.isReady()){const n=e.context;for(let r=0;r<e.buffers.length;++r){const i=e.buffers[r];e.context.bindBuffer(n.ARRAY_BUFFER,i.buffer);for(let a=0;a<i.attributes.length;++a){const o=i.attributes[a],s=o.isMatrix?o.size:1;for(let u=0;u<s;++u)n.enableVertexAttribArray(o.index+u),n.vertexAttribPointer(o.index+u,o.size,o.type,o.normalize,o.stride,o.offset+o.stride*u/o.size),o.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(o.index+u,0):n.vertexAttribDivisor(o.index+u,0)),n.disableVertexAttribArray(o.index+u)}}}},t.shaderProgramChanged=()=>{t.release(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.handleProgram=0},t.releaseGraphicsResources=()=>{t.shaderProgramChanged(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.supported=!0,e.handleProgram=0},t.addAttributeArray=(n,r,i,a,o,s,u,l)=>t.addAttributeArrayWithDivisor(n,r,i,a,o,s,u,l,0,!1),t.addAttributeArrayWithDivisor=(n,r,i,a,o,s,u,l,p,c)=>{if(!n||!n.isBound()||r.getHandle()===0||r.getType()!==ss.ARRAY_BUFFER||(e.handleProgram===0&&(e.handleProgram=n.getHandle()),t.isReady()||t.initialize(),!t.isReady()||e.handleProgram!==n.getHandle()))return!1;const f=e.context,h={};if(h.name=i,h.index=f.getAttribLocation(e.handleProgram,i),h.offset=a,h.stride=o,h.type=s,h.size=u,h.normalize=l,h.isMatrix=c,h.divisor=p,h.Index===-1)return!1;if(r.bind(),f.enableVertexAttribArray(h.index),f.vertexAttribPointer(h.index,h.size,h.type,h.normalize,h.stride,h.offset),p>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(h.index,1):f.vertexAttribDivisor(h.index,1)),h.buffer=r.getHandle(),!e.supported){let v=!1;for(let y=0;y<e.buffers.length;++y){const x=e.buffers[y];if(x.buffer===h.buffer){v=!0;let m=!1;for(let g=0;g<x.attributes.length;++g)x.attributes[g].name===i&&(m=!0,x.attributes[g]=h);m||x.attributes.push(h)}}v||e.buffers.push({buffer:h.buffer,attributes:[h]})}return!0},t.addAttributeMatrixWithDivisor=(n,r,i,a,o,s,u,l,p)=>{const c=t.addAttributeArrayWithDivisor(n,r,i,a,o,s,u,l,p,!0);if(!c)return c;const f=e.context,h=f.getAttribLocation(e.handleProgram,i);for(let v=1;v<u;v++)f.enableVertexAttribArray(h+v),f.vertexAttribPointer(h+v,u,s,l,o,a+o*v/u),p>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(h+v,1):f.vertexAttribDivisor(h+v,1));return!0},t.removeAttributeArray=n=>{if(!t.isReady()||e.handleProgram===0)return!1;if(!e.supported)for(let r=0;r<e.buffers.length;++r){const i=e.buffers[r];for(let a=0;a<i.attributes.length;++a)if(i.attributes[a].name===n)return i.attributes.splice(a,1),i.attributes.length||e.buffers.splice(r,1),!0}return!0},t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))}}const pO={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null};function U5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,pO,n),e.buffers=[],P.obj(t,e),P.get(t,e,["supported"]),P.setGet(t,e,["forceEmulation"]),fO(t,e)}const hO=P.newInstance(U5,"vtkOpenGLVertexArrayObject");var c1={newInstance:hO,extend:U5};const $r={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6};function gO(t,e){e.classHierarchy.push("vtkOpenGLHelper"),t.setOpenGLRenderWindow=n=>{e.context=n.getContext(),e.program.setContext(e.context),e.VAO.setOpenGLRenderWindow(n),e.CABO.setOpenGLRenderWindow(n)},t.releaseGraphicsResources=n=>{e.VAO.releaseGraphicsResources(),e.CABO.releaseGraphicsResources(),e.CABO.setElementCount(0)},t.drawArrays=(n,r,i,a)=>{if(e.CABO.getElementCount()){const o=t.getOpenGLMode(i),s=t.haveWideLines(n,r),u=e.context,l=u.getParameter(u.DEPTH_WRITEMASK);e.pointPicking&&u.depthMask(!1),o===u.LINES&&s?(t.updateShaders(n,r,a),u.drawArraysInstanced(o,0,e.CABO.getElementCount(),2*Math.ceil(r.getProperty().getLineWidth()))):(u.lineWidth(r.getProperty().getLineWidth()),t.updateShaders(n,r,a),u.drawArrays(o,0,e.CABO.getElementCount()),u.lineWidth(1));const c=(o===u.POINTS?1:0)||(o===u.LINES?2:3);return e.pointPicking&&u.depthMask(l),e.CABO.getElementCount()/c}return 0},t.getOpenGLMode=n=>{if(e.pointPicking)return e.context.POINTS;const r=e.primitiveType;return n===zt.POINTS||r===$r.Points?e.context.POINTS:n===zt.WIREFRAME||r===$r.Lines||r===$r.TrisEdges||r===$r.TriStripsEdges?e.context.LINES:e.context.TRIANGLES},t.haveWideLines=(n,r)=>r.getProperty().getLineWidth()>1?!(e.CABO.getOpenGLRenderWindow()&&e.CABO.getOpenGLRenderWindow().getHardwareMaximumLineWidth()>=r.getProperty().getLineWidth()):!1,t.getNeedToRebuildShaders=(n,r,i)=>!!(i.getNeedToRebuildShaders(t,n,r)||t.getProgram()===0||t.getShaderSourceTime().getMTime()<i.getMTime()||t.getShaderSourceTime().getMTime()<r.getMTime()),t.updateShaders=(n,r,i)=>{if(t.getNeedToRebuildShaders(n,r,i)){const a={Vertex:null,Fragment:null,Geometry:null};i.buildShaders(a,n,r);const o=e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgramArray(a.Vertex,a.Fragment,a.Geometry);o!==t.getProgram()&&(t.setProgram(o),t.getVAO().releaseGraphicsResources()),t.getShaderSourceTime().modified()}else e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgram(t.getProgram());t.getVAO().bind(),i.setMapperShaderParameters(t,n,r),i.setPropertyShaderParameters(t,n,r),i.setCameraShaderParameters(t,n,r),i.setLightingShaderParameters(t,n,r),i.invokeShaderCallbacks(t,n,r)},t.setMapperShaderParameters=(n,r,i)=>{if(t.haveWideLines(n,r)){t.getProgram().setUniform2f("viewportSize",i.usize,i.vsize);const a=parseFloat(r.getProperty().getLineWidth()),o=a/2;t.getProgram().setUniformf("lineWidthStepSize",a/Math.ceil(a)),t.getProgram().setUniformf("halfLineWidth",o)}e.primitiveType===$r.Points||r.getProperty().getRepresentation()===zt.POINTS?t.getProgram().setUniformf("pointSize",r.getProperty().getPointSize()):e.pointPicking&&t.getProgram().setUniformf("pointSize",t.getPointPickingPrimitiveSize())},t.replaceShaderPositionVC=(n,r,i)=>{let a=n.Vertex;a=Q.substitute(a,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform float pointSize;"]).result,a=Q.substitute(a,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = pointSize;"],!1).result,t.getOpenGLMode(i.getProperty().getRepresentation())===e.context.LINES&&t.haveWideLines(r,i)&&(a=Q.substitute(a,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform vec2 viewportSize;","uniform float lineWidthStepSize;","uniform float halfLineWidth;"]).result,a=Q.substitute(a,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl"," if (halfLineWidth > 0.0)","   {","   float offset = float(gl_InstanceID / 2) * lineWidthStepSize - halfLineWidth;","   vec4 tmpPos = gl_Position;","   vec3 tmpPos2 = tmpPos.xyz / tmpPos.w;","   tmpPos2.x = tmpPos2.x + 2.0 * mod(float(gl_InstanceID), 2.0) * offset / viewportSize[0];","   tmpPos2.y = tmpPos2.y + 2.0 * mod(float(gl_InstanceID + 1), 2.0) * offset / viewportSize[1];","   gl_Position = vec4(tmpPos2.xyz * tmpPos.w, tmpPos.w);","   }"]).result),n.Vertex=a},t.getPointPickingPrimitiveSize=()=>e.primitiveType===$r.Points?2:e.primitiveType===$r.Lines?4:6,t.getAllocatedGPUMemoryInBytes=()=>t.getCABO().getAllocatedGPUMemoryInBytes()}const dO={context:null,program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0,pointPicking:!1};function G5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dO,n),P.obj(t,e),e.shaderSourceTime={},P.obj(e.shaderSourceTime),e.attributeUpdateTime={},P.obj(e.attributeUpdateTime),P.setGet(t,e,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType","pointPicking"]),e.program=Q.newInstance(),e.VAO=c1.newInstance(),e.CABO=nO.newInstance(),gO(t,e)}const vO=P.newInstance(G5);var dr={newInstance:vO,extend:G5,primTypes:$r};const Ls={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},Se={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5};var P5={Wrap:Ls,Filter:Se};const I5=new Float32Array(1),yO=new Int32Array(I5.buffer);function mO(t){I5[0]=t;const e=yO[0];let n=e>>16&32768,r=e>>12&2047;const i=e>>23&255;return i<103?n:i>142?(n|=31744,n|=(i===255?0:1)&&e&8388607,n):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1),n):(n|=i-112<<10|r>>1,n+=r&1,n)}function xO(t){const e=(t&32768)>>15,n=(t&31744)>>10,r=t&1023;return n===0?(e?-1:1)*2**-14*(r/2**10):n===31?r?NaN:(e?-1:1)*(1/0):(e?-1:1)*2**(n-15)*(1+r/2**10)}var $n={fromHalf:xO,toHalf:mO};const{Wrap:wr,Filter:kt}=P5,{VtkDataTypes:Pe}=Ee,{vtkDebugMacro:Vl,vtkErrorMacro:ya,vtkWarningMacro:Ud}=un,{toHalf:SO}=$n;function TO(t,e){e.classHierarchy.push("vtkOpenGLTexture"),t.render=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(u?e._openGLRenderWindow=u:(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow")),e.context=e._openGLRenderWindow.getContext(),e.renderable.getInterpolate()?(e.generateMipmap?t.setMinificationFilter(kt.LINEAR_MIPMAP_LINEAR):t.setMinificationFilter(kt.LINEAR),t.setMagnificationFilter(kt.LINEAR)):(t.setMinificationFilter(kt.NEAREST),t.setMagnificationFilter(kt.NEAREST)),e.renderable.getRepeat()&&(t.setWrapR(wr.REPEAT),t.setWrapS(wr.REPEAT),t.setWrapT(wr.REPEAT)),e.renderable.getInputData()&&e.renderable.setImage(null),!e.handle||e.renderable.getMTime()>e.textureBuildTime.getMTime()){if(e.renderable.getImage()!==null&&(e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(kt.LINEAR_MIPMAP_LINEAR)),e.renderable.getImage()&&e.renderable.getImageLoaded()&&(t.create2DFromImage(e.renderable.getImage()),t.activate(),t.sendParameters(),e.textureBuildTime.modified())),e.renderable.getCanvas()!==null){e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(kt.LINEAR_MIPMAP_LINEAR));const p=e.renderable.getCanvas();t.create2DFromRaw(p.width,p.height,4,Pe.UNSIGNED_CHAR,p,!0),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}if(e.renderable.getJsImageData()!==null){const p=e.renderable.getJsImageData();e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(kt.LINEAR_MIPMAP_LINEAR)),t.create2DFromRaw(p.width,p.height,4,Pe.UNSIGNED_CHAR,p.data,!0),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}const l=e.renderable.getInputData(0);if(l&&l.getPointData().getScalars()){const p=l.getExtent(),c=l.getPointData().getScalars(),f=[];for(let h=0;h<e.renderable.getNumberOfInputPorts();++h){const v=e.renderable.getInputData(h),y=v?v.getPointData().getScalars().getData():null;y&&f.push(y)}e.renderable.getInterpolate()&&c.getNumberOfComponents()===4&&(e.generateMipmap=!0,t.setMinificationFilter(kt.LINEAR_MIPMAP_LINEAR)),f.length%6===0?t.createCubeFromRaw(p[1]-p[0]+1,p[3]-p[2]+1,c.getNumberOfComponents(),c.getDataType(),f):t.create2DFromRaw(p[1]-p[0]+1,p[3]-p[2]+1,c.getNumberOfComponents(),c.getDataType(),c.getData()),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}}e.handle&&t.activate()},t.destroyTexture=()=>{t.deactivate(),e.context&&e.handle&&e.context.deleteTexture(e.handle),e.handle=0,e.numberOfDimensions=0,e.target=0,e.components=0,e.width=0,e.height=0,e.depth=0,t.resetFormatAndType()},t.createTexture=()=>{e.handle||(e.handle=e.context.createTexture(),e.target&&(e.context.bindTexture(e.target,e.handle),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.bindTexture(e.target,null)))},t.getTextureUnit=()=>e._openGLRenderWindow?e._openGLRenderWindow.getTextureUnitForTexture(t):-1,t.activate=()=>{e._openGLRenderWindow.activateTexture(t),t.bind()},t.deactivate=()=>{e._openGLRenderWindow&&e._openGLRenderWindow.deactivateTexture(t)},t.releaseGraphicsResources=u=>{u&&e.handle&&(u.activateTexture(t),u.deactivateTexture(t),e.context.deleteTexture(e.handle),e.handle=0,e.numberOfDimensions=0,e.target=0,e.internalFormat=0,e.format=0,e.openGLDataType=0,e.components=0,e.width=0,e.height=0,e.depth=0,e.allocatedGPUMemoryInBytes=0),e.shaderProgram&&(e.shaderProgram.releaseGraphicsResources(u),e.shaderProgram=null)},t.bind=()=>{e.context.bindTexture(e.target,e.handle),e.autoParameters&&t.getMTime()>e.sendParametersTime.getMTime()&&t.sendParameters()},t.isBound=()=>{let u=!1;if(e.context&&e.handle){let l=0;switch(e.target){case e.context.TEXTURE_2D:l=e.context.TEXTURE_BINDING_2D;break;default:Ud("impossible case");break}u=e.context.getIntegerv(l)===e.handle}return u},t.sendParameters=()=>{e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e._openGLRenderWindow.getWebgl2()&&(e.context.texParameteri(e.target,e.context.TEXTURE_BASE_LEVEL,e.baseLevel),e.context.texParameteri(e.target,e.context.TEXTURE_MAX_LEVEL,e.maxLevel)),e.sendParametersTime.modified()},t.getInternalFormat=(u,l)=>(e._forceInternalFormat||(e.internalFormat=t.getDefaultInternalFormat(u,l)),e.internalFormat||Vl(`Unable to find suitable internal format for T=${u} NC= ${l}`),[e.context.R32F,e.context.RG32F,e.context.RGB32F,e.context.RGBA32F].includes(e.internalFormat)&&!e.context.getExtension("OES_texture_float_linear")&&Ud("Failed to load OES_texture_float_linear. Texture filtering is not available for *32F internal formats."),e.internalFormat),t.getDefaultInternalFormat=(u,l)=>{let p=0;return p=e._openGLRenderWindow.getDefaultTextureInternalFormat(u,l,e.oglNorm16Ext,t.useHalfFloat()),p||(p||(Vl("Unsupported internal texture type!"),Vl(`Unable to find suitable internal format for T=${u} NC= ${l}`)),p)},t.useHalfFloat=()=>e.enableUseHalfFloat&&e.canUseHalfFloat,t.setInternalFormat=u=>{e._forceInternalFormat=!0,u!==e.internalFormat&&(e.internalFormat=u,t.modified())},t.getFormat=(u,l)=>(e.format=t.getDefaultFormat(u,l),e.format),t.getDefaultFormat=(u,l)=>{if(e._openGLRenderWindow.getWebgl2())switch(l){case 1:return e.context.RED;case 2:return e.context.RG;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}else switch(l){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}},t.resetFormatAndType=()=>{e.format=0,e.internalFormat=0,e._forceInternalFormat=!1,e.openGLDataType=0},t.getDefaultDataType=u=>{const l=t.useHalfFloat();if(e._openGLRenderWindow.getWebgl2())switch(u){case Pe.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case(e.oglNorm16Ext&&!l&&Pe.SHORT):return e.context.SHORT;case(e.oglNorm16Ext&&!l&&Pe.UNSIGNED_SHORT):return e.context.UNSIGNED_SHORT;case(l&&Pe.SHORT):return e.context.HALF_FLOAT;case(l&&Pe.UNSIGNED_SHORT):return e.context.HALF_FLOAT;case Pe.FLOAT:case Pe.VOID:default:return e.context.FLOAT}switch(u){case Pe.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case Pe.FLOAT:case Pe.VOID:default:if(e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear"))return e.context.FLOAT;{const p=e.context.getExtension("OES_texture_half_float");if(p&&e.context.getExtension("OES_texture_half_float_linear"))return p.HALF_FLOAT_OES}return e.context.UNSIGNED_BYTE}},t.getOpenGLDataType=function(u){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!e.openGLDataType||l)&&(e.openGLDataType=t.getDefaultDataType(u)),e.openGLDataType},t.getShiftAndScale=()=>{let u=0,l=1;switch(e.openGLDataType){case e.context.BYTE:l=127.5,u=l-128;break;case e.context.UNSIGNED_BYTE:l=255,u=0;break;case e.context.SHORT:l=32767.5,u=l-32768;break;case e.context.UNSIGNED_SHORT:l=65536,u=0;break;case e.context.INT:l=21474836475e-1,u=l-2147483648;break;case e.context.UNSIGNED_INT:l=4294967295,u=0;break;case e.context.FLOAT:}return{shift:u,scale:l}},t.getOpenGLFilterMode=u=>{switch(u){case kt.NEAREST:return e.context.NEAREST;case kt.LINEAR:return e.context.LINEAR;case kt.NEAREST_MIPMAP_NEAREST:return e.context.NEAREST_MIPMAP_NEAREST;case kt.NEAREST_MIPMAP_LINEAR:return e.context.NEAREST_MIPMAP_LINEAR;case kt.LINEAR_MIPMAP_NEAREST:return e.context.LINEAR_MIPMAP_NEAREST;case kt.LINEAR_MIPMAP_LINEAR:return e.context.LINEAR_MIPMAP_LINEAR;default:return e.context.NEAREST}},t.getOpenGLWrapMode=u=>{switch(u){case wr.CLAMP_TO_EDGE:return e.context.CLAMP_TO_EDGE;case wr.REPEAT:return e.context.REPEAT;case wr.MIRRORED_REPEAT:return e.context.MIRRORED_REPEAT;default:return e.context.CLAMP_TO_EDGE}},t.updateArrayDataTypeForGL=function(u,l){let p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const c=[];let f=e.width*e.height*e.components;if(p&&(f*=e.depth),u!==Pe.FLOAT&&e.openGLDataType===e.context.FLOAT)for(let v=0;v<l.length;v++)if(l[v]){const y=l[v].length>f?l[v].subarray(0,f):l[v];c.push(new Float32Array(y))}else c.push(null);if(u!==Pe.UNSIGNED_CHAR&&e.openGLDataType===e.context.UNSIGNED_BYTE)for(let v=0;v<l.length;v++)if(l[v]){const y=l[v].length>f?l[v].subarray(0,f):l[v];c.push(new Uint8Array(y))}else c.push(null);let h=!1;if(e._openGLRenderWindow.getWebgl2())h=e.openGLDataType===e.context.HALF_FLOAT;else{const v=e.context.getExtension("OES_texture_half_float");h=v&&e.openGLDataType===v.HALF_FLOAT_OES}if(h)for(let v=0;v<l.length;v++)if(l[v]){const y=new Uint16Array(f),x=l[v];for(let m=0;m<f;m++)y[m]=SO(x[m]);c.push(y)}else c.push(null);if(c.length===0)for(let v=0;v<l.length;v++)c.push(l[v]);return c};function n(u){if(e._openGLRenderWindow.getWebgl2())return u;const l=[],p=e.width,c=e.height,f=e.components;if(u&&(!Io(p)||!Io(c))){const h=e.context.getExtension("OES_texture_half_float"),v=bn(p),y=bn(c),x=v*y*e.components;for(let m=0;m<u.length;m++)if(u[m]!==null){let g=null;const d=c/y,S=p/v;let T=!1;e.openGLDataType===e.context.FLOAT?g=new Float32Array(x):h&&e.openGLDataType===h.HALF_FLOAT_OES?(g=new Uint16Array(x),T=!0):g=new Uint8Array(x);for(let C=0;C<y;C++){const w=C*v*f,_=C*d;let E=Math.floor(_),D=Math.ceil(_);D>=c&&(D=c-1);const O=_-E,N=1-O;E=E*p*f,D=D*p*f;for(let R=0;R<v;R++){const M=R*f,A=R*S;let G=Math.floor(A),j=Math.ceil(A);j>=p&&(j=p-1);const k=A-G;G*=f,j*=f;for(let F=0;F<f;F++)T?g[w+M+F]=$n.toHalf($n.fromHalf(u[m][E+G+F])*N*(1-k)+$n.fromHalf(u[m][E+j+F])*N*k+$n.fromHalf(u[m][D+G+F])*O*(1-k)+$n.fromHalf(u[m][D+j+F])*O*k):g[w+M+F]=u[m][E+G+F]*N*(1-k)+u[m][E+j+F]*N*k+u[m][D+G+F]*O*(1-k)+u[m][D+j+F]*O*k}}l.push(g),e.width=v,e.height=y}else l.push(null)}if(l.length===0)for(let h=0;h<u.length;h++)l.push(u[h]);return l}function r(u){var l;return e._openGLRenderWindow?e.resizable||(l=e.renderable)!=null&&l.getResizable()?!1:e._openGLRenderWindow.getWebgl2()?!(e._openGLRenderWindow.getGLInformations().RENDERER.value.match(/WebKit/gi)&&navigator.platform.match(/Mac/gi)&&e.oglNorm16Ext&&(u===Pe.UNSIGNED_SHORT||u===Pe.SHORT)):!1:!1}t.create2DFromRaw=function(u,l,p,c,f){let h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;if(t.getOpenGLDataType(c,!0),t.getInternalFormat(c,p),t.getFormat(c,p),!e.internalFormat||!e.format||!e.openGLDataType)return ya("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=p,e.width=u,e.height=l,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const v=[f],y=t.updateArrayDataTypeForGL(c,v),x=n(y);return e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,h),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),r(c)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),x[0]!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,x[0])):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,x[0]),e.generateMipmap&&e.context.generateMipmap(e.target),h&&e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,!1),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*p*e._openGLRenderWindow.getDefaultTextureByteSize(c,e.oglNorm16Ext,t.useHalfFloat()),t.deactivate(),!0},t.createCubeFromRaw=(u,l,p,c,f)=>{if(t.getOpenGLDataType(c),t.getInternalFormat(c,p),t.getFormat(c,p),!e.internalFormat||!e.format||!e.openGLDataType)return ya("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_CUBE_MAP,e.components=p,e.width=u,e.height=l,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),e.maxLevel=f.length/6-1,t.createTexture(),t.bind();const h=t.updateArrayDataTypeForGL(c,f),v=n(h),y=[];let x=e.width,m=e.height;for(let g=0;g<v.length;g++){g%6===0&&g!==0&&(x/=2,m/=2),y[g]=xo(c,m*x*e.components);for(let d=0;d<m;++d){const S=d*x*e.components,T=(m-d-1)*x*e.components;y[g].set(v[g].slice(T,T+x*e.components),S)}}e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),r(c)&&e.context.texStorage2D(e.target,6,e.internalFormat,e.width,e.height);for(let g=0;g<6;g++){let d=0,S=e.width,T=e.height;for(;S>=1&&T>=1;){let C=null;d<=e.maxLevel&&(C=y[6*d+g]),r(c)?C!=null&&e.context.texSubImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+g,d,0,0,S,T,e.format,e.openGLDataType,C):e.context.texImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+g,d,e.internalFormat,S,T,0,e.format,e.openGLDataType,C),d++,S/=2,T/=2}}return e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*p*e._openGLRenderWindow.getDefaultTextureByteSize(c,e.oglNorm16Ext,t.useHalfFloat()),t.deactivate(),!0},t.createDepthFromRaw=(u,l,p,c)=>(t.getOpenGLDataType(p),e.format=e.context.DEPTH_COMPONENT,e._openGLRenderWindow.getWebgl2()?p===Pe.FLOAT?e.internalFormat=e.context.DEPTH_COMPONENT32F:e.internalFormat=e.context.DEPTH_COMPONENT16:e.internalFormat=e.context.DEPTH_COMPONENT,!e.internalFormat||!e.format||!e.openGLDataType?(ya("Failed to determine texture parameters."),!1):(e.target=e.context.TEXTURE_2D,e.components=1,e.width=u,e.height=l,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),r(p)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),c!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,c)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,c),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(p,e.oglNorm16Ext,t.useHalfFloat()),t.deactivate(),!0)),t.create2DFromImage=u=>{if(t.getOpenGLDataType(Pe.UNSIGNED_CHAR),t.getInternalFormat(Pe.UNSIGNED_CHAR,4),t.getFormat(Pe.UNSIGNED_CHAR,4),!e.internalFormat||!e.format||!e.openGLDataType)return ya("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=4,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1);const l=!e._openGLRenderWindow.getWebgl2()&&(!Io(u.width)||!Io(u.height)),p=document.createElement("canvas");p.width=l?bn(u.width):u.width,p.height=l?bn(u.height):u.height,e.width=p.width,e.height=p.height;const c=p.getContext("2d");c.translate(0,p.height),c.scale(1,-1),c.drawImage(u,0,0,u.width,u.height,0,0,p.width,p.height);const f=p;return r(Pe.UNSIGNED_CHAR)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),f!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,f)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,f),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(Pe.UNSIGNED_CHAR,e.oglNorm16Ext,t.useHalfFloat()),t.deactivate(),!0};function i(u,l,p){const c=new Array(p),f=new Array(p);for(let h=0;h<p;++h)c[h]=u[h],f[h]=l[h]-u[h]||1;return{scale:f,offset:c}}function a(u,l){for(let p=0;p<u.length;p++){const c=u[p],f=l[p]+c;if(c<-2048||c>2048||f<-2048||f>2048)return!1}return!0}function o(u,l,p,c){t.getOpenGLDataType(u);const f=a(l,p)||c;let h=!1;if(e._openGLRenderWindow.getWebgl2())h=e.openGLDataType===e.context.FLOAT&&e.context.getExtension("OES_texture_float_linear")===null&&f||e.openGLDataType===e.context.HALF_FLOAT;else{const v=e.context.getExtension("OES_texture_half_float");h=v&&e.openGLDataType===v.HALF_FLOAT_OES}e.canUseHalfFloat=h&&f}function s(u,l){const p=u.getNumberOfComponents(),c=u.getDataType(),f=u.getData(),h=new Array(p),v=new Array(p);for(let x=0;x<p;++x){const[m,g]=u.getRange(x);h[x]=m,v[x]=g}const y=i(h,v,p);return o(c,y.offset,y.scale,l),t.useHalfFloat()||t.getOpenGLDataType(c,!0),{numComps:p,dataType:c,data:f,scaleOffsets:y}}t.create2DFilterableFromRaw=function(u,l,p,c,f){let h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;return t.create2DFilterableFromDataArray(u,l,Ee.newInstance({numberOfComponents:p,dataType:c,values:f}),h)},t.create2DFilterableFromDataArray=function(u,l,p){let c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const{numComps:f,dataType:h,data:v}=s(p,c);t.create2DFromRaw(u,l,f,h,v)},t.updateVolumeInfoForGL=(u,l)=>{var f,h;let p=!1;const c=t.useHalfFloat();(!((f=e.volumeInfo)!=null&&f.scale)||!((h=e.volumeInfo)!=null&&h.offset))&&(e.volumeInfo={scale:new Array(l),offset:new Array(l)});for(let v=0;v<l;++v)e.volumeInfo.scale[v]=1,e.volumeInfo.offset[v]=0;if(e.oglNorm16Ext&&!c&&u===Pe.SHORT){for(let v=0;v<l;++v)e.volumeInfo.scale[v]=32767;p=!0}if(e.oglNorm16Ext&&!c&&u===Pe.UNSIGNED_SHORT){for(let v=0;v<l;++v)e.volumeInfo.scale[v]=65535;p=!0}if(u===Pe.UNSIGNED_CHAR){for(let v=0;v<l;++v)e.volumeInfo.scale[v]=255;p=!0}return(u===Pe.FLOAT||c&&(u===Pe.SHORT||u===Pe.UNSIGNED_SHORT))&&(p=!0),p},t.create3DFromRaw=(u,l,p,c,f,h)=>{let v=f,y=h;if(!t.updateVolumeInfoForGL(v,c)&&y){const S=u*l*p,T=structuredClone(e.volumeInfo),C=new Float32Array(S*c);e.volumeInfo.offset=T.offset,e.volumeInfo.scale=T.scale;let w=0;const _=T.scale.map(E=>1/E);for(let E=0;E<S;E++)for(let D=0;D<c;D++)C[w]=(y[w]-T.offset[D])*_[D],w++;v=Pe.FLOAT,y=C}if(t.getOpenGLDataType(v),t.getInternalFormat(v,c),t.getFormat(v,c),!e.internalFormat||!e.format||!e.openGLDataType)return ya("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_3D,e.components=c,e.width=u,e.height=l,e.depth=p,e.numberOfDimensions=3,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const x=[y],g=t.updateArrayDataTypeForGL(v,x,!0),d=n(g);return e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),r(v)?(e.context.texStorage3D(e.target,1,e.internalFormat,e.width,e.height,e.depth),d[0]!=null&&e.context.texSubImage3D(e.target,0,0,0,0,e.width,e.height,e.depth,e.format,e.openGLDataType,d[0])):e.context.texImage3D(e.target,0,e.internalFormat,e.width,e.height,e.depth,0,e.format,e.openGLDataType,d[0]),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(v,e.oglNorm16Ext,t.useHalfFloat()),t.deactivate(),!0},t.create3DFilterableFromRaw=function(u,l,p,c,f,h){let v=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1;return t.create3DFilterableFromDataArray(u,l,p,Ee.newInstance({numberOfComponents:c,dataType:f,values:h}),v)},t.create3DFilterableFromDataArray=function(u,l,p,c){let f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const{numComps:h,dataType:v,data:y,scaleOffsets:x}=s(c,f),m=[],g=[];for(let F=0;F<h;++F)m[F]=0,g[F]=1;if(e.volumeInfo={scale:g,offset:m,dataComputedScale:x.scale,dataComputedOffset:x.offset,width:u,height:l,depth:p},e._openGLRenderWindow.getWebgl2())return t.create3DFromRaw(u,l,p,h,v,y);const d=u*l*p,S=structuredClone(x);let T=(F,B,$,H,X)=>{F[B]=$},C=Pe.UNSIGNED_CHAR;if(v===Pe.UNSIGNED_CHAR)for(let F=0;F<h;++F)S.offset[F]=0,S.scale[F]=255;else e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear")?(C=Pe.FLOAT,T=(F,B,$,H,X)=>{F[B]=($-H)/X}):(C=Pe.UNSIGNED_CHAR,T=(F,B,$,H,X)=>{F[B]=255*($-H)/X});if(t.getOpenGLDataType(C),t.getInternalFormat(C,h),t.getFormat(C,h),!e.internalFormat||!e.format||!e.openGLDataType)return ya("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=h,e.depth=1,e.numberOfDimensions=2;let w=e.context.getParameter(e.context.MAX_TEXTURE_SIZE);w>4096&&(C===Pe.FLOAT||h>=3)&&(w=4096);let _=1,E=1;d>w*w&&(_=Math.ceil(Math.sqrt(d/(w*w))),E=_);let D=Math.sqrt(d)/_;D=bn(D);const O=Math.floor(D*_/u),N=Math.ceil(p/O),R=bn(l*N/E);e.width=D,e.height=R,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.volumeInfo.xreps=O,e.volumeInfo.yreps=N,e.volumeInfo.xstride=_,e.volumeInfo.ystride=E,e.volumeInfo.offset=S.offset,e.volumeInfo.scale=S.scale;let M;const A=D*R*h;C===Pe.FLOAT?M=new Float32Array(A):M=new Uint8Array(A);let G=0;const j=Math.floor(u/_),k=Math.floor(l/E);for(let F=0;F<N;F++){const B=Math.min(O,p-F*O),$=h*(e.width-B*Math.floor(u/_));for(let H=0;H<k;H++){for(let X=0;X<B;X++){const J=h*((F*O+X)*u*l+E*H*u);for(let q=0;q<j;q++)for(let ee=0;ee<h;ee++)T(M,G,y[J+_*q*h+ee],S.offset[ee],S.scale[ee]),G++}G+=$}}return e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),r(C)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),M!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,M)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,M),t.deactivate(),!0},t.setOpenGLRenderWindow=u=>{e._openGLRenderWindow!==u&&(t.releaseGraphicsResources(),e._openGLRenderWindow=u,e.context=null,u&&(e.context=e._openGLRenderWindow.getContext()))},t.getMaximumTextureSize=u=>u&&u.isCurrent()?u.getIntegerv(u.MAX_TEXTURE_SIZE):-1,t.enableUseHalfFloat=u=>{e.enableUseHalfFloat=u}}const CO={_openGLRenderWindow:null,_forceInternalFormat:!1,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:wr.CLAMP_TO_EDGE,wrapT:wr.CLAMP_TO_EDGE,wrapR:wr.CLAMP_TO_EDGE,minificationFilter:kt.NEAREST,magnificationFilter:kt.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1,oglNorm16Ext:null,allocatedGPUMemoryInBytes:0,enableUseHalfFloat:!0,canUseHalfFloat:!1};function z5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,CO,n),He.extend(t,e,n),e.sendParametersTime={},qe(e.sendParametersTime,{mtime:0}),e.textureBuildTime={},qe(e.textureBuildTime,{mtime:0}),js(t,e,["format","openGLDataType"]),ut(t,e,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap","oglNorm16Ext"]),Ut(t,e,["width","height","volumeInfo","components","handle","target","allocatedGPUMemoryInBytes"]),$s(t,e,["openGLRenderWindow"]),TO(t,e)}const W5=ze(z5,"vtkOpenGLTexture");var vt={newInstance:W5,extend:z5,...P5};Lt("vtkTexture",W5);var l1=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexMC;

// frag position in VC
//VTK::PositionVC::Dec

// optional normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// Texture coordinates
//VTK::TCoord::Dec

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

// Apple Bug
//VTK::PrimID::Dec

// picking support
//VTK::Picking::Dec

void main()
{
  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  //VTK::PrimID::Impl

  //VTK::PositionVC::Impl

  //VTK::Light::Impl

  //VTK::Picking::Impl
}
`,f1=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the polydata mappers fragment shader

uniform int PrimitiveIDOffset;

// VC position of this fragment
//VTK::PositionVC::Dec

// optional color passed in from the vertex shader, vertexColor
//VTK::Color::Dec

// optional surface normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// define vtkImageLabelOutlineOn
//VTK::ImageLabelOutlineOn

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// Depth Peeling Support
//VTK::DepthPeeling::Dec

// clipping plane vars
//VTK::Clip::Dec

// label outline 
//VTK::LabelOutline::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

// handle coincident offsets
//VTK::Coincident::Dec

//VTK::ZBuffer::Dec

//VTK::LabelOutlineHelperFunction

void main()
{
  // VC position of this fragment. This should not branch/return/discard.
  //VTK::PositionVC::Impl

  // Place any calls that require uniform flow (e.g. dFdx) here.
  //VTK::UniformFlow::Impl

  // Set gl_FragDepth here (gl_FragCoord.z by default)
  //VTK::Depth::Impl

  // Early depth peeling abort:
  //VTK::DepthPeeling::PreColor

  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Clip::Impl

  //VTK::Color::Impl

  // Generate the normal if we are not passed in one
  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Light::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }

  //VTK::DepthPeeling::Impl

  //VTK::Picking::Impl

  // handle coincident offsets
  //VTK::Coincident::Impl

  //VTK::ZBuffer::Impl

  //VTK::RenderPassFragmentShader::Impl
}
`;function wO(t,e){t.replaceShaderCoincidentOffset=(n,r,i)=>{const a=t.getCoincidentParameters(r,i);if(a&&(a.factor!==0||a.offset!==0)){let o=n.Fragment;o=Q.substitute(o,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,e.context.getExtension("EXT_frag_depth")&&(a.factor!==0?(o=Q.substitute(o,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,o=Q.substitute(o,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):o=Q.substitute(o,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),e._openGLRenderWindow.getWebgl2()&&(a.factor!==0?(o=Q.substitute(o,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,o=Q.substitute(o,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):o=Q.substitute(o,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),n.Fragment=o}}}function _O(t,e){t.applyShaderReplacements=(n,r,i)=>{let a=null;if(r&&(a=r.ShaderReplacements),a)for(let o=0;o<a.length;o++){const s=a[o];if(i&&s.replaceFirst||!i&&!s.replaceFirst){const u=s.shaderType,l=n[u],p=Q.substitute(l,s.originalValue,s.replacementValue,s.replaceAll);n[u]=p.result}}},t.buildShaders=(n,r,i)=>{t.getReplacedShaderTemplate(n,r,i),e.lastRenderPassShaderReplacement=e.currentRenderPass?e.currentRenderPass.getShaderReplacement():null,e.lastRenderPassShaderReplacement&&e.lastRenderPassShaderReplacement(n);const a=e.renderable.getViewSpecificProperties().OpenGL;t.applyShaderReplacements(n,a,!0),t.replaceShaderValues(n,r,i),t.applyShaderReplacements(n,a)},t.getReplacedShaderTemplate=(n,r,i)=>{const a=e.renderable.getViewSpecificProperties().OpenGL;t.getShaderTemplate(n,r,i);let o=n.Vertex;if(a){const l=a.VertexShaderCode;l!==void 0&&l!==""&&(o=l)}n.Vertex=o;let s=n.Fragment;if(a){const l=a.FragmentShaderCode;l!==void 0&&l!==""&&(s=l)}n.Fragment=s;let u=n.Geometry;if(a){const l=a.GeometryShaderCode;l!==void 0&&(u=l)}n.Geometry=u}}var hr={implementReplaceShaderCoincidentOffset:wO,implementBuildShadersWithReplacements:_O};const{FieldAssociations:Al}=ha,{primTypes:wt}=dr,{Representation:ma,Shading:Gd}=Co,{ScalarMode:Mu}=ua,{Filter:Pd,Wrap:Id}=vt,{vtkErrorMacro:Oi}=un,EO={type:"StartEvent"},DO={type:"EndEvent"},{CoordinateSystem:OO}=Qs;function bO(t){const e=t.getSelector();return e?e.getCurrentPass():Yt.MIN_KNOWN_PASS-1}function NO(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper"),t.buildPass=r=>{r&&(e.currentRenderPass=null,e.openGLActor=t.getFirstAncestorOfType("vtkOpenGLActor"),e._openGLRenderer=e.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()))},t.translucentPass=(r,i)=>{r&&(e.currentRenderPass=i,t.render())},t.zBufferPass=r=>{r&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=r=>t.zBufferPass(r),t.opaquePass=r=>{r&&t.render()},t.render=()=>{const r=e._openGLRenderWindow.getContext();if(e.context!==r){e.context=r;for(let o=wt.Start;o<wt.End;o++)e.primitives[o].setOpenGLRenderWindow(e._openGLRenderWindow)}const i=e.openGLActor.getRenderable(),a=e._openGLRenderer.getRenderable();t.renderPiece(a,i)},t.getShaderTemplate=(r,i,a)=>{r.Vertex=l1,r.Fragment=f1,r.Geometry=""},t.replaceShaderColor=(r,i,a)=>{let o=r.Vertex,s=r.Geometry,u=r.Fragment;const l=e.lastBoundBO.getReferenceByName("lastLightComplexity");let p=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];l&&(p=p.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));let c=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];l&&(c=c.concat(["  vec3 specularColor;","  float specularPower;"])),c=c.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),l&&(c=c.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges&&(p=p.concat(["varying vec4 vertexColorVSOutput;"]),o=Q.substitute(o,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,o=Q.substitute(o,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,s=Q.substitute(s,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,s=Q.substitute(s,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges?u=Q.substitute(u,"//VTK::Color::Impl",c.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result:(e.renderable.getAreScalarsMappedFromCells()||e.renderable.getInterpolateScalarsBeforeMapping())&&e.renderable.getColorCoordinates()&&!e.drawingEdges?u=Q.substitute(u,"//VTK::Color::Impl",c.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:(a.getBackfaceProperty()&&!e.drawingEdges&&(p=p.concat(["uniform float opacityUniformBF; // the fragment opacity","uniform float ambientIntensityBF; // the material ambient","uniform float diffuseIntensityBF; // the material diffuse","uniform vec3 ambientColorUniformBF; // ambient material color","uniform vec3 diffuseColorUniformBF; // diffuse material color"]),l?(p=p.concat(["uniform float specularIntensityBF; // the material specular intensity","uniform vec3 specularColorUniformBF; // intensity weighted color","uniform float specularPowerUniformBF;"]),c=c.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  specularColor = specularIntensityBF * specularColorUniformBF;","  specularPower = specularPowerUniformBF;","  opacity = opacityUniformBF; }"])):c=c.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  opacity = opacityUniformBF; }"])),e.haveCellScalars&&!e.drawingEdges&&(p=p.concat(["uniform samplerBuffer texture1;"])),u=Q.substitute(u,"//VTK::Color::Impl",c).result),u=Q.substitute(u,"//VTK::Color::Dec",p).result,r.Vertex=o,r.Geometry=s,r.Fragment=u},t.replaceShaderLight=(r,i,a)=>{let o=r.Fragment;const s="",u=e.lastBoundBO.getReferenceByName("lastLightComplexity"),l=e.lastBoundBO.getReferenceByName("lastLightCount");let p=[];switch(u){case 0:o=Q.substitute(o,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:o=Q.substitute(o,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(let c=0;c<l;++c)p=p.concat([`uniform vec3 lightColor${c};`,`uniform vec3 lightDirectionVC${c}; // normalized`,`uniform vec3 lightHalfAngleVC${c}; // normalized`]);o=Q.substitute(o,"//VTK::Light::Dec",p).result,p=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(let c=0;c<l;++c)p=p.concat([`  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC${c}));`,`  diffuseL += ((df${s}) * lightColor${c});`,`  if (dot(normalVCVSOutput, lightDirectionVC${c}) < 0.0)`,"    {",`    float sf = sign(df)*pow(max(1e-5,
                                              dot(reflect(lightDirectionVC${c},normalVCVSOutput),
                                                  normalize(-vertexVC.xyz))),
                                         specularPower);`,`    specularL += (sf${s} * lightColor${c});`,"    }"]);p=p.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),o=Q.substitute(o,"//VTK::Light::Impl",p,!1).result;break;case 3:for(let c=0;c<l;++c)p=p.concat([`uniform vec3 lightColor${c};`,`uniform vec3 lightDirectionVC${c}; // normalized`,`uniform vec3 lightHalfAngleVC${c}; // normalized`,`uniform vec3 lightPositionVC${c};`,`uniform vec3 lightAttenuation${c};`,`uniform float lightConeAngle${c};`,`uniform float lightExponent${c};`,`uniform int lightPositional${c};`]);o=Q.substitute(o,"//VTK::Light::Dec",p).result,p=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(let c=0;c<l;++c)p=p.concat(["  attenuation = 1.0;",`  if (lightPositional${c} == 0)`,"    {",`      vertLightDirectionVC = lightDirectionVC${c};`,"    }","  else","    {",`    vertLightDirectionVC = vertexVC.xyz - lightPositionVC${c};`,"    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /",`      (lightAttenuation${c}.x`,`       + lightAttenuation${c}.y * distanceVC`,`       + lightAttenuation${c}.z * distanceVC * distanceVC);`,"    // per OpenGL standard cone angle is 90 or less for a spot light",`    if (lightConeAngle${c} <= 90.0)`,"      {",`      float coneDot = dot(vertLightDirectionVC, lightDirectionVC${c});`,"      // if inside the cone",`      if (coneDot >= cos(radians(lightConeAngle${c})))`,"        {",`        attenuation = attenuation * pow(coneDot, lightExponent${c});`,"        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));",`    diffuseL += ((df${s}) * lightColor${c});`,"    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {",`      float sf = sign(df)*attenuation*pow(max(1e-5,
                                                           dot(reflect(lightDirectionVC${c},
                                                                       normalVCVSOutput),
                                                               normalize(-vertexVC.xyz))),
                                                       specularPower);`,`    specularL += ((sf${s}) * lightColor${c});`,"    }"]);p=p.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),o=Q.substitute(o,"//VTK::Light::Impl",p,!1).result;break;default:Oi("bad light complexity")}r.Fragment=o},t.replaceShaderNormal=(r,i,a)=>{if(e.lastBoundBO.getReferenceByName("lastLightComplexity")>0){let s=r.Vertex,u=r.Geometry,l=r.Fragment;e.lastBoundBO.getCABO().getNormalOffset()?(s=Q.substitute(s,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,s=Q.substitute(s,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,u=Q.substitute(u,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,u=Q.substitute(u,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,l=Q.substitute(l,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,l=Q.substitute(l,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.haveCellNormals?(l=Q.substitute(l,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,l=Q.substitute(l,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.lastBoundBO.getOpenGLMode(a.getProperty().getRepresentation())===e.context.LINES?(l=Q.substitute(l,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,l=Q.substitute(l,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  if (abs(fdx.x) > 0.0)","    { fdx = normalize(fdx); normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { fdy = normalize(fdy); normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(l=Q.substitute(l,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,l=Q.substitute(l,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,l=Q.substitute(l,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),r.Vertex=s,r.Geometry=u,r.Fragment=l}},t.replaceShaderPositionVC=(r,i,a)=>{e.lastBoundBO.replaceShaderPositionVC(r,i,a);let o=r.Vertex,s=r.Geometry,u=r.Fragment;e.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(o=Q.substitute(o,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,o=Q.substitute(o,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCPCMatrix * vertexMC;"]).result,o=Q.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result,s=Q.substitute(s,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,s=Q.substitute(s,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,u=Q.substitute(u,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,u=Q.substitute(u,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(o=Q.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,o=Q.substitute(o,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result),r.Vertex=o,r.Geometry=s,r.Fragment=u},t.replaceShaderTCoord=(r,i,a)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let o=r.Vertex,s=r.Geometry,u=r.Fragment;if(e.drawingEdges)return;o=Q.substitute(o,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;const l=e.openGLActor.getActiveTextures();let p=2,c=2;if(l&&l.length>0&&(p=l[0].getComponents(),l[0].getTarget()===e.context.TEXTURE_CUBE_MAP&&(c=3)),e.renderable.getColorTextureMap()&&(p=e.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),c=2),c===2){if(o=Q.substitute(o,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,s=Q.substitute(s,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,s=Q.substitute(s,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,u=Q.substitute(u,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,l&&l.length>=1)switch(p){case 1:u=Q.substitute(u,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:u=Q.substitute(u,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:u=Q.substitute(u,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}}else switch(o=Q.substitute(o,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,s=Q.substitute(s,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,s=Q.substitute(s,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,u=Q.substitute(u,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,p){case 1:u=Q.substitute(u,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:u=Q.substitute(u,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:u=Q.substitute(u,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}r.Vertex=o,r.Geometry=s,r.Fragment=u}},t.replaceShaderClip=(r,i,a)=>{let o=r.Vertex,s=r.Fragment;if(e.renderable.getNumberOfClippingPlanes()){const u=e.renderable.getNumberOfClippingPlanes();o=Q.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`uniform vec4 clipPlanes[${u}];`,`varying float clipDistancesVSOutput[${u}];`]).result,o=Q.substitute(o,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${u}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,s=Q.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`varying float clipDistancesVSOutput[${u}];`]).result,s=Q.substitute(s,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${u}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}r.Vertex=o,r.Fragment=s},t.getCoincidentParameters=(r,i)=>{let a={factor:0,offset:0};const o=i.getProperty();if(e.renderable.getResolveCoincidentTopology()==Yn.PolygonOffset||o.getEdgeVisibility()&&o.getRepresentation()===ma.SURFACE){const u=e.lastBoundBO.getPrimitiveType();u===wt.Points||o.getRepresentation()===ma.POINTS?a=e.renderable.getCoincidentTopologyPointOffsetParameter():u===wt.Lines||o.getRepresentation()===ma.WIREFRAME?a=e.renderable.getCoincidentTopologyLineOffsetParameters():(u===wt.Tris||u===wt.TriStrips)&&(a=e.renderable.getCoincidentTopologyPolygonOffsetParameters()),(u===wt.TrisEdges||u===wt.TriStripsEdges)&&(a=e.renderable.getCoincidentTopologyPolygonOffsetParameters(),a.factor/=2,a.offset/=2)}const s=e._openGLRenderer.getSelector();return s&&s.getFieldAssociation()===Al.FIELD_ASSOCIATION_POINTS&&(a.offset-=2),a},t.replaceShaderPicking=(r,i,a)=>{let o=r.Fragment,s=r.Vertex;if(o=Q.substitute(o,"//VTK::Picking::Dec",["uniform int picking;","//VTK::Picking::Dec"]).result,!!e._openGLRenderer.getSelector()){switch((e.lastSelectionState===Yt.ID_LOW24||e.lastSelectionState===Yt.ID_HIGH24)&&(s=Q.substitute(s,"//VTK::Picking::Dec",[`flat out int vertexIDVSOutput;
`,`uniform int VertexIDOffset;
`]).result,s=Q.substitute(s,"//VTK::Picking::Impl",`  vertexIDVSOutput = gl_VertexID + VertexIDOffset;
`).result,o=Q.substitute(o,"//VTK::Picking::Dec",`flat in int vertexIDVSOutput;
`).result,o=Q.substitute(o,"//VTK::Picking::Impl",["  int idx = vertexIDVSOutput;","//VTK::Picking::Impl"]).result),e.lastSelectionState){case Yt.ID_LOW24:o=Q.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float(idx%256)/255.0, float((idx/256)%256)/255.0, float((idx/65536)%256)/255.0, 1.0);").result;break;case Yt.ID_HIGH24:o=Q.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float((idx/16777216)%256)/255.0, 0.0, 0.0, 1.0);").result;break;default:o=Q.substitute(o,"//VTK::Picking::Dec","uniform vec3 mapperIndex;").result,o=Q.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result}r.Fragment=o,r.Vertex=s}},t.replaceShaderValues=(r,i,a)=>{if(t.replaceShaderColor(r,i,a),t.replaceShaderNormal(r,i,a),t.replaceShaderLight(r,i,a),t.replaceShaderTCoord(r,i,a),t.replaceShaderPicking(r,i,a),t.replaceShaderClip(r,i,a),t.replaceShaderCoincidentOffset(r,i,a),t.replaceShaderPositionVC(r,i,a),e.haveSeenDepthRequest){let o=r.Fragment;o=Q.substitute(o,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,o=Q.substitute(o,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,r.Fragment=o}},t.getNeedToRebuildShaders=(r,i,a)=>{let o=0,s=0;const u=r.getPrimitiveType(),l=e.currentInput;let p=!1;const c=l.getPointData().getNormals(),f=l.getCellData().getNormals(),h=a.getProperty().getInterpolation()===Gd.FLAT,v=a.getProperty().getRepresentation(),y=r.getOpenGLMode(v,u);if((y===e.context.TRIANGLES||f&&!c||!h&&c||!h&&y===e.context.LINES)&&(p=!0),a.getProperty().getLighting()&&p){o=0;const d=i.getLightsByReference();for(let S=0;S<d.length;++S){const T=d[S];T.getSwitch()>0&&(s++,o===0&&(o=1)),o===1&&(s>1||T.getIntensity()!==1||!T.lightTypeIsHeadLight())&&(o=2),o<3&&T.getPositional()&&(o=3)}}let x=!1;const m=e.lastBoundBO.getReferenceByName("lastLightComplexity"),g=e.lastBoundBO.getReferenceByName("lastLightCount");return(m!==o||g!==s)&&(e.lastBoundBO.set({lastLightComplexity:o},!0),e.lastBoundBO.set({lastLightCount:s},!0),x=!0),(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(x=!0),e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime()||r.getShaderSourceTime().getMTime()<e.selectionStateChanged.getMTime()||x?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,!0):!1},t.invokeShaderCallbacks=(r,i,a)=>{const o=e.renderable.getViewSpecificProperties().ShadersCallbacks;o&&o.forEach(s=>{s.callback(s.userData,r,i,a)})},t.setMapperShaderParameters=(r,i,a)=>{if(r.getProgram().isUniformUsed("PrimitiveIDOffset")&&r.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),r.getProgram().isUniformUsed("VertexIDOffset")&&r.getProgram().setUniformi("VertexIDOffset",e.vertexIDOffset),r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){const u=e.lastBoundBO.getReferenceByName("lastLightComplexity");r.getProgram().isAttributeUsed("vertexMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexMC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||Oi("Error setting vertexMC in shader VAO.")),r.getProgram().isAttributeUsed("normalMC")&&r.getCABO().getNormalOffset()&&u>0?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"normalMC",r.getCABO().getNormalOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||Oi("Error setting normalMC in shader VAO."):r.getVAO().removeAttributeArray("normalMC"),e.renderable.getCustomShaderAttributes().forEach((l,p)=>{r.getProgram().isAttributeUsed(`${l}MC`)&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),`${l}MC`,r.getCABO().getCustomData()[p].offset,r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getCustomData()[p].components,!1)||Oi(`Error setting ${l}MC in shader VAO.`))}),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),!1)||Oi("Error setting tcoordMC in shader VAO."):r.getVAO().removeAttributeArray("tcoordMC"),r.getProgram().isAttributeUsed("scalarColor")&&r.getCABO().getColorComponents()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO().getColorBO(),"scalarColor",r.getCABO().getColorOffset(),r.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,4,!0)||Oi("Error setting scalarColor in shader VAO."):r.getVAO().removeAttributeArray("scalarColor"),r.getAttributeUpdateTime().modified()}if(e.renderable.getNumberOfClippingPlanes()){const u=e.renderable.getNumberOfClippingPlanes(),l=[],c=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,f=c?ft(e.tmpMat4,a.getMatrix()):a.getMatrix();c&&(Fe(f,f),Le(f,f,c),Fe(f,f));for(let h=0;h<u;h++){const v=[];e.renderable.getClippingPlaneInDataCoords(f,h,v);for(let y=0;y<4;y++)l.push(v[y])}r.getProgram().setUniformi("numClipPlanes",u),r.getProgram().setUniform4fv("clipPlanes",l)}e.internalColorTexture&&r.getProgram().isUniformUsed("texture1")&&r.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const o=e.openGLActor.getActiveTextures();if(o)for(let u=0;u<o.length;++u){const p=o[u].getTextureUnit(),c=`texture${p+1}`;r.getProgram().isUniformUsed(c)&&r.getProgram().setUniformi(c,p)}if(e.haveSeenDepthRequest&&r.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),r.getProgram().isUniformUsed("coffset")){const u=t.getCoincidentParameters(i,a);r.getProgram().setUniformf("coffset",u.offset),r.getProgram().isUniformUsed("cfactor")&&r.getProgram().setUniformf("cfactor",u.factor)}r.setMapperShaderParameters(i,a,e._openGLRenderer.getTiledSizeAndOrigin());const s=e._openGLRenderer.getSelector();r.getProgram().setUniform3fArray("mapperIndex",s?s.getPropColorValue():[0,0,0]),r.getProgram().setUniformi("picking",s?s.getCurrentPass()+1:0)},t.setLightingShaderParameters=(r,i,a)=>{const o=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(o<2)return;const s=r.getProgram();let u=0;const l=i.getLightsByReference();for(let f=0;f<l.length;++f){const h=l[f];if(h.getSwitch()>0){const y=h.getColorByReference(),x=h.getIntensity();e.lightColor[0]=y[0]*x,e.lightColor[1]=y[1]*x,e.lightColor[2]=y[2]*x;const m=h.getDirection(),g=i.getActiveCamera().getViewMatrix(),d=[...m];h.lightTypeIsSceneLight()&&(d[0]=g[0]*m[0]+g[1]*m[1]+g[2]*m[2],d[1]=g[4]*m[0]+g[5]*m[1]+g[6]*m[2],d[2]=g[8]*m[0]+g[9]*m[1]+g[10]*m[2],aa(d)),e.lightDirection[0]=d[0],e.lightDirection[1]=d[1],e.lightDirection[2]=d[2],aa(e.lightDirection),s.setUniform3fArray(`lightColor${u}`,e.lightColor),s.setUniform3fArray(`lightDirectionVC${u}`,e.lightDirection),u++}}if(o<3)return;const c=i.getActiveCamera().getViewMatrix();Fe(c,c),u=0;for(let f=0;f<l.length;++f){const h=l[f];if(h.getSwitch()>0){const y=h.getTransformedPosition(),x=new Float64Array(3);Re(x,y,c),s.setUniform3fArray(`lightAttenuation${u}`,h.getAttenuationValuesByReference()),s.setUniformi(`lightPositional${u}`,h.getPositional()),s.setUniformf(`lightExponent${u}`,h.getExponent()),s.setUniformf(`lightConeAngle${u}`,h.getConeAngle()),s.setUniform3fArray(`lightPositionVC${u}`,[x[0],x[1],x[2]]),u++}}};function n(r,i,a){return i.identity(a),r.reduce((o,s,u)=>u===0?s?i.copy(o,s):i.identity(o):s?i.multiply(o,o,s):o,a)}t.setCameraShaderParameters=(r,i,a)=>{const o=r.getProgram(),s=e.openGLCamera.getKeyMatrices(i),u=i.getActiveCamera(),l=e.openGLCamera.getKeyMatrixTime().getMTime(),p=o.getLastCameraMTime(),f=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,h=a.getIsIdentity(),v=h?{mcwc:null,normalMatrix:null}:e.openGLActor.getKeyMatrices();if(a.getCoordinateSystem()===OO.DISPLAY){const y=e._openGLRenderer.getTiledSizeAndOrigin();ye(e.tmpMat4),e.tmpMat4[0]=2/y.usize,e.tmpMat4[12]=-1,e.tmpMat4[5]=2/y.vsize,e.tmpMat4[13]=-1,Le(e.tmpMat4,e.tmpMat4,f),o.setUniformMatrix("MCPCMatrix",e.tmpMat4)}else o.setUniformMatrix("MCPCMatrix",n([s.wcpc,v.mcwc,f],Os,e.tmpMat4));o.isUniformUsed("MCVCMatrix")&&o.setUniformMatrix("MCVCMatrix",n([s.wcvc,v.mcwc,f],Os,e.tmpMat4)),o.isUniformUsed("normalMatrix")&&o.setUniformMatrix3x3("normalMatrix",n([s.normalMatrix,v.normalMatrix],Kx,e.tmpMat3)),p!==l&&(o.isUniformUsed("cameraParallel")&&o.setUniformi("cameraParallel",u.getParallelProjection()),o.setLastCameraMTime(l)),h||o.setLastCameraMTime(0)},t.setPropertyShaderParameters=(r,i,a)=>{const o=r.getProgram();let s=a.getProperty(),u=s.getOpacity(),l=e.drawingEdges?s.getEdgeColorByReference():s.getAmbientColorByReference(),p=e.drawingEdges?s.getEdgeColorByReference():s.getDiffuseColorByReference(),c=e.drawingEdges?1:s.getAmbient(),f=e.drawingEdges?0:s.getDiffuse(),h=e.drawingEdges?0:s.getSpecular();const v=s.getSpecularPower();o.setUniformf("opacityUniform",u),o.setUniform3fArray("ambientColorUniform",l),o.setUniform3fArray("diffuseColorUniform",p),o.setUniformf("ambient",c),o.setUniformf("diffuse",f);const y=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(y<1)return;let x=s.getSpecularColorByReference();if(o.setUniform3fArray("specularColorUniform",x),o.setUniformf("specularPowerUniform",v),o.setUniformf("specular",h),o.isUniformUsed("ambientIntensityBF")){if(s=a.getBackfaceProperty(),u=s.getOpacity(),l=s.getAmbientColor(),c=s.getAmbient(),p=s.getDiffuseColor(),f=s.getDiffuse(),x=s.getSpecularColor(),h=s.getSpecular(),o.setUniformf("ambientIntensityBF",c),o.setUniformf("diffuseIntensityBF",f),o.setUniformf("opacityUniformBF",u),o.setUniform3fArray("ambientColorUniformBF",l),o.setUniform3fArray("diffuseColorUniformBF",p),y<1)return;o.setUniformf("specularIntensityBF",h),o.setUniform3fArray("specularColorUniformBF",x),o.setUniformf("specularPowerUniformBF",v)}},t.updateMaximumPointCellIds=(r,i)=>{var s,u,l,p;const a=e._openGLRenderer.getSelector();if(!a)return;if((u=(s=e.selectionWebGLIdsToVTKIds)==null?void 0:s.points)!=null&&u.length){const c=e.selectionWebGLIdsToVTKIds.points.length;a.setMaximumPointId(c-1)}if((p=(l=e.selectionWebGLIdsToVTKIds)==null?void 0:l.cells)!=null&&p.length){const c=e.selectionWebGLIdsToVTKIds.cells.length;a.setMaximumCellId(c-1)}a.getFieldAssociation()===Al.FIELD_ASSOCIATION_POINTS&&(e.pointPicking=!0)},t.renderPieceStart=(r,i)=>{e.primitiveIDOffset=0,e.vertexIDOffset=0;const a=bO(e._openGLRenderer);if(e.lastSelectionState!==a&&(e.selectionStateChanged.modified(),e.lastSelectionState=a),e._openGLRenderer.getSelector())switch(a){default:e._openGLRenderer.getSelector().renderProp(i)}t.updateBufferObjects(r,i),e.renderable.getColorTextureMap()&&e.internalColorTexture.activate(),e.lastBoundBO=null},t.renderPieceDraw=(r,i)=>{const a=i.getProperty().getRepresentation(),o=i.getProperty().getEdgeVisibility()&&a===ma.SURFACE,s=e._openGLRenderer.getSelector(),u=s&&s.getFieldAssociation()===Al.FIELD_ASSOCIATION_POINTS&&(e.lastSelectionState===Yt.ID_LOW24||e.lastSelectionState===Yt.ID_HIGH24);for(let l=wt.Start;l<wt.End;l++)e.primitives[l].setPointPicking(u),e.primitives[l].getCABO().getElementCount()&&(e.drawingEdges=o&&(l===wt.TrisEdges||l===wt.TriStripsEdges),(!e.drawingEdges||!(e.renderDepth||e.lastSelectionState>=0))&&(e.lastBoundBO=e.primitives[l],e.primitiveIDOffset+=e.primitives[l].drawArrays(r,i,a,t),e.vertexIDOffset+=e.primitives[l].getCABO().getElementCount()))},t.renderPieceFinish=(r,i)=>{e.LastBoundBO&&e.LastBoundBO.getVAO().release(),e.renderable.getColorTextureMap()&&e.internalColorTexture.deactivate()},t.renderPiece=(r,i)=>{if(t.invokeEvent(EO),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(DO),!e.currentInput){Oi("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const a=e.context,o=i.getProperty().getBackfaceCulling(),s=i.getProperty().getFrontfaceCulling();!o&&!s?e._openGLRenderWindow.disableCullFace():s?(e._openGLRenderWindow.enableCullFace(),a.cullFace(a.FRONT)):(e._openGLRenderWindow.enableCullFace(),a.cullFace(a.BACK)),t.renderPieceStart(r,i),t.renderPieceDraw(r,i),t.renderPieceFinish(r,i)},t.computeBounds=(r,i)=>{if(!t.getInput()){To(e.bounds);return}e.bounds=t.getInput().getBounds()},t.updateBufferObjects=(r,i)=>{t.getNeedToRebuildBufferObjects(r,i)&&t.buildBufferObjects(r,i),t.updateMaximumPointCellIds()},t.getNeedToRebuildBufferObjects=(r,i)=>{const a=e.VBOBuildTime.getMTime();return a<t.getMTime()||a<e.renderable.getMTime()||a<i.getMTime()||a<e.currentInput.getMTime()},t.buildBufferObjects=(r,i)=>{const a=e.currentInput;if(a===null)return;e.renderable.mapScalars(a,1);const o=e.renderable.getColorMapColors();e.haveCellScalars=!1;const s=e.renderable.getScalarMode();e.renderable.getScalarVisibility()&&(s===Mu.USE_CELL_DATA||s===Mu.USE_CELL_FIELD_DATA||s===Mu.USE_FIELD_DATA||!a.getPointData().getScalars())&&s!==Mu.USE_POINT_FIELD_DATA&&o&&(e.haveCellScalars=!0);let u=i.getProperty().getInterpolation()!==Gd.FLAT?a.getPointData().getNormals():null;u===null&&a.getCellData().getNormals()&&(e.haveCellNormals=!0,u=a.getCellData().getNormals());const l=i.getProperty().getRepresentation();let p=a.getPointData().getTCoords();e.openGLActor.getActiveTextures()||(p=null);let c=!1;if(e.renderable.getColorCoordinates()){p=e.renderable.getColorCoordinates(),c=e.renderable.getAreScalarsMappedFromCells(),e.internalColorTexture||(e.internalColorTexture=vt.newInstance({resizable:!0}));const h=e.internalColorTexture;h.setMinificationFilter(Pd.NEAREST),h.setMagnificationFilter(Pd.NEAREST),h.setWrapS(Id.CLAMP_TO_EDGE),h.setWrapT(Id.CLAMP_TO_EDGE),h.setOpenGLRenderWindow(e._openGLRenderWindow);const v=e.renderable.getColorTextureMap(),y=v.getExtent(),x=v.getPointData().getScalars();h.create2DFromRaw(y[1]-y[0]+1,y[3]-y[2]+1,x.getNumberOfComponents(),x.getDataType(),x.getData()),h.activate(),h.sendParameters(),h.deactivate()}const f=`${a.getMTime()}A${l}B${a.getMTime()}C${u?u.getMTime():1}D${o?o.getMTime():1}E${i.getProperty().getEdgeVisibility()}F${p?p.getMTime():1}`;if(e.VBOBuildString!==f){const v={points:a.getPoints(),normals:u,tcoords:p,colors:o,cellOffset:0,vertexOffset:0,useTCoordsPerCell:c,haveCellScalars:e.haveCellScalars,haveCellNormals:e.haveCellNormals,customAttributes:e.renderable.getCustomShaderAttributes().map(m=>a.getPointData().getArrayByName(m))};e.renderable.getPopulateSelectionSettings()&&(e.selectionWebGLIdsToVTKIds={points:null,cells:null});const y=[{inRep:"verts",cells:a.getVerts()},{inRep:"lines",cells:a.getLines()},{inRep:"polys",cells:a.getPolys()},{inRep:"strips",cells:a.getStrips()},{inRep:"polys",cells:a.getPolys()},{inRep:"strips",cells:a.getStrips()}],x=i.getProperty().getEdgeVisibility()&&l===ma.SURFACE;for(let m=wt.Start;m<wt.End;m++)m!==wt.TrisEdges&&m!==wt.TriStripsEdges?(v.cellOffset+=e.primitives[m].getCABO().createVBO(y[m].cells,y[m].inRep,l,v,e.selectionWebGLIdsToVTKIds),v.vertexOffset+=e.primitives[m].getCABO().getElementCount()):x?e.primitives[m].getCABO().createVBO(y[m].cells,y[m].inRep,ma.WIREFRAME,{...v,tcoords:null,colors:null,haveCellScalars:!1,haveCellNormals:!1}):e.primitives[m].releaseGraphicsResources();e.renderable.getPopulateSelectionSettings()&&e.renderable.setSelectionWebGLIdsToVTKIds(e.selectionWebGLIdsToVTKIds),e.VBOBuildString=f}e.VBOBuildTime.modified()},t.getAllocatedGPUMemoryInBytes=()=>{let r=0;return e.primitives.forEach(i=>{r+=i.getAllocatedGPUMemoryInBytes()}),r}}const MO={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastSelectionState:Yt.MIN_KNOWN_PASS-1,selectionStateChanged:null,selectionWebGLIdsToVTKIds:null,pointPicking:!1};function RO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,MO,n),He.extend(t,e,n),hr.implementReplaceShaderCoincidentOffset(t,e,n),hr.implementBuildShadersWithReplacements(t,e,n),e.primitives=[],e.primTypes=wt,e.tmpMat3=gr(new Float64Array(9)),e.tmpMat4=ye(new Float64Array(16));for(let r=wt.Start;r<wt.End;r++)e.primitives[r]=dr.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);ut(t,e,["context"]),e.VBOBuildTime={},qe(e.VBOBuildTime,{mtime:0}),e.selectionStateChanged={},qe(e.selectionStateChanged,{mtime:0}),NO(t,e)}const FO=ze(RO,"vtkOpenGLPolyDataMapper");Lt("vtkMapper",FO);const{ColorMode:LO,ScalarMode:bi,GetArray:Ul}=Ic;function kO(t,e){e.classHierarchy.push("vtkMapper2D"),t.createDefaultLookupTable=()=>{e.lookupTable=cc.newInstance()},t.getColorModeAsString=()=>P.enumToString(LO,e.colorMode),t.setColorModeToDefault=()=>t.setColorMode(0),t.setColorModeToMapScalars=()=>t.setColorMode(1),t.setColorModeToDirectScalars=()=>t.setColorMode(2),t.getScalarModeAsString=()=>P.enumToString(bi,e.scalarMode),t.setScalarModeToDefault=()=>t.setScalarMode(0),t.setScalarModeToUsePointData=()=>t.setScalarMode(1),t.setScalarModeToUseCellData=()=>t.setScalarMode(2),t.setScalarModeToUsePointFieldData=()=>t.setScalarMode(3),t.setScalarModeToUseCellFieldData=()=>t.setScalarMode(4),t.setScalarModeToUseFieldData=()=>t.setScalarMode(5),t.getAbstractScalars=(n,r,i,a,o)=>{if(!n||!e.scalarVisibility)return{scalars:null,cellFLag:!1};let s=null,u=!1;if(r===bi.DEFAULT)s=n.getPointData().getScalars(),s||(s=n.getCellData().getScalars(),u=!0);else if(r===bi.USE_POINT_DATA)s=n.getPointData().getScalars();else if(r===bi.USE_CELL_DATA)s=n.getCellData().getScalars(),u=!0;else if(r===bi.USE_POINT_FIELD_DATA){const l=n.getPointData();i===Ul.BY_ID?s=l.getArrayByIndex(a):s=l.getArrayByName(o)}else if(r===bi.USE_CELL_FIELD_DATA){const l=n.getCellData();u=!0,i===Ul.BY_ID?s=l.getArrayByIndex(a):s=l.getArrayByName(o)}else if(r===bi.USE_FIELD_DATA){const l=n.getFieldData();i===Ul.BY_ID?s=l.getArrayByIndex(a):s=l.getArrayByName(o)}return{scalars:s,cellFlag:u}},t.getLookupTable=()=>(e.lookupTable||t.createDefaultLookupTable(),e.lookupTable),t.getMTime=()=>{let n=e.mtime;if(e.lookupTable!==null){const r=e.lookupTable.getMTime();n=r>n?r:n}return n},t.mapScalars=(n,r)=>{const i=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!i){e.colorMapColors=null;return}const a=`${t.getMTime()}${i.getMTime()}${r}`;if(e.colorBuildString===a)return;e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]);const o=t.getLookupTable();o&&(o.build(),e.colorMapColors=o.mapScalars(i,e.colorMode,e.fieldDataTupleId)),e.colorBuildString=`${t.getMTime()}${i.getMTime()}${r}`},t.getPrimitiveCount=()=>{const n=t.getInputData();return{points:n.getPoints().getNumberOfValues()/3,verts:n.getVerts().getNumberOfValues()-n.getVerts().getNumberOfCells(),lines:n.getLines().getNumberOfValues()-2*n.getLines().getNumberOfCells(),triangles:n.getPolys().getNumberOfValues()-3*n.getPolys().getNumberOfCells()}}}const BO={static:!1,lookupTable:null,scalarVisibility:!1,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,transformCoordinate:null,viewSpecificProperties:null,customShaderAttributes:[]};function j5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,BO,n),e5.extend(t,e,n),P.get(t,e,["colorMapColors"]),P.setGet(t,e,["arrayAccessMode","colorByArrayName","colorMode","lookupTable","renderTime","scalarMode","scalarVisibility","static","transformCoordinate","useLookupTableScalarRange","viewSpecificProperties","customShaderAttributes"]),P.setGetArray(t,e,["scalarRange"],2),e.viewSpecificProperties||(e.viewSpecificProperties={}),kO(t,e)}const VO=P.newInstance(j5,"vtkMapper2D");var AO={newInstance:VO,extend:j5},UO=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

uniform int PrimitiveIDOffset;

// Texture coordinates
//VTK::TCoord::Dec

// Scalar coloring
//VTK::Color::Dec

// Depth Peeling
//VTK::DepthPeeling::Dec

// picking support
//VTK::Picking::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Color::Impl
  //VTK::TCoord::Impl

  //VTK::DepthPeeling::Impl
  //VTK::Picking::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }
}
`,GO=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

// all variables that represent positions or directions have a suffix
// indicating the coordinate system they are in. The possible values are
// MC - Model Coordinates
// WC - WC world coordinates
// VC - View Coordinates
// DC - Display Coordinates

in vec4 vertexWC;

// frag position in VC
//VTK::PositionVC::Dec

// material property values
//VTK::Color::Dec

// Texture coordinates
//VTK::TCoord::Dec

// Apple Bug
//VTK::PrimID::Dec

uniform mat4 WCVCMatrix;  // World to view matrix

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  gl_Position = WCVCMatrix*vertexWC;

  //VTK::TCoord::Impl

  //VTK::Color::Impl

  //VTK::PositionVC::Impl
}
`;const $5={BACKGROUND:0,FOREGROUND:1};var H5={DisplayLocation:$5};const{primTypes:Gn}=dr,{ScalarMode:Ru}=AO,{vtkErrorMacro:Fu}=un,PO={type:"StartEvent"},IO={type:"EndEvent"};function zO(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper2D"),t.buildPass=r=>{r&&(e.openGLActor2D=t.getFirstAncestorOfType("vtkOpenGLActor2D"),e._openGLRenderer=e.openGLActor2D.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()))},t.overlayPass=r=>{r&&t.render()},t.getShaderTemplate=(r,i,a)=>{r.Vertex=GO,r.Fragment=UO,r.Geometry=""},t.render=()=>{const r=e._openGLRenderWindow.getContext();if(e.context!==r){e.context=r;for(let o=Gn.Start;o<Gn.End;o++)e.primitives[o].setOpenGLRenderWindow(e._openGLRenderWindow)}const i=e.openGLActor2D.getRenderable(),a=e._openGLRenderer.getRenderable();t.renderPiece(a,i)},t.renderPiece=(r,i)=>{if(t.invokeEvent(PO),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(IO),!e.currentInput){Fu("No input!");return}!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues()||(t.renderPieceStart(r,i),t.renderPieceDraw(r,i),t.renderPieceFinish(r,i))},t.renderPieceStart=(r,i)=>{if(e.primitiveIDOffset=0,e._openGLRenderer.getSelector())switch(e._openGLRenderer.getSelector().getCurrentPass()){default:e._openGLRenderer.getSelector().renderProp(i)}t.updateBufferObjects(r,i),e.lastBoundBO=null},t.getNeedToRebuildShaders=(r,i,a)=>r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime(),t.updateBufferObjects=(r,i)=>{t.getNeedToRebuildBufferObjects(r,i)&&t.buildBufferObjects(r,i)},t.getNeedToRebuildBufferObjects=(r,i)=>{const a=e.VBOBuildTime.getMTime();return!!(a<t.getMTime()||a<e._openGLRenderWindow.getMTime()||a<e.renderable.getMTime()||a<i.getMTime()||a<e.currentInput.getMTime()||e.renderable.getTransformCoordinate()&&a<r.getMTime())},t.buildBufferObjects=(r,i)=>{const a=e.currentInput;if(a===null)return;e.renderable.mapScalars(a,i.getProperty().getOpacity());const o=e.renderable.getColorMapColors();e.haveCellScalars=!1;const s=e.renderable.getScalarMode();e.renderable.getScalarVisibility()&&(s===Ru.USE_CELL_DATA||s===Ru.USE_CELL_FIELD_DATA||s===Ru.USE_FIELD_DATA||!a.getPointData().getScalars())&&s!==Ru.USE_POINT_FIELD_DATA&&o&&(e.haveCellScalars=!0);const u=i.getProperty().getRepresentation();let l=a.getPointData().getTCoords();e.openGLActor2D.getActiveTextures()||(l=null);const p=e.renderable.getTransformCoordinate(),f=r.getRenderWindow().getViews()[0].getViewportSize(r),h=`${a.getMTime()}A${u}B${a.getMTime()}C${o?o.getMTime():1}D${l?l.getMTime():1}E${p?r.getMTime():1}F${f}`;if(e.VBOBuildString!==h){let v=a.getPoints();if(p){const x=fc.newInstance(),m=v.getNumberOfPoints();x.setNumberOfPoints(m);const g=[];for(let d=0;d<m;++d){v.getPoint(d,g),p.setValue(g);const S=p.getComputedDoubleViewportValue(r);x.setPoint(d,S[0],S[1],0)}v=x}const y={points:v,tcoords:l,colors:o,cellOffset:0,haveCellScalars:e.haveCellSCalars,customAttributes:e.renderable.getCustomShaderAttributes().map(x=>a.getPointData().getArrayByName(x))};y.cellOffset+=e.primitives[Gn.Points].getCABO().createVBO(a.getVerts(),"verts",u,y),y.cellOffset+=e.primitives[Gn.Lines].getCABO().createVBO(a.getLines(),"lines",u,y),y.cellOffset+=e.primitives[Gn.Tris].getCABO().createVBO(a.getPolys(),"polys",u,y),y.cellOffset+=e.primitives[Gn.TriStrips].getCABO().createVBO(a.getStrips(),"strips",u,y),e.VBOBuildTime.modified(),e.VBOBuildString=h}},t.renderPieceDraw=(r,i)=>{const a=i.getProperty().getRepresentation();e.context.depthMask(!0);for(let s=Gn.Start;s<Gn.End;s++)e.primitives[s].getCABO().getElementCount()&&(e.lastBoundBO=e.primitives[s],e.primitiveIDOffset+=e.primitives[s].drawArrays(r,i,a,t))},t.renderPieceFinish=(r,i)=>{e.lastBoundBO&&e.lastBoundBO.getVAO().release()},t.replaceShaderValues=(r,i,a)=>{t.replaceShaderColor(r,i,a),t.replaceShaderTCoord(r,i,a),t.replaceShaderPicking(r,i,a),t.replaceShaderPositionVC(r,i,a)},t.replaceShaderColor=(r,i,a)=>{let o=r.Vertex,s=r.Geometry,u=r.Fragment;e.haveCellScalars&&(u=Q.substitute(u,"//VTK::Color::Dec",["uniform samplerBuffer texture1;"]).result,u=Q.substitute(u,"//VTK::Color::Impl",["gl_FragData[0] = texelFetchBuffer(texture1, gl_PrimitiveID + PrimitiveIDOffset);"]).result),e.lastBoundBO.getCABO().getColorComponents()!==0?(o=Q.substitute(o,"//VTK::Color::Dec",["in vec4 diffuseColor;","out vec4 fcolorVSOutput;"]).result,o=Q.substitute(o,"//VTK::Color::Impl",["fcolorVSOutput = diffuseColor;"]).result,s=Q.substitute(s,"//VTK::Color::Dec",[`in vec4 fcolorVSOutput[];
`,"out vec4 fcolorGSOutput;"]).result,s=Q.substitute(s,"//VTK::Color::Impl",["fcolorGSOutput = fcolorVSOutput[i];"]).result,u=Q.substitute(u,"//VTK::Color::Dec",["in vec4 fcolorVSOutput;"]).result,u=Q.substitute(u,"//VTK::Color::Impl",["gl_FragData[0] = fcolorVSOutput;"]).result):(u=Q.substitute(u,"//VTK::Color::Dec",["uniform vec4 diffuseColor;"]).result,u=Q.substitute(u,"//VTK::Color::Impl",["gl_FragData[0] = diffuseColor;"]).result),r.Vertex=o,r.Geometry=s,r.Fragment=u},t.replaceShaderTCoord=(r,i,a)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let o=r.Vertex,s=r.Geometry,u=r.Fragment;const l=e.lastBoundBO.getCABO().getTCoordComponents();l===1?(o=Q.substitute(o,"//VTK::TCoord::Dec",["in float tcoordMC;","out float tcoordVCVSOutput;"]).result,o=Q.substitute(o,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,s=Q.substitute(s,"//VTK::TCoord::Dec",[`in float tcoordVCVSOutput[];
`,"out float tcoordVCGSOutput;"]).result,s=Q.substitute(s,["//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,u=Q.substitute(u,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,u=Q.substitute(u,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, vec2(tcoordVCVSOutput,0));"]).result):l===2&&(o=Q.substitute(o,"//VTK::TCoord::Dec",["in vec2 tcoordMC;","out vec2 tcoordVCVSOutput;"]).result,o=Q.substitute(o,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,s=Q.substitute(s,"//VTK::TCoord::Dec",[`in vec2 tcoordVCVSOutput[];
`,"out vec2 tcoordVCGSOutput;"]).result,s=Q.substitute(s,"//VTK::TCoord::Impl",["tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,u=Q.substitute(u,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,u=Q.substitute(u,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, tcoordVCVSOutput.st);"]).result),e.haveCellScalars&&(s=Q.substitute(s,"//VTK::PrimID::Impl",["gl_PrimitiveID = gl_PrimitiveIDIn;"]).result),r.Vertex=o,r.Geometry=s,r.Fragment=u}},t.replaceShaderPicking=(r,i,a)=>{let o=r.Fragment;o=Q.substitute(o,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,o=Q.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,r.Fragment=o},t.replaceShaderPositionVC=(r,i,a)=>{e.lastBoundBO.replaceShaderPositionVC(r,i,a)},t.invokeShaderCallbacks=(r,i,a)=>{const o=e.renderable.getViewSpecificProperties().ShadersCallbacks;o&&o.forEach(s=>{s.callback(s.userData,r,i,a)})},t.setMapperShaderParameters=(r,i,a)=>{if(r.getProgram().isUniformUsed("PrimitiveIDOffset")&&r.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),r.getProgram().isAttributeUsed("vertexWC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexWC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||Fu("Error setting vertexWC in shader VAO.")),r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){e.renderable.getCustomShaderAttributes().forEach((u,l)=>{r.getProgram().isAttributeUsed(`${u}MC`)&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),`${u}MC`,r.getCABO().getCustomData()[l].offset,r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getCustomData()[l].components,!1)||Fu(`Error setting ${u}MC in shader VAO.`))}),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),!1)||Fu("Error setting tcoordMC in shader VAO."):r.getVAO().removeAttributeArray("tcoordMC"),e.internalColorTexture&&r.getProgram().isUniformUsed("texture1")&&r.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const o=e.openGLActor2D.getActiveTextures();if(o)for(let u=0;u<o.length;++u){const p=o[u].getTextureUnit(),c=`texture${p+1}`;r.getProgram().isUniformUsed(c)&&r.getProgram().setUniformi(c,p)}r.setMapperShaderParameters(i,a,e._openGLRenderer.getTiledSizeAndOrigin());const s=e._openGLRenderer.getSelector();r.getProgram().setUniform3fArray("mapperIndex",s?s.getPropColorValue():[0,0,0]),r.getProgram().setUniformi("picking",s?s.getCurrentPass()+1:0)}},t.setPropertyShaderParameters=(r,i,a)=>{const o=e.renderable.getColorMapColors();if(!o||o.getNumberOfComponents()===0){const s=r.getProgram(),u=a.getProperty(),l=u.getOpacity(),p=u.getColor(),c=[p[0],p[1],p[2],l];s.setUniform4f("diffuseColor",c)}},t.setLightingShaderParameters=(r,i,a)=>{};function n(r,i,a){return i.identity(a),r.reduce((o,s,u)=>u===0?s?i.copy(o,s):i.identity(o):s?i.multiply(o,o,s):o,a)}t.setCameraShaderParameters=(r,i,a)=>{const o=r.getProgram(),u=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,p=i.getRenderWindow().getViews()[0].getViewportSize(i),c=i.getViewport(),f=a.getActualPositionCoordinate().getComputedDoubleViewportValue(i),h=[0,0,1,1],v=[0,0,1,1];if(v[0]=c[0]>=h[0]?c[0]:h[0],v[1]=c[1]>=h[1]?c[1]:h[1],v[2]=c[2]<=h[2]?c[2]:h[2],v[3]=c[3]<=h[3]?c[3]:h[3],v[0]>=v[2]||v[1]>=v[3])return;p[0]=Po(p[0]*(v[2]-v[0])/(c[2]-c[0])),p[1]=Po(p[1]*(v[3]-v[1])/(c[3]-c[1]));const y=e._openGLRenderer.getParent().getSize(),x=Po(f[0]-(v[0]-c[0])*y[0]),m=Po(f[1]-(v[1]-c[1])*y[1]),g=-x;let d=-x+p[0];const S=-m;let T=-m+p[1];g===d&&(d=g+1),S===T&&(T=S+1);const C=ye(new Float64Array(16));C[0]=2/(d-g),C[1*4+1]=2/(T-S),C[0*4+3]=-1*(d+g)/(d-g),C[1*4+3]=-1*(T+S)/(T-S),C[2*4+2]=0,C[2*4+3]=a.getProperty().getDisplayLocation()===$5.FOREGROUND?-1:1,C[3*4+3]=1,Fe(C,C),o.setUniformMatrix("WCVCMatrix",n([C,u],Os,e.tmpMat4))},t.getAllocatedGPUMemoryInBytes=()=>{let r=0;return e.primitives.forEach(i=>{r+=i.getAllocatedGPUMemoryInBytes()}),r}}const WO={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null};function jO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,WO,n),He.extend(t,e,n),hr.implementReplaceShaderCoincidentOffset(t,e,n),hr.implementBuildShadersWithReplacements(t,e,n),e.primitives=[],e.primTypes=Gn,e.tmpMat4=ye(new Float64Array(16));for(let r=Gn.Start;r<Gn.End;r++)e.primitives[r]=dr.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);ut(t,e,["context"]),e.VBOBuildTime={},qe(e.VBOBuildTime,{mtime:0}),zO(t,e)}const $O=ze(jO,"vtkOpenGLPolyDataMapper2D");Lt("vtkMapper2D",$O);const{VectorMode:HO}=zc;function Gl(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font=`${e.fontStyle} ${e.fontSize}px ${e.fontFamily}`}function K5(t,e){return n=>{const r=n.getLastSize(),i=(r[0]/700)**.8,a=(r[1]/700)**.8,o=Math.min(i,a),s=n.getAxisTextStyle(),u=n.getTickTextStyle();Object.assign(s,e.axisTextStyle),Object.assign(u,e.tickTextStyle),s.fontSize=Math.max(24*o,12),n.getLastAspectRatio()>1?u.fontSize=Math.max(20*o,10):u.fontSize=Math.max(16*o,10);const l=n.updateTextureAtlas();n.setTopTitle(!1);const p=n.getBoxSizeByReference();if(n.getLastAspectRatio()>1)n.setTickLabelPixelOffset(.3*u.fontSize),l.titleWidth<=l.tickWidth+n.getTickLabelPixelOffset()+.8*u.fontSize?(n.setTopTitle(!0),n.setAxisTitlePixelOffset(.2*u.fontSize),p[0]=2*(l.tickWidth+n.getTickLabelPixelOffset()+.8*u.fontSize)/r[0],n.setBoxPosition([.98-p[0],-.92])):(n.setAxisTitlePixelOffset(.2*u.fontSize),p[0]=2*(l.titleHeight+n.getAxisTitlePixelOffset()+l.tickWidth+n.getTickLabelPixelOffset()+.8*u.fontSize)/r[0],n.setBoxPosition([.99-p[0],-.92])),p[1]=Math.max(1.2,Math.min(1.84/a,1.84));else{n.setAxisTitlePixelOffset(1.2*u.fontSize),n.setTickLabelPixelOffset(.1*u.fontSize);const c=2*(.8*u.fontSize+l.titleHeight+n.getAxisTitlePixelOffset())/r[1],f=2*l.tickWidth/r[0];p[0]=Math.min(1.9,Math.max(1.4,1.4*f*(n.getTicks().length+3))),p[1]=c,n.setBoxPosition([-.5*p[0],-.97])}n.recomputeBarSegments(l)}}function X5(t,e){return n=>{const r=n.getLastTickBounds(),i=Ah().domain([r[0],r[1]]),a=i.ticks(5),o=i.tickFormat(5);n.setTicks(a),n.setTickStrings(a.map(o))}}function KO(t,e){e.classHierarchy.push("vtkScalarBarActorHelper"),t.setRenderable=i=>{e.renderable!==i&&(e.renderable=i,e.barActor.setProperty(i.getProperty()),e.barActor.setParentProp(i),e.barActor.setCoordinateSystemToDisplay(),e.tmActor.setProperty(i.getProperty()),e.tmActor.setParentProp(i),e.tmActor.setCoordinateSystemToDisplay(),e.generateTicks=i.generateTicks,e.axisTextStyle={...i.getAxisTextStyle()},e.tickTextStyle={...i.getTickTextStyle()},t.modified())},t.updateAPISpecificData=(i,a,o)=>{(e.lastSize[0]!==i[0]||e.lastSize[1]!==i[1])&&(e.lastSize[0]=i[0],e.lastSize[1]=i[1],e.lastAspectRatio=i[0]/i[1],e.forceUpdate=!0);const s=e.renderable.getScalarsToColors();if(!(!s||!e.renderable.getVisibility())&&(e.barMapper.setLookupTable(s),e.camera=a,e.renderWindow=o,e.forceUpdate||Math.max(s.getMTime(),t.getMTime(),e.renderable.getMTime())>e.lastRebuildTime.getMTime())){const u=s.getMappingRange();if(e.lastTickBounds=[...u],e.renderable.getGenerateTicks()(t),e.renderable.getAutomated())e.renderable.getAutoLayout()(t);else{e.axisTextStyle={...e.renderable.getAxisTextStyle()},e.tickTextStyle={...e.renderable.getTickTextStyle()},e.barPosition=[...e.renderable.getBarPosition()],e.barSize=[...e.renderable.getBarSize()],e.boxPosition=[...e.renderable.getBoxPosition()],e.boxSize=[...e.renderable.getBoxSize()],e.axisTitlePixelOffset=e.renderable.getAxisTitlePixelOffset(),e.tickLabelPixelOffset=e.renderable.getTickLabelPixelOffset();const l=t.updateTextureAtlas();t.recomputeBarSegments(l)}t.updatePolyDataForLabels(),t.updatePolyDataForBarSegments(),e.lastRebuildTime.modified(),e.forceUpdate=!1}},t.updateTextureAtlas=()=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left";const i={},a=new Map;let o=0,s=1;Gl(e.tmContext,e.axisTextStyle);let u=e.tmContext.measureText(e.renderable.getAxisLabel()),l={height:u.actualBoundingBoxAscent+2,startingHeight:s,width:u.width+2,textStyle:e.axisTextStyle};a.set(e.renderable.getAxisLabel(),l),s+=l.height,o=l.width,i.titleWidth=l.width,i.titleHeight=l.height,i.tickWidth=0,i.tickHeight=0,Gl(e.tmContext,e.tickTextStyle);const p=[...t.getTickStrings(),"NaN","Below","Above"];for(let c=0;c<p.length;c++)a.has(p[c])||(u=e.tmContext.measureText(p[c]),l={height:u.actualBoundingBoxAscent+2,startingHeight:s,width:u.width+2,textStyle:e.tickTextStyle},a.set(p[c],l),s+=l.height,o<l.width&&(o=l.width),i.tickWidth<l.width&&(i.tickWidth=l.width),i.tickHeight<l.height&&(i.tickHeight=l.height));return o=bn(o),s=bn(s),a.forEach(c=>{c.tcoords=[0,(s-c.startingHeight-c.height)/s,c.width/o,(s-c.startingHeight-c.height)/s,c.width/o,(s-c.startingHeight)/s,0,(s-c.startingHeight)/s]}),e.tmCanvas.width=o,e.tmCanvas.height=s,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,o,s),a.forEach((c,f)=>{Gl(e.tmContext,c.textStyle),e.tmContext.fillText(f,1,c.startingHeight+c.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified(),e._tmAtlas=a,i},t.computeBarSize=i=>{e.vertical=e.boxSize[1]>e.boxSize[0];const a=2*i.tickHeight/e.lastSize[1],o=[1,1];if(e.vertical){const s=2*(i.tickWidth+e.tickLabelPixelOffset)/e.lastSize[0];if(e.topTitle){const u=2*(i.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0]-s,e.barSize[1]=e.boxSize[1]-u}else{const u=2*(i.titleHeight+e.axisTitlePixelOffset)/e.lastSize[0];e.barSize[0]=e.boxSize[0]-u-s,e.barSize[1]=e.boxSize[1]}e.barPosition[0]=e.boxPosition[0]+s,e.barPosition[1]=e.boxPosition[1],o[1]=a}else{const s=(2*i.tickWidth-8)/e.lastSize[0],u=2*(i.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0],e.barPosition[0]=e.boxPosition[0],e.barSize[1]=e.boxSize[1]-u,e.barPosition[1]=e.boxPosition[1],o[0]=s}return o},t.recomputeBarSegments=i=>{var f,h,v,y;const a=t.computeBarSize(i);e.barSegments=[];const o=[0,0],s=e.vertical?1:0,u=e.vertical?.01:.02;function l(x,m){e.barSegments.push({corners:[[...o],[o[0]+a[0],o[1]],[o[0]+a[0],o[1]+a[1]],[o[0],o[1]+a[1]]],scalars:m,title:x}),o[s]+=a[s]+u}e.renderable.getDrawNanAnnotation()&&e.renderable.getScalarsToColors().getNanColor()&&l("NaN",[NaN,NaN,NaN,NaN]),e.renderable.getDrawBelowRangeSwatch()&&((h=(f=e.renderable.getScalarsToColors()).getUseBelowRangeColor)!=null&&h.call(f))&&l("Below",[-.1,-.1,-.1,-.1]);const p=(y=(v=e.renderable.getScalarsToColors()).getUseAboveRangeColor)==null?void 0:y.call(v);o[s]+=u;const c=a[s];a[s]=p?1-2*u-a[s]-o[s]:1-u-o[s],l("ticks",e.vertical?[0,0,.995,.995]:[0,.995,.995,0]),e.renderable.getDrawAboveRangeSwatch()&&p&&(a[s]=c,o[s]+=u,l("Above",[1.1,1.1,1.1,1.1]))};const n=new Float64Array(3);t.createPolyDataForOneLabel=(i,a,o,s,u,l)=>{const p=e._tmAtlas.get(i);if(!p)return;let c=l.ptIdx,f=l.cellIdx;n[0]=(.5*a[0]+.5)*e.lastSize[0],n[1]=(.5*a[1]+.5)*e.lastSize[1],n[2]=a[2],n[0]+=u[0],n[1]+=u[1];const h=[],v=s==="vertical"?[1,0]:[0,1];s==="vertical"?(h[0]=p.width,h[1]=-p.height,o[0]==="middle"?n[1]-=p.width/2:o[0]==="right"&&(n[1]-=p.width),o[1]==="middle"?n[0]+=p.height/2:o[1]==="top"&&(n[0]+=p.height)):(h[0]=p.width,h[1]=p.height,o[0]==="middle"?n[0]-=p.width/2:o[0]==="right"&&(n[0]-=p.width),o[1]==="middle"?n[1]-=p.height/2:o[1]==="top"&&(n[1]-=p.height)),l.points[c*3]=n[0],l.points[c*3+1]=n[1],l.points[c*3+2]=n[2],l.tcoords[c*2]=p.tcoords[0],l.tcoords[c*2+1]=p.tcoords[1],c++,n[v[0]]+=h[0],l.points[c*3]=n[0],l.points[c*3+1]=n[1],l.points[c*3+2]=n[2],l.tcoords[c*2]=p.tcoords[2],l.tcoords[c*2+1]=p.tcoords[3],c++,n[v[1]]+=h[1],l.points[c*3]=n[0],l.points[c*3+1]=n[1],l.points[c*3+2]=n[2],l.tcoords[c*2]=p.tcoords[4],l.tcoords[c*2+1]=p.tcoords[5],c++,n[v[0]]-=h[0],l.points[c*3]=n[0],l.points[c*3+1]=n[1],l.points[c*3+2]=n[2],l.tcoords[c*2]=p.tcoords[6],l.tcoords[c*2+1]=p.tcoords[7],c++,l.polys[f*4]=3,l.polys[f*4+1]=c-4,l.polys[f*4+2]=c-3,l.polys[f*4+3]=c-2,f++,l.polys[f*4]=3,l.polys[f*4+1]=c-4,l.polys[f*4+2]=c-2,l.polys[f*4+3]=c-1,l.ptIdx+=4,l.cellIdx+=2};const r=new Float64Array(3);t.updatePolyDataForLabels=()=>{const i=t.getTickStrings().length+e.barSegments.length,a=i*4,o=i*2,s=new Float64Array(a*3),u=new Uint16Array(o*4),l=new Float32Array(a*2),p={ptIdx:0,cellIdx:0,polys:u,points:s,tcoords:l},c=e.vertical?0:1,f=e.vertical?1:0;r[2]=-.99;const h=e.vertical?["right","middle"]:["middle","bottom"];let v=[0,1];const y=[0,0];e.vertical?(y[0]=-e.tickLabelPixelOffset,e.topTitle?(r[0]=e.boxPosition[0]+.5*e.boxSize[0],r[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],p)):(r[0]=e.barPosition[0]+e.barSize[0],r[1]=e.barPosition[1]+.5*e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","top"],"vertical",[e.axisTitlePixelOffset,0],p)),v=[-1,0]):(y[1]=e.tickLabelPixelOffset,r[0]=e.barPosition[0]+.5*e.barSize[0],r[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],p)),r[c]=e.barPosition[c]+(.5*v[c]+.5)*e.barSize[c],r[f]=e.barPosition[f]+e.barSize[f]*.5;let x=null;for(let C=0;C<e.barSegments.length;C++){const w=e.barSegments[C];w.title==="ticks"?x=w:(r[f]=e.barPosition[f]+.5*e.barSize[f]*(w.corners[2][f]+w.corners[0][f]),t.createPolyDataForOneLabel(w.title,r,h,"horizontal",y,p))}const m=e.barPosition[f]+e.barSize[f]*x.corners[0][f],g=e.barSize[f]*(x.corners[2][f]-x.corners[0][f]),d=t.getTicks(),S=t.getTickStrings();for(let C=0;C<d.length;C++){const w=(d[C]-e.lastTickBounds[0])/(e.lastTickBounds[1]-e.lastTickBounds[0]);r[f]=m+g*w,t.createPolyDataForOneLabel(S[C],r,h,"horizontal",y,p)}const T=Ee.newInstance({numberOfComponents:2,values:l,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(T),e.tmPolyData.getPoints().setData(s,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(u,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updatePolyDataForBarSegments=()=>{var y,x;const i=e.renderable.getScalarsToColors();let a=0;e.renderable.getDrawNanAnnotation()&&i.getNanColor()&&(a+=1),e.renderable.getDrawBelowRangeSwatch()&&((y=i.getUseBelowRangeColor)!=null&&y.call(i))&&(a+=1),e.renderable.getDrawAboveRangeSwatch()&&((x=i.getUseAboveRangeColor)!=null&&x.call(i))&&(a+=1);const o=4*(1+a),s=o;let u=1;i.getVectorMode()===HO.COMPONENT&&(u=i.getVectorComponent()+1);const l=new Float64Array(o*3),p=new Uint16Array(s*5),c=new Float32Array(o*u);let f=0,h=0;for(let m=0;m<e.barSegments.length;m++){const g=e.barSegments[m];for(let d=0;d<4;d++){r[0]=e.barPosition[0]+g.corners[d][0]*e.barSize[0],r[1]=e.barPosition[1]+g.corners[d][1]*e.barSize[1],l[f*3]=(.5*r[0]+.5)*e.lastSize[0],l[f*3+1]=(.5*r[1]+.5)*e.lastSize[1],l[f*3+2]=r[2];for(let S=0;S<u;S++)c[f*u+S]=e.lastTickBounds[0]+g.scalars[d]*(e.lastTickBounds[1]-e.lastTickBounds[0]);f++}p[h*5]=4,p[h*5+1]=f-4,p[h*5+2]=f-3,p[h*5+3]=f-2,p[h*5+4]=f-1,h++}const v=Ee.newInstance({numberOfComponents:u,values:c,name:"Scalars"});e.polyData.getPointData().setScalars(v),e.polyData.getPoints().setData(l,3),e.polyData.getPoints().modified(),e.polyData.getPolys().setData(p,1),e.polyData.getPolys().modified(),e.polyData.modified()}}const XO=P.newInstance(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},n),P.obj(t,e),P.setGet(t,e,["axisTitlePixelOffset","tickLabelPixelOffset","renderable","topTitle","ticks","tickStrings"]),P.get(t,e,["lastSize","lastAspectRatio","lastTickBounds","axisTextStyle","tickTextStyle","barActor","tmActor"]),P.getArray(t,e,["boxPosition","boxSize"]),P.setArray(t,e,["boxPosition","boxSize"],2),e.forceUpdate=!1,e.lastRebuildTime={},P.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.barMapper=ua.newInstance(),e.barMapper.setInterpolateScalarsBeforeMapping(!0),e.barMapper.setUseLookupTableScalarRange(!0),e.polyData=sn.newInstance(),e.barMapper.setInputData(e.polyData),e.barActor=sa.newInstance(),e.barActor.setMapper(e.barMapper),e.tmPolyData=sn.newInstance(),e.tmMapper=ua.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmTexture=jc.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),e.tmActor=sa.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),e.tmActor.addTexture(e.tmTexture),e.barPosition=[0,0],e.barSize=[0,0],e.boxPosition=[.88,-.92],e.boxSize=[.1,1.1],e.lastTickBounds=[],KO(t,e)},"vtkScalarBarActorHelper");function qO(t,e){e.classHierarchy.push("vtkScalarBarActor"),t.setTickTextStyle=n=>{e.tickTextStyle={...e.tickTextStyle,...n},t.modified()},t.setAxisTextStyle=n=>{e.axisTextStyle={...e.axisTextStyle,...n},t.modified()},t.resetAutoLayoutToDefault=()=>{t.setAutoLayout(K5(t,e))},t.resetGenerateTicksToDefault=()=>{t.setGenerateTicks(X5())}}function YO(t){return{automated:!0,autoLayout:null,axisLabel:"Scalar Value",barPosition:[0,0],barSize:[0,0],boxPosition:[.88,-.92],boxSize:[.1,1.1],scalarToColors:null,axisTitlePixelOffset:36,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:14,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"},generateTicks:null,drawNanAnnotation:!0,drawBelowRangeSwatch:!0,drawAboveRangeSwatch:!0,...t}}function q5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,YO(n)),e.autoLayout||(e.autoLayout=K5(t,e)),e.generateTicks||(e.generateTicks=X5()),sa.extend(t,e,n),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),P.setGet(t,e,["automated","autoLayout","axisTitlePixelOffset","axisLabel","scalarsToColors","tickLabelPixelOffset","generateTicks","drawNanAnnotation","drawBelowRangeSwatch","drawAboveRangeSwatch"]),P.get(t,e,["axisTextStyle","tickTextStyle"]),P.getArray(t,e,["barPosition","barSize","boxPosition","boxSize"]),P.setArray(t,e,["barPosition","barSize","boxPosition","boxSize"],2),qO(t,e)}const JO=P.newInstance(q5,"vtkScalarBarActor");var Y5={newInstance:JO,extend:q5,newScalarBarActorHelper:XO};function QO(t,e){e.classHierarchy.push("vtkOpenGLScalarBarActor"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const i=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,a=e._openGLRenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([a.usize,a.vsize],i,e._openGLRenderWindow.getRenderable())}}}const ZO={};function eb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ZO,n),He.extend(t,e,n),e.scalarBarActorHelper=Y5.newScalarBarActorHelper(),QO(t,e)}const tb=ze(eb,"vtkOpenGLScalarBarActor");Lt("vtkScalarBarActor",tb);const{vtkErrorMacro:zd}=un;function nb(t,e){e.classHierarchy.push("vtkOpenGLSkybox"),t.buildPass=n=>{if(n){e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const r=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(r.getActiveCamera())}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementOpaqueActorCount()}},t.opaquePass=(n,r)=>{if(n&&!e._openGLRenderer.getSelector()){t.updateBufferObjects(),e.context.depthMask(!0),e._openGLRenderWindow.getShaderCache().readyShaderProgram(e.tris.getProgram()),e.openGLTexture.render(e._openGLRenderWindow);const i=e.openGLTexture.getTextureUnit();e.tris.getProgram().setUniformi("sbtexture",i);const a=e._openGLRenderer.getRenderable(),o=e.openGLCamera.getKeyMatrices(a),s=new Float64Array(16);if(yt(s,o.wcpc),e.tris.getProgram().setUniformMatrix("IMCPCMatrix",s),e.lastFormat==="box"){const u=a.getActiveCamera().getPosition();e.tris.getProgram().setUniform3f("camPos",u[0],u[1],u[2])}e.tris.getVAO().bind(),e.context.drawArrays(e.context.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.openGLTexture.deactivate()}},t.updateBufferObjects=()=>{if(!e.tris.getCABO().getElementCount()){const r=new Float32Array(12);for(let s=0;s<4;s++)r[s*3]=s%2*2-1,r[s*3+1]=s>1?1:-1,r[s*3+2]=1;const i=Ee.newInstance({numberOfComponents:3,values:r});i.setName("points");const a=new Uint16Array(8);a[0]=3,a[1]=0,a[2]=1,a[3]=3,a[4]=3,a[5]=0,a[6]=3,a[7]=2;const o=Ee.newInstance({numberOfComponents:1,values:a});e.tris.getCABO().createVBO(o,"polys",zt.SURFACE,{points:i,cellOffset:0})}e.renderable.getFormat()!==e.lastFormat&&(e.lastFormat=e.renderable.getFormat(),e.lastFormat==="box"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec3 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = wpos.xyz/wpos.w;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec3 TexCoords;
             uniform samplerCube sbtexture;
             uniform vec3 camPos;
             void main () {
               // skybox looks from inside out
               // which means we have to adjust
               // our tcoords. Otherwise text would
               // be flipped
               vec3 tc = normalize(TexCoords - camPos);
               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))
               {
                 tc = vec3(1.0, 1.0, -1.0) * tc;
               }
               else
               {
                 tc = vec3(-1.0, 1.0, 1.0) * tc;
               }
               gl_FragData[0] = textureCube(sbtexture, tc);
             }`,"")),e.lastFormat==="background"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec2 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec2 TexCoords;
             uniform sampler2D sbtexture;
             void main () {
               gl_FragData[0] = texture2D(sbtexture, TexCoords);
             }`,"")),e.tris.getShaderSourceTime().modified(),e.tris.getVAO().bind(),e.tris.getVAO().addAttributeArray(e.tris.getProgram(),e.tris.getCABO(),"vertexMC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||zd("Error setting vertexMC in shader VAO."));const n=e.renderable.getTextures();n.length||zd("vtkSkybox requires a texture map"),e.openGLTexture.getRenderable()!==n[0]&&(e.openGLTexture.releaseGraphicsResources(e._openGLRenderWindow),e.openGLTexture.setRenderable(n[0]))}}const rb={context:null};function ib(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,rb,n),He.extend(t,e,n),e.openGLTexture=vt.newInstance(),e.tris=dr.newInstance(),e.keyMatrixTime={},qe(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:gr(new Float64Array(9)),mcwc:ye(new Float64Array(16))},ut(t,e,["context"]),Ut(t,e,["activeTextures"]),nb(t,e)}const ab=ze(ib);Lt("vtkSkybox",ab);const{vtkDebugMacro:ob}=un;function sb(t,e){e.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),t.opaquePass=(n,r)=>{e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow");const i=e._openGLRenderer.getAspectRatio(),a=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,o=e._openGLRenderer.getTiledSizeAndOrigin();let s=null;if(e.renderable.getUseZValues()){const u=r.getZBufferTexture(),l=Math.floor(u.getWidth()),p=Math.floor(u.getHeight()),c=e._openGLRenderWindow.getContext();u.bind();const f=r.getFramebuffer();f?f.saveCurrentBindingsAndBuffers():ob("No framebuffer to save/restore");const h=c.createFramebuffer();c.bindFramebuffer(c.FRAMEBUFFER,h),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,u.getHandle(),0),c.checkFramebufferStatus(c.FRAMEBUFFER)===c.FRAMEBUFFER_COMPLETE&&(s=new Uint8Array(l*p*4),c.viewport(0,0,l,p),c.readPixels(0,0,l,p,c.RGBA,c.UNSIGNED_BYTE,s)),f&&f.restorePreviousBindingsAndBuffers(),c.deleteFramebuffer(h)}e.renderable.invokeCallback(e.renderable.getInputData(),a,i,o,s)},t.queryPass=(n,r)=>{n&&e.renderable.getUseZValues()&&r.requestDepth()}}const ub={};function cb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ub,n),He.extend(t,e,n),sb(t,e)}const lb=ze(cb,"vtkOpenGLPixelSpaceCallbackMapper");Lt("vtkPixelSpaceCallbackMapper",lb);const J5=Object.create(null);function Sn(t,e){J5[t]=e}function fb(t,e){e.classHierarchy.push("vtkWebGPUViewNodeFactory")}const pb={};function Q5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,pb,n),e.overrides=J5,Vy.extend(t,e,n),fb(t,e)}const hb=P.newInstance(Q5,"vtkWebGPUViewNodeFactory");var gb={newInstance:hb,extend:Q5};function db(t,e){e.classHierarchy.push("vtkWebGPUCamera"),t.getProjectionMatrix=(n,r,i,a)=>{if(ye(n),e.renderable.getParallelProjection()){const o=e.renderable.getParallelScale(),s=o*r,u=o,l=(a[0]-1)*s,p=(a[0]+1)*s,c=(a[1]-1)*u,f=(a[1]+1)*u,h=1/(p-l),v=1/(f-c);n[0]=2*h,n[5]=2*v,n[10]=1/(i[1]-i[0]),n[12]=(p+l)*h,n[13]=(f+c)*v,n[14]=i[1]/(i[1]-i[0])}else{const o=Math.tan(Math.PI*e.renderable.getViewAngle()/360);let s,u;e.renderable.getUseHorizontalViewAngle()===!0?(s=i[0]*o,u=i[0]*o/r):(s=i[0]*o*r,u=i[0]*o);const l=(a[0]-1)*s,p=(a[0]+1)*s,c=(a[1]-1)*u,f=(a[1]+1)*u;n[0]=2*i[0]/(p-l),n[5]=2*i[0]/(f-c),n[12]=(l+p)/(p-l),n[13]=(c+f)/(f-c),n[10]=0,n[14]=i[0],n[11]=-1,n[15]=0}},t.convertToOpenGLDepth=n=>{if(e.renderable.getParallelProjection())return 1-n;const r=e.renderable.getClippingRangeByReference();let i=-r[0]/n;return i=(r[0]+r[1])/(r[1]-r[0])+2*r[0]*r[1]/(i*(r[1]-r[0])),.5*i+.5},t.getKeyMatrices=n=>{const r=n.getRenderable(),i=n.getParent();if(Math.max(i.getMTime(),t.getMTime(),r.getMTime(),e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatrixTime.getMTime()){const a=e.renderable.getViewMatrix();ft(e.keyMatrices.normalMatrix,a),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,yt(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),Fe(e.keyMatrices.wcvc,a);const o=n.getStabilizedCenterByReference();Ze(e.keyMatrices.scvc,e.keyMatrices.wcvc,o);const s=n.getAspectRatio(),u=e.renderable.getClippingRangeByReference();t.getProjectionMatrix(e.keyMatrices.vcpc,s,u,e.renderable.getWindowCenterByReference()),Le(e.keyMatrices.scpc,e.keyMatrices.vcpc,e.keyMatrices.scvc),yt(e.keyMatrices.pcsc,e.keyMatrices.scpc),e.keyMatrixTime.modified()}return e.keyMatrices}}const vb={keyMatrixTime:null,keyMatrices:null};function yb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vb,n),He.extend(t,e,n),e.keyMatrixTime={},P.obj(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(16),vcpc:new Float64Array(16),pcsc:new Float64Array(16),wcvc:new Float64Array(16),scpc:new Float64Array(16),scvc:new Float64Array(16)},P.setGet(t,e,["keyMatrixTime"]),db(t,e)}const mb=P.newInstance(yb);Sn("vtkCamera",mb);function xb(t,e){e.classHierarchy.push("vtkWebGPUBindGroup"),t.setBindables=n=>{if(e.bindables.length===n.length){let r=!0;for(let i=0;i<e.bindables.length;i++)e.bindables[i]!==n[i]&&(r=!1);if(r)return}e.bindables=n,t.modified()},t.getBindGroupLayout=n=>{const r=[];for(let i=0;i<e.bindables.length;i++){const a=e.bindables[i].getBindGroupLayoutEntry();a.binding=i,r.push(a)}return n.getBindGroupLayout({entries:r})},t.getBindGroup=n=>{let r=t.getMTime();for(let a=0;a<e.bindables.length;a++){const o=e.bindables[a].getBindGroupTime().getMTime();r=o>r?o:r}if(r<e.bindGroupTime.getMTime())return e.bindGroup;const i=[];for(let a=0;a<e.bindables.length;a++){const o=e.bindables[a].getBindGroupEntry();o.binding=a,i.push(o)}return e.bindGroup=n.getHandle().createBindGroup({layout:t.getBindGroupLayout(n),entries:i,label:e.label}),e.bindGroupTime.modified(),e.bindGroup},t.getShaderCode=n=>{const r=[],i=n.getBindGroupLayoutCount(e.label);for(let a=0;a<e.bindables.length;a++)r.push(e.bindables[a].getShaderCode(a,i));return r.join(`
`)}}const Sb={device:null,handle:null,label:null};function Z5(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Sb,n),P.obj(t,e),e.bindables=[],e.bindGroupTime={},P.obj(e.bindGroupTime,{mtime:0}),P.get(t,e,["bindGroupTime","handle","sizeInBytes","usage"]),P.setGet(t,e,["label","device","arrayInformation"]),xb(t,e)}const Tb=P.newInstance(Z5);var e4={newInstance:Tb,extend:Z5};function Cb(t,e){e.classHierarchy.push("vtkWebGPUShaderModule"),t.initialize=(n,r)=>{e.device=n,e.handle=e.device.getHandle().createShaderModule({code:r.getCode()})}}const wb={device:null,handle:null};function t4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,wb,n),P.obj(t,e),P.get(t,e,["lastCameraMTime"]),P.setGet(t,e,["device","handle"]),Cb(t,e)}const _b=P.newInstance(t4,"vtkWebGPUShaderModule");var Eb={newInstance:_b,extend:t4};function Db(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const i=Array.isArray(n)?n.join(`
`):n;let a=!1;t.search(e)!==-1&&(a=!0);let o="";r&&(o="g");const s=new RegExp(e,o),u=t.replace(s,i);return{replace:a,result:u}}function Ob(t,e){e.classHierarchy.push("vtkWebGPUShaderCache"),t.getShaderModule=n=>{const r=n.getType(),i=n.getHash(),a=e._shaderModules.keys();for(let s=0;s<a.length;s++){const u=a[s];if(u.getHash()===i&&u.getType()===r)return e._shaderModules.get(u)}const o=Eb.newInstance();return o.initialize(e.device,n),e._shaderModules.set(n,o),o}}const bb={shaderModules:null,device:null,window:null};function n4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bb,n),e._shaderModules=new Map,P.obj(t,e),P.setGet(t,e,["device","window"]),Ob(t,e)}const Nb=P.newInstance(n4,"vtkWebGPUShaderCache");var _e={newInstance:Nb,extend:n4,substitute:Db};function Mb(t,e){e.classHierarchy.push("vtkWebGPUPipeline"),t.getShaderDescriptions=()=>e.shaderDescriptions,t.initialize=(n,r)=>{e.pipelineDescription=e.renderEncoder.getPipelineSettings(),e.pipelineDescription.primitive.topology=e.topology,e.pipelineDescription.vertex=e.vertexState,e.pipelineDescription.label=r;const i=[];for(let a=0;a<e.layouts.length;a++)i.push(e.layouts[a].layout);e.pipelineLayout=n.getHandle().createPipelineLayout({bindGroupLayouts:i}),e.pipelineDescription.layout=e.pipelineLayout;for(let a=0;a<e.shaderDescriptions.length;a++){const o=e.shaderDescriptions[a],s=n.getShaderModule(o);o.getType()==="vertex"&&(e.pipelineDescription.vertex.module=s.getHandle(),e.pipelineDescription.vertex.entryPoint="main"),o.getType()==="fragment"&&(e.pipelineDescription.fragment.module=s.getHandle(),e.pipelineDescription.fragment.entryPoint="main")}e.handle=n.getHandle().createRenderPipeline(e.pipelineDescription)},t.getShaderDescription=n=>{for(let r=0;r<e.shaderDescriptions.length;r++)if(e.shaderDescriptions[r].getType()===n)return e.shaderDescriptions[r];return null},t.addBindGroupLayout=n=>{n&&e.layouts.push({layout:n.getBindGroupLayout(e.device),label:n.getLabel()})},t.getBindGroupLayout=n=>e.layouts[n].layout,t.getBindGroupLayoutCount=n=>{for(let r=0;r<e.layouts.length;r++)if(e.layouts[r].label===n)return r;return 0},t.bindVertexInput=(n,r)=>{r.bindBuffers(n)}}const Rb={handle:null,layouts:null,renderEncoder:null,shaderDescriptions:null,vertexState:null,topology:null,pipelineDescription:null};function r4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Rb,n),qe(t,e),e.layouts=[],e.shaderDescriptions=[],Ut(t,e,["handle","pipelineDescription"]),ut(t,e,["device","renderEncoder","topology","vertexState"]),Mb(t,e)}const Fb=ze(r4,"vtkWebGPUPipeline");var Lb={newInstance:Fb,extend:r4};function kb(t,e){e.classHierarchy.push("vtkWebGPUShaderDescription"),t.hasOutput=n=>e.outputNames.includes(n),t.addOutput=function(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;e.outputTypes.push(n),e.outputNames.push(r),e.outputInterpolations.push(i)},t.addBuiltinOutput=(n,r)=>{e.builtinOutputTypes.push(n),e.builtinOutputNames.push(r)},t.addBuiltinInput=(n,r)=>{e.builtinInputTypes.push(n),e.builtinInputNames.push(r)},t.replaceShaderCode=(n,r)=>{const i=[];let a=[];if(r&&i.push(r.getShaderCode()),n||e.builtinInputNames.length){const o=[];if(o.push(`struct ${e.type}Input
{`),n){const s=n.getOutputNamesByReference(),u=n.getOutputTypesByReference(),l=n.getOutputInterpolationsByReference();for(let p=0;p<s.length;p++)l[p]!==void 0?o.push(`  @location(${p}) @interpolate(${l[p]}) ${s[p]} : ${u[p]},`):o.push(`  @location(${p}) ${s[p]} : ${u[p]},`)}for(let s=0;s<e.builtinInputNames.length;s++)o.push(`  ${e.builtinInputNames[s]} : ${e.builtinInputTypes[s]},`);o.length>1&&(o.push("};"),a=o,i[i.length-1]+=",",i.push(`input: ${e.type}Input`))}if(i.length&&(e.code=_e.substitute(e.code,"//VTK::IOStructs::Input",i).result),e.outputNames.length+e.builtinOutputNames.length){const o=[`struct ${e.type}Output
{`];for(let s=0;s<e.outputNames.length;s++)e.outputInterpolations[s]!==void 0?o.push(`  @location(${s}) @interpolate(${e.outputInterpolations[s]}) ${e.outputNames[s]} : ${e.outputTypes[s]},`):o.push(`  @location(${s}) ${e.outputNames[s]} : ${e.outputTypes[s]},`);for(let s=0;s<e.builtinOutputNames.length;s++)o.push(`  ${e.builtinOutputNames[s]} : ${e.builtinOutputTypes[s]},`);o.push("};"),a=a.concat(o),e.code=_e.substitute(e.code,"//VTK::IOStructs::Output",[`-> ${e.type}Output`]).result}e.code=_e.substitute(e.code,"//VTK::IOStructs::Dec",a).result}}const Bb={type:null,hash:null,code:null,outputNames:null,outputTypes:null};function i4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Bb,n),e.outputNames=[],e.outputTypes=[],e.outputInterpolations=[],e.builtinOutputNames=[],e.builtinOutputTypes=[],e.builtinInputNames=[],e.builtinInputTypes=[],P.obj(t,e),P.setGet(t,e,["type","hash","code"]),P.getArray(t,e,["outputTypes","outputNames","outputInterpolations"]),kb(t,e)}const Vb=P.newInstance(i4,"vtkWebGPUShaderDescription");var Wd={newInstance:Vb,extend:i4};const jd={r8unorm:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"float"},r8snorm:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"float"},r8uint:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},r8sint:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"sint"},r16uint:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"uint"},r16sint:{numComponents:1,nativeType:Int16Array,stride:2,elementSize:2,sampleType:"sint"},r16float:{numComponents:1,nativeType:Float32Array,stride:2,elementSize:2,sampleType:"float"},rg8unorm:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"float"},rg8snorm:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"float"},rg8uint:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"uint"},rg8sint:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"sint"},r32uint:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:4,sampleType:"uint"},r32sint:{numComponents:1,nativeType:Int32Array,stride:4,elementSize:4,sampleType:"sint"},r32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"unfilterable-float"},rg16uint:{numComponents:2,nativeType:Uint16Array,stride:4,elementSize:2,sampleType:"uint"},rg16sint:{numComponents:2,nativeType:Int16Array,stride:4,elementSize:2,sampleType:"sint"},rg16float:{numComponents:2,nativeType:Float32Array,stride:4,elementSize:2,sampleType:"float"},rgba8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"rgba8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgba8snorm:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"float"},rgba8uint:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"uint"},rgba8sint:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"sint"},bgra8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"bgra8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgb9e5ufloat:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rgb10a2unorm:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rg11b10ufloat:{numComponents:4,nativeType:Float32Array,stride:4,sampleType:"float"},rg32uint:{numComponents:2,nativeType:Uint32Array,stride:8,elementSize:4,sampleType:"uint"},rg32sint:{numComponents:2,nativeType:Int32Array,stride:8,elementSize:4,sampleType:"sint"},rg32float:{numComponents:2,nativeType:Float32Array,stride:8,elementSize:4,sampleType:"unfilterable-float"},rgba16uint:{numComponents:4,nativeType:Uint16Array,stride:8,elementSize:2,sampleType:"uint"},rgba16sint:{numComponents:4,nativeType:Int16Array,stride:8,elementSize:2,sampleType:"sint"},rgba16float:{numComponents:4,nativeType:Float32Array,stride:8,elementSize:2,sampleType:"float"},rgba32uint:{numComponents:4,nativeType:Uint32Array,stride:16,elementSize:4,sampleType:"uint"},rgba32sint:{numComponents:4,nativeType:Int32Array,stride:16,elementSize:4,sampleType:"sint"},rgba32float:{numComponents:4,nativeType:Float32Array,stride:16,elementSize:4,sampleType:"unfilterable-float"},stencil8:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},depth16unorm:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"depth"},depth24plus:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:3,sampleType:"depth"},"depth24plus-stencil8":{numComponents:2,nativeType:Uint32Array,stride:4,sampleType:"mixed"},depth32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"depth"}};function Ab(t){return!t||t.length<6?0:t in jd?jd[t]:(Me(`unknown format ${t}`),null)}function Ub(t){if(!t||t.length<5)return 0;let e=1;t[t.length-2]==="x"&&(e=Number(t[t.length-1]));const n=e===1?t.length-1:t.length-3,r=Number(t[n]);if(Number.isNaN(r))return Me(`unknown format ${t}`),0;const i=5-r/2;return e*i}function Gb(t){if(!t||t.length<5)return 0;let e=1;return t[t.length-2]==="x"&&(e=Number(t[t.length-1])),e}function Pb(t){if(!t||t.length<5)return 0;let e;if(t[0]==="f")e="Float";else if(t[0]==="s")e="Int";else if(t[0]==="u")e="Uint";else{Me(`unknown format ${t}`);return}const n=t.split("x")[0],r=Number(n[n.length-1]);if(Number.isNaN(r)){Me(`unknown format ${t}`);return}return e+=8*(5-r/2),e+="Array",e}function Ib(t){let e;if(t[0]==="f"||t[1]==="n")e="f32";else if(t[0]==="s"&&t[1]==="i")e="i32";else if(t[0]==="u"&&t[1]==="i")e="u32";else{Me(`unknown format ${t}`);return}let n=1;return t[t.length-2]==="x"&&(n=Number(t[t.length-1])),n===4?`vec4<${e}>`:n===3?`vec3<${e}>`:n===2?`vec2<${e}>`:e}function zb(t){if(!t)return 0;let e=1;return t.substring(0,3)==="vec"?e=Number(t[3]):t.substring(0,3)==="mat"&&(e=t[3]*t[5]),e*4}function Wb(t){if(t){if(t.includes("f32"))return"Float32Array";if(t.includes("i32"))return"Int32Array";if(t.includes("u32"))return"Uint32Array";Me(`unknown format ${t}`)}}var Mt={getDetailsFromTextureFormat:Ab,getByteStrideFromBufferFormat:Ub,getNumberOfComponentsFromBufferFormat:Gb,getNativeTypeFromBufferFormat:Pb,getShaderTypeFromBufferFormat:Ib,getByteStrideFromShaderFormat:zb,getNativeTypeFromShaderFormat:Wb};function jb(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!e.includes(t[n]))return!1;return!0}function $b(t,e){e.classHierarchy.push("vtkWebGPUVertexInput"),t.addBuffer=function(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"vertex",a=r;Array.isArray(a)||(a=[a]);for(let o=0;o<e.inputs.length;o++)if(jb(e.inputs[o].names,a)){if(e.inputs[o].buffer===n)return;e.inputs[o].buffer=n;return}e.inputs.push({buffer:n,stepMode:i,names:a}),e.inputs=e.inputs.sort((o,s)=>o.names[0]<s.names[0]?-1:o.names[0]>s.names[0]?1:0)},t.removeBufferIfPresent=n=>{for(let r=0;r<e.inputs.length;r++)e.inputs[r].names.includes(n)&&e.inputs.splice(r,1)},t.getBuffer=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return e.inputs[r].buffer;return null},t.hasAttribute=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return!0;return!1},t.getAttributeTime=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return e.inputs[r].buffer.getSourceTime();return 0},t.getShaderCode=()=>{let n="",r=0;for(let i=0;i<e.inputs.length;i++)for(let a=0;a<e.inputs[i].names.length;a++){const o=e.inputs[i].buffer.getArrayInformation()[a],s=Mt.getShaderTypeFromBufferFormat(o.format);r>0&&(n+=`,
`),n=`${n}  @location(${r}) ${e.inputs[i].names[a]} : ${s}`,r++}return n},t.getVertexInputInformation=()=>{const n={};if(e.inputs.length){const r=[];let i=0;for(let a=0;a<e.inputs.length;a++){const o=e.inputs[a].buffer,s={arrayStride:o.getStrideInBytes(),stepMode:e.inputs[a].stepMode,attributes:[]},u=o.getArrayInformation();for(let l=0;l<e.inputs[a].names.length;l++)s.attributes.push({shaderLocation:i,offset:u[l].offset,format:u[l].format}),i++;r.push(s)}n.buffers=r}return n},t.bindBuffers=n=>{for(let r=0;r<e.inputs.length;r++)n.setVertexBuffer(r,e.inputs[r].buffer.getHandle());e.indexBuffer&&n.setIndexBuffer(e.indexBuffer.getHandle(),e.indexBuffer.getArrayInformation()[0].format)},t.getReady=()=>{},t.releaseGraphicsResources=()=>{e.created&&(e.inputs=[],e.bindingDescriptions=[],e.attributeDescriptions=[])}}const Hb={inputs:null,bindingDescriptions:!1,attributeDescriptions:null,indexBuffer:null};function a4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Hb,n),qe(t,e),e.bindingDescriptions=[],e.attributeDescriptions=[],e.inputs=[],ut(t,e,["created","device","handle","indexBuffer"]),$b(t,e)}const Kb=ze(a4,"vtkWebGPUVertexInput");var Xb={newInstance:Kb,extend:a4};const qb=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@vertex
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : vertexOutput;

  // var vertex: vec4<f32> = vertexBC;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  //VTK::Position::Impl

  return output;
}
`,Yb=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::Light::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  // var computedColor:vec4<f32> = vec4<f32>(1.0,0.5,0.5,1.0);

  //VTK::RenderEncoder::Impl
  return output;
}
`;function Jb(t,e){e.classHierarchy.push("vtkWebGPUSimpleMapper"),t.generateShaderDescriptions=(n,r,i)=>{const a=Wd.newInstance({type:"vertex",hash:n,code:e.vertexShaderTemplate}),o=Wd.newInstance({type:"fragment",hash:n,code:e.fragmentShaderTemplate}),s=r.getShaderDescriptions();s.push(a),s.push(o);const u=e.vertexShaderTemplate+e.fragmentShaderTemplate,l=new RegExp("//VTK::[^:]*::","g"),c=u.match(l).filter((f,h,v)=>v.indexOf(f)===h).map(f=>`replaceShader${f.substring(7,f.length-2)}`);for(let f=0;f<c.length;f++){const h=c[f];h!=="replaceShaderIOStructs"&&e.shaderReplacements.has(h)&&e.shaderReplacements.get(h)(n,r,i)}t.replaceShaderIOStructs(n,r,i)},t.replaceShaderIOStructs=(n,r,i)=>{const a=r.getShaderDescription("vertex");a.replaceShaderCode(null,i),r.getShaderDescription("fragment").replaceShaderCode(a)},t.replaceShaderRenderEncoder=(n,r,i)=>{e.renderEncoder.replaceShaderCode(r)},e.shaderReplacements.set("replaceShaderRenderEncoder",t.replaceShaderRenderEncoder),t.replaceShaderRenderer=(n,r,i)=>{if(!e.WebGPURenderer)return;const a=e.WebGPURenderer.getBindGroup().getShaderCode(r),o=r.getShaderDescription("vertex");let s=o.getCode();s=_e.substitute(s,"//VTK::Renderer::Dec",[a]).result,o.setCode(s);const u=r.getShaderDescription("fragment");s=u.getCode(),s=_e.substitute(s,"//VTK::Renderer::Dec",[a]).result,u.setCode(s)},e.shaderReplacements.set("replaceShaderRenderer",t.replaceShaderRenderer),t.replaceShaderMapper=(n,r,i)=>{const a=e.bindGroup.getShaderCode(r),o=r.getShaderDescription("vertex");let s=o.getCode();s=_e.substitute(s,"//VTK::Mapper::Dec",[a]).result,o.setCode(s);const u=r.getShaderDescription("fragment");u.addBuiltinInput("bool","@builtin(front_facing) frontFacing"),s=u.getCode(),s=_e.substitute(s,"//VTK::Mapper::Dec",[a]).result,u.setCode(s)},e.shaderReplacements.set("replaceShaderMapper",t.replaceShaderMapper),t.replaceShaderPosition=(n,r,i)=>{const a=r.getShaderDescription("vertex");a.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let o=a.getCode();o=_e.substitute(o,"//VTK::Position::Impl",["    output.Position = rendererUBO.SCPCMatrix*vertexBC;"]).result,a.setCode(o)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderTCoord=(n,r,i)=>{r.getShaderDescription("vertex").addOutput("vec2<f32>","tcoordVS")},e.shaderReplacements.set("replaceShaderTCoord",t.replaceShaderTCoord),t.addTextureView=n=>{e.textureViews.includes(n)||e.textureViews.push(n)},t.prepareToDraw=n=>{e.renderEncoder=n,t.updateInput(),t.updateBuffers(),t.updateBindings(),t.updatePipeline()},t.updateInput=()=>{},t.updateBuffers=()=>{},t.updateBindings=()=>{e.bindGroup.setBindables(t.getBindables())},t.computePipelineHash=()=>{},t.registerDrawCallback=n=>{n.registerDrawCallback(e.pipeline,t.draw)},t.prepareAndDraw=n=>{t.prepareToDraw(n),n.setPipeline(e.pipeline),t.draw(n)},t.draw=n=>{const r=n.getBoundPipeline();n.activateBindGroup(e.bindGroup),e.WebGPURenderer&&e.WebGPURenderer.bindUBO(n),r.bindVertexInput(n,e.vertexInput);const i=e.vertexInput.getIndexBuffer();i?n.drawIndexed(i.getIndexCount(),e.numberOfInstances,0,0,0):n.draw(e.numberOfVertices,e.numberOfInstances,0,0)},t.getBindables=()=>{const n=[...e.additionalBindables];e.UBO&&n.push(e.UBO),e.SSBO&&n.push(e.SSBO);for(let r=0;r<e.textureViews.length;r++){n.push(e.textureViews[r]);const i=e.textureViews[r].getSampler();i&&n.push(i)}return n},t.updatePipeline=()=>{t.computePipelineHash(),e.pipeline=e.device.getPipeline(e.pipelineHash),e.pipeline||(e.pipeline=Lb.newInstance(),e.pipeline.setDevice(e.device),e.WebGPURenderer&&e.pipeline.addBindGroupLayout(e.WebGPURenderer.getBindGroup()),e.pipeline.addBindGroupLayout(e.bindGroup),t.generateShaderDescriptions(e.pipelineHash,e.pipeline,e.vertexInput),e.pipeline.setTopology(e.topology),e.pipeline.setRenderEncoder(e.renderEncoder),e.pipeline.setVertexState(e.vertexInput.getVertexInputInformation()),e.device.createPipeline(e.pipelineHash,e.pipeline))}}const Qb={additionalBindables:void 0,bindGroup:null,device:null,fragmentShaderTemplate:null,numberOfInstances:1,numberOfVertices:0,pipelineHash:null,shaderReplacements:null,SSBO:null,textureViews:null,topology:"triangle-list",UBO:null,vertexShaderTemplate:null,WebGPURenderer:null};function o4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Qb,n),He.extend(t,e,n),e.textureViews=[],e.vertexInput=Xb.newInstance(),e.bindGroup=e4.newInstance({label:"mapperBG"}),e.additionalBindables=[],e.fragmentShaderTemplate=e.fragmentShaderTemplate||Yb,e.vertexShaderTemplate=e.vertexShaderTemplate||qb,e.shaderReplacements=new Map,P.get(t,e,["pipeline","vertexInput"]),P.setGet(t,e,["additionalBindables","device","fragmentShaderTemplate","interpolate","numberOfInstances","numberOfVertices","pipelineHash","shaderReplacements","SSBO","textureViews","topology","UBO","vertexShaderTemplate","WebGPURenderer"]),Jb(t,e)}const Zb=P.newInstance(o4,"vtkWebGPUSimpleMapper");var p1={newInstance:Zb,extend:o4};function eN(t,e){e.classHierarchy.push("vtkWebGPUFullScreenQuad"),t.replaceShaderPosition=(n,r,i)=>{const a=r.getShaderDescription("vertex");a.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),a.addOutput("vec4<f32>","vertexVC");let o=a.getCode();o=_e.substitute(o,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);","output.vertexVC = vec4<f32>(vertexBC, 1);"]).result,a.setCode(o)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.updateBuffers=()=>{const n=e.device.getBufferManager().getFullScreenQuadBuffer();e.vertexInput.addBuffer(n,["vertexBC"]),e.numberOfVertices=6}}const tN={};function s4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,tN,n),p1.extend(t,e,n),eN(t,e)}const nN=P.newInstance(s4,"vtkWebGPUFullScreenQuad");var ca={newInstance:nN,extend:s4};const rN={Verts:0,Lines:1,Triangles:2,Strips:3,LinesFromStrips:4,LinesFromTriangles:5,Points:6,UniformArray:7,PointArray:8,NormalsFromPoints:9,Texture:10,RawVertex:11,Storage:12,Index:13},iN={Start:0,Points:0,Lines:1,Triangles:2,TriangleStrips:3,TriangleEdges:4,TriangleStripEdges:5,End:6};var Zs={BufferUsage:rN,PrimitiveTypes:iN};const Pl=["getMappedRange","mapAsync","unmap"];function aN(t,e,n,r){const i=r.byteLength,a=t.createBuffer({size:i,usage:GPUBufferUsage.COPY_SRC,mappedAtCreation:!0}),o=a.getMappedRange(0,i);new Uint8Array(o).set(new Uint8Array(r)),a.unmap();const s=t.createCommandEncoder();s.copyBufferToBuffer(a,0,e,n,i);const u=s.finish();t.queue.submit([u]),a.destroy()}function oN(t,e){e.classHierarchy.push("vtkWebGPUBuffer"),t.create=(n,r)=>{e.handle=e.device.getHandle().createBuffer({size:n,usage:r,label:e.label}),e.sizeInBytes=n,e.usage=r},t.write=n=>{aN(e.device.getHandle(),e.handle,0,n.buffer)},t.createAndWrite=(n,r)=>{e.handle=e.device.getHandle().createBuffer({size:n.byteLength,usage:r,mappedAtCreation:!0,label:e.label}),e.sizeInBytes=n.byteLength,e.usage=r,new Uint8Array(e.handle.getMappedRange()).set(new Uint8Array(n.buffer)),e.handle.unmap()};for(let n=0;n<Pl.length;n++)t[Pl[n]]=function(){return e.handle[Pl[n]](...arguments)}}const sN={device:null,handle:null,sizeInBytes:0,strideInBytes:0,arrayInformation:null,usage:null,label:null,sourceTime:null};function u4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,sN,n),P.obj(t,e),P.get(t,e,["handle","sizeInBytes","usage"]),P.setGet(t,e,["strideInBytes","device","arrayInformation","label","sourceTime"]),oN(t,e)}const uN=P.newInstance(u4);var co={newInstance:uN,extend:u4,...Zs};const{Representation:$d}=Co,{PrimitiveTypes:Yr}=Zs;class cN{constructor(){this.keys=new Uint32Array(10),this.values=new Uint32Array(10),this.count=0}clear(){this.count=0}has(e){for(let n=0;n<this.count;n++)if(this.keys[n]===e)return!0}get(e){for(let n=0;n<this.count;n++)if(this.keys[n]===e)return this.values[n]}set(e,n){this.count<9&&(this.keys[this.count]=e,this.values[this.count++]=n)}}function lN(t){switch(t){case Yr.Points:return"points";case Yr.Lines:return"lines";case Yr.Triangles:case Yr.TriangleEdges:return"polys";case Yr.TriangleStripEdges:case Yr.TriangleStrips:return"strips";default:return""}}function Lu(t,e,n){let r=t.pointIdToFlatId[e];return r<0&&(r=t.flatId,t.pointIdToFlatId[e]=r,t.flatIdToPointId[t.flatId]=e,t.flatIdToCellId[t.flatId]=n,t.flatId++),r}function fN(t,e,n){const r=t.length;for(let o=0;o<r;o++){let s=t[o];if(n.cellProvokedMap.has(s)){n.ibo[n.iboId++]=n.cellProvokedMap.get(s);for(let u=o+1;u<o+r;u++){s=t[u%r];const l=Lu(n,s,e);n.ibo[n.iboId++]=l}return}}for(let o=0;o<r;o++){let s=t[o];if(!n.provokedPointIds[s]){let u=Lu(n,s,e);n.provokedPointIds[s]=1,n.cellProvokedMap.set(s,u),n.flatIdToCellId[u]=e,n.ibo[n.iboId++]=u;for(let l=o+1;l<o+r;l++)s=t[l%r],u=Lu(n,s,e),n.ibo[n.iboId++]=u;return}}let i=t[0],a=n.flatId;n.cellProvokedMap.set(i,a),n.flatIdToPointId[n.flatId]=i,n.flatIdToCellId[n.flatId]=e,n.flatId++,n.ibo[n.iboId++]=a;for(let o=1;o<r;o++)i=t[o],a=Lu(n,i,e),n.ibo[n.iboId++]=a}function pN(t,e,n){const r=t.length;n.iboSize+=r;for(let i=0;i<r;i++){const a=t[i];if(n.cellProvokedMap.has(a))return}for(let i=0;i<r;i++){const a=t[i];if(!n.provokedPointIds[a]){n.provokedPointIds[a]=1,n.cellProvokedMap.set(a,1);return}}n.cellProvokedMap.set(t[0],1),n.extraPoints++}let Tr;const Hd=new Uint32Array(1),Cn=new Uint32Array(2),Ir=new Uint32Array(3),Il={anythingToPoints(t,e,n,r,i){for(let a=0;a<t;++a)Hd[0]=e[n+a],Tr(Hd,r,i)},linesToWireframe(t,e,n,r,i){for(let a=0;a<t-1;++a)Cn[0]=e[n+a],Cn[1]=e[n+a+1],Tr(Cn,r,i)},polysToWireframe(t,e,n,r,i){if(t>2)for(let a=0;a<t;++a)Cn[0]=e[n+a],Cn[1]=e[n+(a+1)%t],Tr(Cn,r,i)},stripsToWireframe(t,e,n,r,i){if(t>2){for(let a=0;a<t-1;++a)Cn[0]=e[n+a],Cn[1]=e[n+a+1],Tr(Cn,r,i);for(let a=0;a<t-2;a++)Cn[0]=e[n+a],Cn[1]=e[n+a+2],Tr(Cn,r,i)}},polysToSurface(t,e,n,r,i){for(let a=0;a<t-2;a++)Ir[0]=e[n],Ir[1]=e[n+a+1],Ir[2]=e[n+a+2],Tr(Ir,r,i)},stripsToSurface(t,e,n,r,i){for(let a=0;a<t-2;a++)Ir[0]=e[n+a],Ir[1]=e[n+a+1+a%2],Ir[2]=e[n+a+1+(a+1)%2],Tr(Ir,r,i)}};function hN(t,e){e.classHierarchy.push("vtkWebGPUIndexBuffer"),t.buildIndexBuffer=n=>{const r=n.cells,i=n.primitiveType,a=n.representation,o=n.cellOffset,s=r.getData(),u=s.length,l=lN(i),p=n.numberOfPoints,c={provokedPointIds:new Uint8Array(p),extraPoints:0,iboSize:0,flatId:0,iboId:0,cellProvokedMap:new cN};let f=null;a===$d.POINTS||i===Yr.Points?f=Il.anythingToPoints:a===$d.WIREFRAME||i===Yr.Lines?f=Il[`${l}ToWireframe`]:f=Il[`${l}ToSurface`],Tr=pN;let h=o||0;for(let v=0;v<u;)c.cellProvokedMap.clear(),f(s[v],s,v+1,h,c),v+=s[v]+1,h++;p<=65535?c.flatIdToPointId=new Uint16Array(p+c.extraPoints):c.flatIdToPointId=new Uint32Array(p+c.extraPoints),p+c.extraPoints<36863?c.pointIdToFlatId=new Int16Array(p):c.pointIdToFlatId=new Int32Array(p),p+c.extraPoints<=65535?(c.ibo=new Uint16Array(c.iboSize),n.format="uint16"):(c.ibo=new Uint32Array(c.iboSize),n.format="uint32"),h<=65535?c.flatIdToCellId=new Uint16Array(p+c.extraPoints):c.flatIdToCellId=new Uint32Array(p+c.extraPoints),c.pointIdToFlatId.fill(-1),c.provokedPointIds.fill(0),Tr=fN,h=o||0;for(let v=0;v<u;)c.cellProvokedMap.clear(),f(s[v],s,v+1,h,c),v+=s[v]+1,h++;delete c.provokedPointIds,delete c.pointIdToFlatId,n.nativeArray=c.ibo,e.flatIdToPointId=c.flatIdToPointId,e.flatIdToCellId=c.flatIdToCellId,e.flatSize=c.flatId,e.indexCount=c.iboId}}const gN={flatIdToPointId:null,flatIdToCellId:null,flatSize:0,indexCount:0};function c4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gN,n),co.extend(t,e,n),P.setGet(t,e,["flatIdToPointId","flatIdToCellId","flatSize","indexCount"]),hN(t,e)}const dN=P.newInstance(c4);var vN={newInstance:dN,extend:c4,...Zs};const{BufferUsage:zr}=Zs,{vtkErrorMacro:yN}=un,{VtkDataTypes:Ni}=Ee,mN={};function xN(t){let e;switch(t.getDataType()){case Ni.UNSIGNED_CHAR:e="uint8";break;case Ni.FLOAT:e="float32";break;case Ni.UNSIGNED_INT:e="uint32";break;case Ni.INT:e="sint32";break;case Ni.DOUBLE:e="float32";break;case Ni.UNSIGNED_SHORT:e="uint16";break;case Ni.SHORT:e="sin16";break;default:e="float32";break}switch(t.getNumberOfComponents()){case 2:e+="x2";break;case 3:e.includes("32")||yN(`unsupported x3 type for ${e}`),e+="x3";break;case 4:e+="x4";break}return e}function Kd(t,e,n,r,i){const a={},o=t.getFlatSize();if(!o)return a;let s=[0,0,0,0];i.shift&&(i.shift.length?s=i.shift:s.fill(i.shift));let u=[1,1,1,1];i.scale&&(i.scale.length?u=i.scale:u.fill(i.scale));const l=Object.prototype.hasOwnProperty.call(i,"packExtra")?i.packExtra:!1;let p,c=0;const f=n+(l?1:0),h=xo(r,o*f);let v=t.getFlatIdToPointId();i.cellData&&(v=t.getFlatIdToCellId()),n===1?p=function(x){h[c++]=u[0]*e[x]+s[0]}:n===2?p=function(x){h[c++]=u[0]*e[x]+s[0],h[c++]=u[1]*e[x+1]+s[1]}:n===3&&!l?p=function(x){h[c++]=u[0]*e[x]+s[0],h[c++]=u[1]*e[x+1]+s[1],h[c++]=u[2]*e[x+2]+s[2]}:n===3&&l?p=function(x){h[c++]=u[0]*e[x]+s[0],h[c++]=u[1]*e[x+1]+s[1],h[c++]=u[2]*e[x+2]+s[2],h[c++]=u[3]*1+s[3]}:n===4&&(p=function(x){h[c++]=u[0]*e[x]+s[0],h[c++]=u[1]*e[x+1]+s[1],h[c++]=u[2]*e[x+2]+s[2],h[c++]=u[3]*e[x+3]+s[3]});for(let y=0;y<o;y++){const x=n*v[y];p(x)}return a.nativeArray=h,a}function SN(t,e,n,r){const i=[t[r*3]-t[n*3],t[r*3+1]-t[n*3+1],t[r*3+2]-t[n*3+2]],a=[t[e*3]-t[n*3],t[e*3+1]-t[n*3+1],t[e*3+2]-t[n*3+2]],o=[];return pr(i,a,o),aa(o),o}function TN(t,e){const n=e.getData(),r=t.getData();if(!r||!n)return null;const i=new Int8Array(t.getNumberOfCells()*4),a=r.length;let o=0;for(let s=0;s<a;){const u=SN(n,r[s+1],r[s+2],r[s+3]);i[o++]=127*u[0],i[o++]=127*u[1],i[o++]=127*u[2],i[o++]=127,s+=r[s]+1}return i}function CN(t,e){e.classHierarchy.push("vtkWebGPUBufferManager");function n(r){r.dataArray&&!r.nativeArray&&(r.nativeArray=r.dataArray.getData());let i,a;if(r.usage===zr.Index&&(i=vN.newInstance({label:r.label}),i.setDevice(e.device),a=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST,i.buildIndexBuffer(r),i.createAndWrite(r.nativeArray,a),i.setArrayInformation([{format:r.format}])),i||(i=co.newInstance({label:r.label}),i.setDevice(e.device)),r.usage===zr.UniformArray&&(a=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,i.createAndWrite(r.nativeArray,a)),r.usage===zr.Storage&&(a=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,i.createAndWrite(r.nativeArray,a)),r.usage===zr.Texture&&(a=GPUBufferUsage.COPY_SRC,i.createAndWrite(r.nativeArray,a)),r.usage===zr.PointArray){a=GPUBufferUsage.VERTEX;const o=Mt.getNativeTypeFromBufferFormat(r.format),s=Kd(r.indexBuffer,r.dataArray.getData(),r.dataArray.getNumberOfComponents(),o,{packExtra:r.packExtra,shift:r.shift,scale:r.scale,cellData:r.cellData,cellOffset:r.cellOffset});i.createAndWrite(s.nativeArray,a),i.setStrideInBytes(Mt.getByteStrideFromBufferFormat(r.format)),i.setArrayInformation([{offset:0,format:r.format,interpolation:r.cellData?"flat":"perspective"}])}if(r.usage===zr.NormalsFromPoints){a=GPUBufferUsage.VERTEX;const o=Mt.getNativeTypeFromBufferFormat(r.format),s=TN(r.cells,r.dataArray),u=Kd(r.indexBuffer,s,4,o,{cellData:!0});i.createAndWrite(u.nativeArray,a),i.setStrideInBytes(Mt.getByteStrideFromBufferFormat(r.format)),i.setArrayInformation([{offset:0,format:r.format,interpolation:"flat"}])}return r.usage===zr.RawVertex&&(a=GPUBufferUsage.VERTEX,i.createAndWrite(r.nativeArray,a),i.setStrideInBytes(Mt.getByteStrideFromBufferFormat(r.format)),i.setArrayInformation([{offset:0,format:r.format}])),i.setSourceTime(r.time),i}t.hasBuffer=r=>e.device.hasCachedObject(r),t.getBuffer=r=>r.hash?e.device.getCachedObject(r.hash,n,r):n(r),t.getBufferForPointArray=(r,i)=>{const a=xN(r),o={hash:`${r.getMTime()}I${i.getMTime()}${a}`,usage:zr.PointArray,format:a,dataArray:r,indexBuffer:i};return t.getBuffer(o)},t.getFullScreenQuadBuffer=()=>{if(e.fullScreenQuadBuffer)return e.fullScreenQuadBuffer;e.fullScreenQuadBuffer=co.newInstance(),e.fullScreenQuadBuffer.setDevice(e.device);const r=new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0]);return e.fullScreenQuadBuffer.createAndWrite(r,GPUBufferUsage.VERTEX),e.fullScreenQuadBuffer.setStrideInBytes(12),e.fullScreenQuadBuffer.setArrayInformation([{offset:0,format:"float32x3"}]),e.fullScreenQuadBuffer}}const wN={device:null,fullScreenQuadBuffer:null};function l4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,wN,n),qe(t,e),ut(t,e,["device"]),CN(t,e)}const _N=ze(l4);var Ci={newInstance:_N,extend:l4,...mN,...Zs};const{BufferUsage:EN}=Ci,{vtkErrorMacro:xa}=P;function DN(t,e){e.classHierarchy.push("vtkWebGPUStorageBuffer"),t.addEntry=(n,r)=>{if(e._bufferEntryNames.has(n)){xa(`entry named ${n} already exists`);return}e._bufferEntryNames.set(n,e.bufferEntries.length);const i=Mt.getByteStrideFromShaderFormat(r);e.bufferEntries.push({name:n,type:r,sizeInBytes:i,offset:e.sizeInBytes,nativeType:Mt.getNativeTypeFromShaderFormat(r)}),e.sizeInBytes+=i},t.send=n=>{if(!e._buffer){const r={nativeArray:e.Float32Array,usage:EN.Storage,label:e.label};e._buffer=n.getBufferManager().getBuffer(r),e.bindGroupTime.modified(),e._sendTime.modified();return}n.getHandle().queue.writeBuffer(e._buffer.getHandle(),0,e.arrayBuffer,0,e.sizeInBytes*e.numberOfInstances),e._sendTime.modified()},t.createView=n=>{n in e||(e.arrayBuffer||(e.arrayBuffer=new ArrayBuffer(e.sizeInBytes*e.numberOfInstances)),e[n]=P.newTypedArray(n,e.arrayBuffer))},t.setValue=(n,r,i)=>{const a=e._bufferEntryNames.get(n);if(a===void 0){xa(`entry named ${n} not found in UBO`);return}const o=e.bufferEntries[a];t.createView(o.nativeType);const s=e[o.nativeType];s[(o.offset+r*e.sizeInBytes)/s.BYTES_PER_ELEMENT]=i},t.setArray=(n,r,i)=>{const a=e._bufferEntryNames.get(n);if(a===void 0){xa(`entry named ${n} not found in UBO`);return}const o=e.bufferEntries[a];t.createView(o.nativeType);const s=e[o.nativeType],u=(o.offset+r*e.sizeInBytes)/s.BYTES_PER_ELEMENT;for(let l=0;l<i.length;l++)s[u+l]=i[l]},t.setAllInstancesFromArray=(n,r)=>{const i=e._bufferEntryNames.get(n);if(i===void 0){xa(`entry named ${n} not found in UBO`);return}const a=e.bufferEntries[i];t.createView(a.nativeType);const o=e[a.nativeType],s=r.length/e.numberOfInstances;for(let u=0;u<e.numberOfInstances;u++){const l=(a.offset+u*e.sizeInBytes)/o.BYTES_PER_ELEMENT;for(let p=0;p<s;p++)o[l+p]=r[u*s+p]}},t.setAllInstancesFromArrayColorToFloat=(n,r)=>{const i=e._bufferEntryNames.get(n);if(i===void 0){xa(`entry named ${n} not found in UBO`);return}const a=e.bufferEntries[i];t.createView(a.nativeType);const o=e[a.nativeType],s=r.length/e.numberOfInstances;for(let u=0;u<e.numberOfInstances;u++){const l=(a.offset+u*e.sizeInBytes)/o.BYTES_PER_ELEMENT;for(let p=0;p<s;p++)o[l+p]=r[u*s+p]/255}},t.setAllInstancesFromArray3x3To4x4=(n,r)=>{const i=e._bufferEntryNames.get(n);if(i===void 0){xa(`entry named ${n} not found in UBO`);return}const a=e.bufferEntries[i];t.createView(a.nativeType);const o=e[a.nativeType],s=9;for(let u=0;u<e.numberOfInstances;u++){const l=(a.offset+u*e.sizeInBytes)/o.BYTES_PER_ELEMENT;for(let p=0;p<3;p++)for(let c=0;c<3;c++)o[l+p*4+c]=r[u*s+p*3+c]}},t.getSendTime=()=>e._sendTime.getMTime(),t.getShaderCode=(n,r)=>{const i=[`struct ${e.label}StructEntry
{`];for(let a=0;a<e.bufferEntries.length;a++){const o=e.bufferEntries[a];i.push(`  ${o.name}: ${o.type},`)}return i.push(`
};
struct ${e.label}Struct
{
  values: array<${e.label}StructEntry>,
};
@binding(${n}) @group(${r}) var<storage, read> ${e.label}: ${e.label}Struct;
`),i.join(`
`)},t.getBindGroupEntry=()=>({resource:{buffer:e._buffer.getHandle()}}),t.clearData=()=>{e.numberOfInstances=0,e.sizeInBytes=0,e.bufferEntries=[],e._bufferEntryNames=new Map,e._buffer=null,delete e.arrayBuffer,delete e.Float32Array}}const ON={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,numberOfInstances:1};function f4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ON,n),P.obj(t,e),e._bufferEntryNames=new Map,e.bufferEntries=[],e._sendTime={},P.obj(e._sendTime,{mtime:0}),e.bindGroupTime={},P.obj(e.bindGroupTime,{mtime:0}),e.bindGroupLayoutEntry=e.bindGroupLayoutEntry||{buffer:{type:"read-only-storage"}},P.get(t,e,["bindGroupTime"]),P.setGet(t,e,["device","bindGroupLayoutEntry","label","numberOfInstances","sizeInBytes"]),DN(t,e)}const bN=P.newInstance(f4,"vtkWebGPUStorageBuffer");var gp={newInstance:bN,extend:f4};const{BufferUsage:NN}=Ci,{vtkErrorMacro:zl}=P;function MN(t,e){e.classHierarchy.push("vtkWebGPUUniformBuffer"),t.addEntry=(n,r)=>{if(e._bufferEntryNames.has(n)){zl(`entry named ${n} already exists`);return}e.sortDirty=!0,e._bufferEntryNames.set(n,e.bufferEntries.length),e.bufferEntries.push({name:n,type:r,sizeInBytes:Mt.getByteStrideFromShaderFormat(r),offset:-1,nativeType:Mt.getNativeTypeFromShaderFormat(r),packed:!1})},t.sortBufferEntries=()=>{if(!e.sortDirty)return;let n=0;const r=[];let i=4;for(let a=0;a<e.bufferEntries.length;a++){const o=e.bufferEntries[a];o.sizeInBytes%16===0&&(i=Math.max(16,i)),o.sizeInBytes%8===0&&(i=Math.max(8,i))}for(let a=0;a<e.bufferEntries.length;a++){const o=e.bufferEntries[a];o.packed===!1&&o.sizeInBytes%16===0&&(o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes)}for(let a=0;a<e.bufferEntries.length;a++){const o=e.bufferEntries[a];if(o.packed===!1&&o.sizeInBytes===12)for(let s=0;s<e.bufferEntries.length;s++){const u=e.bufferEntries[s];if(u.packed===!1&&u.sizeInBytes===4){o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes,u.packed=!0,u.offset=n,r.push(u),n+=u.sizeInBytes;break}}}for(let a=0;a<e.bufferEntries.length;a++){const o=e.bufferEntries[a];if(!o.packed&&o.sizeInBytes%8===0)for(let s=a+1;s<e.bufferEntries.length;s++){const u=e.bufferEntries[s];if(!u.packed&&u.sizeInBytes%8===0){o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes,u.packed=!0,u.offset=n,r.push(u),n+=u.sizeInBytes;break}}}for(let a=0;a<e.bufferEntries.length;a++){const o=e.bufferEntries[a];if(!o.packed&&o.sizeInBytes%8===0){let s=!1;for(let u=0;!s&&u<e.bufferEntries.length;u++){const l=e.bufferEntries[u];if(!l.packed&&l.sizeInBytes===4)for(let p=u+1;p<e.bufferEntries.length;p++){const c=e.bufferEntries[p];if(!c.packed&&c.sizeInBytes===4){o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes,l.packed=!0,l.offset=n,r.push(l),n+=l.sizeInBytes,c.packed=!0,c.offset=n,r.push(c),n+=c.sizeInBytes,s=!0;break}}}}}for(let a=0;a<e.bufferEntries.length;a++){const o=e.bufferEntries[a];!o.packed&&o.sizeInBytes>4&&(o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes)}for(let a=0;a<e.bufferEntries.length;a++){const o=e.bufferEntries[a];o.packed||(o.packed=!0,o.offset=n,r.push(o),n+=o.sizeInBytes)}e.bufferEntries=r,e._bufferEntryNames.clear();for(let a=0;a<e.bufferEntries.length;a++)e._bufferEntryNames.set(e.bufferEntries[a].name,a);e.sizeInBytes=n,e.sizeInBytes=i*Math.ceil(e.sizeInBytes/i),e.sortDirty=!1},t.sendIfNeeded=n=>{if(!e.UBO){const r={nativeArray:e.Float32Array,usage:NN.UniformArray,label:e.label};e.UBO=n.getBufferManager().getBuffer(r),e.bindGroupTime.modified(),e.sendDirty=!1}e.sendDirty&&(n.getHandle().queue.writeBuffer(e.UBO.getHandle(),0,e.arrayBuffer,0,e.sizeInBytes),e.sendDirty=!1),e.sendTime.modified()},t.createView=n=>{n in e||(e.arrayBuffer||(e.arrayBuffer=new ArrayBuffer(e.sizeInBytes)),e[n]=P.newTypedArray(n,e.arrayBuffer))},t.setValue=(n,r)=>{t.sortBufferEntries();const i=e._bufferEntryNames.get(n);if(i===void 0){zl(`entry named ${n} not found in UBO`);return}const a=e.bufferEntries[i];t.createView(a.nativeType);const o=e[a.nativeType];a.lastValue!==r&&(o[a.offset/o.BYTES_PER_ELEMENT]=r,e.sendDirty=!0),a.lastValue=r},t.setArray=(n,r)=>{t.sortBufferEntries();const i=e._bufferEntryNames.get(n);if(i===void 0){zl(`entry named ${n} not found in UBO`);return}const a=e.bufferEntries[i];t.createView(a.nativeType);const o=e[a.nativeType];let s=!1;for(let u=0;u<r.length;u++)(!a.lastValue||a.lastValue[u]!==r[u])&&(o[a.offset/o.BYTES_PER_ELEMENT+u]=r[u],s=!0);s&&(e.sendDirty=!0,a.lastValue=[...r])},t.getBindGroupEntry=()=>({resource:{buffer:e.UBO.getHandle()}}),t.getSendTime=()=>e.sendTime.getMTime(),t.getShaderCode=(n,r)=>{t.sortBufferEntries();const i=[`struct ${e.label}Struct
{`];for(let a=0;a<e.bufferEntries.length;a++){const o=e.bufferEntries[a];i.push(`  ${o.name}: ${o.type},`)}return i.push(`};
@binding(${n}) @group(${r}) var<uniform> ${e.label}: ${e.label}Struct;`),i.join(`
`)}}const RN={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,bindGroupLayoutEntry:null,bindGroupEntry:null};function p4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,RN,n),P.obj(t,e),e._bufferEntryNames=new Map,e.bufferEntries=[],e.bindGroupLayoutEntry=e.bindGroupLayoutEntry||{buffer:{type:"uniform"}},e.sendTime={},P.obj(e.sendTime,{mtime:0}),e.bindGroupTime={},P.obj(e.bindGroupTime,{mtime:0}),e.sendDirty=!0,e.sortDirty=!0,P.get(t,e,["binding","bindGroupTime"]),P.setGet(t,e,["bindGroupLayoutEntry","device","label","sizeInBytes"]),MN(t,e)}const FN=P.newInstance(p4,"vtkWebGPUUniformBuffer");var gi={newInstance:FN,extend:p4};const{vtkDebugMacro:LN}=un,Xd=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var computedColor: vec4<f32> = mapperUBO.BackgroundColor;

  //VTK::RenderEncoder::Impl
  return output;
}
`,kN=`
fn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {
  var tau: f32 = 6.28318530718;
  var pi: f32 = 3.14159265359;
  var out: vec2<f32> = vec2<f32>(0.0);

  out.x = atan2(dir.z, dir.x) / tau;
  out.x += 0.5;

  var phix: f32 = length(vec2(dir.x, dir.z));
  out.y = atan2(dir.y, phix) / pi + 0.5;

  return out;
}

//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var tcoord: vec4<f32> = vec4<f32>(input.vertexVC.xy, -1, 1);
  var V: vec4<f32> = normalize(mapperUBO.FSQMatrix * tcoord); // vec2<f32>((input.tcoordVS.x - 0.5) * 2, -(input.tcoordVS.y - 0.5) * 2);
  // textureSampleLevel gets rid of some ugly artifacts
  var background = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, vecToRectCoord(V.xyz), 0.0);
  var computedColor: vec4<f32> = vec4<f32>(background.rgb, 1);

  //VTK::RenderEncoder::Impl
  return output;
}
`,ku=new Float64Array(16),qd=new Float64Array(16);function BN(t){return t.getPositional()?t.getConeAngle()>=90?0:2:1}function VN(t,e){e.classHierarchy.push("vtkWebGPURenderer"),t.buildPass=n=>{if(n){if(!e.renderable)return;e.camera=e.renderable.getActiveCamera(),t.updateLights(),t.prepareNodes(),t.addMissingNode(e.camera),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps()),t.removeUnusedNodes(),e.webgpuCamera=t.getViewNodeFor(e.camera),t.updateStabilizedMatrix()}},t.updateStabilizedMatrix=()=>{const n=e.camera.getClippingRange(),r=e.camera.getPositionByReference(),i=e.camera.getDirectionOfProjectionByReference(),a=[],o=[];Sr(o,i,.5*(n[0]+n[1])),Uo(a,r,o),Hf(o,a,e.stabilizedCenter),q3(o)/(n[1]-n[0])>e.recenterThreshold&&(e.stabilizedCenter=a,e.stabilizedTime.modified())},t.updateLights=()=>{let n=0;const r=e.renderable.getLightsByReference();for(let i=0;i<r.length;++i)r[i].getSwitch()>0&&n++;return n||(LN("No lights are on, creating one."),e.renderable.createLight()),n},t.updateUBO=()=>{var r;const n=e.UBO.getSendTime();if(e._parent.getMTime()>n||t.getMTime()>n||e.camera.getMTime()>n||e.renderable.getMTime()>n){const i=e.webgpuCamera.getKeyMatrices(t);e.UBO.setArray("WCVCMatrix",i.wcvc),e.UBO.setArray("SCPCMatrix",i.scpc),e.UBO.setArray("PCSCMatrix",i.pcsc),e.UBO.setArray("SCVCMatrix",i.scvc),e.UBO.setArray("VCPCMatrix",i.vcpc),e.UBO.setArray("WCVCNormals",i.normalMatrix),e.UBO.setValue("LightCount",e.renderable.getLights().length),e.UBO.setValue("MaxEnvironmentMipLevel",(r=e.renderable.getEnvironmentTexture())==null?void 0:r.getMipLevel()),e.UBO.setValue("BackgroundDiffuseStrength",e.renderable.getEnvironmentTextureDiffuseStrength()),e.UBO.setValue("BackgroundSpecularStrength",e.renderable.getEnvironmentTextureSpecularStrength());const a=t.getYInvertedTiledSizeAndOrigin();e.UBO.setArray("viewportSize",[a.usize,a.vsize]),e.UBO.setValue("cameraParallel",e.camera.getParallelProjection());const o=e._parent.getDevice();e.UBO.sendIfNeeded(o)}},t.updateSSBO=()=>{const n=e.renderable.getLights(),r=e.webgpuCamera.getKeyMatrices(t);let i=`${e.renderable.getMTime()}`;for(let a=0;a<n.length;a++)i+=n[a].getMTime();if(i!==e.lightTimeString){const a=new Float32Array(n.length*4),o=new Float32Array(n.length*4),s=new Float32Array(n.length*4),u=new Float32Array(n.length*4);for(let p=0;p<n.length;p++){const c=p*4,f=n[p].getPosition();Re(f,f,r.wcvc),a[c]=f[0],a[c+1]=f[1],a[c+2]=f[2],a[c+3]=0,o[c]=-n[p].getDirection()[0],o[c+1]=-n[p].getDirection()[1],o[c+2]=-n[p].getDirection()[2],o[c+3]=0,s[c]=n[p].getColor()[0],s[c+1]=n[p].getColor()[1],s[c+2]=n[p].getColor()[2],s[c+3]=n[p].getIntensity()*5,u[c]=BN(n[p]),u[c+1]=Math.cos(gt(n[p].getConeAngle())),u[c+2]=Math.cos(gt(n[p].getConeAngle()+n[p].getConeFalloff())),u[c+3]=0}e.SSBO.clearData(),e.SSBO.setNumberOfInstances(n.length),e.SSBO.addEntry("LightPos","vec4<f32>"),e.SSBO.addEntry("LightDir","vec4<f32>"),e.SSBO.addEntry("LightColor","vec4<f32>"),e.SSBO.addEntry("LightData","vec4<f32>"),e.SSBO.setAllInstancesFromArray("LightPos",a),e.SSBO.setAllInstancesFromArray("LightDir",o),e.SSBO.setAllInstancesFromArray("LightColor",s),e.SSBO.setAllInstancesFromArray("LightData",u);const l=e._parent.getDevice();e.SSBO.send(l)}e.lightTimeString=i},t.scissorAndViewport=n=>{const r=t.getYInvertedTiledSizeAndOrigin();n.getHandle().setViewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize,0,1),n.getHandle().setScissorRect(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)},t.bindUBO=n=>{n.activateBindGroup(e.bindGroup)},t.opaquePass=n=>{n?(e.renderEncoder.begin(e._parent.getCommandEncoder()),t.updateUBO(),t.updateSSBO()):(t.scissorAndViewport(e.renderEncoder),t.clear(),e.renderEncoder.end())},t.clear=()=>{var a;if(e.renderable.getTransparent()||e.suppressClear)return;const n=e._parent.getDevice();if(!e.clearFSQ){e.clearFSQ=ca.newInstance(),e.clearFSQ.setDevice(n),e.clearFSQ.setPipelineHash("clearfsq"),e.clearFSQ.setFragmentShaderTemplate(Xd);const o=gi.newInstance({label:"mapperUBO"});o.addEntry("FSQMatrix","mat4x4<f32>"),o.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(o),e.backgroundTex=e.renderable.getEnvironmentTexture()}if(e.clearFSQ.getPipelineHash()!=="clearfsqwithtexture"&&e.renderable.getUseEnvironmentTextureAsBackground()&&((a=e.backgroundTex)!=null&&a.getImageLoaded())){e.clearFSQ.setFragmentShaderTemplate(kN);const o=gi.newInstance({label:"mapperUBO"});o.addEntry("FSQMatrix","mat4x4<f32>"),o.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(o);const s=n.getTextureManager().getTextureForVTKTexture(e.backgroundTex);if(s.getReady()){const u=s.createView("EnvironmentTexture");e.clearFSQ.setTextureViews([u]),e.backgroundTexLoaded=!0;const l=e.backgroundTex.getInterpolate()?"linear":"nearest";u.addSampler(n,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:l,magFilter:l,mipmapFilter:"linear"})}e.clearFSQ.setPipelineHash("clearfsqwithtexture")}else if(e.clearFSQ.getPipelineHash()==="clearfsqwithtexture"&&!e.renderable.getUseEnvironmentTextureAsBackground()){e.clearFSQ=ca.newInstance(),e.clearFSQ.setDevice(n),e.clearFSQ.setPipelineHash("clearfsq"),e.clearFSQ.setFragmentShaderTemplate(Xd);const o=gi.newInstance({label:"mapperUBO"});o.addEntry("FSQMatrix","mat4x4<f32>"),o.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(o)}const r=e.webgpuCamera.getKeyMatrices(t),i=e.renderable.getBackgroundByReference();e.clearFSQ.getUBO().setArray("BackgroundColor",i),Fe(qd,r.normalMatrix),H0(ku,r.scvc,r.pcsc),H0(ku,qd,ku),e.clearFSQ.getUBO().setArray("FSQMatrix",ku),e.clearFSQ.getUBO().sendIfNeeded(n),e.clearFSQ.prepareAndDraw(e.renderEncoder)},t.translucentPass=n=>{n?e.renderEncoder.begin(e._parent.getCommandEncoder()):(t.scissorAndViewport(e.renderEncoder),e.renderEncoder.end())},t.volumeDepthRangePass=n=>{n?e.renderEncoder.begin(e._parent.getCommandEncoder()):(t.scissorAndViewport(e.renderEncoder),e.renderEncoder.end())},t.getAspectRatio=()=>{const n=e._parent.getSizeByReference(),r=e.renderable.getViewportByReference();return n[0]*(r[2]-r[0])/((r[3]-r[1])*n[1])},t.convertToOpenGLDepth=n=>e.webgpuCamera.convertToOpenGLDepth(n),t.getYInvertedTiledSizeAndOrigin=()=>{const n=t.getTiledSizeAndOrigin(),r=e._parent.getSizeByReference();return n.lowerLeftV=r[1]-n.vsize-n.lowerLeftV,n},t.getTiledSizeAndOrigin=()=>{const n=e.renderable.getViewportByReference(),r=[0,0,1,1],i=n[0]-r[0],a=n[1]-r[1],o=e._parent.normalizedDisplayToDisplay(i,a),s=Math.round(o[0]),u=Math.round(o[1]),l=n[2]-r[0],p=n[3]-r[1],c=e._parent.normalizedDisplayToDisplay(l,p);let f=Math.round(c[0])-s,h=Math.round(c[1])-u;return f<0&&(f=0),h<0&&(h=0),{usize:f,vsize:h,lowerLeftU:s,lowerLeftV:u}},t.getPropFromID=n=>{for(let r=0;r<e.children.length;r++)if((e.children[r].getPropID?e.children[r].getPropID():-1)===n)return e.children[r];return null},t.getStabilizedTime=()=>e.stabilizedTime.getMTime(),t.releaseGraphicsResources=()=>{e.selector!==null&&e.selector.releaseGraphicsResources()}}const AN={bindGroup:null,selector:null,renderEncoder:null,recenterThreshold:20,suppressClear:!1,stabilizedCenter:[0,0,0]};function UN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,AN,n),He.extend(t,e,n),e.UBO=gi.newInstance({label:"rendererUBO"}),e.UBO.addEntry("WCVCMatrix","mat4x4<f32>"),e.UBO.addEntry("SCPCMatrix","mat4x4<f32>"),e.UBO.addEntry("PCSCMatrix","mat4x4<f32>"),e.UBO.addEntry("SCVCMatrix","mat4x4<f32>"),e.UBO.addEntry("VCPCMatrix","mat4x4<f32>"),e.UBO.addEntry("WCVCNormals","mat4x4<f32>"),e.UBO.addEntry("viewportSize","vec2<f32>"),e.UBO.addEntry("LightCount","i32"),e.UBO.addEntry("MaxEnvironmentMipLevel","f32"),e.UBO.addEntry("BackgroundDiffuseStrength","f32"),e.UBO.addEntry("BackgroundSpecularStrength","f32"),e.UBO.addEntry("cameraParallel","u32"),e.SSBO=gp.newInstance({label:"rendererLightSSBO"}),e.lightTimeString="",e.bindGroup=e4.newInstance({label:"rendererBG"}),e.bindGroup.setBindables([e.UBO,e.SSBO]),e.tmpMat4=ye(new Float64Array(16)),e.stabilizedTime={},qe(e.stabilizedTime,{mtime:0}),Ut(t,e,["bindGroup","stabilizedTime"]),So(t,e,["stabilizedCenter"]),ut(t,e,["renderEncoder","selector","suppressClear","UBO"]),VN(t,e)}const GN=ze(UN,"vtkWebGPURenderer");Sn("vtkRenderer",GN);const{CoordinateSystem:Yd}=Qs;function PN(t,e){e.classHierarchy.push("vtkWebGPUActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.renderable.computeMatrix();const r=e.renderable.getMatrix();e.bufferShift[0]=r[3],e.bufferShift[1]=r[7],e.bufferShift[2]=r[11];const i=n.getStabilizedCenterByReference();e.renderable.getCoordinateSystem()===Yd.WORLD&&(e.bufferShift[0]-=i[0],e.bufferShift[1]-=i[1],e.bufferShift[2]-=i[2]),Fe(e.keyMatrices.bcwc,r),e.renderable.getIsIdentity()?ye(e.keyMatrices.normalMatrix):(ft(e.keyMatrices.normalMatrix,e.keyMatrices.bcwc),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,yt(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),Fe(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),Ze(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),e.renderable.getCoordinateSystem()===Yd.WORLD?Ze(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-i[0],-i[1],-i[2]]):ft(e.keyMatrices.bcsc,e.keyMatrices.bcwc),e.keyMatricesTime.modified()}return e.keyMatrices}}const IN={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function zN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,IN,n),He.extend(t,e,n),e.keyMatricesTime={},P.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},P.get(t,e,["propID","keyMatricesTime"]),e.bufferShift=[0,0,0,0],PN(t,e)}const WN=P.newInstance(zN);Sn("vtkActor",WN);const{CoordinateSystem:Jd}=Qs;function jN(t,e){e.classHierarchy.push("vtkWebGPUActor2D"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.bufferShift[0]=0,e.bufferShift[1]=0,e.bufferShift[2]=0;const r=n.getStabilizedCenterByReference();e.renderable.getCoordinateSystem()===Jd.WORLD&&(e.bufferShift[0]-=r[0],e.bufferShift[1]-=r[1],e.bufferShift[2]-=r[2]),ye(e.keyMatrices.bcwc),ye(e.keyMatrices.normalMatrix),Ze(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),e.renderable.getCoordinateSystem()===Jd.WORLD?Ze(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-r[0],-r[1],-r[2]]):ft(e.keyMatrices.bcsc,e.keyMatrices.bcwc),e.keyMatricesTime.modified()}return e.keyMatrices}}const $N={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function HN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$N,n),He.extend(t,e,n),e.keyMatricesTime={},P.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},P.get(t,e,["propID","keyMatricesTime"]),e.bufferShift=[0,0,0,0],jN(t,e)}const KN=P.newInstance(HN);Sn("vtkActor2D",KN);function XN(t,e){e.classHierarchy.push("vtkWebGPUCubeAxesActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const i=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,a=e.WebGPURenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([a.usize,a.vsize],i,e.WebGPURenderWindow.getRenderable())}}}const qN={};function YN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,qN,n),He.extend(t,e,n),e.CubeAxesActorHelper=R5.newCubeAxesActorHelper(),XN(t,e)}const JN=ze(YN,"vtkWebGPUCubeAxesActor");Sn("vtkCubeAxesActor",JN);const{DisplayLocation:dp}=H5;function QN(t,e){e.classHierarchy.push("vtkProperty2D"),t.setDisplayLocationToBackground=()=>t.setDisplayLocation(dp.BACKGROUND),t.setDisplayLocationToForeground=()=>t.setDisplayLocation(dp.FOREGROUND),t.setRepresentationToWireframe=()=>t.setRepresentation(zt.WIREFRAME),t.setRepresentationToSurface=()=>t.setRepresentation(zt.SURFACE),t.setRepresentationToPoints=()=>t.setRepresentation(zt.POINTS),t.getRepresentationAsString=()=>P.enumToString(zt,e.representation)}const ZN={color:[1,1,1],opacity:1,pointSize:1,lineWidth:1,representation:zt.SURFACE,displayLocation:dp.FOREGROUND};function h4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ZN,n),P.obj(t,e),P.setGet(t,e,["opacity","lineWidth","pointSize","displayLocation","representation"]),P.setGetArray(t,e,["color"],3),QN(t,e)}const eM=P.newInstance(h4,"vtkProperty2D");var tM={newInstance:eM,extend:h4,...H5};const{BufferUsage:Ot,PrimitiveTypes:Ht}=Ci,{Representation:Bu}=Co,{ScalarMode:Vu}=ua,{CoordinateSystem:nM}=Qs,{DisplayLocation:rM}=tM,iM=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@vertex
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : vertexOutput;

  var vertex: vec4<f32> = vertexBC;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  //VTK::Position::Impl

  return output;
}
`,aM=`
struct PBRData {
  diffuse: vec3<f32>,
  specular: vec3<f32>,
}

// Dot product with the max already in it
fn mdot(a: vec3<f32>, b: vec3<f32>) -> f32 {
  return max(0.0, dot(a, b));
}
// Dot product with a max in it that does not allow for negative values
// Physically based rendering is accurate as long as normals are accurate,
// however this is pretty often not the case. In order to prevent negative
// values from ruining light calculations and creating zones of zero light,
// this remapping is used, which smoothly clamps the dot product between
// zero and one while still maintaining a good amount of accuracy.
fn cdot(a: vec3<f32>, b: vec3<f32>) -> f32 {
  var d: f32 = max(0.0, dot(a, b));
  d = pow((d + 1.0) / 2.0, 2.6);
  return d;
}

// Lambertian diffuse model
fn lambertDiffuse(base: vec3<f32>, N: vec3<f32>, L: vec3<f32>) -> vec3<f32> {
  var pi: f32 = 3.14159265359; 
  var NdotL: f32 = mdot(N, L);
  NdotL = pow(NdotL, 1.5);
  return (base/pi)*NdotL;
}

// Yasuhiro Fujii improvement on the Oren-Nayar model
// https://mimosa-pudica.net/improved-oren-nayar.html
// p is surface color, o is roughness
fn fujiiOrenNayar(p: vec3<f32>, o: f32, N: vec3<f32>, L: vec3<f32>, V: vec3<f32>) -> vec3<f32> {
  var invpi: f32 = 0.31830988618; // 1/pi

  var o2 = o*o;
  var NdotL: f32 = mdot(N, L);
  NdotL = pow(NdotL, 1.5); // Less physically accurate, but hides the "seams" between lights better

  var NdotV: f32 = mdot(N, V);
  var LdotV: f32 = mdot(L, V);

  var s: f32 = LdotV - NdotL*NdotV;
  var t: f32 = mix(1.0, max(NdotL, NdotV), step(0.0, s)); // Mix with step is the equivalent of an if statement
  var A: vec3<f32> = 0.5*(o2 / (o2 + 0.33)) + 0.17*p*(o2 / (o2 + 0.13));
  A = invpi*(1 - A);
  var B: f32 = 0.45*(o2 / (o2 + 0.09));
  B = invpi*B;

  return p*NdotL*(A + B*(s/t));
}

// Fresnel portion of BRDF (IOR only, simplified)
fn schlickFresnelIOR(V: vec3<f32>, N: vec3<f32>, ior: f32, k: f32) -> f32 {
  var NdotV: f32 = mdot(V, N);
  var F0: f32 = (pow((ior - 1.0), 2.0) + k*k) / (pow((ior + 1.0), 2.0) + k*k); // This takes into account the roughness, which the other one does not
  return F0 + (1.0 - F0) * pow((1.0-NdotV), 5.0);
}

// Fresnel portion of BRDF (Color ior, better)
fn schlickFresnelRGB(V: vec3<f32>, N: vec3<f32>, F0: vec3<f32>) -> vec3<f32> {
  var NdotV: f32 = mdot(V, N);
  return F0 + (1.0 - F0) * pow((1-NdotV), 5.0);
}

// Normal portion of BRDF
// https://learnopengl.com/PBR/Theory
// Trowbridge-Reitz GGX functions: normal, halfway, roughness^2
fn trGGX(N: vec3<f32>, H: vec3<f32>, a: f32) -> f32 {
  var pi: f32 = 3.14159265359; 

  var a2: f32 = a*a;
  var NdotH = mdot(N, H);
  var NdotH2 = NdotH*NdotH;
  
  var denom: f32 = NdotH2 * (a2 - 1.0) + 1.0;

  return a2 / max((pi*denom*denom), 0.000001);
}

// A VERY bad approximation of anisotropy. Real anisotropic calculations require tangent and bitangent
fn anisotrophicTrGGX(N: vec3<f32>, H: vec3<f32>, O: vec3<f32>, s: f32, a: f32) -> f32 {
  var Op: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(O) * s, 0.)).xyz;

  var ggx1: f32 = trGGX(N + Op*s, H, a);
  var ggx2: f32 = trGGX(N - Op*s, H, a);
  return (0.5 * ggx1 + 0.5 * ggx2);
}

// Geometry portion of BRDF
fn schlickGGX(N: vec3<f32>, X: vec3<f32>, k: f32) -> f32 {
  var NdotX = cdot(N, X);
  return NdotX / max(0.000001, (NdotX*(1.0-k) + k));
}

fn smithSurfaceRoughness(N: vec3<f32>, V: vec3<f32>, L: vec3<f32>, k: f32) -> f32 {
  var ggx1: f32 = min(1.0, schlickGGX(N, V, k));
  var ggx2: f32 = min(1.0, schlickGGX(N, L, k));
  return ggx1*ggx2;
}

// BRDF Combination
fn cookTorrance(D: f32, F: f32, G: f32, N: vec3<f32>, V: vec3<f32>, L: vec3<f32>) -> f32 {
  var num: f32 = D*F*G;
  var denom: f32 = 4*cdot(V, N)*cdot(L, N);

  return num / max(denom, 0.000001);
}

// Different lighting calculations for different light sources
fn calcDirectionalLight(N: vec3<f32>, V: vec3<f32>, ior: f32, roughness: f32, metallic: f32, direction: vec3<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {  
  var L: vec3<f32> = normalize(direction); // Light Vector
  var H: vec3<f32> = normalize(L + V); // Halfway Vector

  var alpha = roughness*roughness;
  var k: f32 = alpha*alpha / 2;

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L); // Fresnel term is replaced with 1 because it is added later
  var incoming: vec3<f32> = color;
  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5);

  var specular: vec3<f32> = brdf*incoming*angle;
  // Oren-Nayar gives a clay-like effect when fully rough which some people may not want, so it might be better to give a separate
  // control property for the diffuse vs specular roughness
  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V); 
  // Stores the specular and diffuse separately to allow for finer post processing
  var out = PBRData(diffuse, specular);
  
  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// TODO: find some way to reduce the number of arguments going in here
fn calcPointLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, ior: f32, roughness: f32, metallic: f32, position: vec3<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {
  var L: vec3<f32> = normalize(position - fragPos); // Light Vector
  var H: vec3<f32> = normalize(L + V); // Halfway Vector
  var dist = distance(position, fragPos);

  var alpha = roughness*roughness;
  var k: f32 = alpha*alpha / 2.0; // could also be pow(alpha + 1.0, 2) / 8

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);
  var incoming: vec3<f32> = color * (1.0 / (dist*dist));
  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" bewteen light sources

  var specular: vec3<f32> = brdf*incoming*angle;
  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V);

  // Stores the specular and diffuse separately to allow for finer post processing
  // Could also be done (propably more properly) with a struct
  var out = PBRData(diffuse, specular);
  
  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// For a reason unknown to me, spheres dont seem to behave propperly with head-on spot lights
fn calcSpotLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, ior: f32, roughness: f32, metallic: f32, position: vec3<f32>, direction: vec3<f32>, cones: vec2<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {
  var L: vec3<f32> = normalize(position - fragPos);
  var H: vec3<f32> = normalize(L + V); // Halfway Vector
  var dist = distance(position, fragPos);

  var alpha = roughness*roughness;
  var k: f32 = alpha*alpha / 2.0; // could also be pow(alpha + 1.0, 2) / 8

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);
  
  // Cones.x is the inner phi and cones.y is the outer phi
  var theta: f32 = mdot(normalize(direction), L);
  var epsilon: f32 = cones.x - cones.y;
  var intensity: f32 = (theta - cones.y) / epsilon;
  intensity = clamp(intensity, 0.0, 1.0);
  intensity /= dist*dist;

  var incoming: vec3<f32> = color * intensity;

  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" bewteen light sources

  var specular: vec3<f32> = brdf*incoming*angle;
  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V);

  // Stores the specular and diffuse separately to allow for finer post processing
  // Could also be done (propably more properly) with a struct
  var out = PBRData(diffuse, specular);
  
  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// Environment mapping stuff
// Takes in a vector and converts it to an equivalent coordinate in a rectilinear texture. Should be replaced with cubemaps at some point
fn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {
  var tau: f32 = 6.28318530718;
  var pi: f32 = 3.14159265359;
  var out: vec2<f32> = vec2<f32>(0.0);

  out.x = atan2(dir.z, dir.x) / tau;
  out.x += 0.5;

  var phix: f32 = length(vec2(dir.x, dir.z));
  out.y = atan2(dir.y, phix) / pi + 0.5;

  return out;
}

//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::TCoord::Dec

// optional surface normal declaration
//VTK::Normal::Dec

//VTK::Select::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  // Temporary ambient, diffuse, and opacity
  var ambientColor: vec4<f32> = mapperUBO.AmbientColor;
  var diffuseColor: vec4<f32> = mapperUBO.DiffuseColor;
  var opacity: f32 = mapperUBO.Opacity;

  // This should be declared somewhere else
  var _diffuseMap: vec4<f32> = vec4<f32>(1.0);
  var _roughnessMap: vec4<f32> = vec4<f32>(1.0);
  var _metallicMap: vec4<f32> = vec4<f32>(1.0);
  var _normalMap: vec4<f32> = vec4<f32>(0.0, 0.0, 1.0, 0.0); // normal map was setting off the normal vector detection in fragment
  var _ambientOcclusionMap: vec4<f32> = vec4<f32>(1.);
  var _emissionMap: vec4<f32> = vec4<f32>(0.);

  //VTK::Color::Impl

  //VTK::TCoord::Impl

  //VTK::Normal::Impl

  var computedColor: vec4<f32> = vec4<f32>(diffuseColor.rgb, 1.0);

  //VTK::Light::Impl

  //VTK::Select::Impl

  if (computedColor.a == 0.0) { discard; };

  //VTK::Position::Impl

  //VTK::RenderEncoder::Impl

  return output;
}
`;function Qd(t){return t.indexOf("edge")>=0}function oM(t,e){e.classHierarchy.push("vtkWebGPUCellArrayMapper"),t.buildPass=n=>{n&&(e.is2D?(e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor2D"),e.forceZValue=!0):(e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor"),e.forceZValue=!1),e.coordinateSystem=e.WebGPUActor.getRenderable().getCoordinateSystem(),e.useRendererMatrix=e.coordinateSystem!==nM.DISPLAY,e.WebGPURenderer=e.WebGPUActor.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.device=e.WebGPURenderWindow.getDevice())},t.translucentPass=n=>{n&&(t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw))},t.opaquePass=n=>{n&&(t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw))},t.updateUBO=()=>{var a;const r=e.WebGPUActor.getRenderable().getProperty(),i=e.UBO.getSendTime();if(t.getMTime()>i||r.getMTime()>i||e.renderable.getMTime()>i){const o=e.WebGPUActor.getKeyMatrices(e.WebGPURenderer);if(e.UBO.setArray("BCWCMatrix",o.bcwc),e.UBO.setArray("BCSCMatrix",o.bcsc),e.UBO.setArray("MCWCNormals",o.normalMatrix),e.is2D){e.UBO.setValue("ZValue",e.WebGPUActor.getRenderable().getProperty().getDisplayLocation()===rM.FOREGROUND?1:0);const l=r.getColorByReference();e.UBO.setValue("AmbientIntensity",1),e.UBO.setArray("DiffuseColor",[l[0],l[1],l[2],1]),e.UBO.setValue("DiffuseIntensity",0),e.UBO.setValue("SpecularIntensity",0)}else{let l=r.getAmbientColorByReference();e.UBO.setValue("AmbientIntensity",r.getAmbient()),e.UBO.setArray("AmbientColor",[l[0],l[1],l[2],1]),e.UBO.setValue("DiffuseIntensity",r.getDiffuse()),l=r.getDiffuseColorByReference(),e.UBO.setArray("DiffuseColor",[l[0],l[1],l[2],1]),e.UBO.setValue("Roughness",r.getRoughness()),e.UBO.setValue("BaseIOR",r.getBaseIOR()),e.UBO.setValue("Metallic",r.getMetallic()),e.UBO.setValue("NormalStrength",r.getNormalStrength()),e.UBO.setValue("Emission",r.getEmission()),e.UBO.setValue("SpecularIntensity",r.getSpecular()),l=r.getSpecularColorByReference(),e.UBO.setArray("SpecularColor",[l[0],l[1],l[2],1])}const s=(a=r.getEdgeColorByReference)==null?void 0:a.call(r);s&&e.UBO.setArray("EdgeColor",[s[0],s[1],s[2],1]),e.UBO.setValue("LineWidth",r.getLineWidth()),e.UBO.setValue("Opacity",r.getOpacity()),e.UBO.setValue("PropID",e.WebGPUActor.getPropID());const u=e.WebGPURenderWindow.getDevice();e.UBO.sendIfNeeded(u)}},t.haveWideLines=()=>{const n=e.WebGPUActor.getRenderable(),r=n.getProperty().getRepresentation();return n.getProperty().getLineWidth()<=1||e.primitiveType===Ht.Verts?!1:e.primitiveType===Ht.Triangles||e.primitiveType===Ht.TriangleStrips?r===Bu.WIREFRAME:!0},t.replaceShaderPosition=(n,r,i)=>{const a=r.getShaderDescription("vertex");a.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),a.hasOutput("vertexVC")||a.addOutput("vec4<f32>","vertexVC");let o=a.getCode();e.useRendererMatrix?(o=_e.substitute(o,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = rendererUBO.SCPCMatrix*mapperUBO.BCSCMatrix*vertexBC;","    output.vertexVC = rendererUBO.SCVCMatrix * mapperUBO.BCSCMatrix * vec4<f32>(vertexBC.xyz, 1.0);","//VTK::Position::Impl"]).result,e.forceZValue&&(o=_e.substitute(o,"//VTK::Position::Impl",["pCoord = vec4<f32>(pCoord.xyz/pCoord.w, 1.0);","pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)):(o=_e.substitute(o,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = mapperUBO.BCSCMatrix*vertexBC;","    pCoord.x = 2.0* pCoord.x / rendererUBO.viewportSize.x - 1.0;","    pCoord.y = 2.0* pCoord.y / rendererUBO.viewportSize.y - 1.0;","    pCoord.z = 0.5 - 0.5 * pCoord.z;","//VTK::Position::Impl"]).result,e.forceZValue&&(o=_e.substitute(o,"//VTK::Position::Impl",["    pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)),t.haveWideLines()&&(a.addBuiltinInput("u32","@builtin(instance_index) instanceIndex"),o=_e.substitute(o,"//VTK::Position::Impl",["    var tmpPos: vec4<f32> = pCoord;","    var numSteps: f32 = ceil(mapperUBO.LineWidth - 1.0);","    var offset: f32 = (mapperUBO.LineWidth - 1.0) * (f32(input.instanceIndex / 2u) - numSteps/2.0) / numSteps;","    var tmpPos2: vec3<f32> = tmpPos.xyz / tmpPos.w;","    tmpPos2.x = tmpPos2.x + 2.0 * (f32(input.instanceIndex) % 2.0) * offset / rendererUBO.viewportSize.x;","    tmpPos2.y = tmpPos2.y + 2.0 * (f32(input.instanceIndex + 1u) % 2.0) * offset / rendererUBO.viewportSize.y;","    tmpPos2.z = min(1.0, tmpPos2.z + 0.00001);","    pCoord = vec4<f32>(tmpPos2.xyz * tmpPos.w, tmpPos.w);","//VTK::Position::Impl"]).result),o=_e.substitute(o,"//VTK::Position::Impl",["    output.Position = pCoord;"]).result,a.setCode(o)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderNormal=(n,r,i)=>{const a=i.getBuffer("normalMC"),o=e.WebGPUActor.getRenderable();if(a){const s=r.getShaderDescription("vertex");s.hasOutput("normalVC")||s.addOutput("vec3<f32>","normalVC",a.getArrayInformation()[0].interpolation),s.hasOutput("tangentVC")||s.addOutput("vec3<f32>","tangentVC",a.getArrayInformation()[0].interpolation),s.hasOutput("bitangentVC")||s.addOutput("vec3<f32>","bitangentVC",a.getArrayInformation()[0].interpolation);let u=s.getCode();u=_e.substitute(u,"//VTK::Normal::Impl",["  output.normalVC = normalize((rendererUBO.WCVCNormals * mapperUBO.MCWCNormals * normalMC).xyz);","  var c1: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 0, 1));","  var c2: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 1, 0));","  var tangent: vec3<f32> = mix(c1, c2, distance(c1, c2));","  output.tangentVC = normalize(tangent);","  output.bitangentVC = normalize(cross(output.normalVC, tangent));"]).result,s.setCode(u);const l=r.getShaderDescription("fragment");u=l.getCode(),o.getProperty().getNormalTexture()?u=_e.substitute(u,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  var tangent: vec3<f32> = input.tangentVC;","  var bitangent: vec3<f32> = input.bitangentVC;","  var TCVCMatrix: mat3x3<f32> = mat3x3<f32>(","    tangent.x, bitangent.x, normal.x,","    tangent.y, bitangent.y, normal.y,","    tangent.z, bitangent.z, normal.z,","  );","  var mappedNormal: vec3<f32> = TCVCMatrix * (_normalMap.xyz * 2 - 1);","  normal = mix(normal, mappedNormal, mapperUBO.NormalStrength);","  normal = normalize(normal);"]).result:u=_e.substitute(u,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  normal = normalize(normal);"]).result,l.setCode(u)}},e.shaderReplacements.set("replaceShaderNormal",t.replaceShaderNormal),t.replaceShaderLight=(n,r,i)=>{var l;if(n.includes("sel"))return;const a=r.getShaderDescription("vertex");a.hasOutput("vertexVC")||a.addOutput("vec4<f32>","vertexVC");const o=e.WebGPURenderer.getRenderable(),s=r.getShaderDescription("fragment");let u=s.getCode();if(u.includes("var normal:")&&e.useRendererMatrix&&!Qd(n)&&!e.is2D&&!n.includes("sel")){const p=["  var pi: f32 = 3.14159265359;","  var fragPos: vec3<f32> = vec3<f32>(input.vertexVC.xyz);","  var V: vec3<f32> = mix(normalize(-fragPos), vec3<f32>(0, 0, 1), f32(rendererUBO.cameraParallel)); // View Vector","  var baseColor: vec3<f32> = _diffuseMap.rgb * diffuseColor.rgb;","  var roughness: f32 = max(0.000001, mapperUBO.Roughness * _roughnessMap.r);","  var metallic: f32 = mapperUBO.Metallic * _metallicMap.r;","  var alpha: f32 = roughness*roughness;","  var ior: f32 = mapperUBO.BaseIOR;","  var k: f32 = alpha*alpha / 2;","  var diffuse: vec3<f32> = vec3<f32>(0.);","  var specular: vec3<f32> = vec3<f32>(0.);","  var emission: vec3<f32> = _emissionMap.rgb * mapperUBO.Emission;","  {","    var i: i32 = 0;","    loop {","      if !(i < rendererUBO.LightCount) { break; }","      switch (i32(rendererLightSSBO.values[i].LightData.x)) {","         // Point Light","         case 0 {","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var pos: vec3<f32> = (rendererLightSSBO.values[i].LightPos).xyz;","           var calculated: PBRData = calcPointLight(normal, V, fragPos, ior, roughness, metallic, pos, color, baseColor);","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","          }","         // Directional light","         case 1 {","           var dir: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz;","           dir = normalize(dir);","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var calculated: PBRData = calcDirectionalLight(normal, V, ior, roughness, metallic, dir, color, baseColor); // diffuseColor.rgb needs to be fixed with a more dynamic diffuse color","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","         }","         // Spot Light","         case 2 {","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var pos: vec3<f32> = (rendererLightSSBO.values[i].LightPos).xyz;","           var dir: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz;","           dir = normalize(dir);","           var cones: vec2<f32> = vec2<f32>(rendererLightSSBO.values[i].LightData.y, rendererLightSSBO.values[i].LightData.z);","           var calculated: PBRData = calcSpotLight(normal, V, fragPos, ior, roughness, metallic, pos, dir, cones, color, baseColor);","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","         }","         default { continue; }","       }","      continuing { i++; }","    }","  }","  var fresnel: f32 = schlickFresnelIOR(V, normal, ior, k); // Fresnel","  fresnel = min(1.0, fresnel);","  // This could be controlled with its own variable (that isnt base color) for better artistic control","  var fresnelMetallic: vec3<f32> = schlickFresnelRGB(V, normal, baseColor); // Fresnel for metal, takes color into account","  var kS: vec3<f32> = mix(vec3<f32>(fresnel), fresnelMetallic, metallic);","  kS = min(vec3<f32>(1.0), kS);","  var kD: vec3<f32> = (1.0 - kS) * (1.0 - metallic);","  var PBR: vec3<f32> = mapperUBO.DiffuseIntensity*kD*diffuse + kS*specular;","  PBR += emission;","  computedColor = vec4<f32>(PBR, mapperUBO.Opacity);"];(l=o.getEnvironmentTexture())!=null&&l.getImageLoaded()&&p.push("  // To get diffuse IBL, the texture is sampled with normals in worldspace","  var diffuseIBLCoords: vec3<f32> = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(normal, 1.)).xyz;","  var diffuseCoords: vec2<f32> = vecToRectCoord(diffuseIBLCoords);","  // To get specular IBL, the texture is sampled as the worldspace reflection between the normal and view vectors","  // Reflections are first calculated in viewspace, then converted to worldspace to sample the environment","  var VreflN: vec3<f32> = normalize(reflect(-V, normal));","  var reflectionIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(VreflN, 1.)).xyz;","  var specularCoords: vec2<f32> = vecToRectCoord(reflectionIBLCoords);","  var diffuseIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, diffuseCoords, rendererUBO.MaxEnvironmentMipLevel);","  var level = roughness * rendererUBO.MaxEnvironmentMipLevel;","  var specularIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, specularCoords, level);","  var specularIBLContribution: vec3<f32> = specularIBL.rgb*rendererUBO.BackgroundSpecularStrength;","  computedColor += vec4<f32>(specularIBLContribution*kS, 0);","  var diffuseIBLContribution: vec3<f32> = diffuseIBL.rgb*rendererUBO.BackgroundDiffuseStrength;","  diffuseIBLContribution *= baseColor * _ambientOcclusionMap.rgb;","  computedColor += vec4<f32>(diffuseIBLContribution*kD, 0);"),u=_e.substitute(u,"//VTK::Light::Impl",p).result,s.setCode(u)}else u=_e.substitute(u,"//VTK::Light::Impl",["  var diffuse: vec3<f32> = diffuseColor.rgb;","  var specular: vec3<f32> = mapperUBO.SpecularColor.rgb * mapperUBO.SpecularColor.a;","  computedColor = vec4<f32>(diffuse * _diffuseMap.rgb, mapperUBO.Opacity);"]).result,s.setCode(u)},e.shaderReplacements.set("replaceShaderLight",t.replaceShaderLight),t.replaceShaderColor=(n,r,i)=>{if(Qd(n)){const l=r.getShaderDescription("fragment");let p=l.getCode();p=_e.substitute(p,"//VTK::Color::Impl",["ambientColor = mapperUBO.EdgeColor;","diffuseColor = mapperUBO.EdgeColor;"]).result,l.setCode(p);return}const a=i.getBuffer("colorVI");if(!a)return;const o=r.getShaderDescription("vertex");o.addOutput("vec4<f32>","color",a.getArrayInformation()[0].interpolation);let s=o.getCode();s=_e.substitute(s,"//VTK::Color::Impl",["  output.color = colorVI;"]).result,o.setCode(s);const u=r.getShaderDescription("fragment");s=u.getCode(),s=_e.substitute(s,"//VTK::Color::Impl",["ambientColor = input.color;","diffuseColor = input.color;","opacity = mapperUBO.Opacity * input.color.a;"]).result,u.setCode(s)},e.shaderReplacements.set("replaceShaderColor",t.replaceShaderColor),t.replaceShaderTCoord=(n,r,i)=>{var h,v,y,x,m,g,d,S,T,C,w,_,E,D,O,N,R,M,A,G;if(!i.hasAttribute("tcoord"))return;const a=r.getShaderDescription("vertex"),o=i.getBuffer("tcoord"),s=Mt.getNumberOfComponentsFromBufferFormat(o.getArrayInformation()[0].format);let u=a.getCode();a.addOutput(`vec${s}<f32>`,"tcoordVS"),u=_e.substitute(u,"//VTK::TCoord::Impl",["  output.tcoordVS = tcoord;"]).result,a.setCode(u);const l=r.getShaderDescription("fragment");u=l.getCode();const p=e.WebGPUActor.getRenderable(),c=j=>j?j.getDimensionality()===s:!1,f=[];((y=(v=(h=p.getProperty()).getDiffuseTexture)==null?void 0:v.call(h))!=null&&y.getImageLoaded()||p.getTextures()[0]||e.colorTexture)&&(c((m=(x=p.getProperty()).getDiffuseTexture)==null?void 0:m.call(x))||c(p.getTextures()[0])||c(e.colorTexture))&&f.push("_diffuseMap = textureSample(DiffuseTexture, DiffuseTextureSampler, input.tcoordVS);"),(S=(d=(g=p.getProperty()).getRoughnessTexture)==null?void 0:d.call(g))!=null&&S.getImageLoaded()&&c(p.getProperty().getRoughnessTexture())&&f.push("_roughnessMap = textureSample(RoughnessTexture, RoughnessTextureSampler, input.tcoordVS);"),(w=(C=(T=p.getProperty()).getMetallicTexture)==null?void 0:C.call(T))!=null&&w.getImageLoaded()&&c(p.getProperty().getMetallicTexture())&&f.push("_metallicMap = textureSample(MetallicTexture, MetallicTextureSampler, input.tcoordVS);"),(D=(E=(_=p.getProperty()).getNormalTexture)==null?void 0:E.call(_))!=null&&D.getImageLoaded()&&c(p.getProperty().getNormalTexture())&&f.push("_normalMap = textureSample(NormalTexture, NormalTextureSampler, input.tcoordVS);"),(R=(N=(O=p.getProperty()).getAmbientOcclusionTexture)==null?void 0:N.call(O))!=null&&R.getImageLoaded()&&c(p.getProperty().getAmbientOcclusionTexture())&&f.push("_ambientOcclusionMap = textureSample(AmbientOcclusionTexture, AmbientOcclusionTextureSampler, input.tcoordVS);"),(G=(A=(M=p.getProperty()).getEmissionTexture)==null?void 0:A.call(M))!=null&&G.getImageLoaded()&&c(p.getProperty().getEmissionTexture())&&f.push("_emissionMap = textureSample(EmissionTexture, EmissionTextureSampler, input.tcoordVS);"),u=_e.substitute(u,"//VTK::TCoord::Impl",f).result,l.setCode(u)},e.shaderReplacements.set("replaceShaderTCoord",t.replaceShaderTCoord),t.replaceShaderSelect=(n,r,i)=>{if(n.includes("sel")){const a=r.getShaderDescription("fragment");let o=a.getCode();o=_e.substitute(o,"//VTK::Select::Impl",["  var compositeID: u32 = 0u;"]).result,a.setCode(o)}},e.shaderReplacements.set("replaceShaderSelect",t.replaceShaderSelect),t.getUsage=(n,r)=>n===Bu.POINTS||r===Ht.Points?Ot.Verts:r===Ht.Lines?Ot.Lines:n===Bu.WIREFRAME?r===Ht.Triangles?Ot.LinesFromTriangles:Ot.LinesFromStrips:r===Ht.Triangles?Ot.Triangles:r===Ht.TriangleStrips?Ot.Strips:r===Ht.TriangleEdges?Ot.LinesFromTriangles:Ot.LinesFromStrips,t.getHashFromUsage=n=>`pt${n}`,t.getTopologyFromUsage=n=>{switch(n){case Ot.Triangles:return"triangle-list";case Ot.Verts:return"point-list";case Ot.Lines:default:return"line-list"}},t.buildVertexInput=()=>{var y,x;const n=e.currentInput,r=e.cellArray,i=e.primitiveType;let o=e.WebGPUActor.getRenderable().getProperty().getRepresentation();const s=e.WebGPURenderWindow.getDevice();let u=!1;i===Ht.TriangleEdges&&(u=!0,o=Bu.WIREFRAME);const l=e.vertexInput,p=n.getPoints();let c;if(r){const m={hash:`R${o}P${i}${r.getMTime()}`,usage:Ot.Index,cells:r,numberOfPoints:p.getNumberOfPoints(),primitiveType:i,representation:o};c=s.getBufferManager().getBuffer(m),l.setIndexBuffer(c)}else l.setIndexBuffer(null);if(p){const m=e.WebGPUActor.getBufferShift(e.WebGPURenderer),g={hash:`${p.getMTime()}I${c.getMTime()}${m.join()}float32x4`,usage:Ot.PointArray,format:"float32x4",dataArray:p,indexBuffer:c,shift:m,packExtra:!0},d=s.getBufferManager().getBuffer(g);l.addBuffer(d,["vertexBC"])}else l.removeBufferIfPresent("vertexBC");const f=t.getUsage(o,i);if(e._usesCellNormals=!1,!e.is2D&&(f===Ot.Triangles||f===Ot.Strips)){const m=n.getPointData().getNormals(),g={format:"snorm8x4",indexBuffer:c,packExtra:!0,shift:0,scale:127};if(m){g.hash=`${m.getMTime()}I${c.getMTime()}snorm8x4`,g.dataArray=m,g.usage=Ot.PointArray;const d=s.getBufferManager().getBuffer(g);l.addBuffer(d,["normalMC"])}else if(i===Ht.Triangles){e._usesCellNormals=!0,g.hash=`PFN${p.getMTime()}I${c.getMTime()}snorm8x4`,g.dataArray=p,g.cells=r,g.usage=Ot.NormalsFromPoints;const d=s.getBufferManager().getBuffer(g);l.addBuffer(d,["normalMC"])}else l.removeBufferIfPresent("normalMC")}else l.removeBufferIfPresent("normalMC");let h=!1;if(e.renderable.getScalarVisibility()){const m=e.renderable.getColorMapColors();if(m&&!u){const g=e.renderable.getScalarMode();let d=!1;(g===Vu.USE_CELL_DATA||g===Vu.USE_CELL_FIELD_DATA||g===Vu.USE_FIELD_DATA||!n.getPointData().getScalars())&&g!==Vu.USE_POINT_FIELD_DATA&&m&&(d=!0);const S={usage:Ot.PointArray,format:"unorm8x4",hash:`${d}${m.getMTime()}I${c.getMTime()}unorm8x4`,dataArray:m,indexBuffer:c,cellData:d,cellOffset:0},T=s.getBufferManager().getBuffer(S);l.addBuffer(T,["colorVI"]),h=!0}}h||l.removeBufferIfPresent("colorVI");let v=null;if((x=(y=e.renderable).getInterpolateScalarsBeforeMapping)!=null&&x.call(y)&&e.renderable.getColorCoordinates()?v=e.renderable.getColorCoordinates():v=n.getPointData().getTCoords(),v&&!u){const m=s.getBufferManager().getBufferForPointArray(v,l.getIndexBuffer());l.addBuffer(m,["tcoord"])}else l.removeBufferIfPresent("tcoord")},t.updateTextures=()=>{var u,l,p,c,f,h,v,y,x,m,g,d,S,T,C;const n=[],r=[],i=(l=(u=e.renderable).getColorTextureMap)==null?void 0:l.call(u);i&&(e.colorTexture||(e.colorTexture=jc.newInstance({label:"polyDataColor"})),e.colorTexture.setInputData(i),r.push(["Diffuse",e.colorTexture]));const a=e.WebGPUActor.getRenderable(),o=e.WebGPURenderer.getRenderable(),s=[];if((c=(p=a.getProperty()).getDiffuseTexture)!=null&&c.call(p)){const w=["Diffuse",a.getProperty().getDiffuseTexture()];s.push(w)}if(a.getTextures()[0]){const w=["Diffuse",a.getTextures()[0]];s.push(w)}if(e.colorTexture){const w=["Diffuse",e.colorTexture];s.push(w)}if((h=(f=a.getProperty()).getRoughnessTexture)!=null&&h.call(f)){const w=["Roughness",a.getProperty().getRoughnessTexture()];s.push(w)}if((y=(v=a.getProperty()).getMetallicTexture)!=null&&y.call(v)){const w=["Metallic",a.getProperty().getMetallicTexture()];s.push(w)}if((m=(x=a.getProperty()).getNormalTexture)!=null&&m.call(x)){const w=["Normal",a.getProperty().getNormalTexture()];s.push(w)}if((d=(g=a.getProperty()).getAmbientOcclusionTexture)!=null&&d.call(g)){const w=["AmbientOcclusion",a.getProperty().getAmbientOcclusionTexture()];s.push(w)}if((T=(S=a.getProperty()).getEmissionTexture)!=null&&T.call(S)){const w=["Emission",a.getProperty().getEmissionTexture()];s.push(w)}if((C=o.getEnvironmentTexture)!=null&&C.call(o)){const w=["Environment",o.getEnvironmentTexture()];s.push(w)}for(let w=0;w<s.length;w++)(s[w][1].getInputData()||s[w][1].getJsImageData()||s[w][1].getCanvas())&&r.push(s[w]),s[w][1].getImage()&&s[w][1].getImageLoaded()&&r.push(s[w]);for(let w=0;w<r.length;w++){const _=r[w][1],E=r[w][0],D=e.device.getTextureManager().getTextureForVTKTexture(_);if(D.getReady()){let O=!1;for(let N=0;N<e.textures.length;N++)e.textures[N]===D&&(O=!0,n[N]=!0);if(!O){n[e.textures.length]=!0;const N=D.createView(`${E}Texture`);e.textures.push(D),e.textureViews.push(N);const R=_.getInterpolate()?"linear":"nearest";let M=null;!M&&_.getEdgeClamp()&&_.getRepeat()&&(M="mirror-repeat"),!M&&_.getEdgeClamp()&&(M="clamp-to-edge"),!M&&_.getRepeat()&&(M="repeat"),E!=="Environment"?N.addSampler(e.device,{addressModeU:M,addressModeV:M,addressModeW:M,minFilter:R,magFilter:R}):N.addSampler(e.device,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:R,magFilter:R,mipmapFilter:"linear"})}}}for(let w=e.textures.length-1;w>=0;w--)n[w]||(e.textures.splice(w,1),e.textureViews.splice(w,1))},t.computePipelineHash=()=>{let n=`pd${e.useRendererMatrix?"r":""}${e.forceZValue?"z":""}`;if(e.primitiveType===Ht.TriangleEdges||e.primitiveType===Ht.TriangleStripEdges)n+="edge";else{if(e.vertexInput.hasAttribute("normalMC")&&(n+="n"),e.vertexInput.hasAttribute("colorVI")&&(n+="c"),e.vertexInput.hasAttribute("tcoord")){const i=e.vertexInput.getBuffer("tcoord"),a=Mt.getNumberOfComponentsFromBufferFormat(i.getArrayInformation()[0].format);n+=`t${a}`}e.textures.length&&(n+=`tx${e.textures.length}`)}e._usesCellNormals&&(n+="cn"),e.SSBO&&(n+="ssbo");const r=t.getHashFromUsage(e.usage);n+=r,n+=e.renderEncoder.getPipelineHash(),e.pipelineHash=n},t.updateBuffers=()=>{e.primitiveType!==Ht.TriangleEdges&&e.primitiveType!==Ht.TriangleStripEdges&&t.updateTextures();const n=e.WebGPUActor.getRenderable(),r=n.getProperty().getRepresentation();e.usage=t.getUsage(r,e.primitiveType),t.buildVertexInput();const i=e.vertexInput.getBuffer("vertexBC");if(t.setNumberOfVertices(i.getSizeInBytes()/i.getStrideInBytes()),t.setTopology(t.getTopologyFromUsage(e.usage)),t.updateUBO(),t.haveWideLines()){const a=n.getProperty();t.setNumberOfInstances(Math.ceil(a.getLineWidth()*2))}else t.setNumberOfInstances(1)}}const sM={is2D:!1,cellArray:null,currentInput:null,cellOffset:0,primitiveType:0,colorTexture:null,renderEncoder:null,textures:null};function g4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,sM,n),p1.extend(t,e,n),e.fragmentShaderTemplate=aM,e.vertexShaderTemplate=iM,e._tmpMat3=gr(new Float64Array(9)),e._tmpMat4=ye(new Float64Array(16)),e.UBO=gi.newInstance({label:"mapperUBO"}),e.UBO.addEntry("BCWCMatrix","mat4x4<f32>"),e.UBO.addEntry("BCSCMatrix","mat4x4<f32>"),e.UBO.addEntry("MCWCNormals","mat4x4<f32>"),e.UBO.addEntry("AmbientColor","vec4<f32>"),e.UBO.addEntry("DiffuseColor","vec4<f32>"),e.UBO.addEntry("EdgeColor","vec4<f32>"),e.UBO.addEntry("SpecularColor","vec4<f32>"),e.UBO.addEntry("AmbientIntensity","f32"),e.UBO.addEntry("DiffuseIntensity","f32"),e.UBO.addEntry("Roughness","f32"),e.UBO.addEntry("Metallic","f32"),e.UBO.addEntry("Ambient","f32"),e.UBO.addEntry("Normal","f32"),e.UBO.addEntry("Emission","f32"),e.UBO.addEntry("NormalStrength","f32"),e.UBO.addEntry("BaseIOR","f32"),e.UBO.addEntry("SpecularIntensity","f32"),e.UBO.addEntry("LineWidth","f32"),e.UBO.addEntry("Opacity","f32"),e.UBO.addEntry("ZValue","f32"),e.UBO.addEntry("PropID","u32"),e.UBO.addEntry("ClipNear","f32"),e.UBO.addEntry("ClipFar","f32"),e.UBO.addEntry("Time","u32"),ut(t,e,["cellArray","currentInput","cellOffset","is2D","primitiveType","renderEncoder"]),e.textures=[],oM(t,e)}const uM=ze(g4,"vtkWebGPUCellArrayMapper");var d4={newInstance:uM,extend:g4};const{PrimitiveTypes:Au}=Ci;function cM(t,e){e.classHierarchy.push("vtkWebGPUPolyDataMapper"),t.createCellArrayMapper=()=>d4.newInstance(),t.buildPass=n=>{if(n){e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor"),e.renderable.getStatic()||e.renderable.update();const r=e.renderable.getInputData();e.renderable.mapScalars(r,1),t.updateCellArrayMappers(r)}},t.updateCellArrayMappers=n=>{const r=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],i=[];let a=0;for(let o=Au.Points;o<=Au.Triangles;o++)if(r[o].getNumberOfValues()>0){e.primitives[o]||(e.primitives[o]=t.createCellArrayMapper());const s=e.primitives[o];s.setCellArray(r[o]),s.setCurrentInput(n),s.setCellOffset(a),s.setPrimitiveType(o),s.setRenderable(e.renderable),a+=r[o].getNumberOfCells(),i.push(s)}else e.primitives[o]=null;if(e.WebGPUActor.getRenderable().getProperty().getEdgeVisibility())for(let o=Au.TriangleEdges;o<=Au.TriangleStripEdges;o++)if(r[o-2].getNumberOfValues()>0){e.primitives[o]||(e.primitives[o]=t.createCellArrayMapper());const s=e.primitives[o];s.setCellArray(r[o-2]),s.setCurrentInput(n),s.setCellOffset(e.primitives[o-2].getCellOffset()),s.setPrimitiveType(o),s.setRenderable(e.renderable),i.push(s)}else e.primitives[o]=null;t.prepareNodes(),t.addMissingChildren(i),t.removeUnusedNodes()}}const lM={primitives:null};function fM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,lM,n),He.extend(t,e,n),e.primitives=[],cM(t,e)}const pM=ze(fM,"vtkWebGPUPolyDataMapper");Sn("vtkMapper",pM);const{PrimitiveTypes:Zd}=Ci;function hM(t,e){e.classHierarchy.push("vtkWebGPUPolyDataMapper2D"),t.createCellArrayMapper=()=>d4.newInstance(),t.buildPass=n=>{if(n){e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor2D"),e.renderable.getStatic()||e.renderable.update();const r=e.renderable.getInputData();e.renderable.mapScalars(r,1),t.updateCellArrayMappers(r)}},t.updateCellArrayMappers=n=>{const r=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],i=[];let a=0;for(let o=Zd.Points;o<=Zd.Triangles;o++)if(r[o].getNumberOfValues()>0){e.primitives[o]||(e.primitives[o]=t.createCellArrayMapper());const s=e.primitives[o];s.setCellArray(r[o]),s.setCurrentInput(n),s.setCellOffset(a),s.setPrimitiveType(o),s.setRenderable(e.renderable),s.setIs2D(!0),a+=r[o].getNumberOfCells(),i.push(s)}else e.primitives[o]=null;t.prepareNodes(),t.addMissingChildren(i),t.removeUnusedNodes()}}function gM(t){return{primitives:[],...t}}function dM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gM(n)),He.extend(t,e,n),e.primitives=[],hM(t,e)}const vM=ze(dM,"vtkWebGPUPolyDataMapper2D");Sn("vtkMapper2D",vM);function yM(t,e){e.classHierarchy.push("vtkWebGPUScalarBarActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const i=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,a=e.WebGPURenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([a.usize,a.vsize],i,e.WebGPURenderWindow.getRenderable())}}}const mM={};function xM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,mM,n),He.extend(t,e,n),e.scalarBarActorHelper=Y5.newScalarBarActorHelper(),yM(t,e)}const SM=ze(xM,"vtkWebGPUScalarBarActor");Sn("vtkScalarBarActor",SM);function TM(t,e){e.classHierarchy.push("vtkWebGPUSampler"),t.create=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.device=n,e.options.addressModeU=r.addressModeU?r.addressModeU:"clamp-to-edge",e.options.addressModeV=r.addressModeV?r.addressModeV:"clamp-to-edge",e.options.addressModeW=r.addressModeW?r.addressModeW:"clamp-to-edge",e.options.magFilter=r.magFilter?r.magFilter:"nearest",e.options.minFilter=r.minFilter?r.minFilter:"nearest",e.options.mipmapFilter=r.mipmapFilter?r.mipmapFilter:"nearest",e.options.label=e.label,e.handle=e.device.getHandle().createSampler(e.options),e.bindGroupTime.modified()},t.getShaderCode=(n,r)=>`@binding(${n}) @group(${r}) var ${e.label}: sampler;`,t.getBindGroupEntry=()=>({resource:e.handle})}const CM={device:null,handle:null,label:null,options:null};function v4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,CM,n),P.obj(t,e),e.options={},e.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,sampler:{}},e.bindGroupTime={},P.obj(e.bindGroupTime,{mtime:0}),P.get(t,e,["bindGroupTime","handle","options"]),P.setGet(t,e,["bindGroupLayoutEntry","device","label"]),TM(t,e)}const wM=P.newInstance(v4);var $c={newInstance:wM,extend:v4};function _M(t,e){e.classHierarchy.push("vtkWebGPUTextureView"),t.create=(n,r)=>{e.texture=n,e.options=r,e.options.dimension=e.options.dimension||"2d",e.options.label=e.label,e.textureHandle=n.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupLayoutEntry.texture.viewDimension=e.options.dimension;const i=Mt.getDetailsFromTextureFormat(e.texture.getFormat());e.bindGroupLayoutEntry.texture.sampleType=i.sampleType},t.createFromTextureHandle=(n,r)=>{e.texture=null,e.options=r,e.options.dimension=e.options.dimension||"2d",e.options.label=e.label,e.textureHandle=n,e.handle=e.textureHandle.createView(e.options),e.bindGroupLayoutEntry.texture.viewDimension=e.options.dimension;const i=Mt.getDetailsFromTextureFormat(r.format);e.bindGroupLayoutEntry.texture.sampleType=i.sampleType,e.bindGroupTime.modified()},t.getBindGroupEntry=()=>({resource:t.getHandle()}),t.getShaderCode=(n,r)=>{let i="f32";e.bindGroupLayoutEntry.texture.sampleType==="sint"?i="i32":e.bindGroupLayoutEntry.texture.sampleType==="uint"&&(i="u32");let a=`@binding(${n}) @group(${r}) var ${e.label}: texture_${e.options.dimension}<${i}>;`;return e.bindGroupLayoutEntry.texture.sampleType==="depth"&&(a=`@binding(${n}) @group(${r}) var ${e.label}: texture_depth_${e.options.dimension};`),a},t.addSampler=(n,r)=>{const i=$c.newInstance({label:`${e.label}Sampler`});i.create(n,r),t.setSampler(i)},t.getBindGroupTime=()=>(e.texture&&e.texture.getHandle()!==e.textureHandle&&(e.textureHandle=e.texture.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupTime.modified()),e.bindGroupTime),t.getHandle=()=>(e.texture&&e.texture.getHandle()!==e.textureHandle&&(e.textureHandle=e.texture.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupTime.modified()),e.handle)}const EM={texture:null,handle:null,sampler:null,label:null};function y4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,EM,n),P.obj(t,e),e.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}},e.bindGroupTime={},P.obj(e.bindGroupTime,{mtime:0}),P.get(t,e,["bindGroupTime","texture"]),P.setGet(t,e,["bindGroupLayoutEntry","label","sampler"]),_M(t,e)}const DM=P.newInstance(y4);var m4={newInstance:DM,extend:y4};const{BufferUsage:e2}=Ci;function OM(t,e){e.classHierarchy.push("vtkWebGPUTexture"),t.create=(n,r)=>{e.device=n,e.width=r.width,e.height=r.height,e.depth=r.depth?r.depth:1;const i=e.depth===1?"2d":"3d";e.format=r.format?r.format:"rgba8unorm",e.mipLevel=r.mipLevel?r.mipLevel:0,e.usage=r.usage?r.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label,dimension:i,mipLevelCount:e.mipLevel+1})},t.assignFromHandle=(n,r,i)=>{e.device=n,e.handle=r,e.width=i.width,e.height=i.height,e.depth=i.depth?i.depth:1,e.format=i.format?i.format:"rgba8unorm",e.usage=i.usage?i.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST},t.writeImageData=n=>{let r=[];if(n.canvas){e.device.getHandle().queue.copyExternalImageToTexture({source:n.canvas,flipY:n.flip},{texture:e.handle,premultipliedAlpha:!0},[e.width,e.height,e.depth]),e.ready=!0;return}n.jsImageData&&!n.nativeArray&&(n.width=n.jsImageData.width,n.height=n.jsImageData.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,n.nativeArray=n.jsImageData.data);const i=Mt.getDetailsFromTextureFormat(e.format);let a=e.width*i.stride;const o=(u,l,p)=>{const c=u.length/(l*p)*u.BYTES_PER_ELEMENT,f=i.elementSize===2&&i.sampleType==="float";if(f||c%256){const h=u,v=c/h.BYTES_PER_ELEMENT,y=i.elementSize,x=256*Math.floor((v*y+255)/256),m=x/y,g=P.newTypedArray(f?"Uint16Array":h.constructor.name,m*l*p);for(let d=0;d<l*p;d++)if(f)for(let S=0;S<v;S++)g[d*m+S]=$n.toHalf(h[d*v+S]);else g.set(h.subarray(d*v,(d+1)*v),d*m);return[g,x]}return[u,c]};if(n.nativeArray&&(r=n.nativeArray),n.image){const u=document.createElement("canvas");u.width=n.image.width,u.height=n.image.height;const l=u.getContext("2d");l.translate(0,u.height),l.scale(1,-1),l.drawImage(n.image,0,0,n.image.width,n.image.height,0,0,u.width,u.height),r=l.getImageData(0,0,n.image.width,n.image.height).data}const s=e.device.createCommandEncoder();if(t.getDimensionality()!==3){const u=jc.generateMipmaps(r,e.width,e.height,e.mipLevel);let l=e.width,p=e.height;for(let c=0;c<=e.mipLevel;c++){const f=o(u[c],p,1);a=f[1];const h={dataArray:n.dataArray?n.dataArray:null,nativeArray:f[0],usage:e2.Texture},v=e.device.getBufferManager().getBuffer(h);s.copyBufferToTexture({buffer:v.getHandle(),offset:0,bytesPerRow:a,rowsPerImage:p},{texture:e.handle,mipLevel:c},[l,p,1]),l/=2,p/=2}e.device.submitCommandEncoder(s),e.ready=!0}else{const u=o(r,e.height,e.depth);a=u[1];const l={dataArray:n.dataArray?n.dataArray:null,usage:e2.Texture};l.nativeArray=u[0];const p=e.device.getBufferManager().getBuffer(l);s.copyBufferToTexture({buffer:p.getHandle(),offset:0,bytesPerRow:a,rowsPerImage:e.height},{texture:e.handle},[e.width,e.height,e.depth]),e.device.submitCommandEncoder(s),e.ready=!0}},t.getScale=()=>{const n=Mt.getDetailsFromTextureFormat(e.format);return n.elementSize===2&&n.sampleType==="float"?1:255},t.getNumberOfComponents=()=>Mt.getDetailsFromTextureFormat(e.format).numComponents,t.getDimensionality=()=>{let n=0;return e.width>1&&n++,e.height>1&&n++,e.depth>1&&n++,n},t.resizeToMatch=n=>{(n.getWidth()!==e.width||n.getHeight()!==e.height||n.getDepth()!==e.depth)&&(e.width=n.getWidth(),e.height=n.getHeight(),e.depth=n.getDepth(),e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label}))},t.resize=function(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;(n!==e.width||r!==e.height||i!==e.depth)&&(e.width=n,e.height=r,e.depth=i,e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label}))},t.createView=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r.dimension||(r.dimension=e.depth===1?"2d":"3d");const i=m4.newInstance({label:n});return i.create(t,r),i}}const bM={device:null,handle:null,buffer:null,ready:!1,label:null};function x4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bM,n),P.obj(t,e),P.get(t,e,["handle","ready","width","height","depth","format","usage"]),P.setGet(t,e,["device","label"]),OM(t,e)}const NM=P.newInstance(x4);var fr={newInstance:NM,extend:x4};function MM(t,e){e.classHierarchy.push("vtkWebGPUPixelSpaceCallbackMapper"),t.opaquePass=(n,r)=>{e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent();const i=e.WebGPURenderer.getAspectRatio(),a=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,o=e.WebGPURenderer.getTiledSizeAndOrigin(),s=null;e.renderable.getUseZValues(),e.renderable.invokeCallback(e.renderable.getInputData(),a,i,o,s)}}const RM={};function FM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,RM,n),He.extend(t,e,n),MM(t,e)}const LM=P.newInstance(FM,"vtkWebGPUPixelSpaceCallbackMapper");Sn("vtkPixelSpaceCallbackMapper",LM);const{vtkErrorMacro:kM}=P;class BM{constructor(){this.segmentMapping={},this.segments=[null],this.faces=[]}addSegment(e){const n=e[0],r=e[e.length-1];if(n===r||e.length<2)return;const i=this.segmentMapping[n],a=this.segmentMapping[r];if(i!==void 0&&a!==void 0)if(Math.abs(i)===Math.abs(a)){const o=i<a?a:i,s=this.segments[o];if(i>0)for(let u=1;u<e.length-1;u++)s.push(e[u]);else for(let u=1;u<e.length-1;u++)s.unshift(e[e.length-1-u]);this.faces.push(s),this.segments[o]=null,this.segmentMapping[n]=void 0,this.segmentMapping[r]=void 0}else{const o=Math.abs(i),s=Math.abs(a),u=this.segments[o],l=this.segments[s];this.segments[o]=null,this.segments[s]=null,this.segmentMapping[u[0]]=void 0,this.segmentMapping[l[0]]=void 0,this.segmentMapping[u[u.length-1]]=void 0,this.segmentMapping[l[l.length-1]]=void 0,this.addSegment(e),this.addSegment(u),this.addSegment(l)}else if(i!==void 0){if(i>0){const o=this.segments[i];for(let s=1;s<e.length;s++)o.push(e[s]);this.segmentMapping[r]=i}else{const o=this.segments[-i];this.segmentMapping[r]=i;for(let s=1;s<e.length;s++)o.unshift(e[s])}this.segmentMapping[n]=void 0}else if(a!==void 0){if(a>0){const o=this.segments[a];for(let s=1;s<e.length;s++)o.push(e[e.length-1-s]);this.segmentMapping[n]=a}else{const o=this.segments[-a];this.segmentMapping[n]=a;for(let s=1;s<e.length;s++)o.unshift(e[e.length-s-1])}this.segmentMapping[r]=void 0}else{const o=this.segments.length;this.segments.push(e),this.segmentMapping[n]=-o,this.segmentMapping[r]=o}}}function VM(t,e){e.classHierarchy.push("vtkClosedPolyLineToSurfaceFilter"),t.requestData=(n,r)=>{const i=n[0];if(!i){kM("Invalid or missing input");return}const a=sn.newInstance();a.shallowCopy(i);const o=new BM,s=i.getLines().getData();let u=0;for(;u<s.length;){const f=s[u++],h=[];for(let v=0;v<f;v++)h.push(s[u+v]);o.addSegment(h),u+=f}const{faces:l}=o;let p=l.length;for(let f=0;f<l.length;f++)p+=l[f].length;const c=new Uint16Array(p);u=0;for(let f=0;f<l.length;f++){const h=l[f];c[u++]=h.length;for(let v=0;v<h.length;v++)c[u++]=h[v]}a.setPolys(Fs.newInstance({values:c,name:"faces"})),r[0]=a}}const AM={};function S4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,AM,n),P.obj(t,e),P.algo(t,e,1,1),VM(t,e)}const UM=P.newInstance(S4,"vtkClosedPolyLineToSurfaceFilter");var GM={newInstance:UM,extend:S4};const{vtkErrorMacro:t2}=un;function PM(t){const e=t.getPolys().getData(),n=t.getStrips().getData(),r={cellSize:0,cell:[],done:!1,polyIdx:0,stripIdx:0,remainingStripLength:0,next(){if(r.polyIdx<e.length){r.cellSize=e[r.polyIdx];const i=r.polyIdx+1,a=i+r.cellSize;r.polyIdx=a;let o=0;for(let s=i;s<a;++s)r.cell[o++]=e[s]}else if(r.stripIdx<n.length){r.cellSize=3,r.remainingStripLength===0&&(r.remainingStripLength=n[r.stripIdx]-2,r.stripIdx+=3);const i=r.stripIdx-2,a=r.stripIdx+1;r.stripIdx++,r.remainingStripLength--;let o=0;for(let s=i;s<a;++s)r.cell[o++]=n[s]}else if(!r.done)r.done=!0;else throw new Error("Iterator is done")}};return r.next(),r}function IM(t,e){e.classHierarchy.push("vtkCutter");const n={...t};t.getMTime=()=>{let i=n.getMTime();return e.cutFunction&&(i=Math.max(i,e.cutFunction.getMTime())),i};function r(i,a){const o=i.getPoints(),s=o.getData(),u=o.getNumberOfPoints(),l=[],p=[],c=[];(!e.cutScalars||e.cutScalars.length<u)&&(e.cutScalars=new Float32Array(u));let f=0,h=0;for(;f<s.length;)e.cutScalars[h++]=e.cutFunction.evaluateFunction(s[f++],s[f++],s[f++]);const v=[],y=new Array(3),x=new Array(3),m=[];for(const d=PM(i);!d.done;d.next()){if(d.cellSize<=2)continue;for(let _=0;_<d.cellSize;)m[_]=e.cutScalars[d.cell[_++]];const S=m[0]>0;let T=!0;for(let _=1;_<d.cell.length;_++)if(m[_]>0!==S){T=!1;break}if(T)continue;const C=[];for(let _=0;_<d.cellSize;_++){const E=_+1===d.cellSize?0:_+1,D=m[_]>0;if(m[E]>0===D)continue;let N=_,R=E,M=m[R]-m[N];M<=0&&(N=E,R=_,M*=-1);let A=0;M!==0&&(A=(e.cutValue-m[N])/M);const G=d.cell[N],j=d.cell[R];y[0]=s[G*3],y[1]=s[G*3+1],y[2]=s[G*3+2],x[0]=s[j*3],x[1]=s[j*3+1],x[2]=s[j*3+2];const k=[y[0]+A*(x[0]-y[0]),y[1]+A*(x[1]-y[1]),y[2]+A*(x[2]-y[2])];C.push({pointEdge1:G,pointEdge2:j,intersectedPoint:k,newPointID:-1})}for(let _=0;_<C.length;_++){const E=C[_];let D=!1;for(let O=0;O<v.length;O++){const N=v[O],R=E.pointEdge1===N.pointEdge1&&E.pointEdge2===N.pointEdge2,M=E.intersectedPoint[0]===N.intersectedPoint[0]&&E.intersectedPoint[1]===N.intersectedPoint[1]&&E.intersectedPoint[2]===N.intersectedPoint[2];if(R||M){D=!0,C[_].newPointID=v[O].newPointID;break}}D||(l.push(E.intersectedPoint[0]),l.push(E.intersectedPoint[1]),l.push(E.intersectedPoint[2]),C[_].newPointID=l.length/3-1,v.push(C[_]))}const w=C.length;w===2?p.push(w,C[0].newPointID,C[1].newPointID):w>2&&(c.push(w),C.forEach(_=>{c.push(_.newPointID)}))}a.getPoints().setData(Vc(o.getDataType(),l),3),p.length!==0&&a.getLines().setData(Uint16Array.from(p)),c.length!==0&&a.getPolys().setData(Uint16Array.from(c))}t.requestData=(i,a)=>{const o=i[0];if(!o){t2("Invalid or missing input");return}if(!e.cutFunction){t2("Missing cut function");return}const s=sn.newInstance();r(o,s),a[0]=s}}const zM={cutFunction:null,cutScalars:null,cutValue:0};function T4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,zM,n),qe(t,e),Nh(t,e,1,1),ut(t,e,["cutFunction","cutValue"]),IM(t,e)}const WM=ze(T4,"vtkCutter");var jM={newInstance:WM,extend:T4};const $M=t=>t,n2=1e-6;class C4{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.matrix=ye(new Float64Array(16)),this.tmp=new Float64Array(3),this.angleConv=e?Cx:$M}rotateFromDirections(e,n){const r=new Float64Array(3),i=new Float64Array(3),a=new Float64Array(16);Ke(r,e[0],e[1],e[2]),Ke(i,n[0],n[1],n[2]),cr(r,r),cr(i,i);const o=bs(r,i);return o>=1?this:(Ka(this.tmp,r,i),Ha(this.tmp)<n2&&(Ka(this.tmp,[1,0,0],e),Ha(this.tmp)<n2&&Ka(this.tmp,[0,1,0],e)),U3(a,Math.acos(o),this.tmp),Le(this.matrix,this.matrix,a),this)}rotate(e,n){return Ke(this.tmp,...n),cr(this.tmp,this.tmp),Vn(this.matrix,this.matrix,this.angleConv(e),this.tmp),this}rotateX(e){return Sh(this.matrix,this.matrix,this.angleConv(e)),this}rotateY(e){return Th(this.matrix,this.matrix,this.angleConv(e)),this}rotateZ(e){return Ch(this.matrix,this.matrix,this.angleConv(e)),this}translate(e,n,r){return Ke(this.tmp,e,n,r),Ze(this.matrix,this.matrix,this.tmp),this}scale(e,n,r){return Ke(this.tmp,e,n,r),kr(this.matrix,this.matrix,this.tmp),this}multiply(e){return Le(this.matrix,this.matrix,e),this}multiply3x3(e){return Le(this.matrix,this.matrix,[e[0],e[1],e[2],0,e[3],e[4],e[5],0,e[6],e[7],e[8],0,0,0,0,1]),this}invert(){return yt(this.matrix,this.matrix),this}identity(){return ye(this.matrix),this}apply(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(qs(jh,this.matrix))return this;const i=r===-1?e.length:n+r*3;for(let a=n;a<i;a+=3)Ke(this.tmp,e[a],e[a+1],e[a+2]),Re(this.tmp,this.tmp,this.matrix),e[a]=this.tmp[0],e[a+1]=this.tmp[1],e[a+2]=this.tmp[2];return this}getMatrix(){return this.matrix}setMatrix(e){return e&&e.length===16&&ft(this.matrix,e),this}}function HM(){return new C4(!0)}function KM(){return new C4(!1)}var Ho={buildFromDegree:HM,buildFromRadian:KM};const XM=[2,0,1,2,2,3,2,4,5,2,6,7,2,0,2,2,1,3,2,4,6,2,5,7,2,0,4,2,1,5,2,2,6,2,3,7],qM=[4,0,1,3,2,4,4,6,7,5,4,8,10,11,9,4,12,13,15,14,4,16,18,19,17,4,20,21,23,22];function YM(t,e){e.classHierarchy.push("vtkCubeSource");function n(r,i){if(e.deleted)return;const a=sn.newInstance();i[0]=a;const o=24,s=P.newTypedArray(e.pointType,o*3);a.getPoints().setData(s,3);const u=P.newTypedArray(e.pointType,o*3),l=Ee.newInstance({name:"Normals",values:u,numberOfComponents:3});a.getPointData().setNormals(l);let p=2;e.generate3DTextureCoordinates===!0&&(p=3);const c=P.newTypedArray(e.pointType,o*p),f=Ee.newInstance({name:"TextureCoordinates",values:c,numberOfComponents:p});a.getPointData().setTCoords(f);const h=[0,0,0],v=[0,0,0],y=[0,0];let x=0;h[0]=-e.xLength/2,v[0]=-1,v[1]=0,v[2]=0;for(let m=0;m<2;m++){h[1]=-e.yLength/2;for(let g=0;g<2;g++){y[1]=h[1]+.5,h[2]=-e.zLength/2;for(let d=0;d<2;d++)y[0]=(h[2]+.5)*(1-2*m),s[x*3]=h[0],s[x*3+1]=h[1],s[x*3+2]=h[2],u[x*3]=v[0],u[x*3+1]=v[1],u[x*3+2]=v[2],p===2?(c[x*p]=y[0],c[x*p+1]=y[1]):(c[x*p]=2*m-1,c[x*p+1]=2*g-1,c[x*p+2]=2*d-1),x++,h[2]+=e.zLength;h[1]+=e.yLength}h[0]+=e.xLength,v[0]+=2}h[1]=-e.yLength/2,v[1]=-1,v[0]=0,v[2]=0;for(let m=0;m<2;m++){h[0]=-e.xLength/2;for(let g=0;g<2;g++){y[0]=(h[0]+.5)*(2*m-1),h[2]=-e.zLength/2;for(let d=0;d<2;d++)y[1]=(h[2]+.5)*-1,s[x*3]=h[0],s[x*3+1]=h[1],s[x*3+2]=h[2],u[x*3]=v[0],u[x*3+1]=v[1],u[x*3+2]=v[2],p===2?(c[x*p]=y[0],c[x*p+1]=y[1]):(c[x*p]=2*g-1,c[x*p+1]=2*m-1,c[x*p+2]=2*d-1),x++,h[2]+=e.zLength;h[0]+=e.xLength}h[1]+=e.yLength,v[1]+=2}h[2]=-e.zLength/2,v[2]=-1,v[0]=0,v[1]=0;for(let m=0;m<2;m++){h[1]=-e.yLength/2;for(let g=0;g<2;g++){y[1]=h[1]+.5,h[0]=-e.xLength/2;for(let d=0;d<2;d++)y[0]=(h[0]+.5)*(2*m-1),s[x*3]=h[0],s[x*3+1]=h[1],s[x*3+2]=h[2],u[x*3]=v[0],u[x*3+1]=v[1],u[x*3+2]=v[2],p===2?(c[x*p]=y[0],c[x*p+1]=y[1]):(c[x*p]=2*d-1,c[x*p+1]=2*g-1,c[x*p+2]=2*m-1),x++,h[0]+=e.xLength;h[1]+=e.yLength}h[2]+=e.zLength,v[2]+=2}if(e.rotations&&Ho.buildFromDegree().rotateX(e.rotations[0]).rotateY(e.rotations[1]).rotateZ(e.rotations[2]).apply(s).apply(u),e.center&&Ho.buildFromRadian().translate(...e.center).apply(s),e.matrix){Ho.buildFromRadian().setMatrix(e.matrix).apply(s);const m=[e.matrix[0],e.matrix[1],e.matrix[2],0,e.matrix[4],e.matrix[5],e.matrix[6],0,e.matrix[8],e.matrix[9],e.matrix[10],0,0,0,0,1];Ho.buildFromRadian().setMatrix(m).apply(u)}e.generateFaces?a.getPolys().deepCopy(e._polys):a.getPolys().initialize(),e.generateLines?(a.getLines().deepCopy(e._lineCells),a.getPointData().setNormals(null)):a.getLines().initialize(),a.modified()}t.setBounds=function(){let r=[];if(Array.isArray(arguments.length<=0?void 0:arguments[0]))r=arguments.length<=0?void 0:arguments[0];else for(let i=0;i<arguments.length;i++)r.push(i<0||arguments.length<=i?void 0:arguments[i]);r.length===6&&(t.setXLength(r[1]-r[0]),t.setYLength(r[3]-r[2]),t.setZLength(r[5]-r[4]),t.setCenter([(r[0]+r[1])/2,(r[2]+r[3])/2,(r[4]+r[5])/2]))},t.requestData=n}const JM={xLength:1,yLength:1,zLength:1,pointType:"Float64Array",generate3DTextureCoordinates:!1,generateFaces:!0,generateLines:!1};function w4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,JM,n),P.obj(t,e),P.setGet(t,e,["xLength","yLength","zLength","generate3DTextureCoordinates","generateFaces","generateLines"]),P.setGetArray(t,e,["center","rotations"],3),P.setGetArray(t,e,["matrix"],16),e._polys=Fs.newInstance({values:Uint16Array.from(qM)}),e._lineCells=Fs.newInstance({values:Uint16Array.from(XM)}),P.moveToProtected(t,e,["polys","lineCells"]),P.algo(t,e,0,1),YM(t,e)}const QM=P.newInstance(w4,"vtkCubeSource");var ZM={newInstance:QM,extend:w4};const{vtkErrorMacro:r2}=P;function eR(t,e){e.classHierarchy.push("vtkImageDataOutlineFilter");const n={...t};t.requestData=(r,i)=>{const a=r[0];if(!a||!a.isA("vtkImageData")){r2("Invalid or missing input");return}const o=a.getSpatialExtent();if(!o){r2("Unable to fetch spatial extents of input image.");return}e._cubeSource.setBounds(o),e._cubeSource.setMatrix(a.getIndexToWorld()),i[0]=e._cubeSource.getOutputData()},t.getMTime=()=>Math.max(n.getMTime(),e._cubeSource.getMTime()),t.setGenerateFaces=e._cubeSource.setGenerateFaces,t.setGenerateLines=e._cubeSource.setGenerateLines,t.getGenerateFaces=e._cubeSource.getGenerateFaces,t.getGenerateLines=e._cubeSource.getGenerateLines}const tR={};function _4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,tR,n),P.obj(t,e),P.algo(t,e,1,1),e._cubeSource=ZM.newInstance(),P.moveToProtected(t,e,["cubeSource","tmpOut"]),eR(t,e)}const nR=P.newInstance(_4,"vtkImageDataOutlineFilter");var rR={newInstance:nR,extend:_4};let h1;function iR(t,e){e.classHierarchy.push("vtkAbstractTransform","vtkHomogeneousTransform","vtkTransform"),t.transformPoint=(n,r)=>(Re(r,n,e.matrix),r),t.transformPoints=(n,r)=>{const i=new Float64Array(3),a=new Float64Array(3);for(let o=0;o<n.length;o+=3)i[0]=n[o],i[1]=n[o+1],i[2]=n[o+2],Re(a,i,e.matrix),r[o]=a[0],r[o+1]=a[1],r[o+2]=a[2];return r},t.preMultiply=()=>{t.setPreMultiplyFlag(!0)},t.postMultiply=()=>{t.setPreMultiplyFlag(!1)},t.transformMatrix=(n,r)=>(e.preMultiplyFlag?Le(r,e.matrix,n):Le(r,n,e.matrix),r),t.transformMatrices=(n,r)=>{const i=new Float64Array(16),a=new Float64Array(16),o=e.preMultiplyFlag?()=>Le(a,e.matrix,i):()=>Le(a,i,e.matrix);for(let s=0;s<n.length;s+=16){for(let u=0;u<16;++u)i[u]=n[s+u];o();for(let u=0;u<16;++u)r[s+u]=a[u]}return r},t.getInverse=()=>h1({matrix:Wo.invertMatrix(Array.from(e.matrix),[],4),preMultiplyFlag:e.preMultiplyFlag})}const aR={preMultiplyFlag:!1,matrix:[...jh]};function E4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,aR,n),P.obj(t,e),P.setGet(t,e,["preMultiplyFlag"]),P.setGetArray(t,e,["matrix"],16),iR(t,e)}h1=P.newInstance(E4,"vtkTransform");var oR={newInstance:h1,extend:E4};function mi(t,e,n){return t?`${t.getMTime()}-${e}-${n}`:"0"}function g1(t,e){return`${t.getMTime()}A${e.getMTime()}`}var sR=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkImageResliceMapperVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

// all variables that represent positions or directions have a suffix
// indicating the coordinate system they are in. The possible values are
// MC - Model coordinates
// WC - World coordinates
// VC - View coordinates
// DC - Display coordinates
// TC - Texture coordinates

// frag position in VC
//VTK::PositionVC::Dec

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// camera and actor matrix values
//VTK::Camera::Dec

void main()
{
  //VTK::PositionVC::Impl

  //VTK::TCoord::Impl

  //VTK::Picking::Impl
}
`,uR=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkImageResliceMapperFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the gpu image mapper fragment shader

// VC position of this fragment
//VTK::PositionVC::Dec

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// handle coincident offsets
//VTK::Coincident::Dec

//VTK::ZBuffer::Dec

// the output of this shader
//VTK::Output::Dec

void main()
{
  // VC position of this fragment. This should not branch/return/discard.
  //VTK::PositionVC::Impl

  // Place any calls that require uniform flow (e.g. dFdx) here.
  //VTK::UniformFlow::Impl

  // Set gl_FragDepth here (gl_FragCoord.z by default)
  //VTK::Depth::Impl

  // Early depth peeling abort:
  //VTK::DepthPeeling::PreColor

  //VTK::TCoord::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }

  //VTK::DepthPeeling::Impl

  //VTK::Picking::Impl

  // handle coincident offsets
  //VTK::Coincident::Impl

  //VTK::ZBuffer::Impl

  //VTK::RenderPassFragmentShader::Impl
}
`;const Ja={NEAREST:0,LINEAR:1},{vtkErrorMacro:Mi}=un;function i2(t,e,n){return e.identity(n),t.reduce((r,i,a)=>a===0?i?e.copy(r,i):e.identity(r):i?e.multiply(r,r,i):r,n)}function cR(t,e){e.classHierarchy.push("vtkOpenGLImageResliceMapper");function n(i){[e._scalars,e._colorTransferFunc,e._pwFunc].forEach(a=>i.unregisterGraphicsResourceUser(a,t))}t.buildPass=i=>{if(i){e.currentRenderPass=null,e._openGLImageSlice=t.getFirstAncestorOfType("vtkOpenGLImageSlice"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer");const a=e._openGLRenderer.getRenderable();e._openGLCamera=e._openGLRenderer.getViewNodeFor(a.getActiveCamera());const o=e._openGLRenderWindow;e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),o&&!o.isDeleted()&&o!==e._openGLRenderWindow&&n(o),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow)}},t.translucentPass=(i,a)=>{i&&(e.currentRenderPass=a,t.render())},t.zBufferPass=i=>{i&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=i=>t.zBufferPass(i),t.opaquePass=i=>{i&&t.render()},t.getCoincidentParameters=(i,a)=>e.renderable.getResolveCoincidentTopology()==Yn.PolygonOffset?e.renderable.getCoincidentTopologyPolygonOffsetParameters():null,t.render=()=>{const i=e._openGLImageSlice.getRenderable(),a=e._openGLRenderer.getRenderable();t.renderPiece(a,i)},t.renderPiece=(i,a)=>{if(t.invokeEvent({type:"StartEvent"}),e.renderable.update(),e.currentInput=e.renderable.getInputData(),!e.currentInput){Mi("No input!");return}t.updateResliceGeometry(),t.renderPieceStart(i,a),t.renderPieceDraw(i,a),t.renderPieceFinish(i,a),t.invokeEvent({type:"EndEvent"})},t.renderPieceStart=(i,a)=>{t.updateBufferObjects(i,a),a.getProperty().getInterpolationType()===Ja.NEAREST?(e.openGLTexture.setMinificationFilter(Se.NEAREST),e.openGLTexture.setMagnificationFilter(Se.NEAREST),e.colorTexture.setMinificationFilter(Se.NEAREST),e.colorTexture.setMagnificationFilter(Se.NEAREST),e.pwfTexture.setMinificationFilter(Se.NEAREST),e.pwfTexture.setMagnificationFilter(Se.NEAREST)):(e.openGLTexture.setMinificationFilter(Se.LINEAR),e.openGLTexture.setMagnificationFilter(Se.LINEAR),e.colorTexture.setMinificationFilter(Se.LINEAR),e.colorTexture.setMagnificationFilter(Se.LINEAR),e.pwfTexture.setMinificationFilter(Se.LINEAR),e.pwfTexture.setMagnificationFilter(Se.LINEAR)),e.lastBoundBO=null},t.renderPieceDraw=(i,a)=>{const o=e.context;e.openGLTexture.activate(),e.colorTexture.activate(),e.pwfTexture.activate(),t.updateShaders(e.tris,i,a),o.drawArrays(o.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.openGLTexture.deactivate(),e.colorTexture.deactivate(),e.pwfTexture.deactivate()},t.renderPieceFinish=(i,a)=>{},t.updateBufferObjects=(i,a)=>{t.getNeedToRebuildBufferObjects(i,a)&&t.buildBufferObjects(i,a)},t.getNeedToRebuildBufferObjects=(i,a)=>{var o,s,u;return e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<a.getMTime()||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<a.getProperty().getMTime()||e.VBOBuildTime.getMTime()<e.currentInput.getMTime()||e.VBOBuildTime.getMTime()<e.resliceGeom.getMTime()||!((o=e.openGLTexture)!=null&&o.getHandle())||!((s=e.colorTexture)!=null&&s.getHandle())||!((u=e.pwfTexture)!=null&&u.getHandle())},t.buildBufferObjects=(i,a)=>{var w,_,E,D;const o=e.currentInput;if(!o)return;const s=(w=o.getPointData())==null?void 0:w.getScalars();if(!s)return;const u=s.getNumberOfComponents();let l=g1(o,s);const p=e._openGLRenderWindow.getGraphicsResourceForObject(s);if(!((_=p==null?void 0:p.oglObject)!=null&&_.getHandle())||(p==null?void 0:p.hash)!==l){e.openGLTexture=vt.newInstance(),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const O=o.getDimensions();e.openGLTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),e.openGLTexture.resetFormatAndType(),e.openGLTexture.create3DFilterableFromDataArray(O[0],O[1],O[2],s),e._openGLRenderWindow.setGraphicsResourceForObject(s,e.openGLTexture,l),s!==e._scalars&&(e._openGLRenderWindow.registerGraphicsResourceUser(s,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._scalars,t)),e._scalars=s}else e.openGLTexture=p.oglObject;const f=a.getProperty(),h=f.getIndependentComponents(),v=h?u:1,y=h?2*v:1,x=f.getRGBTransferFunction();l=mi(x,h,v);const m=e._openGLRenderWindow.getGraphicsResourceForObject(x);if(!((E=m==null?void 0:m.oglObject)!=null&&E.getHandle())||(m==null?void 0:m.hash)!==l){const N=1024*y*3,R=new Uint8ClampedArray(N);if(e.colorTexture=vt.newInstance(),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow),x){const M=new Float32Array(3072);for(let A=0;A<v;A++){const G=f.getRGBTransferFunction(A),j=G.getRange();if(G.getTable(j[0],j[1],1024,M,1),h)for(let k=0;k<1024*3;k++)R[A*1024*6+k]=255*M[k],R[A*1024*6+k+1024*3]=255*M[k];else for(let k=0;k<1024*3;k++)R[A*1024*6+k]=255*M[k]}e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(1024,y,3,Be.UNSIGNED_CHAR,R)}else{for(let M=0;M<1024*3;++M)R[M]=255*M/(1023*3),R[M+1]=255*M/(1023*3),R[M+2]=255*M/(1023*3);e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(1024,1,3,Be.UNSIGNED_CHAR,R)}x&&(e._openGLRenderWindow.setGraphicsResourceForObject(x,e.colorTexture,l),x!==e._colorTransferFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(x,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._colorTransferFunc,t)),e._colorTransferFunc=x)}else e.colorTexture=m.oglObject;const d=f.getPiecewiseFunction();l=mi(d,h,v);const S=e._openGLRenderWindow.getGraphicsResourceForObject(d);if(!((D=S==null?void 0:S.oglObject)!=null&&D.getHandle())||(S==null?void 0:S.hash)!==l){const N=1024*y,R=new Uint8ClampedArray(N);if(e.pwfTexture=vt.newInstance(),e.pwfTexture.setOpenGLRenderWindow(e._openGLRenderWindow),d){const M=new Float32Array(N),A=new Float32Array(1024);for(let G=0;G<v;++G){const j=f.getPiecewiseFunction(G);if(j===null)M.fill(1);else{const k=j.getRange();if(j.getTable(k[0],k[1],1024,A,1),h)for(let F=0;F<1024;F++)M[G*1024*2+F]=A[F],M[G*1024*2+F+1024]=A[F];else for(let F=0;F<1024;F++)M[G*1024*2+F]=A[F]}}e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw(1024,y,1,Be.FLOAT,M)}else R.fill(255),e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw(1024,1,1,Be.UNSIGNED_CHAR,R);d&&(e._openGLRenderWindow.setGraphicsResourceForObject(d,e.pwfTexture,l),d!==e._pwFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(d,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._pwFunc,t)),e._pwFunc=d)}else e.pwfTexture=S.oglObject;const C=`${e.resliceGeom.getMTime()}A${e.renderable.getSlabThickness()}`;if(!e.tris.getCABO().getElementCount()||e.VBOBuildString!==C){const O=Ee.newInstance({numberOfComponents:3,values:e.resliceGeom.getPoints().getData()});O.setName("points");const N=Ee.newInstance({numberOfComponents:1,values:e.resliceGeom.getPolys().getData()}),R={points:O,cellOffset:0};if(e.renderable.getSlabThickness()>0){const M=e.resliceGeom.getPointData().getNormals();M?R.normals=M:Mi("Slab mode requested without normals")}e.tris.getCABO().createVBO(N,"polys",zt.SURFACE,R)}e.VBOBuildString=C,e.VBOBuildTime.modified()},t.updateShaders=(i,a,o)=>{if(e.lastBoundBO=i,t.getNeedToRebuildShaders(i,a,o)){const s={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(s,a,o);const u=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(s.Vertex,s.Fragment,s.Geometry);u!==i.getProgram()&&(i.setProgram(u),i.getVAO().releaseGraphicsResources()),i.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(i.getProgram());i.getVAO().bind(),t.setMapperShaderParameters(i,a,o),t.setCameraShaderParameters(i,a,o),t.setPropertyShaderParameters(i,a,o)},t.setMapperShaderParameters=(i,a,o)=>{const s=i.getProgram();if(i.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>i.getAttributeUpdateTime().getMTime()||i.getShaderSourceTime().getMTime()>i.getAttributeUpdateTime().getMTime())){s.isUniformUsed("texture1")&&s.setUniformi("texture1",e.openGLTexture.getTextureUnit()),s.isAttributeUsed("vertexWC")&&(i.getVAO().addAttributeArray(s,i.getCABO(),"vertexWC",i.getCABO().getVertexOffset(),i.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||Mi("Error setting vertexWC in shader VAO.")),s.isAttributeUsed("normalWC")&&(i.getVAO().addAttributeArray(s,i.getCABO(),"normalWC",i.getCABO().getNormalOffset(),i.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||Mi("Error setting normalWC in shader VAO.")),s.isUniformUsed("slabThickness")&&s.setUniformf("slabThickness",e.renderable.getSlabThickness()),s.isUniformUsed("spacing")&&s.setUniform3fv("spacing",e.currentInput.getSpacing()),s.isUniformUsed("slabType")&&s.setUniformi("slabType",e.renderable.getSlabType()),s.isUniformUsed("slabType")&&s.setUniformi("slabType",e.renderable.getSlabType()),s.isUniformUsed("slabTrapezoid")&&s.setUniformi("slabTrapezoid",e.renderable.getSlabTrapezoidIntegration());const l=i.getCABO().getCoordShiftAndScaleEnabled()?i.getCABO().getInverseShiftAndScaleMatrix():null;if(s.isUniformUsed("WCTCMatrix")){const p=e.currentInput,c=p.getDimensions();ft(e.tmpMat4,p.getIndexToWorld()),Ze(e.tmpMat4,e.tmpMat4,[-.5,-.5,-.5]),kr(e.tmpMat4,e.tmpMat4,c),yt(e.tmpMat4,e.tmpMat4),l&&Le(e.tmpMat4,e.tmpMat4,l),s.setUniformMatrix("WCTCMatrix",e.tmpMat4)}s.isUniformUsed("vboScaling")&&s.setUniform3fv("vboScaling",i.getCABO().getCoordScale()??[1,1,1]),i.getAttributeUpdateTime().modified()}if(e.haveSeenDepthRequest&&i.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),i.getProgram().isUniformUsed("coffset")){const u=t.getCoincidentParameters(a,o);i.getProgram().setUniformf("coffset",u.offset),i.getProgram().isUniformUsed("cfactor")&&i.getProgram().setUniformf("cfactor",u.factor)}},t.setCameraShaderParameters=(i,a,o)=>{const s=e._openGLCamera.getKeyMatrices(a),u=e._openGLImageSlice.getKeyMatrices(),p=i.getCABO().getCoordShiftAndScaleEnabled()?i.getCABO().getInverseShiftAndScaleMatrix():null,c=i.getProgram();c.isUniformUsed("MCPCMatrix")&&(ye(e.tmpMat4),c.setUniformMatrix("MCPCMatrix",i2([s.wcpc,u.mcwc,p],Os,e.tmpMat4))),c.isUniformUsed("MCVCMatrix")&&(ye(e.tmpMat4),c.setUniformMatrix("MCVCMatrix",i2([s.wcvc,u.mcwc,p],Os,e.tmpMat4)))},t.setPropertyShaderParameters=(i,a,o)=>{const s=i.getProgram(),u=o.getProperty(),l=u.getOpacity();s.setUniformf("opacity",l);const p=e.openGLTexture.getComponents(),c=u.getIndependentComponents();if(c)for(let y=0;y<p;++y)s.setUniformf(`mix${y}`,u.getComponentWeight(y));const f=e.openGLTexture.getVolumeInfo();for(let y=0;y<p;y++){let x=u.getColorWindow(),m=u.getColorLevel();const g=c?y:0,d=u.getRGBTransferFunction(g);if(d&&u.getUseLookupTableScalarRange()){const C=d.getRange();x=C[1]-C[0],m=.5*(C[1]+C[0])}const S=f.scale[y]/x,T=(f.offset[y]-m)/x+.5;s.setUniformf(`cshift${y}`,T),s.setUniformf(`cscale${y}`,S)}const h=e.colorTexture.getTextureUnit();s.setUniformi("colorTexture1",h);for(let y=0;y<p;y++){let x=1,m=0;const g=c?y:0,d=u.getPiecewiseFunction(g);if(d){const S=d.getRange(),T=S[1]-S[0],C=.5*(S[0]+S[1]);x=f.scale[y]/T,m=(f.offset[y]-C)/T+.5}s.setUniformf(`pwfshift${y}`,m),s.setUniformf(`pwfscale${y}`,x)}const v=e.pwfTexture.getTextureUnit();s.setUniformi("pwfTexture1",v),s.setUniform4fv("backgroundColor",e.renderable.getBackgroundColor())},t.getNeedToRebuildShaders=(i,a,o)=>{var h;const s=e.openGLTexture.getComponents(),u=o.getProperty().getIndependentComponents(),l=e.renderable.getSlabThickness(),p=e.renderable.getSlabType(),c=e.renderable.getSlabTrapezoidIntegration();let f=!1;return(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(f=!0),f||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||((h=i.getProgram())==null?void 0:h.getHandle())===0||e.lastTextureComponents!==s||e.lastIndependentComponents!==u||e.lastSlabThickness!==l||e.lastSlabType!==p||e.lastSlabTrapezoidIntegration!==c?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,e.lastTextureComponents=s,e.lastIndependentComponents=u,e.lastSlabThickness=l,e.lastSlabType=p,e.lastSlabTrapezoidIntegration=c,!0):!1},t.getShaderTemplate=(i,a,o)=>{i.Vertex=sR,i.Fragment=uR,i.Geometry=""},t.replaceShaderValues=(i,a,o)=>{if(t.replaceShaderTCoord(i,a,o),t.replaceShaderPositionVC(i,a,o),e.haveSeenDepthRequest){let s=i.Fragment;s=Q.substitute(s,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,s=Q.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,i.Fragment=s}t.replaceShaderCoincidentOffset(i,a,o)},t.replaceShaderTCoord=(i,a,o)=>{let s=i.Vertex;const u=i.Geometry;let l=i.Fragment;const p=["uniform mat4 WCTCMatrix;","out vec3 fragTexCoord;"],c=e.renderable.getSlabThickness();s=Q.substitute(s,"//VTK::TCoord::Dec",p).result;const f=["fragTexCoord = (WCTCMatrix * vertexWC).xyz;"];s=Q.substitute(s,"//VTK::TCoord::Impl",f).result;const h=e.openGLTexture.getComponents(),v=o.getProperty().getIndependentComponents();let y=["in vec3 fragTexCoord;","uniform highp sampler3D texture1;","uniform mat4 WCTCMatrix;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;","uniform vec4 backgroundColor;"];if(v){for(let m=1;m<h;m++)y=y.concat([`uniform float cshift${m};`,`uniform float cscale${m};`,`uniform float pwfshift${m};`,`uniform float pwfscale${m};`]);switch(h){case 1:y=y.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:y=y.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:y=y.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:y=y.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:Mi("Unsupported number of independent coordinates.")}}c>0&&(y=y.concat(["uniform vec3 spacing;","uniform float slabThickness;","uniform int slabType;","uniform int slabTrapezoid;","uniform vec3 vboScaling;"]),y=y.concat(["vec4 compositeValue(vec4 currVal, vec4 valToComp, int trapezoid)","{","  vec4 retVal = vec4(1.0);","  if (slabType == 0) // min","  {","    retVal = min(currVal, valToComp);","  }","  else if (slabType == 1) // max","  {","    retVal = max(currVal, valToComp);","  }","  else if (slabType == 3) // sum","  {","    retVal = currVal + (trapezoid > 0 ? 0.5 * valToComp : valToComp); ","  }","  else // mean","  {","    retVal = currVal + (trapezoid > 0 ? 0.5 * valToComp : valToComp); ","  }","  return retVal;","}"])),l=Q.substitute(l,"//VTK::TCoord::Dec",y).result;let x=["if (any(greaterThan(fragTexCoord, vec3(1.0))) || any(lessThan(fragTexCoord, vec3(0.0))))","{","  // set the background color and exit","  gl_FragData[0] = backgroundColor;","  return;","}","vec4 tvalue = texture(texture1, fragTexCoord);"];if(c>0&&(x=x.concat(["// Get the first and last samples","int numSlices = 1;","float scaling = min(min(spacing.x, spacing.y), spacing.z) * 0.5;","vec3 normalxspacing = scaling * normalWCVSOutput;","float distTraveled = length(normalxspacing);","int trapezoid = 0;","while (distTraveled < slabThickness * 0.5)","{","  distTraveled += length(normalxspacing);","  float fnumSlices = float(numSlices);","  if (distTraveled > slabThickness * 0.5)","  {","    // Before stepping outside the slab, sample at the boundaries","    normalxspacing = normalWCVSOutput * slabThickness * 0.5 / fnumSlices;","    trapezoid = slabTrapezoid;","  }","  vec3 fragTCoordNeg = (WCTCMatrix * vec4(vertexWCVSOutput.xyz - fnumSlices * normalxspacing * vboScaling, 1.0)).xyz;","  if (!any(greaterThan(fragTCoordNeg, vec3(1.0))) && !any(lessThan(fragTCoordNeg, vec3(0.0))))","  {","    vec4 newVal = texture(texture1, fragTCoordNeg);","    tvalue = compositeValue(tvalue, newVal, trapezoid);","    numSlices += 1;","  }","  vec3 fragTCoordPos = (WCTCMatrix * vec4(vertexWCVSOutput.xyz + fnumSlices * normalxspacing * vboScaling, 1.0)).xyz;","  if (!any(greaterThan(fragTCoordNeg, vec3(1.0))) && !any(lessThan(fragTCoordNeg, vec3(0.0))))","  {","    vec4 newVal = texture(texture1, fragTCoordPos);","    tvalue = compositeValue(tvalue, newVal, trapezoid);","    numSlices += 1;","  }","}","// Finally, if slab type is *mean*, divide the sum by the numSlices","if (slabType == 2)","{","  tvalue = tvalue / float(numSlices);","}"])),v){const m=["r","g","b","a"];for(let g=0;g<h;++g)x=x.concat([`vec3 tcolor${g} = mix${g} * texture2D(colorTexture1, vec2(tvalue.${m[g]} * cscale${g} + cshift${g}, height${g})).rgb;`,`float compWeight${g} = mix${g} * texture2D(pwfTexture1, vec2(tvalue.${m[g]} * pwfscale${g} + pwfshift${g}, height${g})).r;`]);switch(h){case 1:x=x.concat(["gl_FragData[0] = vec4(tcolor0.rgb, compWeight0 * opacity);"]);break;case 2:x=x.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:x=x.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:x=x.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:Mi("Unsupported number of independent coordinates.")}}else switch(h){case 1:x=x.concat(["// Dependent components","float intensity = tvalue.r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]);break;case 2:x=x.concat(["float intensity = tvalue.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tvalue.g + pwfshift0);"]);break;case 3:x=x.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]);break;default:x=x.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"])}l=Q.substitute(l,"//VTK::TCoord::Impl",x).result,i.Vertex=s,i.Fragment=l,i.Geometry=u},t.replaceShaderPositionVC=(i,a,o)=>{let s=i.Vertex;const u=i.Geometry;let l=i.Fragment;const p=e.renderable.getSlabThickness();let c=["attribute vec4 vertexWC;"];c=c.concat([`//${t.getMTime()}${e.resliceGeomUpdateString}`]),p>0&&(c=c.concat(["attribute vec3 normalWC;","varying vec3 normalWCVSOutput;","varying vec4 vertexWCVSOutput;"])),s=Q.substitute(s,"//VTK::PositionVC::Dec",c).result;let f=["gl_Position = MCPCMatrix * vertexWC;"];p>0&&(f=f.concat(["normalWCVSOutput = normalWC;","vertexWCVSOutput = vertexWC;"])),s=Q.substitute(s,"//VTK::PositionVC::Impl",f).result,s=Q.substitute(s,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result;let h=[];p>0&&(h=h.concat(["varying vec3 normalWCVSOutput;","varying vec4 vertexWCVSOutput;"])),l=Q.substitute(l,"//VTK::PositionVC::Dec",h).result,i.Vertex=s,i.Geometry=u,i.Fragment=l};function r(i){Wo.normalize(i);const a=[0,0,0];for(let o=0;o<3;++o){T7(a),a[o]=1;const s=Wo.dot(i,a);if(s<-.999999||s>.999999)return[!0,o]}return[!1,2]}t.updateResliceGeometry=()=>{var c;let i="";const a=e.currentInput,o=a==null?void 0:a.getBounds();let s=!0,u=2;const l=e.renderable.getSlicePolyData(),p=e.renderable.getSlicePlane();if(l)i=i.concat(`PolyData${l.getMTime()}`);else if(p){i=i.concat(`Plane${p.getMTime()}`);const f=yh();a&&(i=i.concat(`Image${a.getMTime()}`),V3(f,...a.getDirection()),zs(f,f));const h=[...p.getNormal()];a0(h,h,f),[s,u]=r(h)}else{const f=oa.newInstance();f.setNormal(0,0,1);let h=[0,1,0,1,0,1];a&&(h=o),f.setOrigin(h[0],h[2],.5*(h[5]+h[4])),e.renderable.setSlicePlane(f),i=i.concat(`Plane${p==null?void 0:p.getMTime()}`),a&&(i=i.concat(`Image${a.getMTime()}`))}if(!e.resliceGeom||e.resliceGeomUpdateString!==i){if(l)e.resliceGeom||(e.resliceGeom=sn.newInstance()),e.resliceGeom.getPoints().setData(l.getPoints().getData(),3),e.resliceGeom.getPolys().setData(l.getPolys().getData(),1),e.resliceGeom.getPointData().setNormals(l.getPointData().getNormals());else if(p)if(s){const f=new Float32Array(12),h=a.worldToIndex(p.getOrigin(),[0,0,0]),v=[(u+1)%3,(u+2)%3].sort(),y=a.getSpatialExtent();let x=0;for(let T=0;T<2;++T)for(let C=0;C<2;++C)f[x+u]=h[u],f[x+v[0]]=y[2*v[0]+C],f[x+v[1]]=y[2*v[1]+T],x+=3;e.transform.setMatrix(a.getIndexToWorld()),e.transform.transformPoints(f,f);const m=new Uint16Array(8);m[0]=3,m[1]=0,m[2]=1,m[3]=3,m[4]=3,m[5]=0,m[6]=3,m[7]=2;const g=p.getNormal();Wo.normalize(g);const d=new Float32Array(12);for(let T=0;T<4;++T)d[3*T]=g[0],d[3*T+1]=g[1],d[3*T+2]=g[2];e.resliceGeom||(e.resliceGeom=sn.newInstance()),e.resliceGeom.getPoints().setData(f,3),e.resliceGeom.getPolys().setData(m,1);const S=Ee.newInstance({numberOfComponents:3,values:d,name:"Normals"});e.resliceGeom.getPointData().setNormals(S)}else{e.outlineFilter.setInputData(a),e.cutter.setInputConnection(e.outlineFilter.getOutputPort()),e.cutter.setCutFunction(p),e.lineToSurfaceFilter.setInputConnection(e.cutter.getOutputPort()),e.lineToSurfaceFilter.update(),e.resliceGeom||(e.resliceGeom=sn.newInstance());const f=e.lineToSurfaceFilter.getOutputData();e.resliceGeom.getPoints().setData(f.getPoints().getData(),3),e.resliceGeom.getPolys().setData(f.getPolys().getData(),1),e.resliceGeom.getPointData().setNormals(f.getPointData().getNormals());const h=p.getNormal(),v=e.resliceGeom.getNumberOfPoints();Wo.normalize(h);const y=new Float32Array(v*3);for(let m=0;m<v;++m)y[3*m]=h[0],y[3*m+1]=h[1],y[3*m+2]=h[2];const x=Ee.newInstance({numberOfComponents:3,values:y,name:"Normals"});e.resliceGeom.getPointData().setNormals(x)}else Mi("Something went wrong.","A default slice plane should have been created in the beginning of","updateResliceGeometry.");e.resliceGeomUpdateString=i,(c=e.resliceGeom)==null||c.modified()}},t.setOpenGLTexture=i=>{i&&(e.openGLTexture=i,e._externalOpenGLTexture=!0)},t.delete=Hs(()=>{e._openGLRenderWindow&&n(e._openGLRenderWindow)},t.delete)}const lR={VBOBuildTime:{},VBOBuildString:null,haveSeenDepthRequest:!1,lastHaveSeenDepthRequest:!1,lastIndependentComponents:!1,lastTextureComponents:0,lastSlabThickness:0,lastSlabTrapezoidIntegration:0,lastSlabType:-1,openGLTexture:null,colorTextureString:null,pwfTextureString:null,resliceGeom:null,resliceGeomUpdateString:null,tris:null,colorTexture:null,pwfTexture:null,_externalOpenGLTexture:!1};function fR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,lR,n),He.extend(t,e,n),hr.implementReplaceShaderCoincidentOffset(t,e,n),hr.implementBuildShadersWithReplacements(t,e,n),e.tris=dr.newInstance(),e.openGLTexture=null,e.colorTexture=null,e.pwfTexture=null,e.VBOBuildTime={},qe(e.VBOBuildTime),e.tmpMat4=ye(new Float64Array(16)),e.outlineFilter=rR.newInstance(),e.outlineFilter.setGenerateFaces(!0),e.outlineFilter.setGenerateLines(!1),e.cubePolyData=sn.newInstance(),e.cutter=jM.newInstance(),e.lineToSurfaceFilter=GM.newInstance(),e.transform=oR.newInstance(),Ut(t,e,["openGLTexture"]),cR(t,e)}const pR=ze(fR,"vtkOpenGLImageResliceMapper");Lt("vtkImageResliceMapper",pR);const hR={NONE:-1,I:0,J:1,K:2,X:3,Y:4,Z:5};var D4={SlicingMode:hR};const{vtkErrorMacro:Sa}=un,{SlicingMode:kn}=D4;function gR(t){const e=t.split(`
`),n=[];for(let r=0;r<e.length;++r){const i=e[r].trim();i.length>0&&n.push(i)}return n}function dR(t,e){e.classHierarchy.push("vtkOpenGLImageMapper");function n(r){e.openGLTexture.releaseGraphicsResources(r),[e._colorTransferFunc,e._pwFunc,e._labelOutlineThicknessArray].forEach(i=>r.unregisterGraphicsResourceUser(i,t))}t.buildPass=r=>{if(r){e.currentRenderPass=null,e.openGLImageSlice=t.getFirstAncestorOfType("vtkOpenGLImageSlice"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer");const i=e._openGLRenderWindow;e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),i&&!i.isDeleted()&&i!==e._openGLRenderWindow&&n(i),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow);const a=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(a.getActiveCamera()),e.renderable.isA("vtkImageMapper")&&e.renderable.getSliceAtFocalPoint()&&e.renderable.setSliceFromCamera(a.getActiveCamera())}},t.translucentPass=(r,i)=>{r&&(e.currentRenderPass=i,t.render())},t.zBufferPass=r=>{r&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=r=>t.zBufferPass(r),t.opaquePass=r=>{r&&t.render()},t.getCoincidentParameters=(r,i)=>e.renderable.getResolveCoincidentTopology()==Yn.PolygonOffset?e.renderable.getCoincidentTopologyPolygonOffsetParameters():null,t.render=()=>{const r=e.openGLImageSlice.getRenderable(),i=e._openGLRenderer.getRenderable();t.renderPiece(i,r)},t.getShaderTemplate=(r,i,a)=>{r.Vertex=l1,r.Fragment=f1,r.Geometry=""},t.replaceShaderValues=(r,i,a)=>{let o=r.Vertex,s=r.Fragment;o=Q.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,o=Q.substitute(o,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result,o=Q.substitute(o,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result,o=Q.substitute(o,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result;const u=e.openGLTexture.getComponents(),l=a.getProperty().getIndependentComponents();let p=["varying vec2 tcoordVCVSOutput;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D texture1;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform sampler2D labelOutlineTexture1;","uniform float opacity;","uniform float outlineOpacity;"];if(l){for(let f=1;f<u;f++)p=p.concat([`uniform float cshift${f};`,`uniform float cscale${f};`,`uniform float pwfshift${f};`,`uniform float pwfscale${f};`]);switch(u){case 1:p=p.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:p=p.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:p=p.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:p=p.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:Sa("Unsupported number of independent coordinates.")}}if(s=Q.substitute(s,"//VTK::TCoord::Dec",p).result,a.getProperty().getUseLabelOutline()===!0&&(s=Q.substitute(s,"//VTK::LabelOutline::Dec",["uniform int outlineThickness;","uniform float vpWidth;","uniform float vpHeight;","uniform float vpOffsetX;","uniform float vpOffsetY;","uniform mat4 PCWCMatrix;","uniform mat4 vWCtoIDX;","uniform ivec3 imageDimensions;"]).result,s=Q.substitute(s,"//VTK::ImageLabelOutlineOn","#define vtkImageLabelOutlineOn").result,s=Q.substitute(s,"//VTK::LabelOutlineHelperFunction",["#ifdef vtkImageLabelOutlineOn","vec3 fragCoordToIndexSpace(vec4 fragCoord) {","  vec4 pcPos = vec4(","    (fragCoord.x / vpWidth - vpOffsetX - 0.5) * 2.0,","    (fragCoord.y / vpHeight - vpOffsetY - 0.5) * 2.0,","    (fragCoord.z - 0.5) * 2.0,","    1.0);","","  vec4 worldCoord = PCWCMatrix * pcPos;","  vec4 vertex = (worldCoord/worldCoord.w);","","  vec3 index = (vWCtoIDX * vertex).xyz;","","  // half voxel fix for labelmapOutline","  return (index + vec3(0.5)) / vec3(imageDimensions);","}","#endif"]).result),l){const f=["r","g","b","a"];let h=["vec4 tvalue = texture2D(texture1, tcoordVCVSOutput);"];for(let v=0;v<u;v++)h=h.concat([`vec3 tcolor${v} = mix${v} * texture2D(colorTexture1, vec2(tvalue.${f[v]} * cscale${v} + cshift${v}, height${v})).rgb;`,`float compWeight${v} = mix${v} * texture2D(pwfTexture1, vec2(tvalue.${f[v]} * pwfscale${v} + pwfshift${v}, height${v})).r;`]);switch(u){case 1:h=h.concat(["gl_FragData[0] = vec4(tcolor0.rgb, opacity);"]);break;case 2:h=h.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:h=h.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:h=h.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:Sa("Unsupported number of independent coordinates.")}s=Q.substitute(s,"//VTK::TCoord::Impl",h).result}else switch(u){case 1:s=Q.substitute(s,"//VTK::TCoord::Impl",[...gR(`
                #ifdef vtkImageLabelOutlineOn
                  vec3 centerPosIS = fragCoordToIndexSpace(gl_FragCoord);
                  float centerValue = texture2D(texture1, centerPosIS.xy).r;
                  bool pixelOnBorder = false;
                  vec3 tColor = texture2D(colorTexture1, vec2(centerValue * cscale0 + cshift0, 0.5)).rgb;
                  float scalarOpacity = texture2D(pwfTexture1, vec2(centerValue * pwfscale0 + pwfshift0, 0.5)).r;
                  float opacityToUse = scalarOpacity * opacity;
                  int segmentIndex = int(centerValue * 255.0);
                  float textureCoordinate = float(segmentIndex - 1) / 1024.0;
                  float textureValue = texture2D(labelOutlineTexture1, vec2(textureCoordinate, 0.5)).r;
                  int actualThickness = int(textureValue * 255.0);

                  if (segmentIndex == 0){
                    gl_FragData[0] = vec4(0.0, 1.0, 1.0, 0.0);
                    return;
                  }

                  for (int i = -actualThickness; i <= actualThickness; i++) {
                    for (int j = -actualThickness; j <= actualThickness; j++) {
                      if (i == 0 || j == 0) {
                        continue;
                      }
                      vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(i),
                        gl_FragCoord.y + float(j),
                        gl_FragCoord.z, gl_FragCoord.w);
                      vec3 neighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);
                      float value = texture2D(texture1, neighborPosIS.xy).r;
                      if (value != centerValue) {
                        pixelOnBorder = true;
                        break;
                      }
                    }
                    if (pixelOnBorder == true) {
                      break;
                    }
                  }
                  if (pixelOnBorder == true) {
                    gl_FragData[0] = vec4(tColor, outlineOpacity);
                  }
                  else {
                    gl_FragData[0] = vec4(tColor, opacityToUse);
                  }
                #else
                  float intensity = texture2D(texture1, tcoordVCVSOutput).r;
                  vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;
                  float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;
                  gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);
                #endif
                `)]).result;break;case 2:s=Q.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","float intensity = tcolor.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tcolor.g + pwfshift0);"]).result;break;case 3:s=Q.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]).result;break;default:s=Q.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"]).result}e.haveSeenDepthRequest&&(s=Q.substitute(s,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,s=Q.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),r.Vertex=o,r.Fragment=s,t.replaceShaderClip(r,i,a),t.replaceShaderCoincidentOffset(r,i,a)},t.replaceShaderClip=(r,i,a)=>{let o=r.Vertex,s=r.Fragment;if(e.renderable.getNumberOfClippingPlanes()){let u=e.renderable.getNumberOfClippingPlanes();u>6&&(Me("OpenGL has a limit of 6 clipping planes"),u=6),o=Q.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,o=Q.substitute(o,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,s=Q.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,s=Q.substitute(s,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}r.Vertex=o,r.Fragment=s},t.getNeedToRebuildShaders=(r,i,a)=>{var l;const o=e.openGLTexture.getComponents(),s=a.getProperty().getIndependentComponents();let u=!1;return(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(u=!0),u||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||((l=r.getProgram())==null?void 0:l.getHandle())===0||e.lastTextureComponents!==o||e.lastIndependentComponents!==s?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,e.lastTextureComponents=o,e.lastIndependentComponents=s,!0):!1},t.updateShaders=(r,i,a)=>{if(e.lastBoundBO=r,t.getNeedToRebuildShaders(r,i,a)){const o={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(o,i,a);const s=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);s!==r.getProgram()&&(r.setProgram(s),r.getVAO().releaseGraphicsResources()),r.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(r.getProgram());r.getVAO().bind(),t.setMapperShaderParameters(r,i,a),t.setCameraShaderParameters(r,i,a),t.setPropertyShaderParameters(r,i,a)},t.setMapperShaderParameters=(r,i,a)=>{r.getCABO().getElementCount()&&(e.VBOBuildTime>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())&&(r.getProgram().isAttributeUsed("vertexMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexMC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||Sa("Error setting vertexMC in shader VAO.")),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),e.context.FALSE)||Sa("Error setting tcoordMC in shader VAO.")),r.getAttributeUpdateTime().modified());const o=e.openGLTexture.getTextureUnit();r.getProgram().setUniformi("texture1",o);const s=e.openGLTexture.getComponents(),u=a.getProperty().getIndependentComponents();if(u)for(let v=0;v<s;v++)r.getProgram().setUniformf(`mix${v}`,a.getProperty().getComponentWeight(v));const l=e.openGLTexture.getShiftAndScale();for(let v=0;v<s;v++){let y=a.getProperty().getColorWindow(),x=a.getProperty().getColorLevel();const m=u?v:0,g=a.getProperty().getRGBTransferFunction(m);if(g&&a.getProperty().getUseLookupTableScalarRange()){const T=g.getRange();y=T[1]-T[0],x=.5*(T[1]+T[0])}const d=l.scale/y,S=(l.shift-x)/y+.5;r.getProgram().setUniformf(`cshift${v}`,S),r.getProgram().setUniformf(`cscale${v}`,d)}for(let v=0;v<s;v++){let y=1,x=0;const m=u?v:0,g=a.getProperty().getPiecewiseFunction(m);if(g){const d=g.getRange(),S=d[1]-d[0],T=.5*(d[0]+d[1]);y=l.scale/S,x=(l.shift-T)/S+.5}r.getProgram().setUniformf(`pwfshift${v}`,x),r.getProgram().setUniformf(`pwfscale${v}`,y)}if(e.haveSeenDepthRequest&&r.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),r.getProgram().isUniformUsed("coffset")){const v=t.getCoincidentParameters(i,a);r.getProgram().setUniformf("coffset",v.offset),r.getProgram().isUniformUsed("cfactor")&&r.getProgram().setUniformf("cfactor",v.factor)}const p=e.colorTexture.getTextureUnit();r.getProgram().setUniformi("colorTexture1",p);const c=e.pwfTexture.getTextureUnit();r.getProgram().setUniformi("pwfTexture1",c);const f=e.labelOutlineThicknessTexture.getTextureUnit();if(r.getProgram().setUniformi("labelOutlineTexture1",f),e.renderable.getNumberOfClippingPlanes()){let v=e.renderable.getNumberOfClippingPlanes();v>6&&(Me("OpenGL has a limit of 6 clipping planes"),v=6);const x=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,m=x?ft(e.imagematinv,a.getMatrix()):a.getMatrix();x&&(Fe(m,m),Le(m,m,x),Fe(m,m)),Fe(e.imagemat,e.currentInput.getIndexToWorld()),Le(e.imagematinv,m,e.imagemat);const g=[];for(let d=0;d<v;d++){const S=[];e.renderable.getClippingPlaneInDataCoords(e.imagematinv,d,S);for(let T=0;T<4;T++)g.push(S[T])}r.getProgram().setUniformi("numClipPlanes",v),r.getProgram().setUniform4fv("clipPlanes",g)}if(a.getProperty().getUseLabelOutline()===!0){const v=a.getProperty().getLabelOutlineOpacity();r.getProgram().setUniformf("outlineOpacity",v)}},t.setCameraShaderParameters=(r,i,a)=>{const o=r.getProgram(),s=e.openGLImageSlice.getKeyMatrices(),u=e.currentInput,l=u.getIndexToWorld();Le(e.imagemat,s.mcwc,l);const p=e.openGLCamera.getKeyMatrices(i);if(Le(e.imagemat,p.wcpc,e.imagemat),r.getCABO().getCoordShiftAndScaleEnabled()){const f=r.getCABO().getInverseShiftAndScaleMatrix();Le(e.imagemat,e.imagemat,f)}if(o.setUniformMatrix("MCPCMatrix",e.imagemat),a.getProperty().getUseLabelOutline()===!0){const f=u.getWorldToIndex(),h=u.getDimensions();o.setUniform3i("imageDimensions",h[0],h[1],1),o.setUniformMatrix("vWCtoIDX",f);const v=e.openGLCamera.getKeyMatrices(i);yt(e.projectionToWorld,v.wcpc),e.openGLCamera.getKeyMatrices(i),o.setUniformMatrix("PCWCMatrix",e.projectionToWorld);const y=t.getRenderTargetSize();o.setUniformf("vpWidth",y[0]),o.setUniformf("vpHeight",y[1]);const x=t.getRenderTargetOffset();o.setUniformf("vpOffsetX",x[0]/y[0]),o.setUniformf("vpOffsetY",x[1]/y[1])}},t.setPropertyShaderParameters=(r,i,a)=>{const o=r.getProgram(),u=a.getProperty().getOpacity();o.setUniformf("opacity",u)},t.renderPieceStart=(r,i)=>{t.updateBufferObjects(r,i),e.lastBoundBO=null},t.renderPieceDraw=(r,i)=>{const a=e.context;e.openGLTexture.activate(),e.colorTexture.activate(),e.labelOutlineThicknessTexture.activate(),e.pwfTexture.activate(),e.tris.getCABO().getElementCount()&&(t.updateShaders(e.tris,r,i),a.drawArrays(a.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release()),e.openGLTexture.deactivate(),e.colorTexture.deactivate(),e.labelOutlineThicknessTexture.deactivate(),e.pwfTexture.deactivate()},t.renderPieceFinish=(r,i)=>{},t.renderPiece=(r,i)=>{if(t.invokeEvent({type:"StartEvent"}),e.renderable.update(),e.currentInput=e.renderable.getCurrentImage(),t.invokeEvent({type:"EndEvent"}),!e.currentInput){Sa("No input!");return}t.renderPieceStart(r,i),t.renderPieceDraw(r,i),t.renderPieceFinish(r,i)},t.computeBounds=(r,i)=>{if(!t.getInput()){To(e.bounds);return}e.bounds=t.getInput().getBounds()},t.updateBufferObjects=(r,i)=>{t.getNeedToRebuildBufferObjects(r,i)&&t.buildBufferObjects(r,i)},t.getNeedToRebuildBufferObjects=(r,i)=>{var a,o,s,u;return e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<i.getMTime()||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<i.getProperty().getMTime()||e.VBOBuildTime.getMTime()<e.currentInput.getMTime()||!((a=e.openGLTexture)!=null&&a.getHandle())||!((o=e.colorTexture)!=null&&o.getHandle())||!((s=e.labelOutlineThicknessTexture)!=null&&s.getHandle())||!((u=e.pwfTexture)!=null&&u.getHandle())},t.buildBufferObjects=(r,i)=>{var N,R,M,A;const a=e.currentInput;if(!a)return;const o=a.getPointData()&&a.getPointData().getScalars();if(!o)return;const s=o.getDataType(),u=o.getNumberOfComponents(),l=i.getProperty(),p=l.getInterpolationType(),c=l.getIndependentComponents(),f=c?u:1,h=c?2*f:1,v=l.getRGBTransferFunction(),y=mi(v,c,f),x=e._openGLRenderWindow.getGraphicsResourceForObject(v);if(!((N=x==null?void 0:x.oglObject)!=null&&N.getHandle())||(x==null?void 0:x.hash)!==y){e.colorTexture=vt.newInstance({resizable:!0}),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const G=1024,j=G*h*3,k=new Uint8ClampedArray(j);if(p===Ja.NEAREST?(e.colorTexture.setMinificationFilter(Se.NEAREST),e.colorTexture.setMagnificationFilter(Se.NEAREST)):(e.colorTexture.setMinificationFilter(Se.LINEAR),e.colorTexture.setMagnificationFilter(Se.LINEAR)),v){const F=new Float32Array(G*3);for(let B=0;B<f;B++){const $=l.getRGBTransferFunction(B),H=$.getRange();if($.getTable(H[0],H[1],G,F,1),c)for(let X=0;X<G*3;X++)k[B*G*6+X]=255*F[X],k[B*G*6+X+G*3]=255*F[X];else for(let X=0;X<G*3;X++)k[B*G*6+X]=255*F[X]}e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(G,h,3,Be.UNSIGNED_CHAR,k)}else{for(let F=0;F<G*3;++F)k[F]=255*F/((G-1)*3),k[F+1]=255*F/((G-1)*3),k[F+2]=255*F/((G-1)*3);e.colorTexture.create2DFromRaw(G,1,3,Be.UNSIGNED_CHAR,k)}v&&(e._openGLRenderWindow.setGraphicsResourceForObject(v,e.colorTexture,y),v!==e._colorTransferFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(v,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._colorTransferFunc,t)),e._colorTransferFunc=v)}else e.colorTexture=x.oglObject;const g=l.getPiecewiseFunction(),d=mi(g,c,f),S=e._openGLRenderWindow.getGraphicsResourceForObject(g);if(!((R=S==null?void 0:S.oglObject)!=null&&R.getHandle())||(S==null?void 0:S.hash)!==d){const j=1024*h,k=new Uint8ClampedArray(j);if(e.pwfTexture=vt.newInstance({resizable:!0}),e.pwfTexture.setOpenGLRenderWindow(e._openGLRenderWindow),p===Ja.NEAREST?(e.pwfTexture.setMinificationFilter(Se.NEAREST),e.pwfTexture.setMagnificationFilter(Se.NEAREST)):(e.pwfTexture.setMinificationFilter(Se.LINEAR),e.pwfTexture.setMagnificationFilter(Se.LINEAR)),g){const F=new Float32Array(j),B=new Float32Array(1024);for(let $=0;$<f;++$){const H=l.getPiecewiseFunction($);if(H===null)F.fill(1);else{const X=H.getRange();if(H.getTable(X[0],X[1],1024,B,1),c)for(let J=0;J<1024;J++)F[$*1024*2+J]=B[J],F[$*1024*2+J+1024]=B[J];else for(let J=0;J<1024;J++)F[$*1024*2+J]=B[J]}}e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw(1024,h,1,Be.FLOAT,F)}else k.fill(255),e.pwfTexture.create2DFromRaw(1024,1,1,Be.UNSIGNED_CHAR,k);g&&(e._openGLRenderWindow.setGraphicsResourceForObject(g,e.pwfTexture,d),g!==e._pwFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(g,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._pwFunc,t)),e._pwFunc=g)}else e.pwfTexture=S.oglObject;t.updatelabelOutlineThicknessTexture(i);const{ijkMode:C}=e.renderable.getClosestIJKAxis();let w=e.renderable.getSlice();C!==e.renderable.getSlicingMode()&&(w=e.renderable.getSliceAtPosition(w));const _=e.renderable.isA("vtkImageArrayMapper")?e.renderable.getSubSlice():Math.round(w),E=a.getExtent();let D;C===kn.I&&(D=_-E[0]),C===kn.J&&(D=_-E[2]),(C===kn.K||C===kn.NONE)&&(D=_-E[4]);const O=`${w}A${a.getMTime()}A${o.getMTime()}B${t.getMTime()}C${e.renderable.getSlicingMode()}D${i.getProperty().getInterpolationType()}`;if(e.VBOBuildString!==O){const G=a.getDimensions();e.openGLTexture||(e.openGLTexture=vt.newInstance({resizable:!0})),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),p===Ja.NEAREST?(new Set([1,3,4]).has(u)&&s===Be.UNSIGNED_CHAR&&!c&&e.openGLTexture.setGenerateMipmap(!0),e.openGLTexture.setMinificationFilter(Se.NEAREST),e.openGLTexture.setMagnificationFilter(Se.NEAREST)):(u===4&&s===Be.UNSIGNED_CHAR&&!c?(e.openGLTexture.setGenerateMipmap(!0),e.openGLTexture.setMinificationFilter(Se.LINEAR_MIPMAP_LINEAR)):e.openGLTexture.setMinificationFilter(Se.LINEAR),e.openGLTexture.setMagnificationFilter(Se.LINEAR)),e.openGLTexture.setWrapS(Ls.CLAMP_TO_EDGE),e.openGLTexture.setWrapT(Ls.CLAMP_TO_EDGE);const j=G[0]*G[1]*u,k=new Float32Array(12),F=new Float32Array(8);for(let ae=0;ae<4;ae++)F[ae*2]=ae%2?1:0,F[ae*2+1]=ae>1?1:0;const B=[kn.X,kn.Y,kn.Z].includes(e.renderable.getSlicingMode())?w:_,$=a.getSpatialExtent(),H=o.getData();let X=null;if(C===kn.I){X=new H.constructor(G[2]*G[1]*u);let ae=0;for(let te=0;te<G[2];te++)for(let L=0;L<G[1];L++){let b=(D+L*G[0]+te*G[0]*G[1])*u;ae=(te*G[1]+L)*u;const U=b+u;for(;b<U;)X[ae++]=H[b++]}G[0]=G[1],G[1]=G[2],k[0]=B,k[1]=$[2],k[2]=$[4],k[3]=B,k[4]=$[3],k[5]=$[4],k[6]=B,k[7]=$[2],k[8]=$[5],k[9]=B,k[10]=$[3],k[11]=$[5]}else if(C===kn.J){X=new H.constructor(G[2]*G[0]*u);let ae=0;for(let te=0;te<G[2];te++)for(let L=0;L<G[0];L++){let b=(L+D*G[0]+te*G[0]*G[1])*u;ae=(te*G[0]+L)*u;const U=b+u;for(;b<U;)X[ae++]=H[b++]}G[1]=G[2],k[0]=$[0],k[1]=B,k[2]=$[4],k[3]=$[1],k[4]=B,k[5]=$[4],k[6]=$[0],k[7]=B,k[8]=$[5],k[9]=$[1],k[10]=B,k[11]=$[5]}else C===kn.K||C===kn.NONE?(X=H.subarray(D*j,(D+1)*j),k[0]=$[0],k[1]=$[2],k[2]=B,k[3]=$[1],k[4]=$[2],k[5]=B,k[6]=$[0],k[7]=$[3],k[8]=B,k[9]=$[1],k[10]=$[3],k[11]=B):Sa("Reformat slicing not yet supported.");e.openGLTexture.resetFormatAndType(),e.openGLTexture.create2DFilterableFromRaw(G[0],G[1],u,o.getDataType(),X,(A=(M=e.renderable).getPreferSizeOverAccuracy)==null?void 0:A.call(M)),e.openGLTexture.activate(),e.openGLTexture.sendParameters(),e.openGLTexture.deactivate();const J=Ee.newInstance({numberOfComponents:3,values:k});J.setName("points");const q=Ee.newInstance({numberOfComponents:2,values:F});q.setName("tcoords");const ee=new Uint16Array(8);ee[0]=3,ee[1]=0,ee[2]=1,ee[3]=3,ee[4]=3,ee[5]=0,ee[6]=3,ee[7]=2;const re=Ee.newInstance({numberOfComponents:1,values:ee});e.tris.getCABO().createVBO(re,"polys",zt.SURFACE,{points:J,tcoords:q,cellOffset:0}),e.VBOBuildTime.modified(),e.VBOBuildString=O}},t.updatelabelOutlineThicknessTexture=r=>{var u;const i=r.getProperty().getLabelOutlineThickness(),a=e._openGLRenderWindow.getGraphicsResourceForObject(i),o=`${i.join("-")}`;if(!((u=a==null?void 0:a.oglObject)!=null&&u.getHandle())||(a==null?void 0:a.hash)!==o){const f=new Uint8Array(1024);for(let h=0;h<1024;++h){const v=typeof i[h]<"u"?i[h]:i[0];f[h]=v}e.labelOutlineThicknessTexture=vt.newInstance({resizable:!1}),e.labelOutlineThicknessTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.labelOutlineThicknessTexture.resetFormatAndType(),e.labelOutlineThicknessTexture.setMinificationFilter(Se.NEAREST),e.labelOutlineThicknessTexture.setMagnificationFilter(Se.NEAREST),e.labelOutlineThicknessTexture.create2DFromRaw(1024,1,1,Be.UNSIGNED_CHAR,f),i&&(e._openGLRenderWindow.setGraphicsResourceForObject(i,e.labelOutlineThicknessTexture,o),i!==e._labelOutlineThicknessArray&&(e._openGLRenderWindow.registerGraphicsResourceUser(i,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._labelOutlineThicknessArray,t)),e._labelOutlineThicknessArray=i)}else e.labelOutlineThicknessTexture=a.oglObject},t.getRenderTargetSize=()=>{if(e._useSmallViewport)return[e._smallViewportWidth,e._smallViewportHeight];const{usize:r,vsize:i}=e._openGLRenderer.getTiledSizeAndOrigin();return[r,i]},t.getRenderTargetOffset=()=>{const{lowerLeftU:r,lowerLeftV:i}=e._openGLRenderer.getTiledSizeAndOrigin();return[r,i]},t.delete=Hs(()=>{e._openGLRenderWindow&&n(e._openGLRenderWindow)},t.delete)}const vR={VBOBuildTime:0,VBOBuildString:null,openGLTexture:null,tris:null,imagemat:null,imagematinv:null,colorTexture:null,pwfTexture:null,labelOutlineThicknessTexture:null,labelOutlineThicknessTextureString:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0};function yR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vR,n),He.extend(t,e,n),hr.implementReplaceShaderCoincidentOffset(t,e,n),hr.implementBuildShadersWithReplacements(t,e,n),e.tris=dr.newInstance(),e.imagemat=ye(new Float64Array(16)),e.imagematinv=ye(new Float64Array(16)),e.projectionToWorld=ye(new Float64Array(16)),e.idxToView=ye(new Float64Array(16)),e.idxNormalMatrix=gr(new Float64Array(9)),e.modelToView=ye(new Float64Array(16)),e.projectionToView=ye(new Float64Array(16)),ut(t,e,[]),e.VBOBuildTime={},qe(e.VBOBuildTime),dR(t,e)}const mR=ze(yR,"vtkOpenGLImageMapper");Lt("vtkAbstractImageMapper",mR);const Ri={MAX:0,MIN:1,AVERAGE:2},{vtkErrorMacro:Uu}=P;function xR(t,e){e.classHierarchy.push("vtkOpenGLImageCPRMapper");function n(r){[e._scalars,e._colorTransferFunc,e._pwFunc].forEach(i=>r.unregisterGraphicsResourceUser(i,t))}t.buildPass=r=>{if(r){e.currentRenderPass=null,e.openGLImageSlice=t.getFirstAncestorOfType("vtkOpenGLImageSlice"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer");const i=e._openGLRenderWindow;e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),i&&!i.isDeleted()&&i!==e._openGLRenderWindow&&n(i),e.context=e._openGLRenderWindow.getContext(),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow)}},t.opaquePass=(r,i)=>{r&&(e.currentRenderPass=i,t.render())},t.opaqueZBufferPass=r=>{r&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.getCoincidentParameters=(r,i)=>e.renderable.getResolveCoincidentTopology()===Yn.PolygonOffset?e.renderable.getCoincidentTopologyPolygonOffsetParameters():null,t.render=()=>{const r=e.openGLImageSlice.getRenderable(),i=e._openGLRenderer.getRenderable();t.renderPiece(i,r)},t.renderPiece=(r,i)=>{t.invokeEvent({type:"StartEvent"}),e.renderable.update(),t.invokeEvent({type:"EndEvent"}),e.renderable.preRenderCheck()&&(e.currentImageDataInput=e.renderable.getInputData(0),e.currentCenterlineInput=e.renderable.getOrientedCenterline(),t.renderPieceStart(r,i),t.renderPieceDraw(r,i),t.renderPieceFinish(r,i))},t.renderPieceStart=(r,i)=>{t.updateBufferObjects(r,i)},t.renderPieceDraw=(r,i)=>{const a=e.context;e.volumeTexture.activate(),e.colorTexture.activate(),e.pwfTexture.activate(),e.tris.getCABO().getElementCount()&&(t.updateShaders(e.tris,r,i),a.drawArrays(a.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release()),e.volumeTexture.deactivate(),e.colorTexture.deactivate(),e.pwfTexture.deactivate()},t.renderPieceFinish=(r,i)=>{},t.updateBufferObjects=(r,i)=>{t.getNeedToRebuildBufferObjects(r,i)&&t.buildBufferObjects(r,i),i.getProperty().getInterpolationType()===Ja.NEAREST?(e.volumeTexture.setMinificationFilter(Se.NEAREST),e.volumeTexture.setMagnificationFilter(Se.NEAREST),e.colorTexture.setMinificationFilter(Se.NEAREST),e.colorTexture.setMagnificationFilter(Se.NEAREST),e.pwfTexture.setMinificationFilter(Se.NEAREST),e.pwfTexture.setMagnificationFilter(Se.NEAREST)):(e.volumeTexture.setMinificationFilter(Se.LINEAR),e.volumeTexture.setMagnificationFilter(Se.LINEAR),e.colorTexture.setMinificationFilter(Se.LINEAR),e.colorTexture.setMagnificationFilter(Se.LINEAR),e.pwfTexture.setMinificationFilter(Se.LINEAR),e.pwfTexture.setMagnificationFilter(Se.LINEAR))},t.getNeedToRebuildBufferObjects=(r,i)=>{var o;const a=e.VBOBuildTime.getMTime();return a<t.getMTime()||a<e.renderable.getMTime()||a<i.getMTime()||a<e.currentImageDataInput.getMTime()||a<e.currentCenterlineInput.getMTime()||!((o=e.volumeTexture)!=null&&o.getHandle())},t.buildBufferObjects=(r,i)=>{var _,E,D,O;const a=e.currentImageDataInput,o=e.currentCenterlineInput,s=(_=a==null?void 0:a.getPointData())==null?void 0:_.getScalars();if(!s)return;const u=e._openGLRenderWindow.getGraphicsResourceForObject(s),l=g1(a,s);if(!((E=u==null?void 0:u.oglObject)!=null&&E.getHandle())||(u==null?void 0:u.hash)!==l){e.volumeTexture=vt.newInstance(),e.volumeTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const N=a.getDimensions();e.volumeTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),e.volumeTexture.resetFormatAndType(),e.volumeTexture.create3DFilterableFromDataArray(N[0],N[1],N[2],s,e.renderable.getPreferSizeOverAccuracy()),e._openGLRenderWindow.setGraphicsResourceForObject(s,e.volumeTexture,l),s!==e._scalars&&(e._openGLRenderWindow.registerGraphicsResourceUser(s,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._scalars,t)),e._scalars=s}else e.volumeTexture=u.oglObject;const c=s.getNumberOfComponents(),f=i.getProperty(),h=f.getIndependentComponents(),v=h?c:1,y=h?2*v:1,x=f.getRGBTransferFunction(),m=mi(x,h,v),g=e._openGLRenderWindow.getGraphicsResourceForObject(x);if(!((D=g==null?void 0:g.oglObject)!=null&&D.getHandle())||(g==null?void 0:g.hash)!==m){const R=1024*y*3,M=new Uint8ClampedArray(R);if(e.colorTexture=vt.newInstance(),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow),x){const A=new Float32Array(3072);for(let G=0;G<v;G++){const j=f.getRGBTransferFunction(G),k=j.getRange();if(j.getTable(k[0],k[1],1024,A,1),h)for(let F=0;F<1024*3;F++)M[G*1024*6+F]=255*A[F],M[G*1024*6+F+1024*3]=255*A[F];else for(let F=0;F<1024*3;F++)M[G*1024*6+F]=255*A[F]}e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(1024,y,3,Be.UNSIGNED_CHAR,M)}else{for(let A=0;A<1024*3;++A)M[A]=255*A/(1023*3),M[A+1]=255*A/(1023*3),M[A+2]=255*A/(1023*3);e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(1024,1,3,Be.UNSIGNED_CHAR,M)}x&&(e._openGLRenderWindow.setGraphicsResourceForObject(x,e.colorTexture,m),x!==e._colorTransferFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(x,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._colorTransferFunc,t)),e._colorTransferFunc=x)}else e.colorTexture=g.oglObject;const S=f.getPiecewiseFunction(),T=mi(S,h,v),C=e._openGLRenderWindow.getGraphicsResourceForObject(S);if(!((O=C==null?void 0:C.oglObject)!=null&&O.getHandle())||(C==null?void 0:C.hash)!==T){const R=1024*y,M=new Uint8ClampedArray(R);if(e.pwfTexture=vt.newInstance(),e.pwfTexture.setOpenGLRenderWindow(e._openGLRenderWindow),S){const A=new Float32Array(R),G=new Float32Array(1024);for(let j=0;j<v;++j){const k=f.getPiecewiseFunction(j);if(k===null)A.fill(1);else{const F=k.getRange();if(k.getTable(F[0],F[1],1024,G,1),h)for(let B=0;B<1024;B++)A[j*1024*2+B]=G[B],A[j*1024*2+B+1024]=G[B];else for(let B=0;B<1024;B++)A[j*1024*2+B]=G[B]}}e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw(1024,y,1,Be.FLOAT,A)}else M.fill(255),e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw(1024,1,1,Be.UNSIGNED_CHAR,M);S&&(e._openGLRenderWindow.setGraphicsResourceForObject(S,e.pwfTexture,T),S!==e._pwFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(S,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._pwFunc,t)),e._pwFunc=S)}else e.pwfTexture=C.oglObject;if(e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<o.getMTime()){const N=o.getNumberOfPoints(),R=N<=1?0:N-1,M=o.getDistancesToFirstPoint(),A=e.renderable.getHeight(),G=4*R,j=new Float32Array(3*G),k=e.renderable.getWidth();for(let L=0,b=0;L<R;++L)j.set([0,A-M[L],0],b),b+=3,j.set([k,A-M[L],0],b),b+=3,j.set([k,A-M[L+1],0],b),b+=3,j.set([0,A-M[L+1],0],b),b+=3;const F=Ee.newInstance({numberOfComponents:3,values:j});F.setName("points");const B=new Uint16Array(5*R);for(let L=0,b=0,U=0;L<R;++L)B.set([4,U+3,U+2,U+1,U],b),b+=5,U+=4;const $=Ee.newInstance({numberOfComponents:1,values:B}),H=o.getPoints(),X=new Float32Array(3*G),J=new Array(3),q=new Array(3);for(let L=0,b=0;L<R;++L)H.getPoint(L,J),H.getPoint(L+1,q),X.set(J,b),b+=3,X.set(J,b),b+=3,X.set(q,b),b+=3,X.set(q,b),b+=3;const ee=Ee.newInstance({numberOfComponents:3,values:X,name:"centerlinePosition"}),re=new Float32Array(G);for(let L=0,b=0;L<R;++L)re.set([0,1,3,2],b),b+=4;const ae=Ee.newInstance({numberOfComponents:1,values:re,name:"quadIndex"}),te=[ee,ae];if(!e.renderable.getUseUniformOrientation()){const L=e.renderable.getOrientedCenterline().getOrientations()??[],b=new Float32Array(4*G),U=new Float32Array(4*G);for(let z=0;z<R;++z){const W=L[z],Y=L[z+1];for(let ne=0;ne<4;++ne){const ue=4*(ne+4*z);b.set(W,ue),U.set(Y,ue)}}const V=Ee.newInstance({numberOfComponents:4,values:b,name:"centerlineTopOrientation"}),I=Ee.newInstance({numberOfComponents:4,values:U,name:"centerlineBotOrientation"});te.push(V,I)}e.tris.getCABO().createVBO($,"polys",zt.SURFACE,{points:F,customAttributes:te}),e.VBOBuildTime.modified()}},t.getNeedToRebuildShaders=(r,i,a)=>{const o=e.volumeTexture.getComponents(),s=a.getProperty().getIndependentComponents(),u=!!e.renderable.getCenterPoint(),l=e.renderable.getUseUniformOrientation(),p=e.renderable.isProjectionEnabled()&&e.renderable.getProjectionMode();return r.getProgram()===0||e.lastUseCenterPoint!==u||e.lastUseUniformOrientation!==l||e.lastProjectionMode!==p||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||e.lastTextureComponents!==o||e.lastIndependentComponents!==s?(e.lastUseCenterPoint=u,e.lastUseUniformOrientation=l,e.lastProjectionMode=p,e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,e.lastTextureComponents=o,e.lastIndependentComponents=s,!0):!1},t.buildShaders=(r,i,a)=>{t.getShaderTemplate(r,i,a),t.replaceShaderValues(r,i,a)},t.replaceShaderValues=(r,i,a)=>{let o=r.Vertex,s=r.Fragment;const u=["vec3 applyQuaternionToVec(vec4 q, vec3 v) {","  float uvx = q.y * v.z - q.z * v.y;","  float uvy = q.z * v.x - q.x * v.z;","  float uvz = q.x * v.y - q.y * v.x;","  float uuvx = q.y * uvz - q.z * uvy;","  float uuvy = q.z * uvx - q.x * uvz;","  float uuvz = q.x * uvy - q.y * uvx;","  float w2 = q.w * 2.0;","  uvx *= w2;","  uvy *= w2;","  uvz *= w2;","  uuvx *= 2.0;","  uuvy *= 2.0;","  uuvz *= 2.0;","  return vec3(v.x + uvx + uuvx, v.y + uvy + uuvy, v.z + uvz + uuvz);","}"];o=Q.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,o=Q.substitute(o,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result;const l=["attribute vec3 centerlinePosition;","attribute float quadIndex;","uniform float width;","out vec2 quadOffsetVSOutput;","out vec3 centerlinePosVSOutput;"],p=e.renderable.isProjectionEnabled(),c=e.renderable.getUseUniformOrientation();c?(l.push("out vec3 samplingDirVSOutput;","uniform vec4 centerlineOrientation;","uniform vec3 tangentDirection;",...u),p&&l.push("out vec3 projectionDirVSOutput;","uniform vec3 bitangentDirection;")):l.push("out vec4 centerlineTopOrientationVSOutput;","out vec4 centerlineBotOrientationVSOutput;","attribute vec4 centerlineTopOrientation;","attribute vec4 centerlineBotOrientation;"),o=Q.substitute(o,"//VTK::Color::Dec",l).result;const f=["quadOffsetVSOutput = vec2(width * (mod(quadIndex, 2.0) == 0.0 ? -0.5 : 0.5), quadIndex > 1.0 ? 0.0 : 1.0);","centerlinePosVSOutput = centerlinePosition;"];c?(f.push("samplingDirVSOutput = applyQuaternionToVec(centerlineOrientation, tangentDirection);"),p&&f.push("projectionDirVSOutput = applyQuaternionToVec(centerlineOrientation, bitangentDirection);")):f.push("centerlineTopOrientationVSOutput = centerlineTopOrientation;","centerlineBotOrientationVSOutput = centerlineBotOrientation;"),o=Q.substitute(o,"//VTK::Color::Impl",f).result;const h=e.volumeTexture.getComponents(),v=a.getProperty().getIndependentComponents();let y=["uniform mat4 MCTCMatrix; // Model coordinates to texture coordinates","in vec2 quadOffsetVSOutput;","in vec3 centerlinePosVSOutput;","uniform highp sampler3D volumeTexture;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;","uniform vec4 backgroundColor;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;"];p&&y.push("uniform vec3 volumeSizeMC;","uniform int projectionSlabNumberOfSamples;","uniform float projectionConstantOffset;","uniform float projectionStepLength;"),c?(y.push("in vec3 samplingDirVSOutput;"),p&&y.push("in vec3 projectionDirVSOutput;")):(y.push("uniform vec3 tangentDirection;","in vec4 centerlineTopOrientationVSOutput;","in vec4 centerlineBotOrientationVSOutput;",...u),p&&y.push("uniform vec3 bitangentDirection;"));const x=e.renderable.getCenterPoint();if(x&&y.push("uniform vec3 globalCenterPoint;"),v){for(let g=1;g<h;g++)y=y.concat([`uniform float cshift${g};`,`uniform float cscale${g};`,`uniform float pwfshift${g};`,`uniform float pwfscale${g};`]);switch(h){case 1:y=y.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:y=y.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:y=y.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:y=y.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:Uu("Unsupported number of independent coordinates.")}}s=Q.substitute(s,"//VTK::TCoord::Dec",y).result;let m=[];if(c?(m.push("vec3 samplingDirection = samplingDirVSOutput;"),p&&m.push("vec3 projectionDirection = projectionDirVSOutput;")):(m.push("vec4 q0 = centerlineBotOrientationVSOutput;","vec4 q1 = centerlineTopOrientationVSOutput;","float qCosAngle = dot(q0, q1);","vec4 interpolatedOrientation;","if (qCosAngle > 0.999 || qCosAngle < -0.999) {","  // Use LERP instead of SLERP when the two quaternions are close or opposite","  interpolatedOrientation = normalize(mix(q0, q1, quadOffsetVSOutput.y));","} else {","  float omega = acos(qCosAngle);","  interpolatedOrientation = normalize(sin((1.0 - quadOffsetVSOutput.y) * omega) * q0 + sin(quadOffsetVSOutput.y * omega) * q1);","}","vec3 samplingDirection = applyQuaternionToVec(interpolatedOrientation, tangentDirection);"),p&&m.push("vec3 projectionDirection = applyQuaternionToVec(interpolatedOrientation, bitangentDirection);")),x?m.push("float baseOffset = dot(samplingDirection, globalCenterPoint - centerlinePosVSOutput);","float horizontalOffset = quadOffsetVSOutput.x + baseOffset;"):m.push("float horizontalOffset = quadOffsetVSOutput.x;"),m.push("vec3 volumePosMC = centerlinePosVSOutput + horizontalOffset * samplingDirection;","vec3 volumePosTC = (MCTCMatrix * vec4(volumePosMC, 1.0)).xyz;","if (any(lessThan(volumePosTC, vec3(0.0))) || any(greaterThan(volumePosTC, vec3(1.0))))","{","  // set the background color and exit","  gl_FragData[0] = backgroundColor;","  return;","}"),p){const g=e.renderable.getProjectionMode();switch(g){case Ri.MIN:m.push("const vec4 initialProjectionTextureValue = vec4(1.0);");break;case Ri.MAX:case Ri.AVERAGE:default:m.push("const vec4 initialProjectionTextureValue = vec4(0.0);");break}switch(m.push("vec3 projectionScaledDirection = projectionDirection / volumeSizeMC;","vec3 projectionStep = projectionStepLength * projectionScaledDirection;","vec3 projectionStartPosition = volumePosTC + projectionConstantOffset * projectionScaledDirection;","vec4 tvalue = initialProjectionTextureValue;","for (int projectionSampleIdx = 0; projectionSampleIdx < projectionSlabNumberOfSamples; ++projectionSampleIdx) {","  vec3 projectionSamplePosition = projectionStartPosition + float(projectionSampleIdx) * projectionStep;","  vec4 sampledTextureValue = texture(volumeTexture, projectionSamplePosition);"),g){case Ri.MAX:m.push("  tvalue = max(tvalue, sampledTextureValue);");break;case Ri.MIN:m.push("  tvalue = min(tvalue, sampledTextureValue);");break;case Ri.AVERAGE:default:m.push("  tvalue = tvalue + sampledTextureValue;");break}m.push("}"),g===Ri.AVERAGE&&m.push("tvalue = tvalue / float(projectionSlabNumberOfSamples);")}else m.push("vec4 tvalue = texture(volumeTexture, volumePosTC);");if(v){const g=["r","g","b","a"];for(let d=0;d<h;++d)m=m.concat([`vec3 tcolor${d} = mix${d} * texture2D(colorTexture1, vec2(tvalue.${g[d]} * cscale${d} + cshift${d}, height${d})).rgb;`,`float compWeight${d} = mix${d} * texture2D(pwfTexture1, vec2(tvalue.${g[d]} * pwfscale${d} + pwfshift${d}, height${d})).r;`]);switch(h){case 1:m=m.concat(["gl_FragData[0] = vec4(tcolor0.rgb, compWeight0 * opacity);"]);break;case 2:m=m.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:m=m.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:m=m.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:Uu("Unsupported number of independent coordinates.")}}else switch(h){case 1:m=m.concat(["// Dependent components","float intensity = tvalue.r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]);break;case 2:m=m.concat(["float intensity = tvalue.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tvalue.g + pwfshift0);"]);break;case 3:m=m.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]);break;default:m=m.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"])}s=Q.substitute(s,"//VTK::TCoord::Impl",m).result,e.haveSeenDepthRequest&&(s=Q.substitute(s,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,s=Q.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),r.Vertex=o,r.Fragment=s,t.replaceShaderClip(r,i,a),t.replaceShaderCoincidentOffset(r,i,a)},t.replaceShaderClip=(r,i,a)=>{let o=r.Vertex,s=r.Fragment;if(e.renderable.getNumberOfClippingPlanes()){let u=e.renderable.getNumberOfClippingPlanes();u>6&&(P.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),u=6),o=Q.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,o=Q.substitute(o,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,s=Q.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,s=Q.substitute(s,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}r.Vertex=o,r.Fragment=s},t.getShaderTemplate=(r,i,a)=>{r.Vertex=l1,r.Fragment=f1,r.Geometry=""},t.setMapperShaderParameters=(r,i,a)=>{const o=r.getProgram(),s=r.getCABO();s.getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())&&(o.isAttributeUsed("vertexMC")&&(r.getVAO().addAttributeArray(o,s,"vertexMC",s.getVertexOffset(),s.getStride(),e.context.FLOAT,3,e.context.FALSE)||Uu("Error setting vertexMC in shader VAO.")),r.getCABO().getCustomData().forEach(h=>{h&&o.isAttributeUsed(h.name)&&!r.getVAO().addAttributeArray(o,s,h.name,h.offset,s.getStride(),e.context.FLOAT,h.components,e.context.FALSE)&&Uu(`Error setting ${h.name} in shader VAO.`)}),r.getAttributeUpdateTime().modified());const u=e.volumeTexture.getTextureUnit();if(o.setUniformi("volumeTexture",u),o.setUniformf("width",e.renderable.getWidth()),r.getProgram().setUniform4fv("backgroundColor",e.renderable.getBackgroundColor()),o.isUniformUsed("tangentDirection")){const h=e.renderable.getTangentDirection();r.getProgram().setUniform3fArray("tangentDirection",h)}if(o.isUniformUsed("bitangentDirection")){const h=e.renderable.getBitangentDirection();r.getProgram().setUniform3fArray("bitangentDirection",h)}if(o.isUniformUsed("centerlineOrientation")){const h=e.renderable.getUniformOrientation();r.getProgram().setUniform4fv("centerlineOrientation",h)}if(o.isUniformUsed("globalCenterPoint")){const h=e.renderable.getCenterPoint();o.setUniform3fArray("globalCenterPoint",h)}if(e.renderable.isProjectionEnabled()){const h=e.currentImageDataInput,v=h.getSpacing(),y=h.getDimensions(),x=e.renderable.getProjectionSlabThickness(),m=e.renderable.getProjectionSlabNumberOfSamples(),g=C7([],v,y);o.setUniform3fArray("volumeSizeMC",g),o.setUniformi("projectionSlabNumberOfSamples",m);const d=-.5*x;o.setUniformf("projectionConstantOffset",d);const S=x/(m-1);o.setUniformf("projectionStepLength",S)}const l=e.currentImageDataInput,p=l.getWorldToIndex(),c=_h(new Float32Array(16),X3([],l.getDimensions())),f=H0(c,c,p);if(o.setUniformMatrix("MCTCMatrix",f),e.haveSeenDepthRequest&&r.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),e.renderable.getNumberOfClippingPlanes()){let h=e.renderable.getNumberOfClippingPlanes();h>6&&(P.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),h=6);const y=s.getCoordShiftAndScaleEnabled()?s.getInverseShiftAndScaleMatrix():null,x=y?ft(e.imagematinv,a.getMatrix()):a.getMatrix();y&&(Fe(x,x),Le(x,x,y),Fe(x,x)),Fe(e.imagemat,e.currentImageDataInput.getIndexToWorld()),Le(e.imagematinv,x,e.imagemat);const m=[];for(let g=0;g<h;g++){const d=[];e.renderable.getClippingPlaneInDataCoords(e.imagematinv,g,d);for(let S=0;S<4;S++)m.push(d[S])}o.setUniformi("numClipPlanes",h),o.setUniform4fv("clipPlanes",m)}if(o.isUniformUsed("coffset")){const h=t.getCoincidentParameters(i,a);o.setUniformf("coffset",h.offset),o.isUniformUsed("cfactor")&&o.setUniformf("cfactor",h.factor)}},t.setCameraShaderParameters=(r,i,a)=>{const o=e.openGLImageSlice.getKeyMatrices().mcwc,s=e.openGLCamera.getKeyMatrices(i).wcpc;if(Le(e.imagemat,s,o),r.getCABO().getCoordShiftAndScaleEnabled()){const u=r.getCABO().getInverseShiftAndScaleMatrix();Le(e.imagemat,e.imagemat,u)}r.getProgram().setUniformMatrix("MCPCMatrix",e.imagemat)},t.setPropertyShaderParameters=(r,i,a)=>{const o=r.getProgram(),s=a.getProperty(),u=s.getOpacity();o.setUniformf("opacity",u);const l=e.volumeTexture.getComponents(),p=s.getIndependentComponents();if(p)for(let v=0;v<l;++v)o.setUniformf(`mix${v}`,s.getComponentWeight(v));const c=e.volumeTexture.getVolumeInfo();for(let v=0;v<l;v++){let y=s.getColorWindow(),x=s.getColorLevel();const m=p?v:0,g=s.getRGBTransferFunction(m);if(g&&s.getUseLookupTableScalarRange()){const T=g.getRange();y=T[1]-T[0],x=.5*(T[1]+T[0])}const d=c.scale[v]/y,S=(c.offset[v]-x)/y+.5;o.setUniformf(`cshift${v}`,S),o.setUniformf(`cscale${v}`,d)}const f=e.colorTexture.getTextureUnit();o.setUniformi("colorTexture1",f);for(let v=0;v<l;v++){let y=1,x=0;const m=p?v:0,g=s.getPiecewiseFunction(m);if(g){const d=g.getRange(),S=d[1]-d[0],T=.5*(d[0]+d[1]);y=c.scale[v]/S,x=(c.offset[v]-T)/S+.5}o.setUniformf(`pwfshift${v}`,x),o.setUniformf(`pwfscale${v}`,y)}const h=e.pwfTexture.getTextureUnit();o.setUniformi("pwfTexture1",h)},t.updateShaders=(r,i,a)=>{if(t.getNeedToRebuildShaders(r,i,a)){const o={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(o,i,a);const s=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);s!==r.getProgram()&&(r.setProgram(s),r.getVAO().releaseGraphicsResources()),r.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(r.getProgram());r.getVAO().bind(),t.setMapperShaderParameters(r,i,a),t.setCameraShaderParameters(r,i,a),t.setPropertyShaderParameters(r,i,a)},t.delete=P.chain(()=>{e._openGLRenderWindow&&n(e._openGLRenderWindow)},t.delete)}const SR={currentRenderPass:null,volumeTexture:null,colorTexture:null,pwfTexture:null,tris:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0,lastIndependentComponents:0,imagemat:null,imagematinv:null};function TR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,SR,n),He.extend(t,e,n),hr.implementReplaceShaderCoincidentOffset(t,e,n),P.algo(t,e,2,0),e.tris=dr.newInstance(),e.volumeTexture=null,e.colorTexture=null,e.pwfTexture=null,e.imagemat=ye(new Float64Array(16)),e.imagematinv=ye(new Float64Array(16)),e.VBOBuildTime={},P.obj(e.VBOBuildTime,{mtime:0}),xR(t,e)}const CR=P.newInstance(TR,"vtkOpenGLImageCPRMapper");Lt("vtkImageCPRMapper",CR);function wR(t,e){e.classHierarchy.push("vtkOpenGLImageSlice"),t.buildPass=n=>{if(!(!e.renderable||!e.renderable.getVisibility())&&n){if(!e.renderable)return;e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes()}},t.traverseZBufferPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children.forEach(r=>{r.traverse(n)}),t.apply(n,!1))},t.traverseOpaqueZBufferPass=n=>t.traverseOpaquePass(n),t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children.forEach(r=>{r.traverse(n)}),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children.forEach(r=>{r.traverse(n)}),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.zBufferPass=(n,r)=>t.opaquePass(n,r),t.opaqueZBufferPass=(n,r)=>t.opaquePass(n,r),t.opaquePass=(n,r)=>{n&&e.context.depthMask(!0)},t.translucentPass=(n,r)=>{e.context.depthMask(!n)},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(ft(e.keyMatrices.mcwc,e.renderable.getMatrix()),Fe(e.keyMatrices.mcwc,e.keyMatrices.mcwc),e.keyMatrixTime.modified()),e.keyMatrices)}const _R={context:null,keyMatrixTime:null,keyMatrices:null};function ER(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_R,n),He.extend(t,e,n),e.keyMatrixTime={},qe(e.keyMatrixTime,{mtime:0}),e.keyMatrices={mcwc:ye(new Float64Array(16))},ut(t,e,["context"]),wR(t,e)}const DR=ze(ER,"vtkOpenGLImageSlice");Lt("vtkImageSlice",DR);function OR(t,e){e.classHierarchy.push("vtkOpenGLVolume"),t.buildPass=n=>{!e.renderable||!e.renderable.getVisibility()||n&&(e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementVolumeCount()}},t.traverseVolumePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0].traverse(n),t.apply(n,!1))},t.volumePass=n=>{!e.renderable||!e.renderable.getVisibility()||e.context.depthMask(!n)},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(e.renderable.computeMatrix(),ft(e.MCWCMatrix,e.renderable.getMatrix()),Fe(e.MCWCMatrix,e.MCWCMatrix),e.renderable.getIsIdentity()?gr(e.normalMatrix):(kc(e.normalMatrix,e.MCWCMatrix),zs(e.normalMatrix,e.normalMatrix),mh(e.normalMatrix,e.normalMatrix)),e.keyMatrixTime.modified()),{mcwc:e.MCWCMatrix,normalMatrix:e.normalMatrix})}const bR={};function NR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bR,n),He.extend(t,e,n),e.keyMatrixTime={},qe(e.keyMatrixTime,{mtime:0}),e.normalMatrix=new Float64Array(9),e.MCWCMatrix=new Float64Array(16),ut(t,e,["context"]),OR(t,e)}const MR=ze(NR,"vtkOpenGLVolume");Lt("vtkVolume",MR);function RR(t,e){e.classHierarchy.push("vtkFramebuffer"),t.getBothMode=()=>e.context.FRAMEBUFFER,t.saveCurrentBindingsAndBuffers=n=>{const r=typeof n<"u"?n:t.getBothMode();t.saveCurrentBindings(r),t.saveCurrentBuffers(r)},t.saveCurrentBindings=n=>{if(!e.context){Me("you must set the OpenGLRenderWindow before calling saveCurrentBindings");return}const r=e.context;e.previousDrawBinding=r.getParameter(e.context.FRAMEBUFFER_BINDING),e.previousActiveFramebuffer=e._openGLRenderWindow.getActiveFramebuffer()},t.saveCurrentBuffers=n=>{},t.restorePreviousBindingsAndBuffers=n=>{const r=typeof n<"u"?n:t.getBothMode();t.restorePreviousBindings(r),t.restorePreviousBuffers(r)},t.restorePreviousBindings=n=>{if(!e.context){Me("you must set the OpenGLRenderWindow before calling restorePreviousBindings");return}const r=e.context;r.bindFramebuffer(r.FRAMEBUFFER,e.previousDrawBinding),e._openGLRenderWindow.setActiveFramebuffer(e.previousActiveFramebuffer)},t.restorePreviousBuffers=n=>{},t.bind=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;r===null&&(r=e.context.FRAMEBUFFER),e.context.bindFramebuffer(r,e.glFramebuffer);for(let i=0;i<e.colorBuffers.length;i++)e.colorBuffers[i].bind();e._openGLRenderWindow.setActiveFramebuffer(t)},t.create=(n,r)=>{if(!e.context){Me("you must set the OpenGLRenderWindow before calling create");return}e.glFramebuffer=e.context.createFramebuffer(),e.glFramebuffer.width=n,e.glFramebuffer.height=r},t.setColorBuffer=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=e.context;if(!i){Me("you must set the OpenGLRenderWindow before calling setColorBuffer");return}let a=i.COLOR_ATTACHMENT0;if(r>0)if(e._openGLRenderWindow.getWebgl2())a+=r;else{Me("Using multiple framebuffer attachments requires WebGL 2");return}e.colorBuffers[r]=n,i.framebufferTexture2D(i.FRAMEBUFFER,a,i.TEXTURE_2D,n.getHandle(),0)},t.removeColorBuffer=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const r=e.context;if(!r){Me("you must set the OpenGLRenderWindow before calling removeColorBuffer");return}let i=r.COLOR_ATTACHMENT0;if(n>0)if(e._openGLRenderWindow.getWebgl2())i+=n;else{Me("Using multiple framebuffer attachments requires WebGL 2");return}r.framebufferTexture2D(r.FRAMEBUFFER,i,r.TEXTURE_2D,null,0),e.colorBuffers=e.colorBuffers.splice(n,1)},t.setDepthBuffer=n=>{if(!e.context){Me("you must set the OpenGLRenderWindow before calling setDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const r=e.context;r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,n.getHandle(),0)}else Me("Attaching depth buffer textures to fbo requires WebGL 2")},t.removeDepthBuffer=()=>{if(!e.context){Me("you must set the OpenGLRenderWindow before calling removeDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const n=e.context;n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,null,0)}else Me("Attaching depth buffer textures to framebuffers requires WebGL 2")},t.getGLFramebuffer=()=>e.glFramebuffer,t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))},t.releaseGraphicsResources=()=>{e.glFramebuffer&&e.context.deleteFramebuffer(e.glFramebuffer)},t.getSize=()=>e.glFramebuffer==null?null:[e.glFramebuffer.width,e.glFramebuffer.height],t.populateFramebuffer=()=>{if(!e.context){Me("you must set the OpenGLRenderWindow before calling populateFrameBuffer");return}t.bind();const n=e.context,r=vt.newInstance();r.setOpenGLRenderWindow(e._openGLRenderWindow),r.setMinificationFilter(Se.LINEAR),r.setMagnificationFilter(Se.LINEAR),r.create2DFromRaw(e.glFramebuffer.width,e.glFramebuffer.height,4,Be.UNSIGNED_CHAR,null),t.setColorBuffer(r),e.depthTexture=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,e.depthTexture),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e.glFramebuffer.width,e.glFramebuffer.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,e.depthTexture)},t.getColorTexture=()=>e.colorBuffers[0]}const FR={glFramebuffer:null,colorBuffers:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function O4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,FR,n),qe(t,e),e.colorBuffers&&Me("you cannot initialize colorBuffers through the constructor. You should call setColorBuffer() instead."),e.colorBuffers=[],So(t,e,["colorBuffers"]),RR(t,e)}const LR=ze(O4,"vtkFramebuffer");var Hc={newInstance:LR,extend:O4};const vp={NEAREST:0,LINEAR:1,FAST_LINEAR:2},b4={FRACTIONAL:0,PROPORTIONAL:1},v0={CUSTOM:0,ADDITIVE:1,COLORIZE:2};var N4={InterpolationType:vp,OpacityMode:b4,ColorMixPreset:v0};const ar={COMPOSITE_BLEND:0,MAXIMUM_INTENSITY_BLEND:1,MINIMUM_INTENSITY_BLEND:2,AVERAGE_INTENSITY_BLEND:3,ADDITIVE_INTENSITY_BLEND:4,RADON_TRANSFORM_BLEND:5,LABELMAP_EDGE_PROJECTION_BLEND:6},kR={OFF:0,NORMALIZED:1,RAW:2};var BR={BlendMode:ar,FilterMode:kR},VR=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexDC;

varying vec3 vertexVCVSOutput;
uniform mat4 PCVCMatrix;

uniform float dcxmin;
uniform float dcxmax;
uniform float dcymin;
uniform float dcymax;

void main()
{
  // dcsmall is the device coords reduced to the
  // x y area covered by the volume
  vec4 dcsmall = vec4(
    dcxmin + 0.5 * (vertexDC.x + 1.0) * (dcxmax - dcxmin),
    dcymin + 0.5 * (vertexDC.y + 1.0) * (dcymax - dcymin),
    vertexDC.z,
    vertexDC.w);
  vec4 vcpos = PCVCMatrix * dcsmall;
  vertexVCVSOutput = vcpos.xyz/vcpos.w;
  gl_Position = dcsmall;
}
`,AR=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkVolumeFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the volume mappers fragment shader

// the output of this shader
//VTK::Output::Dec

varying vec3 vertexVCVSOutput;

// first declare the settings from the mapper
// that impact the code paths in here

// always set vtkNumComponents 1,2,3,4
//VTK::NumComponents

// possibly define vtkTrilinearOn
//VTK::TrilinearOn

// possibly define UseIndependentComponents
//VTK::IndependentComponentsOn

// possibly define vtkCustomComponentsColorMix
//VTK::CustomComponentsColorMixOn

// possibly define any "proportional" components
//VTK::vtkProportionalComponents

// possibly define any components that are forced to nearest interpolation
//VTK::vtkForceNearestComponents

// Define the blend mode to use
#define vtkBlendMode //VTK::BlendMode

// Possibly define vtkImageLabelOutlineOn
//VTK::ImageLabelOutlineOn

// Possibly define vtkLabelEdgeProjectionOn
//VTK::LabelEdgeProjectionOn


#ifdef vtkImageLabelOutlineOn
  uniform float outlineOpacity;
  uniform float vpWidth;
  uniform float vpHeight;
  uniform float vpOffsetX;
  uniform float vpOffsetY;
  uniform mat4 PCWCMatrix;
  uniform mat4 vWCtoIDX;

  const int MAX_SEGMENT_INDEX = 256; // Define as per expected maximum
  // bool seenSegmentsByOriginalPos[MAX_SEGMENT_INDEX];
  #define MAX_SEGMENTS 256
  #define UINT_SIZE 32
  #define BITMASK_SIZE ((MAX_SEGMENTS + UINT_SIZE - 1) / UINT_SIZE)

  uint bitmask[BITMASK_SIZE];

  // Set the corresponding bit in the bitmask
  void setBit(int segmentIndex) {
    int index = segmentIndex / UINT_SIZE;
    int bitIndex = segmentIndex % UINT_SIZE;
    bitmask[index] |= 1u << bitIndex;
  }

  // Check if a bit is set in the bitmask
  bool isBitSet(int segmentIndex) {
    int index = segmentIndex / UINT_SIZE;
    int bitIndex = segmentIndex % UINT_SIZE;
    return ((bitmask[index] & (1u << bitIndex)) != 0u);
  }
#endif

// define vtkLightComplexity
//VTK::LightComplexity
#if vtkLightComplexity > 0
uniform float vSpecularPower;
uniform float vAmbient;
uniform float vDiffuse;
uniform float vSpecular;
//VTK::Light::Dec
#endif

//VTK::VolumeShadowOn
//VTK::SurfaceShadowOn
//VTK::localAmbientOcclusionOn
//VTK::LAO::Dec
//VTK::VolumeShadow::Dec

// define vtkComputeNormalFromOpacity
//VTK::vtkComputeNormalFromOpacity

// possibly define vtkGradientOpacityOn
//VTK::GradientOpacityOn
#ifdef vtkGradientOpacityOn
uniform float goscale0;
uniform float goshift0;
uniform float gomin0;
uniform float gomax0;
#ifdef UseIndependentComponents
#if vtkNumComponents > 1
uniform float goscale1;
uniform float goshift1;
uniform float gomin1;
uniform float gomax1;
#if vtkNumComponents > 2
uniform float goscale2;
uniform float goshift2;
uniform float gomin2;
uniform float gomax2;
#if vtkNumComponents > 3
uniform float goscale3;
uniform float goshift3;
uniform float gomin3;
uniform float gomax3;
#endif
#endif
#endif
#endif
#endif

// if you want to see the raw tiled
// data in webgl1 uncomment the following line
// #define debugtile

// camera values
uniform float camThick;
uniform float camNear;
uniform float camFar;
uniform int cameraParallel;

// values describing the volume geometry
uniform vec3 vOriginVC;
uniform vec3 vSpacing;
uniform ivec3 volumeDimensions; // 3d texture dimensions
uniform vec3 vPlaneNormal0;
uniform float vPlaneDistance0;
uniform vec3 vPlaneNormal1;
uniform float vPlaneDistance1;
uniform vec3 vPlaneNormal2;
uniform float vPlaneDistance2;
uniform vec3 vPlaneNormal3;
uniform float vPlaneDistance3;
uniform vec3 vPlaneNormal4;
uniform float vPlaneDistance4;
uniform vec3 vPlaneNormal5;
uniform float vPlaneDistance5;

//VTK::ClipPlane::Dec

// opacity and color textures
uniform sampler2D otexture;
uniform float oshift0;
uniform float oscale0;
uniform sampler2D ctexture;
uniform float cshift0;
uniform float cscale0;

#if vtkNumComponents >= 2
uniform float oshift1;
uniform float oscale1;
uniform float cshift1;
uniform float cscale1;
#endif
#if vtkNumComponents >= 3
uniform float oshift2;
uniform float oscale2;
uniform float cshift2;
uniform float cscale2;
#endif
#if vtkNumComponents >= 4
uniform float oshift3;
uniform float oscale3;
uniform float cshift3;
uniform float cscale3;
#endif

// jitter texture
uniform sampler2D jtexture;
uniform sampler2D ttexture;


// some 3D texture values
uniform float sampleDistance;
uniform vec3 vVCToIJK;
uniform vec3 volumeSpacings; // spacing in the world coorindates


// the heights defined below are the locations
// for the up to four components of the tfuns
// the tfuns have a height of 2XnumComps pixels so the
// values are computed to hit the middle of the two rows
// for that component
#ifdef UseIndependentComponents
#if vtkNumComponents == 1
uniform float mix0;
#define height0 0.5
#endif
#if vtkNumComponents == 2
uniform float mix0;
uniform float mix1;
#define height0 0.25
#define height1 0.75
#endif
#if vtkNumComponents == 3
uniform float mix0;
uniform float mix1;
uniform float mix2;
#define height0 0.17
#define height1 0.5
#define height2 0.83
#endif
#if vtkNumComponents == 4
uniform float mix0;
uniform float mix1;
uniform float mix2;
uniform float mix3;
#define height0 0.125
#define height1 0.375
#define height2 0.625
#define height3 0.875
#endif
#endif

uniform vec4 ipScalarRangeMin;
uniform vec4 ipScalarRangeMax;

// declaration for intermixed geometry
//VTK::ZBuffer::Dec

//=======================================================================
// global and custom variables (a temporary section before photorealistics rendering module is complete)
vec3 rayDirVC;
float sampleDistanceISVS;
float sampleDistanceIS;

#define SQRT3    1.7321
#define INV4PI   0.0796
#define EPSILON  0.001
#define PI       3.1415
#define PI2      9.8696

//=======================================================================
// Webgl2 specific version of functions
#if __VERSION__ == 300

uniform highp sampler3D texture1;

vec4 getTextureValue(vec3 pos)
{
  vec4 tmp = texture(texture1, pos);

  #if defined(vtkComponent0ForceNearest) || \\
      defined(vtkComponent1ForceNearest) || \\
      defined(vtkComponent2ForceNearest) || \\
      defined(vtkComponent3ForceNearest)
    vec3 nearestPos = (floor(pos * vec3(volumeDimensions)) + 0.5) / vec3(volumeDimensions);
    vec4 nearestValue = texture(texture1, nearestPos);
    #ifdef vtkComponent0ForceNearest
      tmp[0] = nearestValue[0];
    #endif
    #ifdef vtkComponent1ForceNearest
      tmp[1] = nearestValue[1];
    #endif
    #ifdef vtkComponent2ForceNearest
      tmp[2] = nearestValue[2];
    #endif
    #ifdef vtkComponent3ForceNearest
      tmp[3] = nearestValue[3];
    #endif
  #endif

  #ifndef UseIndependentComponents
    #if vtkNumComponents == 1
      tmp.a = tmp.r;
    #endif
    #if vtkNumComponents == 2
      tmp.a = tmp.g;
    #endif
    #if vtkNumComponents == 3
      tmp.a = length(tmp.rgb);
    #endif
  #endif

  return tmp;
}

//=======================================================================
// WebGL1 specific version of functions
#else

uniform sampler2D texture1;

uniform float texWidth;
uniform float texHeight;
uniform int xreps;
uniform int xstride;
uniform int ystride;

// if computing trilinear values from multiple z slices
#ifdef vtkTrilinearOn
vec4 getTextureValue(vec3 ijk)
{
  float zoff = 1.0/float(volumeDimensions.z);
  vec4 val1 = getOneTextureValue(ijk);
  vec4 val2 = getOneTextureValue(vec3(ijk.xy, ijk.z + zoff));

  float indexZ = float(volumeDimensions)*ijk.z;
  float zmix =  indexZ - floor(indexZ);

  return mix(val1, val2, zmix);
}

vec4 getOneTextureValue(vec3 ijk)
#else // nearest or fast linear
vec4 getTextureValue(vec3 ijk)
#endif
{
  vec3 tdims = vec3(volumeDimensions);

#ifdef debugtile
  vec2 tpos = vec2(ijk.x, ijk.y);
  vec4 tmp = texture2D(texture1, tpos);
  tmp.a = 1.0;

#else
  int z = int(ijk.z * tdims.z);
  int yz = z / xreps;
  int xz = z - yz*xreps;

  int tileWidth = volumeDimensions.x/xstride;
  int tileHeight = volumeDimensions.y/ystride;

  xz *= tileWidth;
  yz *= tileHeight;

  float ni = float(xz) + (ijk.x*float(tileWidth));
  float nj = float(yz) + (ijk.y*float(tileHeight));

  vec2 tpos = vec2(ni/texWidth, nj/texHeight);

  vec4 tmp = texture2D(texture1, tpos);

#if vtkNumComponents == 1
  tmp.a = tmp.r;
#endif
#if vtkNumComponents == 2
  tmp.g = tmp.a;
#endif
#if vtkNumComponents == 3
  tmp.a = length(tmp.rgb);
#endif
#endif

  return tmp;
}

// End of Webgl1 specific code
//=======================================================================
#endif

//=======================================================================
// transformation between VC and IS space

// convert vector position from idx to vc
#if (vtkLightComplexity > 0) || (defined vtkClippingPlanesOn)
vec3 IStoVC(vec3 posIS){
  vec3 posVC = posIS / vVCToIJK;
  return posVC.x * vPlaneNormal0 +
         posVC.y * vPlaneNormal2 +
         posVC.z * vPlaneNormal4 +
         vOriginVC;
}

// convert vector position from vc to idx
vec3 VCtoIS(vec3 posVC){
  posVC = posVC - vOriginVC;
  posVC = vec3(
    dot(posVC, vPlaneNormal0),
    dot(posVC, vPlaneNormal2),
    dot(posVC, vPlaneNormal4));
  return posVC * vVCToIJK;
}
#endif

//Rotate vector to view coordinate
#if (vtkLightComplexity > 0) || (defined vtkGradientOpacityOn)
void rotateToViewCoord(inout vec3 dirIS){
  dirIS.xyz =
    dirIS.x * vPlaneNormal0 +
    dirIS.y * vPlaneNormal2 +
    dirIS.z * vPlaneNormal4;
}

//Rotate vector to idx coordinate
vec3 rotateToIDX(vec3 dirVC){
  vec3 dirIS;
  dirIS.xyz = vec3(
    dot(dirVC, vPlaneNormal0),
    dot(dirVC, vPlaneNormal2),
    dot(dirVC, vPlaneNormal4));
  return dirIS;
}
#endif

//=======================================================================
// Given a normal compute the gradient opacity factors
float computeGradientOpacityFactor(
  float normalMag, float goscale, float goshift, float gomin, float gomax)
{
  return clamp(normalMag * goscale + goshift, gomin, gomax);
}

//=======================================================================
// compute the normal and gradient magnitude for a position, uses forward difference
#if (vtkLightComplexity > 0) || (defined vtkGradientOpacityOn)
  #ifdef vtkClippingPlanesOn
    void adjustClippedVoxelValues(vec3 pos, vec3 texPos[3], inout vec3 g1)
    {
      vec3 g1VC[3];
      for (int i = 0; i < 3; ++i)
      {
        g1VC[i] = IStoVC(texPos[i]);
      }
      vec3 posVC = IStoVC(pos);
      for (int i = 0; i < clip_numPlanes; ++i)
      {
        for (int j = 0; j < 3; ++j)
        {
          if(dot(vec3(vClipPlaneOrigins[i] - g1VC[j].xyz), vClipPlaneNormals[i]) > 0.0)
          {
            g1[j] = 0.0;
          }
        }
      }
    }
  #endif

  #ifdef vtkComputeNormalFromOpacity
    vec4 computeDensityNormal(vec3 opacityUCoords[2], float opactityTextureHeight, float gradientOpacity) {
      vec3 opacityG1, opacityG2;
      opacityG1.x = texture2D(otexture, vec2(opacityUCoords[0].x, opactityTextureHeight)).r;
      opacityG1.y = texture2D(otexture, vec2(opacityUCoords[0].y, opactityTextureHeight)).r;
      opacityG1.z = texture2D(otexture, vec2(opacityUCoords[0].z, opactityTextureHeight)).r;
      opacityG2.x = texture2D(otexture, vec2(opacityUCoords[1].x, opactityTextureHeight)).r;
      opacityG2.y = texture2D(otexture, vec2(opacityUCoords[1].y, opactityTextureHeight)).r;
      opacityG2.z = texture2D(otexture, vec2(opacityUCoords[1].z, opactityTextureHeight)).r;
      opacityG1.xyz *= gradientOpacity;
      opacityG2.xyz *= gradientOpacity;

      vec4 opacityG = vec4(opacityG1 - opacityG2, 1.0f);
      // divide by spacing
      opacityG.xyz /= vSpacing;
      opacityG.w = length(opacityG.xyz);
      // rotate to View Coords
      rotateToViewCoord(opacityG.xyz);
      if (!all(equal(opacityG.xyz, vec3(0.0)))) {
        return vec4(normalize(opacityG.xyz),opacityG.w);
      } else {
        return vec4(0.0);
      }
    }

    vec4 computeNormalForDensity(vec3 pos, vec3 tstep, out vec3 scalarInterp[2], const int opacityComponent)
    {
      vec3 xvec = vec3(tstep.x, 0.0, 0.0);
      vec3 yvec = vec3(0.0, tstep.y, 0.0);
      vec3 zvec = vec3(0.0, 0.0, tstep.z);
      vec3 texPosPVec[3];
      texPosPVec[0] = pos + xvec;
      texPosPVec[1] = pos + yvec;
      texPosPVec[2] = pos + zvec;
      vec3 texPosNVec[3];
      texPosNVec[0] = pos - xvec;
      texPosNVec[1] = pos - yvec;
      texPosNVec[2] = pos - zvec;
      vec3 g1, g2;

      scalarInterp[0].x = getTextureValue(texPosPVec[0])[opacityComponent];
      scalarInterp[0].y = getTextureValue(texPosPVec[1])[opacityComponent];
      scalarInterp[0].z = getTextureValue(texPosPVec[2])[opacityComponent];
      scalarInterp[1].x = getTextureValue(texPosNVec[0])[opacityComponent];
      scalarInterp[1].y = getTextureValue(texPosNVec[1])[opacityComponent];
      scalarInterp[1].z = getTextureValue(texPosNVec[2])[opacityComponent];

      #ifdef vtkClippingPlanesOn
        adjustClippedVoxelValues(pos, texPosPVec, scalarInterp[0]);
        adjustClippedVoxelValues(pos, texPosNVec, scalarInterp[1]);
      #endif
      vec4 result;
      result.x = scalarInterp[0].x - scalarInterp[1].x;
      result.y = scalarInterp[0].y - scalarInterp[1].y;
      result.z = scalarInterp[0].z - scalarInterp[1].z;
      // divide by spacing
      result.xyz /= vSpacing;
      result.w = length(result.xyz);
      // rotate to View Coords
      rotateToViewCoord(result.xyz);
      if (length(result.xyz) > 0.0) {
        return vec4(normalize(result.xyz),result.w);
      } else {
        return vec4(0.0);
      }
    }
  #endif

  // only works with dependent components
  vec4 computeNormal(vec3 pos, vec3 tstep)
  {
    vec3 xvec = vec3(tstep.x, 0.0, 0.0);
    vec3 yvec = vec3(0.0, tstep.y, 0.0);
    vec3 zvec = vec3(0.0, 0.0, tstep.z);
    vec3 texPosPVec[3];
    texPosPVec[0] = pos + xvec;
    texPosPVec[1] = pos + yvec;
    texPosPVec[2] = pos + zvec;
    vec3 texPosNVec[3];
    texPosNVec[0] = pos - xvec;
    texPosNVec[1] = pos - yvec;
    texPosNVec[2] = pos - zvec;
    vec3 g1, g2;
    g1.x = getTextureValue(texPosPVec[0]).a;
    g1.y = getTextureValue(texPosPVec[1]).a;
    g1.z = getTextureValue(texPosPVec[2]).a;
    g2.x = getTextureValue(texPosNVec[0]).a;
    g2.y = getTextureValue(texPosNVec[1]).a;
    g2.z = getTextureValue(texPosNVec[2]).a;
    #ifdef vtkClippingPlanesOn
      adjustClippedVoxelValues(pos, texPosPVec, g1);
      adjustClippedVoxelValues(pos, texPosNVec, g2);
    #endif
    vec4 result;
    result = vec4(g1 - g2, -1.0);
    // divide by spacing
    result.xyz /= vSpacing;
    result.w = length(result.xyz);
    if (result.w > 0.0){
      // rotate to View Coords
      rotateToViewCoord(result.xyz);
      return vec4(normalize(result.xyz),result.w);
    } else {
      return vec4(0.0);
    }
  }
#endif


#ifdef vtkImageLabelOutlineOn
  vec4 fragCoordToPCPos(vec4 fragCoord) {
    return vec4(
      (fragCoord.x / vpWidth - vpOffsetX - 0.5) * 2.0,
      (fragCoord.y / vpHeight - vpOffsetY - 0.5) * 2.0,
      (fragCoord.z - 0.5) * 2.0,
      1.0);
  }

  vec4 pcPosToWorldCoord(vec4 pcPos) {
    return PCWCMatrix * pcPos;
  }

  vec3 fragCoordToIndexSpace(vec4 fragCoord) {
    vec4 pcPos = fragCoordToPCPos(fragCoord);
    vec4 worldCoord = pcPosToWorldCoord(pcPos);
    vec4 vertex = (worldCoord / worldCoord.w);

    vec3 index = (vWCtoIDX * vertex).xyz;

    // half voxel fix for labelmapOutline
    return (index + vec3(0.5)) / vec3(volumeDimensions);
  }

  vec3 fragCoordToWorld(vec4 fragCoord) {
    vec4 pcPos = fragCoordToPCPos(fragCoord);
    vec4 worldCoord = pcPosToWorldCoord(pcPos);
    return worldCoord.xyz;
  }
#endif

//=======================================================================
// compute the normals and gradient magnitudes for a position
// for independent components
mat4 computeMat4Normal(vec3 pos, vec4 tValue, vec3 tstep)
{
  mat4 result;
  vec4 distX = getTextureValue(pos + vec3(tstep.x, 0.0, 0.0)) - tValue;
  vec4 distY = getTextureValue(pos + vec3(0.0, tstep.y, 0.0)) - tValue;
  vec4 distZ = getTextureValue(pos + vec3(0.0, 0.0, tstep.z)) - tValue;

  // divide by spacing
  distX /= vSpacing.x;
  distY /= vSpacing.y;
  distZ /= vSpacing.z;

  mat3 rot;
  rot[0] = vPlaneNormal0;
  rot[1] = vPlaneNormal2;
  rot[2] = vPlaneNormal4;

#if !defined(vtkComponent0Proportional)
  result[0].xyz = vec3(distX.r, distY.r, distZ.r);
  result[0].a = length(result[0].xyz);
  result[0].xyz *= rot;
  if (result[0].w > 0.0)
  {
    result[0].xyz /= result[0].w;
  }
#endif

// optionally compute the 2nd component
#if vtkNumComponents >= 2 && !defined(vtkComponent1Proportional)
  result[1].xyz = vec3(distX.g, distY.g, distZ.g);
  result[1].a = length(result[1].xyz);
  result[1].xyz *= rot;
  if (result[1].w > 0.0)
  {
    result[1].xyz /= result[1].w;
  }
#endif

// optionally compute the 3rd component
#if vtkNumComponents >= 3 && !defined(vtkComponent2Proportional)
  result[2].xyz = vec3(distX.b, distY.b, distZ.b);
  result[2].a = length(result[2].xyz);
  result[2].xyz *= rot;
  if (result[2].w > 0.0)
  {
    result[2].xyz /= result[2].w;
  }
#endif

// optionally compute the 4th component
#if vtkNumComponents >= 4 && !defined(vtkComponent3Proportional)
  result[3].xyz = vec3(distX.a, distY.a, distZ.a);
  result[3].a = length(result[3].xyz);
  result[3].xyz *= rot;
  if (result[3].w > 0.0)
  {
    result[3].xyz /= result[3].w;
  }
#endif

  return result;
}

//=======================================================================
// global shadow - secondary ray
#if defined(VolumeShadowOn) || defined(localAmbientOcclusionOn)
float random()
{
  float rand = fract(sin(dot(gl_FragCoord.xy,vec2(12.9898,78.233)))*43758.5453123);
  float jitter=texture2D(jtexture,gl_FragCoord.xy/32.).r;
  uint pcg_state = floatBitsToUint(jitter);
  uint state = pcg_state;
  pcg_state = pcg_state * uint(747796405) + uint(2891336453);
  uint word = ((state >> ((state >> uint(28)) + uint(4))) ^ state) * uint(277803737);
  return (float((((word >> uint(22)) ^ word) >> 1 ))/float(2147483647) + rand)/2.0;
}
#endif

#ifdef VolumeShadowOn
// henyey greenstein phase function
float phase_function(float cos_angle)
{
  // divide by 2.0 instead of 4pi to increase intensity
  return ((1.0-anisotropy2)/pow(1.0+anisotropy2-2.0*anisotropy*cos_angle, 1.5))/2.0;
}

// Computes the intersection between a ray and a box
struct Hit
{
  float tmin;
  float tmax;
};

struct Ray
{
  vec3 origin;
  vec3 dir;
  vec3 invDir;
};

bool BBoxIntersect(vec3 boundMin, vec3 boundMax, const Ray r, out Hit hit)
{
  vec3 tbot = r.invDir * (boundMin - r.origin);
  vec3 ttop = r.invDir * (boundMax - r.origin);
  vec3 tmin = min(ttop, tbot);
  vec3 tmax = max(ttop, tbot);
  vec2 t = max(tmin.xx, tmin.yz);
  float t0 = max(t.x, t.y);
  t = min(tmax.xx, tmax.yz);
  float t1 = min(t.x, t.y);
  hit.tmin = t0;
  hit.tmax = t1;
  return t1 > max(t0,0.0);
}

// As BBoxIntersect requires the inverse of the ray coords,
// this function is used to avoid numerical issues
void safe_0_vector(inout Ray ray)
{
  if(abs(ray.dir.x) < EPSILON) ray.dir.x = sign(ray.dir.x) * EPSILON;
  if(abs(ray.dir.y) < EPSILON) ray.dir.y = sign(ray.dir.y) * EPSILON;
  if(abs(ray.dir.z) < EPSILON) ray.dir.z = sign(ray.dir.z) * EPSILON;
}

float volume_shadow(vec3 posIS, vec3 lightDirNormIS)
{
  float shadow = 1.0;
  float opacity = 0.0;

  // modify sample distance with a random number between 1.5 and 3.0
  float sampleDistanceISVS_jitter = sampleDistanceISVS * mix(1.5, 3.0, random());
  float opacityPrev = texture2D(otexture, vec2(getTextureValue(posIS).r * oscale0 + oshift0, 0.5)).r;

  // in case the first sample near surface has a very tiled light ray, we need to offset start position
  posIS += sampleDistanceISVS_jitter * lightDirNormIS;

  // compute the start and end points for the ray
  Ray ray;
  Hit hit;
  ray.origin = posIS;
  ray.dir = lightDirNormIS;
  safe_0_vector(ray);
  ray.invDir = 1.0/ray.dir;

  if(!BBoxIntersect(vec3(0.0),vec3(1.0), ray, hit))
  {
    return 1.0;
  }
  float maxdist = hit.tmax;

  // interpolate shadow ray length between: 1 unit of sample distance in IS to SQRT3, based on globalIlluminationReach
  float maxgi = mix(sampleDistanceISVS_jitter,SQRT3,giReach);
  maxdist = min(maxdist,maxgi);
  if(maxdist < EPSILON) {
    return 1.0;
  }

  float current_dist = 0.0;
  float current_step = length(sampleDistanceISVS_jitter * lightDirNormIS);
  float clamped_step = 0.0;

  vec4 scalar = vec4(0.0);
  while(current_dist < maxdist)
  {
#ifdef vtkClippingPlanesOn
    vec3 posVC = IStoVC(posIS);
    for (int i = 0; i < clip_numPlanes; ++i)
    {
      if (dot(vec3(vClipPlaneOrigins[i] - posVC), vClipPlaneNormals[i]) > 0.0)
      {
        current_dist = maxdist;
      }
    }
#endif
    scalar = getTextureValue(posIS);
    opacity = texture2D(otexture, vec2(scalar.r * oscale0 + oshift0, 0.5)).r;
    #if defined(vtkGradientOpacityOn) && !defined(UseIndependentComponents)
      vec4 normal = computeNormal(posIS, vec3(1.0/vec3(volumeDimensions)));
      opacity *= computeGradientOpacityFactor(normal.w, goscale0, goshift0, gomin0, gomax0);
    #endif
    shadow *= 1.0 - opacity;

    // optimization: early termination
    if (shadow < EPSILON){
      return 0.0;
    }

    clamped_step = min(maxdist - current_dist, current_step);
    posIS += clamped_step * lightDirNormIS;
    current_dist += current_step;
  }

  return shadow;
}

vec3 applyShadowRay(vec3 tColor, vec3 posIS, vec3 viewDirectionVC)
{
  vec3 vertLight = vec3(0.0);
  vec3 secondary_contrib = vec3(0.0);
  // here we assume only positional light, no effect of cones
  for (int i = 0; i < lightNum; i++)
  {
    #if(vtkLightComplexity==3)
      if (lightPositional[i] == 1){
        vertLight = lightPositionVC[i] - IStoVC(posIS);
      }else{
        vertLight = - lightDirectionVC[i];
      }
    #else
      vertLight = - lightDirectionVC[i];
    #endif
    // here we assume achromatic light, only intensity
    float dDotL = dot(viewDirectionVC, normalize(vertLight));
    // isotropic scatter returns 0.5 instead of 1/4pi to increase intensity
    float phase_attenuation = 0.5;
    if (abs(anisotropy) > EPSILON){
      phase_attenuation = phase_function(dDotL);
    }
    float vol_shadow = volume_shadow(posIS, normalize(rotateToIDX(vertLight)));
    secondary_contrib += tColor * vDiffuse * lightColor[i] * vol_shadow * phase_attenuation;
    secondary_contrib += tColor * vAmbient;
  }
  return secondary_contrib;
}
#endif

//=======================================================================
// local ambient occlusion
#ifdef localAmbientOcclusionOn
vec3 sample_direction_uniform(int i)
{
  float rand = random() * 0.5;
  float theta = PI2 * (kernelSample[i][0] + rand);
  float phi = acos(2.0 * (kernelSample[i][1] + rand) -1.0) / 2.5;
  return normalize(vec3(cos(theta)*sin(phi), sin(theta)*sin(phi), cos(phi)));
}

// return a matrix that transform startDir into z axis; startDir should be normalized
mat3 zBaseRotationalMatrix(vec3 startDir){
  vec3 axis = cross(startDir, vec3(0.0,0.0,1.0));
  float cosA = startDir.z;
  float k = 1.0 / (1.0 + cosA);
  mat3 matrix = mat3((axis.x * axis.x * k) + cosA, (axis.y * axis.x * k) - axis.z, (axis.z * axis.x * k) + axis.y,
              (axis.x * axis.y * k) + axis.z, (axis.y * axis.y * k) + cosA, (axis.z * axis.y * k) - axis.x,
              (axis.x * axis.z * k) - axis.y, (axis.y * axis.z * k) + axis.x, (axis.z * axis.z * k) + cosA);
  return matrix;
}

float computeLAO(vec3 posIS, float op, vec3 lightDir, vec4 normal){
  // apply LAO only at selected locations, otherwise return full brightness
  if (normal.w > 0.0 && op > 0.05){
    float total_transmittance = 0.0;
    mat3 inverseRotateBasis = inverse(zBaseRotationalMatrix(normalize(-normal.xyz)));
    vec3 currPos, randomDirStep;
    float weight, transmittance, opacity;
    for (int i = 0; i < kernelSize; i++)
    {
      randomDirStep = inverseRotateBasis * sample_direction_uniform(i) * sampleDistanceIS;
      weight = 1.0 - dot(normalize(lightDir), normalize(randomDirStep));
      currPos = posIS;
      transmittance = 1.0;
      for (int j = 0; j < kernelRadius ; j++){
        currPos += randomDirStep;
        // check if it's at clipping plane, if so return full brightness
        if (all(greaterThan(currPos, vec3(EPSILON))) && all(lessThan(currPos,vec3(1.0-EPSILON)))){
          opacity = texture2D(otexture, vec2(getTextureValue(currPos).r * oscale0 + oshift0, 0.5)).r;
          #ifdef vtkGradientOpacityOn
             opacity *= computeGradientOpacityFactor(normal.w, goscale0, goshift0, gomin0, gomax0);
          #endif
          transmittance *= 1.0 - opacity;
        }
        else{
          break;
        }
      }
      total_transmittance += transmittance / float(kernelRadius) * weight;

      // early termination if fully translucent
      if (total_transmittance > 1.0 - EPSILON){
        return 1.0;
      }
    }
    // average transmittance and reduce variance
    return clamp(total_transmittance / float(kernelSize), 0.3, 1.0);
  } else {
    return 1.0;
  }
}
#endif

//=======================================================================
// surface light contribution
#if vtkLightComplexity > 0
  void applyLighting(inout vec3 tColor, vec4 normal)
  {
    vec3 diffuse = vec3(0.0, 0.0, 0.0);
    vec3 specular = vec3(0.0, 0.0, 0.0);
    float df, sf = 0.0;
    for (int i = 0; i < lightNum; i++){
        df = abs(dot(normal.rgb, -lightDirectionVC[i]));
        diffuse += df * lightColor[i];
        sf = pow( abs(dot(lightHalfAngleVC[i],normal.rgb)), vSpecularPower);
        specular += sf * lightColor[i];
    }
    tColor.rgb = tColor.rgb*(diffuse*vDiffuse + vAmbient) + specular*vSpecular;
  }
  #ifdef SurfaceShadowOn
  #if vtkLightComplexity < 3
    vec3 applyLightingDirectional(vec3 posIS, vec4 tColor, vec4 normal)
    {
      // everything in VC
      vec3 diffuse = vec3(0.0);
      vec3 specular = vec3(0.0);
      #ifdef localAmbientOcclusionOn
        vec3 ambient = vec3(0.0);
      #endif
      vec3 vertLightDirection;
      for (int i = 0; i < lightNum; i++){
        float ndotL,vdotR;
        vertLightDirection = lightDirectionVC[i];
        ndotL = dot(normal.xyz, vertLightDirection);
        if (ndotL < 0.0 && twoSidedLighting)
        {
          ndotL = -ndotL;
        }
        if (ndotL > 0.0)
        {
          diffuse += ndotL * lightColor[i];
          //specular
          vdotR = dot(-rayDirVC, normalize(2.0 * ndotL * -normal.xyz + vertLightDirection));
          if (vdotR > 0.0)
          {
            specular += pow(vdotR, vSpecularPower) * lightColor[i];
          }
        }
        #ifdef localAmbientOcclusionOn
            ambient += computeLAO(posIS, tColor.a, vertLightDirection, normal);
        #endif
      }
      #ifdef localAmbientOcclusionOn
        return tColor.rgb * (diffuse * vDiffuse + vAmbient * ambient) + specular*vSpecular;
      #else
        return tColor.rgb * (diffuse * vDiffuse + vAmbient) + specular*vSpecular;
      #endif
    }
  #else
    vec3 applyLightingPositional(vec3 posIS, vec4 tColor, vec4 normal, vec3 posVC)
    {
      // everything in VC
      vec3 diffuse = vec3(0.0);
      vec3 specular = vec3(0.0);
      #ifdef localAmbientOcclusionOn
        vec3 ambient = vec3(0.0);
      #endif
      vec3 vertLightDirection;
      for (int i = 0; i < lightNum; i++){
        float distance,attenuation,ndotL,vdotR;
        vec3 lightDir;
        if (lightPositional[i] == 1){
          lightDir = lightDirectionVC[i];
          vertLightDirection = posVC - lightPositionVC[i];
          distance = length(vertLightDirection);
          vertLightDirection = normalize(vertLightDirection);
          attenuation = 1.0 / (lightAttenuation[i].x
                              + lightAttenuation[i].y * distance
                              + lightAttenuation[i].z * distance * distance);
          // per OpenGL standard cone angle is 90 or less for a spot light
          if (lightConeAngle[i] <= 90.0){
            float coneDot = dot(vertLightDirection, lightDir);
            if (coneDot >= cos(radians(lightConeAngle[i]))){  // if inside cone
              attenuation = attenuation * pow(coneDot, lightExponent[i]);
            }
            else {
              attenuation = 0.0;
            }
          }
          ndotL = dot(normal.xyz, vertLightDirection);
          if (ndotL < 0.0 && twoSidedLighting)
          {
            ndotL = -ndotL;
          }
          if (ndotL > 0.0)
          {
            diffuse += ndotL * attenuation * lightColor[i];
            //specular
            vdotR = dot(-rayDirVC, normalize(2.0 * ndotL * -normal.xyz + vertLightDirection));
            if (vdotR > 0.0)
            {
              specular += pow(vdotR, vSpecularPower) * attenuation * lightColor[i];
            }
          }
          #ifdef localAmbientOcclusionOn
            ambient += computeLAO(posIS, tColor.a, vertLightDirection, normal);
          #endif
        } else {
          vertLightDirection = lightDirectionVC[i];
          ndotL = dot(normal.xyz, vertLightDirection);
          if (ndotL < 0.0 && twoSidedLighting)
          {
            ndotL = -ndotL;
          }
          if (ndotL > 0.0)
          {
            diffuse += ndotL * lightColor[i];
            //specular
            vdotR = dot(-rayDirVC, normalize(2.0 * ndotL * -normal.xyz + vertLightDirection));
            if (vdotR > 0.0)
            {
              specular += pow(vdotR, vSpecularPower) * lightColor[i];
            }
          }
          #ifdef localAmbientOcclusionOn
            ambient += computeLAO(posIS, tColor.a, vertLightDirection, normal);
          #endif
        }
      }
      #ifdef localAmbientOcclusionOn
        return tColor.rgb * (diffuse * vDiffuse + vAmbient * ambient) + specular*vSpecular;
      #else
        return tColor.rgb * (diffuse * vDiffuse + vAmbient) + specular*vSpecular;
      #endif
    }
  #endif
  #endif
#endif

// LAO of surface shadows and volume shadows only work with dependent components
vec3 applyAllLightning(vec3 tColor, float alpha, vec3 posIS, vec4 normalLight) {
  #if vtkLightComplexity > 0
    // surface shadows if needed
    #ifdef SurfaceShadowOn
      #if vtkLightComplexity < 3
        vec3 tColorS = applyLightingDirectional(posIS, vec4(tColor, alpha), normalLight);
      #else
        vec3 tColorS = applyLightingPositional(posIS, vec4(tColor, alpha), normalLight, IStoVC(posIS));
      #endif
    #endif

    // volume shadows if needed
    #ifdef VolumeShadowOn
      vec3 tColorVS = applyShadowRay(tColor, posIS, rayDirVC);
    #endif

    // merge
    #ifdef VolumeShadowOn
      #ifdef SurfaceShadowOn
        // surface shadows + volumetric shadows
        float vol_coef = volumetricScatteringBlending * (1.0 - alpha / 2.0) * (1.0 - atan(normalLight.w) * INV4PI);
        tColor = (1.0-vol_coef) * tColorS + vol_coef * tColorVS;
      #else
        // volumetric shadows only
        tColor = tColorVS;
      #endif
    #else
      #ifdef SurfaceShadowOn
        // surface shadows only
        tColor = tColorS;
      #else
        // no shadows
        applyLighting(tColor, normal3);
      #endif
    #endif
  #endif
  return tColor;
}

  
vec4 getColorForValue(vec4 tValue, vec3 posIS, vec3 tstep)
{

// If labeloutline and not the edge labelmap, since in the edge labelmap blend
// we need the underlying data to sample through
#if defined(vtkImageLabelOutlineOn) && !defined(vtkLabelEdgeProjectionOn)
  vec3 centerPosIS = fragCoordToIndexSpace(gl_FragCoord); // pos in texture space
  vec4 centerValue = getTextureValue(centerPosIS);
  bool pixelOnBorder = false;
  vec4 tColor = texture2D(ctexture, vec2(centerValue.r * cscale0 + cshift0, 0.5));

  // Get alpha of segment from opacity function.
  tColor.a = texture2D(otexture, vec2(centerValue.r * oscale0 + oshift0, 0.5)).r;

  int segmentIndex = int(centerValue.r * 255.0);
  
  // Use texture sampling for outlineThickness
  float textureCoordinate = float(segmentIndex - 1) / 1024.0;
  float textureValue = texture2D(ttexture, vec2(textureCoordinate, 0.5)).r;

  int actualThickness = int(textureValue * 255.0);


  // If it is the background (segment index 0), we should quickly bail out. 
  // Previously, this was determined by tColor.a, which was incorrect as it
  // prevented the outline from appearing when the fill is 0.
  if (segmentIndex == 0){
    return vec4(0, 0, 0, 0);
  }

  // Only perform outline check on fragments rendering voxels that aren't invisible.
  // Saves a bunch of needless checks on the background.
  // TODO define epsilon when building shader?
  for (int i = -actualThickness; i <= actualThickness; i++) {
    for (int j = -actualThickness; j <= actualThickness; j++) {
      if (i == 0 || j == 0) {
        continue;
      }

      vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(i),
        gl_FragCoord.y + float(j),
        gl_FragCoord.z, gl_FragCoord.w);

      vec3 neighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);
      vec4 value = getTextureValue(neighborPosIS);

      // If any of my neighbours are not the same value as I
      // am, this means I am on the border of the segment.
      // We can break the loops
      if (any(notEqual(value, centerValue))) {
        pixelOnBorder = true;
        break;
      }
    }

    if (pixelOnBorder == true) {
      break;
    }
  }

  // If I am on the border, I am displayed at full opacity
  if (pixelOnBorder == true) {
    tColor.a = outlineOpacity;
  }

  return tColor;

#else
  // compute the normal and gradient magnitude if needed
  // We compute it as a vec4 if possible otherwise a mat4

  #ifdef UseIndependentComponents

    // sample textures
    vec3 tColor0 = texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, height0)).rgb;
    float pwfValue0 = texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, height0)).r;

    #if vtkNumComponents > 1
      vec3 tColor1 = texture2D(ctexture, vec2(tValue.g * cscale1 + cshift1, height1)).rgb;
      float pwfValue1 = texture2D(otexture, vec2(tValue.g * oscale1 + oshift1, height1)).r;

      #if vtkNumComponents > 2
        vec3 tColor2 = texture2D(ctexture, vec2(tValue.b * cscale2 + cshift2, height2)).rgb;
        float pwfValue2 = texture2D(otexture, vec2(tValue.b * oscale2 + oshift2, height2)).r;

        #if vtkNumComponents > 3
          vec3 tColor3 = texture2D(ctexture, vec2(tValue.a * cscale3 + cshift3, height3)).rgb;
          float pwfValue3 = texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, height3)).r;
        #endif
      #endif
    #endif

    #if !defined(vtkCustomComponentsColorMix)
      // default path for component color mix

      // compute the normal vectors as needed
      #if (vtkLightComplexity > 0) || defined(vtkGradientOpacityOn)
        mat4 normalMat = computeMat4Normal(posIS, tValue, tstep);
      #endif

      // compute gradient opacity factors as needed
      vec4 goFactor = vec4(1.0, 1.0 ,1.0 ,1.0);
      #if defined(vtkGradientOpacityOn)
        #if !defined(vtkComponent0Proportional)
          goFactor.x =
            computeGradientOpacityFactor(normalMat[0].a, goscale0, goshift0, gomin0, gomax0);
        #endif
        #if vtkNumComponents > 1
          #if !defined(vtkComponent1Proportional)
            goFactor.y =
              computeGradientOpacityFactor(normalMat[1].a, goscale1, goshift1, gomin1, gomax1);
          #endif
          #if vtkNumComponents > 2
            #if !defined(vtkComponent2Proportional)
              goFactor.z =
                computeGradientOpacityFactor(normalMat[2].a, goscale2, goshift2, gomin2, gomax2);
            #endif
            #if vtkNumComponents > 3
              #if !defined(vtkComponent3Proportional)
                goFactor.w =
                  computeGradientOpacityFactor(normalMat[3].a, goscale3, goshift3, gomin3, gomax3);
              #endif
            #endif
          #endif
        #endif
      #endif

      // process color and opacity for each component
      #if !defined(vtkComponent0Proportional)
        float alpha = goFactor.x*mix0*pwfValue0;
        #if vtkLightComplexity > 0
          applyLighting(tColor0, normalMat[0]);
        #endif
      #else
        tColor0 *= pwfValue0;
        float alpha = mix(pwfValue0, 1.0, (1.0 - mix0));
      #endif

      #if vtkNumComponents > 1
        #if !defined(vtkComponent1Proportional)
          alpha += goFactor.y*mix1*pwfValue1;
          #if vtkLightComplexity > 0
            applyLighting(tColor1, normalMat[1]);
          #endif
        #else
          tColor1 *= pwfValue1;
          alpha *= mix(pwfValue1, 1.0, (1.0 - mix1));
        #endif

        #if vtkNumComponents > 2
          #if !defined(vtkComponent2Proportional)
            alpha += goFactor.z*mix2*pwfValue2;
            #if vtkLightComplexity > 0
              applyLighting(tColor2, normalMat[2]);
            #endif
          #else
            tColor2 *= pwfValue2;
            alpha *= mix(pwfValue2, 1.0, (1.0 - mix2));
          #endif
        #endif

        #if vtkNumComponents > 3
          #if !defined(vtkComponent3Proportional)
            alpha += goFactor.w*mix3*pwfValue3;
            #if vtkLightComplexity > 0
              applyLighting(tColor3, normalMat[3]);
            #endif
          #else
            tColor3 *= pwfValue3;
            alpha *= mix(pwfValue3, 1.0, (1.0 - mix3));
          #endif
        #endif
      #endif

      // perform final independent blend
      vec3 tColor = mix0 * tColor0;
      #if vtkNumComponents > 1
        tColor += mix1 * tColor1;
        #if vtkNumComponents > 2
          tColor += mix2 * tColor2;
          #if vtkNumComponents > 3
            tColor += mix3 * tColor3;
          #endif
        #endif
      #endif

      return vec4(tColor, alpha);
    #else
      /*
       * Mix the color information from all the independent components to get a single rgba output
       * Gradient opactity factors and normals are not computed
       *
       * You can compute these using:
       * - computeMat4Normal: always available, compute normal only for non proportional components, used by default independent component mix
       * - computeDensityNormal & computeNormalForDensity: available if ((LightComplexity > 0) || GradientOpacityOn) && ComputeNormalFromOpacity),
       *                                                   used by dependent component color mix, see code for Additive preset in OpenGl/VolumeMapper
       * - computeGradientOpacityFactor: always available, used in a lot of places
       *
       * Using applyAllLightning() is advised for shading but some features don't work well with it (volume shadows, LAO)
       * mix0, mix1, ... are defined for each component that is used and correspond to the componentWeight
       */
      //VTK::CustomComponentsColorMix::Impl
    #endif
  #else
    // dependent components

    // compute normal if needed
    #if (vtkLightComplexity > 0) || defined(vtkGradientOpacityOn)
      // use component 3 of the opacity texture as getTextureValue() sets alpha to the opacity value
      #ifdef vtkComputeNormalFromOpacity
        vec3 scalarInterp[2];
        vec4 normal0 = computeNormalForDensity(posIS, tstep, scalarInterp, 3);
      #else
        vec4 normal0 = computeNormal(posIS, tstep);
      #endif
    #endif

    // compute gradient opacity factor enabled
    #if defined(vtkGradientOpacityOn)
      float gradientOpacity = computeGradientOpacityFactor(normal0.a, goscale0, goshift0, gomin0, gomax0);
    #else
      const float gradientOpacity = 1.0;
    #endif

    // get color and opacity
    #if vtkNumComponents == 1
      vec3 tColor = texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, 0.5)).rgb;
      float alpha = gradientOpacity*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;
      if (alpha < EPSILON){
        return vec4(0.0);
      }
    #endif
    #if vtkNumComponents == 2
      vec3 tColor = vec3(tValue.r * cscale0 + cshift0);
      float alpha = gradientOpacity*texture2D(otexture, vec2(tValue.a * oscale1 + oshift1, 0.5)).r;
    #endif
    #if vtkNumComponents == 3
      vec3 tColor;
      tColor.r = tValue.r * cscale0 + cshift0;
      tColor.g = tValue.g * cscale1 + cshift1;
      tColor.b = tValue.b * cscale2 + cshift2;
      float alpha = gradientOpacity*texture2D(otexture, vec2(tValue.a * oscale0 + oshift0, 0.5)).r;
    #endif
    #if vtkNumComponents == 4
      vec3 tColor;
      tColor.r = tValue.r * cscale0 + cshift0;
      tColor.g = tValue.g * cscale1 + cshift1;
      tColor.b = tValue.b * cscale2 + cshift2;
      float alpha = gradientOpacity*texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, 0.5)).r;
    #endif

    // lighting
    #if (vtkLightComplexity > 0)
      #ifdef vtkComputeNormalFromOpacity
        vec4 normalLight;
        if (!all(equal(normal0, vec4(0.0)))) {
          scalarInterp[0] = scalarInterp[0] * oscale0 + oshift0;
          scalarInterp[1] = scalarInterp[1] * oscale0 + oshift0;
          normalLight = computeDensityNormal(scalarInterp, 0.5, gradientOpacity);
          if (all(equal(normalLight, vec4(0.0)))) {
            normalLight = normal0;
          }
        }
      #else
        vec4 normalLight = normal0;
      #endif
      tColor = applyAllLightning(tColor, alpha, posIS, normalLight);
    #endif

    return vec4(tColor, alpha);
  #endif // dependent
#endif
}

bool valueWithinScalarRange(vec4 val, vec4 min, vec4 max) {
  bool withinRange = false;
  #if vtkNumComponents == 1
    if (val.r >= min.r && val.r <= max.r) {
      withinRange = true;
    }
  #else
    #ifdef UseIndependentComponents
      #if vtkNumComponents == 2
        if (val.r >= min.r && val.r <= max.r &&
            val.g >= min.g && val.g <= max.g) {
          withinRange = true;
        }
      #else
        if (all(greaterThanEqual(val, ipScalarRangeMin)) &&
            all(lessThanEqual(val, ipScalarRangeMax))) {
          withinRange = true;
        }
      #endif
    #endif
  #endif
  return withinRange;
}

#if vtkBlendMode == 6 
bool checkOnEdgeForNeighbor(int i, int j, int s, vec3 stepIS) {
    vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(i), gl_FragCoord.y + float(j), gl_FragCoord.z, gl_FragCoord.w);
    vec3 originalNeighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);

    bool justSawIt = false;

    vec3 neighborPosIS = originalNeighborPosIS;

    float stepsTraveled = 0.0;


    // float neighborValue;
    for (int k = 0; k < //VTK::MaximumSamplesValue /2 ; ++k) {
        ivec3 texCoord = ivec3(neighborPosIS * vec3(volumeDimensions));
        vec4 texValue = texelFetch(texture1, texCoord, 0);

        if (int(texValue.g) == s) {
            justSawIt = true;
            break;
        }
        neighborPosIS += stepIS;
    }

    if (justSawIt){
      return false;
    }

   
    neighborPosIS = originalNeighborPosIS;
    for (int k = 0; k < //VTK::MaximumSamplesValue /2 ; ++k) {
        ivec3 texCoord = ivec3(neighborPosIS * vec3(volumeDimensions));
        vec4 texValue = texelFetch(texture1, texCoord, 0);

        if (int(texValue.g) == s) {
            justSawIt = true;
            break;
        }
        neighborPosIS -= stepIS;
    }


    if (!justSawIt) {
        // onedge
        vec3 tColorSegment = texture2D(ctexture, vec2(float(s) * cscale1 + cshift1, height1)).rgb;
        float pwfValueSegment = texture2D(otexture, vec2(float(s) * oscale1 + oshift1, height1)).r;
        gl_FragData[0] = vec4(tColorSegment, pwfValueSegment);
        return true;
    }

    // not on edge
    return false;
}

#endif


//=======================================================================
// Apply the specified blend mode operation along the ray's path.
//
void applyBlend(vec3 posIS, vec3 endIS, vec3 tdims)
{
  vec3 tstep = 1.0/tdims;

  // start slightly inside and apply some jitter
  vec3 delta = endIS - posIS;
  vec3 stepIS = normalize(delta)*sampleDistanceIS;
  float raySteps = length(delta)/sampleDistanceIS;

  // Initialize arrays to false
  // avoid 0.0 jitter
  float jitter = 0.01 + 0.99*texture2D(jtexture, gl_FragCoord.xy/32.0).r;
  float stepsTraveled = jitter;

  // local vars for the loop
  vec4 color = vec4(0.0, 0.0, 0.0, 0.0);
  vec4 tValue;
  vec4 tColor;

  // if we have less than one step then pick the middle point
  // as our value
  // if (raySteps <= 1.0)
  // {
  //   posIS = (posIS + endIS)*0.5;
  // }

  // Perform initial step at the volume boundary
  // compute the scalar
  tValue = getTextureValue(posIS);
  
  #if vtkBlendMode == 6 
    if (raySteps <= 1.0)
    {
      gl_FragData[0] = getColorForValue(tValue, posIS, tstep);
      return;
    }

    vec4 value = tValue;
    posIS += (jitter*stepIS);
    vec3 maxPosIS = posIS; // Store the position of the max value
    int segmentIndex = int(value.g);
    bool originalPosHasSeenNonZero = false;

    uint bitmask = 0u;

    if (segmentIndex != 0) {
      // Tried using the segment index in an boolean array but reading 
      // from the array by dynamic indexing was horrondously slow
      // so use bit masking instead and assign 1 to the bit corresponding to the segment index
      // and later check if the bit is set via bit operations
      setBit(segmentIndex);
    }
    
    // Sample along the ray until MaximumSamplesValue,
    // ending slightly inside the total distance
    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      // If we have reached the last step, break
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar
      tValue = getTextureValue(posIS);
      segmentIndex = int(tValue.g);

      if (segmentIndex != 0) {
        originalPosHasSeenNonZero = true;
        setBit(segmentIndex);
      }

      if (tValue.r > value.r) {
        value =  tValue; // Update the max value
        maxPosIS = posIS; // Update the position where max occurred
      }

      // Otherwise, continue along the ray
      stepsTraveled++;
      posIS += stepIS;
    }

    // Perform the last step along the ray using the
    // residual distance
    posIS = endIS;
    tValue = getTextureValue(posIS);

    if (tValue.r > value.r) {
      value = tValue; // Update the max value
      maxPosIS = posIS; // Update the position where max occurred
    }  

    // If we have not seen any non-zero segments, we can return early
    // and grab color from the actual center value first component (image)
    if (!originalPosHasSeenNonZero) {
      gl_FragData[0] = getColorForValue(value, maxPosIS, tstep);
      return;
    }

    // probably we can make this configurable but for now we will use the same
    // sample distance as the original sample distance
    float neighborSampleDistanceIS = sampleDistanceIS;

    vec3 neighborRayStepsIS = stepIS;
    float neighborRaySteps = raySteps;
    bool shouldLookInAllNeighbors = false;

    float minVoxelSpacing = min(volumeSpacings[0], min(volumeSpacings[1], volumeSpacings[2]));
    vec4 base = vec4(gl_FragCoord.x, gl_FragCoord.y, gl_FragCoord.z, gl_FragCoord.w);

    vec4 baseXPlus = vec4(gl_FragCoord.x + 1.0, gl_FragCoord.y, gl_FragCoord.z, gl_FragCoord.w);
    vec4 baseYPlus = vec4(gl_FragCoord.x, gl_FragCoord.y + 1.0, gl_FragCoord.z, gl_FragCoord.w);

    vec3 baseWorld = fragCoordToWorld(base);
    vec3 baseXPlusWorld = fragCoordToWorld(baseXPlus);
    vec3 baseYPlusWorld = fragCoordToWorld(baseYPlus);

    float XPlusDiff = length(baseXPlusWorld - baseWorld);
    float YPlusDiff = length(baseYPlusWorld - baseWorld);

    float minFragSpacingWorld = min(XPlusDiff, YPlusDiff);

    for (int s = 1; s < MAX_SEGMENT_INDEX; s++) {
      // bail out quickly if the segment index has not 
      // been seen by the center segment
      if (!isBitSet(s)) {
       continue;
      }

      // Use texture sampling for outlineThickness so that we can have 
      // per segment thickness
      float textureCoordinate = float(s - 1) / 1024.0;
      float textureValue = texture2D(ttexture, vec2(textureCoordinate, 0.5)).r;

      int actualThickness = int(textureValue * 255.0);

      // check the extreme points in the neighborhood since there is a better
      // chance of finding the edge there, so that we can bail out 
      // faster if we find the edge
      bool onEdge =
          checkOnEdgeForNeighbor(-actualThickness, -actualThickness, s, stepIS) ||
          checkOnEdgeForNeighbor(actualThickness, actualThickness, s, stepIS) ||
          checkOnEdgeForNeighbor(actualThickness, -actualThickness, s, stepIS) ||
          checkOnEdgeForNeighbor(-actualThickness, +actualThickness, s, stepIS);

      if (onEdge) {
        return;
      }

      // since the next step is computationally expensive, we need to perform
      // some optimizations to avoid it if possible. One of the optimizations
      // is to check the whether the minimum of the voxel spacing is greater than 
      // the 2 * the thickness of the outline segment. If that is the case
      // then we can safely skip the next step since we can be sure that the
      // the previous 4 checks on the extreme points would caught the entirety 
      // of the all the fragments inside. i.e., this happens when we zoom out, 
      if (minVoxelSpacing > (2.0 * float(actualThickness) - 1.0) * minFragSpacingWorld) {
        continue;
      }
      
      // Loop through the rest, skipping the processed extremes and the center
      for (int i = -actualThickness; i <= actualThickness; i++) {
            for (int j = -actualThickness; j <= actualThickness; j++) {
                if (i == 0 && j == 0) continue; // Skip the center
                if (abs(i) == actualThickness && abs(j) == actualThickness) continue; // Skip corners
                if (checkOnEdgeForNeighbor(i, j, s, stepIS )) {
                    return;
                }
          }
      }
    }

    vec3 tColor0 = texture2D(ctexture, vec2(value.r * cscale0 + cshift0, height0)).rgb;
    float pwfValue0 = texture2D(otexture, vec2(value.r * oscale0 + oshift0, height0)).r;
    gl_FragData[0] = vec4(tColor0, pwfValue0);
  #endif
  #if vtkBlendMode == 0 // COMPOSITE_BLEND
    // now map through opacity and color
    tColor = getColorForValue(tValue, posIS, tstep);

    // handle very thin volumes
    if (raySteps <= 1.0)
    {
      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps);
      gl_FragData[0] = tColor;
      return;
    }

    tColor.a = 1.0 - pow(1.0 - tColor.a, jitter);
    color = vec4(tColor.rgb*tColor.a, tColor.a);
    posIS += (jitter*stepIS);

    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar
      tValue = getTextureValue(posIS);

      // now map through opacity and color
      tColor = getColorForValue(tValue, posIS, tstep);

      float mix = (1.0 - color.a);

      // this line should not be needed but nvidia seems to not handle
      // the break correctly on windows/chrome 58 angle
      //mix = mix * sign(max(raySteps - stepsTraveled - 1.0, 0.0));

      color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;
      stepsTraveled++;
      posIS += stepIS;
      if (color.a > 0.99) { color.a = 1.0; break; }
    }

    if (color.a < 0.99 && (raySteps - stepsTraveled) > 0.0)
    {
      posIS = endIS;

      // compute the scalar
      tValue = getTextureValue(posIS);

      // now map through opacity and color
      tColor = getColorForValue(tValue, posIS, tstep);
      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps - stepsTraveled);

      float mix = (1.0 - color.a);
      color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;
    }

    gl_FragData[0] = vec4(color.rgb/color.a, color.a);
  #endif
  #if vtkBlendMode == 1 || vtkBlendMode == 2
    // MAXIMUM_INTENSITY_BLEND || MINIMUM_INTENSITY_BLEND
    // Find maximum/minimum intensity along the ray.

    // Define the operation we will use (min or max)
    #if vtkBlendMode == 1
    #define OP max
    #else
    #define OP min
    #endif

    // If the clipping range is shorter than the sample distance
    // we can skip the sampling loop along the ray.
    if (raySteps <= 1.0)
    {
      gl_FragData[0] = getColorForValue(tValue, posIS, tstep);
      return;
    }

    vec4 value = tValue;
    posIS += (jitter*stepIS);

    // Sample along the ray until MaximumSamplesValue,
    // ending slightly inside the total distance
    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      // If we have reached the last step, break
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar
      tValue = getTextureValue(posIS);

      // Update the maximum value if necessary
      value = OP(tValue, value);

      // Otherwise, continue along the ray
      stepsTraveled++;
      posIS += stepIS;
    }

    // Perform the last step along the ray using the
    // residual distance
    posIS = endIS;
    tValue = getTextureValue(posIS);
    value = OP(tValue, value);

    // Now map through opacity and color
    gl_FragData[0] = getColorForValue(value, posIS, tstep);
  #endif
  #if vtkBlendMode == 3 || vtkBlendMode == 4 //AVERAGE_INTENSITY_BLEND || ADDITIVE_BLEND
    vec4 sum = vec4(0.);

    if (valueWithinScalarRange(tValue, ipScalarRangeMin, ipScalarRangeMax)) {
      sum += tValue;
    }

    if (raySteps <= 1.0) {
      gl_FragData[0] = getColorForValue(sum, posIS, tstep);
      return;
    }

    posIS += (jitter*stepIS);

    // Sample along the ray until MaximumSamplesValue,
    // ending slightly inside the total distance
    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      // If we have reached the last step, break
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar
      tValue = getTextureValue(posIS);

      // One can control the scalar range by setting the AverageIPScalarRange to disregard scalar values, not in the range of interest, from the average computation.
      // Notes:
      // - We are comparing all values in the texture to see if any of them
      //   are outside of the scalar range. In the future we might want to allow
      //   scalar ranges for each component.
      if (valueWithinScalarRange(tValue, ipScalarRangeMin, ipScalarRangeMax)) {
        // Sum the values across each step in the path
        sum += tValue;
      }
      stepsTraveled++;
      posIS += stepIS;
    }

    // Perform the last step along the ray using the
    // residual distance
    posIS = endIS;

    // compute the scalar
    tValue = getTextureValue(posIS);

    // One can control the scalar range by setting the IPScalarRange to disregard scalar values, not in the range of interest, from the average computation
    if (valueWithinScalarRange(tValue, ipScalarRangeMin, ipScalarRangeMax)) {
      sum += tValue;

      stepsTraveled++;
    }

    #if vtkBlendMode == 3 // Average
      sum /= vec4(stepsTraveled, stepsTraveled, stepsTraveled, 1.0);
    #endif

    gl_FragData[0] = getColorForValue(sum, posIS, tstep);
  #endif
  #if vtkBlendMode == 5 // RADON
    float normalizedRayIntensity = 1.0;

    // handle very thin volumes
    if (raySteps <= 1.0)
    {
      tValue = getTextureValue(posIS);
      normalizedRayIntensity = normalizedRayIntensity - sampleDistance*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;
      gl_FragData[0] = texture2D(ctexture, vec2(normalizedRayIntensity, 0.5));
      return;
    }

    posIS += (jitter*stepIS);

    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar value
      tValue = getTextureValue(posIS);

      // Convert scalar value to normalizedRayIntensity coefficient and accumulate normalizedRayIntensity
      normalizedRayIntensity = normalizedRayIntensity - sampleDistance*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;

      posIS += stepIS;
      stepsTraveled++;
    }

    // map normalizedRayIntensity to color
    gl_FragData[0] = texture2D(ctexture, vec2(normalizedRayIntensity , 0.5));

  #endif
}

//=======================================================================
// Compute a new start and end point for a given ray based
// on the provided bounded clipping plane (aka a rectangle)
void getRayPointIntersectionBounds(
  vec3 rayPos, vec3 rayDir,
  vec3 planeDir, float planeDist,
  inout vec2 tbounds, vec3 vPlaneX, vec3 vPlaneY,
  float vSize1, float vSize2)
{
  float result = dot(rayDir, planeDir);
  if (abs(result) < 1e-6)
  {
    return;
  }
  result = -1.0 * (dot(rayPos, planeDir) + planeDist) / result;
  vec3 xposVC = rayPos + rayDir*result;
  vec3 vxpos = xposVC - vOriginVC;
  vec2 vpos = vec2(
    dot(vxpos, vPlaneX),
    dot(vxpos, vPlaneY));

  // on some apple nvidia systems this does not work
  // if (vpos.x < 0.0 || vpos.x > vSize1 ||
  //     vpos.y < 0.0 || vpos.y > vSize2)
  // even just
  // if (vpos.x < 0.0 || vpos.y < 0.0)
  // fails
  // so instead we compute a value that represents in and out
  //and then compute the return using this value
  float xcheck = max(0.0, vpos.x * (vpos.x - vSize1)); //  0 means in bounds
  float check = sign(max(xcheck, vpos.y * (vpos.y - vSize2))); //  0 means in bounds, 1 = out

  tbounds = mix(
   vec2(min(tbounds.x, result), max(tbounds.y, result)), // in value
   tbounds, // out value
   check);  // 0 in 1 out
}

//=======================================================================
// given a
// - ray direction (rayDir)
// - starting point (vertexVCVSOutput)
// - bounding planes of the volume
// - optionally depth buffer values
// - far clipping plane
// compute the start/end distances of the ray we need to cast
vec2 computeRayDistances(vec3 rayDir, vec3 tdims)
{
  vec2 dists = vec2(100.0*camFar, -1.0);

  vec3 vSize = vSpacing*tdims;

  // all this is in View Coordinates
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal0, vPlaneDistance0, dists, vPlaneNormal2, vPlaneNormal4,
    vSize.y, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal1, vPlaneDistance1, dists, vPlaneNormal2, vPlaneNormal4,
    vSize.y, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal2, vPlaneDistance2, dists, vPlaneNormal0, vPlaneNormal4,
    vSize.x, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal3, vPlaneDistance3, dists, vPlaneNormal0, vPlaneNormal4,
    vSize.x, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal4, vPlaneDistance4, dists, vPlaneNormal0, vPlaneNormal2,
    vSize.x, vSize.y);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal5, vPlaneDistance5, dists, vPlaneNormal0, vPlaneNormal2,
    vSize.x, vSize.y);

  //VTK::ClipPlane::Impl

  // do not go behind front clipping plane
  dists.x = max(0.0,dists.x);

  // do not go PAST far clipping plane
  float farDist = -camThick/rayDir.z;
  dists.y = min(farDist,dists.y);

  // Do not go past the zbuffer value if set
  // This is used for intermixing opaque geometry
  //VTK::ZBuffer::Impl

  return dists;
}

//=======================================================================
// Compute the index space starting position (pos) and end
// position
//
void computeIndexSpaceValues(out vec3 pos, out vec3 endPos, vec3 rayDir, vec2 dists)
{
  // compute starting and ending values in volume space
  pos = vertexVCVSOutput + dists.x*rayDir;
  pos = pos - vOriginVC;
  // convert to volume basis and origin
  pos = vec3(
    dot(pos, vPlaneNormal0),
    dot(pos, vPlaneNormal2),
    dot(pos, vPlaneNormal4));

  endPos = vertexVCVSOutput + dists.y*rayDir;
  endPos = endPos - vOriginVC;
  endPos = vec3(
    dot(endPos, vPlaneNormal0),
    dot(endPos, vPlaneNormal2),
    dot(endPos, vPlaneNormal4));

  float delta = length(endPos - pos);

  pos *= vVCToIJK;
  endPos *= vVCToIJK;

  float delta2 = length(endPos - pos);
  sampleDistanceIS = sampleDistance*delta2/delta;
  #ifdef VolumeShadowOn
    sampleDistanceISVS = sampleDistanceIS * volumeShadowSamplingDistFactor;
  #endif
}

void main()
{

  if (cameraParallel == 1)
  {
    // Camera is parallel, so the rayDir is just the direction of the camera.
    rayDirVC = vec3(0.0, 0.0, -1.0);
  } else {
    // camera is at 0,0,0 so rayDir for perspective is just the vc coord
    rayDirVC = normalize(vertexVCVSOutput);
  }

  vec3 tdims = vec3(volumeDimensions);

  // compute the start and end points for the ray
  vec2 rayStartEndDistancesVC = computeRayDistances(rayDirVC, tdims);

  // do we need to composite? aka does the ray have any length
  // If not, bail out early
  if (rayStartEndDistancesVC.y <= rayStartEndDistancesVC.x)
  {
    discard;
  }

  // IS = Index Space
  vec3 posIS;
  vec3 endIS;
  computeIndexSpaceValues(posIS, endIS, rayDirVC, rayStartEndDistancesVC);

  // Perform the blending operation along the ray
  applyBlend(posIS, endIS, tdims);
}
`;const{vtkWarningMacro:UR,vtkErrorMacro:Wl}=un;function GR(t){switch(t){case v0.CUSTOM:return"//VTK::CustomColorMix";case v0.ADDITIVE:return`
        // compute normals
        mat4 normalMat = computeMat4Normal(posIS, tValue, tstep);
        #if (vtkLightComplexity > 0) && defined(vtkComputeNormalFromOpacity)
          vec3 scalarInterp0[2];
          vec4 normalLight0 = computeNormalForDensity(posIS, tstep, scalarInterp0, 0);
          scalarInterp0[0] = scalarInterp0[0] * oscale0 + oshift0;
          scalarInterp0[1] = scalarInterp0[1] * oscale0 + oshift0;
          normalLight0 = computeDensityNormal(scalarInterp0, height0, 1.0);

          vec3 scalarInterp1[2];
          vec4 normalLight1 = computeNormalForDensity(posIS, tstep, scalarInterp1, 1);
          scalarInterp1[0] = scalarInterp1[0] * oscale1 + oshift1;
          scalarInterp1[1] = scalarInterp1[1] * oscale1 + oshift1;
          normalLight1 = computeDensityNormal(scalarInterp1, height1, 1.0);
        #else
          vec4 normalLight0 = normalMat[0];
          vec4 normalLight1 = normalMat[1];
        #endif

        // compute opacities
        float opacity0 = pwfValue0;
        float opacity1 = pwfValue1;
        #ifdef vtkGradientOpacityOn
          float gof0 = computeGradientOpacityFactor(normalMat[0].a, goscale0, goshift0, gomin0, gomax0);
          opacity0 *= gof0;
          float gof1 = computeGradientOpacityFactor(normalMat[1].a, goscale1, goshift1, gomin1, gomax1);
          opacity1 *= gof1;
        #endif
        float opacitySum = opacity0 + opacity1;
        if (opacitySum <= 0.0) {
          return vec4(0.0);
        }

        // mix the colors and opacities
        tColor0 = applyAllLightning(tColor0, opacity0, posIS, normalLight0);
        tColor1 = applyAllLightning(tColor1, opacity1, posIS, normalLight1);
        vec3 mixedColor = (opacity0 * tColor0 + opacity1 * tColor1) / opacitySum;
        return vec4(mixedColor, min(1.0, opacitySum));
`;case v0.COLORIZE:return`
        // compute normals
        mat4 normalMat = computeMat4Normal(posIS, tValue, tstep);
        #if (vtkLightComplexity > 0) && defined(vtkComputeNormalFromOpacity)
          vec3 scalarInterp0[2];
          vec4 normalLight0 = computeNormalForDensity(posIS, tstep, scalarInterp0, 0);
          scalarInterp0[0] = scalarInterp0[0] * oscale0 + oshift0;
          scalarInterp0[1] = scalarInterp0[1] * oscale0 + oshift0;
          normalLight0 = computeDensityNormal(scalarInterp0, height0, 1.0);
        #else
          vec4 normalLight0 = normalMat[0];
        #endif

        // compute opacities
        float opacity0 = pwfValue0;
        #ifdef vtkGradientOpacityOn
          float gof0 = computeGradientOpacityFactor(normalMat[0].a, goscale0, goshift0, gomin0, gomax0);
          opacity0 *= gof0;
        #endif

        // mix the colors and opacities
        vec3 color = tColor0 * mix(vec3(1.0), tColor1, pwfValue1);
        color = applyAllLightning(color, opacity0, posIS, normalLight0);
        return vec4(color, opacity0);
`;default:return null}}function PR(t,e){e.classHierarchy.push("vtkOpenGLVolumeMapper");function n(i){[e._scalars,e._scalarOpacityFunc,e._colorTransferFunc,e._labelOutlineThicknessArray].forEach(a=>i.unregisterGraphicsResourceUser(a,t))}t.buildPass=()=>{e.zBufferTexture=null},t.zBufferPass=(i,a)=>{if(i){const o=a.getZBufferTexture();o!==e.zBufferTexture&&(e.zBufferTexture=o)}},t.opaqueZBufferPass=(i,a)=>t.zBufferPass(i,a),t.volumePass=(i,a)=>{if(i){const o=e._openGLRenderWindow;e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),o&&!o.isDeleted()&&o!==e._openGLRenderWindow&&n(o),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.jitterTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLVolume=t.getFirstAncestorOfType("vtkOpenGLVolume");const s=e.openGLVolume.getRenderable();e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer");const u=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(u.getActiveCamera()),t.renderPiece(u,s)}},t.getShaderTemplate=(i,a,o)=>{i.Vertex=VR,i.Fragment=AR,i.Geometry=""},t.useIndependentComponents=i=>{var l,p;const a=i.getIndependentComponents(),o=e.currentInput,s=(p=(l=o==null?void 0:o.getPointData())==null?void 0:l.getScalars())==null?void 0:p.getNumberOfComponents(),u=i.getColorMixPreset();return a&&s>=2||!!u},t.replaceShaderValues=(i,a,o)=>{const s=o.getProperty();let u=i.Fragment;s.getInterpolationType()===vp.LINEAR&&(u=Q.substitute(u,"//VTK::TrilinearOn","#define vtkTrilinearOn").result),t.isLabelmapOutlineRequired(o)===!0&&(u=Q.substitute(u,"//VTK::ImageLabelOutlineOn","#define vtkImageLabelOutlineOn").result),e.renderable.getBlendMode()===ar.LABELMAP_EDGE_PROJECTION_BLEND&&(u=Q.substitute(u,"//VTK::LabelEdgeProjectionOn","#define vtkLabelEdgeProjectionOn").result);const f=e.scalarTexture.getComponents();u=Q.substitute(u,"//VTK::NumComponents",`#define vtkNumComponents ${f}`).result;const h=t.useIndependentComponents(s);h&&(u=Q.substitute(u,"//VTK::IndependentComponentsOn","#define UseIndependentComponents").result);const v=[],y=[];for(let w=0;w<f;w++)s.getOpacityMode(w)===b4.PROPORTIONAL&&v.push(`#define vtkComponent${w}Proportional`),s.getForceNearestInterpolation(w)&&y.push(`#define vtkComponent${w}ForceNearest`);u=Q.substitute(u,"//VTK::vtkProportionalComponents",v.join(`
`)).result,u=Q.substitute(u,"//VTK::vtkForceNearestComponents",y.join(`
`)).result;const x=s.getColorMixPreset(),m=GR(x);m&&(u=Q.substitute(u,"//VTK::CustomComponentsColorMixOn","#define vtkCustomComponentsColorMix").result,u=Q.substitute(u,"//VTK::CustomComponentsColorMix::Impl",m).result);const g=e.currentInput.getSpatialExtent(),d=e.currentInput.getSpacing(),S=new Float64Array(3);Ke(S,(g[1]-g[0])*d[0],(g[3]-g[2])*d[1],(g[5]-g[4])*d[2]);const T=Ha(S)/t.getCurrentSampleDistance(a);u=Q.substitute(u,"//VTK::MaximumSamplesValue",`${Math.ceil(T)}`).result,u=Q.substitute(u,"//VTK::LightComplexity",`#define vtkLightComplexity ${e.lightComplexity}`).result,e.lightComplexity>0&&(e.renderable.getVolumetricScatteringBlending()>0&&(u=Q.substitute(u,"//VTK::VolumeShadowOn","#define VolumeShadowOn").result),e.renderable.getVolumetricScatteringBlending()<1&&(u=Q.substitute(u,"//VTK::SurfaceShadowOn","#define SurfaceShadowOn").result),e.renderable.getLocalAmbientOcclusion()&&s.getAmbient()>0&&(u=Q.substitute(u,"//VTK::localAmbientOcclusionOn","#define localAmbientOcclusionOn").result));const C=h?f:1;e.gopacity=!1;for(let w=0;!e.gopacity&&w<C;++w)e.gopacity||(e.gopacity=s.getUseGradientOpacity(w));e.gopacity&&(u=Q.substitute(u,"//VTK::GradientOpacityOn","#define vtkGradientOpacityOn").result),e.renderable.getComputeNormalFromOpacity()&&(u=Q.substitute(u,"//VTK::vtkComputeNormalFromOpacity","#define vtkComputeNormalFromOpacity").result),e.zBufferTexture!==null&&(u=Q.substitute(u,"//VTK::ZBuffer::Dec",["uniform sampler2D zBufferTexture;","uniform float vpZWidth;","uniform float vpZHeight;"]).result,u=Q.substitute(u,"//VTK::ZBuffer::Impl",["vec4 depthVec = texture2D(zBufferTexture, vec2(gl_FragCoord.x / vpZWidth, gl_FragCoord.y/vpZHeight));","float zdepth = (depthVec.r*256.0 + depthVec.g)/257.0;","zdepth = zdepth * 2.0 - 1.0;","if (cameraParallel == 0) {","zdepth = -2.0 * camFar * camNear / (zdepth*(camFar-camNear)-(camFar+camNear)) - camNear;}","else {",`zdepth = (zdepth + 1.0) * 0.5 * (camFar - camNear);}
`,"zdepth = -zdepth/rayDir.z;","dists.y = min(zdepth,dists.y);"]).result),u=Q.substitute(u,"//VTK::BlendMode",`${e.renderable.getBlendMode()}`).result,i.Fragment=u,t.replaceShaderLight(i,a,o),t.replaceShaderClippingPlane(i,a,o)},t.replaceShaderLight=(i,a,o)=>{if(e.lightComplexity===0)return;let s=i.Fragment,u=0;a.getLights().forEach(l=>{l.getSwitch()&&(u+=1)}),s=Q.substitute(s,"//VTK::Light::Dec",["uniform int lightNum;","uniform bool twoSidedLighting;",`uniform vec3 lightColor[${u}];`,`uniform vec3 lightDirectionVC[${u}]; // normalized`,`uniform vec3 lightHalfAngleVC[${u}];`,"//VTK::Light::Dec"],!1).result,e.lightComplexity===3&&(s=Q.substitute(s,"//VTK::Light::Dec",[`uniform vec3 lightPositionVC[${u}];`,`uniform vec3 lightAttenuation[${u}];`,`uniform float lightConeAngle[${u}];`,`uniform float lightExponent[${u}];`,`uniform int lightPositional[${u}];`],!1).result),e.renderable.getVolumetricScatteringBlending()>0&&(s=Q.substitute(s,"//VTK::VolumeShadow::Dec",["uniform float volumetricScatteringBlending;","uniform float giReach;","uniform float volumeShadowSamplingDistFactor;","uniform float anisotropy;","uniform float anisotropy2;"],!1).result),e.renderable.getLocalAmbientOcclusion()&&o.getProperty().getAmbient()>0&&(s=Q.substitute(s,"//VTK::LAO::Dec",["uniform int kernelRadius;",`uniform vec2 kernelSample[${e.renderable.getLAOKernelRadius()}];`,"uniform int kernelSize;"],!1).result),i.Fragment=s},t.replaceShaderClippingPlane=(i,a,o)=>{let s=i.Fragment;if(e.renderable.getClippingPlanes().length>0){const u=e.renderable.getClippingPlanes().length;s=Q.substitute(s,"//VTK::ClipPlane::Dec",["uniform vec3 vClipPlaneNormals[6];","uniform float vClipPlaneDistances[6];","uniform vec3 vClipPlaneOrigins[6];","uniform int clip_numPlanes;","//VTK::ClipPlane::Dec","#define vtkClippingPlanesOn"],!1).result,s=Q.substitute(s,"//VTK::ClipPlane::Impl",[`for(int i = 0; i < ${u}; i++) {`,"  float rayDirRatio = dot(rayDir, vClipPlaneNormals[i]);","  float equationResult = dot(vertexVCVSOutput, vClipPlaneNormals[i]) + vClipPlaneDistances[i];","  if (rayDirRatio == 0.0)","  {","    if (equationResult < 0.0) dists.x = dists.y;","    continue;","  }","  float result = -1.0 * equationResult / rayDirRatio;","  if (rayDirRatio < 0.0) dists.y = min(dists.y, result);","  else dists.x = max(dists.x, result);","}","//VTK::ClipPlane::Impl"],!1).result}i.Fragment=s};const r=(i,a)=>{let o=0;i.getProperty().getShade()&&e.renderable.getBlendMode()===ar.COMPOSITE_BLEND&&(o=0,e.numberOfLights=0,a.forEach(s=>{s.getSwitch()>0&&(e.numberOfLights++,o===0&&(o=1)),o===1&&(e.numberOfLights>1||s.getIntensity()!==1||!s.lightTypeIsHeadLight())&&(o=2),o<3&&s.getPositional()&&(o=3)})),o!==e.lightComplexity&&(e.lightComplexity=o,t.modified())};t.getNeedToRebuildShaders=(i,a,o)=>{var m;const s=o.getProperty();r(o,a.getLights());const u=e.scalarTexture.getComponents(),l=[],p=[];for(let g=0;g<u;g++)l.push(s.getOpacityMode(g)),p.push(s.getForceNearestInterpolation(g));const c=e.currentInput.getSpatialExtent(),f=e.currentInput.getSpacing(),h=new Float64Array(3);Ke(h,(c[1]-c[0])*f[0],(c[3]-c[2])*f[1],(c[5]-c[4])*f[2]);const v=Ha(h)/t.getCurrentSampleDistance(a),y=!!e.zBufferTexture,x={iComps:s.getIndependentComponents(),colorMixPreset:s.getColorMixPreset(),interpolationType:s.getInterpolationType(),useLabelOutline:t.isLabelmapOutlineRequired(o),numComp:u,maxSamples:v,useGradientOpacity:s.getUseGradientOpacity(0),blendMode:e.renderable.getBlendMode(),hasZBufferTexture:y,opacityModes:l,forceNearestInterps:p};return((m=i.getProgram())==null?void 0:m.getHandle())===0||i.getShaderSourceTime().getMTime()<t.getMTime()||i.getShaderSourceTime().getMTime()<e.renderable.getMTime()||!e.previousState||!J3(e.previousState,x)?(e.previousState=x,!0):!1},t.updateShaders=(i,a,o)=>{if(t.getNeedToRebuildShaders(i,a,o)){const s={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(s,a,o);const u=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(s.Vertex,s.Fragment,s.Geometry);u!==i.getProgram()&&(i.setProgram(u),i.getVAO().releaseGraphicsResources()),i.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(i.getProgram());i.getVAO().bind(),t.setMapperShaderParameters(i,a,o),t.setCameraShaderParameters(i,a,o),t.setPropertyShaderParameters(i,a,o),t.getClippingPlaneShaderParameters(i,a,o)},t.setMapperShaderParameters=(i,a,o)=>{var p;const s=i.getProgram();i.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>i.getAttributeUpdateTime().getMTime()||i.getShaderSourceTime().getMTime()>i.getAttributeUpdateTime().getMTime())&&(s.isAttributeUsed("vertexDC")&&(i.getVAO().addAttributeArray(s,i.getCABO(),"vertexDC",i.getCABO().getVertexOffset(),i.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||Wl("Error setting vertexDC in shader VAO.")),i.getAttributeUpdateTime().modified()),s.setUniformi("texture1",e.scalarTexture.getTextureUnit()),s.setUniformf("sampleDistance",t.getCurrentSampleDistance(a));const u=e.scalarTexture.getVolumeInfo(),l=e.renderable.getIpScalarRange();if((p=u==null?void 0:u.dataComputedScale)!=null&&p.length){const c=[],f=[];for(let h=0;h<4;h++)c[h]=l[0]*u.dataComputedScale[h]+u.dataComputedOffset[h],f[h]=l[1]*u.dataComputedScale[h]+u.dataComputedOffset[h],c[h]=(c[h]-u.offset[h])/u.scale[h],f[h]=(f[h]-u.offset[h])/u.scale[h];s.setUniform4f("ipScalarRangeMin",c[0],c[1],c[2],c[3]),s.setUniform4f("ipScalarRangeMax",f[0],f[1],f[2],f[3])}if(e.zBufferTexture!==null){s.setUniformi("zBufferTexture",e.zBufferTexture.getTextureUnit());const c=e._useSmallViewport?[e._smallViewportWidth,e._smallViewportHeight]:e._openGLRenderWindow.getFramebufferSize();s.setUniformf("vpZWidth",c[0]),s.setUniformf("vpZHeight",c[1])}},t.setCameraShaderParameters=(i,a,o)=>{const s=e.openGLCamera.getKeyMatrices(a),u=e.openGLVolume.getKeyMatrices();Le(e.modelToView,s.wcvc,u.mcwc);const l=i.getProgram(),p=e.openGLCamera.getRenderable(),c=p.getClippingRange();l.setUniformf("camThick",c[1]-c[0]),l.setUniformf("camNear",c[0]),l.setUniformf("camFar",c[1]);const f=e.currentInput.getBounds(),h=e.currentInput.getDimensions(),v=new Float64Array(3),y=new Float64Array(3);let x=1,m=-1,g=1,d=-1;for(let G=0;G<8;++G){if(Ke(v,f[G%2],f[2+Math.floor(G/2)%2],f[4+Math.floor(G/4)]),Re(v,v,e.modelToView),!p.getParallelProjection()){cr(y,v);const j=-c[0]/v[2];Sr(v,y,j)}Re(v,v,s.vcpc),x=Math.min(v[0],x),m=Math.max(v[0],m),g=Math.min(v[1],g),d=Math.max(v[1],d)}l.setUniformf("dcxmin",x),l.setUniformf("dcxmax",m),l.setUniformf("dcymin",g),l.setUniformf("dcymax",d),l.isUniformUsed("cameraParallel")&&l.setUniformi("cameraParallel",p.getParallelProjection());const S=e.currentInput.getSpatialExtent(),T=e.currentInput.getSpacing(),C=new Float64Array(3);Ke(C,(S[1]-S[0])*T[0],(S[3]-S[2])*T[1],(S[5]-S[4])*T[2]),l.setUniform3f("vSpacing",T[0],T[1],T[2]),Ke(v,S[0],S[2],S[4]),e.currentInput.indexToWorldVec3(v,v),Re(v,v,e.modelToView),l.setUniform3f("vOriginVC",v[0],v[1],v[2]);const w=e.currentInput.getIndexToWorld();Le(e.idxToView,e.modelToView,w),j0(e.idxNormalMatrix,s.normalMatrix,u.normalMatrix),j0(e.idxNormalMatrix,e.idxNormalMatrix,e.currentInput.getDirectionByReference());const _=Ha(C)/t.getCurrentSampleDistance(a);_>e.renderable.getMaximumSamplesPerRay()&&UR(`The number of steps required ${Math.ceil(_)} is larger than the
        specified maximum number of steps ${e.renderable.getMaximumSamplesPerRay()}.
        Please either change the
        volumeMapper sampleDistance or its maximum number of samples.`);const E=new Float64Array(3);if(Ke(E,1,1,1),S7(E,E,C),l.setUniform3f("vVCToIJK",E[0],E[1],E[2]),l.setUniform3i("volumeDimensions",h[0],h[1],h[2]),l.setUniform3f("volumeSpacings",T[0],T[1],T[2]),!e._openGLRenderWindow.getWebgl2()){const G=e.scalarTexture.getVolumeInfo();l.setUniformf("texWidth",e.scalarTexture.getWidth()),l.setUniformf("texHeight",e.scalarTexture.getHeight()),l.setUniformi("xreps",G.xreps),l.setUniformi("xstride",G.xstride),l.setUniformi("ystride",G.ystride)}const D=new Float64Array(3),O=new Float64Array(3);for(let G=0;G<6;++G){switch(G){case 1:Ke(D,-1,0,0),Ke(O,S[0],S[2],S[4]);break;case 2:Ke(D,0,1,0),Ke(O,S[1],S[3],S[5]);break;case 3:Ke(D,0,-1,0),Ke(O,S[0],S[2],S[4]);break;case 4:Ke(D,0,0,1),Ke(O,S[1],S[3],S[5]);break;case 5:Ke(D,0,0,-1),Ke(O,S[0],S[2],S[4]);break;case 0:default:Ke(D,1,0,0),Ke(O,S[1],S[3],S[5]);break}a0(D,D,e.idxNormalMatrix),Re(O,O,e.idxToView);const j=-1*bs(O,D);l.setUniform3f(`vPlaneNormal${G}`,D[0],D[1],D[2]),l.setUniformf(`vPlaneDistance${G}`,j)}if(t.isLabelmapOutlineRequired(o)){const j=e.currentInput.getWorldToIndex();l.setUniformMatrix("vWCtoIDX",j);const k=a.getActiveCamera(),[F,B]=k.getClippingRange(),$=k.getDistance();k.setClippingRange($,$+.1);const H=e.openGLCamera.getKeyMatrices(a);yt(e.projectionToWorld,H.wcpc),k.setClippingRange(F,B),e.openGLCamera.getKeyMatrices(a),l.setUniformMatrix("PCWCMatrix",e.projectionToWorld);const X=t.getRenderTargetSize();l.setUniformf("vpWidth",X[0]),l.setUniformf("vpHeight",X[1]);const J=t.getRenderTargetOffset();l.setUniformf("vpOffsetX",J[0]/X[0]),l.setUniformf("vpOffsetY",J[1]/X[1])}if(yt(e.projectionToView,s.vcpc),l.setUniformMatrix("PCVCMatrix",e.projectionToView),e.lightComplexity===0)return;let N=0;const R=[],M=[],A=[];if(a.getLights().forEach(G=>{if(G.getSwitch()>0){const k=G.getColor(),F=G.getIntensity();R[0+N*3]=k[0]*F,R[1+N*3]=k[1]*F,R[2+N*3]=k[2]*F;const B=G.getDirection();Ke(D,B[0],B[1],B[2]),a0(D,D,s.normalMatrix),cr(D,D),M[0+N*3]=D[0],M[1+N*3]=D[1],M[2+N*3]=D[2],A[0+N*3]=-.5*D[0],A[1+N*3]=-.5*D[1],A[2+N*3]=-.5*(D[2]-1),N++}}),l.setUniformi("twoSidedLighting",a.getTwoSidedLighting()),l.setUniformi("lightNum",N),l.setUniform3fv("lightColor",R),l.setUniform3fv("lightDirectionVC",M),l.setUniform3fv("lightHalfAngleVC",A),e.lightComplexity===3){N=0;const G=[],j=[],k=[],F=[],B=[];a.getLights().forEach($=>{if($.getSwitch()>0){const X=$.getAttenuationValues();j[0+N*3]=X[0],j[1+N*3]=X[1],j[2+N*3]=X[2],F[N]=$.getExponent(),k[N]=$.getConeAngle(),B[N]=$.getPositional();const J=$.getTransformedPosition();Re(J,J,e.modelToView),G[0+N*3]=J[0],G[1+N*3]=J[1],G[2+N*3]=J[2],N+=1}}),l.setUniform3fv("lightPositionVC",G),l.setUniform3fv("lightAttenuation",j),l.setUniformfv("lightConeAngle",k),l.setUniformfv("lightExponent",F),l.setUniformiv("lightPositional",B)}if(e.renderable.getVolumetricScatteringBlending()>0&&(l.setUniformf("giReach",e.renderable.getGlobalIlluminationReach()),l.setUniformf("volumetricScatteringBlending",e.renderable.getVolumetricScatteringBlending()),l.setUniformf("volumeShadowSamplingDistFactor",e.renderable.getVolumeShadowSamplingDistFactor()),l.setUniformf("anisotropy",e.renderable.getAnisotropy()),l.setUniformf("anisotropy2",e.renderable.getAnisotropy()**2)),e.renderable.getLocalAmbientOcclusion()&&o.getProperty().getAmbient()>0){const G=e.renderable.getLAOKernelSize();l.setUniformi("kernelSize",G);const j=[];for(let k=0;k<G;k++)j[k*2]=Math.random()*.5,j[k*2+1]=Math.random()*.5;l.setUniform2fv("kernelSample",j),l.setUniformi("kernelRadius",e.renderable.getLAOKernelRadius())}},t.setPropertyShaderParameters=(i,a,o)=>{const s=i.getProgram();s.setUniformi("ctexture",e.colorTexture.getTextureUnit()),s.setUniformi("otexture",e.opacityTexture.getTextureUnit()),s.setUniformi("jtexture",e.jitterTexture.getTextureUnit()),s.setUniformi("ttexture",e.labelOutlineThicknessTexture.getTextureUnit());const u=e.scalarTexture.getVolumeInfo(),l=o.getProperty(),p=e.scalarTexture.getComponents(),c=t.useIndependentComponents(l);if(c)for(let h=0;h<p;h++)s.setUniformf(`mix${h}`,o.getProperty().getComponentWeight(h));for(let h=0;h<p;h++){const v=c?h:0,y=u.scale[h],m=l.getScalarOpacity(v).getRange(),g=y/(m[1]-m[0]),d=(u.offset[h]-m[0])/(m[1]-m[0]);s.setUniformf(`oshift${h}`,d),s.setUniformf(`oscale${h}`,g);const T=l.getRGBTransferFunction(v).getRange(),C=(u.offset[h]-T[0])/(T[1]-T[0]),w=y/(T[1]-T[0]);s.setUniformf(`cshift${h}`,C),s.setUniformf(`cscale${h}`,w)}if(e.gopacity)if(c)for(let h=0;h<p;++h){const v=u.scale[h];if(l.getUseGradientOpacity(h)){const x=l.getGradientOpacityMinimumOpacity(h),m=l.getGradientOpacityMaximumOpacity(h);s.setUniformf(`gomin${h}`,x),s.setUniformf(`gomax${h}`,m);const g=[l.getGradientOpacityMinimumValue(h),l.getGradientOpacityMaximumValue(h)];s.setUniformf(`goscale${h}`,v*(m-x)/(g[1]-g[0])),s.setUniformf(`goshift${h}`,-g[0]*(m-x)/(g[1]-g[0])+x)}else s.setUniformf(`gomin${h}`,1),s.setUniformf(`gomax${h}`,1),s.setUniformf(`goscale${h}`,0),s.setUniformf(`goshift${h}`,1)}else{const h=u.scale[p-1],v=l.getGradientOpacityMinimumOpacity(0),y=l.getGradientOpacityMaximumOpacity(0);s.setUniformf("gomin0",v),s.setUniformf("gomax0",y);const x=[l.getGradientOpacityMinimumValue(0),l.getGradientOpacityMaximumValue(0)];s.setUniformf("goscale0",h*(y-v)/(x[1]-x[0])),s.setUniformf("goshift0",-x[0]*(y-v)/(x[1]-x[0])+v)}if(t.isLabelmapOutlineRequired(o)===!0){const h=o.getProperty().getLabelOutlineOpacity();s.setUniformf("outlineOpacity",h)}e.lightComplexity>0&&(s.setUniformf("vAmbient",l.getAmbient()),s.setUniformf("vDiffuse",l.getDiffuse()),s.setUniformf("vSpecular",l.getSpecular()),s.setUniformf("vSpecularPower",l.getSpecularPower()))},t.getClippingPlaneShaderParameters=(i,a,o)=>{if(e.renderable.getClippingPlanes().length>0){const s=e.openGLCamera.getKeyMatrices(a),u=[],l=[],p=[],c=e.renderable.getClippingPlanes(),f=c.length;for(let v=0;v<f;++v){const y=c[v].getNormal(),x=c[v].getOrigin();a0(y,y,s.normalMatrix),Re(x,x,s.wcvc);const m=-1*bs(x,y);u.push(y[0]),u.push(y[1]),u.push(y[2]),l.push(m),p.push(x[0]),p.push(x[1]),p.push(x[2])}const h=i.getProgram();h.setUniform3fv("vClipPlaneNormals",u),h.setUniformfv("vClipPlaneDistances",l),h.setUniform3fv("vClipPlaneOrigins",p),h.setUniformi("clip_numPlanes",f)}},t.delete=Hs(()=>{e._animationRateSubscription&&(e._animationRateSubscription.unsubscribe(),e._animationRateSubscription=null)},()=>{e._openGLRenderWindow&&n(e._openGLRenderWindow)},t.delete),t.getRenderTargetSize=()=>{if(e._useSmallViewport)return[e._smallViewportWidth,e._smallViewportHeight];const{usize:i,vsize:a}=e._openGLRenderer.getTiledSizeAndOrigin();return[i,a]},t.getRenderTargetOffset=()=>{const{lowerLeftU:i,lowerLeftV:a}=e._openGLRenderer.getTiledSizeAndOrigin();return[i,a]},t.getCurrentSampleDistance=i=>{const a=i.getVTKWindow().getInteractor(),o=e.renderable.getSampleDistance();if(a.isAnimating()){const s=e.renderable.getInteractionSampleDistanceFactor();return o*s}return o},t.renderPieceStart=(i,a)=>{const o=i.getVTKWindow().getInteractor();if(e._lastScale||(e._lastScale=e.renderable.getInitialInteractionScale()),e._useSmallViewport=!1,o.isAnimating()&&e._lastScale>1.5&&(e._useSmallViewport=!0),e._animationRateSubscription||(e._animationRateSubscription=o.onAnimationFrameRateUpdate(()=>{if(e.renderable.getAutoAdjustSampleDistances()){const u=o.getRecentAnimationFrameRate(),l=o.getDesiredUpdateRate()/u;(l>1.15||l<.85)&&(e._lastScale*=l),e._lastScale>400&&(e._lastScale=400),e._lastScale<1.5&&(e._lastScale=1.5)}else e._lastScale=e.renderable.getImageSampleDistance()*e.renderable.getImageSampleDistance()})),e._useSmallViewport){const u=e._openGLRenderWindow.getFramebufferSize(),l=1/Math.sqrt(e._lastScale);if(e._smallViewportWidth=Math.ceil(l*u[0]),e._smallViewportHeight=Math.ceil(l*u[1]),e._smallViewportHeight>u[1]&&(e._smallViewportHeight=u[1]),e._smallViewportWidth>u[0]&&(e._smallViewportWidth=u[0]),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.getGLFramebuffer()===null)e.framebuffer.create(u[0],u[1]),e.framebuffer.populateFramebuffer();else{const c=e.framebuffer.getSize();(!c||c[0]!==u[0]||c[1]!==u[1])&&(e.framebuffer.create(u[0],u[1]),e.framebuffer.populateFramebuffer())}e.framebuffer.bind();const p=e.context;p.clearColor(0,0,0,0),p.colorMask(!0,!0,!0,!0),p.clear(p.COLOR_BUFFER_BIT),p.viewport(0,0,e._smallViewportWidth,e._smallViewportHeight),e.fvp=[e._smallViewportWidth/u[0],e._smallViewportHeight/u[1]]}e.context.disable(e.context.DEPTH_TEST),t.updateBufferObjects(i,a),a.getProperty().getInterpolationType()===vp.NEAREST?(e.scalarTexture.setMinificationFilter(Se.NEAREST),e.scalarTexture.setMagnificationFilter(Se.NEAREST)):(e.scalarTexture.setMinificationFilter(Se.LINEAR),e.scalarTexture.setMagnificationFilter(Se.LINEAR)),e.zBufferTexture!==null&&e.zBufferTexture.activate()},t.renderPieceDraw=(i,a)=>{const o=e.context;e.scalarTexture.activate(),e.opacityTexture.activate(),e.labelOutlineThicknessTexture.activate(),e.colorTexture.activate(),e.jitterTexture.activate(),t.updateShaders(e.tris,i,a),o.drawArrays(o.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.scalarTexture.deactivate(),e.colorTexture.deactivate(),e.opacityTexture.deactivate(),e.labelOutlineThicknessTexture.deactivate(),e.jitterTexture.deactivate()},t.renderPieceFinish=(i,a)=>{if(e.zBufferTexture!==null&&e.zBufferTexture.deactivate(),e._useSmallViewport){if(e.framebuffer.restorePreviousBindingsAndBuffers(),e.copyShader===null){e.copyShader=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","uniform vec2 tfactor;","varying vec2 tcoord;","void main() { tcoord = vec2(vertexDC.x*0.5 + 0.5, vertexDC.y*0.5 + 0.5) * tfactor; gl_Position = vertexDC; }"].join(`
`),["//VTK::System::Dec","//VTK::Output::Dec","uniform sampler2D texture1;","varying vec2 tcoord;","void main() { gl_FragData[0] = texture2D(texture1,tcoord); }"].join(`
`),"");const l=e.copyShader;e.copyVAO=c1.newInstance(),e.copyVAO.setOpenGLRenderWindow(e._openGLRenderWindow),e.tris.getCABO().bind(),e.copyVAO.addAttributeArray(l,e.tris.getCABO(),"vertexDC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||Wl("Error setting vertexDC in copy shader VAO.")}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(e.copyShader);const o=e._openGLRenderWindow.getFramebufferSize();e.context.viewport(0,0,o[0],o[1]);const s=e.framebuffer.getColorTexture();s.activate(),e.copyShader.setUniformi("texture",s.getTextureUnit()),e.copyShader.setUniform2f("tfactor",e.fvp[0],e.fvp[1]);const u=e.context;u.blendFuncSeparate(u.ONE,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA),e.context.drawArrays(e.context.TRIANGLES,0,e.tris.getCABO().getElementCount()),s.deactivate(),u.blendFuncSeparate(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA)}},t.renderPiece=(i,a)=>{if(t.invokeEvent({type:"StartEvent"}),e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent({type:"EndEvent"}),!e.currentInput){Wl("No input!");return}t.renderPieceStart(i,a),t.renderPieceDraw(i,a),t.renderPieceFinish(i,a)},t.computeBounds=(i,a)=>{if(!t.getInput()){To(e.Bounds);return}e.bounds=t.getInput().getBounds()},t.updateBufferObjects=(i,a)=>{t.getNeedToRebuildBufferObjects(i,a)&&t.buildBufferObjects(i,a)},t.getNeedToRebuildBufferObjects=(i,a)=>{var o,s,u;return e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<a.getMTime()||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<a.getProperty().getMTime()||e.VBOBuildTime.getMTime()<e.currentInput.getMTime()||!((o=e.scalarTexture)!=null&&o.getHandle())||!((s=e.colorTexture)!=null&&s.getHandle())||!((u=e.labelOutlineThicknessTexture)!=null&&u.getHandle())},t.buildBufferObjects=(i,a)=>{var T,C;const o=e.currentInput;if(!o)return;const s=o.getPointData()&&o.getPointData().getScalars();if(!s)return;const u=a.getProperty();if(!e.jitterTexture.getHandle()){const w=new Uint8Array(1024);for(let _=0;_<32*32;++_)w[_]=255*Math.random();e.jitterTexture.setMinificationFilter(Se.LINEAR),e.jitterTexture.setMagnificationFilter(Se.LINEAR),e.jitterTexture.create2DFromRaw(32,32,1,Be.UNSIGNED_CHAR,w)}const l=s.getNumberOfComponents(),p=t.useIndependentComponents(u),c=p?l:1,f=u.getScalarOpacity(),h=e._openGLRenderWindow.getGraphicsResourceForObject(f);let v=mi(f,p,c);if(!(h!=null&&h.oglObject)||h.hash!==v){e.opacityTexture=vt.newInstance(),e.opacityTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const w=1024,_=w*2*c,E=new Float32Array(_),D=new Float32Array(w);for(let O=0;O<c;++O){const N=u.getScalarOpacity(O),R=t.getCurrentSampleDistance(i)/u.getScalarOpacityUnitDistance(O),M=N.getRange();N.getTable(M[0],M[1],w,D,1);for(let A=0;A<w;++A)E[O*w*2+A]=1-(1-D[A])**R,E[O*w*2+A+w]=E[O*w*2+A]}if(e.opacityTexture.resetFormatAndType(),e.opacityTexture.setMinificationFilter(Se.LINEAR),e.opacityTexture.setMagnificationFilter(Se.LINEAR),e._openGLRenderWindow.getWebgl2()||e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear"))e.opacityTexture.create2DFromRaw(w,2*c,1,Be.FLOAT,E);else{const O=new Uint8ClampedArray(_);for(let N=0;N<_;++N)O[N]=255*E[N];e.opacityTexture.create2DFromRaw(w,2*c,1,Be.UNSIGNED_CHAR,O)}f&&(e._openGLRenderWindow.setGraphicsResourceForObject(f,e.opacityTexture,v),f!==e._scalarOpacityFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(f,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._scalarOpacityFunc,t)),e._scalarOpacityFunc=f)}else e.opacityTexture=h.oglObject;const x=u.getRGBTransferFunction();v=mi(x,p,c);const m=e._openGLRenderWindow.getGraphicsResourceForObject(x);if(!((T=m==null?void 0:m.oglObject)!=null&&T.getHandle())||(m==null?void 0:m.hash)!==v){e.colorTexture=vt.newInstance(),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const w=1024,_=w*2*c*3,E=new Uint8ClampedArray(_),D=new Float32Array(w*3);for(let O=0;O<c;++O){const N=u.getRGBTransferFunction(O),R=N.getRange();N.getTable(R[0],R[1],w,D,1);for(let M=0;M<w*3;++M)E[O*w*6+M]=255*D[M],E[O*w*6+M+w*3]=255*D[M]}e.colorTexture.resetFormatAndType(),e.colorTexture.setMinificationFilter(Se.LINEAR),e.colorTexture.setMagnificationFilter(Se.LINEAR),e.colorTexture.create2DFromRaw(w,2*c,3,Be.UNSIGNED_CHAR,E),x&&(e._openGLRenderWindow.setGraphicsResourceForObject(x,e.colorTexture,v),x!==e._colorTransferFunc&&(e._openGLRenderWindow.registerGraphicsResourceUser(x,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._colorTransferFunc,t)),e._colorTransferFunc=x)}else e.colorTexture=m.oglObject;t.updateLabelOutlineThicknessTexture(a);const d=e._openGLRenderWindow.getGraphicsResourceForObject(s);if(v=g1(o,s),!((C=d==null?void 0:d.oglObject)!=null&&C.getHandle())||(d==null?void 0:d.hash)!==v){e.scalarTexture=vt.newInstance(),e.scalarTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const w=o.getDimensions();e.scalarTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),e.scalarTexture.resetFormatAndType(),e.scalarTexture.create3DFilterableFromDataArray(w[0],w[1],w[2],s,e.renderable.getPreferSizeOverAccuracy()),s&&(e._openGLRenderWindow.setGraphicsResourceForObject(s,e.scalarTexture,v),s!==e._scalars&&(e._openGLRenderWindow.registerGraphicsResourceUser(s,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._scalars,t)),e._scalars=s)}else e.scalarTexture=d.oglObject;if(!e.tris.getCABO().getElementCount()){const w=new Float32Array(12);for(let O=0;O<4;O++)w[O*3]=O%2*2-1,w[O*3+1]=O>1?1:-1,w[O*3+2]=-1;const _=new Uint16Array(8);_[0]=3,_[1]=0,_[2]=1,_[3]=3,_[4]=3,_[5]=0,_[6]=3,_[7]=2;const E=Ee.newInstance({numberOfComponents:3,values:w});E.setName("points");const D=Ee.newInstance({numberOfComponents:1,values:_});e.tris.getCABO().createVBO(D,"polys",zt.SURFACE,{points:E,cellOffset:0})}e.VBOBuildTime.modified()},t.updateLabelOutlineThicknessTexture=i=>{var l;const a=i.getProperty().getLabelOutlineThickness(),o=e._openGLRenderWindow.getGraphicsResourceForObject(a),s=`${a.join("-")}`;if(!((l=o==null?void 0:o.oglObject)!=null&&l.getHandle())||(o==null?void 0:o.hash)!==s){e.labelOutlineThicknessTexture=vt.newInstance(),e.labelOutlineThicknessTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const p=1024,c=1,f=p*c,h=new Uint8Array(f);for(let v=0;v<p;++v){const y=typeof a[v]<"u"?a[v]:a[0];h[v]=y}e.labelOutlineThicknessTexture.resetFormatAndType(),e.labelOutlineThicknessTexture.setMinificationFilter(Se.NEAREST),e.labelOutlineThicknessTexture.setMagnificationFilter(Se.NEAREST),e.labelOutlineThicknessTexture.create2DFromRaw(p,c,1,Be.UNSIGNED_CHAR,h),a&&(e._openGLRenderWindow.setGraphicsResourceForObject(a,e.labelOutlineThicknessTexture,s),a!==e._labelOutlineThicknessArray&&(e._openGLRenderWindow.registerGraphicsResourceUser(a,t),e._openGLRenderWindow.unregisterGraphicsResourceUser(e._labelOutlineThicknessArray,t)),e._labelOutlineThicknessArray=a)}else e.labelOutlineThicknessTexture=o.oglObject},t.isLabelmapOutlineRequired=i=>{const a=i.getProperty(),o=e.renderable;return a.getUseLabelOutline()||o.getBlendMode()===ar.LABELMAP_EDGE_PROJECTION_BLEND}}const IR={context:null,VBOBuildTime:null,scalarTexture:null,opacityTexture:null,opacityTextureString:null,colorTexture:null,colorTextureString:null,jitterTexture:null,labelOutlineThicknessTexture:null,labelOutlineThicknessTextureString:null,tris:null,framebuffer:null,copyShader:null,copyVAO:null,lastXYF:1,targetXYF:1,zBufferTexture:null,lastZBufferTexture:null,lightComplexity:0,fullViewportTime:1,idxToView:null,idxNormalMatrix:null,modelToView:null,projectionToView:null,avgWindowArea:0,avgFrameTime:0};function zR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,IR,n),He.extend(t,e,n),hr.implementBuildShadersWithReplacements(t,e,n),e.VBOBuildTime={},qe(e.VBOBuildTime,{mtime:0}),e.tris=dr.newInstance(),e.jitterTexture=vt.newInstance(),e.jitterTexture.setWrapS(Ls.REPEAT),e.jitterTexture.setWrapT(Ls.REPEAT),e.framebuffer=Hc.newInstance(),e.idxToView=ye(new Float64Array(16)),e.idxNormalMatrix=gr(new Float64Array(9)),e.modelToView=ye(new Float64Array(16)),e.projectionToView=ye(new Float64Array(16)),e.projectionToWorld=ye(new Float64Array(16)),ut(t,e,["context"]),PR(t,e)}const WR=ze(zR,"vtkOpenGLVolumeMapper");Lt("vtkVolumeMapper",WR);const{SlicingMode:a2}=D4,jR=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::Image::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  //VTK::Image::Sample

  // var computedColor: vec4<f32> = vec4<f32>(1.0,0.7, 0.5, 1.0);

//VTK::RenderEncoder::Impl

  return output;
}
`;function $R(t,e,n){if(e.apply(t)){const i=t.getIndependentComponents();return`${t.getMTime()}-${i}-${n}`}return"0"}const ln=new Float64Array(16),Zn=new Float64Array(16),Gu=new Float64Array(16),yr=new Float64Array(4),Tt=new Float64Array(4);function HR(t,e){e.classHierarchy.push("vtkWebGPUImageMapper"),t.buildPass=i=>{if(i){e.WebGPUImageSlice=t.getFirstAncestorOfType("vtkWebGPUImageSlice"),e.WebGPURenderer=e.WebGPUImageSlice.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.device=e.WebGPURenderWindow.getDevice();const a=e.WebGPURenderer.getRenderable();e.renderable.getSliceAtFocalPoint()&&e.renderable.setSliceFromCamera(a.getActiveCamera())}},t.translucentPass=i=>{i&&t.render()},t.opaquePass=i=>{i&&t.render()},t.render=()=>{e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw)},t.computePipelineHash=()=>{const i=e.currentInput.getExtent();i[0]===i[1]||i[2]===i[3]||i[4]===i[5]?(e.dimensions=2,e.pipelineHash="img2"):(e.dimensions=3,e.pipelineHash="img3")},t.updateUBO=()=>{const i=e.UBO.getSendTime(),a=e.WebGPUImageSlice.getRenderable(),o=a.getMapper();if(t.getMTime()>i||e.renderable.getMTime()>i||a.getProperty().getMTime()>i){const s=o.getInputData(),u=e.WebGPURenderer.getStabilizedCenterByReference();ye(ln),Ze(ln,ln,u);const l=a.getMatrix();Fe(Zn,l),yt(Zn,Zn),Le(ln,Zn,ln);const p=s.getWorldToIndex();Le(ln,p,ln),yt(Gu,ln),wh(Zn,[.5,.5,.5]),Le(ln,Zn,ln);const c=s.getDimensions();ye(Zn),kr(Zn,Zn,[1/c[0],1/c[1],1/c[2]]),Le(ln,Zn,ln),e.UBO.setArray("SCTCMatrix",ln);const f=e.currentInput.getExtent(),{ijkMode:h}=e.renderable.getClosestIJKAxis();let v=e.renderable.getSlice();h!==e.renderable.getSlicingMode()&&(v=e.renderable.getSliceAtPosition(v));let y=2,x=0,m=1;h===a2.I?(y=0,x=1,m=2):h===a2.J&&(y=1,x=2,m=0),yr[y]=v,yr[x]=f[x*2]-.5,yr[m]=f[m*2]-.5,yr[3]=1,Wi(yr,yr,Gu),e.UBO.setArray("Origin",yr),Tt[y]=v,Tt[x]=f[x*2+1]+.5,Tt[m]=f[m*2]-.5,Tt[3]=1,Wi(Tt,Tt,Gu),Gg(Tt,Tt,yr),Tt[3]=1,e.UBO.setArray("Axis1",Tt),Tt[y]=v,Tt[x]=f[x*2]-.5,Tt[m]=f[m*2+1]+.5,Tt[3]=1,Wi(Tt,Tt,Gu),Gg(Tt,Tt,yr),Tt[3]=1,e.UBO.setArray("Axis2",Tt);const g=[1,1,1,1],d=[0,0,0,0],S=e.textureViews[0],T=S.getTexture().getScale(),C=S.getTexture().getNumberOfComponents();for(let w=0;w<C;w++){let _=a.getProperty().getColorWindow(),E=a.getProperty().getColorLevel();const O=a.getProperty().getRGBTransferFunction(0);if(O){const N=O.getRange();_=N[1]-N[0],E=.5*(N[1]+N[0])}g[w]=T/_,d[w]=-E/_+.5}e.UBO.setArray("cScale",g),e.UBO.setArray("cShift",d),e.UBO.sendIfNeeded(e.device)}},t.updateLUTImage=()=>{const i=e.WebGPUImageSlice.getRenderable().getProperty();t.getTextureViews()[0].getTexture().getNumberOfComponents();const o=1,s=$R(i,i.getRGBTransferFunction,o);if(e.colorTextureString!==s){e.numRows=o;const u=new Uint8ClampedArray(e.numRows*2*e.rowLength*4);let l=i.getRGBTransferFunction();if(l){const p=new Float32Array(e.rowLength*3);for(let c=0;c<o;c++){l=i.getRGBTransferFunction(c);const f=l.getRange();l.getTable(f[0],f[1],e.rowLength,p,1);for(let h=0;h<e.rowLength;h++){const v=c*e.rowLength*8+h*4;u[v]=255*p[h*3],u[v+1]=255*p[h*3+1],u[v+2]=255*p[h*3+2],u[v+3]=255;for(let y=0;y<4;y++)u[v+e.rowLength*4+y]=u[v+y]}}}else for(let p=0;p<e.rowLength;++p){const c=255*p/(e.rowLength-1);u[p*4]=c,u[p*4+1]=c,u[p*4+2]=c,u[p*4+3]=255;for(let f=0;f<4;f++)u[p*4+e.rowLength*4+f]=u[p*4+f]}{const p={nativeArray:u,width:e.rowLength,height:e.numRows*2,depth:1,format:"rgba8unorm"},f=e.device.getTextureManager().getTexture(p).createView("tfunTexture");e.textureViews[1]=f}e.colorTextureString=s}};const n=t.updateBuffers;t.updateBuffers=()=>{n();const i=e.device.getTextureManager().getTextureForImageData(e.currentInput),a=e.textureViews;if(!a[0]||a[0].getTexture()!==i){const u=i.createView("imgTexture");a[0]=u}t.updateLUTImage(),t.updateUBO();const s=e.WebGPUImageSlice.getRenderable().getProperty().getInterpolationType()===Ja.NEAREST?"nearest":"linear";(!e.clampSampler||s!==e.clampSampler.getOptions().minFilter)&&(e.clampSampler=$c.newInstance({label:"clampSampler"}),e.clampSampler.create(e.device,{minFilter:s,magFilter:s}),e.additionalBindables=[e.clampSampler])};const r=t.getShaderReplacements();t.replaceShaderPosition=(i,a,o)=>{const s=a.getShaderDescription("vertex");s.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let u=s.getCode();const l=["var pos: vec4<f32> = mapperUBO.Origin +","   (vertexBC.x * 0.5 + 0.5) * mapperUBO.Axis1 + (vertexBC.y * 0.5 + 0.5) * mapperUBO.Axis2;","pos.w = 1.0;"];e.dimensions===2?l.push("var tcoord : vec2<f32> = (mapperUBO.SCTCMatrix * pos).xy;"):l.push("var tcoord : vec3<f32> = (mapperUBO.SCTCMatrix * pos).xyz;"),l.push("output.tcoordVS = tcoord;","output.Position = rendererUBO.SCPCMatrix * pos;"),u=_e.substitute(u,"//VTK::Position::Impl",l).result,s.setCode(u)},r.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderTCoord=(i,a,o)=>{const s=a.getShaderDescription("vertex");e.dimensions===2?s.addOutput("vec2<f32>","tcoordVS"):s.addOutput("vec3<f32>","tcoordVS")},r.set("replaceShaderTCoord",t.replaceShaderTCoord),t.replaceShaderImage=(i,a,o)=>{const s=a.getShaderDescription("fragment");let u=s.getCode();e.dimensions===3?u=_e.substitute(u,"//VTK::Image::Sample",["    var computedColor: vec4<f32> =","      textureSampleLevel(imgTexture, clampSampler, input.tcoordVS, 0.0);","//VTK::Image::Sample"]).result:u=_e.substitute(u,"//VTK::Image::Sample",["    var computedColor: vec4<f32> =","      textureSampleLevel(imgTexture, clampSampler, input.tcoordVS, 0.0);","//VTK::Image::Sample"]).result,u=_e.substitute(u,"//VTK::Image::Sample",["    var coord: vec2<f32> =","      vec2<f32>(computedColor.r * mapperUBO.cScale.r + mapperUBO.cShift.r, 0.5);","    computedColor = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);"]).result,s.setCode(u)},r.set("replaceShaderImage",t.replaceShaderImage)}const KR={rowLength:1024};function XR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,KR,n),ca.extend(t,e,n),t.setFragmentShaderTemplate(jR),e.UBO=gi.newInstance({label:"mapperUBO"}),e.UBO.addEntry("SCTCMatrix","mat4x4<f32>"),e.UBO.addEntry("Origin","vec4<f32>"),e.UBO.addEntry("Axis2","vec4<f32>"),e.UBO.addEntry("Axis1","vec4<f32>"),e.UBO.addEntry("cScale","vec4<f32>"),e.UBO.addEntry("cShift","vec4<f32>"),e.lutBuildTime={},qe(e.lutBuildTime,{mtime:0}),e.imagemat=ye(new Float64Array(16)),e.imagematinv=ye(new Float64Array(16)),e.VBOBuildTime={},qe(e.VBOBuildTime),HR(t,e)}const qR=ze(XR,"vtkWebGPUImageMapper");Sn("vtkImageMapper",qR);function YR(t,e){e.classHierarchy.push("vtkWebGPUImageSlice"),t.buildPass=n=>{if(!(!e.renderable||!e.renderable.getVisibility())&&n){if(!e.renderable)return;e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes()}},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children.forEach(r=>{r.traverse(n)}),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children.forEach(r=>{r.traverse(n)}),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.renderable.computeMatrix();const r=e.renderable.getMatrix(),i=n.getStabilizedCenterByReference();e.bufferShift[0]=r[3]-i[0],e.bufferShift[1]=r[7]-i[1],e.bufferShift[2]=r[11]-i[2],Fe(e.keyMatrices.bcwc,r),e.renderable.getIsIdentity()?ye(e.keyMatrices.normalMatrix):(ft(e.keyMatrices.normalMatrix,e.keyMatrices.bcwc),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,yt(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),Fe(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),Ze(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),Ze(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-i[0],-i[1],-i[2]]),e.keyMatricesTime.modified()}return e.keyMatrices}}const JR={bufferShift:void 0,keyMatrixTime:null,keyMatrices:null,propID:void 0};function QR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,JR,n),He.extend(t,e,n),e.keyMatricesTime={},qe(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},e.keyMatrixTime={},qe(e.keyMatrixTime,{mtime:0}),e.keyMatrices={mcwc:ye(new Float64Array(16))},e.bufferShift=[0,0,0,0],Ut(t,e,["propID","keyMatricesTime"]),YR(t,e)}const ZR=ze(QR,"vtkWebGPUImageSlice");Sn("vtkImageSlice",ZR);function eF(t,e){e.classHierarchy.push("vtkWebGPUVolume"),t.buildPass=i=>{!e.renderable||!e.renderable.getVisibility()||i&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),e.renderable.getMapper().update())},t.queryPass=(i,a)=>{if(i){if(!e.renderable||!e.renderable.getVisibility())return;const o=e.renderable.getMapper().getBounds();if(!o||o.length!==6||o[0]>o[1])return;a.addVolume(t)}};const n=new Float64Array(3),r=new Float64Array(3);t.getBoundingCubePoints=(i,a)=>{const o=e.renderable.getMapper().getInputData();if(!o)return;const s=o.getExtent(),u=e.renderable.getMatrix();let l=0;for(let p=4;p<6;p++){n[2]=s[p];for(let c=2;c<4;c++){n[1]=s[c];for(let f=0;f<2;f++){n[0]=s[f],o.indexToWorld(n,r);let h=a+l*3;i[h++]=u[0]*r[0]+u[1]*r[1]+u[2]*r[2]+u[3],i[h++]=u[4]*r[0]+u[5]*r[1]+u[6]*r[2]+u[7],i[h++]=u[8]*r[0]+u[9]*r[1]+u[10]*r[2]+u[11],l++}}}},t.getKeyMatrices=i=>{if(Math.max(e.renderable.getMTime(),i.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.renderable.computeMatrix();const a=e.renderable.getMatrix(),o=i.getStabilizedCenterByReference();Fe(e.keyMatrices.bcwc,a),Ze(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-o[0],-o[1],-o[2]]),e.keyMatricesTime.modified()}return e.keyMatrices}}const tF={propID:void 0,keyMatricesTime:null};function nF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,tF,n),He.extend(t,e,n),e.keyMatricesTime={},P.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={bcwc:new Float64Array(16),bcsc:new Float64Array(16)},P.get(t,e,["propID","keyMatricesTime"]),eF(t,e)}const rF=P.newInstance(nF,"vtkWebGPUVolume");Sn("vtkVolume",rF);const{vtkDebugMacro:Pu}=P;function iF(t,e){e.classHierarchy.push("vtkCamera");const n=new Float64Array(3),r=new Float64Array([0,0,-1]),i=new Float64Array([0,1,0]),a=ye(new Float64Array(16)),o=ye(new Float64Array(16)),s=new Float64Array(3),u=new Float64Array(3),l=new Float64Array(3),p=ye(new Float64Array(16)),c=ye(new Float64Array(16)),f=new Float64Array(3),h=new Float64Array(3);function v(){e.viewPlaneNormal[0]=-e.directionOfProjection[0],e.viewPlaneNormal[1]=-e.directionOfProjection[1],e.viewPlaneNormal[2]=-e.directionOfProjection[2]}t.orthogonalizeViewUp=()=>{const y=t.getViewMatrix();e.viewUp[0]=y[4],e.viewUp[1]=y[5],e.viewUp[2]=y[6],t.modified()},t.setPosition=(y,x,m)=>{y===e.position[0]&&x===e.position[1]&&m===e.position[2]||(e.position[0]=y,e.position[1]=x,e.position[2]=m,t.computeDistance(),t.modified())},t.setFocalPoint=(y,x,m)=>{y===e.focalPoint[0]&&x===e.focalPoint[1]&&m===e.focalPoint[2]||(e.focalPoint[0]=y,e.focalPoint[1]=x,e.focalPoint[2]=m,t.computeDistance(),t.modified())},t.setDistance=y=>{if(e.distance===y)return;e.distance=y,e.distance<1e-20&&(e.distance=1e-20,Pu("Distance is set to minimum."));const x=e.directionOfProjection;e.focalPoint[0]=e.position[0]+x[0]*e.distance,e.focalPoint[1]=e.position[1]+x[1]*e.distance,e.focalPoint[2]=e.position[2]+x[2]*e.distance,t.modified()},t.computeDistance=()=>{const y=e.focalPoint[0]-e.position[0],x=e.focalPoint[1]-e.position[1],m=e.focalPoint[2]-e.position[2];if(e.distance=Math.sqrt(y*y+x*x+m*m),e.distance<1e-20){e.distance=1e-20,Pu("Distance is set to minimum.");const g=e.directionOfProjection;e.focalPoint[0]=e.position[0]+g[0]*e.distance,e.focalPoint[1]=e.position[1]+g[1]*e.distance,e.focalPoint[2]=e.position[2]+g[2]*e.distance}e.directionOfProjection[0]=y/e.distance,e.directionOfProjection[1]=x/e.distance,e.directionOfProjection[2]=m/e.distance,v()},t.dolly=y=>{if(y<=0)return;const x=e.distance/y;t.setPosition(e.focalPoint[0]-x*e.directionOfProjection[0],e.focalPoint[1]-x*e.directionOfProjection[1],e.focalPoint[2]-x*e.directionOfProjection[2])},t.roll=y=>{const x=e.position,m=e.focalPoint,g=e.viewUp,d=new Float64Array([g[0],g[1],g[2],0]);ye(p);const S=new Float64Array([m[0]-x[0],m[1]-x[1],m[2]-x[2]]);Vn(p,p,gt(y),S),Wi(d,d,p),e.viewUp[0]=d[0],e.viewUp[1]=d[1],e.viewUp[2]=d[2],t.modified()},t.azimuth=y=>{const x=e.focalPoint;ye(c),Ze(c,c,x),Vn(c,c,gt(y),e.viewUp),Ze(c,c,[-x[0],-x[1],-x[2]]),Re(f,e.position,c),t.setPosition(f[0],f[1],f[2])},t.yaw=y=>{const x=e.position;ye(c),Ze(c,c,x),Vn(c,c,gt(y),e.viewUp),Ze(c,c,[-x[0],-x[1],-x[2]]),Re(h,e.focalPoint,c),t.setFocalPoint(h[0],h[1],h[2])},t.elevation=y=>{const x=e.focalPoint,m=t.getViewMatrix(),g=[-m[0],-m[1],-m[2]];ye(c),Ze(c,c,x),Vn(c,c,gt(y),g),Ze(c,c,[-x[0],-x[1],-x[2]]),Re(f,e.position,c),t.setPosition(f[0],f[1],f[2])},t.pitch=y=>{const x=e.position,m=t.getViewMatrix(),g=[m[0],m[1],m[2]];ye(c),Ze(c,c,x),Vn(c,c,gt(y),g),Ze(c,c,[-x[0],-x[1],-x[2]]),Re(h,e.focalPoint,c),t.setFocalPoint(...h)},t.zoom=y=>{y<=0||(e.parallelProjection?e.parallelScale/=y:e.viewAngle/=y,t.modified())},t.translate=(y,x,m)=>{const g=[y,x,m];rc(e.position,g,e.position),rc(e.focalPoint,g,e.focalPoint),t.computeDistance(),t.modified()},t.applyTransform=y=>{const x=[...e.viewUp,1],m=[],g=[],d=[];x[0]+=e.position[0],x[1]+=e.position[1],x[2]+=e.position[2],Wi(m,[...e.position,1],y),Wi(g,[...e.focalPoint,1],y),Wi(d,x,y),d[0]-=m[0],d[1]-=m[1],d[2]-=m[2],t.setPosition(...m.slice(0,3)),t.setFocalPoint(...g.slice(0,3)),t.setViewUp(...d.slice(0,3))},t.getThickness=()=>e.clippingRange[1]-e.clippingRange[0],t.setThickness=y=>{let x=y;x<1e-20&&(x=1e-20,Pu("Thickness is set to minimum.")),t.setClippingRange(e.clippingRange[0],e.clippingRange[0]+x)},t.setThicknessFromFocalPoint=y=>{let x=y;x<1e-20&&(x=1e-20,Pu("Thickness is set to minimum.")),t.setClippingRange(e.distance-x/2,e.distance+x/2)},t.setRoll=y=>{},t.getRoll=()=>{},t.setObliqueAngles=(y,x)=>{},t.getOrientation=()=>{},t.getOrientationWXYZ=()=>{},t.getFrustumPlanes=y=>{},t.getCameraLightTransformMatrix=y=>(ft(y,e.cameraLightTransform),y),t.computeCameraLightTransform=()=>{ft(a,t.getViewMatrix()),yt(a,a),_h(o,[e.distance,e.distance,e.distance]),Le(a,a,o),ye(e.cameraLightTransform),Ze(e.cameraLightTransform,a,[0,0,-1])},t.deepCopy=y=>{},t.physicalOrientationToWorldDirection=y=>{const x=Ig(y[0],y[1],y[2],y[3]),m=ra(),g=Ig(0,0,1,0);return O7(m,x),Pg(g,x,g),Pg(g,g,m),[g[0],g[1],g[2]]},t.getPhysicalToWorldMatrix=y=>{t.getWorldToPhysicalMatrix(y),yt(y,y)},t.getWorldToPhysicalMatrix=y=>{ye(y);const x=[3];pr(e.physicalViewNorth,e.physicalViewUp,x),y[0]=x[0],y[1]=x[1],y[2]=x[2],y[4]=e.physicalViewUp[0],y[5]=e.physicalViewUp[1],y[6]=e.physicalViewUp[2],y[8]=-e.physicalViewNorth[0],y[9]=-e.physicalViewNorth[1],y[10]=-e.physicalViewNorth[2],Fe(y,y),Ke(s,1/e.physicalScale,1/e.physicalScale,1/e.physicalScale),kr(y,y,s),Ze(y,y,e.physicalTranslation)},t.computeViewParametersFromViewMatrix=y=>{yt(a,y),Re(s,n,a),t.computeDistance();const x=e.distance;t.setPosition(s[0],s[1],s[2]),Re(u,r,a),ni(u,u,s),cr(u,u),t.setDirectionOfProjection(u[0],u[1],u[2]),Re(l,i,a),ni(l,l,s),cr(l,l),t.setViewUp(l[0],l[1],l[2]),t.setDistance(x)},t.computeViewParametersFromPhysicalMatrix=y=>{t.getWorldToPhysicalMatrix(a),Le(a,y,a),t.computeViewParametersFromViewMatrix(a)},t.setViewMatrix=y=>{e.viewMatrix=y,e.viewMatrix&&(ft(a,e.viewMatrix),t.computeViewParametersFromViewMatrix(a),Fe(e.viewMatrix,e.viewMatrix))},t.getViewMatrix=()=>{if(e.viewMatrix)return e.viewMatrix;$3(a,e.position,e.focalPoint,e.viewUp),Fe(a,a);const y=new Float64Array(16);return ft(y,a),y},t.setProjectionMatrix=y=>{e.projectionMatrix=y},t.getProjectionMatrix=(y,x,m)=>{const g=new Float64Array(16);if(ye(g),e.projectionMatrix){const T=1/e.physicalScale;return Ke(s,T,T,T),ft(g,e.projectionMatrix),kr(g,g,s),Fe(g,g),g}ye(a);const d=e.clippingRange[1]-e.clippingRange[0],S=[e.clippingRange[0]+(x+1)*d/2,e.clippingRange[0]+(m+1)*d/2];if(e.parallelProjection){const T=e.parallelScale*y,C=e.parallelScale,w=(e.windowCenter[0]-1)*T,_=(e.windowCenter[0]+1)*T,E=(e.windowCenter[1]-1)*C,D=(e.windowCenter[1]+1)*C;j3(a,w,_,E,D,S[0],S[1]),Fe(a,a)}else{if(e.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");{const T=Math.tan(gt(e.viewAngle)/2);let C,w;e.useHorizontalViewAngle===!0?(C=e.clippingRange[0]*T,w=e.clippingRange[0]*T/y):(C=e.clippingRange[0]*T*y,w=e.clippingRange[0]*T);const _=(e.windowCenter[0]-1)*C,E=(e.windowCenter[0]+1)*C,D=(e.windowCenter[1]-1)*w,O=(e.windowCenter[1]+1)*w,N=S[0],R=S[1];a[0]=2*N/(E-_),a[5]=2*N/(O-D),a[2]=(_+E)/(E-_),a[6]=(D+O)/(O-D),a[10]=-(N+R)/(R-N),a[14]=-1,a[11]=-2*N*R/(R-N),a[15]=0}}return ft(g,a),g},t.getCompositeProjectionMatrix=(y,x,m)=>{const g=t.getViewMatrix(),d=t.getProjectionMatrix(y,x,m);return Le(d,g,d),d},t.setDirectionOfProjection=(y,x,m)=>{if(e.directionOfProjection[0]===y&&e.directionOfProjection[1]===x&&e.directionOfProjection[2]===m)return;e.directionOfProjection[0]=y,e.directionOfProjection[1]=x,e.directionOfProjection[2]=m;const g=e.directionOfProjection;e.focalPoint[0]=e.position[0]+g[0]*e.distance,e.focalPoint[1]=e.position[1]+g[1]*e.distance,e.focalPoint[2]=e.position[2]+g[2]*e.distance,v()},t.setDeviceAngles=(y,x,m,g)=>{const d=[3];pr(e.physicalViewNorth,e.physicalViewUp,d);const S=ye(new Float64Array(16));Vn(S,S,gt(y),e.physicalViewUp),Vn(S,S,gt(x),d),Vn(S,S,gt(m),e.physicalViewNorth),Vn(S,S,gt(-g),e.physicalViewUp);const T=new Float64Array([-e.physicalViewUp[0],-e.physicalViewUp[1],-e.physicalViewUp[2]]),C=new Float64Array(e.physicalViewNorth);Re(T,T,S),Re(C,C,S),t.setDirectionOfProjection(T[0],T[1],T[2]),t.setViewUp(C[0],C[1],C[2]),t.modified()},t.setOrientationWXYZ=(y,x,m,g)=>{const d=ye(new Float64Array(16));if(y!==0&&(x!==0||m!==0||g!==0)){const C=gt(y),w=ra();Eh(w,[x,m,g],C),$0(d,w)}const S=new Float64Array(3);Re(S,[0,0,-1],d);const T=new Float64Array(3);Re(T,[0,1,0],d),t.setDirectionOfProjection(...S),t.setViewUp(...T),t.modified()},t.computeClippingRange=y=>{let x=null,m=null;x=e.viewPlaneNormal,m=e.position;const g=-x[0],d=-x[1],S=-x[2],T=-(g*m[0]+d*m[1]+S*m[2]),C=[g*y[0]+d*y[2]+S*y[4]+T,1e-18];for(let w=0;w<2;w++)for(let _=0;_<2;_++)for(let E=0;E<2;E++){const D=g*y[E]+d*y[2+_]+S*y[4+w]+T;C[0]=D<C[0]?D:C[0],C[1]=D>C[1]?D:C[1]}return C}}const aF={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,cameraLightTransform:xh(),physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function M4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,aF,n),P.obj(t,e),P.get(t,e,["distance"]),P.setGet(t,e,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),P.getArray(t,e,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),P.setGetArray(t,e,["clippingRange","windowCenter"],2),P.setGetArray(t,e,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),iF(t,e)}const oF=P.newInstance(M4,"vtkCamera");var sF={newInstance:oF,extend:M4};const uF=["HeadLight","CameraLight","SceneLight"];function cF(t,e){e.classHierarchy.push("vtkLight");const n=new Float64Array(3);t.getTransformedPosition=()=>(e.transformMatrix?Re(n,e.position,e.transformMatrix):Ke(n,e.position[0],e.position[1],e.position[2]),n),t.getTransformedFocalPoint=()=>(e.transformMatrix?Re(n,e.focalPoint,e.transformMatrix):Ke(n,e.focalPoint[0],e.focalPoint[1],e.focalPoint[2]),n),t.getDirection=()=>(e.directionMTime<e.mtime&&(Hf(e.direction,e.focalPoint,e.position),aa(e.direction),e.directionMTime=e.mtime),e.direction),t.setDirection=r=>{const i=new Float64Array(3);Hf(i,e.position,r),e.focalPoint=i},t.setDirectionAngle=(r,i)=>{const a=gt(r),o=gt(i);t.setPosition(Math.cos(a)*Math.sin(o),Math.sin(a),Math.cos(a)*Math.cos(o)),t.setFocalPoint(0,0,0),t.setPositional(0)},t.setLightTypeToHeadLight=()=>{t.setLightType("HeadLight")},t.setLightTypeToCameraLight=()=>{t.setLightType("CameraLight")},t.setLightTypeToSceneLight=()=>{t.setTransformMatrix(null),t.setLightType("SceneLight")},t.lightTypeIsHeadLight=()=>e.lightType==="HeadLight",t.lightTypeIsSceneLight=()=>e.lightType==="SceneLight",t.lightTypeIsCameraLight=()=>e.lightType==="CameraLight"}const lF={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,coneFalloff:5,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function R4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,lF,n),P.obj(t,e),P.setGet(t,e,["intensity","switch","positional","exponent","coneAngle","coneFalloff","transformMatrix","lightType","shadowAttenuation","attenuationValues"]),P.setGetArray(t,e,["color","position","focalPoint","attenuationValues"],3),cF(t,e)}const fF=P.newInstance(R4,"vtkLight");var pF={newInstance:fF,extend:R4,LIGHT_TYPES:uF};const{vtkErrorMacro:y0}=P;function hF(t){return()=>y0(`vtkViewport::${t} - NOT IMPLEMENTED`)}function gF(t,e){e.classHierarchy.push("vtkViewport"),t.getViewProps=()=>e.props,t.hasViewProp=r=>e.props.includes(r),t.addViewProp=r=>{r&&!t.hasViewProp(r)&&e.props.push(r)},t.removeViewProp=r=>{const i=e.props.filter(a=>a!==r);e.props.length!==i.length&&(e.props=i)},t.removeAllViewProps=()=>{e.props=[]};function n(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];i.push(r);const a=r.getNestedProps();if(a&&a.length)for(let o=0;o<a.length;o++)n(a[o],i);return i}t.getViewPropsWithNestedProps=()=>{const r=[];for(let i=0;i<e.props.length;i++)n(e.props[i],r);return r},t.addActor2D=t.addViewProp,t.removeActor2D=r=>{t.removeViewProp(r)},t.getActors2D=()=>(e.actors2D=[],e.props.forEach(r=>{e.actors2D=e.actors2D.concat(r.getActors2D())}),e.actors2D),t.displayToView=()=>y0("call displayToView on your view instead"),t.viewToDisplay=()=>y0("callviewtodisplay on your view instead"),t.getSize=()=>y0("call getSize on your View instead"),t.normalizedDisplayToProjection=(r,i,a)=>{const o=t.normalizedDisplayToNormalizedViewport(r,i,a);return t.normalizedViewportToProjection(o[0],o[1],o[2])},t.normalizedDisplayToNormalizedViewport=(r,i,a)=>{const o=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[(r-e.viewport[0])/o[0],(i-e.viewport[1])/o[1],a]},t.normalizedViewportToProjection=(r,i,a)=>[r*2-1,i*2-1,a*2-1],t.projectionToNormalizedDisplay=(r,i,a)=>{const o=t.projectionToNormalizedViewport(r,i,a);return t.normalizedViewportToNormalizedDisplay(o[0],o[1],o[2])},t.normalizedViewportToNormalizedDisplay=(r,i,a)=>{const o=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[r*o[0]+e.viewport[0],i*o[1]+e.viewport[1],a]},t.projectionToNormalizedViewport=(r,i,a)=>[(r+1)*.5,(i+1)*.5,(a+1)*.5],t.PickPropFrom=hF("PickPropFrom")}const dF={background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function F4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dF,n),P.obj(t,e),P.event(t,e,"event"),P.setGetArray(t,e,["viewport"],4),P.setGetArray(t,e,["background","background2"],3),gF(t,e)}const vF=P.newInstance(F4,"vtkViewport");var yF={newInstance:vF,extend:F4};const{vtkDebugMacro:Fo,vtkErrorMacro:Hr,vtkWarningMacro:mF}=un;function o2(t){return()=>Hr(`vtkRenderer::${t} - NOT IMPLEMENTED`)}function xF(t,e){e.classHierarchy.push("vtkRenderer");const n={type:"ComputeVisiblePropBoundsEvent",renderer:t},r={type:"ResetCameraClippingRangeEvent",renderer:t},i={type:"ResetCameraEvent",renderer:t};t.updateCamera=()=>(e.activeCamera||(Fo("No cameras are on, creating one."),t.getActiveCameraAndResetIfCreated()),e.activeCamera.render(t),!0),t.updateLightsGeometryToFollowCamera=()=>{const a=t.getActiveCameraAndResetIfCreated();e.lights.forEach(o=>{o.lightTypeIsSceneLight()||(o.lightTypeIsHeadLight()?(o.setPositionFrom(a.getPositionByReference()),o.setFocalPointFrom(a.getFocalPointByReference()),o.modified(a.getMTime())):o.lightTypeIsCameraLight()?o.setTransformMatrix(a.getCameraLightTransformMatrix(xh())):Hr("light has unknown light type",o.get()))})},t.updateLightGeometry=()=>e.lightFollowCamera?t.updateLightsGeometryToFollowCamera():!0,t.allocateTime=o2("allocateTime"),t.updateGeometry=o2("updateGeometry"),t.getVTKWindow=()=>e._renderWindow,t.setLayer=a=>{Fo(t.getClassName(),t,"setting Layer to ",a),e.layer!==a&&(e.layer=a,t.modified()),t.setPreserveColorBuffer(!!a)},t.setActiveCamera=a=>e.activeCamera===a?!1:(e.activeCamera=a,t.modified(),t.invokeEvent({type:"ActiveCameraEvent",camera:a}),!0),t.makeCamera=()=>{const a=sF.newInstance();return t.invokeEvent({type:"CreateCameraEvent",camera:a}),a},t.getActiveCamera=()=>(e.activeCamera||(e.activeCamera=t.makeCamera()),e.activeCamera),t.getActiveCameraAndResetIfCreated=()=>(e.activeCamera||(t.getActiveCamera(),t.resetCamera()),e.activeCamera),t.getActors=()=>(e.actors=[],e.props.forEach(a=>{e.actors=e.actors.concat(a.getActors())}),e.actors),t.addActor=t.addViewProp,t.removeActor=a=>{e.actors=e.actors.filter(o=>o!==a),t.removeViewProp(a),t.modified()},t.removeAllActors=()=>{t.getActors().forEach(o=>{t.removeViewProp(o)}),e.actors=[],t.modified()},t.getVolumes=()=>(e.volumes=[],e.props.forEach(a=>{e.volumes=e.volumes.concat(a.getVolumes())}),e.volumes),t.addVolume=t.addViewProp,t.removeVolume=a=>{e.volumes=e.volumes.filter(o=>o!==a),t.removeViewProp(a),t.modified()},t.removeAllVolumes=()=>{t.getVolumes().forEach(o=>{t.removeViewProp(o)}),e.volumes=[],t.modified()},t.hasLight=a=>e.lights.includes(a),t.addLight=a=>{a&&!t.hasLight(a)&&(e.lights.push(a),t.modified())},t.removeLight=a=>{e.lights=e.lights.filter(o=>o!==a),t.modified()},t.removeAllLights=()=>{e.lights=[],t.modified()},t.setLightCollection=a=>{e.lights=a,t.modified()},t.makeLight=pF.newInstance,t.createLight=()=>{e.automaticLightCreation&&(e._createdLight&&(t.removeLight(e._createdLight),e._createdLight.delete(),e._createdLight=null),e._createdLight=t.makeLight(),t.addLight(e._createdLight),e._createdLight.setLightTypeToHeadLight(),e._createdLight.setPosition(t.getActiveCamera().getPosition()),e._createdLight.setFocalPoint(t.getActiveCamera().getFocalPoint()))},t.normalizedDisplayToWorld=(a,o,s,u)=>{let l=t.normalizedDisplayToProjection(a,o,s);return l=t.projectionToView(l[0],l[1],l[2],u),t.viewToWorld(l[0],l[1],l[2])},t.worldToNormalizedDisplay=(a,o,s,u)=>{let l=t.worldToView(a,o,s);return l=t.viewToProjection(l[0],l[1],l[2],u),t.projectionToNormalizedDisplay(l[0],l[1],l[2])},t.viewToWorld=(a,o,s)=>{if(e.activeCamera===null)return Hr("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const u=e.activeCamera.getViewMatrix();yt(u,u),Fe(u,u);const l=new Float64Array([a,o,s]);return Re(l,l,u),l},t.projectionToView=(a,o,s,u)=>{if(e.activeCamera===null)return Hr("ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0"),[0,0,0];const l=e.activeCamera.getProjectionMatrix(u,-1,1);yt(l,l),Fe(l,l);const p=new Float64Array([a,o,s]);return Re(p,p,l),p},t.worldToView=(a,o,s)=>{if(e.activeCamera===null)return Hr("WorldToView: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const u=e.activeCamera.getViewMatrix();Fe(u,u);const l=new Float64Array([a,o,s]);return Re(l,l,u),l},t.viewToProjection=(a,o,s,u)=>{if(e.activeCamera===null)return Hr("ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0"),[0,0,0];const l=e.activeCamera.getProjectionMatrix(u,-1,1);Fe(l,l);const p=new Float64Array([a,o,s]);return Re(p,p,l),p},t.computeVisiblePropBounds=()=>{e.allBounds[0]=Ye.INIT_BOUNDS[0],e.allBounds[1]=Ye.INIT_BOUNDS[1],e.allBounds[2]=Ye.INIT_BOUNDS[2],e.allBounds[3]=Ye.INIT_BOUNDS[3],e.allBounds[4]=Ye.INIT_BOUNDS[4],e.allBounds[5]=Ye.INIT_BOUNDS[5];let a=!0;t.invokeEvent(n);for(let o=0;o<e.props.length;++o){const s=e.props[o];if(s.getVisibility()&&s.getUseBounds()){const u=s.getBounds();u&&h0(u)&&(a=!1,u[0]<e.allBounds[0]&&(e.allBounds[0]=u[0]),u[1]>e.allBounds[1]&&(e.allBounds[1]=u[1]),u[2]<e.allBounds[2]&&(e.allBounds[2]=u[2]),u[3]>e.allBounds[3]&&(e.allBounds[3]=u[3]),u[4]<e.allBounds[4]&&(e.allBounds[4]=u[4]),u[5]>e.allBounds[5]&&(e.allBounds[5]=u[5]))}}return a&&(To(e.allBounds),Fo("Can't compute bounds, no 3D props are visible")),e.allBounds},t.resetCamera=function(){const o=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds(),s=[0,0,0];if(!h0(o))return Fo("Cannot reset camera!"),!1;let u=null;if(t.getActiveCamera())u=e.activeCamera.getViewPlaneNormal();else return Hr("Trying to reset non-existent camera"),!1;e.activeCamera.setViewAngle(30),s[0]=(o[0]+o[1])/2,s[1]=(o[2]+o[3])/2,s[2]=(o[4]+o[5])/2;let l=o[1]-o[0],p=o[3]-o[2],c=o[5]-o[4];l*=l,p*=p,c*=c;let f=l+p+c;f=f===0?1:f,f=Math.sqrt(f)*.5;const h=gt(e.activeCamera.getViewAngle()),v=f,y=f/Math.sin(h*.5),x=e.activeCamera.getViewUp();return Math.abs(Oe(x,u))>.999&&(mF("Resetting view-up since view plane normal is parallel"),e.activeCamera.setViewUp(-x[2],x[0],x[1])),e.activeCamera.setFocalPoint(s[0],s[1],s[2]),e.activeCamera.setPosition(s[0]+y*u[0],s[1]+y*u[1],s[2]+y*u[2]),t.resetCameraClippingRange(o),e.activeCamera.setParallelScale(v),e.activeCamera.setPhysicalScale(f),e.activeCamera.setPhysicalTranslation(-s[0],-s[1],-s[2]),t.invokeEvent(i),!0},t.resetCameraClippingRange=function(){const o=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds();if(!h0(o))return Fo("Cannot reset camera clipping range!"),!1;if(t.getActiveCameraAndResetIfCreated(),!e.activeCamera)return Hr("Trying to reset clipping range of non-existent camera"),!1;const s=e.activeCamera.computeClippingRange(o);let u=0;if(e.activeCamera.getParallelProjection())u=.2*e.activeCamera.getParallelScale();else{const l=gt(e.activeCamera.getViewAngle());u=.2*Math.tan(l/2)*s[1]}return s[1]-s[0]<u&&(u=u-s[1]+s[0],s[1]+=u/2,s[0]-=u/2),s[0]<0&&(s[0]=0),s[0]=.99*s[0]-(s[1]-s[0])*e.clippingRangeExpansion,s[1]=1.01*s[1]+(s[1]-s[0])*e.clippingRangeExpansion,s[0]=s[0]>=s[1]?.01*s[1]:s[0],e.nearClippingPlaneTolerance||(e.nearClippingPlaneTolerance=.01),s[0]<e.nearClippingPlaneTolerance*s[1]&&(s[0]=e.nearClippingPlaneTolerance*s[1]),e.activeCamera.setClippingRange(s[0],s[1]),t.invokeEvent(r),!1},t.setRenderWindow=a=>{a!==e._renderWindow&&(e._vtkWindow=a,e._renderWindow=a)},t.visibleActorCount=()=>e.props.filter(a=>a.getVisibility()).length,t.visibleVolumeCount=t.visibleActorCount,t.getMTime=()=>{let a=e.mtime;const o=e.activeCamera?e.activeCamera.getMTime():0;o>a&&(a=o);const s=e._createdLight?e._createdLight.getMTime():0;return s>a&&(a=s),a},t.getTransparent=()=>!!e.preserveColorBuffer,t.isActiveCameraCreated=()=>!!e.activeCamera}const SF={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:Js(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,environmentTexture:null,environmentTextureDiffuseStrength:1,environmentTextureSpecularStrength:1,useEnvironmentTextureAsBackground:!1,pass:0};function L4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(Object.assign(e,SF,n),yF.extend(t,e,n),e.background||(e.background=[0,0,0,1]);e.background.length<3;)e.background.push(0);e.background.length===3&&e.background.push(1),Ut(t,e,["_renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),ut(t,e,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","environmentTexture","environmentTextureDiffuseStrength","environmentTextureSpecularStrength","useEnvironmentTextureAsBackground","useShadows","pass"]),So(t,e,["actors","volumes","lights"]),bh(t,e,["background"],4,1),$s(t,e,["renderWindow"]),xF(t,e)}const TF=ze(L4,"vtkRenderer");var CF={newInstance:TF,extend:L4};const wF="WebGL",gc=Object.create(null);function d1(t,e){gc[t]=e}function _F(){return Object.keys(gc)}function k4(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return gc[t]&&gc[t](e)}function EF(t,e){e.classHierarchy.push("vtkRenderWindow"),t.addRenderer=n=>{t.hasRenderer(n)||(n.setRenderWindow(t),e.renderers.push(n),t.modified())},t.removeRenderer=n=>{e.renderers=e.renderers.filter(r=>r!==n),t.modified()},t.hasRenderer=n=>e.renderers.indexOf(n)!==-1,t.newAPISpecificView=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return k4(n||e.defaultViewAPI,r)},t.addView=n=>{t.hasView(n)||(n.setRenderable(t),e._views.push(n),t.modified())},t.removeView=n=>{e._views=e._views.filter(r=>r!==n),t.modified()},t.hasView=n=>e._views.indexOf(n)!==-1,t.preRender=()=>{e.renderers.forEach(n=>{n.isActiveCameraCreated()||n.resetCamera()})},t.render=()=>{t.preRender(),e.interactor?e.interactor.render():e._views.forEach(n=>n.traverseAllPasses())},t.getStatistics=()=>{const n={propCount:0,invisiblePropCount:0,gpuMemoryMB:0};return e._views.forEach(r=>{r.getGraphicsMemoryInfo&&(n.gpuMemoryMB+=r.getGraphicsMemoryInfo()/1e6)}),e.renderers.forEach(r=>{const i=r.getViewProps(),a=e._views[0].getViewNodeFor(r);i.forEach(o=>{if(o.getVisibility()){n.propCount+=1;const s=o.getMapper&&o.getMapper();if(s&&s.getPrimitiveCount){const u=a.getViewNodeFor(s);if(u){u.getAllocatedGPUMemoryInBytes&&(n.gpuMemoryMB+=u.getAllocatedGPUMemoryInBytes()/1e6);const l=s.getPrimitiveCount();Object.keys(l).forEach(p=>{n[p]||(n[p]=0),n[p]+=l[p]})}}}else n.invisiblePropCount+=1})}),n.str=Object.keys(n).map(r=>`${r}: ${n[r]}`).join(`
`),n},t.captureImages=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return P.setImmediate(t.render),e._views.map(i=>i.captureNextImage?i.captureNextImage(n,r):void 0).filter(i=>!!i)},t.addRenderWindow=n=>e.childRenderWindows.includes(n)?!1:(e.childRenderWindows.push(n),t.modified(),!0),t.removeRenderWindow=n=>{const r=e.childRenderWindows.findIndex(i=>i===n);return r<0?!1:(e.childRenderWindows.splice(r,1),t.modified(),!0)}}const DF={defaultViewAPI:wF,renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1,childRenderWindows:[]};function B4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,DF,n),P.obj(t,e),P.setGet(t,e,["interactor","numberOfLayers","_views","defaultViewAPI"]),P.get(t,e,["neverRendered"]),P.getArray(t,e,["renderers","childRenderWindows"]),P.moveToProtected(t,e,["views"]),P.event(t,e,"completion"),EF(t,e)}const OF=P.newInstance(B4,"vtkRenderWindow");var bF={newInstance:OF,extend:B4,registerViewConstructor:d1,listViewAPIs:_F,newAPISpecificView:k4};const yp={Unknown:0,LeftController:1,RightController:2},Ko={Unknown:0,Trigger:1,TrackPad:2,Grip:3,Thumbstick:4,A:5,B:6,ApplicationMenu:7},NF={Unknown:0,TouchpadX:1,TouchpadY:2,ThumbstickX:3,ThumbstickY:4};var V4={Device:yp,Input:Ko,Axis:NF};const{Device:Iu,Input:Bi}=V4,{vtkWarningMacro:zu,vtkErrorMacro:Wu,normalizeWheel:MF,vtkOnceErrorMacro:RF}=P,Ta={ctrlKey:!1,altKey:!1,shiftKey:!1},jl={"xr-standard":[Bi.Trigger,Bi.Grip,Bi.TrackPad,Bi.Thumbstick,Bi.A,Bi.B]},v1=["StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"];function Lo(t){t.cancelable&&t.preventDefault()}function ju(t){const e=Object.create(null);return t.forEach(n=>{let{pointerId:r,position:i}=n;e[r]=i}),e}function FF(t,e){e.classHierarchy.push("vtkRenderWindowInteractor");const n={...t},r=new Set,i=new Map;let a=1;t.start=()=>{!e.initialized&&(t.initialize(),!e.initialized)||t.startEventLoop()},t.setRenderWindow=y=>{Wu("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},t.setInteractorStyle=y=>{e.interactorStyle!==y&&(e.interactorStyle!=null&&e.interactorStyle.setInteractor(null),e.interactorStyle=y,e.interactorStyle!=null&&e.interactorStyle.getInteractor()!==t&&e.interactorStyle.setInteractor(t))},t.initialize=()=>{e.initialized=!0,t.enable(),t.render()},t.enable=()=>t.setEnabled(!0),t.disable=()=>t.setEnabled(!1),t.startEventLoop=()=>zu("empty event loop");function o(y,x){e._forcedRenderer||(e.currentRenderer=t.findPokedRenderer(y,x))}t.getCurrentRenderer=()=>(e.currentRenderer||o(0,0),e.currentRenderer);function s(y){const x=e._view.getCanvas(),m=x.getBoundingClientRect(),g=x.width/m.width,d=x.height/m.height,S={x:g*(y.clientX-m.left),y:d*(m.height-y.clientY+m.top),z:0};return(i.size<=1||!e.currentRenderer)&&o(S.x,S.y),S}const u=e._getScreenEventPositionFor||s;function l(y){return{controlKey:y.ctrlKey,altKey:y.altKey,shiftKey:y.shiftKey}}function p(y){const x=l(y);return{key:y.key,keyCode:y.charCode,...x}}function c(y){return y.pointerType||""}const f=()=>{if(e.container===null)return;const{container:y}=e;y.addEventListener("contextmenu",Lo),y.addEventListener("wheel",t.handleWheel),y.addEventListener("DOMMouseScroll",t.handleWheel),y.addEventListener("pointerenter",t.handlePointerEnter),y.addEventListener("pointerleave",t.handlePointerLeave),y.addEventListener("pointermove",t.handlePointerMove,{passive:!1}),y.addEventListener("pointerdown",t.handlePointerDown,{passive:!1}),y.addEventListener("pointerup",t.handlePointerUp),y.addEventListener("pointercancel",t.handlePointerCancel),document.addEventListener("keypress",t.handleKeyPress),document.addEventListener("keydown",t.handleKeyDown),document.addEventListener("keyup",t.handleKeyUp),document.addEventListener("pointerlockchange",t.handlePointerLockChange),y.style.touchAction="none",y.style.userSelect="none",y.style.webkitTapHighlightColor="rgba(0,0,0,0)"};t.bindEvents=y=>{if(y===null)return;n.setContainer(y)&&f()};const h=()=>{clearTimeout(e.moveTimeoutID),clearTimeout(e.wheelTimeoutID),e.moveTimeoutID=0,e.wheelTimeoutID=0,a=1;const{container:y}=e;y&&(y.removeEventListener("contextmenu",Lo),y.removeEventListener("wheel",t.handleWheel),y.removeEventListener("DOMMouseScroll",t.handleWheel),y.removeEventListener("pointerenter",t.handlePointerEnter),y.removeEventListener("pointerleave",t.handlePointerLeave),y.removeEventListener("pointermove",t.handlePointerMove,{passive:!1}),y.removeEventListener("pointerdown",t.handlePointerDown,{passive:!1}),y.removeEventListener("pointerup",t.handlePointerUp),y.removeEventListener("pointercancel",t.handlePointerCancel)),document.removeEventListener("keypress",t.handleKeyPress),document.removeEventListener("keydown",t.handleKeyDown),document.removeEventListener("keyup",t.handleKeyUp),document.removeEventListener("pointerlockchange",t.handlePointerLockChange),i.clear()};t.unbindEvents=()=>{h(),n.setContainer(null)},t.handleKeyPress=y=>{const x=p(y);t.keyPressEvent(x)},t.handleKeyDown=y=>{const x=p(y);t.keyDownEvent(x)},t.handleKeyUp=y=>{const x=p(y);t.keyUpEvent(x)},t.handlePointerEnter=y=>{const x={...l(y),position:u(y),deviceType:c(y)};t.pointerEnterEvent(x),x.deviceType==="mouse"&&t.mouseEnterEvent(x)},t.handlePointerLeave=y=>{const x={...l(y),position:u(y),deviceType:c(y)};t.pointerLeaveEvent(x),x.deviceType==="mouse"&&t.mouseLeaveEvent(x)},t.handlePointerDown=y=>{if(!(y.button>2||t.isPointerLocked()))switch(e.preventDefaultOnPointerDown&&Lo(y),y.target.hasPointerCapture(y.pointerId)&&y.target.releasePointerCapture(y.pointerId),e.container.setPointerCapture(y.pointerId),i.has(y.pointerId)&&zu("[RenderWindowInteractor] duplicate pointerId detected"),i.set(y.pointerId,{pointerId:y.pointerId,position:u(y)}),y.pointerType){case"pen":case"touch":t.handleTouchStart(y);break;case"mouse":default:t.handleMouseDown(y);break}},t.handlePointerUp=y=>{if(i.has(y.pointerId))switch(e.preventDefaultOnPointerUp&&Lo(y),i.delete(y.pointerId),e.container.releasePointerCapture(y.pointerId),y.pointerType){case"pen":case"touch":t.handleTouchEnd(y);break;case"mouse":default:t.handleMouseUp(y);break}},t.handlePointerCancel=y=>{if(i.has(y.pointerId))switch(i.delete(y.pointerId),y.pointerType){case"pen":case"touch":t.handleTouchEnd(y);break;case"mouse":default:t.handleMouseUp(y);break}},t.handlePointerMove=y=>{if(i.has(y.pointerId)){const x=i.get(y.pointerId);x.position=u(y)}switch(y.pointerType){case"pen":case"touch":t.handleTouchMove(y);break;case"mouse":default:t.handleMouseMove(y);break}},t.handleMouseDown=y=>{const x={...l(y),position:u(y),deviceType:c(y)};switch(y.button){case 0:t.leftButtonPressEvent(x);break;case 1:t.middleButtonPressEvent(x);break;case 2:t.rightButtonPressEvent(x);break;default:Wu(`Unknown mouse button pressed: ${y.button}`);break}},t.requestPointerLock=()=>{e.container&&e.container.requestPointerLock()},t.exitPointerLock=()=>{var y;return(y=document.exitPointerLock)==null?void 0:y.call(document)},t.isPointerLocked=()=>!!e.container&&document.pointerLockElement===e.container,t.handlePointerLockChange=()=>{t.isPointerLocked()?t.startPointerLockEvent():t.endPointerLockEvent()};function v(){e._view&&e.enabled&&e.enableRender&&(e.inRender=!0,e._view.traverseAllPasses(),e.inRender=!1),t.invokeRenderEvent()}t.requestAnimation=y=>{if(y===void 0){Wu("undefined requester, can not start animating");return}if(r.has(y)){zu("requester is already registered for animating");return}r.add(y),!e.animationRequest&&r.size===1&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.extendAnimation=y=>{const x=Date.now()+y;e._animationExtendedEnd=Math.max(e._animationExtendedEnd,x),!e.animationRequest&&r.size===0&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.isAnimating=()=>e.xrAnimation||e.animationRequest!==null,t.cancelAnimation=function(y){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r.has(y)){if(!x){const m=y&&y.getClassName?y.getClassName():y;zu(`${m} did not request an animation`)}return}r.delete(y),e.animationRequest&&r.size===0&&Date.now()>e._animationExtendedEnd&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.switchToXRAnimation=()=>{e.animationRequest&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null),e.xrAnimation=!0},t.returnFromXRAnimation=()=>{e.xrAnimation=!1,r.size!==0&&(e.recentAnimationFrameRate=10,e.animationRequest=requestAnimationFrame(t.handleAnimation))},t.updateXRGamepads=(y,x,m)=>{y.inputSources.forEach(g=>{const d=g.gripSpace==null?null:x.getPose(g.gripSpace,m),S=g.gripSpace==null?null:x.getPose(g.targetRaySpace,m),T=g.gamepad,C=g.handedness;if(T){T.index in e.lastGamepadValues||(e.lastGamepadValues[T.index]={left:{buttons:{}},right:{buttons:{}},none:{buttons:{}}});for(let w=0;w<T.buttons.length;++w)w in e.lastGamepadValues[T.index][C].buttons||(e.lastGamepadValues[T.index][C].buttons[w]=!1),e.lastGamepadValues[T.index][C].buttons[w]!==T.buttons[w].pressed&&d!=null&&(t.button3DEvent({gamepad:T,position:d.transform.position,orientation:d.transform.orientation,targetPosition:S.transform.position,targetOrientation:S.transform.orientation,pressed:T.buttons[w].pressed,device:g.handedness==="left"?Iu.LeftController:Iu.RightController,input:jl[T.mapping]&&jl[T.mapping][w]?jl[T.mapping][w]:Bi.Trigger}),e.lastGamepadValues[T.index][C].buttons[w]=T.buttons[w].pressed),e.lastGamepadValues[T.index][C].buttons[w]&&d!=null&&t.move3DEvent({gamepad:T,position:d.transform.position,orientation:d.transform.orientation,targetPosition:S.transform.position,targetOrientation:S.transform.orientation,device:g.handedness==="left"?Iu.LeftController:Iu.RightController})}})},t.handleMouseMove=y=>{const x={...l(y),position:u(y),deviceType:c(y)};e.moveTimeoutID===0?t.startMouseMoveEvent(x):(t.mouseMoveEvent(x),clearTimeout(e.moveTimeoutID)),e.moveTimeoutID=setTimeout(()=>{t.endMouseMoveEvent(),e.moveTimeoutID=0},200)},t.handleAnimation=()=>{const y=Date.now();e._animationFrameCount++,y-e._animationStartTime>1e3&&e._animationFrameCount>1&&(e.recentAnimationFrameRate=1e3*(e._animationFrameCount-1)/(y-e._animationStartTime),e.lastFrameTime=1/e.recentAnimationFrameRate,t.animationFrameRateUpdateEvent(),e._animationStartTime=y,e._animationFrameCount=1),t.animationEvent(),v(),r.size>0||Date.now()<e._animationExtendedEnd?e.animationRequest=requestAnimationFrame(t.handleAnimation):(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.handleWheel=y=>{Lo(y);const x={...MF(y),...l(y),position:u(y),deviceType:c(y)};e.wheelTimeoutID===0&&(Math.abs(x.spinY)>=.3?a=Math.abs(x.spinY):a=1),x.spinY/=a,e.wheelTimeoutID===0?(t.startMouseWheelEvent(x),t.mouseWheelEvent(x)):(t.mouseWheelEvent(x),clearTimeout(e.wheelTimeoutID)),e.mouseScrollDebounceByPass?(t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0):e.wheelTimeoutID=setTimeout(()=>{t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0},200)},t.handleMouseUp=y=>{const x={...l(y),position:u(y),deviceType:c(y)};switch(y.button){case 0:t.leftButtonReleaseEvent(x);break;case 1:t.middleButtonReleaseEvent(x);break;case 2:t.rightButtonReleaseEvent(x);break;default:Wu(`Unknown mouse button released: ${y.button}`);break}},t.handleTouchStart=y=>{const x=[...i.values()];if(e.recognizeGestures&&x.length>1){const m=ju(i);if(x.length===2){const g={...l(Ta),position:x[0].position,deviceType:c(y)};t.leftButtonReleaseEvent(g)}t.recognizeGesture("TouchStart",m)}else if(x.length===1){const m={...l(Ta),position:u(y),deviceType:c(y)};t.leftButtonPressEvent(m)}},t.handleTouchMove=y=>{const x=[...i.values()];if(e.recognizeGestures&&x.length>1){const m=ju(i);t.recognizeGesture("TouchMove",m)}else if(x.length===1){const m={...l(Ta),position:x[0].position,deviceType:c(y)};t.mouseMoveEvent(m)}},t.handleTouchEnd=y=>{const x=[...i.values()];if(e.recognizeGestures)if(x.length===0){const m={...l(Ta),position:u(y),deviceType:c(y)};t.leftButtonReleaseEvent(m)}else if(x.length===1){const m=ju(i);t.recognizeGesture("TouchEnd",m);const g={...l(Ta),position:x[0].position,deviceType:c(y)};t.leftButtonPressEvent(g)}else{const m=ju(i);t.recognizeGesture("TouchMove",m)}else if(x.length===1){const m={...l(Ta),position:x[0].position,deviceType:c(y)};t.leftButtonReleaseEvent(m)}},t.setView=y=>{e._view!==y&&(e._view=y,e._view.getRenderable().setInteractor(t),t.modified())},t.getFirstRenderer=()=>{var y,x,m;return(m=(x=(y=e._view)==null?void 0:y.getRenderable())==null?void 0:x.getRenderersByReference())==null?void 0:m[0]},t.findPokedRenderer=function(){var C,w;let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e._view)return null;const m=(w=(C=e._view)==null?void 0:C.getRenderable())==null?void 0:w.getRenderers();if(!m||m.length===0)return null;m.sort((_,E)=>_.getLayer()-E.getLayer());let g=null,d=null,S=null,T=m.length;for(;T--;){const _=m[T];if(e._view.isInViewport(y,x,_)&&_.getInteractive()){S=_;break}g===null&&_.getInteractive()&&(g=_),d===null&&e._view.isInViewport(y,x,_)&&(d=_)}return S===null&&(S=g),S===null&&(S=d),S==null&&(S=m[0]),S},t.render=()=>{!t.isAnimating()&&!e.inRender&&v()},v1.forEach(y=>{const x=y.charAt(0).toLowerCase()+y.slice(1);t[`${x}Event`]=m=>{if(!e.enabled)return;if(!t.getCurrentRenderer()){RF(`
          Can not forward events without a current renderer on the interactor.
        `);return}const d={type:y,pokedRenderer:e.currentRenderer,firstRenderer:t.getFirstRenderer(),...m};t[`invoke${y}`](d)}}),t.recognizeGesture=(y,x)=>{if(Object.keys(x).length>2)return;if(e.startingEventPositions||(e.startingEventPositions={}),y==="TouchStart"){Object.keys(x).forEach(D=>{e.startingEventPositions[D]=x[D]}),e.currentGesture="Start";return}if(y==="TouchEnd"){e.currentGesture==="Pinch"&&(t.render(),t.endPinchEvent()),e.currentGesture==="Rotate"&&(t.render(),t.endRotateEvent()),e.currentGesture==="Pan"&&(t.render(),t.endPanEvent()),e.currentGesture="Start",e.startingEventPositions={};return}let m=0;const g=[],d=[];Object.keys(x).forEach(D=>{g[m]=x[D],d[m]=e.startingEventPositions[D],m++});const S=Math.sqrt((d[0].x-d[1].x)*(d[0].x-d[1].x)+(d[0].y-d[1].y)*(d[0].y-d[1].y)),T=Math.sqrt((g[0].x-g[1].x)*(g[0].x-g[1].x)+(g[0].y-g[1].y)*(g[0].y-g[1].y));let C=uo(Math.atan2(d[1].y-d[0].y,d[1].x-d[0].x)),w=uo(Math.atan2(g[1].y-g[0].y,g[1].x-g[0].x)),_=w-C;w=w+180>=360?w-180:w+180,C=C+180>=360?C-180:C+180,Math.abs(w-C)<Math.abs(_)&&(_=w-C);const E=[];if(E[0]=(g[0].x-d[0].x+g[1].x-d[1].x)/2,E[1]=(g[0].y-d[0].y+g[1].y-d[1].y)/2,y==="TouchMove")if(e.currentGesture==="Start"){let D=.01*Math.sqrt(e.container.clientWidth*e.container.clientWidth+e.container.clientHeight*e.container.clientHeight);D<15&&(D=15);const O=Math.abs(T-S),N=T*3.1415926*Math.abs(_)/360,R=Math.sqrt(E[0]*E[0]+E[1]*E[1]);if(O>D&&O>N&&O>R){e.currentGesture="Pinch";const M={scale:1,touches:x};t.startPinchEvent(M)}else if(N>D&&N>R){e.currentGesture="Rotate";const M={rotation:0,touches:x};t.startRotateEvent(M)}else if(R>D){e.currentGesture="Pan";const M={translation:[0,0],touches:x};t.startPanEvent(M)}}else{if(e.currentGesture==="Rotate"){const D={rotation:_,touches:x};t.rotateEvent(D)}if(e.currentGesture==="Pinch"){const D={scale:T/S,touches:x};t.pinchEvent(D)}if(e.currentGesture==="Pan"){const D={translation:E,touches:x};t.panEvent(D)}}},t.handleVisibilityChange=()=>{e._animationStartTime=Date.now(),e._animationFrameCount=0},t.setCurrentRenderer=y=>{e._forcedRenderer=!!y,e.currentRenderer=y},t.setContainer=y=>{h();const x=n.setContainer(y??null);return x&&f(),x},t.delete=()=>{for(;r.size;)t.cancelAnimation(r.values().next().value);typeof document.hidden<"u"&&document.removeEventListener("visibilitychange",t.handleVisibilityChange),e.container&&t.setContainer(null),n.delete()},typeof document.hidden<"u"&&document.addEventListener("visibilitychange",t.handleVisibilityChange,!1)}const LF={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,recentAnimationFrameRate:10,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{},preventDefaultOnPointerDown:!1,preventDefaultOnPointerUp:!1,mouseScrollDebounceByPass:!1};function A4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,LF,n),P.obj(t,e),e._animationExtendedEnd=0,P.event(t,e,"RenderEvent"),v1.forEach(r=>P.event(t,e,r)),P.get(t,e,["initialized","interactorStyle","lastFrameTime","recentAnimationFrameRate","_view"]),P.setGet(t,e,["container","lightFollowCamera","enabled","enableRender","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker","preventDefaultOnPointerDown","preventDefaultOnPointerUp","mouseScrollDebounceByPass"]),P.moveToProtected(t,e,["view"]),FF(t,e)}const kF=P.newInstance(A4,"vtkRenderWindowInteractor");var U4={newInstance:kF,extend:A4,handledEvents:v1,...V4};const{vtkErrorMacro:BF,VOID:VF}=P;function AF(t,e,n,r){return t.getRenderWindow().getViews()[0].worldToDisplay(e,n,r,t)}function UF(t,e,n,r){return t.getRenderWindow().getViews()[0].displayToWorld(e,n,r,t)}const GF={computeWorldToDisplay:AF,computeDisplayToWorld:UF};function PF(t,e){e.classHierarchy.push("vtkInteractorObserver");const n={...t};function r(){for(;e.subscribedEvents.length;)e.subscribedEvents.pop().unsubscribe()}function i(){U4.handledEvents.forEach(a=>{t[`handle${a}`]&&e.subscribedEvents.push(e._interactor[`on${a}`](o=>e.processEvents?t[`handle${a}`](o):VF,e.priority))})}t.setInteractor=a=>{a!==e._interactor&&(r(),e._interactor=a,a&&e.enabled&&i(),t.modified())},t.setEnabled=a=>{a!==e.enabled&&(r(),a&&(e._interactor?i():BF(`
          The interactor must be set before subscribing to events
        `)),e.enabled=a,t.modified())},t.computeDisplayToWorld=(a,o,s,u)=>a?e._interactor.getView().displayToWorld(o,s,u,a):null,t.computeWorldToDisplay=(a,o,s,u)=>a?e._interactor.getView().worldToDisplay(o,s,u,a):null,t.setPriority=a=>{n.setPriority(a)&&e._interactor&&(r(),i())}}const IF={enabled:!0,priority:0,processEvents:!0,subscribedEvents:[]};function G4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,IF,n),P.obj(t,e),P.event(t,e,"InteractionEvent"),P.event(t,e,"StartInteractionEvent"),P.event(t,e,"EndInteractionEvent"),P.get(t,e,["_interactor","enabled"]),P.setGet(t,e,["priority","processEvents"]),P.moveToProtected(t,e,["interactor"]),PF(t,e)}const zF=P.newInstance(G4,"vtkInteractorObserver");var WF={newInstance:zF,extend:G4,...GF};const jF={IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025};var y1={States:jF};const{States:ir}=y1,$l={Rotate:ir.IS_ROTATE,Pan:ir.IS_PAN,Spin:ir.IS_SPIN,Dolly:ir.IS_DOLLY,CameraPose:ir.IS_CAMERA_POSE,WindowLevel:ir.IS_WINDOW_LEVEL,Slice:ir.IS_SLICE};function $F(t,e){e.classHierarchy.push("vtkInteractorStyle"),Object.keys($l).forEach(n=>{P.event(t,e,`Start${n}Event`),t[`start${n}`]=()=>{e.state===ir.IS_NONE&&(e.state=$l[n],e._interactor.requestAnimation(t),t.invokeStartInteractionEvent({type:"StartInteractionEvent"}),t[`invokeStart${n}Event`]({type:`Start${n}Event`}))},P.event(t,e,`End${n}Event`),t[`end${n}`]=()=>{e.state===$l[n]&&(e.state=ir.IS_NONE,e._interactor.cancelAnimation(t),t.invokeEndInteractionEvent({type:"EndInteractionEvent"}),t[`invokeEnd${n}Event`]({type:`End${n}Event`}),e._interactor.render())}}),e.getRenderer=n=>e.focusedRenderer||n.pokedRenderer,t.handleKeyPress=n=>{const r=e._interactor;let i=null;switch(n.key){case"r":case"R":e.getRenderer(n).resetCamera(),r.render();break;case"w":case"W":i=e.getRenderer(n).getActors(),i.forEach(a=>{const o=a.getProperty();o.setRepresentationToWireframe&&o.setRepresentationToWireframe()}),r.render();break;case"s":case"S":i=e.getRenderer(n).getActors(),i.forEach(a=>{const o=a.getProperty();o.setRepresentationToSurface&&o.setRepresentationToSurface()}),r.render();break;case"v":case"V":i=e.getRenderer(n).getActors(),i.forEach(a=>{const o=a.getProperty();o.setRepresentationToPoints&&o.setRepresentationToPoints()}),r.render();break}}}const HF={state:ir.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1};function P4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,HF,n),WF.extend(t,e,n),P.setGet(t,e,["focusedRenderer"]),$F(t,e)}const KF=P.newInstance(P4,"vtkInteractorStyle");var XF={newInstance:KF,extend:P4,...y1};const{States:er}=y1;function qF(t,e){e.classHierarchy.push("vtkInteractorStyleTrackballCamera"),t.handleMouseMove=n=>{const r=n.position,i=e.getRenderer(n);switch(e.state){case er.IS_ROTATE:t.handleMouseRotate(i,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case er.IS_PAN:t.handleMousePan(i,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case er.IS_DOLLY:t.handleMouseDolly(i,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case er.IS_SPIN:t.handleMouseSpin(i,r),t.invokeInteractionEvent({type:"InteractionEvent"});break}e.previousPosition=r},t.handleButton3D=n=>{if(n&&n.pressed&&n.device===yp.RightController&&(n.input===Ko.Trigger||n.input===Ko.TrackPad)){t.startCameraPose();return}n&&!n.pressed&&n.device===yp.RightController&&(n.input===Ko.Trigger||n.input===Ko.TrackPad)&&e.state===er.IS_CAMERA_POSE&&t.endCameraPose()},t.handleMove3D=n=>{switch(e.state){case er.IS_CAMERA_POSE:t.updateCameraPose(n);break}},t.updateCameraPose=n=>{const r=e.getRenderer(n).getActiveCamera(),i=r.getPhysicalTranslation(),o=.5*.05*r.getPhysicalScale(),s=r.physicalOrientationToWorldDirection([n.orientation.x,n.orientation.y,n.orientation.z,n.orientation.w]);r.setPhysicalTranslation(i[0]+s[0]*o,i[1]+s[1]*o,i[2]+s[2]*o)},t.handleLeftButtonPress=n=>{const r=n.position;e.previousPosition=r,n.shiftKey?n.controlKey||n.altKey?t.startDolly():t.startPan():n.controlKey||n.altKey?t.startSpin():t.startRotate()},t.handleLeftButtonRelease=()=>{switch(e.state){case er.IS_DOLLY:t.endDolly();break;case er.IS_PAN:t.endPan();break;case er.IS_SPIN:t.endSpin();break;case er.IS_ROTATE:t.endRotate();break}},t.handleStartMouseWheel=()=>{t.startDolly()},t.handleEndMouseWheel=()=>{t.endDolly()},t.handleStartPinch=n=>{e.previousScale=n.scale,t.startDolly()},t.handleEndPinch=()=>{t.endDolly()},t.handleStartRotate=n=>{e.previousRotation=n.rotation,t.startRotate()},t.handleEndRotate=()=>{t.endRotate()},t.handleStartPan=n=>{e.previousTranslation=n.translation,t.startPan()},t.handleEndPan=()=>{t.endPan()},t.handlePinch=n=>{t.dollyByFactor(e.getRenderer(n),n.scale/e.previousScale),e.previousScale=n.scale},t.handlePan=n=>{const r=e.getRenderer(n).getActiveCamera();let i=r.getFocalPoint();i=t.computeWorldToDisplay(e.getRenderer(n),i[0],i[1],i[2]);const a=i[2],o=n.translation,s=e.previousTranslation,u=t.computeDisplayToWorld(e.getRenderer(n),i[0]+o[0]-s[0],i[1]+o[1]-s[1],a),l=t.computeDisplayToWorld(e.getRenderer(n),i[0],i[1],a),p=[];p[0]=l[0]-u[0],p[1]=l[1]-u[1],p[2]=l[2]-u[2],i=r.getFocalPoint();const c=r.getPosition();r.setFocalPoint(p[0]+i[0],p[1]+i[1],p[2]+i[2]),r.setPosition(p[0]+c[0],p[1]+c[1],p[2]+c[2]),e._interactor.getLightFollowCamera()&&e.getRenderer(n).updateLightsGeometryToFollowCamera(),r.orthogonalizeViewUp(),e.previousTranslation=n.translation},t.handleRotate=n=>{const r=e.getRenderer(n).getActiveCamera();r.roll(n.rotation-e.previousRotation),r.orthogonalizeViewUp(),e.previousRotation=n.rotation},t.handleMouseRotate=(n,r)=>{if(!e.previousPosition)return;const i=e._interactor,a=r.x-e.previousPosition.x,o=r.y-e.previousPosition.y,s=i.getView().getViewportSize(n);let u=-.1,l=-.1;s[0]&&s[1]&&(u=-20/s[1],l=-20/s[0]);const p=a*l*e.motionFactor,c=o*u*e.motionFactor,f=n.getActiveCamera();!Number.isNaN(p)&&!Number.isNaN(c)&&(f.azimuth(p),f.elevation(c),f.orthogonalizeViewUp()),e.autoAdjustCameraClippingRange&&n.resetCameraClippingRange(),i.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()},t.handleMouseSpin=(n,r)=>{if(!e.previousPosition)return;const i=e._interactor,a=n.getActiveCamera(),o=i.getView().getViewportCenter(n),s=uo(Math.atan2(e.previousPosition.y-o[1],e.previousPosition.x-o[0])),u=uo(Math.atan2(r.y-o[1],r.x-o[0]))-s;Number.isNaN(u)||(a.roll(u),a.orthogonalizeViewUp())},t.handleMousePan=(n,r)=>{if(!e.previousPosition)return;const i=n.getActiveCamera();let a=i.getFocalPoint();a=t.computeWorldToDisplay(n,a[0],a[1],a[2]);const o=a[2],s=t.computeDisplayToWorld(n,r.x,r.y,o),u=t.computeDisplayToWorld(n,e.previousPosition.x,e.previousPosition.y,o),l=[];l[0]=u[0]-s[0],l[1]=u[1]-s[1],l[2]=u[2]-s[2],a=i.getFocalPoint();const p=i.getPosition();i.setFocalPoint(l[0]+a[0],l[1]+a[1],l[2]+a[2]),i.setPosition(l[0]+p[0],l[1]+p[1],l[2]+p[2]),e._interactor.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()},t.handleMouseDolly=(n,r)=>{if(!e.previousPosition)return;const i=r.y-e.previousPosition.y,o=e._interactor.getView().getViewportCenter(n),s=e.motionFactor*i/o[1];t.dollyByFactor(n,1.1**s)},t.handleMouseWheel=n=>{const r=1-n.spinY/e.zoomFactor;t.dollyByFactor(e.getRenderer(n),r)},t.dollyByFactor=(n,r)=>{if(Number.isNaN(r))return;const i=n.getActiveCamera();i.getParallelProjection()?i.setParallelScale(i.getParallelScale()/r):(i.dolly(r),e.autoAdjustCameraClippingRange&&n.resetCameraClippingRange()),e._interactor.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()}}const YF={motionFactor:10,zoomFactor:10};function I4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,YF,n),XF.extend(t,e,n),P.setGet(t,e,["motionFactor","zoomFactor"]),qF(t,e)}const JF=P.newInstance(I4,"vtkInteractorStyleTrackballCamera");var QF={newInstance:JF,extend:I4};function ZF(t){return t}function m1(t){if(t===null||t==="null")return null;if(t==="true")return!0;if(t==="false")return!1;if(!(t===void 0||t==="undefined"))return t[0]==="["&&t[t.length-1]==="]"?t.substring(1,t.length-1).split(",").map(e=>m1(e.trim())):t===""||Number.isNaN(Number(t))?t:Number(t)}function eL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window.location.search;const n={},r=t?m1:ZF;return(e||"").replace(/#.*/,"").replace("?","").split("&").forEach(a=>{const[o,s]=a.split("=").map(u=>decodeURIComponent(u));o&&(n[o]=s?r(s):!0)}),n}var tL={toNativeType:m1,extractURLParameters:eL};function nL(t,e){e.classHierarchy.push("vtkRenderPass"),t.getOperation=()=>e.currentOperation,t.setCurrentOperation=n=>{e.currentOperation=n,e.currentTraverseOperation=`traverse${P.capitalize(e.currentOperation)}`},t.getTraverseOperation=()=>e.currentTraverseOperation,t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e.deleted||(e._currentParent=r,e.preDelegateOperations.forEach(i=>{t.setCurrentOperation(i),n.traverse(t)}),e.delegates.forEach(i=>{i.traverse(n,t)}),e.postDelegateOperations.forEach(i=>{t.setCurrentOperation(i),n.traverse(t)}))}}const rL={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function z4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,rL,n),P.obj(t,e),P.get(t,e,["currentOperation"]),P.setGet(t,e,["delegates","_currentParent","preDelegateOperations","postDelegateOperations"]),P.moveToProtected(t,e,["currentParent"]),nL(t,e)}const iL=P.newInstance(z4,"vtkRenderPass");var Ar={newInstance:iL,extend:z4};const{Representation:aL}=Co,{vtkErrorMacro:s2}=P;function oL(t){const e=Q.substitute(t.Fragment,"//VTK::RenderPassFragmentShader::Impl",`
      float weight = gl_FragData[0].a * pow(max(1.1 - gl_FragCoord.z, 0.0), 2.0);
      gl_FragData[0] = vec4(gl_FragData[0].rgb*weight, gl_FragData[0].a);
      gl_FragData[1].r = weight;
    `,!1);t.Fragment=e.result}const sL=`//VTK::System::Dec

in vec2 tcoord;

uniform sampler2D translucentRTexture;
uniform sampler2D translucentRGBATexture;

// the output of this shader
//VTK::Output::Dec

void main()
{
  vec4 t1Color = texture(translucentRGBATexture, tcoord);
  float t2Color = texture(translucentRTexture, tcoord).r;
  gl_FragData[0] = vec4(t1Color.rgb/max(t2Color,0.01), 1.0 - t1Color.a);
}
`;function uL(t,e){e.classHierarchy.push("vtkOpenGLOrderIndependentTranslucentPass"),t.createVertexBuffer=()=>{const n=new Float32Array([-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1]),r=new Float32Array([0,0,1,0,0,1,1,1]),i=new Uint16Array([4,0,1,3,2]),a=Ee.newInstance({numberOfComponents:3,values:n});a.setName("points");const o=Ee.newInstance({numberOfComponents:2,values:r});o.setName("tcoords");const s=Ee.newInstance({numberOfComponents:1,values:i});e.tris.getCABO().createVBO(s,"polys",aL.SURFACE,{points:a,tcoords:o,cellOffset:0}),e.VBOBuildTime.modified()},t.createFramebuffer=n=>{const r=n.getSize(),i=n.getContext();e.framebuffer=Hc.newInstance(),e.framebuffer.setOpenGLRenderWindow(n),e.framebuffer.create(...r),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind(),e.translucentRGBATexture=vt.newInstance(),e.translucentRGBATexture.setInternalFormat(i.RGBA16F),e.translucentRGBATexture.setFormat(i.RGBA),e.translucentRGBATexture.setOpenGLDataType(i.HALF_FLOAT),e.translucentRGBATexture.setOpenGLRenderWindow(n),e.translucentRGBATexture.create2DFromRaw(r[0],r[1],4,"Float32Array",null),e.translucentRTexture=vt.newInstance(),e.translucentRTexture.setInternalFormat(i.R16F),e.translucentRTexture.setFormat(i.RED),e.translucentRTexture.setOpenGLDataType(i.HALF_FLOAT),e.translucentRTexture.setOpenGLRenderWindow(n),e.translucentRTexture.create2DFromRaw(r[0],r[1],1,"Float32Array",null),e.translucentZTexture=vt.newInstance(),e.translucentZTexture.setOpenGLRenderWindow(n),e.translucentZTexture.createDepthFromRaw(r[0],r[1],"Float32Array",null),e.framebuffer.setColorBuffer(e.translucentRGBATexture,0),e.framebuffer.setColorBuffer(e.translucentRTexture,1),e.framebuffer.setDepthBuffer(e.translucentZTexture)},t.createCopyShader=n=>{e.copyShader=n.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","attribute vec2 tcoordTC;","varying vec2 tcoord;","void main() { tcoord = tcoordTC; gl_Position = vertexDC; }"].join(`
`),sL,"")},t.createVBO=n=>{const r=n.getContext();e.tris.setOpenGLRenderWindow(n),t.createVertexBuffer();const i=e.copyShader;e.tris.getCABO().bind(),e.copyVAO.addAttributeArray(i,e.tris.getCABO(),"vertexDC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),r.FLOAT,3,r.FALSE)||s2("Error setting vertexDC in copy shader VAO."),e.copyVAO.addAttributeArray(i,e.tris.getCABO(),"tcoordTC",e.tris.getCABO().getTCoordOffset(),e.tris.getCABO().getStride(),r.FLOAT,2,r.FALSE)||s2("Error setting vertexDC in copy shader VAO.")},t.traverse=(n,r,i)=>{if(e.deleted)return;const a=n.getSize(),o=n.getContext();if(e._supported=!1,r.getSelector()||!o||!n.getWebgl2()||!o.getExtension("EXT_color_buffer_half_float")&&!o.getExtension("EXT_color_buffer_float")){t.setCurrentOperation("translucentPass"),r.traverse(t);return}if(e._supported=!0,e.framebuffer===null)t.createFramebuffer(n);else{const u=e.framebuffer.getSize();u===null||u[0]!==a[0]||u[1]!==a[1]?(e.framebuffer.releaseGraphicsResources(),e.translucentRGBATexture.releaseGraphicsResources(n),e.translucentRTexture.releaseGraphicsResources(n),e.translucentZTexture.releaseGraphicsResources(n),t.createFramebuffer(n)):(e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind())}o.drawBuffers([o.COLOR_ATTACHMENT0]),o.clearBufferfv(o.COLOR,0,[0,0,0,0]),o.clearBufferfv(o.DEPTH,0,[1]),o.colorMask(!1,!1,!1,!1),i.getOpaqueActorCount()>0&&(i.setCurrentOperation("opaqueZBufferPass"),r.traverse(i)),o.colorMask(!0,!0,!0,!0),o.drawBuffers([o.COLOR_ATTACHMENT0,o.COLOR_ATTACHMENT1]),o.viewport(0,0,a[0],a[1]),o.scissor(0,0,a[0],a[1]),o.clearBufferfv(o.COLOR,0,[0,0,0,1]),o.clearBufferfv(o.COLOR,1,[0,0,0,0]),o.enable(o.DEPTH_TEST),o.enable(o.BLEND),o.blendFuncSeparate(o.ONE,o.ONE,o.ZERO,o.ONE_MINUS_SRC_ALPHA),t.setCurrentOperation("translucentPass"),r.traverse(t),o.drawBuffers([o.NONE]),e.framebuffer.restorePreviousBindingsAndBuffers(),e.copyShader===null?t.createCopyShader(n):n.getShaderCache().readyShaderProgram(e.copyShader),e.copyVAO||(e.copyVAO=c1.newInstance(),e.copyVAO.setOpenGLRenderWindow(n)),e.copyVAO.bind(),e.VBOBuildTime.getMTime()<t.getMTime()&&t.createVBO(n),o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.depthMask(!1),o.depthFunc(o.ALWAYS),o.viewport(0,0,a[0],a[1]),o.scissor(0,0,a[0],a[1]),e.translucentRGBATexture.activate(),e.copyShader.setUniformi("translucentRGBATexture",e.translucentRGBATexture.getTextureUnit()),e.translucentRTexture.activate(),e.copyShader.setUniformi("translucentRTexture",e.translucentRTexture.getTextureUnit()),o.drawArrays(o.TRIANGLES,0,e.tris.getCABO().getElementCount()),o.depthMask(!0),o.depthFunc(o.LEQUAL),e.translucentRGBATexture.deactivate(),e.translucentRTexture.deactivate();const s=r.getTiledSizeAndOrigin();o.scissor(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize),o.viewport(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize)},t.getShaderReplacement=()=>e._supported?oL:null,t.releaseGraphicsResources=n=>{e.framebuffer&&(e.framebuffer.releaseGraphicsResources(n),e.framebuffer=null),e.translucentRGBATexture&&(e.translucentRGBATexture.releaseGraphicsResources(n),e.translucentRGBATexture=null),e.translucentRTexture&&(e.translucentRTexture.releaseGraphicsResources(n),e.translucentRTexture=null),e.translucentZTexture&&(e.translucentZTexture.releaseGraphicsResources(n),e.translucentZTexture=null),e.copyVAO&&(e.copyVAO.releaseGraphicsResources(n),e.copyVAO=null),e.copyShader&&(e.copyShader.releaseGraphicsResources(n),e.copyShader=null),e.tris&&(e.tris.releaseGraphicsResources(n),e.tris=null),t.modified()}}const cL={framebuffer:null,copyShader:null,tris:null};function W4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,cL,n),Ar.extend(t,e,n),e.VBOBuildTime={},P.obj(e.VBOBuildTime,{mtime:0}),e.tris=dr.newInstance(),P.get(t,e,["framebuffer"]),uL(t,e)}const lL=P.newInstance(W4,"vtkOpenGLOrderIndependentTranslucentPass");var fL={newInstance:lL,extend:W4};function pL(t,e){e.classHierarchy.push("vtkForwardPass"),t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(e.deleted)return;e._currentParent=r,t.setCurrentOperation("buildPass"),n.traverse(t);const i=n.getRenderable().getNumberOfLayers(),a=n.getRenderable().getRenderersByReference();for(let o=0;o<i;o++)for(let s=0;s<a.length;s++){const u=a[s],l=n.getViewNodeFor(u);if(u.getDraw()&&u.getLayer()===o){if(e.opaqueActorCount=0,e.translucentActorCount=0,e.volumeCount=0,e.overlayActorCount=0,t.setCurrentOperation("queryPass"),l.traverse(t),(e.opaqueActorCount>0||e.translucentActorCount>0)&&e.volumeCount>0||e.depthRequested){const p=n.getFramebufferSize();e.framebuffer===null&&(e.framebuffer=Hc.newInstance()),e.framebuffer.setOpenGLRenderWindow(n),e.framebuffer.saveCurrentBindingsAndBuffers();const c=e.framebuffer.getSize();(c===null||c[0]!==p[0]||c[1]!==p[1])&&(e.framebuffer.create(p[0],p[1]),e.framebuffer.populateFramebuffer()),e.framebuffer.bind(),t.setCurrentOperation("zBufferPass"),l.traverse(t),e.framebuffer.restorePreviousBindingsAndBuffers(),e.depthRequested=!1}t.setCurrentOperation("cameraPass"),l.traverse(t),e.opaqueActorCount>0&&(t.setCurrentOperation("opaquePass"),l.traverse(t)),e.translucentActorCount>0&&(e.translucentPass||(e.translucentPass=fL.newInstance()),e.translucentPass.traverse(n,l,t)),e.volumeCount>0&&(t.setCurrentOperation("volumePass"),l.traverse(t)),e.overlayActorCount>0&&(t.setCurrentOperation("overlayPass"),l.traverse(t))}}},t.getZBufferTexture=()=>e.framebuffer?e.framebuffer.getColorTexture():null,t.requestDepth=()=>{e.depthRequested=!0},t.incrementOpaqueActorCount=()=>e.opaqueActorCount++,t.incrementTranslucentActorCount=()=>e.translucentActorCount++,t.incrementVolumeCount=()=>e.volumeCount++,t.incrementOverlayActorCount=()=>e.overlayActorCount++}const hL={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,overlayActorCount:0,framebuffer:null,depthRequested:!1};function j4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,hL,n),Ar.extend(t,e,n),P.get(t,e,["framebuffer","opaqueActorCount","translucentActorCount","volumeCount"]),pL(t,e)}const gL=P.newInstance(j4,"vtkForwardPass");var dL={newInstance:gL,extend:j4};const{FieldAssociations:vL}=ha;function yL(t,e){e.classHierarchy.push("vtkHardwareSelector"),t.getSourceDataAsync=async(n,r,i,a,o)=>{},t.selectAsync=async(n,r,i,a,o)=>{const s=await t.getSourceDataAsync(n,r,i,a,o);return s?s.generateSelection(r,i,a,o):[]}}const mL={fieldAssociation:vL.FIELD_ASSOCIATION_CELLS,captureZValues:!1};function $4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,mL,n),P.obj(t,e),P.setGet(t,e,["fieldAssociation","captureZValues"]),yL(t,e)}const xL=P.newInstance($4,"vtkHardwareSelector");var H4={newInstance:xL,extend:$4};const SL={GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},TL={CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5};var CL={SelectionContent:SL,SelectionField:TL};function wL(t,e){e.classHierarchy.push("vtkSelectionNode"),t.getBounds=()=>e.points.getBounds()}const _L={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function K4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_L,n),P.obj(t,e),e.properties={},P.setGet(t,e,["contentType","fieldType","properties","selectionList"]),wL(t,e)}const EL=P.newInstance(K4,"vtkSelectionNode");var Kc={newInstance:EL,extend:K4,...CL};const{PassTypes:xt}=h5,{SelectionContent:DL,SelectionField:u2}=Kc,{FieldAssociations:us}=ha,{vtkErrorMacro:X4}=P,Zr=1;function q4(t){return`${t.propID} ${t.compositeID}`}function Y4(t,e,n,r){if(!n)return 0;const i=(e*(r[2]-r[0]+1)+t)*4;return n[i+3]}function _r(t,e,n,r){if(!n)return 0;const i=(e*(r[2]-r[0]+1)+t)*4,a=n[i],o=n[i+1];return(n[i+2]*256+o)*256+a}function J4(t,e){let n=e;return n<<=24,n|=t,n}function OL(t,e,n,r){{if(r[0]=e[0],r[1]=e[1],e[0]<t.area[0]||e[0]>t.area[2]||e[1]<t.area[1]||e[1]>t.area[3])return null;const i=[e[0]-t.area[0],e[1]-t.area[1]],a=_r(i[0],i[1],t.pixBuffer[xt.ACTOR_PASS],t.area);if(a<=0||a-Zr>=t.props.length)return null;const o={};o.valid=!0,o.propID=a-Zr,o.prop=t.props[o.propID];let s=_r(i[0],i[1],t.pixBuffer[xt.COMPOSITE_INDEX_PASS],t.area);if((s<0||s>16777215)&&(s=0),o.compositeID=s-Zr,t.captureZValues){const p=(i[1]*(t.area[2]-t.area[0]+1)+i[0])*4;o.zValue=(256*t.zBuffer[p]+t.zBuffer[p+1])/65535,o.displayPosition=e}if(t.pixBuffer[xt.ID_LOW24]&&Y4(i[0],i[1],t.pixBuffer[xt.ID_LOW24],t.area)===0)return o;const u=_r(i[0],i[1],t.pixBuffer[xt.ID_LOW24],t.area),l=_r(i[0],i[1],t.pixBuffer[xt.ID_HIGH24],t.area);return o.attributeID=J4(u,l),o}}function Q4(t,e,n,r,i){const a=[];let o=0;return e.forEach((s,u)=>{const l=Kc.newInstance();switch(l.setContentType(DL.INDICES),t){case us.FIELD_ASSOCIATION_CELLS:l.setFieldType(u2.CELL);break;case us.FIELD_ASSOCIATION_POINTS:l.setFieldType(u2.POINT);break;default:X4("Unknown field association")}l.getProperties().propID=s.info.propID,l.getProperties().prop=s.info.prop,l.getProperties().compositeID=s.info.compositeID,l.getProperties().attributeID=s.info.attributeID,l.getProperties().pixelCount=s.pixelCount,n&&(l.getProperties().displayPosition=[s.info.displayPosition[0],s.info.displayPosition[1],s.info.zValue],l.getProperties().worldPosition=i.displayToWorld(s.info.displayPosition[0],s.info.displayPosition[1],s.info.zValue,r)),l.setSelectionList(s.attributeIDs),a[o]=l,o++}),a}function bL(t,e,n,r,i){const a=Math.floor(e),o=Math.floor(n),s=Math.floor(r),u=Math.floor(i),l=new Map,p=[0,0];for(let c=o;c<=u;c++)for(let f=a;f<=s;f++){const v=OL(t,[f,c],0,p);if(v&&v.valid){const y=q4(v);if(!l.has(y))l.set(y,{info:v,pixelCount:1,attributeIDs:[v.attributeID]});else{const x=l.get(y);x.pixelCount++,t.captureZValues&&v.zValue<x.info.zValue&&(x.info=v),x.attributeIDs.indexOf(v.attributeID)===-1&&x.attributeIDs.push(v.attributeID)}}}return Q4(t.fieldAssociation,l,t.captureZValues,t.renderer,t.openGLRenderWindow)}function NL(t,e){e.classHierarchy.push("vtkOpenGLHardwareSelector"),t.releasePixBuffers=()=>{e.rawPixBuffer=[],e.pixBuffer=[],e.zBuffer=null},t.beginSelection=()=>{e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer),e.maxAttributeId=0;const r=e._openGLRenderWindow.getSize();if(!e.framebuffer)e.framebuffer=Hc.newInstance(),e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.create(r[0],r[1]),e.framebuffer.populateFramebuffer();else{e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers();const i=e.framebuffer.getSize();!i||i[0]!==r[0]||i[1]!==r[1]?(e.framebuffer.create(r[0],r[1]),e.framebuffer.populateFramebuffer()):e.framebuffer.bind()}if(e._openGLRenderer.clear(),e._openGLRenderer.setSelector(t),e.hitProps={},e.propPixels={},e.props=[],t.releasePixBuffers(),e.fieldAssociation===us.FIELD_ASSOCIATION_POINTS){const i=e._openGLRenderWindow.getContext(),a=i.isEnabled(i.BLEND);i.disable(i.BLEND),e._openGLRenderWindow.traverseAllPasses(),a&&i.enable(i.BLEND)}},t.endSelection=()=>{e.hitProps={},e._openGLRenderer.setSelector(null),e.framebuffer.restorePreviousBindingsAndBuffers()},t.preCapturePass=()=>{const r=e._openGLRenderWindow.getContext();e.originalBlending=r.isEnabled(r.BLEND),r.disable(r.BLEND)},t.postCapturePass=()=>{const r=e._openGLRenderWindow.getContext();e.originalBlending&&r.enable(r.BLEND)},t.select=()=>{let r=null;return t.captureBuffers()&&(r=t.generateSelection(e.area[0],e.area[1],e.area[2],e.area[3]),t.releasePixBuffers()),r},t.getSourceDataAsync=async(r,i,a,o,s)=>{if(e._renderer=r,i===void 0){const l=e._openGLRenderWindow.getSize();t.setArea(0,0,l[0]-1,l[1]-1)}else t.setArea(i,a,o,s);if(!t.captureBuffers())return!1;const u={area:[...e.area],pixBuffer:[...e.pixBuffer],captureZValues:e.captureZValues,zBuffer:e.zBuffer,props:[...e.props],fieldAssociation:e.fieldAssociation,renderer:r,openGLRenderWindow:e._openGLRenderWindow};return u.generateSelection=function(){for(var l=arguments.length,p=new Array(l),c=0;c<l;c++)p[c]=arguments[c];return bL(u,...p)},u},t.captureBuffers=()=>{if(!e._renderer||!e._openGLRenderWindow)return X4("Renderer and view must be set before calling Select."),!1;e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer),e._openGLRenderWindow.getRenderable().preRender(),t.invokeEvent({type:"StartEvent"}),e.originalBackground=e._renderer.getBackgroundByReference(),e._renderer.setBackground(0,0,0,0);const r=e._openGLRenderWindow.getRenderPasses();t.beginSelection();const i=[];for(e.currentPass=xt.MIN_KNOWN_PASS;e.currentPass<=xt.MAX_KNOWN_PASS;e.currentPass++)t.passRequired(e.currentPass)&&(t.preCapturePass(e.currentPass),e.captureZValues&&e.currentPass===xt.ACTOR_PASS&&typeof r[0].requestDepth=="function"&&typeof r[0].getFramebuffer=="function"&&r[0].requestDepth(),e._openGLRenderWindow.traverseAllPasses(),t.postCapturePass(e.currentPass),t.savePixelBuffer(e.currentPass),i.push(e.currentPass));return i.forEach(a=>{e.currentPass=a,t.processPixelBuffers()}),e.currentPass=xt.MAX_KNOWN_PASS,t.endSelection(),e._renderer.setBackground(e.originalBackground),t.invokeEvent({type:"EndEvent"}),!0},t.processPixelBuffers=()=>{e.props.forEach((r,i)=>{t.isPropHit(i)&&r.processSelectorPixelBuffers(t,e.propPixels[i])})},t.passRequired=r=>{if(r===xt.ID_HIGH24){if(e.fieldAssociation===us.FIELD_ASSOCIATION_POINTS)return e.maximumPointId>16777215;if(e.fieldAssociation===us.FIELD_ASSOCIATION_CELLS)return e.maximumCellId>16777215}return!0},t.savePixelBuffer=r=>{if(e.pixBuffer[r]=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),!e.rawPixBuffer[r]){const i=(e.area[2]-e.area[0]+1)*(e.area[3]-e.area[1]+1)*4;e.rawPixBuffer[r]=new Uint8Array(i),e.rawPixBuffer[r].set(e.pixBuffer[r])}if(r===xt.ACTOR_PASS){if(e.captureZValues){const i=e._openGLRenderWindow.getRenderPasses();if(typeof i[0].requestDepth=="function"&&typeof i[0].getFramebuffer=="function"){const a=i[0].getFramebuffer();a.saveCurrentBindingsAndBuffers(),a.bind(),e.zBuffer=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),a.restorePreviousBindingsAndBuffers()}}t.buildPropHitList(e.rawPixBuffer[r])}},t.buildPropHitList=r=>{let i=0;for(let a=0;a<=e.area[3]-e.area[1];a++)for(let o=0;o<=e.area[2]-e.area[0];o++){let s=_r(o,a,r,e.area);s>0&&(s--,s in e.hitProps||(e.hitProps[s]=!0,e.propPixels[s]=[]),e.propPixels[s].push(i*4)),++i}},t.renderProp=r=>{e.currentPass===xt.ACTOR_PASS&&(t.setPropColorValueFromInt(e.props.length+Zr),e.props.push(r))},t.renderCompositeIndex=r=>{e.currentPass===xt.COMPOSITE_INDEX_PASS&&t.setPropColorValueFromInt(r+Zr)},t.renderAttributeId=r=>{r<0||(e.maxAttributeId=r>e.maxAttributeId?r:e.maxAttributeId)},t.passTypeToString=r=>P.enumToString(xt,r),t.isPropHit=r=>!!e.hitProps[r],t.setPropColorValueFromInt=r=>{e.propColorValue[0]=r%256/255,e.propColorValue[1]=Math.floor(r/256)%256/255,e.propColorValue[2]=Math.floor(r/65536)%256/255},t.getPixelInformation=(r,i,a)=>{const o=i<0?0:i;if(o===0){if(a[0]=r[0],a[1]=r[1],r[0]<e.area[0]||r[0]>e.area[2]||r[1]<e.area[1]||r[1]>e.area[3])return null;const p=[r[0]-e.area[0],r[1]-e.area[1]],c=_r(p[0],p[1],e.pixBuffer[xt.ACTOR_PASS],e.area);if(c<=0||c-Zr>=e.props.length)return null;const f={};f.valid=!0,f.propID=c-Zr,f.prop=e.props[f.propID];let h=_r(p[0],p[1],e.pixBuffer[xt.COMPOSITE_INDEX_PASS],e.area);if((h<0||h>16777215)&&(h=0),f.compositeID=h-Zr,e.captureZValues){const x=(p[1]*(e.area[2]-e.area[0]+1)+p[0])*4;f.zValue=(256*e.zBuffer[x]+e.zBuffer[x+1])/65535,f.displayPosition=r}if(e.pixBuffer[xt.ID_LOW24]&&Y4(p[0],p[1],e.pixBuffer[xt.ID_LOW24],e.area)===0)return f;const v=_r(p[0],p[1],e.pixBuffer[xt.ID_LOW24],e.area),y=_r(p[0],p[1],e.pixBuffer[xt.ID_HIGH24],e.area);return f.attributeID=J4(v,y),f}const s=[r[0],r[1]],u=[0,0];let l=t.getPixelInformation(r,0,a);if(l&&l.valid)return l;for(let p=1;p<o;++p){for(let c=s[1]>p?s[1]-p:0;c<=s[1]+p;++c)if(u[1]=c,s[0]>=p&&(u[0]=s[0]-p,l=t.getPixelInformation(u,0,a),l&&l.valid)||(u[0]=s[0]+p,l=t.getPixelInformation(u,0,a),l&&l.valid))return l;for(let c=s[0]>=p?s[0]-(p-1):0;c<=s[0]+(p-1);++c)if(u[0]=c,s[1]>=p&&(u[1]=s[1]-p,l=t.getPixelInformation(u,0,a),l&&l.valid)||(u[1]=s[1]+p,l=t.getPixelInformation(u,0,a),l&&l.valid))return l}return a[0]=r[0],a[1]=r[1],null},t.generateSelection=(r,i,a,o)=>{const s=Math.floor(r),u=Math.floor(i),l=Math.floor(a),p=Math.floor(o),c=new Map,f=[0,0];for(let h=u;h<=p;h++)for(let v=s;v<=l;v++){const y=[v,h],x=t.getPixelInformation(y,0,f);if(x&&x.valid){const m=q4(x);if(!c.has(m))c.set(m,{info:x,pixelCount:1,attributeIDs:[x.attributeID]});else{const g=c.get(m);g.pixelCount++,e.captureZValues&&x.zValue<g.info.zValue&&(g.info=x),g.attributeIDs.indexOf(x.attributeID)===-1&&g.attributeIDs.push(x.attributeID)}}}return Q4(e.fieldAssociation,c,e.captureZValues,e._renderer,e._openGLRenderWindow)},t.getRawPixelBuffer=r=>e.rawPixBuffer[r],t.getPixelBuffer=r=>e.pixBuffer[r],t.attach=(r,i)=>{e._openGLRenderWindow=r,e._renderer=i};const n=t.setArea;t.setArea=function(){return n(...arguments)?(e.area[0]=Math.floor(e.area[0]),e.area[1]=Math.floor(e.area[1]),e.area[2]=Math.floor(e.area[2]),e.area[3]=Math.floor(e.area[3]),!0):!1}}const ML={area:void 0,currentPass:-1,propColorValue:null,props:null,maximumPointId:0,maximumCellId:0,idOffset:1};function Z4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ML,n),H4.extend(t,e,n),e.propColorValue=[0,0,0],e.props=[],e.area||(e.area=[0,0,0,0]),P.setGetArray(t,e,["area"],4),P.setGet(t,e,["_renderer","currentPass","_openGLRenderWindow","maximumPointId","maximumCellId"]),P.setGetArray(t,e,["propColorValue"],3),P.moveToProtected(t,e,["renderer","openGLRenderWindow"]),P.event(t,e,"event"),NL(t,e)}const RL=P.newInstance(Z4,"vtkOpenGLHardwareSelector");var e9={newInstance:RL,extend:Z4,...h5},t9={exports:{}};(function(t,e){(function(n){t.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(m,g){var d=m[0],S=m[1],T=m[2],C=m[3];d+=(S&T|~S&C)+g[0]-680876936|0,d=(d<<7|d>>>25)+S|0,C+=(d&S|~d&T)+g[1]-389564586|0,C=(C<<12|C>>>20)+d|0,T+=(C&d|~C&S)+g[2]+606105819|0,T=(T<<17|T>>>15)+C|0,S+=(T&C|~T&d)+g[3]-1044525330|0,S=(S<<22|S>>>10)+T|0,d+=(S&T|~S&C)+g[4]-176418897|0,d=(d<<7|d>>>25)+S|0,C+=(d&S|~d&T)+g[5]+1200080426|0,C=(C<<12|C>>>20)+d|0,T+=(C&d|~C&S)+g[6]-1473231341|0,T=(T<<17|T>>>15)+C|0,S+=(T&C|~T&d)+g[7]-45705983|0,S=(S<<22|S>>>10)+T|0,d+=(S&T|~S&C)+g[8]+1770035416|0,d=(d<<7|d>>>25)+S|0,C+=(d&S|~d&T)+g[9]-1958414417|0,C=(C<<12|C>>>20)+d|0,T+=(C&d|~C&S)+g[10]-42063|0,T=(T<<17|T>>>15)+C|0,S+=(T&C|~T&d)+g[11]-1990404162|0,S=(S<<22|S>>>10)+T|0,d+=(S&T|~S&C)+g[12]+1804603682|0,d=(d<<7|d>>>25)+S|0,C+=(d&S|~d&T)+g[13]-40341101|0,C=(C<<12|C>>>20)+d|0,T+=(C&d|~C&S)+g[14]-1502002290|0,T=(T<<17|T>>>15)+C|0,S+=(T&C|~T&d)+g[15]+1236535329|0,S=(S<<22|S>>>10)+T|0,d+=(S&C|T&~C)+g[1]-165796510|0,d=(d<<5|d>>>27)+S|0,C+=(d&T|S&~T)+g[6]-1069501632|0,C=(C<<9|C>>>23)+d|0,T+=(C&S|d&~S)+g[11]+643717713|0,T=(T<<14|T>>>18)+C|0,S+=(T&d|C&~d)+g[0]-373897302|0,S=(S<<20|S>>>12)+T|0,d+=(S&C|T&~C)+g[5]-701558691|0,d=(d<<5|d>>>27)+S|0,C+=(d&T|S&~T)+g[10]+38016083|0,C=(C<<9|C>>>23)+d|0,T+=(C&S|d&~S)+g[15]-660478335|0,T=(T<<14|T>>>18)+C|0,S+=(T&d|C&~d)+g[4]-405537848|0,S=(S<<20|S>>>12)+T|0,d+=(S&C|T&~C)+g[9]+568446438|0,d=(d<<5|d>>>27)+S|0,C+=(d&T|S&~T)+g[14]-1019803690|0,C=(C<<9|C>>>23)+d|0,T+=(C&S|d&~S)+g[3]-187363961|0,T=(T<<14|T>>>18)+C|0,S+=(T&d|C&~d)+g[8]+1163531501|0,S=(S<<20|S>>>12)+T|0,d+=(S&C|T&~C)+g[13]-1444681467|0,d=(d<<5|d>>>27)+S|0,C+=(d&T|S&~T)+g[2]-51403784|0,C=(C<<9|C>>>23)+d|0,T+=(C&S|d&~S)+g[7]+1735328473|0,T=(T<<14|T>>>18)+C|0,S+=(T&d|C&~d)+g[12]-1926607734|0,S=(S<<20|S>>>12)+T|0,d+=(S^T^C)+g[5]-378558|0,d=(d<<4|d>>>28)+S|0,C+=(d^S^T)+g[8]-2022574463|0,C=(C<<11|C>>>21)+d|0,T+=(C^d^S)+g[11]+1839030562|0,T=(T<<16|T>>>16)+C|0,S+=(T^C^d)+g[14]-35309556|0,S=(S<<23|S>>>9)+T|0,d+=(S^T^C)+g[1]-1530992060|0,d=(d<<4|d>>>28)+S|0,C+=(d^S^T)+g[4]+1272893353|0,C=(C<<11|C>>>21)+d|0,T+=(C^d^S)+g[7]-155497632|0,T=(T<<16|T>>>16)+C|0,S+=(T^C^d)+g[10]-1094730640|0,S=(S<<23|S>>>9)+T|0,d+=(S^T^C)+g[13]+681279174|0,d=(d<<4|d>>>28)+S|0,C+=(d^S^T)+g[0]-358537222|0,C=(C<<11|C>>>21)+d|0,T+=(C^d^S)+g[3]-722521979|0,T=(T<<16|T>>>16)+C|0,S+=(T^C^d)+g[6]+76029189|0,S=(S<<23|S>>>9)+T|0,d+=(S^T^C)+g[9]-640364487|0,d=(d<<4|d>>>28)+S|0,C+=(d^S^T)+g[12]-421815835|0,C=(C<<11|C>>>21)+d|0,T+=(C^d^S)+g[15]+530742520|0,T=(T<<16|T>>>16)+C|0,S+=(T^C^d)+g[2]-995338651|0,S=(S<<23|S>>>9)+T|0,d+=(T^(S|~C))+g[0]-198630844|0,d=(d<<6|d>>>26)+S|0,C+=(S^(d|~T))+g[7]+1126891415|0,C=(C<<10|C>>>22)+d|0,T+=(d^(C|~S))+g[14]-1416354905|0,T=(T<<15|T>>>17)+C|0,S+=(C^(T|~d))+g[5]-57434055|0,S=(S<<21|S>>>11)+T|0,d+=(T^(S|~C))+g[12]+1700485571|0,d=(d<<6|d>>>26)+S|0,C+=(S^(d|~T))+g[3]-1894986606|0,C=(C<<10|C>>>22)+d|0,T+=(d^(C|~S))+g[10]-1051523|0,T=(T<<15|T>>>17)+C|0,S+=(C^(T|~d))+g[1]-2054922799|0,S=(S<<21|S>>>11)+T|0,d+=(T^(S|~C))+g[8]+1873313359|0,d=(d<<6|d>>>26)+S|0,C+=(S^(d|~T))+g[15]-30611744|0,C=(C<<10|C>>>22)+d|0,T+=(d^(C|~S))+g[6]-1560198380|0,T=(T<<15|T>>>17)+C|0,S+=(C^(T|~d))+g[13]+1309151649|0,S=(S<<21|S>>>11)+T|0,d+=(T^(S|~C))+g[4]-145523070|0,d=(d<<6|d>>>26)+S|0,C+=(S^(d|~T))+g[11]-1120210379|0,C=(C<<10|C>>>22)+d|0,T+=(d^(C|~S))+g[2]+718787259|0,T=(T<<15|T>>>17)+C|0,S+=(C^(T|~d))+g[9]-343485551|0,S=(S<<21|S>>>11)+T|0,m[0]=d+m[0]|0,m[1]=S+m[1]|0,m[2]=T+m[2]|0,m[3]=C+m[3]|0}function a(m){var g=[],d;for(d=0;d<64;d+=4)g[d>>2]=m.charCodeAt(d)+(m.charCodeAt(d+1)<<8)+(m.charCodeAt(d+2)<<16)+(m.charCodeAt(d+3)<<24);return g}function o(m){var g=[],d;for(d=0;d<64;d+=4)g[d>>2]=m[d]+(m[d+1]<<8)+(m[d+2]<<16)+(m[d+3]<<24);return g}function s(m){var g=m.length,d=[1732584193,-271733879,-1732584194,271733878],S,T,C,w,_,E;for(S=64;S<=g;S+=64)i(d,a(m.substring(S-64,S)));for(m=m.substring(S-64),T=m.length,C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S=0;S<T;S+=1)C[S>>2]|=m.charCodeAt(S)<<(S%4<<3);if(C[S>>2]|=128<<(S%4<<3),S>55)for(i(d,C),S=0;S<16;S+=1)C[S]=0;return w=g*8,w=w.toString(16).match(/(.*?)(.{0,8})$/),_=parseInt(w[2],16),E=parseInt(w[1],16)||0,C[14]=_,C[15]=E,i(d,C),d}function u(m){var g=m.length,d=[1732584193,-271733879,-1732584194,271733878],S,T,C,w,_,E;for(S=64;S<=g;S+=64)i(d,o(m.subarray(S-64,S)));for(m=S-64<g?m.subarray(S-64):new Uint8Array(0),T=m.length,C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S=0;S<T;S+=1)C[S>>2]|=m[S]<<(S%4<<3);if(C[S>>2]|=128<<(S%4<<3),S>55)for(i(d,C),S=0;S<16;S+=1)C[S]=0;return w=g*8,w=w.toString(16).match(/(.*?)(.{0,8})$/),_=parseInt(w[2],16),E=parseInt(w[1],16)||0,C[14]=_,C[15]=E,i(d,C),d}function l(m){var g="",d;for(d=0;d<4;d+=1)g+=r[m>>d*8+4&15]+r[m>>d*8&15];return g}function p(m){var g;for(g=0;g<m.length;g+=1)m[g]=l(m[g]);return m.join("")}p(s("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function m(g,d){return g=g|0||0,g<0?Math.max(g+d,0):Math.min(g,d)}ArrayBuffer.prototype.slice=function(g,d){var S=this.byteLength,T=m(g,S),C=S,w,_,E,D;return d!==n&&(C=m(d,S)),T>C?new ArrayBuffer(0):(w=C-T,_=new ArrayBuffer(w),E=new Uint8Array(_),D=new Uint8Array(this,T,w),E.set(D),_)}}();function c(m){return/[\u0080-\uFFFF]/.test(m)&&(m=unescape(encodeURIComponent(m))),m}function f(m,g){var d=m.length,S=new ArrayBuffer(d),T=new Uint8Array(S),C;for(C=0;C<d;C+=1)T[C]=m.charCodeAt(C);return g?T:S}function h(m){return String.fromCharCode.apply(null,new Uint8Array(m))}function v(m,g,d){var S=new Uint8Array(m.byteLength+g.byteLength);return S.set(new Uint8Array(m)),S.set(new Uint8Array(g),m.byteLength),S}function y(m){var g=[],d=m.length,S;for(S=0;S<d-1;S+=2)g.push(parseInt(m.substr(S,2),16));return String.fromCharCode.apply(String,g)}function x(){this.reset()}return x.prototype.append=function(m){return this.appendBinary(c(m)),this},x.prototype.appendBinary=function(m){this._buff+=m,this._length+=m.length;var g=this._buff.length,d;for(d=64;d<=g;d+=64)i(this._hash,a(this._buff.substring(d-64,d)));return this._buff=this._buff.substring(d-64),this},x.prototype.end=function(m){var g=this._buff,d=g.length,S,T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],C;for(S=0;S<d;S+=1)T[S>>2]|=g.charCodeAt(S)<<(S%4<<3);return this._finish(T,d),C=p(this._hash),m&&(C=y(C)),this.reset(),C},x.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},x.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},x.prototype.setState=function(m){return this._buff=m.buff,this._length=m.length,this._hash=m.hash,this},x.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},x.prototype._finish=function(m,g){var d=g,S,T,C;if(m[d>>2]|=128<<(d%4<<3),d>55)for(i(this._hash,m),d=0;d<16;d+=1)m[d]=0;S=this._length*8,S=S.toString(16).match(/(.*?)(.{0,8})$/),T=parseInt(S[2],16),C=parseInt(S[1],16)||0,m[14]=T,m[15]=C,i(this._hash,m)},x.hash=function(m,g){return x.hashBinary(c(m),g)},x.hashBinary=function(m,g){var d=s(m),S=p(d);return g?y(S):S},x.ArrayBuffer=function(){this.reset()},x.ArrayBuffer.prototype.append=function(m){var g=v(this._buff.buffer,m),d=g.length,S;for(this._length+=m.byteLength,S=64;S<=d;S+=64)i(this._hash,o(g.subarray(S-64,S)));return this._buff=S-64<d?new Uint8Array(g.buffer.slice(S-64)):new Uint8Array(0),this},x.ArrayBuffer.prototype.end=function(m){var g=this._buff,d=g.length,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T,C;for(T=0;T<d;T+=1)S[T>>2]|=g[T]<<(T%4<<3);return this._finish(S,d),C=p(this._hash),m&&(C=y(C)),this.reset(),C},x.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},x.ArrayBuffer.prototype.getState=function(){var m=x.prototype.getState.call(this);return m.buff=h(m.buff),m},x.ArrayBuffer.prototype.setState=function(m){return m.buff=f(m.buff,!0),x.prototype.setState.call(this,m)},x.ArrayBuffer.prototype.destroy=x.prototype.destroy,x.ArrayBuffer.prototype._finish=x.prototype._finish,x.ArrayBuffer.hash=function(m,g){var d=u(new Uint8Array(m)),S=p(d);return g?y(S):S},x})})(t9);var FL=t9.exports;const LL=yc(FL),kL=["lastShaderProgramBound","context","_openGLRenderWindow"];function BL(t,e){e.classHierarchy.push("vtkShaderCache"),t.replaceShaderValues=(n,r,i)=>{let a=r;i.length>0&&(a=Q.substitute(a,"VSOut","GSOut").result);const o=e._openGLRenderWindow.getWebgl2();let s=`
`,u=`#version 100
`;o?u=`#version 300 es
#define attribute in
#define textureCube texture
#define texture2D texture
#define textureCubeLod textureLod
#define texture2DLod textureLod
`:(e.context.getExtension("OES_standard_derivatives"),e.context.getExtension("EXT_frag_depth")&&(s=`#extension GL_EXT_frag_depth : enable
`),e.context.getExtension("EXT_shader_texture_lod")&&(s+=`#extension GL_EXT_shader_texture_lod : enable
#define textureCubeLod textureCubeLodEXT
#define texture2DLod texture2DLodEXT`)),a=Q.substitute(a,"//VTK::System::Dec",[`${u}
`,o?"":`#extension GL_OES_standard_derivatives : enable
`,s,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;let l=Q.substitute(n,"//VTK::System::Dec",[`${u}
`,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;if(o){l=Q.substitute(l,"varying","out").result,a=Q.substitute(a,"varying","in").result;let c="",f=0;for(;a.includes(`gl_FragData[${f}]`);)a=Q.substitute(a,`gl_FragData\\[${f}\\]`,`fragOutput${f}`).result,c+=`layout(location = ${f}) out vec4 fragOutput${f};
`,f++;a=Q.substitute(a,"//VTK::Output::Dec",c).result}const p=Q.substitute(i,"//VTK::System::Dec",u).result;return{VSSource:l,FSSource:a,GSSource:p}},t.readyShaderProgramArray=(n,r,i)=>{const a=t.replaceShaderValues(n,r,i),o=t.getShaderProgram(a.VSSource,a.FSSource,a.GSSource);return t.readyShaderProgram(o)},t.readyShaderProgram=n=>!n||!n.getCompiled()&&!n.compileShader()||!t.bindShaderProgram(n)?null:n,t.getShaderProgram=(n,r,i)=>{const a=`${n}${r}${i}`,o=LL.hash(a);if(!(o in e.shaderPrograms)){const s=Q.newInstance();return s.setContext(e.context),s.getVertexShader().setSource(n),s.getFragmentShader().setSource(r),i&&s.getGeometryShader().setSource(i),s.setMd5Hash(o),e.shaderPrograms[o]=s,s}return e.shaderPrograms[o]},t.releaseGraphicsResources=n=>{t.releaseCurrentShaderProgram(),Object.keys(e.shaderPrograms).map(r=>e.shaderPrograms[r]).forEach(r=>r.cleanup()),e.shaderPrograms={}},t.releaseCurrentShaderProgram=()=>{e.lastShaderProgramBound&&(e.lastShaderProgramBound.cleanup(),e.lastShaderProgramBound=null)},t.bindShaderProgram=n=>(e.lastShaderProgramBound===n||(e.lastShaderProgramBound&&e.lastShaderProgramBound.release(),n.bind(),e.lastShaderProgramBound=n),1)}const VL={lastShaderProgramBound:null,shaderPrograms:null,context:null};function n9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,VL,n),e.shaderPrograms={},P.obj(t,e),P.setGet(t,e,kL),P.moveToProtected(t,e,["openGLRenderWindow"]),BL(t,e)}const AL=P.newInstance(n9,"vtkShaderCache");var UL={newInstance:AL,extend:n9};const{vtkErrorMacro:GL}=P;function PL(t,e){e.classHierarchy.push("vtkOpenGLTextureUnitManager"),t.deleteTable=()=>{for(let n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]===!0&&GL("some texture units  were not properly released");e.textureUnits=[],e.numberOfTextureUnits=0},t.setContext=n=>{if(e.context!==n){if(e.context!==0&&t.deleteTable(),e.context=n,e.context){e.numberOfTextureUnits=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);for(let r=0;r<e.numberOfTextureUnits;++r)e.textureUnits[r]=!1}t.modified()}},t.allocate=()=>{for(let n=0;n<e.numberOfTextureUnits;n++)if(!t.isAllocated(n))return e.textureUnits[n]=!0,n;return-1},t.allocateUnit=n=>t.isAllocated(n)?-1:(e.textureUnits[n]=!0,n),t.isAllocated=n=>e.textureUnits[n],t.free=n=>{e.textureUnits[n]=!1},t.freeAll=()=>{for(let n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]=!1}}const IL={context:null,numberOfTextureUnits:0,textureUnits:0};function r9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,IL,n),P.obj(t,e),e.textureUnits=[],P.get(t,e,["numberOfTextureUnits"]),P.setGet(t,e,["context"]),PL(t,e)}const zL=P.newInstance(r9,"vtkOpenGLTextureUnitManager");var WL={newInstance:zL,extend:r9};function jL(t,e){e.classHierarchy.push("vtkRenderWindowViewNode"),t.getViewNodeFactory=()=>null,t.getAspectRatio=()=>e.size[0]/e.size[1],t.getAspectRatioForRenderer=n=>{const r=n.getViewportByReference();return e.size[0]*(r[2]-r[0])/((r[3]-r[1])*e.size[1])},t.isInViewport=(n,r,i)=>{const a=i.getViewportByReference(),o=t.getFramebufferSize();return a[0]*o[0]<=n&&a[2]*o[0]>=n&&a[1]*o[1]<=r&&a[3]*o[1]>=r},t.getViewportSize=n=>{const r=n.getViewportByReference(),i=t.getFramebufferSize();return[(r[2]-r[0])*i[0],(r[3]-r[1])*i[1]]},t.getViewportCenter=n=>{const r=t.getViewportSize(n);return[r[0]*.5,r[1]*.5]},t.displayToNormalizedDisplay=(n,r,i)=>{const a=t.getFramebufferSize();return[n/a[0],r/a[1],i]},t.normalizedDisplayToDisplay=(n,r,i)=>{const a=t.getFramebufferSize();return[n*a[0],r*a[1],i]},t.worldToView=(n,r,i,a)=>a.worldToView(n,r,i),t.viewToWorld=(n,r,i,a)=>a.viewToWorld(n,r,i),t.worldToDisplay=(n,r,i,a)=>{const o=a.worldToView(n,r,i),s=t.getViewportSize(a),u=a.viewToProjection(o[0],o[1],o[2],s[0]/s[1]),l=a.projectionToNormalizedDisplay(u[0],u[1],u[2]);return t.normalizedDisplayToDisplay(l[0],l[1],l[2])},t.displayToWorld=(n,r,i,a)=>{const o=t.displayToNormalizedDisplay(n,r,i),s=a.normalizedDisplayToProjection(o[0],o[1],o[2]),u=t.getViewportSize(a),l=a.projectionToView(s[0],s[1],s[2],u[0]/u[1]);return a.viewToWorld(l[0],l[1],l[2])},t.normalizedDisplayToViewport=(n,r,i,a)=>{let o=a.getViewportByReference();o=t.normalizedDisplayToDisplay(o[0],o[1],0);const s=t.normalizedDisplayToDisplay(n,r,i);return[s[0]-o[0]-.5,s[1]-o[1]-.5,i]},t.viewportToNormalizedViewport=(n,r,i,a)=>{const o=t.getViewportSize(a);return o&&o[0]!==0&&o[1]!==0?[n/(o[0]-1),r/(o[1]-1),i]:[n,r,i]},t.normalizedViewportToViewport=(n,r,i,a)=>{const o=t.getViewportSize(a);return[n*(o[0]-1),r*(o[1]-1),i]},t.displayToLocalDisplay=(n,r,i)=>{const a=t.getFramebufferSize();return[n,a[1]-r-1,i]},t.viewportToNormalizedDisplay=(n,r,i,a)=>{let o=a.getViewportByReference();o=t.normalizedDisplayToDisplay(o[0],o[1],0);const s=n+o[0]+.5,u=r+o[1]+.5;return t.displayToNormalizedDisplay(s,u,i)},t.getComputedDevicePixelRatio=()=>e.size[0]/t.getContainerSize()[0],t.getContainerSize=()=>{P.vtkErrorMacro("not implemented")},t.getPixelData=(n,r,i,a)=>{P.vtkErrorMacro("not implemented")},t.createSelector=()=>{P.vtkErrorMacro("not implemented")}}const $L={size:void 0,selector:void 0};function i9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$L,n),e.size||(e.size=[300,300]),P.getArray(t,e,["size"],2),P.get(t,e,["selector"]),He.extend(t,e,n),jL(t,e)}const HL=P.newInstance(i9,"vtkRenderWindowViewNode");var a9={newInstance:HL,extend:i9};const KL="__getUnderlyingContext";function XL(){const t=new Map,e={apply(i,a,o){return t.has(o[0])?t.get(o[0]):i.apply(a,o)}};function n(i){return{apply(a,o,s){return t.set(i,s[0]),a.apply(o,s)}}}const r=Object.create(null);return r.getParameter=(i,a,o,s)=>new Proxy(s.bind(i),e),r.depthMask=(i,a,o,s)=>new Proxy(s.bind(i),n(i.DEPTH_WRITEMASK)),{get(i,a,o){if(a===KL)return()=>i;let s=Reflect.get(i,a,i);s instanceof Function&&(s=s.bind(i));const u=r[a];return u?u(i,a,o,s):s}}}const{vtkDebugMacro:c2,vtkErrorMacro:l2}=P,qL={position:"absolute",top:0,left:0,width:"100%",height:"100%"},YL=["activateTexture","deactivateTexture","disableCullFace","enableCullFace","get3DContext","getActiveFramebuffer","getContext","getDefaultTextureByteSize","getDefaultTextureInternalFormat","getDefaultToWebgl2","getGLInformations","getGraphicsMemoryInfo","getGraphicsResourceForObject","getHardwareMaximumLineWidth","getPixelData","getShaderCache","getTextureUnitForTexture","getTextureUnitManager","getWebgl2","makeCurrent","releaseGraphicsResources","registerGraphicsResourceUser","unregisterGraphicsResourceUser","restoreContext","setActiveFramebuffer","setContext","setDefaultToWebgl2","setGraphicsResourceForObject"];function Kt(t,e,n){const r=t.createFramebuffer(),i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,e,2,2,0,e,n,null),t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER);return t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null),a===t.FRAMEBUFFER_COMPLETE}let dc=0;const o9=[];function JL(){dc++,o9.forEach(t=>t(dc))}function QL(){dc--,o9.forEach(t=>t(dc))}function f2(t){t.preventDefault()}function ZL(t,e){e.classHierarchy.push("vtkOpenGLRenderWindow");let n;function r(){return n||(n=XL()),n}t.getViewNodeFactory=()=>e.myFactory,e.canvas.addEventListener("webglcontextlost",f2,!1),e.canvas.addEventListener("webglcontextrestored",t.restoreContext,!1);const i=[0,0];function a(){e.renderable&&(e.size[0]!==i[0]||e.size[1]!==i[1])&&(i[0]=e.size[0],i[1]=e.size[1],e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1])),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none"),e.containerSize=null}t.onModified(a),t.buildPass=c=>{if(c){if(!e.renderable)return;t.prepareNodes(),t.addMissingNodes(e.renderable.getRenderersByReference()),t.addMissingNodes(e.renderable.getChildRenderWindowsByReference()),t.removeUnusedNodes(),t.initialize(),e.children.forEach(f=>{var h;(h=f.setOpenGLRenderWindow)==null||h.call(f,t)})}},t.initialize=()=>{if(!e.initialized){if(e.rootOpenGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.rootOpenGLRenderWindow)e.context2D=t.get2DContext();else{e.context=t.get3DContext(),t.resizeFromChildRenderWindows(),e.context&&JL(),e.textureUnitManager=WL.newInstance(),e.textureUnitManager.setContext(e.context),e.shaderCache.setContext(e.context);const c=e.context;c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA),c.depthFunc(c.LEQUAL),c.enable(c.BLEND)}e.initialized=!0}},t.makeCurrent=()=>{e.context.makeCurrent()},t.setContainer=c=>{e.el&&e.el!==c&&(e.canvas.parentNode!==e.el&&l2("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==c&&(e.el=c,e.el&&(e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage)),t.modified())},t.getContainer=()=>e.el,t.getContainerSize=()=>{if(!e.containerSize&&e.el){const{width:c,height:f}=e.el.getBoundingClientRect();e.containerSize=[c,f]}return e.containerSize||e.size},t.getFramebufferSize=()=>{var f;return((f=e.activeFramebuffer)==null?void 0:f.getSize())||e.size},t.getPixelData=(c,f,h,v)=>{const y=new Uint8Array((h-c+1)*(v-f+1)*4);return e.context.readPixels(c,f,h-c+1,v-f+1,e.context.RGBA,e.context.UNSIGNED_BYTE,y),y},t.get3DContext=function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0,powerPreference:"high-performance"},f=null;const h=typeof WebGL2RenderingContext<"u";return e.webgl2=!1,e.defaultToWebgl2&&h&&(f=e.canvas.getContext("webgl2",c),f&&(e.webgl2=!0,c2("using webgl2"))),f||(c2("using webgl1"),f=e.canvas.getContext("webgl",c)||e.canvas.getContext("experimental-webgl",c)),new Proxy(f,r())},t.get2DContext=function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.canvas.getContext("2d",c)},t.restoreContext=()=>{const c=Ar.newInstance();c.setCurrentOperation("Release"),c.traverse(t,null)},t.activateTexture=c=>{const f=e._textureResourceIds.get(c);if(f!==void 0){e.context.activeTexture(e.context.TEXTURE0+f);return}const h=t.getTextureUnitManager().allocate();if(h<0){l2("Hardware does not support the number of textures defined.");return}e._textureResourceIds.set(c,h),e.context.activeTexture(e.context.TEXTURE0+h)},t.deactivateTexture=c=>{const f=e._textureResourceIds.get(c);f!==void 0&&(t.getTextureUnitManager().free(f),e._textureResourceIds.delete(c))},t.getTextureUnitForTexture=c=>{const f=e._textureResourceIds.get(c);return f!==void 0?f:-1},t.getDefaultTextureByteSize=function(c){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.webgl2)switch(c){case Be.CHAR:case Be.SIGNED_CHAR:case Be.UNSIGNED_CHAR:return 1;case f:case h:case Be.UNSIGNED_SHORT:case Be.SHORT:case Be.VOID:return 2;default:return 4}return 1},t.getDefaultTextureInternalFormat=function(c,f){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.webgl2)switch(c){case Be.UNSIGNED_CHAR:switch(f){case 1:return e.context.R8;case 2:return e.context.RG8;case 3:return e.context.RGB8;case 4:default:return e.context.RGBA8}case(h&&!v&&Be.UNSIGNED_SHORT):switch(f){case 1:return h.R16_EXT;case 2:return h.RG16_EXT;case 3:return h.RGB16_EXT;case 4:default:return h.RGBA16_EXT}case(h&&!v&&Be.SHORT):switch(f){case 1:return h.R16_SNORM_EXT;case 2:return h.RG16_SNORM_EXT;case 3:return h.RGB16_SNORM_EXT;case 4:default:return h.RGBA16_SNORM_EXT}case Be.UNSIGNED_SHORT:case Be.SHORT:case Be.FLOAT:default:switch(f){case 1:return v?e.context.R16F:e.context.R32F;case 2:return v?e.context.RG16F:e.context.RG32F;case 3:return v?e.context.RGB16F:e.context.RGB32F;case 4:default:return v?e.context.RGBA16F:e.context.RGBA32F}}switch(f){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:default:return e.context.RGBA}},t.setBackgroundImage=c=>{e.bgImage.src=c.src},t.setUseBackgroundImage=c=>{e.useBackgroundImage=c,e.useBackgroundImage&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)};function o(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.imageFormat;const f=document.createElement("canvas"),h=f.getContext("2d");f.width=e.canvas.width,f.height=e.canvas.height,h.drawImage(e.canvas,0,0);const v=e.canvas.getBoundingClientRect();e.renderable.getRenderers().forEach(g=>{g.getViewProps().forEach(S=>{if(S.getContainer){const C=S.getContainer().getElementsByTagName("canvas");for(let w=0;w<C.length;w++){const _=C[w],E=_.getBoundingClientRect(),D=E.x-v.x,O=E.y-v.y;h.drawImage(_,D,O)}}})});const m=f.toDataURL(c);f.remove(),t.invokeImageReady(m)}t.captureNextImage=function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",{resetCamera:f=!1,size:h=null,scale:v=1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.deleted)return null;e.imageFormat=c;const y=e.notifyStartCaptureImage;return e.notifyStartCaptureImage=!0,e._screenshot={size:h||v!==1?h||e.size.map(x=>x*v):null},new Promise((x,m)=>{const g=t.onImageReady(d=>{var S;if(e._screenshot.size===null)e.notifyStartCaptureImage=y,g.unsubscribe(),e._screenshot.placeHolder&&(e.size=e._screenshot.originalSize,t.modified(),e._screenshot.cameras&&e._screenshot.cameras.forEach(T=>{let{restoreParamsFn:C,arg:w}=T;return C(w)}),t.traverseAllPasses(),e.el.removeChild(e._screenshot.placeHolder),e._screenshot.placeHolder.remove(),e._screenshot=null),x(d);else{const T=document.createElement("img");if(T.style=qL,T.src=d,e._screenshot.placeHolder=e.el.appendChild(T),e.canvas.style.display="none",e._screenshot.originalSize=e.size,e.size=e._screenshot.size,(S=e.rootOpenGLRenderWindow)==null||S.resizeFromChildRenderWindows(),e._screenshot.size=null,t.modified(),f){const C=f!==!0;e._screenshot.cameras=e.renderable.getRenderers().map(w=>{const _=w.getActiveCamera(),E=_.get("focalPoint","position","parallelScale");return{resetCameraArgs:C?{renderer:w}:void 0,resetCameraFn:C?f:w.resetCamera,restoreParamsFn:_.set,arg:JSON.parse(JSON.stringify(E))}}),e._screenshot.cameras.forEach(w=>{let{resetCameraFn:_,resetCameraArgs:E}=w;return _(E)})}t.traverseAllPasses()}})})};let s;t.getHardwareMaximumLineWidth=()=>{if(s!=null)return s;const c=t.get3DContext(),f=c.getParameter(c.ALIASED_LINE_WIDTH_RANGE);return s=f[1],f[1]},t.getGLInformations=()=>{if(e._glInformation)return e._glInformation;const c=t.get3DContext(),f=c.getExtension("OES_texture_float"),h=c.getExtension("OES_texture_half_float"),v=c.getExtension("WEBGL_debug_renderer_info"),y=c.getExtension("WEBGL_draw_buffers"),x=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),m=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",c.getParameter(c.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",c.getParameter(c.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",c.getParameter(c.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",c.getParameter(c.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",c.getParameter(c.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",c.getParameter(c.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",c.getParameter(c.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",x&&c.getParameter(x.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",c.getParameter(c.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",c.getParameter(c.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",c.getParameter(c.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",c.getParameter(c.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",c.getParameter(c.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",c.getParameter(c.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",c.getParameter(c.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",c.getParameter(c.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",c.getParameter(c.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",c.getParameter(c.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",c.getParameter(c.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",c.getParameter(c.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",c.getParameter(c.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[f&&Kt(c,c.RGBA,c.UNSIGNED_BYTE)?"RGBA":"",f&&Kt(c,c.RGB,c.UNSIGNED_BYTE)?"RGB":"",f&&Kt(c,c.LUMINANCE,c.UNSIGNED_BYTE)?"LUMINANCE":"",f&&Kt(c,c.ALPHA,c.UNSIGNED_BYTE)?"ALPHA":"",f&&Kt(c,c.LUMINANCE_ALPHA,c.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[h&&Kt(c,c.RGBA,h.HALF_FLOAT_OES)?"RGBA":"",h&&Kt(c,c.RGB,h.HALF_FLOAT_OES)?"RGB":"",h&&Kt(c,c.LUMINANCE,h.HALF_FLOAT_OES)?"LUMINANCE":"",h&&Kt(c,c.ALPHA,h.HALF_FLOAT_OES)?"ALPHA":"",h&&Kt(c,c.LUMINANCE_ALPHA,h.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[f&&Kt(c,c.RGBA,c.FLOAT)?"RGBA":"",f&&Kt(c,c.RGB,c.FLOAT)?"RGB":"",f&&Kt(c,c.LUMINANCE,c.FLOAT)?"LUMINANCE":"",f&&Kt(c,c.ALPHA,c.FLOAT)?"ALPHA":"",f&&Kt(c,c.LUMINANCE_ALPHA,c.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",y?c.getParameter(y.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",[c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_FLOAT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",[c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_FLOAT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",[c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.LOW_FLOAT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",[c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_FLOAT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",[c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",[c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",[c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_INT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_INT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",[c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_INT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",[c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.LOW_INT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.LOW_INT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.VERTEX_SHADER,c.LOW_INT).rangeMax,"</sup>)"].join("")],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",[c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_INT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_INT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",[c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_INT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",[c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_INT).precision," (-2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_INT).rangeMin,"</sup> - 2<sup>",c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.LOW_INT).rangeMax,"</sup>)"].join("")],["Supported Extensions","EXTENSIONS",c.getSupportedExtensions().join("<br/>					    ")],["WebGL Renderer","RENDERER",c.getParameter(c.RENDERER)],["WebGL Vendor","VENDOR",c.getParameter(c.VENDOR)],["WebGL Version","VERSION",c.getParameter(c.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",c.getParameter(c.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",v&&c.getParameter(v.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",v&&c.getParameter(v.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",e.webgl2?2:1]],g={};for(;m.length;){const[d,S,T]=m.pop();S&&(g[S]={label:d,value:T})}return e._glInformation=g,g},t.traverseAllPasses=()=>{var f;if(e.renderPasses)for(let h=0;h<e.renderPasses.length;++h)e.renderPasses[h].traverse(t,null);t.copyParentContent(),e.notifyStartCaptureImage&&o();const c=e.renderable.getChildRenderWindowsByReference();for(let h=0;h<c.length;++h)(f=t.getViewNodeFor(c[h]))==null||f.traverseAllPasses()},t.copyParentContent=()=>{const c=e.rootOpenGLRenderWindow;if(!c||!e.context2D||e.children.some(v=>{var y;return!!((y=v.getSelector)!=null&&y.call(v))}))return;const f=c.getCanvas(),h=e.canvas;e.context2D.drawImage(f,0,f.height-h.height,h.width,h.height,0,0,h.width,h.height)},t.resizeFromChildRenderWindows=()=>{var f;const c=e.renderable.getChildRenderWindowsByReference();if(c.length>0){const h=[0,0];for(let v=0;v<c.length;++v){const y=(f=t.getViewNodeFor(c[v]))==null?void 0:f.getSize();y&&(h[0]=y[0]>h[0]?y[0]:h[0],h[1]=y[1]>h[1]?y[1]:h[1])}t.setSize(...h)}},t.disableCullFace=()=>{e.cullFaceEnabled&&(e.context.disable(e.context.CULL_FACE),e.cullFaceEnabled=!1)},t.enableCullFace=()=>{e.cullFaceEnabled||(e.context.enable(e.context.CULL_FACE),e.cullFaceEnabled=!0)},t.setViewStream=c=>{if(e.viewStream===c)return!1;if(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=c,e.viewStream){const f=e.renderable.getRenderers()[0];f.getBackgroundByReference()[3]=0,t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(h=>t.setBackgroundImage(h.image)),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()}return!0},t.createSelector=()=>{const c=e9.newInstance();return c.setOpenGLRenderWindow(t),c};function u(){e.canvas.removeEventListener("webglcontextlost",f2),e.canvas.removeEventListener("webglcontextrestored",t.restoreContext)}t.delete=P.chain(()=>{e.context&&QL(),t.setContainer(),t.setViewStream()},u,t.delete),t.setActiveFramebuffer=c=>{e.activeFramebuffer=c};const l=t.setSize;t.setSize=(c,f)=>{const h=l(c,f);return h&&t.invokeWindowResizeEvent({width:c,height:f}),h},t.registerGraphicsResourceUser=(c,f)=>{e._graphicsResources.has(c)||t.setGraphicsResourceForObject(c,null,null);const h=e._graphicsResources.get(c);h==null||h.users.add(f)},t.unregisterGraphicsResourceUser=(c,f)=>{var v;const h=e._graphicsResources.get(c);h&&(h.users.delete(f),h.users.size||((v=h.oglObject)==null||v.releaseGraphicsResources(t),e._graphicsResources.delete(c)))},t.getGraphicsResourceForObject=c=>e._graphicsResources.get(c),t.setGraphicsResourceForObject=(c,f,h)=>{var y;if(!c)return;const v=e._graphicsResources.get(c);(y=v==null?void 0:v.oglObject)==null||y.releaseGraphicsResources(t),e._graphicsResources.set(c,{coreObject:c,oglObject:f,hash:h,users:(v==null?void 0:v.users)??new Set})},t.getGraphicsMemoryInfo=()=>{let c=0;return e._graphicsResources.forEach(f=>{let{oglObject:h}=f;c+=h.getAllocatedGPUMemoryInBytes()}),c},t.releaseGraphicsResources=()=>{e.shaderCache!==null&&e.shaderCache.releaseGraphicsResources(t),e._graphicsResources.forEach(c=>{let{oglObject:f}=c;f.releaseGraphicsResources(t)}),e._graphicsResources.clear(),e.textureUnitManager!==null&&e.textureUnitManager.freeAll(),e.renderable.getRenderersByReference().forEach(c=>{const f=t.getViewNodeFor(c);f==null||f.releaseGraphicsResources()})};const p={...t};YL.forEach(c=>{t[c]=function(){return e.rootOpenGLRenderWindow?e.rootOpenGLRenderWindow[c](...arguments):p[c](...arguments)}})}const ek={cullFaceEnabled:!1,shaderCache:null,initialized:!1,context:null,context2D:null,canvas:null,cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,activeFramebuffer:null,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};function tk(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ek,n),a9.extend(t,e,n),e.canvas||(e.canvas=document.createElement("canvas"),e.canvas.style.width="100%"),e.selector||(e.selector=e9.newInstance(),e.selector.setOpenGLRenderWindow(t)),e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",e._textureResourceIds=new Map,e._graphicsResources=new Map,e._glInformation=null,e.myFactory=oT.newInstance(),e.shaderCache=UL.newInstance(),e.shaderCache.setOpenGLRenderWindow(t),e.renderPasses[0]=dL.newInstance(),P.get(t,e,["shaderCache","textureUnitManager","webgl2","useBackgroundImage","activeFramebuffer","rootOpenGLRenderWindow"]),P.setGet(t,e,["initialized","context","context2D","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","useOffScreen"]),P.setGetArray(t,e,["size"],2),P.event(t,e,"imageReady"),P.event(t,e,"windowResizeEvent"),ZL(t,e)}const s9=P.newInstance(tk,"vtkOpenGLRenderWindow");d1("WebGL",s9);Lt("vtkRenderWindow",s9);const Hl=["setBindGroup","setIndexBuffer","setVertexBuffer","draw","drawIndexed"];function nk(t,e){e.classHierarchy.push("vtkWebGPURenderEncoder"),t.begin=n=>{e.drawCallbacks=[],e.handle=n.beginRenderPass(e.description),e.label&&e.handle.pushDebugGroup(e.label)},t.end=()=>{for(let n=0;n<e.drawCallbacks.length;n++){const r=e.drawCallbacks[n],i=r.pipeline;t.setPipeline(i);for(let a=0;a<r.callbacks.length;a++)r.callbacks[a](t)}e.label&&e.handle.popDebugGroup(),e.handle.end(),e.boundPipeline=null},t.setPipeline=n=>{var i,a;if(e.boundPipeline===n)return;e.handle.setPipeline(n.getHandle());const r=n.getPipelineDescription();if(e.colorTextureViews.length!==r.fragment.targets.length)console.log(`mismatched attachment counts on pipeline ${r.fragment.targets.length} while encoder has ${e.colorTextureViews.length}`),console.trace();else for(let o=0;o<e.colorTextureViews.length;o++){const s=(i=e.colorTextureViews[o].getTexture())==null?void 0:i.getFormat();s&&s!==r.fragment.targets[o].format&&(console.log(`mismatched attachments for attachment ${o} on pipeline ${r.fragment.targets[o].format} while encoder has ${s}`),console.trace())}if(!e.depthTextureView!=!("depthStencil"in r))console.log("mismatched depth attachments"),console.trace();else if(e.depthTextureView){const o=(a=e.depthTextureView.getTexture())==null?void 0:a.getFormat();o&&o!==r.depthStencil.format&&(console.log(`mismatched depth attachments on pipeline ${r.depthStencil.format} while encoder has ${o}`),console.trace())}e.boundPipeline=n},t.replaceShaderCode=n=>{e.replaceShaderCodeFunction(n)},t.setColorTextureView=(n,r)=>{e.colorTextureViews[n]!==r&&(e.colorTextureViews[n]=r)},t.activateBindGroup=n=>{const r=e.boundPipeline.getDevice(),i=e.boundPipeline.getBindGroupLayoutCount(n.getLabel());e.handle.setBindGroup(i,n.getBindGroup(r));const a=r.getBindGroupLayoutDescription(n.getBindGroupLayout(r)),o=r.getBindGroupLayoutDescription(e.boundPipeline.getBindGroupLayout(i));a!==o&&(console.log(`renderEncoder ${e.pipelineHash} mismatched bind group layouts bind group has
${a}
 versus pipeline
${o}
`),console.trace())},t.attachTextureViews=()=>{for(let n=0;n<e.colorTextureViews.length;n++)e.description.colorAttachments[n]?e.description.colorAttachments[n].view=e.colorTextureViews[n].getHandle():e.description.colorAttachments[n]={view:e.colorTextureViews[n].getHandle()};e.depthTextureView&&(e.description.depthStencilAttachment.view=e.depthTextureView.getHandle())},t.registerDrawCallback=(n,r)=>{for(let i=0;i<e.drawCallbacks.length;i++)if(e.drawCallbacks[i].pipeline===n){e.drawCallbacks[i].callbacks.push(r);return}e.drawCallbacks.push({pipeline:n,callbacks:[r]})};for(let n=0;n<Hl.length;n++)t[Hl[n]]=function(){return e.handle[Hl[n]](...arguments)}}const rk={description:null,handle:null,boundPipeline:null,pipelineHash:null,pipelineSettings:null,replaceShaderCodeFunction:null,depthTextureView:null,label:null};function u9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,rk,n),qe(t,e),e.description={colorAttachments:[{view:void 0,loadOp:"load",storeOp:"store"}],depthStencilAttachment:{view:void 0,depthLoadOp:"clear",depthClearValue:0,depthStoreOp:"store"}},e.replaceShaderCodeFunction=r=>{const i=r.getShaderDescription("fragment");i.addOutput("vec4<f32>","outColor");let a=i.getCode();a=_e.substitute(a,"//VTK::RenderEncoder::Impl",["output.outColor = computedColor;"]).result,i.setCode(a)},e.pipelineSettings={primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth32float"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}},e.colorTextureViews=[],Ut(t,e,["boundPipeline","colorTextureViews"]),ut(t,e,["depthTextureView","description","handle","label","pipelineHash","pipelineSettings","replaceShaderCodeFunction"]),nk(t,e)}const ik=ze(u9,"vtkWebGPURenderEncoder");var Or={newInstance:ik,extend:u9};function ak(t,e){e.classHierarchy.push("vtkWebGPUOpaquePass"),t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=r;const i=r.getDevice();if(e.renderEncoder)e.colorTexture.resize(r.getCanvas().width,r.getCanvas().height),e.depthTexture.resize(r.getCanvas().width,r.getCanvas().height);else{t.createRenderEncoder(),e.colorTexture=fr.newInstance({label:"opaquePassColor"}),e.colorTexture.create(i,{width:r.getCanvas().width,height:r.getCanvas().height,format:"rgba16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC});const a=e.colorTexture.createView("opaquePassColorTexture");e.renderEncoder.setColorTextureView(0,a),e.depthFormat="depth32float",e.depthTexture=fr.newInstance({label:"opaquePassDepth"}),e.depthTexture.create(i,{width:r.getCanvas().width,height:r.getCanvas().height,format:e.depthFormat,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC});const o=e.depthTexture.createView("opaquePassDepthTexture");e.renderEncoder.setDepthTextureView(o)}e.renderEncoder.attachTextureViews(),t.setCurrentOperation("opaquePass"),n.setRenderEncoder(e.renderEncoder),n.traverse(t)},t.getColorTextureView=()=>e.renderEncoder.getColorTextureViews()[0],t.getDepthTextureView=()=>e.renderEncoder.getDepthTextureView(),t.createRenderEncoder=()=>{e.renderEncoder=Or.newInstance({label:"OpaquePass"}),e.renderEncoder.setPipelineHash("op")}}const ok={renderEncoder:null,colorTexture:null,depthTexture:null};function c9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ok,n),Ar.extend(t,e,n),P.get(t,e,["colorTexture","depthTexture"]),ak(t,e)}const sk=P.newInstance(c9,"vtkWebGPUOpaquePass");var uk={newInstance:sk,extend:c9};const ck=`
//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var tcoord: vec2<i32> = vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y));
  var reveal: f32 = textureLoad(oitpAccumTexture, tcoord, 0).r;
  if (reveal == 1.0) { discard; }
  var tcolor: vec4<f32> = textureLoad(oitpColorTexture, tcoord, 0);
  var total: f32 = max(tcolor.a, 0.01);
  var computedColor: vec4<f32> = vec4<f32>(tcolor.r/total, tcolor.g/total, tcolor.b/total, 1.0 - reveal);

  //VTK::RenderEncoder::Impl
  return output;
}
`;function lk(t,e){e.classHierarchy.push("vtkWebGPUOrderIndependentTranslucentPass"),t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=r;const i=r.getDevice();if(e.translucentRenderEncoder)e.translucentColorTexture.resizeToMatch(e.colorTextureView.getTexture()),e.translucentAccumulateTexture.resizeToMatch(e.colorTextureView.getTexture());else{t.createRenderEncoder(),t.createFinalEncoder(),e.translucentColorTexture=fr.newInstance({label:"translucentPassColor"}),e.translucentColorTexture.create(i,{width:r.getCanvas().width,height:r.getCanvas().height,format:"rgba16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const a=e.translucentColorTexture.createView("oitpColorTexture");e.translucentRenderEncoder.setColorTextureView(0,a),e.translucentAccumulateTexture=fr.newInstance({label:"translucentPassAccumulate"}),e.translucentAccumulateTexture.create(i,{width:r.getCanvas().width,height:r.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const o=e.translucentAccumulateTexture.createView("oitpAccumTexture");e.translucentRenderEncoder.setColorTextureView(1,o),e.fullScreenQuad=ca.newInstance(),e.fullScreenQuad.setDevice(r.getDevice()),e.fullScreenQuad.setPipelineHash("oitpfsq"),e.fullScreenQuad.setTextureViews(e.translucentRenderEncoder.getColorTextureViews()),e.fullScreenQuad.setFragmentShaderTemplate(ck)}e.translucentRenderEncoder.setDepthTextureView(e.depthTextureView),e.translucentRenderEncoder.attachTextureViews(),t.setCurrentOperation("translucentPass"),n.setRenderEncoder(e.translucentRenderEncoder),n.traverse(t),t.finalPass(r,n)},t.finalPass=(n,r)=>{e.translucentFinalEncoder.setColorTextureView(0,e.colorTextureView),e.translucentFinalEncoder.attachTextureViews(),e.translucentFinalEncoder.begin(n.getCommandEncoder()),r.scissorAndViewport(e.translucentFinalEncoder),e.fullScreenQuad.prepareAndDraw(e.translucentFinalEncoder),e.translucentFinalEncoder.end()},t.getTextures=()=>[e.translucentColorTexture,e.translucentAccumulateTexture],t.createRenderEncoder=()=>{e.translucentRenderEncoder=Or.newInstance({label:"translucentRender"});const n=e.translucentRenderEncoder.getDescription();n.colorAttachments=[{view:void 0,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"},{view:void 0,clearValue:[1,0,0,0],loadOp:"clear",storeOp:"store"}],n.depthStencilAttachment={view:void 0,depthLoadOp:"load",depthStoreOp:"store"},e.translucentRenderEncoder.setReplaceShaderCodeFunction(r=>{const i=r.getShaderDescription("fragment");i.addOutput("vec4<f32>","outColor"),i.addOutput("f32","outAccum"),i.addBuiltinInput("vec4<f32>","@builtin(position) fragPos");let a=i.getCode();a=_e.substitute(a,"//VTK::RenderEncoder::Impl",["var w: f32 = computedColor.a * pow(0.1 + input.fragPos.z, 2.0);","output.outColor = vec4<f32>(computedColor.rgb*w, w);","output.outAccum = computedColor.a;"]).result,i.setCode(a)}),e.translucentRenderEncoder.setPipelineHash("oitpr"),e.translucentRenderEncoder.setPipelineSettings({primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!1,depthCompare:"greater",format:"depth32float"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcfactor:"one",dstFactor:"one"}}},{format:"r16float",blend:{color:{srcFactor:"zero",dstFactor:"one-minus-src"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.createFinalEncoder=()=>{e.translucentFinalEncoder=Or.newInstance({label:"translucentFinal"}),e.translucentFinalEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e.translucentFinalEncoder.setReplaceShaderCodeFunction(n=>{const r=n.getShaderDescription("fragment");r.addOutput("vec4<f32>","outColor"),r.addBuiltinInput("vec4<f32>","@builtin(position) fragPos");let i=r.getCode();i=_e.substitute(i,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);"]).result,r.setCode(i)}),e.translucentFinalEncoder.setPipelineHash("oitpf"),e.translucentFinalEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})}}const fk={colorTextureView:null,depthTextureView:null};function l9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,fk,n),Ar.extend(t,e,n),P.setGet(t,e,["colorTextureView","depthTextureView"]),lk(t,e)}const pk=P.newInstance(l9,"vtkWebGPUOrderIndependentTranslucentPass");var hk={newInstance:pk,extend:l9};const gk=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::Volume::TraverseDec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

fn getTextureValue(vTex: texture_3d<f32>, tpos: vec4<f32>) -> f32
{
  // todo multicomponent support
  return textureSampleLevel(vTex, clampSampler, tpos.xyz, 0.0).r;
}

fn getGradient(vTex: texture_3d<f32>, tpos: vec4<f32>, vNum: i32, scalar: f32) -> vec4<f32>
{
  var result: vec4<f32>;

  var tstep: vec4<f32> = volumeSSBO.values[vNum].tstep;
  result.x = getTextureValue(vTex, tpos + vec4<f32>(tstep.x, 0.0, 0.0, 1.0)) - scalar;
  result.y = getTextureValue(vTex, tpos + vec4<f32>(0.0, tstep.y, 0.0, 1.0)) - scalar;
  result.z = getTextureValue(vTex, tpos + vec4<f32>(0.0, 0.0, tstep.z, 1.0)) - scalar;
  result.w = 0.0;

  // divide by spacing as that is our delta
  result = result / volumeSSBO.values[vNum].spacing;
  // now we have a gradient in unit tcoords

  var grad: f32 = length(result.xyz);
  if (grad > 0.0)
  {
    // rotate to View Coords, needed for lighting and shading
    var nMat: mat4x4<f32> = rendererUBO.SCVCMatrix * volumeSSBO.values[vNum].planeNormals;
    result = nMat * result;
    result = result / length(result);
  }

  // store gradient magnitude in .w
  result.w = grad;

  return result;
}

fn processVolume(vTex: texture_3d<f32>, vNum: i32, cNum: i32, posSC: vec4<f32>, tfunRows: f32) -> vec4<f32>
{
  var outColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);

  // convert to tcoords and reject if outside the volume
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*posSC;
  if (tpos.x < 0.0 || tpos.y < 0.0 || tpos.z < 0.0 ||
      tpos.x > 1.0 || tpos.y > 1.0 || tpos.z > 1.0) { return outColor; }

  var scalar: f32 = getTextureValue(vTex, tpos);

  var coord: vec2<f32> =
    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,
      (0.5 + 2.0 * f32(vNum)) / tfunRows);
  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);

  var gofactor: f32 = 1.0;
  var normal: vec4<f32> = vec4<f32>(0.0,0.0,0.0,0.0);
  if (componentSSBO.values[cNum].gomin <  1.0 || volumeSSBO.values[vNum].shade[0] > 0.0)
  {
    normal = getGradient(vTex, tpos, vNum, scalar);
    if (componentSSBO.values[cNum].gomin <  1.0)
    {
      gofactor = clamp(normal.a*componentSSBO.values[cNum].goScale + componentSSBO.values[cNum].goShift,
      componentSSBO.values[cNum].gomin, componentSSBO.values[cNum].gomax);
    }
  }

  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);
  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;

  if (volumeSSBO.values[vNum].shade[0] > 0.0)
  {
    color = color*abs(normal.z);
  }

  outColor = vec4<f32>(color.rgb, gofactor * opacity);

  return outColor;
}

// adjust the start and end point of a raycast such that it intersects the unit cube.
// This function is used to take a raycast starting point and step vector
// and numSteps and return the startijng and ending steps for intersecting the
// unit cube. Recall for a 3D texture, the unit cube is the range of texture coordsinates
// that have valid values. So this funtion can be used to take a ray in texture coordinates
// and bound it to intersecting the texture.
//
fn adjustBounds(tpos: vec4<f32>, tstep: vec4<f32>, numSteps: f32) -> vec2<f32>
{
  var result: vec2<f32> = vec2<f32>(0.0, numSteps);
  var tpos2: vec4<f32> = tpos + tstep*numSteps;

  // move tpos to the start of the volume
  var adjust: f32 =
    min(
      max(tpos.x/tstep.x, (tpos.x - 1.0)/tstep.x),
      min(
        max((tpos.y - 1.0)/tstep.y, tpos.y/tstep.y),
        max((tpos.z - 1.0)/tstep.z, tpos.z/tstep.z)));
  if (adjust < 0.0)
  {
    result.x = result.x - adjust;
  }

  // adjust length to the end
  adjust =
    max(
      min(tpos2.x/tstep.x, (tpos2.x - 1.0)/tstep.x),
      max(
        min((tpos2.y - 1.0)/tstep.y, tpos2.y/tstep.y),
        min((tpos2.z - 1.0)/tstep.z, tpos2.z/tstep.z)));
  if (adjust > 0.0)
  {
    result.y = result.y - adjust;
  }

  return result;
}

fn getSimpleColor(scalar: f32, vNum: i32, cNum: i32) -> vec4<f32>
{
  // how many rows (tfuns) do we have in our tfunTexture
  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);

  var coord: vec2<f32> =
    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,
      (0.5 + 2.0 * f32(vNum)) / tfunRows);
  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);
  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);
  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;
  return vec4<f32>(color.rgb, opacity);
}

fn traverseMax(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var maxVal: f32 = -1.0e37;
  loop
  {
    var scalar: f32 = getTextureValue(vTex, tpos);
    if (scalar > maxVal)
    {
      maxVal = scalar;
    }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(maxVal, vNum, cNum);
}

fn traverseMin(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var minVal: f32 = 1.0e37;
  loop
  {
    var scalar: f32 = getTextureValue(vTex, tpos);
    if (scalar < minVal)
    {
      minVal = scalar;
    }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(minVal, vNum, cNum);
}

fn traverseAverage(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;
  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var avgVal: f32 = 0.0;
  var sampleCount: f32 = 0.0;
  loop
  {
    var sample: f32 = getTextureValue(vTex, tpos);
    // right now leave filtering off until WebGL changes get merged
    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)
    // {
      avgVal = avgVal + sample;
      sampleCount = sampleCount + 1.0;
    // }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  if (sampleCount <= 0.0)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(avgVal/sampleCount, vNum, cNum);
}

fn traverseAdditive(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;
  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var sumVal: f32 = 0.0;
  loop
  {
    var sample: f32 = getTextureValue(vTex, tpos);
    // right now leave filtering off until WebGL changes get merged
    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)
    // {
      sumVal = sumVal + sample;
    // }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(sumVal, vNum, cNum);
}

fn composite(rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>) -> vec4<f32>
{
  // initial ray position is at the beginning
  var rayPosSC: vec4<f32> = minPosSC;

  // how many rows (tfuns) do we have in our tfunTexture
  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);

  var curDist: f32 = 0.0;
  var computedColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);
  var sampleColor: vec4<f32>;
//VTK::Volume::TraverseCalls

  loop
  {
    // for each volume, sample and accumulate color
//VTK::Volume::CompositeCalls

    // increment position
    curDist = curDist + mapperUBO.SampleDistance;
    rayPosSC = rayPosSC + rayStepSC;

    // check if we have reached a terminating condition
    if (curDist > rayLengthSC) { break; }
    if (computedColor.a > 0.98) { break; }
  }
  return computedColor;
}

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var rayMax: f32 = textureSampleLevel(maxTexture, clampSampler, input.tcoordVS, 0.0).r;
  var rayMin: f32 = textureSampleLevel(minTexture, clampSampler, input.tcoordVS, 0.0).r;

  // discard empty rays
  if (rayMax <= rayMin) { discard; }
  else
  {
    // compute start and end ray positions in view coordinates
    var minPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMax, 1.0);
    minPosSC = minPosSC * (1.0 / minPosSC.w);
    var maxPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMin, 1.0);
    maxPosSC = maxPosSC * (1.0 / maxPosSC.w);

    var rayLengthSC: f32 = distance(minPosSC.xyz, maxPosSC.xyz);
    var rayStepSC: vec4<f32> = (maxPosSC - minPosSC)*(mapperUBO.SampleDistance/rayLengthSC);
    rayStepSC.w = 0.0;

    var computedColor: vec4<f32>;

//VTK::Volume::Loop

//VTK::RenderEncoder::Impl
  }

  return output;
}
`,Xt=new Float64Array(16),Wr=new Float64Array(16);function dk(t,e){e.classHierarchy.push("vtkWebGPUVolumePassFSQ"),t.replaceShaderPosition=(i,a,o)=>{const s=a.getShaderDescription("vertex");s.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let u=s.getCode();u=_e.substitute(u,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);"]).result,s.setCode(u),a.getShaderDescription("fragment").addBuiltinInput("vec4<f32>","@builtin(position) fragPos")},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderVolume=(i,a,o)=>{const s=a.getShaderDescription("fragment");let u=s.getCode();const l=[],p=[];for(let f=0;f<e.volumes.length;f++)e.volumes[f].getRenderable().getMapper().getBlendMode()===ar.COMPOSITE_BLEND?(l.push(`    sampleColor = processVolume(volTexture${f}, ${f}, ${e.rowStarts[f]}, rayPosSC, tfunRows);`),l.push(`    computedColor = vec4<f32>(
          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,
          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);`)):(p.push(`  sampleColor = traverseVals[${f}];`),p.push(`  computedColor = vec4<f32>(
          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,
          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);`));u=_e.substitute(u,"//VTK::Volume::CompositeCalls",l).result,u=_e.substitute(u,"//VTK::Volume::TraverseCalls",p).result,u=_e.substitute(u,"//VTK::Volume::TraverseDec",[`var<private> traverseVals: array<vec4<f32>,${e.volumes.length}>;`]).result;let c=!1;for(let f=0;f<e.volumes.length;f++){const h=e.volumes[f].getRenderable().getMapper().getBlendMode();h===ar.COMPOSITE_BLEND?c=!0:h===ar.MAXIMUM_INTENSITY_BLEND?u=_e.substitute(u,"//VTK::Volume::Loop",[`    traverseMax(volTexture${f}, ${f}, ${f}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${f}];`,"//VTK::Volume::Loop"]).result:h===ar.MINIMUM_INTENSITY_BLEND?u=_e.substitute(u,"//VTK::Volume::Loop",[`    traverseMin(volTexture${f}, ${f}, ${f}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${f}];`,"//VTK::Volume::Loop"]).result:h===ar.AVERAGE_INTENSITY_BLEND?u=_e.substitute(u,"//VTK::Volume::Loop",[`    traverseAverage(volTexture${f}, ${f}, ${f}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${f}];`,"//VTK::Volume::Loop"]).result:h===ar.ADDITIVE_INTENSITY_BLEND&&(u=_e.substitute(u,"//VTK::Volume::Loop",[`    traverseAdditive(volTexture${f}, ${f}, ${f}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${f}];`,"//VTK::Volume::Loop"]).result)}c&&(u=_e.substitute(u,"//VTK::Volume::Loop",["    computedColor = composite(rayLengthSC, minPosSC, rayStepSC);"]).result),s.setCode(u)},e.shaderReplacements.set("replaceShaderVolume",t.replaceShaderVolume),t.updateLUTImage=i=>{let a=t.getMTime();for(let c=0;c<e.volumes.length;c++){const f=e.volumes[c].getRenderable(),h=f.getMapper().getInputData();a=Math.max(a,f.getMTime(),h.getMTime())}if(a<e.lutBuildTime.getMTime())return;e.numRows=0,e.rowStarts=[];for(let c=0;c<e.volumes.length;c++){e.rowStarts.push(e.numRows);const h=e.volumes[c].getRenderable(),v=h.getMapper(),y=h.getProperty(),x=v.getInputData(),g=(x.getPointData()&&x.getPointData().getScalars()).getNumberOfComponents(),S=y.getIndependentComponents()?g:1;e.numRows+=S}const o=new Uint8ClampedArray(e.numRows*2*e.rowLength*4),s=new Float32Array(e.numRows*2*e.rowLength);let u=0;const l=new Float32Array(e.rowLength*3),p=e.rowLength;for(let c=0;c<e.volumes.length;c++){const h=e.volumes[c].getRenderable(),v=h.getMapper(),y=h.getProperty(),x=v.getInputData(),g=(x.getPointData()&&x.getPointData().getScalars()).getNumberOfComponents(),S=y.getIndependentComponents()?g:1;for(let T=0;T<S;++T){const C=y.getRGBTransferFunction(T),w=C.getRange();C.getTable(w[0],w[1],p,l,1);let _=u*p*4;for(let N=0;N<p;++N){o[_+N*4]=255*l[N*3],o[_+N*4+1]=255*l[N*3+1],o[_+N*4+2]=255*l[N*3+2],o[_+N*4+3]=255;for(let R=0;R<4;R++)o[_+(p+N)*4+R]=o[_+N*4+R]}const E=y.getScalarOpacity(T),D=e.sampleDist/y.getScalarOpacityUnitDistance(T),O=E.getRange();E.getTable(O[0],O[1],p,l,1),_=u*p;for(let N=0;N<p;++N)s[_+N]=1-(1-l[N])**D,s[_+N+p]=s[_+N];u+=2}}{const c={nativeArray:o,width:e.rowLength,height:e.numRows*2,depth:1,format:"rgba8unorm"},h=i.getTextureManager().getTexture(c).createView("tfunTexture");e.textureViews[2]=h}{const c={nativeArray:s,width:e.rowLength,height:e.numRows*2,depth:1,format:"r16float"},h=i.getTextureManager().getTexture(c).createView("ofunTexture");e.textureViews[3]=h}e.lutBuildTime.modified()},t.updateSSBO=i=>{let a=Math.max(t.getMTime(),e.WebGPURenderer.getStabilizedTime());for(let C=0;C<e.volumes.length;C++){const w=e.volumes[C].getRenderable(),_=w.getMapper(),E=_.getInputData();a=Math.max(a,w.getMTime(),E.getMTime(),_.getMTime())}if(a<e.SSBO.getSendTime())return;const o=e.WebGPURenderer.getStabilizedCenterByReference();e.SSBO.clearData(),e.SSBO.setNumberOfInstances(e.volumes.length);const s=new Float64Array(e.volumes.length*16),u=new Float64Array(e.volumes.length*16),l=new Float64Array(e.volumes.length*4),p=new Float64Array(e.volumes.length*4),c=new Float64Array(e.volumes.length*4),f=new Float64Array(e.volumes.length*4);for(let C=0;C<e.volumes.length;C++){const _=e.volumes[C].getRenderable(),E=_.getMapper(),D=E.getInputData();ye(Xt),Ze(Xt,Xt,o);const O=_.getMatrix();Fe(Wr,O),yt(Wr,Wr),Le(Xt,Wr,Xt);const N=D.getWorldToIndex();Le(Xt,N,Xt);const R=D.getDimensions();ye(Wr),kr(Wr,Wr,[1/R[0],1/R[1],1/R[2]]),Le(Xt,Wr,Xt);for(let j=0;j<16;j++)s[C*16+j]=Xt[j];yt(Xt,Xt);for(let j=0;j<4;j++)u[C*16+j*4]=Xt[j*4],u[C*16+j*4+1]=Xt[j*4+1],u[C*16+j*4+2]=Xt[j*4+2],u[C*16+j*4+3]=0;l[C*4]=1/R[0],l[C*4+1]=1/R[1],l[C*4+2]=1/R[2],l[C*4+3]=1,p[C*4]=_.getProperty().getShade()?1:0;const M=D.getSpacing();c[C*4]=M[0],c[C*4+1]=M[1],c[C*4+2]=M[2],c[C*4+3]=1;const A=e.textureViews[C+4].getTexture().getScale(),G=E.getIpScalarRange();f[C*4]=G[0]/A,f[C*4+1]=G[1]/A,f[C*4+2]=E.getFilterMode()}e.SSBO.addEntry("SCTCMatrix","mat4x4<f32>"),e.SSBO.addEntry("planeNormals","mat4x4<f32>"),e.SSBO.addEntry("shade","vec4<f32>"),e.SSBO.addEntry("tstep","vec4<f32>"),e.SSBO.addEntry("spacing","vec4<f32>"),e.SSBO.addEntry("ipScalarRange","vec4<f32>"),e.SSBO.setAllInstancesFromArray("SCTCMatrix",s),e.SSBO.setAllInstancesFromArray("planeNormals",u),e.SSBO.setAllInstancesFromArray("shade",p),e.SSBO.setAllInstancesFromArray("tstep",l),e.SSBO.setAllInstancesFromArray("spacing",c),e.SSBO.setAllInstancesFromArray("ipScalarRange",f),e.SSBO.send(i),e.componentSSBO.clearData(),e.componentSSBO.setNumberOfInstances(e.numRows);const h=new Float64Array(e.numRows),v=new Float64Array(e.numRows),y=new Float64Array(e.numRows),x=new Float64Array(e.numRows),m=new Float64Array(e.numRows),g=new Float64Array(e.numRows),d=new Float64Array(e.numRows),S=new Float64Array(e.numRows);let T=0;for(let C=0;C<e.volumes.length;C++){const _=e.volumes[C].getRenderable(),E=_.getMapper(),D=_.getProperty(),O=E.getInputData(),R=(O.getPointData()&&O.getPointData().getScalars()).getNumberOfComponents(),M=D.getIndependentComponents(),A=e.textureViews[C+4].getTexture().getFormat(),G=Mt.getDetailsFromTextureFormat(A),j=G.elementSize===2&&G.sampleType==="float",k={scale:[255],offset:[0]};j&&(k.scale[0]=1);for(let F=0;F<R;F++){const B=M?F:0,$=k.scale[F],X=D.getScalarOpacity(B).getRange(),J=$/(X[1]-X[0]),q=(k.offset[F]-X[0])/(X[1]-X[0]);x[T]=q,y[T]=J;const re=D.getRGBTransferFunction(B).getRange();if(v[T]=(k.offset[F]-re[0])/(re[1]-re[0]),h[T]=$/(re[1]-re[0]),D.getUseGradientOpacity(B)){const te=D.getGradientOpacityMinimumOpacity(B),L=D.getGradientOpacityMaximumOpacity(B);m[T]=te,g[T]=L;const b=[D.getGradientOpacityMinimumValue(B),D.getGradientOpacityMaximumValue(B)];S[T]=$*(L-te)/(b[1]-b[0]),d[T]=-b[0]*(L-te)/(b[1]-b[0])+te}else m[T]=1,g[T]=1,S[T]=0,d[T]=1;T++}}e.componentSSBO.addEntry("cScale","f32"),e.componentSSBO.addEntry("cShift","f32"),e.componentSSBO.addEntry("oScale","f32"),e.componentSSBO.addEntry("oShift","f32"),e.componentSSBO.addEntry("goShift","f32"),e.componentSSBO.addEntry("goScale","f32"),e.componentSSBO.addEntry("gomin","f32"),e.componentSSBO.addEntry("gomax","f32"),e.componentSSBO.setAllInstancesFromArray("cScale",h),e.componentSSBO.setAllInstancesFromArray("cShift",v),e.componentSSBO.setAllInstancesFromArray("oScale",y),e.componentSSBO.setAllInstancesFromArray("oShift",x),e.componentSSBO.setAllInstancesFromArray("goScale",S),e.componentSSBO.setAllInstancesFromArray("goShift",d),e.componentSSBO.setAllInstancesFromArray("gomin",m),e.componentSSBO.setAllInstancesFromArray("gomax",g),e.componentSSBO.send(i)};const n=t.updateBuffers;t.updateBuffers=()=>{n();let i=e.volumes[0].getRenderable().getMapper().getSampleDistance();for(let a=0;a<e.volumes.length;a++){const u=e.volumes[a].getRenderable().getMapper().getSampleDistance();u<i&&(i=u)}e.sampleDist!==i&&(e.sampleDist=i,e.UBO.setValue("SampleDistance",i),e.UBO.sendIfNeeded(e.device));for(let a=0;a<e.volumes.length;a++){const l=e.volumes[a].getRenderable().getMapper().getInputData(),p=e.device.getTextureManager().getTextureForImageData(l);if(!e.textureViews[a+4]||e.textureViews[a+4].getTexture()!==p){const c=p.createView(`volTexture${a}`);e.textureViews[a+4]=c}}if(e.volumes.length<e.lastVolumeLength)for(let a=e.volumes.length;a<e.lastVolumeLength;a++)e.textureViews.pop();e.lastVolumeLength=e.volumes.length,t.updateLUTImage(e.device),t.updateSSBO(e.device),e.clampSampler||(e.clampSampler=$c.newInstance({label:"clampSampler"}),e.clampSampler.create(e.device,{minFilter:"linear",magFilter:"linear"}))},t.computePipelineHash=()=>{e.pipelineHash="volfsq";for(let i=0;i<e.volumes.length;i++){const a=e.volumes[i].getRenderable().getMapper().getBlendMode();e.pipelineHash+=`${a}`}},t.setVolumes=i=>{if(!e.volumes||e.volumes.length!==i.length){e.volumes=[...i],t.modified();return}for(let a=0;a<i.length;a++)if(i[a]!==e.volumes[a]){e.volumes=[...i],t.modified();return}};const r=t.getBindables;t.getBindables=()=>{const i=r();return i.push(e.componentSSBO),i.push(e.clampSampler),i}}const vk={volumes:null,rowLength:1024,lastVolumeLength:0};function f9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vk,n),ca.extend(t,e,n),e.fragmentShaderTemplate=gk,e.UBO=gi.newInstance({label:"mapperUBO"}),e.UBO.addEntry("SampleDistance","f32"),e.SSBO=gp.newInstance({label:"volumeSSBO"}),e.componentSSBO=gp.newInstance({label:"componentSSBO"}),e.lutBuildTime={},P.obj(e.lutBuildTime,{mtime:0}),dk(t,e)}const yk=P.newInstance(f9,"vtkWebGPUVolumePassFSQ");var mk={newInstance:yk,extend:f9};const{Representation:xk}=Co,{BufferUsage:p2,PrimitiveTypes:Sk}=Ci,Kl=[[0,4,6],[0,6,2],[1,3,7],[1,7,5],[0,5,4],[0,1,5],[2,6,7],[2,7,3],[0,3,1],[0,2,3],[4,5,7],[4,7,6]],Tk=`
//VTK::Renderer::Dec

//VTK::Select::Dec

//VTK::VolumePass::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  //VTK::Select::Impl

  //VTK::TCoord::Impl

  //VTK::VolumePass::Impl

  // use the maximum (closest) of the current value and the zbuffer
  // the blend func will then take the min to find the farthest stop value
  var stopval: f32 = max(input.fragPos.z, textureLoad(opaquePassDepthTexture, vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y)), 0));

  //VTK::RenderEncoder::Impl
  return output;
}
`,Ck=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var computedColor: vec4<f32> = textureSample(volumePassColorTexture,
    volumePassColorTextureSampler, mapperUBO.tscale*input.tcoordVS);

  //VTK::RenderEncoder::Impl
  return output;
}
`;function wk(t,e){e.classHierarchy.push("vtkWebGPUVolumePass"),t.initialize=n=>{e._clearEncoder||t.createClearEncoder(n),e._mergeEncoder||t.createMergeEncoder(n),e._copyEncoder||t.createCopyEncoder(n),e._depthRangeEncoder||t.createDepthRangeEncoder(n),e.fullScreenQuad||(e.fullScreenQuad=mk.newInstance(),e.fullScreenQuad.setDevice(n.getDevice()),e.fullScreenQuad.setTextureViews([...e._depthRangeEncoder.getColorTextureViews()])),e._volumeCopyQuad||(e._volumeCopyQuad=ca.newInstance(),e._volumeCopyQuad.setPipelineHash("volpassfsq"),e._volumeCopyQuad.setDevice(n.getDevice()),e._volumeCopyQuad.setFragmentShaderTemplate(Ck),e._copyUBO=gi.newInstance({label:"mapperUBO"}),e._copyUBO.addEntry("tscale","vec2<f32>"),e._volumeCopyQuad.setUBO(e._copyUBO),e._volumeCopyQuad.setTextureViews([e._colorTextureView]))},t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=r,t.initialize(r),t.computeTiming(r),t.renderDepthBounds(n,r),e._firstGroup=!0;const i=r.getDevice(),a=i.getHandle().limits.maxSampledTexturesPerShaderStage-4;if(e.volumes.length>a){const o=n.getRenderable().getActiveCamera().getPosition(),s=[];for(let c=0;c<e.volumes.length;c++){const f=e.volumes[c].getRenderable().getBounds(),h=[.5*(f[1]+f[0]),.5*(f[3]+f[2]),.5*(f[5]+f[4])];s[c]=In(h,o)}const u=[...Array(e.volumes.length).keys()];u.sort((c,f)=>s[f]-s[c]);let l=[],p=u.length%a;for(let c=0;c<u.length;c++)l.push(e.volumes[u[c]]),l.length>=p&&(t.rayCastPass(r,n,l),l=[],p=a,e._firstGroup=!1)}else t.rayCastPass(r,n,e.volumes);if(e._volumeCopyQuad.setWebGPURenderer(n),e._useSmallViewport){const o=e._colorTextureView.getTexture().getWidth(),s=e._colorTextureView.getTexture().getHeight();e._copyUBO.setArray("tscale",[e._smallViewportWidth/o,e._smallViewportHeight/s])}else e._copyUBO.setArray("tscale",[1,1]);e._copyUBO.sendIfNeeded(i),e._copyEncoder.setColorTextureView(0,e.colorTextureView),e._copyEncoder.attachTextureViews(),e._copyEncoder.begin(r.getCommandEncoder()),n.scissorAndViewport(e._copyEncoder),e._volumeCopyQuad.prepareAndDraw(e._copyEncoder),e._copyEncoder.end()},t.delete=P.chain(()=>{e._animationRateSubscription&&(e._animationRateSubscription.unsubscribe(),e._animationRateSubscription=null)},t.delete),t.computeTiming=n=>{const r=n.getRenderable().getInteractor();if(e._lastScale==null){const i=e.volumes[0].getRenderable().getMapper();e._lastScale=i.getInitialInteractionScale()||1}e._useSmallViewport=!1,r.isAnimating()&&e._lastScale>1.5&&(e._useSmallViewport=!0),e._colorTexture.resize(n.getCanvas().width,n.getCanvas().height),e._animationRateSubscription||(e._animationRateSubscription=r.onAnimationFrameRateUpdate(()=>{const i=e.volumes[0].getRenderable().getMapper();if(i.getAutoAdjustSampleDistances()){const a=r.getRecentAnimationFrameRate(),o=e._lastScale*r.getDesiredUpdateRate()/a;e._lastScale=o,e._lastScale>400&&(e._lastScale=400)}else e._lastScale=i.getImageSampleDistance()*i.getImageSampleDistance();e._lastScale<1.5&&(e._lastScale=1.5)}))},t.rayCastPass=(n,r,i)=>{const a=e._firstGroup?e._clearEncoder:e._mergeEncoder;a.attachTextureViews(),a.begin(n.getCommandEncoder());let o=e._colorTextureView.getTexture().getWidth(),s=e._colorTextureView.getTexture().getHeight();if(e._useSmallViewport){const u=n.getCanvas(),l=1/Math.sqrt(e._lastScale);e._smallViewportWidth=Math.ceil(l*u.width),e._smallViewportHeight=Math.ceil(l*u.height),o=e._smallViewportWidth,s=e._smallViewportHeight}a.getHandle().setViewport(0,0,o,s,0,1),a.getHandle().setScissorRect(0,0,o,s),e.fullScreenQuad.setWebGPURenderer(r),e.fullScreenQuad.setVolumes(i),e.fullScreenQuad.prepareAndDraw(a),a.end()},t.renderDepthBounds=(n,r)=>{t.updateDepthPolyData(n);const i=e._boundsPoly,a=i.getPoints(),o=i.getPolys();let s={hash:`vp${o.getMTime()}`,usage:p2.Index,cells:o,numberOfPoints:a.getNumberOfPoints(),primitiveType:Sk.Triangles,representation:xk.SURFACE};const u=r.getDevice().getBufferManager().getBuffer(s);e._mapper.getVertexInput().setIndexBuffer(u),s={usage:p2.PointArray,format:"float32x4",hash:`vp${a.getMTime()}${o.getMTime()}`,dataArray:a,indexBuffer:u,packExtra:!0};const l=r.getDevice().getBufferManager().getBuffer(s);e._mapper.getVertexInput().addBuffer(l,["vertexBC"]),e._mapper.setNumberOfVertices(l.getSizeInBytes()/l.getStrideInBytes()),t.drawDepthRange(n,r)},t.updateDepthPolyData=n=>{let r=!1;for(let p=0;p<e.volumes.length;p++){const c=e.volumes[p].getMTime();(!e._lastMTimes[p]||c!==e._lastMTimes[p])&&(r=!0,e._lastMTimes[p]=c)}const i=n.getStabilizedTime();if((e._lastMTimes.length<=e.volumes.length||i!==e._lastMTimes[e.volumes.length])&&(r=!0,e._lastMTimes[e.volumes.length]=i),!r)return;const a=n.getStabilizedCenterByReference(),o=e.volumes.length*8,s=new Float64Array(o*3),u=e.volumes.length*12,l=new Uint16Array(u*4);for(let p=0;p<e.volumes.length;p++){e.volumes[p].getBoundingCubePoints(s,p*24);let c=p*12*4;const f=p*8;for(let h=0;h<12;h++)l[c++]=3,l[c++]=f+Kl[h][0],l[c++]=f+Kl[h][1],l[c++]=f+Kl[h][2]}for(let p=0;p<s.length;p+=3)s[p]-=a[0],s[p+1]-=a[1],s[p+2]-=a[2];e._boundsPoly.getPoints().setData(s,3),e._boundsPoly.getPoints().modified(),e._boundsPoly.getPolys().setData(l,1),e._boundsPoly.getPolys().modified(),e._boundsPoly.modified()},t.drawDepthRange=(n,r)=>{e._depthRangeTexture.resizeToMatch(e.colorTextureView.getTexture()),e._depthRangeTexture2.resizeToMatch(e.colorTextureView.getTexture()),e._depthRangeEncoder.attachTextureViews(),t.setCurrentOperation("volumeDepthRangePass"),n.setRenderEncoder(e._depthRangeEncoder),n.volumeDepthRangePass(!0),e._mapper.setWebGPURenderer(n),e._mapper.prepareToDraw(e._depthRangeEncoder),e._mapper.registerDrawCallback(e._depthRangeEncoder),n.volumeDepthRangePass(!1)},t.createDepthRangeEncoder=n=>{const r=n.getDevice();e._depthRangeEncoder=Or.newInstance({label:"VolumePass DepthRange"}),e._depthRangeEncoder.setPipelineHash("volr"),e._depthRangeEncoder.setReplaceShaderCodeFunction(o=>{const s=o.getShaderDescription("fragment");s.addOutput("vec4<f32>","outColor1"),s.addOutput("vec4<f32>","outColor2");let u=s.getCode();u=_e.substitute(u,"//VTK::RenderEncoder::Impl",["output.outColor1 = vec4<f32>(input.fragPos.z, 0.0, 0.0, 0.0);","output.outColor2 = vec4<f32>(stopval, 0.0, 0.0, 0.0);"]).result,s.setCode(u)}),e._depthRangeEncoder.setDescription({colorAttachments:[{view:null,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"},{view:null,clearValue:[1,1,1,1],loadOp:"clear",storeOp:"store"}]}),e._depthRangeEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"r16float",blend:{color:{srcFactor:"one",dstFactor:"one",operation:"max"},alpha:{srcfactor:"one",dstFactor:"one",operation:"max"}}},{format:"r16float",blend:{color:{srcFactor:"one",dstFactor:"one",operation:"min"},alpha:{srcfactor:"one",dstFactor:"one",operation:"min"}}}]}}),e._depthRangeTexture=fr.newInstance({label:"volumePassMaxDepth"}),e._depthRangeTexture.create(r,{width:n.getCanvas().width,height:n.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const i=e._depthRangeTexture.createView("maxTexture");e._depthRangeEncoder.setColorTextureView(0,i),e._depthRangeTexture2=fr.newInstance({label:"volumePassDepthMin"}),e._depthRangeTexture2.create(r,{width:n.getCanvas().width,height:n.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const a=e._depthRangeTexture2.createView("minTexture");e._depthRangeEncoder.setColorTextureView(1,a),e._mapper.setDevice(n.getDevice()),e._mapper.setTextureViews([e.depthTextureView])},t.createClearEncoder=n=>{e._colorTexture=fr.newInstance({label:"volumePassColor"}),e._colorTexture.create(n.getDevice(),{width:n.getCanvas().width,height:n.getCanvas().height,format:"bgra8unorm",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC}),e._colorTextureView=e._colorTexture.createView("volumePassColorTexture"),e._colorTextureView.addSampler(n.getDevice(),{minFilter:"linear",magFilter:"linear"}),e._clearEncoder=Or.newInstance({label:"VolumePass Clear"}),e._clearEncoder.setColorTextureView(0,e._colorTextureView),e._clearEncoder.setDescription({colorAttachments:[{view:null,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"}]}),e._clearEncoder.setPipelineHash("volpf"),e._clearEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"bgra8unorm",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.createCopyEncoder=n=>{e._copyEncoder=Or.newInstance({label:"volumePassCopy"}),e._copyEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e._copyEncoder.setPipelineHash("volcopypf"),e._copyEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"one",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.createMergeEncoder=n=>{e._mergeEncoder=Or.newInstance({label:"volumePassMerge"}),e._mergeEncoder.setColorTextureView(0,e._colorTextureView),e._mergeEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e._mergeEncoder.setReplaceShaderCodeFunction(r=>{const i=r.getShaderDescription("fragment");i.addOutput("vec4<f32>","outColor");let a=i.getCode();a=_e.substitute(a,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);"]).result,i.setCode(a)}),e._mergeEncoder.setPipelineHash("volpf"),e._mergeEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"bgra8unorm",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.setVolumes=n=>{if(!e.volumes||e.volumes.length!==n.length){e.volumes=[...n],t.modified();return}for(let r=0;r<n.length;r++)if(n[r]!==e.volumes[r]){e.volumes=[...n],t.modified();return}}}const _k={colorTextureView:null,depthTextureView:null,volumes:null};function p9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_k,n),Ar.extend(t,e,n),e._mapper=p1.newInstance(),e._mapper.setFragmentShaderTemplate(Tk),e._mapper.getShaderReplacements().set("replaceShaderVolumePass",(r,i,a)=>{i.getShaderDescription("fragment").addBuiltinInput("vec4<f32>","@builtin(position) fragPos")}),e._boundsPoly=sn.newInstance(),e._lastMTimes=[],P.setGet(t,e,["colorTextureView","depthTextureView"]),wk(t,e)}const Ek=P.newInstance(p9,"vtkWebGPUVolumePass");var Dk={newInstance:Ek,extend:p9};const Ok=`
//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var computedColor: vec4<f32> = clamp(textureSampleLevel(opaquePassColorTexture, finalPassSampler, input.tcoordVS, 0.0),vec4<f32>(0.0),vec4<f32>(1.0));

  //VTK::RenderEncoder::Impl
  return output;
}
`;function bk(t,e){e.classHierarchy.push("vtkForwardPass"),t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(e.deleted)return;e._currentParent=r,t.setCurrentOperation("buildPass"),n.traverse(t),e.opaquePass||(e.opaquePass=uk.newInstance());const i=n.getRenderable().getNumberOfLayers(),a=n.getChildren();for(let o=0;o<i;o++)for(let s=0;s<a.length;s++){const u=a[s],l=n.getRenderable().getRenderers()[s];l.getDraw()&&l.getLayer()===o&&(e.opaqueActorCount=0,e.translucentActorCount=0,e.volumes=[],t.setCurrentOperation("queryPass"),u.traverse(t),t.setCurrentOperation("cameraPass"),u.traverse(t),e.opaquePass.traverse(u,n),e.translucentActorCount>0&&(e.translucentPass||(e.translucentPass=hk.newInstance()),e.translucentPass.setColorTextureView(e.opaquePass.getColorTextureView()),e.translucentPass.setDepthTextureView(e.opaquePass.getDepthTextureView()),e.translucentPass.traverse(u,n)),e.volumes.length>0&&(e.volumePass||(e.volumePass=Dk.newInstance()),e.volumePass.setColorTextureView(e.opaquePass.getColorTextureView()),e.volumePass.setDepthTextureView(e.opaquePass.getDepthTextureView()),e.volumePass.setVolumes(e.volumes),e.volumePass.traverse(u,n)),t.finalPass(n,u))}},t.finalPass=(n,r)=>{e._finalBlitEncoder||t.createFinalBlitEncoder(n),e._finalBlitOutputTextureView.createFromTextureHandle(n.getCurrentTexture(),{depth:1,format:n.getPresentationFormat()}),e._finalBlitEncoder.attachTextureViews(),e._finalBlitEncoder.begin(n.getCommandEncoder()),r.scissorAndViewport(e._finalBlitEncoder),e._fullScreenQuad.prepareAndDraw(e._finalBlitEncoder),e._finalBlitEncoder.end()},t.createFinalBlitEncoder=n=>{e._finalBlitEncoder=Or.newInstance({label:"forwardPassBlit"}),e._finalBlitEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e._finalBlitEncoder.setPipelineHash("fpf"),e._finalBlitEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:n.getPresentationFormat(),blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}}),e._fsqSampler=$c.newInstance({label:"finalPassSampler"}),e._fsqSampler.create(n.getDevice(),{minFilter:"linear",magFilter:"linear"}),e._fullScreenQuad=ca.newInstance(),e._fullScreenQuad.setDevice(n.getDevice()),e._fullScreenQuad.setPipelineHash("fpfsq"),e._fullScreenQuad.setTextureViews([e.opaquePass.getColorTextureView()]),e._fullScreenQuad.setAdditionalBindables([e._fsqSampler]),e._fullScreenQuad.setFragmentShaderTemplate(Ok),e._finalBlitOutputTextureView=m4.newInstance(),e._finalBlitEncoder.setColorTextureView(0,e._finalBlitOutputTextureView)},t.incrementOpaqueActorCount=()=>e.opaqueActorCount++,t.incrementTranslucentActorCount=()=>e.translucentActorCount++,t.addVolume=n=>{e.volumes.push(n)}}const Nk={opaqueActorCount:0,translucentActorCount:0,volumes:null,opaqueRenderEncoder:null,translucentPass:null,volumePass:null};function h9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Nk,n),Ar.extend(t,e,n),P.setGet(t,e,["opaquePass","translucentPass","volumePass"]),bk(t,e)}const Mk=P.newInstance(h9,"vtkForwardPass");var Rk={newInstance:Mk,extend:h9};const{VtkDataTypes:Fi}=Ee;function Fk(t,e){e.classHierarchy.push("vtkWebGPUTextureManager");function n(i){if(i.imageData){i.dataArray=i.imageData.getPointData().getScalars(),i.time=i.dataArray.getMTime(),i.nativeArray=i.dataArray.getData();const a=i.imageData.getDimensions();switch(i.width=a[0],i.height=a[1],i.depth=a[2],i.dataArray.getNumberOfComponents()){case 1:i.format="r";break;case 2:i.format="rg";break;case 3:case 4:default:i.format="rgba";break}switch(i.dataArray.getDataType()){case Fi.UNSIGNED_CHAR:i.format+="8unorm";break;case Fi.FLOAT:case Fi.UNSIGNED_INT:case Fi.INT:case Fi.DOUBLE:case Fi.UNSIGNED_SHORT:case Fi.SHORT:default:i.format+="16float";break}}i.image&&(i.width=i.image.width,i.height=i.image.height,i.depth=1,i.format="rgba8unorm"),i.jsImageData&&(i.width=i.jsImageData.width,i.height=i.jsImageData.height,i.depth=1,i.format="rgba8unorm",i.flip=!0,i.nativeArray=i.jsImageData.data),i.canvas&&(i.width=i.canvas.width,i.height=i.canvas.height,i.depth=1,i.format="rgba8unorm",i.flip=!0,i.usage=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT)}function r(i){const a=fr.newInstance();return a.create(e.device,{width:i.width,height:i.height,depth:i.depth,format:i.format,usage:i.usage,mipLevel:i.mipLevel}),(i.nativeArray||i.image||i.canvas)&&a.writeImageData(i),a}t.getTexture=i=>i.hash?e.device.getCachedObject(i.hash,r,i):r(i),t.getTextureForImageData=i=>{const a={time:i.getMTime()};return a.imageData=i,n(a),a.hash=a.time+a.format+a.mipLevel,e.device.getTextureManager().getTexture(a)},t.getTextureForVTKTexture=i=>{const a={time:i.getMTime()};return i.getInputData()?a.imageData=i.getInputData():i.getImage()?a.image=i.getImage():i.getJsImageData()?a.jsImageData=i.getJsImageData():i.getCanvas()&&(a.canvas=i.getCanvas()),n(a),a.mipLevel=i.getMipLevel(),a.hash=a.time+a.format+a.mipLevel,e.device.getTextureManager().getTexture(a)}}const Lk={handle:null,device:null};function g9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Lk,n),P.obj(t,e),P.setGet(t,e,["device"]),Fk(t,e)}const kk=P.newInstance(g9);var Bk={newInstance:kk,extend:g9};class Vk extends Map{constructor(){super(),this.registry=new FinalizationRegistry(e=>{const n=super.get(e);n&&n.deref&&n.deref()===void 0&&super.delete(e)})}getValue(e){const n=super.get(e);if(n){const r=n.deref();if(r!==void 0)return r;super.delete(e)}}setValue(e,n){let r;return n&&typeof n=="object"&&(r=new WeakRef(n),this.registry.register(n,e),super.set(e,r)),r}}function Ak(t,e){e.classHierarchy.push("vtkWebGPUDevice"),t.initialize=n=>{e.handle=n},t.createCommandEncoder=()=>e.handle.createCommandEncoder(),t.submitCommandEncoder=n=>{e.handle.queue.submit([n.finish()])},t.getShaderModule=n=>e.shaderCache.getShaderModule(n),t.getBindGroupLayout=n=>{if(!n.entries)return null;for(let a=0;a<n.entries.length;a++){const o=n.entries[a];o.binding=o.binding||0,o.visibility=o.visibility||GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT}const r=JSON.stringify(n);for(let a=0;a<e.bindGroupLayouts.length;a++)if(e.bindGroupLayouts[a].sval===r)return e.bindGroupLayouts[a].layout;const i=e.handle.createBindGroupLayout(n);return e.bindGroupLayouts.push({sval:r,layout:i}),i},t.getBindGroupLayoutDescription=n=>{for(let r=0;r<e.bindGroupLayouts.length;r++)if(e.bindGroupLayouts[r].layout===n)return e.bindGroupLayouts[r].sval;return vtkErrorMacro("layout not found"),console.trace(),null},t.getPipeline=n=>n in e.pipelines?e.pipelines[n]:null,t.createPipeline=(n,r)=>{r.initialize(t,n),e.pipelines[n]=r},t.onSubmittedWorkDone=()=>e.handle.queue.onSubmittedWorkDone(),t.hasCachedObject=n=>e.objectCache.getValue(n),t.getCachedObject=function(n,r){if(!n)return vtkErrorMacro("attempt to cache an object without a hash"),null;const i=e.objectCache.getValue(n);if(i)return i;for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];const u=r(...o);return e.objectCache.setValue(n,u),u}}const Uk={handle:null,pipelines:null,shaderCache:null,bindGroupLayouts:null,bufferManager:null,textureManager:null};function d9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Uk,n),qe(t,e),ut(t,e,["handle"]),Ut(t,e,["bufferManager","shaderCache","textureManager"]),e.objectCache=new Vk,e.shaderCache=_e.newInstance(),e.shaderCache.setDevice(t),e.bindGroupLayouts=[],e.bufferManager=Ci.newInstance(),e.bufferManager.setDevice(t),e.textureManager=Bk.newInstance(),e.textureManager.setDevice(t),e.pipelines={},Ak(t,e)}const Gk=ze(d9,"vtkWebGPUDevice");var Pk={newInstance:Gk,extend:d9};function Ik(t,e){e.classHierarchy.push("vtkWebGPUHardwareSelectionPass"),t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=null,t.setCurrentOperation("buildPass"),n.traverse(t);const i=n.getDevice();if(e.selectionRenderEncoder)e.colorTexture.resize(n.getCanvas().width,n.getCanvas().height),e.depthTexture.resizeToMatch(e.colorTexture);else{t.createRenderEncoder(),e.colorTexture=fr.newInstance({label:"hardwareSelectorColor"}),e.colorTexture.create(i,{width:n.getCanvas().width,height:n.getCanvas().height,format:"rgba32uint",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});const a=e.colorTexture.createView("hardwareSelectColorTexture");e.selectionRenderEncoder.setColorTextureView(0,a),e.depthTexture=fr.newInstance({label:"hardwareSelectorDepth"}),e.depthTexture.create(i,{width:n.getCanvas().width,height:n.getCanvas().height,format:"depth32float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});const o=e.depthTexture.createView("hardwareSelectDepthTexture");e.selectionRenderEncoder.setDepthTextureView(o)}e.selectionRenderEncoder.attachTextureViews(),r.setRenderEncoder(e.selectionRenderEncoder),t.setCurrentOperation("cameraPass"),r.traverse(t),t.setCurrentOperation("opaquePass"),r.traverse(t)},t.createRenderEncoder=()=>{e.selectionRenderEncoder=Or.newInstance({label:"HardwareSelectionPass"}),e.selectionRenderEncoder.setPipelineHash("sel"),e.selectionRenderEncoder.setReplaceShaderCodeFunction(r=>{const i=r.getShaderDescription("fragment");i.addOutput("vec4<u32>","outColor");let a=i.getCode();a=_e.substitute(a,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<u32>(mapperUBO.PropID, compositeID, 0u, 0u);"]).result,i.setCode(a)});const n=e.selectionRenderEncoder.getDescription();n.colorAttachments[0].clearValue=[0,0,0,0],e.selectionRenderEncoder.setPipelineSettings({primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater",format:"depth32float"},fragment:{targets:[{format:"rgba32uint",blend:void 0}]}})}}const zk={selectionRenderEncoder:null,colorTexture:null,depthTexture:null};function v9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,zk,n),Ar.extend(t,e,n),P.get(t,e,["colorTexture","depthTexture"]),Ik(t,e)}const Wk=P.newInstance(v9,"vtkWebGPUHardwareSelectionPass");var jk={newInstance:Wk,extend:v9};const{SelectionContent:$k,SelectionField:h2}=Kc,{FieldAssociations:g2}=ha,{vtkErrorMacro:y9}=P;function Hk(t){return`${t.propID} ${t.compositeID}`}function d2(t,e,n,r){const i=((n.height-e-1)*n.colorBufferWidth+t)*4+r;return n.colorValues[i]}function Kk(t,e,n,r){{if(r[0]=e[0],r[1]=e[1],e[0]<0||e[0]>=t.width||e[1]<0||e[1]>=t.height)return null;const i=d2(e[0],e[1],t,0);if(i<=0)return null;const a={};a.propID=i;let o=d2(e[0],e[1],t,1);if((o<0||o>16777215)&&(o=0),a.compositeID=o,t.captureZValues){const s=(t.height-e[1]-1)*t.zbufferBufferWidth+e[0];a.zValue=t.depthValues[s],a.zValue=t.webGPURenderer.convertToOpenGLDepth(a.zValue),a.displayPosition=e}return a}}function Xk(t,e,n){const r=[];let i=0;return e.forEach((a,o)=>{const s=Kc.newInstance();switch(s.setContentType($k.INDICES),t){case g2.FIELD_ASSOCIATION_CELLS:s.setFieldType(h2.CELL);break;case g2.FIELD_ASSOCIATION_POINTS:s.setFieldType(h2.POINT);break;default:y9("Unknown field association")}s.getProperties().propID=a.info.propID;const u=n.webGPURenderer.getPropFromID(a.info.propID);s.getProperties().prop=u.getRenderable(),s.getProperties().compositeID=a.info.compositeID,s.getProperties().pixelCount=a.pixelCount,n.captureZValues&&(s.getProperties().displayPosition=[a.info.displayPosition[0],a.info.displayPosition[1],a.info.zValue],s.getProperties().worldPosition=n.webGPURenderWindow.displayToWorld(a.info.displayPosition[0],a.info.displayPosition[1],a.info.zValue,n.renderer)),s.setSelectionList(a.attributeIDs),r[i]=s,i++}),r}function qk(t,e,n,r,i){const a=Math.floor(e),o=Math.floor(n),s=Math.floor(r),u=Math.floor(i),l=new Map,p=[0,0];for(let c=o;c<=u;c++)for(let f=a;f<=s;f++){const v=Kk(t,[f,c],0,p);if(v){const y=Hk(v);if(!l.has(y))l.set(y,{info:v,pixelCount:1,attributeIDs:[v.attributeID]});else{const x=l.get(y);x.pixelCount++,t.captureZValues&&v.zValue<x.info.zValue&&(x.info=v),x.attributeIDs.indexOf(v.attributeID)===-1&&x.attributeIDs.push(v.attributeID)}}}return Xk(t.fieldAssociation,l,t)}function Yk(t,e){e.classHierarchy.push("vtkWebGPUHardwareSelector"),t.endSelection=()=>{e.WebGPURenderer.setSelector(null)},t.getSourceDataAsync=async n=>{if(!n||!e._WebGPURenderWindow)return y9("Renderer and view must be set before calling Select."),!1;e._WebGPURenderWindow.getRenderable().preRender(),e._WebGPURenderWindow.getInitialized()||(e._WebGPURenderWindow.initialize(),await new Promise(h=>{e._WebGPURenderWindow.onInitialized(h)}));const r=e._WebGPURenderWindow.getViewNodeFor(n);if(!r)return!1;const i=r.getSuppressClear();r.setSuppressClear(!0),e._selectionPass.traverse(e._WebGPURenderWindow,r),r.setSuppressClear(i);const a=e._WebGPURenderWindow.getDevice(),o=e._selectionPass.getColorTexture(),s=e._selectionPass.getDepthTexture(),u={area:[0,0,o.getWidth()-1,o.getHeight()-1],captureZValues:e.captureZValues,fieldAssociation:e.fieldAssociation,renderer:n,webGPURenderer:r,webGPURenderWindow:e._WebGPURenderWindow,width:o.getWidth(),height:o.getHeight()};u.colorBufferWidth=16*Math.floor((u.width+15)/16),u.colorBufferSizeInBytes=u.colorBufferWidth*u.height*4*4;const l=co.newInstance({label:"hardwareSelectColorBuffer"});l.setDevice(a),l.create(u.colorBufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);const p=e._WebGPURenderWindow.getCommandEncoder();p.copyTextureToBuffer({texture:o.getHandle()},{buffer:l.getHandle(),bytesPerRow:16*u.colorBufferWidth,rowsPerImage:u.height},{width:u.width,height:u.height,depthOrArrayLayers:1});let c;e.captureZValues&&(u.zbufferBufferWidth=64*Math.floor((u.width+63)/64),c=co.newInstance({label:"hardwareSelectDepthBuffer"}),c.setDevice(a),u.zbufferSizeInBytes=u.height*u.zbufferBufferWidth*4,c.create(u.zbufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),p.copyTextureToBuffer({texture:s.getHandle(),aspect:"depth-only"},{buffer:c.getHandle(),bytesPerRow:4*u.zbufferBufferWidth,rowsPerImage:u.height},{width:u.width,height:u.height,depthOrArrayLayers:1})),a.submitCommandEncoder(p);const f=l.mapAsync(GPUMapMode.READ);if(e.captureZValues){const h=c.mapAsync(GPUMapMode.READ);await Promise.all([f,h]),u.depthValues=new Float32Array(c.getMappedRange().slice()),c.unmap()}else await f;return u.colorValues=new Uint32Array(l.getMappedRange().slice()),l.unmap(),u.generateSelection=(h,v,y,x)=>qk(u,h,v,y,x),u}}const Jk={};function m9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Jk,n),H4.extend(t,e,n),e._selectionPass=jk.newInstance(),P.setGet(t,e,["_WebGPURenderWindow"]),P.moveToProtected(t,e,["WebGPURenderWindow"]),Yk(t,e)}const Qk=P.newInstance(m9,"vtkWebGPUHardwareSelector");var x9={newInstance:Qk,extend:m9};const{vtkErrorMacro:v2}=P,Zk={position:"absolute",top:0,left:0,width:"100%",height:"100%"};function eB(t,e){e.classHierarchy.push("vtkWebGPURenderWindow"),t.getViewNodeFactory=()=>e.myFactory;const n=[0,0];function r(){e.renderable&&(e.size[0]!==n[0]||e.size[1]!==n[1])&&(n[0]=e.size[0],n[1]=e.size[1],e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1]),t.recreateSwapChain()),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none"),e.containerSize=null}t.onModified(r),t.recreateSwapChain=()=>{e.context&&(e.context.unconfigure(),e.presentationFormat=navigator.gpu.getPreferredCanvasFormat(e.adapter),e.context.configure({device:e.device.getHandle(),format:e.presentationFormat,alphaMode:"premultiplied",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_DST,width:e.size[0],height:e.size[1]}),e._configured=!0)},t.getCurrentTexture=()=>e.context.getCurrentTexture(),t.buildPass=o=>{if(o){if(!e.renderable)return;t.prepareNodes(),t.addMissingNodes(e.renderable.getRenderersByReference()),t.removeUnusedNodes(),t.initialize()}else e.initialized&&(e._configured||t.recreateSwapChain(),e.commandEncoder=e.device.createCommandEncoder())},t.initialize=()=>{if(!e.initializing){if(e.initializing=!0,!navigator.gpu){v2("WebGPU is not enabled.");return}t.create3DContextAsync().then(()=>{e.initialized=!0,!e.deleted&&t.invokeInitialized()})}},t.setContainer=o=>{e.el&&e.el!==o&&(e.canvas.parentNode!==e.el&&v2("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==o&&(e.el=o,e.el&&(e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage)),t.modified())},t.getContainer=()=>e.el,t.getContainerSize=()=>{if(!e.containerSize&&e.el){const{width:o,height:s}=e.el.getBoundingClientRect();e.containerSize=[o,s]}return e.containerSize||e.size},t.getFramebufferSize=()=>e.size,t.create3DContextAsync=async()=>{if(e.adapter=await navigator.gpu.requestAdapter({powerPreference:"high-performance"}),!e.deleted){if(e.device=Pk.newInstance(),e.device.initialize(await e.adapter.requestDevice()),e.deleted){e.device=null;return}e.context=e.canvas.getContext("webgpu")}},t.releaseGraphicsResources=()=>{const o=Ar.newInstance();o.setCurrentOperation("Release"),o.traverse(t,null),e.adapter=null,e.device=null,e.context=null,e.initialized=!1,e.initializing=!1},t.setBackgroundImage=o=>{e.bgImage.src=o.src},t.setUseBackgroundImage=o=>{e.useBackgroundImage=o,e.useBackgroundImage&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)};async function i(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.imageFormat;const s=document.createElement("canvas"),u=s.getContext("2d");s.width=e.canvas.width,s.height=e.canvas.height;const l=await t.getPixelsAsync(),p=new ImageData(l.colorValues,l.width,l.height);u.putImageData(p,0,0);const c=e.canvas.getBoundingClientRect();e.renderable.getRenderers().forEach(y=>{y.getViewProps().forEach(m=>{if(m.getContainer){const d=m.getContainer().getElementsByTagName("canvas");for(let S=0;S<d.length;S++){const T=d[S],C=T.getBoundingClientRect(),w=C.x-c.x,_=C.y-c.y;u.drawImage(T,w,_)}}})});const v=s.toDataURL(o);s.remove(),t.invokeImageReady(v)}t.captureNextImage=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",{resetCamera:s=!1,size:u=null,scale:l=1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.deleted)return null;e.imageFormat=o;const p=e.notifyStartCaptureImage;return e.notifyStartCaptureImage=!0,e._screenshot={size:u||l!==1?u||e.size.map(c=>c*l):null},new Promise((c,f)=>{const h=t.onImageReady(v=>{if(e._screenshot.size===null)e.notifyStartCaptureImage=p,h.unsubscribe(),e._screenshot.placeHolder&&(e.size=e._screenshot.originalSize,t.modified(),e._screenshot.cameras&&e._screenshot.cameras.forEach(y=>{let{restoreParamsFn:x,arg:m}=y;return x(m)}),t.traverseAllPasses(),e.el.removeChild(e._screenshot.placeHolder),e._screenshot.placeHolder.remove(),e._screenshot=null),c(v);else{const y=document.createElement("img");if(y.style=Zk,y.src=v,e._screenshot.placeHolder=e.el.appendChild(y),e.canvas.style.display="none",e._screenshot.originalSize=e.size,e.size=e._screenshot.size,e._screenshot.size=null,t.modified(),s){const x=s!==!0;e._screenshot.cameras=e.renderable.getRenderers().map(m=>{const g=m.getActiveCamera(),d=g.get("focalPoint","position","parallelScale");return{resetCameraArgs:x?{renderer:m}:void 0,resetCameraFn:x?s:m.resetCamera,restoreParamsFn:g.set,arg:JSON.parse(JSON.stringify(d))}}),e._screenshot.cameras.forEach(m=>{let{resetCameraFn:g,resetCameraArgs:d}=m;return g(d)})}t.traverseAllPasses()}})})},t.traverseAllPasses=()=>{if(!e.deleted)if(e.initialized){if(e.renderPasses)for(let o=0;o<e.renderPasses.length;++o)e.renderPasses[o].traverse(t,null);e.commandEncoder&&(e.device.submitCommandEncoder(e.commandEncoder),e.commandEncoder=null,e.notifyStartCaptureImage&&e.device.onSubmittedWorkDone().then(()=>{i()}))}else{t.initialize();const o=t.onInitialized(()=>{o.unsubscribe(),t.traverseAllPasses()})}},t.setViewStream=o=>{if(e.viewStream===o)return!1;if(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=o,e.viewStream){const s=e.renderable.getRenderers()[0];s.getBackgroundByReference()[3]=0,t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(u=>t.setBackgroundImage(u.image)),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()}return!0},t.getUniquePropID=()=>e.nextPropID++,t.getPropFromID=o=>{for(let s=0;s<e.children.length;s++){const u=e.children[s].getPropFromID(o);if(u!==null)return u}return null},t.getPixelsAsync=async()=>{const o=e.device,s=e.renderPasses[0].getOpaquePass().getColorTexture(),u={width:s.getWidth(),height:s.getHeight()};u.colorBufferWidth=32*Math.floor((u.width+31)/32),u.colorBufferSizeInBytes=u.colorBufferWidth*u.height*8;const l=co.newInstance();l.setDevice(o),l.create(u.colorBufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);const p=e.device.createCommandEncoder();p.copyTextureToBuffer({texture:s.getHandle()},{buffer:l.getHandle(),bytesPerRow:8*u.colorBufferWidth,rowsPerImage:u.height},{width:u.width,height:u.height,depthOrArrayLayers:1}),o.submitCommandEncoder(p),await l.mapAsync(GPUMapMode.READ),u.colorValues=new Uint16Array(l.getMappedRange().slice()),l.unmap();const f=new Uint8ClampedArray(u.height*u.width*4);for(let h=0;h<u.height;h++)for(let v=0;v<u.width;v++){const y=(h*u.width+v)*4,x=(h*u.colorBufferWidth+v)*4;f[y]=255*$n.fromHalf(u.colorValues[x]),f[y+1]=255*$n.fromHalf(u.colorValues[x+1]),f[y+2]=255*$n.fromHalf(u.colorValues[x+2]),f[y+3]=255*$n.fromHalf(u.colorValues[x+3])}return u.colorValues=f,u},t.createSelector=()=>{const o=x9.newInstance();return o.setWebGPURenderWindow(t),o};const a=t.setSize;t.setSize=(o,s)=>{const u=a(o,s);return u&&t.invokeWindowResizeEvent({width:o,height:s}),u},t.delete=P.chain(t.delete,t.setViewStream)}const tB={initialized:!1,context:null,adapter:null,device:null,canvas:null,cursorVisibility:!0,cursor:"pointer",containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1,nextPropID:1,xrSupported:!1,presentationFormat:null};function nB(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,tB,n),e.canvas=document.createElement("canvas"),e.canvas.style.width="100%",e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",a9.extend(t,e,n),e.myFactory=gb.newInstance(),e.renderPasses[0]=Rk.newInstance(),e.selector||(e.selector=x9.newInstance(),e.selector.setWebGPURenderWindow(t)),P.event(t,e,"imageReady"),P.event(t,e,"initialized"),P.get(t,e,["commandEncoder","device","presentationFormat","useBackgroundImage","xrSupported"]),P.setGet(t,e,["initialized","context","canvas","device","renderPasses","notifyStartCaptureImage","cursor","useOffScreen"]),P.setGetArray(t,e,["size"],2),P.event(t,e,"windowResizeEvent"),eB(t,e)}const S9=P.newInstance(nB,"vtkWebGPURenderWindow");d1("WebGPU",S9);Sn("vtkRenderWindow",S9);const rB=tL.extractURLParameters(),iB={margin:"0",padding:"0",position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden"},aB={position:"absolute",left:"25px",top:"25px",backgroundColor:"white",borderRadius:"5px",listStyle:"none",padding:"5px 10px",margin:"0",display:"block",border:"solid 1px black",maxWidth:"calc(100% - 70px)",maxHeight:"calc(100% - 60px)",overflow:"auto"};function y2(t,e){Object.keys(e).forEach(n=>{t.style[n]=e[n]})}function oB(t,e){e.classHierarchy.push("vtkFullScreenRenderWindow");const n=document.querySelector("body");e.rootContainer||(e.rootContainer=n),e.container||(e.container=document.createElement("div"),y2(e.container,e.containerStyle||iB),e.rootContainer.appendChild(e.container)),e.rootContainer===n&&(document.documentElement.style.height="100%",n.style.height="100%",n.style.padding="0",n.style.margin="0"),e.renderWindow=bF.newInstance(),e.renderer=CF.newInstance(),e.renderWindow.addRenderer(e.renderer),e.apiSpecificRenderWindow=e.renderWindow.newAPISpecificView(rB.viewAPI??e.defaultViewAPI),e.apiSpecificRenderWindow.setContainer(e.container),e.renderWindow.addView(e.apiSpecificRenderWindow),e.interactor=U4.newInstance(),e.interactor.setInteractorStyle(QF.newInstance()),e.interactor.setView(e.apiSpecificRenderWindow),e.interactor.initialize(),e.interactor.bindEvents(e.container),t.setBackground=e.renderer.setBackground,t.removeController=()=>{const i=e.controlContainer;i&&i.parentNode.removeChild(i)},t.setControllerVisibility=i=>{e.controllerVisibility=i,e.controlContainer&&(i?e.controlContainer.style.display="block":e.controlContainer.style.display="none")},t.toggleControllerVisibility=()=>{t.setControllerVisibility(!e.controllerVisibility)};function r(i){String.fromCharCode(i.charCode)==="c"&&t.toggleControllerVisibility()}t.addController=i=>{e.controlContainer=document.createElement("div"),y2(e.controlContainer,e.controlPanelStyle||aB),e.rootContainer.appendChild(e.controlContainer),e.controlContainer.innerHTML=i,t.setControllerVisibility(e.controllerVisibility),e.rootContainer.addEventListener("keypress",r)},t.setBackground(...e.background),t.addRepresentation=i=>{i.getActors().forEach(a=>{e.renderer.addActor(a)})},t.removeRepresentation=i=>{i.getActors().forEach(a=>e.renderer.removeActor(a))},t.delete=P.chain(t.setContainer,e.apiSpecificRenderWindow.delete,()=>{var i;(i=e.rootContainer)==null||i.removeEventListener("keypress",r),window.removeEventListener("resize",t.resize)},t.delete),t.resize=()=>{const i=e.container.getBoundingClientRect(),a=window.devicePixelRatio||1;e.apiSpecificRenderWindow.setSize(Math.floor(i.width*a),Math.floor(i.height*a)),e.resizeCallback&&e.resizeCallback(i),e.renderWindow.render()},t.setResizeCallback=i=>{e.resizeCallback=i,t.resize()},e.listenWindowResize&&window.addEventListener("resize",t.resize),t.resize()}const sB={background:[.32,.34,.43],containerStyle:null,controlPanelStyle:null,listenWindowResize:!0,resizeCallback:null,controllerVisibility:!0};function T9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,sB,n),P.obj(t,e),P.get(t,e,["renderWindow","renderer","apiSpecificRenderWindow","interactor","rootContainer","container","controlContainer"]),oB(t,e)}const uB=P.newInstance(T9);var cB={newInstance:uB,extend:T9};const lB={RGB:0,HSV:1,LAB:2,DIVERGING:3},fB={LINEAR:0,LOG10:1};var C9={ColorSpace:lB,Scale:fB};const{ColorSpace:_n,Scale:x1}=C9,{ScalarMappingTarget:$u}=zc,{vtkDebugMacro:pB,vtkErrorMacro:mr,vtkWarningMacro:hB}=P;function m2(t,e){const n=t[0],r=t[1],i=t[2],a=Math.sqrt(n*n+r*r+i*i),o=a>.001?Math.acos(n/a):0,s=o>.001?Math.atan2(i,r):0;e[0]=a,e[1]=o,e[2]=s}function gB(t,e){const n=t[0],r=t[1],i=t[2];e[0]=n*Math.cos(r),e[1]=n*Math.sin(r)*Math.cos(i),e[2]=n*Math.sin(r)*Math.sin(i)}function x2(t,e){if(t[0]>=e-.1)return t[2];const n=t[1]*Math.sqrt(e*e-t[0]*t[0])/(t[0]*Math.sin(t[1]));return t[2]>-.3*Math.PI?t[2]+n:t[2]-n}function dB(t,e){let n=t-e;for(n<0&&(n=-n);n>=2*Math.PI;)n-=2*Math.PI;return n>Math.PI&&(n=2*Math.PI-n),n}function S2(t,e,n,r){const i=[],a=[];$i(e,i),$i(n,a);const o=[],s=[];m2(i,o),m2(a,s);let u=t;if(o[1]>.05&&s[1]>.05&&dB(o[2],s[2])>.33*Math.PI){let c=Math.max(o[0],s[0]);c=Math.max(88,c),t<.5?(s[0]=c,s[1]=0,s[2]=0,u*=2):(o[0]=c,o[1]=0,o[2]=0,u=2*u-1)}o[1]<.05&&s[1]>.05?o[2]=x2(s,o[0]):s[1]<.05&&o[1]>.05&&(s[2]=x2(o,s[0]));const l=[];l[0]=(1-u)*o[0]+u*s[0],l[1]=(1-u)*o[1]+u*s[1],l[2]=(1-u)*o[2]+u*s[2];const p=[];gB(l,p),ic(p,r)}function vB(t,e){e.classHierarchy.push("vtkColorTransferFunction"),t.getSize=()=>e.nodes.length,t.addRGBPoint=(n,r,i,a)=>t.addRGBPointLong(n,r,i,a,.5,0),t.addRGBPointLong=function(n,r,i,a){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(o<0||o>1)return mr("Midpoint outside range [0.0, 1.0]"),-1;if(s<0||s>1)return mr("Sharpness outside range [0.0, 1.0]"),-1;e.allowDuplicateScalars||t.removePoint(n);const u={x:n,r,g:i,b:a,midpoint:o,sharpness:s};e.nodes.push(u),t.sortAndUpdateRange();let l=0;for(;l<e.nodes.length&&e.nodes[l].x!==n;l++);return l<e.nodes.length?l:-1},t.addHSVPoint=(n,r,i,a)=>t.addHSVPointLong(n,r,i,a,.5,0),t.addHSVPointLong=function(n,r,i,a){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;const u=[];return Ai([r,i,a],u),t.addRGBPoint(n,u[0],u[1],u[2],o,s)},t.setNodes=n=>{if(e.nodes!==n){const r=JSON.stringify(e.nodes);e.nodes=n;const i=JSON.stringify(e.nodes);if(t.sortAndUpdateRange()||r!==i)return t.modified(),!0}return!1},t.sortAndUpdateRange=()=>{const n=JSON.stringify(e.nodes);e.nodes.sort((a,o)=>a.x-o.x);const r=JSON.stringify(e.nodes),i=t.updateRange();return!i&&n!==r?(t.modified(),!0):i},t.updateRange=()=>{const n=[2];n[0]=e.mappingRange[0],n[1]=e.mappingRange[1];const r=e.nodes.length;return r?(e.mappingRange[0]=e.nodes[0].x,e.mappingRange[1]=e.nodes[r-1].x):(e.mappingRange[0]=0,e.mappingRange[1]=0),n[0]===e.mappingRange[0]&&n[1]===e.mappingRange[1]?!1:(t.modified(),!0)},t.removePoint=n=>{let r=0;for(;r<e.nodes.length&&e.nodes[r].x!==n;r++);const i=r;if(r>=e.nodes.length)return-1;let a=!1;return e.nodes.splice(r,1),(r===0||r===e.nodes.length)&&(a=t.updateRange()),a||t.modified(),i},t.movePoint=(n,r)=>{if(n!==r){t.removePoint(r);for(let i=0;i<e.nodes.length;i++)if(e.nodes[i].x===n){e.nodes[i].x=r,t.sortAndUpdateRange();break}}},t.removeAllPoints=()=>{e.nodes=[],t.sortAndUpdateRange()},t.addRGBSegment=(n,r,i,a,o,s,u,l)=>{t.sortAndUpdateRange();for(let p=0;p<e.nodes.length;)e.nodes[p].x>=n&&e.nodes[p].x<=o?e.nodes.splice(p,1):p++;t.addRGBPointLong(n,r,i,a,.5,0),t.addRGBPointLong(o,s,u,l,.5,0),t.modified()},t.addHSVSegment=(n,r,i,a,o,s,u,l)=>{const p=[r,i,a],c=[s,u,l],f=[],h=[];Ai(p,f),Ai(c,h),t.addRGBSegment(n,f[0],f[1],f[2],o,h[0],h[1],h[2])},t.mapValue=n=>{const r=[];return t.getColor(n,r),[Math.floor(255*r[0]+.5),Math.floor(255*r[1]+.5),Math.floor(255*r[2]+.5),255]},t.getColor=(n,r)=>{if(e.indexedLookup){const i=t.getSize(),a=t.getAnnotatedValueIndexInternal(n);if(a<0||i===0){const o=t.getNanColorByReference();r[0]=o[0],r[1]=o[1],r[2]=o[2]}else{const o=[];t.getNodeValue(a%i,o),r[0]=o[1],r[1]=o[2],r[2]=o[3]}return}t.getTable(n,n,1,r)},t.getRedValue=n=>{const r=[];return t.getColor(n,r),r[0]},t.getGreenValue=n=>{const r=[];return t.getColor(n,r),r[1]},t.getBlueValue=n=>{const r=[];return t.getColor(n,r),r[2]},t.getTable=(n,r,i,a)=>{const o=Number(n),s=Number(r);if(ac(o)||ac(s)){for(let E=0;E<i;E++)a[E*3+0]=e.nanColor[0],a[E*3+1]=e.nanColor[1],a[E*3+2]=e.nanColor[2];return}let u=0;const l=e.nodes.length;let p=0,c=0,f=0;l!==0&&(p=e.nodes[l-1].r,c=e.nodes[l-1].g,f=e.nodes[l-1].b);let h=0,v=0,y=0;const x=[0,0,0],m=[0,0,0];let g=0,d=0;const S=[];let T=e.scale===x1.LOG10;T&&(T=e.mappingRange[0]>0);let C=0,w=0,_=0;T&&(C=Math.log10(o),w=Math.log10(s));for(let E=0;E<i;E++){const D=3*E;if(i>1?T?(_=C+E/(i-1)*(w-C),h=10**_):h=o+E/(i-1)*(s-o):T?(_=.5*(C+w),h=10**_):h=.5*(o+s),e.discretize){const O=e.mappingRange;if(h>=O[0]&&h<=O[1]){const N=e.numberOfValues,R=O[1]-O[0];if(N<=1)h=O[0]+R/2;else{const M=(h-O[0])/R,A=Kh(N*M);h=O[0]+A/(N-1)*R}}}for(;u<l&&h>e.nodes[u].x;)u++,u<l&&(v=e.nodes[u-1].x,y=e.nodes[u].x,T&&(v=Math.log10(v),y=Math.log10(y)),x[0]=e.nodes[u-1].r,m[0]=e.nodes[u].r,x[1]=e.nodes[u-1].g,m[1]=e.nodes[u].g,x[2]=e.nodes[u-1].b,m[2]=e.nodes[u].b,g=e.nodes[u-1].midpoint,d=e.nodes[u-1].sharpness,g<1e-5&&(g=1e-5),g>.99999&&(g=.99999));if(h>e.mappingRange[1])a[D]=0,a[D+1]=0,a[D+2]=0,e.clamping&&(t.getUseAboveRangeColor()?(a[D]=e.aboveRangeColor[0],a[D+1]=e.aboveRangeColor[1],a[D+2]=e.aboveRangeColor[2]):(a[D]=p,a[D+1]=c,a[D+2]=f));else if(h<e.mappingRange[0]||pm(h)&&h<0)a[D]=0,a[D+1]=0,a[D+2]=0,e.clamping&&(t.getUseBelowRangeColor()?(a[D]=e.belowRangeColor[0],a[D+1]=e.belowRangeColor[1],a[D+2]=e.belowRangeColor[2]):l>0&&(a[D]=e.nodes[0].r,a[D+1]=e.nodes[0].g,a[D+2]=e.nodes[0].b));else if(u===0&&(Math.abs(h-o)<1e-6||e.discretize))l>0?(a[D]=e.nodes[0].r,a[D+1]=e.nodes[0].g,a[D+2]=e.nodes[0].b):(a[D]=0,a[D+1]=0,a[D+2]=0);else{let O=0;if(T?O=(_-v)/(y-v):O=(h-v)/(y-v),O<g?O=.5*O/g:O=.5+.5*(O-g)/(1-g),d>.99)if(O<.5){a[D]=x[0],a[D+1]=x[1],a[D+2]=x[2];continue}else{a[D]=m[0],a[D+1]=m[1],a[D+2]=m[2];continue}if(d<.01){if(e.colorSpace===_n.RGB)a[D]=(1-O)*x[0]+O*m[0],a[D+1]=(1-O)*x[1]+O*m[1],a[D+2]=(1-O)*x[2]+O*m[2];else if(e.colorSpace===_n.HSV){const B=[],$=[];zo(x,B),zo(m,$),e.hSVWrap&&(B[0]-$[0]>.5||$[0]-B[0]>.5)&&(B[0]>$[0]?B[0]-=1:$[0]-=1);const H=[];H[0]=(1-O)*B[0]+O*$[0],H[0]<0&&(H[0]+=1),H[1]=(1-O)*B[1]+O*$[1],H[2]=(1-O)*B[2]+O*$[2],Ai(H,S),a[D]=S[0],a[D+1]=S[1],a[D+2]=S[2]}else if(e.colorSpace===_n.LAB){const B=[],$=[];$i(x,B),$i(m,$);const H=[];H[0]=(1-O)*B[0]+O*$[0],H[1]=(1-O)*B[1]+O*$[1],H[2]=(1-O)*B[2]+O*$[2],ic(H,S),a[D]=S[0],a[D+1]=S[1],a[D+2]=S[2]}else e.colorSpace===_n.DIVERGING?(S2(O,x,m,S),a[D]=S[0],a[D+1]=S[1],a[D+2]=S[2]):mr("ColorSpace set to invalid value.",e.colorSpace);continue}O<.5?O=.5*(O*2)**(1+10*d):O>.5&&(O=1-.5*((1-O)*2)**(1+10*d));const N=O*O,R=N*O,M=2*R-3*N+1,A=-2*R+3*N,G=R-2*N+O,j=R-N;let k,F;if(e.colorSpace===_n.RGB)for(let B=0;B<3;B++)k=m[B]-x[B],F=(1-d)*k,a[D+B]=M*x[B]+A*m[B]+G*F+j*F;else if(e.colorSpace===_n.HSV){const B=[],$=[];zo(x,B),zo(m,$),e.hSVWrap&&(B[0]-$[0]>.5||$[0]-B[0]>.5)&&(B[0]>$[0]?B[0]-=1:$[0]-=1);const H=[];for(let X=0;X<3;X++)k=$[X]-B[X],F=(1-d)*k,H[X]=M*B[X]+A*$[X]+G*F+j*F,X===0&&H[X]<0&&(H[X]+=1);Ai(H,S),a[D]=S[0],a[D+1]=S[1],a[D+2]=S[2]}else if(e.colorSpace===_n.LAB){const B=[],$=[];$i(x,B),$i(m,$);const H=[];for(let X=0;X<3;X++)k=$[X]-B[X],F=(1-d)*k,H[X]=M*B[X]+A*$[X]+G*F+j*F;ic(H,S),a[D]=S[0],a[D+1]=S[1],a[D+2]=S[2]}else e.colorSpace===_n.DIVERGING?(S2(O,x,m,S),a[D]=S[0],a[D+1]=S[1],a[D+2]=S[2]):mr("ColorSpace set to invalid value.");for(let B=0;B<3;B++)a[D+B]=a[D+B]<0?0:a[D+B],a[D+B]=a[D+B]>1?1:a[D+B]}}},t.getUint8Table=function(n,r,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t.getMTime()<=e.buildTime&&e.tableSize===i&&e.tableWithAlpha!==a)return e.table;if(e.nodes.length===0)return mr("Attempting to lookup a value with no points in the function"),e.table;const o=a?4:3;(e.tableSize!==i||e.tableWithAlpha!==a)&&(e.table=new Uint8Array(i*o),e.tableSize=i,e.tableWithAlpha=a);const s=[];t.getTable(n,r,i,s);for(let u=0;u<i;u++)e.table[u*o+0]=Math.floor(s[u*3+0]*255+.5),e.table[u*o+1]=Math.floor(s[u*3+1]*255+.5),e.table[u*o+2]=Math.floor(s[u*3+2]*255+.5),a&&(e.table[u*o+3]=255);return e.buildTime.modified(),e.table},t.buildFunctionFromArray=n=>{t.removeAllPoints();const r=n.getNumberOfComponents();for(let i=0;i<n.getNumberOfTuples();i++)switch(r){case 3:{e.nodes.push({x:i,r:n.getComponent(i,0),g:n.getComponent(i,1),b:n.getComponent(i,2),midpoint:.5,sharpness:0});break}case 4:{e.nodes.push({x:n.getComponent(i,0),r:n.getComponent(i,1),g:n.getComponent(i,2),b:n.getComponent(i,3),midpoint:.5,sharpness:0});break}case 5:{e.nodes.push({x:i,r:n.getComponent(i,0),g:n.getComponent(i,1),b:n.getComponent(i,2),midpoint:n.getComponent(i,4),sharpness:n.getComponent(i,5)});break}case 6:{e.nodes.push({x:n.getComponent(i,0),r:n.getComponent(i,1),g:n.getComponent(i,2),b:n.getComponent(i,3),midpoint:n.getComponent(i,4),sharpness:n.getComponent(i,5)});break}}t.sortAndUpdateRange()},t.buildFunctionFromTable=(n,r,i,a)=>{let o=0;t.removeAllPoints(),i>1&&(o=(r-n)/(i-1));for(let s=0;s<i;s++){const u={x:n+o*s,r:a[s*3],g:a[s*3+1],b:a[s*3+2],sharpness:0,midpoint:.5};e.nodes.push(u)}t.sortAndUpdateRange()},t.getNodeValue=(n,r)=>n<0||n>=e.nodes.length?(mr("Index out of range!"),-1):(r[0]=e.nodes[n].x,r[1]=e.nodes[n].r,r[2]=e.nodes[n].g,r[3]=e.nodes[n].b,r[4]=e.nodes[n].midpoint,r[5]=e.nodes[n].sharpness,1),t.setNodeValue=(n,r)=>{if(n<0||n>=e.nodes.length)return mr("Index out of range!"),-1;const i=e.nodes[n].x;return e.nodes[n].x=r[0],e.nodes[n].r=r[1],e.nodes[n].g=r[2],e.nodes[n].b=r[3],e.nodes[n].midpoint=r[4],e.nodes[n].sharpness=r[5],i!==r[0]?t.sortAndUpdateRange():t.modified(),1},t.getNumberOfAvailableColors=()=>{var r;if(e.indexedLookup&&t.getSize())return t.getSize();if(e.tableSize)return e.tableSize;const n=((r=e.nodes)==null?void 0:r.length)??0;return Math.max(4094,n)},t.getIndexedColor=(n,r)=>{const i=t.getSize();if(i>0&&n>=0){const o=[];t.getNodeValue(n%i,o);for(let s=0;s<3;++s)r[s]=o[s+1];r[3]=1;return}const a=t.getNanColorByReference();r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=1},t.fillFromDataPointer=(n,r)=>{if(!(n<=0||!r)){t.removeAllPoints();for(let i=0;i<n;i++)t.addRGBPoint(r[i*4],r[i*4+1],r[i*4+2],r[i*4+3])}},t.setMappingRange=(n,r)=>{const i=[n,r],a=t.getRange();if(a[1]===i[1]&&a[0]===i[0])return;if(i[1]===i[0]){mr("attempt to set zero width color range");return}const o=(i[1]-i[0])/(a[1]-a[0]),s=i[0]-a[0]*o;for(let u=0;u<e.nodes.length;++u)e.nodes[u].x=e.nodes[u].x*o+s;e.mappingRange[0]=i[0],e.mappingRange[1]=i[1],t.modified()},t.adjustRange=n=>{const r=t.getRange(),i=[];r[0]<n[0]?(t.getColor(n[0],i),t.addRGBPoint(n[0],i[0],i[1],i[2])):(t.getColor(r[0],i),t.addRGBPoint(n[0],i[0],i[1],i[2])),r[1]>n[1]?(t.getColor(n[1],i),t.addRGBPoint(n[1],i[0],i[1],i[2])):(t.getColor(r[1],i),t.addRGBPoint(n[1],i[0],i[1],i[2])),t.sortAndUpdateRange();for(let a=0;a<e.nodes.length;)e.nodes[a].x>=n[0]&&e.nodes[a].x<=n[1]?e.nodes.splice(a,1):++a;return 1},t.estimateMinNumberOfSamples=(n,r)=>{const i=t.findMinimumXDistance();return Math.ceil((r-n)/i)},t.findMinimumXDistance=()=>{if(e.nodes.length<2)return-1;let n=Number.MAX_VALUE;for(let r=0;r<e.nodes.length-1;r++){const i=e.nodes[r+1].x-e.nodes[r].x;i<n&&(n=i)}return n},t.mapScalarsThroughTable=(n,r,i,a)=>{if(t.getSize()===0){pB("Transfer Function Has No Points!");return}e.indexedLookup?t.mapDataIndexed(n,r,i,a):t.mapData(n,r,i,a)},t.mapData=(n,r,i,a)=>{if(t.getSize()===0){hB("Transfer Function Has No Points!");return}const o=Math.floor(t.getAlpha()*255+.5),s=n.getNumberOfTuples(),u=n.getNumberOfComponents(),l=r.getData(),p=n.getData(),c=[];if(i===$u.RGBA)for(let f=0;f<s;f++){const h=p[f*u+a];t.getColor(h,c),l[f*4]=Math.floor(c[0]*255+.5),l[f*4+1]=Math.floor(c[1]*255+.5),l[f*4+2]=Math.floor(c[2]*255+.5),l[f*4+3]=o}if(i===$u.RGB)for(let f=0;f<s;f++){const h=p[f*u+a];t.getColor(h,c),l[f*3]=Math.floor(c[0]*255+.5),l[f*3+1]=Math.floor(c[1]*255+.5),l[f*3+2]=Math.floor(c[2]*255+.5)}if(i===$u.LUMINANCE)for(let f=0;f<s;f++){const h=p[f*u+a];t.getColor(h,c),l[f]=Math.floor(c[0]*76.5+c[1]*150.45+c[2]*28.05+.5)}if(i===$u.LUMINANCE_ALPHA)for(let f=0;f<s;f++){const h=p[f*u+a];t.getColor(h,c),l[f*2]=Math.floor(c[0]*76.5+c[1]*150.45+c[2]*28.05+.5),l[f*2+1]=o}},t.applyColorMap=n=>{const r=JSON.stringify(e.colorSpace);n.ColorSpace&&(e.colorSpace=_n[n.ColorSpace.toUpperCase()],e.colorSpace===void 0&&(mr(`ColorSpace ${n.ColorSpace} not supported, using RGB instead`),e.colorSpace=_n.RGB));let i=r!==JSON.stringify(e.colorSpace);const a=i||JSON.stringify(e.nanColor);if(n.NanColor)for(e.nanColor=[].concat(n.NanColor);e.nanColor.length<4;)e.nanColor.push(1);i=i||a!==JSON.stringify(e.nanColor);const o=i||JSON.stringify(e.nodes);if(n.RGBPoints){const l=n.RGBPoints.length;e.nodes=[];const p=.5,c=0;for(let f=0;f<l;f+=4)e.nodes.push({x:n.RGBPoints[f],r:n.RGBPoints[f+1],g:n.RGBPoints[f+2],b:n.RGBPoints[f+3],midpoint:p,sharpness:c})}const s=t.sortAndUpdateRange(),u=!s&&(i||o!==JSON.stringify(e.nodes));return u&&t.modified(),s||u}}const yB={clamping:!0,colorSpace:_n.RGB,hSVWrap:!0,scale:x1.LINEAR,nanColor:null,belowRangeColor:null,aboveRangeColor:null,useAboveRangeColor:!1,useBelowRangeColor:!1,allowDuplicateScalars:!1,table:null,tableSize:0,buildTime:null,nodes:null,discretize:!1,numberOfValues:256};function w9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,yB,n),zc.extend(t,e,n),e.table=[],e.nodes=[],e.nanColor=[.5,0,0,1],e.belowRangeColor=[0,0,0,1],e.aboveRangeColor=[1,1,1,1],e.buildTime={},P.obj(e.buildTime),P.get(t,e,["buildTime","mappingRange"]),P.setGet(t,e,["useAboveRangeColor","useBelowRangeColor","discretize","numberOfValues",{type:"enum",name:"colorSpace",enum:_n},{type:"enum",name:"scale",enum:x1}]),P.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),P.getArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"]),vB(t,e)}const mB=P.newInstance(w9,"vtkColorTransferFunction");var xB={newInstance:mB,extend:w9,...C9};const{vtkErrorMacro:Hu}=P;function SB(t,e){e.classHierarchy.push("vtkPiecewiseFunction"),t.getSize=()=>e.nodes.length,t.getType=()=>{let n,r=0,i=0;e.nodes.length>0&&(r=e.nodes[0].y);for(let a=1;a<e.nodes.length;a++){if(n=e.nodes[a].y,n!==r)if(n>r)switch(i){case 0:case 1:i=1;break;case 2:default:i=3;break}else switch(i){case 0:case 2:i=2;break;case 1:default:i=3;break}if(r=n,i===3)break}switch(i){case 0:return"Constant";case 1:return"NonDecreasing";case 2:return"NonIncreasing";case 3:default:return"Varied"}},t.getDataPointer=()=>{const n=e.nodes.length;if(e.function=null,n>0){e.function=[];for(let r=0;r<n;r++)e.function[2*r]=e.nodes[r].x,e.function[2*r+1]=e.nodes[r].y}return e.function},t.getFirstNonZeroValue=()=>{if(e.nodes.length===0)return 0;let n=1,r=0,i=0;for(;i<e.nodes.length;i++)if(e.nodes[i].y!==0){n=0;break}return n?r=Number.MAX_VALUE:i>0?r=e.nodes[i-1].x:e.clamping?r=-Number.MAX_VALUE:r=e.nodes[0].x,r},t.getNodeValue=(n,r)=>{const i=e.nodes.length;return n<0||n>=i?(Hu("Index out of range!"),-1):(r[0]=e.nodes[n].x,r[1]=e.nodes[n].y,r[2]=e.nodes[n].midpoint,r[3]=e.nodes[n].sharpness,1)},t.setNodeValue=(n,r)=>{const i=e.nodes.length;if(n<0||n>=i)return Hu("Index out of range!"),-1;const a=e.nodes[n].x;return e.nodes[n].x=r[0],e.nodes[n].y=r[1],e.nodes[n].midpoint=r[2],e.nodes[n].sharpness=r[3],a!==r[0]?t.sortAndUpdateRange():t.modified(),1},t.addPoint=(n,r)=>t.addPointLong(n,r,.5,0),t.addPointLong=(n,r,i,a)=>{if(i<0||i>1)return Hu("Midpoint outside range [0.0, 1.0]"),-1;if(a<0||a>1)return Hu("Sharpness outside range [0.0, 1.0]"),-1;e.allowDuplicateScalars||t.removePoint(n);const o={x:n,y:r,midpoint:i,sharpness:a};e.nodes.push(o),t.sortAndUpdateRange();let s;for(s=0;s<e.nodes.length&&e.nodes[s].x!==n;s++);return s<e.nodes.length?s:-1},t.setNodes=n=>{e.nodes!==n&&(e.nodes=n,t.sortAndUpdateRange())},t.sortAndUpdateRange=()=>{e.nodes.sort((r,i)=>r.x-i.x),t.updateRange()||t.modified()},t.updateRange=()=>{const n=e.range.slice(),r=e.nodes.length;return r?(e.range[0]=e.nodes[0].x,e.range[1]=e.nodes[r-1].x):(e.range[0]=0,e.range[1]=0),n[0]===e.range[0]&&n[1]===e.range[1]?!1:(t.modified(),!0)},t.removePoint=n=>{let r;for(r=0;r<e.nodes.length&&e.nodes[r].x!==n;r++);if(r>=e.nodes.length)return-1;const i=r;let a=!1;return e.nodes.splice(r,1),(r===0||r===e.nodes.length)&&(a=t.updateRange()),a||t.modified(),i},t.removeAllPoints=()=>{e.nodes=[],t.sortAndUpdateRange()},t.addSegment=(n,r,i,a)=>{t.sortAndUpdateRange();for(let o=0;o<e.nodes.length;)e.nodes[o].x>=n&&e.nodes[o].x<=i?e.nodes.splice(o,1):o++;t.addPoint(n,r,.5,0),t.addPoint(i,a,.5,0)},t.getValue=n=>{const r=[];return t.getTable(n,n,1,r),r[0]},t.adjustRange=n=>{if(n.length<2)return 0;const r=t.getRange();r[0]<n[0]?t.addPoint(n[0],t.getValue(n[0])):t.addPoint(n[0],t.getValue(r[0])),r[1]>n[1]?t.addPoint(n[1],t.getValue(n[1])):t.addPoint(n[1],t.getValue(r[1])),t.sortAndUpdateRange();for(let i=0;i<e.nodes.length;)e.nodes[i].x>=n[0]&&e.nodes[i].x<=n[1]?e.nodes.splice(i,1):++i;return t.sortAndUpdateRange(),1},t.estimateMinNumberOfSamples=(n,r)=>{const i=t.findMinimumXDistance();return Math.ceil((r-n)/i)},t.findMinimumXDistance=()=>{const n=e.nodes.length;if(n<2)return-1;let r=e.nodes[1].x-e.nodes[0].x;for(let i=0;i<n-1;i++){const a=e.nodes[i+1].x-e.nodes[i].x;a<r&&(r=a)}return r},t.getTable=function(n,r,i,a){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,s,u=0;const l=e.nodes.length;let p=0;l!==0&&(p=e.nodes[l-1].y);let c=0,f=0,h=0,v=0,y=0,x=0,m=0;for(s=0;s<i;s++){const g=o*s;for(i>1?c=n+s/(i-1)*(r-n):c=.5*(n+r);u<l&&c>e.nodes[u].x;)u++,u<l&&(f=e.nodes[u-1].x,h=e.nodes[u].x,v=e.nodes[u-1].y,y=e.nodes[u].y,x=e.nodes[u-1].midpoint,m=e.nodes[u-1].sharpness,x<1e-5&&(x=1e-5),x>.99999&&(x=.99999));if(u>=l)a[g]=e.clamping?p:0;else if(u===0)a[g]=e.clamping?e.nodes[0].y:0;else{let d=(c-f)/(h-f);if(d<x?d=.5*d/x:d=.5+.5*(d-x)/(1-x),m>.99)if(d<.5){a[g]=v;continue}else{a[g]=y;continue}if(m<.01){a[g]=(1-d)*v+d*y;continue}d<.5?d=.5*(d*2)**(1+10*m):d>.5&&(d=1-.5*((1-d)*2)**(1+10*m));const S=d*d,T=S*d,C=2*T-3*S+1,w=-2*T+3*S,_=T-2*S+d,E=T-S,D=y-v,O=(1-m)*D;a[g]=C*v+w*y+_*O+E*O;const N=v<y?v:y,R=v>y?v:y;a[g]=a[g]<N?N:a[g],a[g]=a[g]>R?R:a[g]}}}}const TB={range:[0,0],clamping:!0,allowDuplicateScalars:!1};function _9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,TB,n),P.obj(t,e),e.nodes=[],P.setGet(t,e,["allowDuplicateScalars","clamping"]),P.setArray(t,e,["range"],2),P.getArray(t,e,["range"]),SB(t,e)}const CB=P.newInstance(_9,"vtkPiecewiseFunction");var vc={newInstance:CB,extend:_9};const{InterpolationType:Xo,OpacityMode:wB}=N4,{vtkErrorMacro:Xl}=P,m0=4;function _B(t,e){e.classHierarchy.push("vtkVolumeProperty"),t.getMTime=()=>{let i=e.mtime,a;for(let o=0;o<m0;o++)e.componentData[o].colorChannels===1?e.componentData[o].grayTransferFunction&&(a=e.componentData[o].grayTransferFunction.getMTime(),i=i>a?i:a):e.componentData[o].colorChannels===3&&e.componentData[o].rGBTransferFunction&&(a=e.componentData[o].rGBTransferFunction.getMTime(),i=i>a?i:a),e.componentData[o].scalarOpacity&&(a=e.componentData[o].scalarOpacity.getMTime(),i=i>a?i:a),e.componentData[o].gradientOpacity&&(e.componentData[o].disableGradientOpacity||(a=e.componentData[o].gradientOpacity.getMTime(),i=i>a?i:a));return i},t.getColorChannels=i=>i<0||i>3?(Xl("Bad index - must be between 0 and 3"),0):e.componentData[i].colorChannels,t.setGrayTransferFunction=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,o=!1;return e.componentData[i].grayTransferFunction!==a&&(e.componentData[i].grayTransferFunction=a,o=!0),e.componentData[i].colorChannels!==1&&(e.componentData[i].colorChannels=1,o=!0),o&&t.modified(),o},t.getGrayTransferFunction=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[i].grayTransferFunction===null&&(e.componentData[i].grayTransferFunction=vc.newInstance(),e.componentData[i].grayTransferFunction.addPoint(0,0),e.componentData[i].grayTransferFunction.addPoint(1024,1),e.componentData[i].colorChannels!==1&&(e.componentData[i].colorChannels=1),t.modified()),e.componentData[i].grayTransferFunction},t.setRGBTransferFunction=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,o=!1;return e.componentData[i].rGBTransferFunction!==a&&(e.componentData[i].rGBTransferFunction=a,o=!0),e.componentData[i].colorChannels!==3&&(e.componentData[i].colorChannels=3,o=!0),o&&t.modified(),o},t.getRGBTransferFunction=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[i].rGBTransferFunction===null&&(e.componentData[i].rGBTransferFunction=xB.newInstance(),e.componentData[i].rGBTransferFunction.addRGBPoint(0,0,0,0),e.componentData[i].rGBTransferFunction.addRGBPoint(1024,1,1,1),e.componentData[i].colorChannels!==3&&(e.componentData[i].colorChannels=3),t.modified()),e.componentData[i].rGBTransferFunction},t.setScalarOpacity=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return e.componentData[i].scalarOpacity!==a?(e.componentData[i].scalarOpacity=a,t.modified(),!0):!1},t.getScalarOpacity=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[i].scalarOpacity===null&&(e.componentData[i].scalarOpacity=vc.newInstance(),e.componentData[i].scalarOpacity.addPoint(0,1),e.componentData[i].scalarOpacity.addPoint(1024,1),t.modified()),e.componentData[i].scalarOpacity},t.setComponentWeight=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(i<0||i>=m0)return Xl("Invalid index"),!1;const o=Math.min(1,Math.max(0,a));return e.componentData[i].componentWeight!==o?(e.componentData[i].componentWeight=o,t.modified(),!0):!1},t.getComponentWeight=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return i<0||i>=m0?(Xl("Invalid index"),0):e.componentData[i].componentWeight},t.setInterpolationTypeToNearest=()=>t.setInterpolationType(Xo.NEAREST),t.setInterpolationTypeToLinear=()=>t.setInterpolationType(Xo.LINEAR),t.setInterpolationTypeToFastLinear=()=>t.setInterpolationType(Xo.FAST_LINEAR),t.getInterpolationTypeAsString=()=>P.enumToString(Xo,e.interpolationType),["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity","opacityMode","forceNearestInterpolation"].forEach(i=>{const a=P.capitalize(i);t[`set${a}`]=(o,s)=>e.componentData[o][`${i}`]!==s?(e.componentData[o][`${i}`]=s,t.modified(),!0):!1}),["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity","opacityMode","forceNearestInterpolation"].forEach(i=>{const a=P.capitalize(i);t[`get${a}`]=o=>e.componentData[o][`${i}`]})}const EB={colorMixPreset:null,independentComponents:!0,interpolationType:Xo.FAST_LINEAR,shade:!1,ambient:.1,diffuse:.7,specular:.2,specularPower:10,useLabelOutline:!1,labelOutlineThickness:[1],labelOutlineOpacity:1};function E9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,EB,n),P.obj(t,e),!e.componentData){e.componentData=[];for(let r=0;r<m0;++r)e.componentData.push({colorChannels:1,grayTransferFunction:null,rGBTransferFunction:null,scalarOpacity:null,scalarOpacityUnitDistance:1,opacityMode:wB.FRACTIONAL,gradientOpacityMinimumValue:0,gradientOpacityMinimumOpacity:0,gradientOpacityMaximumValue:1,gradientOpacityMaximumOpacity:1,useGradientOpacity:!1,componentWeight:1,forceNearestInterpolation:!1})}P.setGet(t,e,["colorMixPreset","independentComponents","interpolationType","shade","ambient","diffuse","specular","specularPower","useLabelOutline","labelOutlineOpacity"]),P.setGetArray(t,e,["labelOutlineThickness"]),_B(t,e)}const DB=P.newInstance(E9,"vtkVolumeProperty");var OB={newInstance:DB,extend:E9,...N4};const{vtkDebugMacro:bB}=P;function NB(t,e){e.classHierarchy.push("vtkVolume"),t.getVolumes=()=>t,t.makeProperty=OB.newInstance,t.getProperty=()=>(e.property===null&&(e.property=t.makeProperty()),e.property),t.getBounds=()=>{if(e.mapper===null)return e.bounds;const n=e.mapper.getBounds();if(!n||n.length!==6)return n;if(n[0]>n[1])return e.mapperBounds=n.concat(),e.bounds=[1,-1,1,-1,1,-1],e.boundsMTime.modified(),n;const r=i=>i[0].map((a,o)=>i.map(s=>s[o]));if(!e.mapperBounds||!r([n,e.mapperBounds]).reduce((i,a)=>i&&a[0]===a[1],!0)||t.getMTime()>e.boundsMTime.getMTime()){bB("Recomputing bounds..."),e.mapperBounds=n.map(o=>o);const i=[];Ye.getCorners(n,i),t.computeMatrix();const a=new Float64Array(16);Fe(a,e.matrix),i.forEach(o=>Re(o,o,a)),e.bounds[0]=e.bounds[2]=e.bounds[4]=Number.MAX_VALUE,e.bounds[1]=e.bounds[3]=e.bounds[5]=-Number.MAX_VALUE,e.bounds=e.bounds.map((o,s)=>s%2===0?i.reduce((u,l)=>u>l[s/2]?l[s/2]:u,o):i.reduce((u,l)=>u<l[(s-1)/2]?l[(s-1)/2]:u,o)),e.boundsMTime.modified()}return e.bounds},t.getMTime=()=>{let n=e.mtime;if(e.property!==null){const r=e.property.getMTime();n=r>n?r:n}return n},t.getRedrawMTime=()=>{let n=e.mtime;if(e.mapper!==null){let r=e.mapper.getMTime();n=r>n?r:n,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),r=e.mapper.getInput().getMTime(),n=r>n?r:n)}return n}}const MB={mapper:null,property:null,bounds:[1,-1,1,-1,1,-1]};function D9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,MB,n),$m.extend(t,e,n),e.boundsMTime={},P.obj(e.boundsMTime),P.set(t,e,["property"]),P.setGet(t,e,["mapper"]),P.getArray(t,e,["bounds"],6),NB(t,e)}const RB=P.newInstance(D9,"vtkVolume");var FB={newInstance:RB,extend:D9};const{BlendMode:Kr,FilterMode:qo}=BR;function LB(t,e,n,r,i){let a=null;return i?(a=i,a.removeAllPoints()):a=vc.newInstance(),a.addPointLong(-1024,0,1,1),a.addPoint(t,e),a.addPoint(n,r),a}const kB={createRadonTransferFunction:LB};function BB(t,e){e.classHierarchy.push("vtkVolumeMapper");const n={...t};t.getBounds=()=>{const r=t.getInputData();return r?(e.static||t.update(),e.bounds=r.getBounds()):e.bounds=Js(),e.bounds},t.update=()=>{t.getInputData()},t.setBlendModeToComposite=()=>{t.setBlendMode(Kr.COMPOSITE_BLEND)},t.setBlendModeToMaximumIntensity=()=>{t.setBlendMode(Kr.MAXIMUM_INTENSITY_BLEND)},t.setBlendModeToMinimumIntensity=()=>{t.setBlendMode(Kr.MINIMUM_INTENSITY_BLEND)},t.setBlendModeToAverageIntensity=()=>{t.setBlendMode(Kr.AVERAGE_INTENSITY_BLEND)},t.setBlendModeToAdditiveIntensity=()=>{t.setBlendMode(Kr.ADDITIVE_INTENSITY_BLEND)},t.setBlendModeToRadonTransform=()=>{t.setBlendMode(Kr.RADON_TRANSFORM_BLEND)},t.getBlendModeAsString=()=>P.enumToString(Kr,e.blendMode),t.setAverageIPScalarRange=(r,i)=>{console.warn("setAverageIPScalarRange is deprecated use setIpScalarRange"),t.setIpScalarRange(r,i)},t.getFilterModeAsString=()=>P.enumToString(qo,e.filterMode),t.setFilterModeToOff=()=>{t.setFilterMode(qo.OFF)},t.setFilterModeToNormalized=()=>{t.setFilterMode(qo.NORMALIZED)},t.setFilterModeToRaw=()=>{t.setFilterMode(qo.RAW)},t.setGlobalIlluminationReach=r=>n.setGlobalIlluminationReach(ii(r,0,1)),t.setVolumetricScatteringBlending=r=>n.setVolumetricScatteringBlending(ii(r,0,1)),t.setVolumeShadowSamplingDistFactor=r=>n.setVolumeShadowSamplingDistFactor(r>=1?r:1),t.setAnisotropy=r=>n.setAnisotropy(ii(r,-.99,.99)),t.setLAOKernelSize=r=>n.setLAOKernelSize(Kh(ii(r,1,32))),t.setLAOKernelRadius=r=>n.setLAOKernelRadius(r>=1?r:1)}const VB={bounds:[1,-1,1,-1,1,-1],sampleDistance:1,imageSampleDistance:1,maximumSamplesPerRay:1e3,autoAdjustSampleDistances:!0,initialInteractionScale:1,interactionSampleDistanceFactor:1,blendMode:Kr.COMPOSITE_BLEND,ipScalarRange:[-1e6,1e6],filterMode:qo.OFF,preferSizeOverAccuracy:!1,computeNormalFromOpacity:!1,volumetricScatteringBlending:0,globalIlluminationReach:0,volumeShadowSamplingDistFactor:5,anisotropy:0,localAmbientOcclusion:!1,LAOKernelSize:15,LAOKernelRadius:7};function O9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,VB,n),t5.extend(t,e,n),P.setGet(t,e,["sampleDistance","imageSampleDistance","maximumSamplesPerRay","autoAdjustSampleDistances","initialInteractionScale","interactionSampleDistanceFactor","blendMode","filterMode","preferSizeOverAccuracy","computeNormalFromOpacity","volumetricScatteringBlending","globalIlluminationReach","volumeShadowSamplingDistFactor","anisotropy","localAmbientOcclusion","LAOKernelSize","LAOKernelRadius"]),P.setGetArray(t,e,["ipScalarRange"],2),P.event(t,e,"lightingActivated"),BB(t,e)}const AB=P.newInstance(O9,"vtkVolumeMapper");var UB={newInstance:AB,extend:O9,...kB},gn=Uint8Array,Hi=Uint16Array,b9=Uint32Array,N9=new gn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),M9=new gn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),GB=new gn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),R9=function(t,e){for(var n=new Hi(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new b9(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return[n,i]},F9=R9(N9,2),L9=F9[0],PB=F9[1];L9[28]=258,PB[258]=28;var IB=R9(M9,0),zB=IB[0],mp=new Hi(32768);for(var rt=0;rt<32768;++rt){var jr=(rt&43690)>>>1|(rt&21845)<<1;jr=(jr&52428)>>>2|(jr&13107)<<2,jr=(jr&61680)>>>4|(jr&3855)<<4,mp[rt]=((jr&65280)>>>8|(jr&255)<<8)>>>1}var cs=function(t,e,n){for(var r=t.length,i=0,a=new Hi(e);i<r;++i)t[i]&&++a[t[i]-1];var o=new Hi(e);for(i=0;i<e;++i)o[i]=o[i-1]+a[i-1]<<1;var s;if(n){s=new Hi(1<<e);var u=15-e;for(i=0;i<r;++i)if(t[i])for(var l=i<<4|t[i],p=e-t[i],c=o[t[i]-1]++<<p,f=c|(1<<p)-1;c<=f;++c)s[mp[c]>>>u]=l}else for(s=new Hi(r),i=0;i<r;++i)t[i]&&(s[i]=mp[o[t[i]-1]++]>>>15-t[i]);return s},eu=new gn(288);for(var rt=0;rt<144;++rt)eu[rt]=8;for(var rt=144;rt<256;++rt)eu[rt]=9;for(var rt=256;rt<280;++rt)eu[rt]=7;for(var rt=280;rt<288;++rt)eu[rt]=8;var k9=new gn(32);for(var rt=0;rt<32;++rt)k9[rt]=5;var WB=cs(eu,9,1),jB=cs(k9,5,1),ql=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Bn=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},Yl=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},$B=function(t){return(t+7)/8|0},B9=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new(t.BYTES_PER_ELEMENT==2?Hi:t.BYTES_PER_ELEMENT==4?b9:gn)(n-e);return r.set(t.subarray(e,n)),r},HB=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],En=function(t,e,n){var r=new Error(e||HB[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,En),!n)throw r;return r},S1=function(t,e,n){var r=t.length;if(!r||n&&n.f&&!n.l)return e||new gn(0);var i=!e||n,a=!n||n.i;n||(n={}),e||(e=new gn(r*3));var o=function(ee){var re=e.length;if(ee>re){var ae=new gn(Math.max(re*2,ee));ae.set(e),e=ae}},s=n.f||0,u=n.p||0,l=n.b||0,p=n.l,c=n.d,f=n.m,h=n.n,v=r*8;do{if(!p){s=Bn(t,u,1);var y=Bn(t,u+1,3);if(u+=3,y)if(y==1)p=WB,c=jB,f=9,h=5;else if(y==2){var d=Bn(t,u,31)+257,S=Bn(t,u+10,15)+4,T=d+Bn(t,u+5,31)+1;u+=14;for(var C=new gn(T),w=new gn(19),_=0;_<S;++_)w[GB[_]]=Bn(t,u+_*3,7);u+=S*3;for(var E=ql(w),D=(1<<E)-1,O=cs(w,E,1),_=0;_<T;){var N=O[Bn(t,u,D)];u+=N&15;var x=N>>>4;if(x<16)C[_++]=x;else{var R=0,M=0;for(x==16?(M=3+Bn(t,u,3),u+=2,R=C[_-1]):x==17?(M=3+Bn(t,u,7),u+=3):x==18&&(M=11+Bn(t,u,127),u+=7);M--;)C[_++]=R}}var A=C.subarray(0,d),G=C.subarray(d);f=ql(A),h=ql(G),p=cs(A,f,1),c=cs(G,h,1)}else En(1);else{var x=$B(u)+4,m=t[x-4]|t[x-3]<<8,g=x+m;if(g>r){a&&En(0);break}i&&o(l+m),e.set(t.subarray(x,g),l),n.b=l+=m,n.p=u=g*8,n.f=s;continue}if(u>v){a&&En(0);break}}i&&o(l+131072);for(var j=(1<<f)-1,k=(1<<h)-1,F=u;;F=u){var R=p[Yl(t,u)&j],B=R>>>4;if(u+=R&15,u>v){a&&En(0);break}if(R||En(2),B<256)e[l++]=B;else if(B==256){F=u,p=null;break}else{var $=B-254;if(B>264){var _=B-257,H=N9[_];$=Bn(t,u,(1<<H)-1)+L9[_],u+=H}var X=c[Yl(t,u)&k],J=X>>>4;X||En(3),u+=X&15;var G=zB[J];if(J>3){var H=M9[J];G+=Yl(t,u)&(1<<H)-1,u+=H}if(u>v){a&&En(0);break}i&&o(l+131072);for(var q=l+$;l<q;l+=4)e[l]=e[l-G],e[l+1]=e[l+1-G],e[l+2]=e[l+2-G],e[l+3]=e[l+3-G];l=q}}n.l=p,n.p=F,n.b=l,n.f=s,p&&(s=1,n.m=f,n.d=c,n.n=h)}while(!s);return l==e.length?e:B9(e,0,l)},KB=new gn(0),XB=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&En(6,"invalid gzip data");var e=t[3],n=10;e&4&&(n+=t[10]|(t[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!t[n++]);return n+(e&2)},qB=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},YB=function(t){((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)&&En(6,"invalid zlib data"),t[1]&32&&En(6,"invalid zlib data: preset dictionaries not supported")};function JB(t,e){return S1(t,e)}function QB(t,e){return S1(t.subarray(XB(t),-8),new gn(qB(t)))}function ZB(t,e){return S1((YB(t),t.subarray(2,-4)),e)}function lo(t,e){return t[0]==31&&t[1]==139&&t[2]==8?QB(t):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?JB(t,e):ZB(t,e)}var xp=typeof TextDecoder<"u"&&new TextDecoder,eV=0;try{xp.decode(KB,{stream:!0}),eV=1}catch{}var tV=function(t){for(var e="",n=0;;){var r=t[n++],i=(r>127)+(r>223)+(r>239);if(n+i>t.length)return[e,B9(t,n-1)];i?i==3?(r=((r&15)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536,e+=String.fromCharCode(55296|r>>10,56320|r&1023)):i&1?e+=String.fromCharCode((r&31)<<6|t[n++]&63):e+=String.fromCharCode((r&15)<<12|(t[n++]&63)<<6|t[n++]&63):e+=String.fromCharCode(r)}};function T1(t,e){if(xp)return xp.decode(t);var n=tV(t),r=n[0],i=n[1];return i.length&&En(8),r}function V9(){const t=new ArrayBuffer(4),e=new Uint8Array(t),n=new Uint32Array(t);return e[0]=161,e[1]=178,e[2]=195,e[3]=212,n[0]===3569595041?"LittleEndian":n[0]===2712847316?"BigEndian":null}const nV=V9();function rV(t,e){if(e<2)return;const n=new Int8Array(t),r=n.length,i=[];for(let a=0;a<r;a+=e){for(let o=0;o<e;o++)i.push(n[a+o]);for(let o=0;o<e;o++)n[a+o]=i.pop()}}var Qa={ENDIANNESS:nV,getEndianness:V9,swapBytes:rV};const C1={};function A9(t){return!!C1[t]}function iV(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"http",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return C1[t](e)}function w1(t,e){C1[t]=e}var aV={get:iV,has:A9,registerType:w1};const{vtkErrorMacro:ks,vtkDebugMacro:oV}=P;let fo=0;function Xc(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=new XMLHttpRequest;return r.open(t,e,!0),n.headers&&Object.entries(n.headers).forEach(i=>{let[a,o]=i;return r.setRequestHeader(a,o)}),n.progressCallback&&r.addEventListener("progress",n.progressCallback),r}function sV(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e&&e.compression&&e.compression!=="gz"&&(ks("Supported algorithms are: [gz]"),ks(`Unkown compression algorithm: ${e.compression}`)),new Promise((n,r)=>{const i=Xc("GET",t,e);i.onreadystatechange=a=>{i.readyState===4&&(i.status===200||i.status===0?e.compression?n(lo(new Uint8Array(i.response)).buffer):n(i.response):r({xhr:i,e:a}))},i.responseType="arraybuffer",i.send()})}function uV(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.ref&&!n.ref.pending?new Promise((i,a)=>{let o=null;n.ref.url?o=n.ref.url:o=[e,n.ref.basepath,r.compression?`${n.ref.id}.gz`:n.ref.id].join("/");const s=Xc("GET",o,r);s.onreadystatechange=u=>{s.readyState===1&&(n.ref.pending=!0,++fo===1&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!0)),s.readyState===4&&(n.ref.pending=!1,s.status===200||s.status===0?(n.buffer=s.response,r.compression&&(n.dataType==="string"||n.dataType==="JSON"?n.buffer=T1(lo(new Uint8Array(n.buffer))):n.buffer=lo(new Uint8Array(n.buffer)).buffer),n.ref.encode==="JSON"?n.values=JSON.parse(n.buffer):(Qa.ENDIANNESS!==n.ref.encode&&Qa.ENDIANNESS&&(oV(`Swap bytes of ${n.name}`),Qa.swapBytes(n.buffer,i1[n.dataType])),n.values=P.newTypedArray(n.dataType,n.buffer)),n.values.length!==n.size&&ks(`Error in FetchArray: ${n.name}, does not have the proper array size. Got ${n.values.length}, instead of ${n.size}`),delete n.ref,--fo===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),t!=null&&t.modified&&t.modified(),i(n)):a({xhr:s,e:u}))},s.responseType=r.compression||n.dataType!=="string"?"arraybuffer":"text",s.send()}):Promise.resolve(n)}function cV(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((r,i)=>{const a=Xc("GET",e,n);a.onreadystatechange=o=>{a.readyState===1&&++fo===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),a.readyState===4&&(--fo===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),a.status===200||a.status===0?n.compression?r(JSON.parse(T1(lo(new Uint8Array(a.response))))):r(JSON.parse(a.responseText)):i({xhr:a,e:o}))},a.responseType=n.compression?"arraybuffer":"text",a.send()})}function lV(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n&&n.compression&&n.compression!=="gz"&&(ks("Supported algorithms are: [gz]"),ks(`Unkown compression algorithm: ${n.compression}`)),new Promise((r,i)=>{const a=Xc("GET",e,n);a.onreadystatechange=o=>{a.readyState===1&&++fo===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),a.readyState===4&&(--fo===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),a.status===200||a.status===0?n.compression?r(T1(lo(new Uint8Array(a.response)))):r(a.responseText):i({xhr:a,e:o}))},a.responseType=n.compression?"arraybuffer":"text",a.send()})}function fV(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((r,i)=>{const a=new Image;n.crossOrigin&&(a.crossOrigin=n.crossOrigin),a.onload=()=>r(a),a.onerror=i,a.src=e})}const pV={fetchArray:uV,fetchJSON:cV,fetchText:lV,fetchBinary:sV,fetchImage:fV};w1("http",t=>pV);function hV(){const a=vc.newInstance();a.addPoint(100,0),a.addPoint(255,.5);for(let o=0;o<=32;o++){const s=100+o*4.84375,u=o*.5/32;a.addPoint(s,u)}return a}var U9={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hn,function(){return function(n){var r={};function i(a){if(r[a])return r[a].exports;var o=r[a]={i:a,l:!1,exports:{}};return n[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=r,i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{enumerable:!0,get:s})},i.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i.t=function(a,o){if(1&o&&(a=i(a)),8&o||4&o&&typeof a=="object"&&a&&a.__esModule)return a;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:a}),2&o&&typeof a!="string")for(var u in a)i.d(s,u,(function(l){return a[l]}).bind(null,u));return s},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=184)}([function(n,r,i){function a(o){for(var s in o)r.hasOwnProperty(s)||(r[s]=o[s])}Object.defineProperty(r,"__esModule",{value:!0}),a(i(240)),a(i(251)),a(i(175)),a(i(107)),a(i(29)),a(i(73)),a(i(106)),a(i(30)),a(i(252)),a(i(52)),a(i(97)),a(i(253)),a(i(37)),a(i(51)),a(i(173)),a(i(176)),a(i(172)),a(i(108)),a(i(254)),a(i(255)),a(i(256)),a(i(72)),a(i(177)),a(i(105)),a(i(17)),a(i(257)),a(i(12)),a(i(174))},function(n,r,i){var a=this&&this.__values||function(d){var S=typeof Symbol=="function"&&Symbol.iterator,T=S&&d[S],C=0;if(T)return T.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&C>=d.length&&(d=void 0),{value:d&&d[C++],done:!d}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=i(212);r.FixedSizeSet=o.FixedSizeSet;var s=i(213);r.ObjectCache=s.ObjectCache;var u=i(214);r.CompareCache=u.CompareCache;var l=i(215);r.Lazy=l.Lazy;var p=i(216);function c(d,S,T){if(m(d))d.forEach(function(w,_){return S.call(T,_,w)});else for(var C in d)d.hasOwnProperty(C)&&S.call(T,C,d[C])}function f(d){var S,T;if(h(d))return d;if(y(d)){var C=[];try{for(var w=a(d),_=w.next();!_.done;_=w.next()){var E=_.value;C.push(f(E))}}catch(N){S={error:N}}finally{try{_&&!_.done&&(T=w.return)&&T.call(w)}finally{if(S)throw S.error}}return C}if(v(d)){C={};for(var D in d)if(d.hasOwnProperty(D)){var O=d[D];C[D]=f(O)}return C}return d}function h(d){return!!d&&Object.prototype.toString.call(d)==="[object Function]"}function v(d){var S=typeof d;return!!d&&(S==="function"||S==="object")}function y(d){return Array.isArray(d)}function x(d){return d instanceof Set}function m(d){return d instanceof Map}function g(d){if(v(d)){var S=Object.getPrototypeOf(d),T=S.constructor;return S&&T&&typeof T=="function"&&T instanceof T&&Function.prototype.toString.call(T)===Function.prototype.toString.call(Object)}return!1}r.StringWalker=p.StringWalker,r.applyMixin=function(d,S){for(var T=[],C=2;C<arguments.length;C++)T[C-2]=arguments[C];Object.getOwnPropertyNames(S.prototype).forEach(function(w){if(w!=="constructor"){if(T.indexOf(w)!==-1){var _=Object.getOwnPropertyDescriptor(d.prototype,w);_&&Object.defineProperty(d.prototype,"_"+w,_)}var E=Object.getOwnPropertyDescriptor(S.prototype,w);E&&Object.defineProperty(d.prototype,w,E)}})},r.applyDefaults=function d(S,T,C){C===void 0&&(C=!1);var w=f(S||{});return c(T,function(_,E){g(E)?w[_]=d(w[_],E,C):(C||w[_]===void 0)&&(w[_]=E)}),w},r.forEachArray=function(d,S,T){d.forEach(S,T)},r.forEachObject=c,r.arrayLength=function(d){return x(d)?d.size:d.length},r.objectLength=function(d){return m(d)?d.size:Object.keys(d).length},r.getObjectValue=function(d,S){return m(d)?d.get(S):d[S]},r.removeObjectValue=function(d,S){m(d)?d.delete(S):delete d[S]},r.clone=f,r.isBoolean=function(d){return typeof d=="boolean"},r.isNumber=function(d){return typeof d=="number"},r.isString=function(d){return typeof d=="string"},r.isFunction=h,r.isObject=v,r.isArray=y,r.isSet=x,r.isMap=m,r.isEmpty=function(d){if(y(d))return!d.length;if(x(d)||m(d))return!d.size;if(v(d)){for(var S in d)if(d.hasOwnProperty(S))return!1;return!0}return!1},r.isPlainObject=g,r.isIterable=function(d){return d&&typeof d[Symbol.iterator]=="function"},r.getValue=function(d){return h(d.valueOf)?d.valueOf():d},r.utf8Encode=function(d){for(var S=new Uint8Array(4*d.length),T=0,C=0;C<d.length;C++){var w=d.charCodeAt(C);if(w<128)S[T++]=w;else{if(w<2048)S[T++]=w>>6|192;else{if(w>55295&&w<56320){if(++C>=d.length)throw new Error("Incomplete surrogate pair.");var _=d.charCodeAt(C);if(_<56320||_>57343)throw new Error("Invalid surrogate character.");w=65536+((1023&w)<<10)+(1023&_),S[T++]=w>>18|240,S[T++]=w>>12&63|128}else S[T++]=w>>12|224;S[T++]=w>>6&63|128}S[T++]=63&w|128}}return S.subarray(0,T)},r.utf8Decode=function(d){for(var S="",T=0;T<d.length;){var C=d[T++];if(C>127)if(C>191&&C<224){if(T>=d.length)throw new Error("Incomplete 2-byte sequence.");C=(31&C)<<6|63&d[T++]}else if(C>223&&C<240){if(T+1>=d.length)throw new Error("Incomplete 3-byte sequence.");C=(15&C)<<12|(63&d[T++])<<6|63&d[T++]}else{if(!(C>239&&C<248))throw new Error("Unknown multi-byte start.");if(T+2>=d.length)throw new Error("Incomplete 4-byte sequence.");C=(7&C)<<18|(63&d[T++])<<12|(63&d[T++])<<6|63&d[T++]}if(C<=65535)S+=String.fromCharCode(C);else{if(!(C<=1114111))throw new Error("Code point exceeds UTF-16 limit.");C-=65536,S+=String.fromCharCode(C>>10|55296),S+=String.fromCharCode(1023&C|56320)}}return S}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),function(a){a[a.Before=0]="Before",a[a.Equal=1]="Equal",a[a.After=2]="After"}(r.BoundaryPosition||(r.BoundaryPosition={})),function(a){a[a.None=0]="None",a[a.Capturing=1]="Capturing",a[a.AtTarget=2]="AtTarget",a[a.Bubbling=3]="Bubbling"}(r.EventPhase||(r.EventPhase={})),function(a){a[a.Element=1]="Element",a[a.Attribute=2]="Attribute",a[a.Text=3]="Text",a[a.CData=4]="CData",a[a.EntityReference=5]="EntityReference",a[a.Entity=6]="Entity",a[a.ProcessingInstruction=7]="ProcessingInstruction",a[a.Comment=8]="Comment",a[a.Document=9]="Document",a[a.DocumentType=10]="DocumentType",a[a.DocumentFragment=11]="DocumentFragment",a[a.Notation=12]="Notation"}(r.NodeType||(r.NodeType={})),function(a){a[a.Disconnected=1]="Disconnected",a[a.Preceding=2]="Preceding",a[a.Following=4]="Following",a[a.Contains=8]="Contains",a[a.ContainedBy=16]="ContainedBy",a[a.ImplementationSpecific=32]="ImplementationSpecific"}(r.Position||(r.Position={})),function(a){a[a.Accept=1]="Accept",a[a.Reject=2]="Reject",a[a.Skip=3]="Skip"}(r.FilterResult||(r.FilterResult={})),function(a){a[a.All=4294967295]="All",a[a.Element=1]="Element",a[a.Attribute=2]="Attribute",a[a.Text=4]="Text",a[a.CDataSection=8]="CDataSection",a[a.EntityReference=16]="EntityReference",a[a.Entity=32]="Entity",a[a.ProcessingInstruction=64]="ProcessingInstruction",a[a.Comment=128]="Comment",a[a.Document=256]="Document",a[a.DocumentType=512]="DocumentType",a[a.DocumentFragment=1024]="DocumentFragment",a[a.Notation=2048]="Notation"}(r.WhatToShow||(r.WhatToShow={})),function(a){a[a.StartToStart=0]="StartToStart",a[a.StartToEnd=1]="StartToEnd",a[a.EndToEnd=2]="EndToEnd",a[a.EndToStart=3]="EndToStart"}(r.HowToCompare||(r.HowToCompare={}))},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(241);r.Cast=a.Cast;var o=i(150);r.Guard=o.Guard;var s=i(242);r.EmptySet=s.EmptySet},function(n,r,i){var a=i(11),o=i(55).f,s=i(21),u=i(25),l=i(80),p=i(119),c=i(123);n.exports=function(f,h){var v,y,x,m,g,d=f.target,S=f.global,T=f.stat;if(v=S?a:T?a[d]||l(d,{}):(a[d]||{}).prototype)for(y in h){if(m=h[y],x=f.noTargetGet?(g=o(v,y))&&g.value:v[y],!c(S?y:d+(T?".":"#")+y,f.forced)&&x!==void 0){if(typeof m==typeof x)continue;p(m,x)}(f.sham||x&&x.sham)&&s(m,"sham",!0),u(v,y,m,f)}}},function(n,r,i){var a=i(11),o=i(81),s=i(14),u=i(58),l=i(86),p=i(124),c=o("wks"),f=a.Symbol,h=p?f:f&&f.withoutSetter||u;n.exports=function(v){return s(c,v)||(l&&s(f,v)?c[v]=f[v]:c[v]=h("Symbol."+v)),c[v]}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),o=i(29),s=function(){function u(){this._features={mutationObservers:!0,customElements:!0,slots:!0,steps:!0},this._window=null,this._compareCache=new a.CompareCache,this._rangeList=new a.FixedSizeSet}return u.prototype.setFeatures=function(l){if(l===void 0&&(l=!0),a.isObject(l))for(var p in l)this._features[p]=l[p]||!1;else for(var p in this._features)this._features[p]=l},Object.defineProperty(u.prototype,"features",{get:function(){return this._features},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"window",{get:function(){return this._window===null&&(this._window=o.create_window()),this._window},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"compareCache",{get:function(){return this._compareCache},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"rangeList",{get:function(){return this._rangeList},enumerable:!0,configurable:!0}),Object.defineProperty(u,"instance",{get:function(){return u._instance||(u._instance=new u),u._instance},enumerable:!0,configurable:!0}),u}();r.dom=s.instance},function(n,r,i){var a=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var d={};if(g!=null)for(var S in g)Object.hasOwnProperty.call(g,S)&&(d[S]=g[S]);return d.default=g,d};Object.defineProperty(r,"__esModule",{value:!0});var o=a(i(228));r.base64=o;var s=a(i(146));r.byte=s;var u=a(i(147));r.byteSequence=u;var l=a(i(96));r.codePoint=l;var p=a(i(232));r.json=p;var c=a(i(233));r.list=c;var f=a(i(234));r.map=f;var h=a(i(235));r.namespace=h;var v=a(i(236));r.queue=v;var y=a(i(237));r.set=y;var x=a(i(238));r.stack=x;var m=a(i(239));r.string=m},function(n,r){n.exports=function(i){try{return!!i()}catch{return!0}}},function(n,r,i){var a,o=this&&this.__extends||(a=function(k,F){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,$){B.__proto__=$}||function(B,$){for(var H in $)$.hasOwnProperty(H)&&(B[H]=$[H])})(k,F)},function(k,F){function B(){this.constructor=k}a(k,F),k.prototype=F===null?Object.create(F):(B.prototype=F.prototype,new B)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(k){function F(B,$){$===void 0&&($="");var H=k.call(this,$)||this;return H.name=B,H}return o(F,k),F}(Error);r.DOMException=s;var u=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"DOMStringSizeError",B)||this}return o(F,k),F}(s);r.DOMStringSizeError=u;var l=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"WrongDocumentError","The object is in the wrong document. "+B)||this}return o(F,k),F}(s);r.WrongDocumentError=l;var p=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"NoDataAllowedError",B)||this}return o(F,k),F}(s);r.NoDataAllowedError=p;var c=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"NoModificationAllowedError","The object can not be modified. "+B)||this}return o(F,k),F}(s);r.NoModificationAllowedError=c;var f=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"NotSupportedError","The operation is not supported. "+B)||this}return o(F,k),F}(s);r.NotSupportedError=f;var h=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"InUseAttributeError",B)||this}return o(F,k),F}(s);r.InUseAttributeError=h;var v=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"InvalidStateError","The object is in an invalid state. "+B)||this}return o(F,k),F}(s);r.InvalidStateError=v;var y=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"InvalidModificationError","The object can not be modified in this way. "+B)||this}return o(F,k),F}(s);r.InvalidModificationError=y;var x=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"NamespaceError","The operation is not allowed by Namespaces in XML. [XMLNS] "+B)||this}return o(F,k),F}(s);r.NamespaceError=x;var m=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"InvalidAccessError","The object does not support the operation or argument. "+B)||this}return o(F,k),F}(s);r.InvalidAccessError=m;var g=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"ValidationError",B)||this}return o(F,k),F}(s);r.ValidationError=g;var d=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"TypeMismatchError",B)||this}return o(F,k),F}(s);r.TypeMismatchError=d;var S=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"SecurityError","The operation is insecure. "+B)||this}return o(F,k),F}(s);r.SecurityError=S;var T=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"NetworkError","A network error occurred. "+B)||this}return o(F,k),F}(s);r.NetworkError=T;var C=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"AbortError","The operation was aborted. "+B)||this}return o(F,k),F}(s);r.AbortError=C;var w=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"URLMismatchError","The given URL does not match another URL. "+B)||this}return o(F,k),F}(s);r.URLMismatchError=w;var _=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"QuotaExceededError","The quota has been exceeded. "+B)||this}return o(F,k),F}(s);r.QuotaExceededError=_;var E=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"TimeoutError","The operation timed out. "+B)||this}return o(F,k),F}(s);r.TimeoutError=E;var D=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"InvalidNodeTypeError","The supplied node is incorrect or has an incorrect ancestor for this operation. "+B)||this}return o(F,k),F}(s);r.InvalidNodeTypeError=D;var O=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"DataCloneError","The object can not be cloned. "+B)||this}return o(F,k),F}(s);r.DataCloneError=O;var N=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"NotImplementedError","The DOM method is not implemented by this module. "+B)||this}return o(F,k),F}(s);r.NotImplementedError=N;var R=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"HierarchyRequestError","The operation would yield an incorrect node tree. "+B)||this}return o(F,k),F}(s);r.HierarchyRequestError=R;var M=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"NotFoundError","The object can not be found here. "+B)||this}return o(F,k),F}(s);r.NotFoundError=M;var A=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"IndexSizeError","The index is not in the allowed range. "+B)||this}return o(F,k),F}(s);r.IndexSizeError=A;var G=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"SyntaxError","The string did not match the expected pattern. "+B)||this}return o(F,k),F}(s);r.SyntaxError=G;var j=function(k){function F(B){return B===void 0&&(B=""),k.call(this,"InvalidCharacterError","The string contains invalid characters. "+B)||this}return o(F,k),F}(s);r.InvalidCharacterError=j},function(n,r,i){var a=i(53),o=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],s=["scalar","sequence","mapping"];n.exports=function(u,l){var p,c;if(l=l||{},Object.keys(l).forEach(function(f){if(o.indexOf(f)===-1)throw new a('Unknown option "'+f+'" is met in definition of "'+u+'" YAML type.')}),this.tag=u,this.kind=l.kind||null,this.resolve=l.resolve||function(){return!0},this.construct=l.construct||function(f){return f},this.instanceOf=l.instanceOf||null,this.predicate=l.predicate||null,this.represent=l.represent||null,this.defaultStyle=l.defaultStyle||null,this.styleAliases=(p=l.styleAliases||null,c={},p!==null&&Object.keys(p).forEach(function(f){p[f].forEach(function(h){c[String(h)]=f})}),c),s.indexOf(this.kind)===-1)throw new a('Unknown kind "'+this.kind+'" is specified for "'+u+'" YAML type.')}},function(n,r,i){(function(a){var o=function(s){return s&&s.Math==Math&&s};n.exports=o(typeof globalThis=="object"&&globalThis)||o(typeof window=="object"&&window)||o(typeof self=="object"&&self)||o(typeof a=="object"&&a)||Function("return this")()}).call(this,i(78))},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.idl_defineConst=function(a,o,s){Object.defineProperty(a,o,{writable:!1,enumerable:!0,configurable:!1,value:s})}},function(n,r){n.exports=function(i){return typeof i=="object"?i!==null:typeof i=="function"}},function(n,r){var i={}.hasOwnProperty;n.exports=function(a,o){return i.call(a,o)}},function(n,r,i){var a=i(16),o=i(115),s=i(18),u=i(56),l=Object.defineProperty;r.f=a?l:function(p,c,f){if(s(p),c=u(c,!0),s(f),o)try{return l(p,c,f)}catch{}if("get"in f||"set"in f)throw TypeError("Accessors not supported");return"value"in f&&(p[c]=f.value),p}},function(n,r,i){var a=i(8);n.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(n,r,i){var a=this&&this.__values||function(d){var S=typeof Symbol=="function"&&Symbol.iterator,T=S&&d[S],C=0;if(T)return T.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&C>=d.length&&(d=void 0),{value:d&&d[C++],done:!d}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=i(3),s=i(2);function u(d,S,T){if(T===void 0&&(T=!1),T&&o.Guard.isElementNode(S)&&o.Guard.isShadowRoot(S.shadowRoot)&&S.shadowRoot._firstChild)return S.shadowRoot._firstChild;if(S._firstChild)return S._firstChild;if(S===d)return null;if(S._nextSibling)return S._nextSibling;for(var C=S._parent;C&&C!==d;){if(C._nextSibling)return C._nextSibling;C=C._parent}return null}function l(){var d;return(d={})[Symbol.iterator]=function(){return{next:function(){return{done:!0,value:null}}}},d}function p(d,S,T,C){S===void 0&&(S=!1),T===void 0&&(T=!1);for(var w=S?d:u(d,d,T);w&&C&&!C(w);)w=u(d,w,T);return w}function c(d,S,T,C,w){C===void 0&&(C=!1);for(var _=u(d,S,C);_&&w&&!w(_);)_=u(d,_,C);return _}function f(d,S,T,C){var w;return S===void 0&&(S=!1),T===void 0&&(T=!1),S||d._children.size!==0?((w={})[Symbol.iterator]=function(){var _=S?d:u(d,d,T);return{next:function(){for(;_&&C&&!C(_);)_=u(d,_,T);if(_===null)return{done:!0,value:null};var E={done:!1,value:_};return _=u(d,_,T),E}}},w):l()}function h(d,S,T){S===void 0&&(S=!1);for(var C=S?d:d._parent;C&&T&&!T(C);)C=C._parent;return C}function v(d,S,T,C){for(var w=S._parent;w&&C&&!C(w);)w=w._parent;return w}function y(d){return o.Guard.isDocumentTypeNode(d)?0:o.Guard.isCharacterDataNode(d)?d._data.length:d._children.size}function x(d,S){if(S===void 0&&(S=!1),S){var T=x(d,!1);return o.Guard.isShadowRoot(T)?x(T._host,!0):T}return d._parent?x(d._parent):d}function m(d,S,T,C){T===void 0&&(T=!1),C===void 0&&(C=!1);for(var w=T?d:C&&o.Guard.isShadowRoot(d)?d._host:d._parent;w!==null;){if(w===S)return!0;w=C&&o.Guard.isShadowRoot(w)?w._host:w._parent}return!1}function g(d){for(var S=x(d),T=0,C=p(S);C!==null;){if(T++,C===d)return T;C=c(S,C)}return-1}r.tree_getFirstDescendantNode=p,r.tree_getNextDescendantNode=c,r.tree_getDescendantNodes=f,r.tree_getDescendantElements=function(d,S,T,C){var w;return S===void 0&&(S=!1),T===void 0&&(T=!1),S||d._children.size!==0?((w={})[Symbol.iterator]=function(){var _=f(d,S,T,function(D){return o.Guard.isElementNode(D)})[Symbol.iterator](),E=_.next().value;return{next:function(){for(;E&&C&&!C(E);)E=_.next().value;if(E===null)return{done:!0,value:null};var D={done:!1,value:E};return E=_.next().value,D}}},w):l()},r.tree_getSiblingNodes=function(d,S,T){var C;return S===void 0&&(S=!1),d._parent&&d._parent._children.size!==0?((C={})[Symbol.iterator]=function(){var w=d._parent?d._parent._firstChild:null;return{next:function(){for(;w&&(T&&!T(w)||!S&&w===d);)w=w._nextSibling;if(w===null)return{done:!0,value:null};var _={done:!1,value:w};return w=w._nextSibling,_}}},C):l()},r.tree_getFirstAncestorNode=h,r.tree_getNextAncestorNode=v,r.tree_getAncestorNodes=function(d,S,T){var C;return S===void 0&&(S=!1),S||d._parent?((C={})[Symbol.iterator]=function(){var w=h(d,S,T);return{next:function(){if(w===null)return{done:!0,value:null};var _={done:!1,value:w};return w=v(0,w,S,T),_}}},C):l()},r.tree_getCommonAncestor=function(d,S){if(d===S)return d._parent;for(var T=[],C=[],w=h(d,!0);w!==null;)T.push(w),w=v(0,w);for(var _=h(S,!0);_!==null;)C.push(_),_=v(0,_);for(var E=T.length,D=C.length,O=null,N=Math.min(E,D);N>0;N--){var R=T[--E];if(R!==C[--D])break;O=R}return O},r.tree_getFollowingNode=function(d,S){if(S._firstChild)return S._firstChild;if(S._nextSibling)return S._nextSibling;for(;;){var T=S._parent;if(T===null||T===d)return null;if(T._nextSibling)return T._nextSibling;S=T}},r.tree_getPrecedingNode=function(d,S){return S===d?null:S._previousSibling?(S=S._previousSibling)._lastChild?S._lastChild:S:S._parent},r.tree_isConstrained=function d(S){var T,C,w,_,E,D;switch(S._nodeType){case s.NodeType.Document:var O=!1,N=!1;try{for(var R=a(S._children),M=R.next();!M.done;M=R.next())switch(M.value._nodeType){case s.NodeType.ProcessingInstruction:case s.NodeType.Comment:break;case s.NodeType.DocumentType:if(O||N)return!1;O=!0;break;case s.NodeType.Element:if(N)return!1;N=!0;break;default:return!1}}catch(F){T={error:F}}finally{try{M&&!M.done&&(C=R.return)&&C.call(R)}finally{if(T)throw T.error}}break;case s.NodeType.DocumentFragment:case s.NodeType.Element:try{for(var A=a(S._children),G=A.next();!G.done;G=A.next())switch(G.value._nodeType){case s.NodeType.Element:case s.NodeType.Text:case s.NodeType.ProcessingInstruction:case s.NodeType.CData:case s.NodeType.Comment:break;default:return!1}}catch(F){w={error:F}}finally{try{G&&!G.done&&(_=A.return)&&_.call(A)}finally{if(w)throw w.error}}break;case s.NodeType.DocumentType:case s.NodeType.Text:case s.NodeType.ProcessingInstruction:case s.NodeType.CData:case s.NodeType.Comment:return!S.hasChildNodes()}try{for(var j=a(S._children),k=j.next();!k.done;k=j.next())if(!d(k.value))return!1}catch(F){E={error:F}}finally{try{k&&!k.done&&(D=j.return)&&D.call(j)}finally{if(E)throw E.error}}return!0},r.tree_nodeLength=y,r.tree_isEmpty=function(d){return y(d)===0},r.tree_rootNode=x,r.tree_isDescendantOf=function(d,S,T,C){T===void 0&&(T=!1),C===void 0&&(C=!1);for(var w=p(d,T,C);w!==null;){if(w===S)return!0;w=c(d,w,T,C)}return!1},r.tree_isAncestorOf=m,r.tree_isHostIncludingAncestorOf=function d(S,T,C){if(C===void 0&&(C=!1),m(S,T,C))return!0;var w=x(S);return!(!o.Guard.isDocumentFragmentNode(w)||w._host===null||!d(w._host,T,C))},r.tree_isSiblingOf=function(d,S,T){return T===void 0&&(T=!1),d!==S?d._parent!==null&&d._parent===S._parent:!!T},r.tree_isPreceding=function(d,S){var T=g(d),C=g(S);return T!==-1&&C!==-1&&x(d)===x(S)&&C<T},r.tree_isFollowing=function(d,S){var T=g(d),C=g(S);return T!==-1&&C!==-1&&x(d)===x(S)&&C>T},r.tree_isParentOf=function(d,S){return d._parent===S},r.tree_isChildOf=function(d,S){return S._parent===d},r.tree_previousSibling=function(d){return d._previousSibling},r.tree_nextSibling=function(d){return d._nextSibling},r.tree_firstChild=function(d){return d._firstChild},r.tree_lastChild=function(d){return d._lastChild},r.tree_treePosition=g,r.tree_index=function(d){for(var S=0;d._previousSibling!==null;)S++,d=d._previousSibling;return S},r.tree_retarget=function(d,S){for(;;){if(!d||!o.Guard.isNode(d))return d;var T=x(d);if(!o.Guard.isShadowRoot(T)||S&&o.Guard.isNode(S)&&m(T,S,!0,!0))return d;d=T.host}}},function(n,r,i){var a=i(13);n.exports=function(o){if(!a(o))throw TypeError(String(o)+" is not an object");return o}},function(n,r,i){var a=i(24),o=i(130),s=i(49),u=i(43),l=i(88),p=u.set,c=u.getterFor("Array Iterator");n.exports=l(Array,"Array",function(f,h){p(this,{type:"Array Iterator",target:a(f),index:0,kind:h})},function(){var f=c(this),h=f.target,v=f.kind,y=f.index++;return!h||y>=h.length?(f.target=void 0,{value:void 0,done:!0}):v=="keys"?{value:y,done:!1}:v=="values"?{value:h[y],done:!1}:{value:[y,h[y]],done:!1}},"values"),s.Arguments=s.Array,o("keys"),o("values"),o("entries")},function(n,r,i){var a=i(90),o=i(25),s=i(202);a||o(Object.prototype,"toString",s,{unsafe:!0})},function(n,r,i){var a=i(16),o=i(15),s=i(40);n.exports=a?function(u,l,p){return o.f(u,l,s(1,p))}:function(u,l,p){return u[l]=p,u}},function(n,r,i){var a=i(137).charAt,o=i(43),s=i(88),u=o.set,l=o.getterFor("String Iterator");s(String,"String",function(p){u(this,{type:"String Iterator",string:String(p),index:0})},function(){var p,c=l(this),f=c.string,h=c.index;return h>=f.length?{value:void 0,done:!0}:(p=a(f,h),c.index+=p.length,{value:p,done:!1})})},function(n,r,i){var a=i(11),o=i(203),s=i(19),u=i(21),l=i(5),p=l("iterator"),c=l("toStringTag"),f=s.values;for(var h in o){var v=a[h],y=v&&v.prototype;if(y){if(y[p]!==f)try{u(y,p,f)}catch{y[p]=f}if(y[c]||u(y,c,h),o[h]){for(var x in s)if(y[x]!==s[x])try{u(y,x,s[x])}catch{y[x]=s[x]}}}}},function(n,r,i){var a=i(41),o=i(35);n.exports=function(s){return a(o(s))}},function(n,r,i){var a=i(11),o=i(21),s=i(14),u=i(80),l=i(117),p=i(43),c=p.get,f=p.enforce,h=String(String).split("String");(n.exports=function(v,y,x,m){var g=!!m&&!!m.unsafe,d=!!m&&!!m.enumerable,S=!!m&&!!m.noTargetGet;typeof x=="function"&&(typeof y!="string"||s(x,"name")||o(x,"name",y),f(x).source=h.join(typeof y=="string"?y:"")),v!==a?(g?!S&&v[y]&&(d=!0):delete v[y],d?v[y]=x:o(v,y,x)):d?v[y]=x:u(y,x)})(Function.prototype,"toString",function(){return typeof this=="function"&&c(this).source||l(this)})},function(n,r,i){var a=i(47),o=Math.min;n.exports=function(s){return s>0?o(a(s),9007199254740991):0}},function(n,r,i){var a=i(35);n.exports=function(o){return Object(a(o))}},function(n,r,i){var a=i(16),o=i(8),s=i(14),u=Object.defineProperty,l={},p=function(c){throw c};n.exports=function(c,f){if(s(l,c))return l[c];f||(f={});var h=[][c],v=!!s(f,"ACCESSORS")&&f.ACCESSORS,y=s(f,0)?f[0]:p,x=s(f,1)?f[1]:void 0;return l[c]=!!h&&!o(function(){if(v&&!a)return!0;var m={length:-1};v?u(m,1,{enumerable:!0,get:p}):m[1]=1,h.call(m,y,x)})}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(148),o=i(149),s=i(151),u=i(98),l=i(153),p=i(154),c=i(155),f=i(99),h=i(100),v=i(156),y=i(157),x=i(101),m=i(158),g=i(159),d=i(160),S=i(161),T=i(162),C=i(163),w=i(164),_=i(165),E=i(166),D=i(167),O=i(168),N=i(169),R=i(170);r.create_domImplementation=function(M){return a.DOMImplementationImpl._create(M)},r.create_window=function(){return o.WindowImpl._create()},r.create_xmlDocument=function(){return new s.XMLDocumentImpl},r.create_document=function(){return new u.DocumentImpl},r.create_abortController=function(){return new l.AbortControllerImpl},r.create_abortSignal=function(){return p.AbortSignalImpl._create()},r.create_documentType=function(M,A,G,j){return c.DocumentTypeImpl._create(M,A,G,j)},r.create_element=function(M,A,G,j){return f.ElementImpl._create(M,A,G,j)},r.create_htmlElement=function(M,A,G,j){return f.ElementImpl._create(M,A,G,j)},r.create_htmlUnknownElement=function(M,A,G,j){return f.ElementImpl._create(M,A,G,j)},r.create_documentFragment=function(M){return h.DocumentFragmentImpl._create(M)},r.create_shadowRoot=function(M,A){return v.ShadowRootImpl._create(M,A)},r.create_attr=function(M,A){return y.AttrImpl._create(M,A)},r.create_text=function(M,A){return x.TextImpl._create(M,A)},r.create_cdataSection=function(M,A){return m.CDATASectionImpl._create(M,A)},r.create_comment=function(M,A){return g.CommentImpl._create(M,A)},r.create_processingInstruction=function(M,A,G){return d.ProcessingInstructionImpl._create(M,A,G)},r.create_htmlCollection=function(M,A){return A===void 0&&(A=function(){return!0}),S.HTMLCollectionImpl._create(M,A)},r.create_nodeList=function(M){return T.NodeListImpl._create(M)},r.create_nodeListStatic=function(M,A){return C.NodeListStaticImpl._create(M,A)},r.create_namedNodeMap=function(M){return w.NamedNodeMapImpl._create(M)},r.create_range=function(M,A){return _.RangeImpl._create(M,A)},r.create_nodeIterator=function(M,A,G){return E.NodeIteratorImpl._create(M,A,G)},r.create_treeWalker=function(M,A){return D.TreeWalkerImpl._create(M,A)},r.create_nodeFilter=function(){return O.NodeFilterImpl._create()},r.create_mutationRecord=function(M,A,G,j,k,F,B,$,H){return N.MutationRecordImpl._create(M,A,G,j,k,F,B,$,H)},r.create_domTokenList=function(M,A){return R.DOMTokenListImpl._create(M,A)}},function(n,r,i){var a=this&&this.__values||function(y){var x=typeof Symbol=="function"&&Symbol.iterator,m=x&&y[x],g=0;if(m)return m.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&g>=y.length&&(y=void 0),{value:y&&y[g++],done:!y}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=i(17),u=i(3),l=i(72),p=new Map;function c(y,x){if(x!==y._root&&s.tree_isAncestorOf(y._reference,x,!0)){if(y._pointerBeforeReference)for(;;){var m=s.tree_getFollowingNode(y._root,x);if(m!==null&&s.tree_isDescendantOf(y._root,m,!0)&&!s.tree_isDescendantOf(x,m,!0))return void(y._reference=m);if(m===null)return void(y._pointerBeforeReference=!1)}if(x._previousSibling===null)x._parent!==null&&(y._reference=x._parent);else{for(var g=x._previousSibling,d=s.tree_getFirstDescendantNode(x._previousSibling,!0,!1);d!==null;)d!==null&&(g=d),d=s.tree_getNextDescendantNode(x._previousSibling,d,!0,!1);y._reference=g}}}function f(y,x,m,g,d){if(u.Guard.isSlot(y)&&x==="name"&&d===null){if(g===m||g===null&&m===""||g===""&&m===null)return;y._name=g===null||g===""?"":g,l.shadowTree_assignSlotablesForATree(s.tree_rootNode(y))}}function h(y,x,m,g,d){if(u.Guard.isSlotable(y)&&x==="slot"&&d===null){if(g===m||g===null&&m===""||g===""&&m===null)return;y._name=g===null||g===""?"":g,l.shadowTree_isAssigned(y)&&l.shadowTree_assignSlotables(y._assignedSlot),l.shadowTree_assignASlot(y)}}function v(y,x,m,g){x==="id"&&g===null&&(y._uniqueIdentifier=m||void 0)}r.dom_runRemovingSteps=function(y,x){},r.dom_runCloningSteps=function(y,x,m,g){},r.dom_runAdoptingSteps=function(y,x){},r.dom_runAttributeChangeSteps=function(y,x,m,g,d){var S,T;o.dom.features.slots&&(h.call(y,y,x,m,g,d),f.call(y,y,x,m,g,d)),v.call(y,y,x,g,d);try{for(var C=a(y._attributeChangeSteps),w=C.next();!w.done;w=C.next())w.value.call(y,y,x,m,g,d)}catch(_){S={error:_}}finally{try{w&&!w.done&&(T=C.return)&&T.call(C)}finally{if(S)throw S.error}}},r.dom_runInsertionSteps=function(y){},r.dom_runNodeIteratorPreRemovingSteps=function(y,x){c.call(y,y,x)},r.dom_hasSupportedTokens=function(y){return p.has(y)},r.dom_getSupportedTokens=function(y){return p.get(y)||new Set},r.dom_runEventConstructingSteps=function(y){},r.dom_runChildTextContentChangeSteps=function(y){}},function(n,r,i){var a=i(4),o=i(11),s=i(46),u=i(44),l=i(16),p=i(86),c=i(124),f=i(8),h=i(14),v=i(59),y=i(13),x=i(18),m=i(27),g=i(24),d=i(56),S=i(40),T=i(60),C=i(61),w=i(82),_=i(190),E=i(85),D=i(55),O=i(15),N=i(79),R=i(21),M=i(25),A=i(81),G=i(57),j=i(45),k=i(58),F=i(5),B=i(125),$=i(126),H=i(62),X=i(43),J=i(36).forEach,q=G("hidden"),ee=F("toPrimitive"),re=X.set,ae=X.getterFor("Symbol"),te=Object.prototype,L=o.Symbol,b=s("JSON","stringify"),U=D.f,V=O.f,I=_.f,z=N.f,W=A("symbols"),Y=A("op-symbols"),ne=A("string-to-symbol-registry"),oe=A("symbol-to-string-registry"),ue=A("wks"),Te=o.QObject,me=!Te||!Te.prototype||!Te.prototype.findChild,je=l&&f(function(){return T(V({},"a",{get:function(){return V(this,"a",{value:7}).a}})).a!=7})?function(se,pe,fe){var ve=U(te,pe);ve&&delete te[pe],V(se,pe,fe),ve&&se!==te&&V(te,pe,ve)}:V,Ne=function(se,pe){var fe=W[se]=T(L.prototype);return re(fe,{type:"Symbol",tag:se,description:pe}),l||(fe.description=pe),fe},he=c?function(se){return typeof se=="symbol"}:function(se){return Object(se)instanceof L},Je=function(se,pe,fe){se===te&&Je(Y,pe,fe),x(se);var ve=d(pe,!0);return x(fe),h(W,ve)?(fe.enumerable?(h(se,q)&&se[q][ve]&&(se[q][ve]=!1),fe=T(fe,{enumerable:S(0,!1)})):(h(se,q)||V(se,q,S(1,{})),se[q][ve]=!0),je(se,ve,fe)):V(se,ve,fe)},K=function(se,pe){x(se);var fe=g(pe),ve=C(fe).concat(Z(fe));return J(ve,function(ke){l&&!Ce.call(fe,ke)||Je(se,ke,fe[ke])}),se},Ce=function(se){var pe=d(se,!0),fe=z.call(this,pe);return!(this===te&&h(W,pe)&&!h(Y,pe))&&(!(fe||!h(this,pe)||!h(W,pe)||h(this,q)&&this[q][pe])||fe)},we=function(se,pe){var fe=g(se),ve=d(pe,!0);if(fe!==te||!h(W,ve)||h(Y,ve)){var ke=U(fe,ve);return!ke||!h(W,ve)||h(fe,q)&&fe[q][ve]||(ke.enumerable=!0),ke}},de=function(se){var pe=I(g(se)),fe=[];return J(pe,function(ve){h(W,ve)||h(j,ve)||fe.push(ve)}),fe},Z=function(se){var pe=se===te,fe=I(pe?Y:g(se)),ve=[];return J(fe,function(ke){!h(W,ke)||pe&&!h(te,ke)||ve.push(W[ke])}),ve};p||(M((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor");var se=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,pe=k(se),fe=function(ve){this===te&&fe.call(Y,ve),h(this,q)&&h(this[q],pe)&&(this[q][pe]=!1),je(this,pe,S(1,ve))};return l&&me&&je(te,pe,{configurable:!0,set:fe}),Ne(pe,se)}).prototype,"toString",function(){return ae(this).tag}),M(L,"withoutSetter",function(se){return Ne(k(se),se)}),N.f=Ce,O.f=Je,D.f=we,w.f=_.f=de,E.f=Z,B.f=function(se){return Ne(F(se),se)},l&&(V(L.prototype,"description",{configurable:!0,get:function(){return ae(this).description}}),u||M(te,"propertyIsEnumerable",Ce,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!p,sham:!p},{Symbol:L}),J(C(ue),function(se){$(se)}),a({target:"Symbol",stat:!0,forced:!p},{for:function(se){var pe=String(se);if(h(ne,pe))return ne[pe];var fe=L(pe);return ne[pe]=fe,oe[fe]=pe,fe},keyFor:function(se){if(!he(se))throw TypeError(se+" is not a symbol");if(h(oe,se))return oe[se]},useSetter:function(){me=!0},useSimple:function(){me=!1}}),a({target:"Object",stat:!0,forced:!p,sham:!l},{create:function(se,pe){return pe===void 0?T(se):K(T(se),pe)},defineProperty:Je,defineProperties:K,getOwnPropertyDescriptor:we}),a({target:"Object",stat:!0,forced:!p},{getOwnPropertyNames:de,getOwnPropertySymbols:Z}),a({target:"Object",stat:!0,forced:f(function(){E.f(1)})},{getOwnPropertySymbols:function(se){return E.f(m(se))}}),b&&a({target:"JSON",stat:!0,forced:!p||f(function(){var se=L();return b([se])!="[null]"||b({a:se})!="{}"||b(Object(se))!="{}"})},{stringify:function(se,pe,fe){for(var ve,ke=[se],xe=1;arguments.length>xe;)ke.push(arguments[xe++]);if(ve=pe,(y(pe)||se!==void 0)&&!he(se))return v(pe)||(pe=function(Ve,Ue){if(typeof ve=="function"&&(Ue=ve.call(this,Ve,Ue)),!he(Ue))return Ue}),ke[1]=pe,b.apply(null,ke)}}),L.prototype[ee]||R(L.prototype,ee,L.prototype.valueOf),H(L,"Symbol"),j[q]=!0},function(n,r,i){var a=i(4),o=i(16),s=i(11),u=i(14),l=i(13),p=i(15).f,c=i(119),f=s.Symbol;if(o&&typeof f=="function"&&(!("description"in f.prototype)||f().description!==void 0)){var h={},v=function(){var d=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),S=this instanceof v?new f(d):d===void 0?f():f(d);return d===""&&(h[S]=!0),S};c(v,f);var y=v.prototype=f.prototype;y.constructor=v;var x=y.toString,m=String(f("test"))=="Symbol(test)",g=/^Symbol\((.*)\)[^)]+$/;p(y,"description",{configurable:!0,get:function(){var d=l(this)?this.valueOf():this,S=x.call(d);if(u(h,d))return"";var T=m?S.slice(7,-1):S.replace(g,"$1");return T===""?void 0:T}}),a({global:!0,forced:!0},{Symbol:v})}},function(n,r,i){i(126)("iterator")},function(n,r,i){var a,o=this&&this.__extends||(a=function(m,g){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,S){d.__proto__=S}||function(d,S){for(var T in S)S.hasOwnProperty(T)&&(d[T]=S[T])})(m,g)},function(m,g){function d(){this.constructor=m}a(m,g),m.prototype=g===null?Object.create(g):(d.prototype=g.prototype,new d)}),s=this&&this.__values||function(m){var g=typeof Symbol=="function"&&Symbol.iterator,d=g&&m[g],S=0;if(d)return d.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&S>=m.length&&(m=void 0),{value:m&&m[S++],done:!m}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var u=i(6),l=i(2),p=i(70),c=i(3),f=i(9),h=i(0),v=i(152),y=i(12),x=function(m){function g(){var d=m.call(this)||this;return d._parent=null,d._firstChild=null,d._lastChild=null,d._previousSibling=null,d._nextSibling=null,d}return o(g,m),Object.defineProperty(g.prototype,"_childNodes",{get:function(){return this.__childNodes||(this.__childNodes=h.create_nodeList(this))},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"_nodeDocument",{get:function(){return this._nodeDocumentOverride||u.dom.window._associatedDocument},set:function(d){this._nodeDocumentOverride=d},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"_registeredObserverList",{get:function(){return this.__registeredObserverList||(this.__registeredObserverList=[])},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"nodeType",{get:function(){return this._nodeType},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"nodeName",{get:function(){return c.Guard.isElementNode(this)?this._htmlUppercasedQualifiedName:c.Guard.isAttrNode(this)?this._qualifiedName:c.Guard.isExclusiveTextNode(this)?"#text":c.Guard.isCDATASectionNode(this)?"#cdata-section":c.Guard.isProcessingInstructionNode(this)?this._target:c.Guard.isCommentNode(this)?"#comment":c.Guard.isDocumentNode(this)?"#document":c.Guard.isDocumentTypeNode(this)?this._name:c.Guard.isDocumentFragmentNode(this)?"#document-fragment":""},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"baseURI",{get:function(){return v.urlSerializer(this._nodeDocument._URL)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"isConnected",{get:function(){return c.Guard.isElementNode(this)&&h.shadowTree_isConnected(this)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"ownerDocument",{get:function(){return this._nodeType===l.NodeType.Document?null:this._nodeDocument},enumerable:!0,configurable:!0}),g.prototype.getRootNode=function(d){return h.tree_rootNode(this,!!d&&d.composed)},Object.defineProperty(g.prototype,"parentNode",{get:function(){return this._nodeType===l.NodeType.Attribute?null:this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"parentElement",{get:function(){return this._parent&&c.Guard.isElementNode(this._parent)?this._parent:null},enumerable:!0,configurable:!0}),g.prototype.hasChildNodes=function(){return this._firstChild!==null},Object.defineProperty(g.prototype,"childNodes",{get:function(){return this._childNodes},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"firstChild",{get:function(){return this._firstChild},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"lastChild",{get:function(){return this._lastChild},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"previousSibling",{get:function(){return this._previousSibling},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"nextSibling",{get:function(){return this._nextSibling},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"nodeValue",{get:function(){return c.Guard.isAttrNode(this)?this._value:c.Guard.isCharacterDataNode(this)?this._data:null},set:function(d){d===null&&(d=""),c.Guard.isAttrNode(this)?h.attr_setAnExistingAttributeValue(this,d):c.Guard.isCharacterDataNode(this)&&h.characterData_replaceData(this,0,this._data.length,d)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"textContent",{get:function(){return c.Guard.isDocumentFragmentNode(this)||c.Guard.isElementNode(this)?h.text_descendantTextContent(this):c.Guard.isAttrNode(this)?this._value:c.Guard.isCharacterDataNode(this)?this._data:null},set:function(d){d===null&&(d=""),c.Guard.isDocumentFragmentNode(this)||c.Guard.isElementNode(this)?h.node_stringReplaceAll(d,this):c.Guard.isAttrNode(this)?h.attr_setAnExistingAttributeValue(this,d):c.Guard.isCharacterDataNode(this)&&h.characterData_replaceData(this,0,h.tree_nodeLength(this),d)},enumerable:!0,configurable:!0}),g.prototype.normalize=function(){for(var d,S,T,C,w=[],_=h.tree_getFirstDescendantNode(this,!1,!1,function(J){return c.Guard.isExclusiveTextNode(J)});_!==null;)w.push(_),_=h.tree_getNextDescendantNode(this,_,!1,!1,function(J){return c.Guard.isExclusiveTextNode(J)});for(var E=0;E<w.length;E++){var D=w[E];if(D._parent!==null){var O=h.tree_nodeLength(D);if(O!==0){var N=[],R="";try{for(var M=(d=void 0,s(h.text_contiguousExclusiveTextNodes(D))),A=M.next();!A.done;A=M.next()){var G=A.value;N.push(G),R+=G._data}}catch(J){d={error:J}}finally{try{A&&!A.done&&(S=M.return)&&S.call(M)}finally{if(d)throw d.error}}if(h.characterData_replaceData(D,O,0,R),u.dom.rangeList.size!==0)for(var j=D._nextSibling;j!==null&&c.Guard.isExclusiveTextNode(j);){var k=j,F=h.tree_index(k);try{for(var B=(T=void 0,s(u.dom.rangeList)),$=B.next();!$.done;$=B.next()){var H=$.value;H._start[0]===k&&(H._start[0]=D,H._start[1]+=O),H._end[0]===k&&(H._end[0]=D,H._end[1]+=O),H._start[0]===k._parent&&H._start[1]===F&&(H._start[0]=D,H._start[1]=O),H._end[0]===k._parent&&H._end[1]===F&&(H._end[0]=D,H._end[1]=O)}}catch(J){T={error:J}}finally{try{$&&!$.done&&(C=B.return)&&C.call(B)}finally{if(T)throw T.error}}O+=h.tree_nodeLength(j),j=j._nextSibling}for(var X=0;X<N.length;X++)(G=N[X])._parent!==null&&h.mutation_remove(G,G._parent)}else h.mutation_remove(D,D._parent)}}},g.prototype.cloneNode=function(d){if(d===void 0&&(d=!1),c.Guard.isShadowRoot(this))throw new f.NotSupportedError;return h.node_clone(this,null,d)},g.prototype.isEqualNode=function(d){return d===void 0&&(d=null),d!==null&&h.node_equals(this,d)},g.prototype.isSameNode=function(d){return d===void 0&&(d=null),this===d},g.prototype.compareDocumentPosition=function(d){if(d===this)return 0;var S=d,T=this,C=null,w=null;if(c.Guard.isAttrNode(S)&&(S=(C=S)._element),c.Guard.isAttrNode(T)&&(T=(w=T)._element,C&&S&&S===T))for(var _=0;_<T._attributeList.length;_++){var E=T._attributeList[_];if(h.node_equals(E,C))return l.Position.ImplementationSpecific|l.Position.Preceding;if(h.node_equals(E,w))return l.Position.ImplementationSpecific|l.Position.Following}return S===null||T===null||h.tree_rootNode(S)!==h.tree_rootNode(T)?l.Position.Disconnected|l.Position.ImplementationSpecific|(u.dom.compareCache.check(this,d)?l.Position.Preceding:l.Position.Following):!C&&h.tree_isAncestorOf(T,S)||w&&S===T?l.Position.Contains|l.Position.Preceding:!w&&h.tree_isDescendantOf(T,S)||C&&S===T?l.Position.ContainedBy|l.Position.Following:h.tree_isPreceding(T,S)?l.Position.Preceding:l.Position.Following},g.prototype.contains=function(d){return d!==null&&h.tree_isDescendantOf(this,d,!0)},g.prototype.lookupPrefix=function(d){return d?c.Guard.isElementNode(this)?h.node_locateANamespacePrefix(this,d):c.Guard.isDocumentNode(this)?this.documentElement===null?null:h.node_locateANamespacePrefix(this.documentElement,d):c.Guard.isDocumentTypeNode(this)||c.Guard.isDocumentFragmentNode(this)?null:c.Guard.isAttrNode(this)?this._element===null?null:h.node_locateANamespacePrefix(this._element,d):this._parent!==null&&c.Guard.isElementNode(this._parent)?h.node_locateANamespacePrefix(this._parent,d):null:null},g.prototype.lookupNamespaceURI=function(d){return h.node_locateANamespace(this,d||null)},g.prototype.isDefaultNamespace=function(d){return d||(d=null),h.node_locateANamespace(this,null)===d},g.prototype.insertBefore=function(d,S){return h.mutation_preInsert(d,this,S)},g.prototype.appendChild=function(d){return h.mutation_append(d,this)},g.prototype.replaceChild=function(d,S){return h.mutation_replace(S,d,this)},g.prototype.removeChild=function(d){return h.mutation_preRemove(d,this)},g.prototype._getTheParent=function(d){return c.Guard.isSlotable(this)&&h.shadowTree_isAssigned(this)?this._assignedSlot:this._parent},g.ELEMENT_NODE=1,g.ATTRIBUTE_NODE=2,g.TEXT_NODE=3,g.CDATA_SECTION_NODE=4,g.ENTITY_REFERENCE_NODE=5,g.ENTITY_NODE=6,g.PROCESSING_INSTRUCTION_NODE=7,g.COMMENT_NODE=8,g.DOCUMENT_NODE=9,g.DOCUMENT_TYPE_NODE=10,g.DOCUMENT_FRAGMENT_NODE=11,g.NOTATION_NODE=12,g.DOCUMENT_POSITION_DISCONNECTED=1,g.DOCUMENT_POSITION_PRECEDING=2,g.DOCUMENT_POSITION_FOLLOWING=4,g.DOCUMENT_POSITION_CONTAINS=8,g.DOCUMENT_POSITION_CONTAINED_BY=16,g.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,g}(p.EventTargetImpl);r.NodeImpl=x,x.prototype._children=new c.EmptySet,y.idl_defineConst(x.prototype,"ELEMENT_NODE",1),y.idl_defineConst(x.prototype,"ATTRIBUTE_NODE",2),y.idl_defineConst(x.prototype,"TEXT_NODE",3),y.idl_defineConst(x.prototype,"CDATA_SECTION_NODE",4),y.idl_defineConst(x.prototype,"ENTITY_REFERENCE_NODE",5),y.idl_defineConst(x.prototype,"ENTITY_NODE",6),y.idl_defineConst(x.prototype,"PROCESSING_INSTRUCTION_NODE",7),y.idl_defineConst(x.prototype,"COMMENT_NODE",8),y.idl_defineConst(x.prototype,"DOCUMENT_NODE",9),y.idl_defineConst(x.prototype,"DOCUMENT_TYPE_NODE",10),y.idl_defineConst(x.prototype,"DOCUMENT_FRAGMENT_NODE",11),y.idl_defineConst(x.prototype,"NOTATION_NODE",12),y.idl_defineConst(x.prototype,"DOCUMENT_POSITION_DISCONNECTED",1),y.idl_defineConst(x.prototype,"DOCUMENT_POSITION_PRECEDING",2),y.idl_defineConst(x.prototype,"DOCUMENT_POSITION_FOLLOWING",4),y.idl_defineConst(x.prototype,"DOCUMENT_POSITION_CONTAINS",8),y.idl_defineConst(x.prototype,"DOCUMENT_POSITION_CONTAINED_BY",16),y.idl_defineConst(x.prototype,"DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC",32)},function(n,r){n.exports=function(i){if(i==null)throw TypeError("Can't call method on "+i);return i}},function(n,r,i){var a=i(87),o=i(41),s=i(27),u=i(26),l=i(128),p=[].push,c=function(f){var h=f==1,v=f==2,y=f==3,x=f==4,m=f==6,g=f==5||m;return function(d,S,T,C){for(var w,_,E=s(d),D=o(E),O=a(S,T,3),N=u(D.length),R=0,M=C||l,A=h?M(d,N):v?M(d,0):void 0;N>R;R++)if((g||R in D)&&(_=O(w=D[R],R,E),f)){if(h)A[R]=_;else if(_)switch(f){case 3:return!0;case 5:return w;case 6:return R;case 2:p.call(A,w)}else if(x)return!1}return m?-1:y||x?x:A}};n.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},function(n,r,i){var a=this&&this.__values||function(E){var D=typeof Symbol=="function"&&Symbol.iterator,O=D&&E[D],N=0;if(O)return O.call(E);if(E&&typeof E.length=="number")return{next:function(){return E&&N>=E.length&&(E=void 0),{value:E&&E[N++],done:!E}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(E,D){var O=typeof Symbol=="function"&&E[Symbol.iterator];if(!O)return E;var N,R,M=O.call(E),A=[];try{for(;(D===void 0||D-- >0)&&!(N=M.next()).done;)A.push(N.value)}catch(G){R={error:G}}finally{try{N&&!N.done&&(O=M.return)&&O.call(M)}finally{if(R)throw R.error}}return A},s=this&&this.__spread||function(){for(var E=[],D=0;D<arguments.length;D++)E=E.concat(o(arguments[D]));return E};Object.defineProperty(r,"__esModule",{value:!0});var u=i(6),l=i(9),p=i(2),c=i(3),f=i(1),h=i(7),v=i(73),y=i(17),x=i(172),m=i(72),g=i(51),d=i(30),S=i(106);function T(E,D,O){var N,R,M,A,G,j,k,F,B=D._nodeType,$=E._nodeType,H=O?O._nodeType:null;if(B!==p.NodeType.Document&&B!==p.NodeType.DocumentFragment&&B!==p.NodeType.Element)throw new l.HierarchyRequestError("Only document, document fragment and element nodes can contain child nodes. Parent node is "+D.nodeName+".");if(y.tree_isHostIncludingAncestorOf(D,E,!0))throw new l.HierarchyRequestError("The node to be inserted cannot be an inclusive ancestor of parent node. Node is "+E.nodeName+", parent node is "+D.nodeName+".");if(O!==null&&O._parent!==D)throw new l.NotFoundError("The reference child node cannot be found under parent node. Child node is "+O.nodeName+", parent node is "+D.nodeName+".");if($!==p.NodeType.DocumentFragment&&$!==p.NodeType.DocumentType&&$!==p.NodeType.Element&&$!==p.NodeType.Text&&$!==p.NodeType.ProcessingInstruction&&$!==p.NodeType.CData&&$!==p.NodeType.Comment)throw new l.HierarchyRequestError("Only document fragment, document type, element, text, processing instruction, cdata section or comment nodes can be inserted. Node is "+E.nodeName+".");if($===p.NodeType.Text&&B===p.NodeType.Document)throw new l.HierarchyRequestError("Cannot insert a text node as a child of a document node. Node is "+E.nodeName+".");if($===p.NodeType.DocumentType&&B!==p.NodeType.Document)throw new l.HierarchyRequestError("A document type node can only be inserted under a document node. Parent node is "+D.nodeName+".");if(B===p.NodeType.Document){if($===p.NodeType.DocumentFragment){var X=0;try{for(var J=a(E._children),q=J.next();!q.done;q=J.next()){var ee=q.value;if(ee._nodeType===p.NodeType.Element)X++;else if(ee._nodeType===p.NodeType.Text)throw new l.HierarchyRequestError("Cannot insert text a node as a child of a document node. Node is "+ee.nodeName+".")}}catch(z){N={error:z}}finally{try{q&&!q.done&&(R=J.return)&&R.call(J)}finally{if(N)throw N.error}}if(X>1)throw new l.HierarchyRequestError("A document node can only have one document element node. Document fragment to be inserted has "+X+" element nodes.");if(X===1){try{for(var re=a(D._children),ae=re.next();!ae.done;ae=re.next())if(ae.value._nodeType===p.NodeType.Element)throw new l.HierarchyRequestError("The document node already has a document element node.")}catch(z){M={error:z}}finally{try{ae&&!ae.done&&(A=re.return)&&A.call(re)}finally{if(M)throw M.error}}if(O){if(H===p.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node.");for(var te=O._nextSibling;te;){if(te._nodeType===p.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node.");te=te._nextSibling}}}}else if($===p.NodeType.Element){try{for(var L=a(D._children),b=L.next();!b.done;b=L.next())if(b.value._nodeType===p.NodeType.Element)throw new l.HierarchyRequestError("Document already has a document element node. Node is "+E.nodeName+".")}catch(z){G={error:z}}finally{try{b&&!b.done&&(j=L.return)&&j.call(L)}finally{if(G)throw G.error}}if(O){if(H===p.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+E.nodeName+".");for(te=O._nextSibling;te;){if(te._nodeType===p.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+E.nodeName+".");te=te._nextSibling}}}else if($===p.NodeType.DocumentType){try{for(var U=a(D._children),V=U.next();!V.done;V=U.next())if(V.value._nodeType===p.NodeType.DocumentType)throw new l.HierarchyRequestError("Document already has a document type node. Node is "+E.nodeName+".")}catch(z){k={error:z}}finally{try{V&&!V.done&&(F=U.return)&&F.call(U)}finally{if(k)throw k.error}}if(O)for(var I=O._previousSibling;I;){if(I._nodeType===p.NodeType.Element)throw new l.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+E.nodeName+".");I=I._previousSibling}else for(I=D._firstChild;I;){if(I._nodeType===p.NodeType.Element)throw new l.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+E.nodeName+".");I=I._nextSibling}}}}function C(E,D,O){T(E,D,O);var N=O;return N===E&&(N=E._nextSibling),S.document_adopt(E,D._nodeDocument),w(E,D,N),E}function w(E,D,O,N){var R,M;if(O!==null||E._nodeType===p.NodeType.DocumentFragment){var A=E._nodeType===p.NodeType.DocumentFragment?E._children.size:1;if(O!==null&&u.dom.rangeList.size!==0){var G=y.tree_index(O);try{for(var j=a(u.dom.rangeList),k=j.next();!k.done;k=j.next()){var F=k.value;F._start[0]===D&&F._start[1]>G&&(F._start[1]+=A),F._end[0]===D&&F._end[1]>G&&(F._end[1]+=A)}}catch(ae){R={error:ae}}finally{try{k&&!k.done&&(M=j.return)&&M.call(j)}finally{if(R)throw R.error}}}var B=E._nodeType===p.NodeType.DocumentFragment?new(Array.bind.apply(Array,s([void 0],E._children))):[E];if(E._nodeType===p.NodeType.DocumentFragment)for(;E._firstChild;)_(E._firstChild,E,!0);u.dom.features.mutationObservers&&E._nodeType===p.NodeType.DocumentFragment&&g.observer_queueTreeMutationRecord(E,[],B,null,null);for(var $=O?O._previousSibling:D._lastChild,H=O===null?-1:y.tree_index(O),X=0;X<B.length;X++){var J=B[X];if(c.Guard.isElementNode(J)&&(c.Guard.isDocumentNode(D)&&(D._documentElement=J),J._nodeDocument._hasNamespaces||J._namespace===null&&J._namespacePrefix===null||(J._nodeDocument._hasNamespaces=!0)),J._parent=D,O===null?h.set.append(D._children,J):(h.set.insert(D._children,J,H),H++),D._firstChild===null)J._previousSibling=null,J._nextSibling=null,D._firstChild=J,D._lastChild=J;else{var q=O?O._previousSibling:D._lastChild,ee=O||null;J._previousSibling=q,J._nextSibling=ee,q&&(q._nextSibling=J),ee&&(ee._previousSibling=J),q||(D._firstChild=J),ee||(D._lastChild=J)}u.dom.features.slots&&D._shadowRoot!==null&&c.Guard.isSlotable(J)&&m.shadowTree_assignASlot(J),u.dom.features.steps&&c.Guard.isTextNode(J)&&d.dom_runChildTextContentChangeSteps(D),u.dom.features.slots&&c.Guard.isShadowRoot(y.tree_rootNode(D))&&c.Guard.isSlot(D)&&f.isEmpty(D._assignedNodes)&&m.shadowTree_signalASlotChange(D),u.dom.features.slots&&m.shadowTree_assignSlotablesForATree(y.tree_rootNode(J));for(var re=y.tree_getFirstDescendantNode(J,!0,!0);re!==null;)u.dom.features.steps&&d.dom_runInsertionSteps(re),u.dom.features.customElements&&c.Guard.isElementNode(re)&&m.shadowTree_isConnected(re)&&(c.Guard.isCustomElementNode(re)?v.customElement_enqueueACustomElementCallbackReaction(re,"connectedCallback",[]):v.customElement_tryToUpgrade(re)),re=y.tree_getNextDescendantNode(J,re,!0,!0)}u.dom.features.mutationObservers&&(N||g.observer_queueTreeMutationRecord(D,B,[],$,O))}else(function(ae,te,L){var b=te._lastChild;if(c.Guard.isElementNode(ae)&&(c.Guard.isDocumentNode(te)&&(te._documentElement=ae),ae._nodeDocument._hasNamespaces||ae._namespace===null&&ae._namespacePrefix===null||(ae._nodeDocument._hasNamespaces=!0)),ae._parent=te,te._children.add(ae),te._firstChild===null)ae._previousSibling=null,ae._nextSibling=null,te._firstChild=ae,te._lastChild=ae;else{var U=te._lastChild;ae._previousSibling=U,ae._nextSibling=null,U&&(U._nextSibling=ae),U||(te._firstChild=ae),te._lastChild=ae}u.dom.features.slots&&te._shadowRoot!==null&&c.Guard.isSlotable(ae)&&m.shadowTree_assignASlot(ae),u.dom.features.steps&&c.Guard.isTextNode(ae)&&d.dom_runChildTextContentChangeSteps(te),u.dom.features.slots&&c.Guard.isShadowRoot(y.tree_rootNode(te))&&c.Guard.isSlot(te)&&f.isEmpty(te._assignedNodes)&&m.shadowTree_signalASlotChange(te),u.dom.features.slots&&m.shadowTree_assignSlotablesForATree(y.tree_rootNode(ae)),u.dom.features.steps&&d.dom_runInsertionSteps(ae),u.dom.features.customElements&&c.Guard.isElementNode(ae)&&m.shadowTree_isConnected(ae)&&(c.Guard.isCustomElementNode(ae)?v.customElement_enqueueACustomElementCallbackReaction(ae,"connectedCallback",[]):v.customElement_tryToUpgrade(ae)),u.dom.features.mutationObservers&&(L||g.observer_queueTreeMutationRecord(te,[ae],[],b,null))})(E,D,N)}function _(E,D,O){var N,R,M,A,G,j,k,F;if(u.dom.rangeList.size!==0){var B=y.tree_index(E);try{for(var $=a(u.dom.rangeList),H=$.next();!H.done;H=$.next()){var X=H.value;y.tree_isDescendantOf(E,X._start[0],!0)&&(X._start=[D,B]),y.tree_isDescendantOf(E,X._end[0],!0)&&(X._end=[D,B]),X._start[0]===D&&X._start[1]>B&&X._start[1]--,X._end[0]===D&&X._end[1]>B&&X._end[1]--}}catch(ne){N={error:ne}}finally{try{H&&!H.done&&(R=$.return)&&R.call($)}finally{if(N)throw N.error}}try{for(var J=a(u.dom.rangeList),q=J.next();!q.done;q=J.next())(X=q.value)._start[0]===D&&X._start[1]>B&&(X._start[1]-=1),X._end[0]===D&&X._end[1]>B&&(X._end[1]-=1)}catch(ne){M={error:ne}}finally{try{q&&!q.done&&(A=J.return)&&A.call(J)}finally{if(M)throw M.error}}}if(u.dom.features.steps)try{for(var ee=a(x.nodeIterator_iteratorList()),re=ee.next();!re.done;re=ee.next()){var ae=re.value;ae._root._nodeDocument===E._nodeDocument&&d.dom_runNodeIteratorPreRemovingSteps(ae,E)}}catch(ne){G={error:ne}}finally{try{re&&!re.done&&(j=ee.return)&&j.call(ee)}finally{if(G)throw G.error}}var te=E._previousSibling,L=E._nextSibling;c.Guard.isDocumentNode(D)&&c.Guard.isElementNode(E)&&(D._documentElement=null),E._parent=null,D._children.delete(E);var b=E._previousSibling,U=E._nextSibling;E._previousSibling=null,E._nextSibling=null,b&&(b._nextSibling=U),U&&(U._previousSibling=b),b||(D._firstChild=U),U||(D._lastChild=b),u.dom.features.slots&&c.Guard.isSlotable(E)&&E._assignedSlot!==null&&m.shadowTree_isAssigned(E)&&m.shadowTree_assignSlotables(E._assignedSlot),u.dom.features.slots&&c.Guard.isShadowRoot(y.tree_rootNode(D))&&c.Guard.isSlot(D)&&f.isEmpty(D._assignedNodes)&&m.shadowTree_signalASlotChange(D),u.dom.features.slots&&y.tree_getFirstDescendantNode(E,!0,!1,function(ne){return c.Guard.isSlot(ne)})!==null&&(m.shadowTree_assignSlotablesForATree(y.tree_rootNode(D)),m.shadowTree_assignSlotablesForATree(E)),u.dom.features.steps&&d.dom_runRemovingSteps(E,D),u.dom.features.customElements&&c.Guard.isCustomElementNode(E)&&v.customElement_enqueueACustomElementCallbackReaction(E,"disconnectedCallback",[]);for(var V=y.tree_getFirstDescendantNode(E,!1,!0);V!==null;)u.dom.features.steps&&d.dom_runRemovingSteps(V,E),u.dom.features.customElements&&c.Guard.isCustomElementNode(V)&&v.customElement_enqueueACustomElementCallbackReaction(V,"disconnectedCallback",[]),V=y.tree_getNextDescendantNode(E,V,!1,!0);if(u.dom.features.mutationObservers)for(var I=y.tree_getFirstAncestorNode(D,!0);I!==null;){try{for(var z=(k=void 0,a(I._registeredObserverList)),W=z.next();!W.done;W=z.next()){var Y=W.value;Y.options.subtree&&E._registeredObserverList.push({observer:Y.observer,options:Y.options,source:Y})}}catch(ne){k={error:ne}}finally{try{W&&!W.done&&(F=z.return)&&F.call(z)}finally{if(k)throw k.error}}I=y.tree_getNextAncestorNode(D,I,!0)}u.dom.features.mutationObservers&&(O||g.observer_queueTreeMutationRecord(D,[],[E],te,L)),u.dom.features.steps&&c.Guard.isTextNode(E)&&d.dom_runChildTextContentChangeSteps(D)}r.mutation_ensurePreInsertionValidity=T,r.mutation_preInsert=C,r.mutation_insert=w,r.mutation_append=function(E,D){return C(E,D,null)},r.mutation_replace=function(E,D,O){var N,R,M,A,G,j,k,F;if(O._nodeType!==p.NodeType.Document&&O._nodeType!==p.NodeType.DocumentFragment&&O._nodeType!==p.NodeType.Element)throw new l.HierarchyRequestError("Only document, document fragment and element nodes can contain child nodes. Parent node is "+O.nodeName+".");if(y.tree_isHostIncludingAncestorOf(O,D,!0))throw new l.HierarchyRequestError("The node to be inserted cannot be an ancestor of parent node. Node is "+D.nodeName+", parent node is "+O.nodeName+".");if(E._parent!==O)throw new l.NotFoundError("The reference child node cannot be found under parent node. Child node is "+E.nodeName+", parent node is "+O.nodeName+".");if(D._nodeType!==p.NodeType.DocumentFragment&&D._nodeType!==p.NodeType.DocumentType&&D._nodeType!==p.NodeType.Element&&D._nodeType!==p.NodeType.Text&&D._nodeType!==p.NodeType.ProcessingInstruction&&D._nodeType!==p.NodeType.CData&&D._nodeType!==p.NodeType.Comment)throw new l.HierarchyRequestError("Only document fragment, document type, element, text, processing instruction, cdata section or comment nodes can be inserted. Node is "+D.nodeName+".");if(D._nodeType===p.NodeType.Text&&O._nodeType===p.NodeType.Document)throw new l.HierarchyRequestError("Cannot insert a text node as a child of a document node. Node is "+D.nodeName+".");if(D._nodeType===p.NodeType.DocumentType&&O._nodeType!==p.NodeType.Document)throw new l.HierarchyRequestError("A document type node can only be inserted under a document node. Parent node is "+O.nodeName+".");if(O._nodeType===p.NodeType.Document){if(D._nodeType===p.NodeType.DocumentFragment){var B=0;try{for(var $=a(D._children),H=$.next();!H.done;H=$.next()){var X=H.value;if(X._nodeType===p.NodeType.Element)B++;else if(X._nodeType===p.NodeType.Text)throw new l.HierarchyRequestError("Cannot insert text a node as a child of a document node. Node is "+X.nodeName+".")}}catch(Y){N={error:Y}}finally{try{H&&!H.done&&(R=$.return)&&R.call($)}finally{if(N)throw N.error}}if(B>1)throw new l.HierarchyRequestError("A document node can only have one document element node. Document fragment to be inserted has "+B+" element nodes.");if(B===1){try{for(var J=a(O._children),q=J.next();!q.done;q=J.next())if((b=q.value)._nodeType===p.NodeType.Element&&b!==E)throw new l.HierarchyRequestError("The document node already has a document element node.")}catch(Y){M={error:Y}}finally{try{q&&!q.done&&(A=J.return)&&A.call(J)}finally{if(M)throw M.error}}for(var ee=E._nextSibling;ee;){if(ee._nodeType===p.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node.");ee=ee._nextSibling}}}else if(D._nodeType===p.NodeType.Element){try{for(var re=a(O._children),ae=re.next();!ae.done;ae=re.next())if((b=ae.value)._nodeType===p.NodeType.Element&&b!==E)throw new l.HierarchyRequestError("Document already has a document element node. Node is "+D.nodeName+".")}catch(Y){G={error:Y}}finally{try{ae&&!ae.done&&(j=re.return)&&j.call(re)}finally{if(G)throw G.error}}for(ee=E._nextSibling;ee;){if(ee._nodeType===p.NodeType.DocumentType)throw new l.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+D.nodeName+".");ee=ee._nextSibling}}else if(D._nodeType===p.NodeType.DocumentType){try{for(var te=a(O._children),L=te.next();!L.done;L=te.next()){var b;if((b=L.value)._nodeType===p.NodeType.DocumentType&&b!==E)throw new l.HierarchyRequestError("Document already has a document type node. Node is "+D.nodeName+".")}}catch(Y){k={error:Y}}finally{try{L&&!L.done&&(F=te.return)&&F.call(te)}finally{if(k)throw k.error}}for(var U=E._previousSibling;U;){if(U._nodeType===p.NodeType.Element)throw new l.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+D.nodeName+".");U=U._previousSibling}}}var V=E._nextSibling;V===D&&(V=D._nextSibling);var I=E._previousSibling;S.document_adopt(D,O._nodeDocument);var z=[];E._parent!==null&&(z.push(E),_(E,E._parent,!0));var W=[];return D._nodeType===p.NodeType.DocumentFragment?W=Array.from(D._children):W.push(D),w(D,O,V,!0),u.dom.features.mutationObservers&&g.observer_queueTreeMutationRecord(O,W,z,I,V),E},r.mutation_replaceAll=function(E,D){var O,N;E!==null&&S.document_adopt(E,D._nodeDocument);var R=Array.from(D._children),M=[];E&&E._nodeType===p.NodeType.DocumentFragment?M=Array.from(E._children):E!==null&&M.push(E);try{for(var A=a(R),G=A.next();!G.done;G=A.next())_(G.value,D,!0)}catch(j){O={error:j}}finally{try{G&&!G.done&&(N=A.return)&&N.call(A)}finally{if(O)throw O.error}}E!==null&&w(E,D,null,!0),u.dom.features.mutationObservers&&g.observer_queueTreeMutationRecord(D,M,R,null,null)},r.mutation_preRemove=function(E,D){if(E._parent!==D)throw new l.NotFoundError("The child node cannot be found under parent node. Child node is "+E.nodeName+", parent node is "+D.nodeName+".");return _(E,D),E},r.mutation_remove=_},function(n,r,i){function a(o){return o==null}n.exports.isNothing=a,n.exports.isObject=function(o){return typeof o=="object"&&o!==null},n.exports.toArray=function(o){return Array.isArray(o)?o:a(o)?[]:[o]},n.exports.repeat=function(o,s){var u,l="";for(u=0;u<s;u+=1)l+=o;return l},n.exports.isNegativeZero=function(o){return o===0&&Number.NEGATIVE_INFINITY===1/o},n.exports.extend=function(o,s){var u,l,p,c;if(s)for(u=0,l=(c=Object.keys(s)).length;u<l;u+=1)o[p=c[u]]=s[p];return o}},function(n,r,i){var a=i(38),o=i(53),s=i(10);function u(p,c,f){var h=[];return p.include.forEach(function(v){f=u(v,c,f)}),p[c].forEach(function(v){f.forEach(function(y,x){y.tag===v.tag&&y.kind===v.kind&&h.push(x)}),f.push(v)}),f.filter(function(v,y){return h.indexOf(y)===-1})}function l(p){this.include=p.include||[],this.implicit=p.implicit||[],this.explicit=p.explicit||[],this.implicit.forEach(function(c){if(c.loadKind&&c.loadKind!=="scalar")throw new o("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=u(this,"implicit",[]),this.compiledExplicit=u(this,"explicit",[]),this.compiledTypeMap=function(){var c,f,h={scalar:{},sequence:{},mapping:{},fallback:{}};function v(y){h[y.kind][y.tag]=h.fallback[y.tag]=y}for(c=0,f=arguments.length;c<f;c+=1)arguments[c].forEach(v);return h}(this.compiledImplicit,this.compiledExplicit)}l.DEFAULT=null,l.create=function(){var p,c;switch(arguments.length){case 1:p=l.DEFAULT,c=arguments[0];break;case 2:p=arguments[0],c=arguments[1];break;default:throw new o("Wrong number of arguments for Schema.create function")}if(p=a.toArray(p),c=a.toArray(c),!p.every(function(f){return f instanceof l}))throw new o("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!c.every(function(f){return f instanceof s}))throw new o("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new l({include:p,explicit:c})},n.exports=l},function(n,r){n.exports=function(i,a){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:a}}},function(n,r,i){var a=i(8),o=i(42),s="".split;n.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(u){return o(u)=="String"?s.call(u,""):Object(u)}:Object},function(n,r){var i={}.toString;n.exports=function(a){return i.call(a).slice(8,-1)}},function(n,r,i){var a,o,s,u=i(186),l=i(11),p=i(13),c=i(21),f=i(14),h=i(57),v=i(45),y=l.WeakMap;if(u){var x=new y,m=x.get,g=x.has,d=x.set;a=function(T,C){return d.call(x,T,C),C},o=function(T){return m.call(x,T)||{}},s=function(T){return g.call(x,T)}}else{var S=h("state");v[S]=!0,a=function(T,C){return c(T,S,C),C},o=function(T){return f(T,S)?T[S]:{}},s=function(T){return f(T,S)}}n.exports={set:a,get:o,has:s,enforce:function(T){return s(T)?o(T):a(T,{})},getterFor:function(T){return function(C){var w;if(!p(C)||(w=o(C)).type!==T)throw TypeError("Incompatible receiver, "+T+" required");return w}}}},function(n,r){n.exports=!1},function(n,r){n.exports={}},function(n,r,i){var a=i(120),o=i(11),s=function(u){return typeof u=="function"?u:void 0};n.exports=function(u,l){return arguments.length<2?s(a[u])||s(o[u]):a[u]&&a[u][l]||o[u]&&o[u][l]}},function(n,r){var i=Math.ceil,a=Math.floor;n.exports=function(o){return isNaN(o=+o)?0:(o>0?a:i)(o)}},function(n,r,i){var a=i(8);n.exports=function(o,s){var u=[][o];return!!u&&a(function(){u.call(null,s||function(){throw 1},1)})}},function(n,r){n.exports={}},function(n,r,i){i(31),i(32),i(33),i(220),i(64),i(19),i(65),i(20),i(68),i(66),i(92),i(144),i(22),i(94),i(23);var a=this&&this.__values||function(v){var y=typeof Symbol=="function"&&Symbol.iterator,x=y&&v[y],m=0;if(x)return x.call(v);if(v&&typeof v.length=="number")return{next:function(){return v&&m>=v.length&&(v=void 0),{value:v&&v[m++],done:!v}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(v,y){var x=typeof Symbol=="function"&&v[Symbol.iterator];if(!x)return v;var m,g,d=x.call(v),S=[];try{for(;(y===void 0||y-- >0)&&!(m=d.next()).done;)S.push(m.value)}catch(T){g={error:T}}finally{try{m&&!m.done&&(x=d.return)&&x.call(d)}finally{if(g)throw g.error}}return S},s=this&&this.__spread||function(){for(var v=[],y=0;y<arguments.length;y++)v=v.concat(o(arguments[y]));return v};Object.defineProperty(r,"__esModule",{value:!0});var u=i(2),l=i(69),p=i(95),c=i(7),f=i(0),h=function(){function v(y){this.level=0,this._builderOptions=y}return v.prototype.declaration=function(y,x,m){},v.prototype.docType=function(y,x,m){},v.prototype.comment=function(y){},v.prototype.text=function(y){},v.prototype.instruction=function(y,x){},v.prototype.cdata=function(y){},v.prototype.openTagBegin=function(y){},v.prototype.openTagEnd=function(y,x,m){},v.prototype.closeTag=function(y){},v.prototype.attributes=function(y){var x,m;try{for(var g=a(y),d=g.next();!d.done;d=g.next()){var S=d.value;this.attribute(S[1]===null?S[2]:S[1]+":"+S[2],S[3])}}catch(T){x={error:T}}finally{try{d&&!d.done&&(m=g.return)&&m.call(g)}finally{if(x)throw x.error}}},v.prototype.attribute=function(y,x){},v.prototype.beginElement=function(y){},v.prototype.endElement=function(y){},v.prototype.serializeNode=function(y,x){var m=y._nodeDocument!==void 0&&y._nodeDocument._hasNamespaces;if(this.level=0,this.currentNode=y,m){var g=new p.NamespacePrefixMap;g.set("xml",c.namespace.XML),this._serializeNodeNS(y,null,g,{value:1},x)}else this._serializeNode(y,x)},v.prototype._serializeNodeNS=function(y,x,m,g,d){switch(this.currentNode=y,y.nodeType){case u.NodeType.Element:this._serializeElementNS(y,x,m,g,d);break;case u.NodeType.Document:this._serializeDocumentNS(y,x,m,g,d);break;case u.NodeType.Comment:this._serializeComment(y,d);break;case u.NodeType.Text:this._serializeText(y,d);break;case u.NodeType.DocumentFragment:this._serializeDocumentFragmentNS(y,x,m,g,d);break;case u.NodeType.DocumentType:this._serializeDocumentType(y,d);break;case u.NodeType.ProcessingInstruction:this._serializeProcessingInstruction(y,d);break;case u.NodeType.CData:this._serializeCData(y,d);break;default:throw new Error("Unknown node type: "+y.nodeType)}},v.prototype._serializeNode=function(y,x){switch(this.currentNode=y,y.nodeType){case u.NodeType.Element:this._serializeElement(y,x);break;case u.NodeType.Document:this._serializeDocument(y,x);break;case u.NodeType.Comment:this._serializeComment(y,x);break;case u.NodeType.Text:this._serializeText(y,x);break;case u.NodeType.DocumentFragment:this._serializeDocumentFragment(y,x);break;case u.NodeType.DocumentType:this._serializeDocumentType(y,x);break;case u.NodeType.ProcessingInstruction:this._serializeProcessingInstruction(y,x);break;case u.NodeType.CData:this._serializeCData(y,x);break;default:throw new Error("Unknown node type: "+y.nodeType)}},v.prototype._serializeElementNS=function(y,x,m,g,d){var S,T,C=[];if(d&&(y.localName.indexOf(":")!==-1||!f.xml_isName(y.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var w="",_=!1,E=!1,D=m.copy(),O={},N=this._recordNamespaceInformation(y,D,O),R=x,M=y.namespaceURI;if(R===M)N!==null&&(E=!0),w=M===c.namespace.XML?"xml:"+y.localName:y.localName,this.beginElement(w),this.openTagBegin(w);else{var A=y.prefix,G=null;if(A===null&&M===N||(G=D.get(A,M)),A==="xmlns"){if(d)throw new Error("An element cannot have the 'xmlns' prefix (well-formed required).");G=A}G!==null?(w=G+":"+y.localName,N!==null&&N!==c.namespace.XML&&(R=N||null),this.beginElement(w),this.openTagBegin(w)):A!==null?(A in O&&(A=this._generatePrefix(M,D,g)),D.set(A,M),w+=A+":"+y.localName,this.beginElement(w),this.openTagBegin(w),C.push([null,"xmlns",A,this._serializeAttributeValue(M,d)]),N!==null&&(R=N||null)):N===null||N!==null&&N!==M?(E=!0,w+=y.localName,R=M,this.beginElement(w),this.openTagBegin(w),C.push([null,null,"xmlns",this._serializeAttributeValue(M,d)])):(w+=y.localName,R=M,this.beginElement(w),this.openTagBegin(w))}C.push.apply(C,s(this._serializeAttributesNS(y,D,g,O,E,d))),this.attributes(C);var j=M===c.namespace.HTML;if(j&&y.childNodes.length===0&&v._VoidElementNames.has(y.localName)?(this.openTagEnd(w,!0,!0),this.endElement(w),_=!0):j||y.childNodes.length!==0?this.openTagEnd(w,!1,!1):(this.openTagEnd(w,!0,!1),this.endElement(w),_=!0),!_){if(!(j&&y.localName==="template"))try{for(var k=a(y.childNodes),F=k.next();!F.done;F=k.next()){var B=F.value;this.level++,this._serializeNodeNS(B,R,D,g,d),this.level--}}catch($){S={error:$}}finally{try{F&&!F.done&&(T=k.return)&&T.call(k)}finally{if(S)throw S.error}}this.closeTag(w),this.endElement(w)}},v.prototype._serializeElement=function(y,x){var m,g;if(x&&(y.localName.indexOf(":")!==-1||!f.xml_isName(y.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var d=!1,S=y.localName;this.beginElement(S),this.openTagBegin(S);var T=this._serializeAttributes(y,x);if(this.attributes(T),y.hasChildNodes()?this.openTagEnd(S,!1,!1):(this.openTagEnd(S,!0,!1),this.endElement(S),d=!0),!d){try{for(var C=a(y._children),w=C.next();!w.done;w=C.next()){var _=w.value;this.level++,this._serializeNode(_,x),this.level--}}catch(E){m={error:E}}finally{try{w&&!w.done&&(g=C.return)&&g.call(C)}finally{if(m)throw m.error}}this.closeTag(S),this.endElement(S)}},v.prototype._serializeDocumentNS=function(y,x,m,g,d){var S,T;if(d&&y.documentElement===null)throw new Error("Missing document element (well-formed required).");try{for(var C=a(y.childNodes),w=C.next();!w.done;w=C.next()){var _=w.value;this._serializeNodeNS(_,x,m,g,d)}}catch(E){S={error:E}}finally{try{w&&!w.done&&(T=C.return)&&T.call(C)}finally{if(S)throw S.error}}},v.prototype._serializeDocument=function(y,x){var m,g;if(x&&y.documentElement===null)throw new Error("Missing document element (well-formed required).");try{for(var d=a(y._children),S=d.next();!S.done;S=d.next()){var T=S.value;this._serializeNode(T,x)}}catch(C){m={error:C}}finally{try{S&&!S.done&&(g=d.return)&&g.call(d)}finally{if(m)throw m.error}}},v.prototype._serializeComment=function(y,x){if(x&&(!f.xml_isLegalChar(y.data)||y.data.indexOf("--")!==-1||y.data.endsWith("-")))throw new Error("Comment data contains invalid characters (well-formed required).");this.comment(y.data)},v.prototype._serializeText=function(y,x){if(x&&!f.xml_isLegalChar(y.data))throw new Error("Text data contains invalid characters (well-formed required).");var m=y.data.replace(/(?!&([^&;]*);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");this.text(m)},v.prototype._serializeDocumentFragmentNS=function(y,x,m,g,d){var S,T;try{for(var C=a(y.childNodes),w=C.next();!w.done;w=C.next()){var _=w.value;this._serializeNodeNS(_,x,m,g,d)}}catch(E){S={error:E}}finally{try{w&&!w.done&&(T=C.return)&&T.call(C)}finally{if(S)throw S.error}}},v.prototype._serializeDocumentFragment=function(y,x){var m,g;try{for(var d=a(y._children),S=d.next();!S.done;S=d.next()){var T=S.value;this._serializeNode(T,x)}}catch(C){m={error:C}}finally{try{S&&!S.done&&(g=d.return)&&g.call(d)}finally{if(m)throw m.error}}},v.prototype._serializeDocumentType=function(y,x){if(x&&!f.xml_isPubidChar(y.publicId))throw new Error("DocType public identifier does not match PubidChar construct (well-formed required).");if(x&&(!f.xml_isLegalChar(y.systemId)||y.systemId.indexOf('"')!==-1&&y.systemId.indexOf("'")!==-1))throw new Error("DocType system identifier contains invalid characters (well-formed required).");this.docType(y.name,y.publicId,y.systemId)},v.prototype._serializeProcessingInstruction=function(y,x){if(x&&(y.target.indexOf(":")!==-1||/^xml$/i.test(y.target)))throw new Error("Processing instruction target contains invalid characters (well-formed required).");if(x&&(!f.xml_isLegalChar(y.data)||y.data.indexOf("?>")!==-1))throw new Error("Processing instruction data contains invalid characters (well-formed required).");this.instruction(y.target,y.data)},v.prototype._serializeCData=function(y,x){if(x&&y.data.indexOf("]]>")!==-1)throw new Error("CDATA contains invalid characters (well-formed required).");this.cdata(y.data)},v.prototype._serializeAttributesNS=function(y,x,m,g,d,S){var T,C,w=[],_=S?new l.LocalNameSet:void 0;try{for(var E=a(y.attributes),D=E.next();!D.done;D=E.next()){var O=D.value;if(S||d||O.namespaceURI!==null){if(S&&_&&_.has(O.namespaceURI,O.localName))throw new Error("Element contains duplicate attributes (well-formed required).");S&&_&&_.set(O.namespaceURI,O.localName);var N=O.namespaceURI,R=null;if(N!==null)if(R=x.get(O.prefix,N),N===c.namespace.XMLNS){if(O.value===c.namespace.XML||O.prefix===null&&d||O.prefix!==null&&(!(O.localName in g)||g[O.localName]!==O.value)&&x.has(O.localName,O.value))continue;if(S&&O.value===c.namespace.XMLNS)throw new Error("XMLNS namespace is reserved (well-formed required).");if(S&&O.value==="")throw new Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).");O.prefix==="xmlns"&&(R="xmlns")}else R===null&&(R=O.prefix===null||x.hasPrefix(O.prefix)&&!x.has(O.prefix,N)?this._generatePrefix(N,x,m):O.prefix,w.push([null,"xmlns",R,this._serializeAttributeValue(N,S)]));if(S&&(O.localName.indexOf(":")!==-1||!f.xml_isName(O.localName)||O.localName==="xmlns"&&N===null))throw new Error("Attribute local name contains invalid characters (well-formed required).");w.push([N,R,O.localName,this._serializeAttributeValue(O.value,S)])}else w.push([null,null,O.localName,this._serializeAttributeValue(O.value,S)])}}catch(M){T={error:M}}finally{try{D&&!D.done&&(C=E.return)&&C.call(E)}finally{if(T)throw T.error}}return w},v.prototype._serializeAttributes=function(y,x){var m,g,d=[],S=x?{}:void 0;try{for(var T=a(y.attributes),C=T.next();!C.done;C=T.next()){var w=C.value;if(x){if(x&&S&&w.localName in S)throw new Error("Element contains duplicate attributes (well-formed required).");if(x&&S&&(S[w.localName]=!0),x&&(w.localName.indexOf(":")!==-1||!f.xml_isName(w.localName)))throw new Error("Attribute local name contains invalid characters (well-formed required).");d.push([null,null,w.localName,this._serializeAttributeValue(w.value,x)])}else d.push([null,null,w.localName,this._serializeAttributeValue(w.value,x)])}}catch(_){m={error:_}}finally{try{C&&!C.done&&(g=T.return)&&g.call(T)}finally{if(m)throw m.error}}return d},v.prototype._recordNamespaceInformation=function(y,x,m){var g,d,S=null;try{for(var T=a(y.attributes),C=T.next();!C.done;C=T.next()){var w=C.value,_=w.namespaceURI,E=w.prefix;if(_===c.namespace.XMLNS){if(E===null){S=w.value;continue}var D=w.localName,O=w.value;if(O===c.namespace.XML||(O===""&&(O=null),x.has(D,O)))continue;x.set(D,O),m[D]=O||""}}}catch(N){g={error:N}}finally{try{C&&!C.done&&(d=T.return)&&d.call(T)}finally{if(g)throw g.error}}return S},v.prototype._generatePrefix=function(y,x,m){var g="ns"+m.value.toString();return m.value++,x.set(g,y),g},v.prototype._serializeAttributeValue=function(y,x){if(x&&y!==null&&!f.xml_isLegalChar(y))throw new Error("Invalid characters in attribute value.");return y===null?"":y.replace(/(?!&([^&;]*);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},v._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),v}();r.BaseWriter=h},function(n,r,i){var a=this&&this.__values||function(x){var m=typeof Symbol=="function"&&Symbol.iterator,g=m&&x[m],d=0;if(g)return g.call(x);if(x&&typeof x.length=="number")return{next:function(){return x&&d>=x.length&&(x=void 0),{value:x&&x[d++],done:!x}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(x,m){var g=typeof Symbol=="function"&&x[Symbol.iterator];if(!g)return x;var d,S,T=g.call(x),C=[];try{for(;(m===void 0||m-- >0)&&!(d=T.next()).done;)C.push(d.value)}catch(w){S={error:w}}finally{try{d&&!d.done&&(g=T.return)&&g.call(T)}finally{if(S)throw S.error}}return C};Object.defineProperty(r,"__esModule",{value:!0});var s=i(6),u=i(3),l=i(7),p=i(29),c=i(17),f=i(97);function h(){var x=s.dom.window;x._mutationObserverMicrotaskQueued||(x._mutationObserverMicrotaskQueued=!0,Promise.resolve().then(function(){v()}))}function v(){var x,m,g,d,S=s.dom.window;S._mutationObserverMicrotaskQueued=!1;var T=l.set.clone(S._mutationObservers),C=l.set.clone(S._signalSlots);l.set.empty(S._signalSlots);var w=function(R){var M=l.list.clone(R._recordQueue);l.list.empty(R._recordQueue);for(var A=0;A<R._nodeList.length;A++){var G=R._nodeList[A];l.list.remove(G._registeredObserverList,function(j){return u.Guard.isTransientRegisteredObserver(j)&&j.observer===R})}if(!l.list.isEmpty(M))try{R._callback.call(R,M,R)}catch{}};try{for(var _=a(T),E=_.next();!E.done;E=_.next())w(E.value)}catch(R){x={error:R}}finally{try{E&&!E.done&&(m=_.return)&&m.call(_)}finally{if(x)throw x.error}}if(s.dom.features.slots)try{for(var D=a(C),O=D.next();!O.done;O=D.next()){var N=O.value;f.event_fireAnEvent("slotchange",N,void 0,{bubbles:!0})}}catch(R){g={error:R}}finally{try{O&&!O.done&&(d=D.return)&&d.call(D)}finally{if(g)throw g.error}}}function y(x,m,g,d,S,T,C,w,_){for(var E,D,O=new Map,N=c.tree_getFirstAncestorNode(m,!0);N!==null;){for(var R=0;R<N._registeredObserverList.length;R++){var M=N._registeredObserverList[R],A=M.options;if((N===m||A.subtree)&&(x!=="attributes"||A.attributes)&&(x!=="attributes"||!A.attributeFilter||A.attributeFilter.indexOf(g||"")&&d===null)&&(x!=="characterData"||A.characterData)&&(x!=="childList"||A.childList)){var G=M.observer;O.has(G)||O.set(G,null),(x==="attributes"&&A.attributeOldValue||x==="characterData"&&A.characterDataOldValue)&&O.set(G,S)}}N=c.tree_getNextAncestorNode(m,N,!0)}try{for(var j=a(O),k=j.next();!k.done;k=j.next()){var F=o(k.value,2),B=F[0],$=F[1],H=p.create_mutationRecord(x,m,p.create_nodeListStatic(m,T),p.create_nodeListStatic(m,C),w,_,g,d,$);B._recordQueue.push(H)}}catch(X){E={error:X}}finally{try{k&&!k.done&&(D=j.return)&&D.call(j)}finally{if(E)throw E.error}}h()}r.observer_queueAMutationObserverMicrotask=h,r.observer_notifyMutationObservers=v,r.observer_queueMutationRecord=y,r.observer_queueTreeMutationRecord=function(x,m,g,d,S){y("childList",x,null,null,null,m,g,d,S)},r.observer_queueAttributeMutationRecord=function(x,m,g,d){y("attributes",x,m,g,d,[],[],null,null)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(6),o=i(7),s=i(3),u=i(9),l=i(29),p=i(73),c=i(51),f=i(30),h=i(37),v=i(106);function y(T,C,w){a.dom.features.mutationObservers&&c.observer_queueAttributeMutationRecord(C,T._localName,T._namespace,T._value),a.dom.features.customElements&&s.Guard.isCustomElementNode(C)&&p.customElement_enqueueACustomElementCallbackReaction(C,"attributeChangedCallback",[T._localName,T._value,w,T._namespace]),a.dom.features.steps&&f.dom_runAttributeChangeSteps(C,T._localName,T._value,w,T._namespace),T._value=w}function x(T,C){a.dom.features.mutationObservers&&c.observer_queueAttributeMutationRecord(C,T._localName,T._namespace,null),a.dom.features.customElements&&s.Guard.isCustomElementNode(C)&&p.customElement_enqueueACustomElementCallbackReaction(C,"attributeChangedCallback",[T._localName,null,T._value,T._namespace]),a.dom.features.steps&&f.dom_runAttributeChangeSteps(C,T._localName,null,T._value,T._namespace),C._attributeList._asArray().push(T),T._element=C,C._nodeDocument._hasNamespaces||T._namespace===null&&T._namespacePrefix===null&&T._localName!=="xmlns"||(C._nodeDocument._hasNamespaces=!0)}function m(T,C){a.dom.features.mutationObservers&&c.observer_queueAttributeMutationRecord(C,T._localName,T._namespace,T._value),a.dom.features.customElements&&s.Guard.isCustomElementNode(C)&&p.customElement_enqueueACustomElementCallbackReaction(C,"attributeChangedCallback",[T._localName,T._value,null,T._namespace]),a.dom.features.steps&&f.dom_runAttributeChangeSteps(C,T._localName,T._value,null,T._namespace);var w=C._attributeList._asArray().indexOf(T);C._attributeList._asArray().splice(w,1),T._element=null}function g(T,C,w){a.dom.features.mutationObservers&&c.observer_queueAttributeMutationRecord(w,T._localName,T._namespace,T._value),a.dom.features.customElements&&s.Guard.isCustomElementNode(w)&&p.customElement_enqueueACustomElementCallbackReaction(w,"attributeChangedCallback",[T._localName,T._value,C._value,T._namespace]),a.dom.features.steps&&f.dom_runAttributeChangeSteps(w,T._localName,T._value,C._value,T._namespace);var _=w._attributeList._asArray().indexOf(T);_!==-1&&(w._attributeList._asArray()[_]=C),T._element=null,C._element=w,w._nodeDocument._hasNamespaces||C._namespace===null&&C._namespacePrefix===null&&C._localName!=="xmlns"||(w._nodeDocument._hasNamespaces=!0)}function d(T,C){return C._namespace===o.namespace.HTML&&C._nodeDocument._type==="html"&&(T=T.toLowerCase()),C._attributeList._asArray().find(function(w){return w._qualifiedName===T})||null}function S(T,C,w){var _=T||null;return w._attributeList._asArray().find(function(E){return E._namespace===_&&E._localName===C})||null}r.element_has=function(T,C){return C._attributeList._asArray().indexOf(T)!==-1},r.element_change=y,r.element_append=x,r.element_remove=m,r.element_replace=g,r.element_getAnAttributeByName=d,r.element_getAnAttributeByNamespaceAndLocalName=S,r.element_getAnAttributeValue=function(T,C,w){w===void 0&&(w="");var _=S(w,C,T);return _===null?"":_._value},r.element_setAnAttribute=function(T,C){if(T._element!==null&&T._element!==C)throw new u.InUseAttributeError("This attribute already exists in the document: "+T._qualifiedName+" as a child of "+T._element._qualifiedName+".");var w=S(T._namespace||"",T._localName,C);return w===T?T:(w!==null?g(w,T,C):x(T,C),w)},r.element_setAnAttributeValue=function(T,C,w,_,E){_===void 0&&(_=null),E===void 0&&(E=null);var D=S(E||"",C,T);if(D===null){var O=l.create_attr(T._nodeDocument,C);return O._namespace=E,O._namespacePrefix=_,O._value=w,void x(O,T)}y(D,T,w)},r.element_removeAnAttributeByName=function(T,C){var w=d(T,C);return w!==null&&m(w,C),w},r.element_removeAnAttributeByNamespaceAndLocalName=function(T,C,w){var _=S(T,C,w);return _!==null&&m(_,w),_},r.element_createAnElement=function(T,C,w,_,E,D){_===void 0&&(_=null),E===void 0&&(E=null),D===void 0&&(D=!1);var O=null;if(!a.dom.features.customElements)return(O=l.create_element(T,C,w,_))._customElementState="uncustomized",O._customElementDefinition=null,O._is=E,O;var N=p.customElement_lookUpACustomElementDefinition(T,w,C,E);if(N!==null&&N.name!==N.localName)(O=new(v.document_elementInterface(C,o.namespace.HTML)))._localName=C,O._namespace=o.namespace.HTML,O._namespacePrefix=_,O._customElementState="undefined",O._customElementDefinition=null,O._is=E,O._nodeDocument=T,D?p.customElement_upgrade(N,O):p.customElement_enqueueACustomElementUpgradeReaction(O,N);else if(N!==null)if(D)try{var R=new N.constructor;if(console.assert(R._customElementState!==void 0),console.assert(R._customElementDefinition!==void 0),console.assert(R._namespace===o.namespace.HTML),R._attributeList.length!==0)throw new u.NotSupportedError("Custom element already has attributes.");if(R._children.size!==0)throw new u.NotSupportedError("Custom element already has child nodes.");if(R._parent!==null)throw new u.NotSupportedError("Custom element already has a parent node.");if(R._nodeDocument!==T)throw new u.NotSupportedError("Custom element is already in a document.");if(R._localName!==C)throw new u.NotSupportedError("Custom element has a different local name.");R._namespacePrefix=_,R._is=null}catch{(O=l.create_htmlUnknownElement(T,C,o.namespace.HTML,_))._customElementState="failed",O._customElementDefinition=null,O._is=null}else(O=l.create_htmlElement(T,C,o.namespace.HTML,_))._customElementState="undefined",O._customElementDefinition=null,O._is=null,p.customElement_enqueueACustomElementUpgradeReaction(O,N);else(O=new(v.document_elementInterface(C,w)))._localName=C,O._namespace=w,O._namespacePrefix=_,O._customElementState="uncustomized",O._customElementDefinition=null,O._is=E,O._nodeDocument=T,w!==o.namespace.HTML||E===null&&!p.customElement_isValidCustomElementName(C)||(O._customElementState="undefined");if(O===null)throw new Error("Unable to create element.");return O},r.element_insertAdjacent=function(T,C,w){switch(C.toLowerCase()){case"beforebegin":return T._parent===null?null:h.mutation_preInsert(w,T._parent,T);case"afterbegin":return h.mutation_preInsert(w,T,T._firstChild);case"beforeend":return h.mutation_preInsert(w,T,null);case"afterend":return T._parent===null?null:h.mutation_preInsert(w,T._parent,T._nextSibling);default:throw new u.SyntaxError(`Invalid 'where' argument. "beforebegin", "afterbegin", "beforeend" or "afterend" expected`)}}},function(n,r,i){function a(o,s){Error.call(this),this.name="YAMLException",this.reason=o,this.mark=s,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a.prototype.toString=function(o){var s=this.name+": ";return s+=this.reason||"(unknown reason)",!o&&this.mark&&(s+=" "+this.mark.toString()),s},n.exports=a},function(n,r,i){var a=i(39);n.exports=new a({include:[i(181)],implicit:[i(293),i(294)],explicit:[i(295),i(296),i(297),i(298)]})},function(n,r,i){var a=i(16),o=i(79),s=i(40),u=i(24),l=i(56),p=i(14),c=i(115),f=Object.getOwnPropertyDescriptor;r.f=a?f:function(h,v){if(h=u(h),v=l(v,!0),c)try{return f(h,v)}catch{}if(p(h,v))return s(!o.f.call(h,v),h[v])}},function(n,r,i){var a=i(13);n.exports=function(o,s){if(!a(o))return o;var u,l;if(s&&typeof(u=o.toString)=="function"&&!a(l=u.call(o))||typeof(u=o.valueOf)=="function"&&!a(l=u.call(o))||!s&&typeof(u=o.toString)=="function"&&!a(l=u.call(o)))return l;throw TypeError("Can't convert object to primitive value")}},function(n,r,i){var a=i(81),o=i(58),s=a("keys");n.exports=function(u){return s[u]||(s[u]=o(u))}},function(n,r){var i=0,a=Math.random();n.exports=function(o){return"Symbol("+String(o===void 0?"":o)+")_"+(++i+a).toString(36)}},function(n,r,i){var a=i(42);n.exports=Array.isArray||function(o){return a(o)=="Array"}},function(n,r,i){var a,o=i(18),s=i(188),u=i(84),l=i(45),p=i(189),c=i(116),f=i(57),h=f("IE_PROTO"),v=function(){},y=function(m){return"<script>"+m+"<\/script>"},x=function(){try{a=document.domain&&new ActiveXObject("htmlfile")}catch{}var m,g;x=a?function(S){S.write(y("")),S.close();var T=S.parentWindow.Object;return S=null,T}(a):((g=c("iframe")).style.display="none",p.appendChild(g),g.src="javascript:",(m=g.contentWindow.document).open(),m.write(y("document.F=Object")),m.close(),m.F);for(var d=u.length;d--;)delete x.prototype[u[d]];return x()};l[h]=!0,n.exports=Object.create||function(m,g){var d;return m!==null?(v.prototype=o(m),d=new v,v.prototype=null,d[h]=m):d=x(),g===void 0?d:s(d,g)}},function(n,r,i){var a=i(121),o=i(84);n.exports=Object.keys||function(s){return a(s,o)}},function(n,r,i){var a=i(15).f,o=i(14),s=i(5)("toStringTag");n.exports=function(u,l,p){u&&!o(u=p?u:u.prototype,s)&&a(u,s,{configurable:!0,value:l})}},function(n,r,i){var a=i(8),o=i(5),s=i(129),u=o("species");n.exports=function(l){return s>=51||!a(function(){var p=[];return(p.constructor={})[u]=function(){return{foo:1}},p[l](Boolean).foo!==1})}},function(n,r,i){var a=i(4),o=i(122).indexOf,s=i(48),u=i(28),l=[].indexOf,p=!!l&&1/[1].indexOf(1,-0)<0,c=s("indexOf"),f=u("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:p||!c||!f},{indexOf:function(h){return p?l.apply(this,arguments)||0:o(this,h,arguments.length>1?arguments[1]:void 0)}})},function(n,r,i){var a=i(16),o=i(15).f,s=Function.prototype,u=s.toString,l=/^\s*function ([^ (]*)/;a&&!("name"in s)&&o(s,"name",{configurable:!0,get:function(){try{return u.call(this).match(l)[1]}catch{return""}}})},function(n,r,i){var a=i(25),o=i(18),s=i(8),u=i(136),l=RegExp.prototype,p=l.toString,c=s(function(){return p.call({source:"a",flags:"b"})!="/a/b"}),f=p.name!="toString";(c||f)&&a(RegExp.prototype,"toString",function(){var h=o(this),v=String(h.source),y=h.flags;return"/"+v+"/"+String(y===void 0&&h instanceof RegExp&&!("flags"in l)?u.call(h):y)},{unsafe:!0})},function(n,r,i){i(31),i(32),i(33),i(19),i(138),i(20),i(66),i(22),i(23);var a,o=this&&this.__extends||(a=function(c,f){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(c,f)},function(c,f){function h(){this.constructor=c}a(c,f),c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}),s=this&&this.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&c[f],v=0;if(h)return h.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&v>=c.length&&(c=void 0),{value:c&&c[v++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var u=i(1),l=i(2),p=function(c){function f(h,v){var y=c.call(this,h)||this;return y._writerOptions=u.applyDefaults(v,{format:"object",wellFormed:!1,group:!1,verbose:!1}),y}return o(f,c),f.prototype.serialize=function(h){return this._currentList=[],this._currentIndex=0,this._listRegister=[this._currentList],this.serializeNode(h,this._writerOptions.wellFormed),this._process(this._currentList,this._writerOptions)},f.prototype._process=function(h,v){var y,x,m,g,d,S,T;if(h.length===0)return{};for(var C={},w=!1,_=0,E=0,D=0,O=0,N=0;N<h.length;N++){var R=h[N];switch(te=Object.keys(R)[0]){case"@":continue;case"#":_++;break;case"!":E++;break;case"?":D++;break;case"$":O++;break;default:C[te]?w=!0:C[te]=!0}}var M=this._getAttrKey(),A=this._getNodeKey(l.NodeType.Text),G=this._getNodeKey(l.NodeType.Comment),j=this._getNodeKey(l.NodeType.ProcessingInstruction),k=this._getNodeKey(l.NodeType.CData);if(_===1&&h.length===1&&u.isString(h[0]["#"]))return h[0]["#"];if(w){var F={};for(N=0;N<h.length;N++)if(R=h[N],(te=Object.keys(R)[0])==="@"){var B=R["@"];(L=Object.keys(B)).length===1?F[M+L[0]]=B[L[0]]:F[M]=R["@"]}var $=[];for(N=0;N<h.length;N++)switch(R=h[N],te=Object.keys(R)[0]){case"@":break;case"#":$.push(((y={})[A]=R["#"],y));break;case"!":$.push(((x={})[G]=R["!"],x));break;case"?":$.push(((m={})[j]=R["?"],m));break;case"$":$.push(((g={})[k]=R.$,g));break;default:if((U=R)[te].length!==0&&u.isArray(U[te][0])){for(var H=[],X=U[te],J=0;J<X.length;J++)H.push(this._process(X[J],v));$.push(((d={})[te]=H,d))}else v.verbose?$.push(((S={})[te]=[this._process(U[te],v)],S)):$.push(((T={})[te]=this._process(U[te],v),T))}return F[A]=$,F}var q=1,ee=1,re=1,ae=1;for(F={},N=0;N<h.length;N++){var te;switch(R=h[N],te=Object.keys(R)[0]){case"@":B=R["@"];var L=Object.keys(B);if(v.group&&L.length!==1)F[M]=B;else for(var b in B)F[M+b]=B[b];break;case"#":q=this._processSpecItem(R["#"],F,v.group,A,_,q);break;case"!":ee=this._processSpecItem(R["!"],F,v.group,G,E,ee);break;case"?":re=this._processSpecItem(R["?"],F,v.group,j,D,re);break;case"$":ae=this._processSpecItem(R.$,F,v.group,k,O,ae);break;default:var U;if((U=R)[te].length!==0&&u.isArray(U[te][0])){H=[],X=U[te];for(var V=0;V<X.length;V++)H.push(this._process(X[V],v));F[te]=H}else v.verbose?F[te]=[this._process(U[te],v)]:F[te]=this._process(U[te],v)}}return F},f.prototype._processSpecItem=function(h,v,y,x,m,g){var d,S;if(!y&&u.isArray(h)&&m+h.length>2)try{for(var T=s(h),C=T.next();!C.done;C=T.next()){var w=C.value;v[x+(g++).toString()]=w}}catch(_){d={error:_}}finally{try{C&&!C.done&&(S=T.return)&&S.call(T)}finally{if(d)throw d.error}}else v[m>1?x+(g++).toString():x]=h;return g},f.prototype.beginElement=function(h){var v,y,x=[];if(this._currentList.length===0)this._currentList.push(((v={})[h]=x,v));else{var m=this._currentList[this._currentList.length-1];this._isElementNode(m,h)?m[h].length!==0&&u.isArray(m[h][0])?m[h].push(x):m[h]=[m[h],x]:this._currentList.push(((y={})[h]=x,y))}this._currentIndex++,this._listRegister.length>this._currentIndex?this._listRegister[this._currentIndex]=x:this._listRegister.push(x),this._currentList=x},f.prototype.endElement=function(){this._currentList=this._listRegister[--this._currentIndex]},f.prototype.attribute=function(h,v){var y,x;if(this._currentList.length===0)this._currentList.push({"@":(y={},y[h]=v,y)});else{var m=this._currentList[this._currentList.length-1];this._isAttrNode(m)?m["@"][h]=v:this._currentList.push({"@":(x={},x[h]=v,x)})}},f.prototype.comment=function(h){if(this._currentList.length===0)this._currentList.push({"!":h});else{var v=this._currentList[this._currentList.length-1];this._isCommentNode(v)?u.isArray(v["!"])?v["!"].push(h):v["!"]=[v["!"],h]:this._currentList.push({"!":h})}},f.prototype.text=function(h){if(this._currentList.length===0)this._currentList.push({"#":h});else{var v=this._currentList[this._currentList.length-1];this._isTextNode(v)?u.isArray(v["#"])?v["#"].push(h):v["#"]=[v["#"],h]:this._currentList.push({"#":h})}},f.prototype.instruction=function(h,v){var y=v===""?h:h+" "+v;if(this._currentList.length===0)this._currentList.push({"?":y});else{var x=this._currentList[this._currentList.length-1];this._isInstructionNode(x)?u.isArray(x["?"])?x["?"].push(y):x["?"]=[x["?"],y]:this._currentList.push({"?":y})}},f.prototype.cdata=function(h){if(this._currentList.length===0)this._currentList.push({$:h});else{var v=this._currentList[this._currentList.length-1];this._isCDATANode(v)?u.isArray(v.$)?v.$.push(h):v.$=[v.$,h]:this._currentList.push({$:h})}},f.prototype._isAttrNode=function(h){return"@"in h},f.prototype._isTextNode=function(h){return"#"in h},f.prototype._isCommentNode=function(h){return"!"in h},f.prototype._isInstructionNode=function(h){return"?"in h},f.prototype._isCDATANode=function(h){return"$"in h},f.prototype._isElementNode=function(h,v){return v in h},f.prototype._getAttrKey=function(){return this._builderOptions.convert.att},f.prototype._getNodeKey=function(h){switch(h){case l.NodeType.Comment:return this._builderOptions.convert.comment;case l.NodeType.Text:return this._builderOptions.convert.text;case l.NodeType.ProcessingInstruction:return this._builderOptions.convert.ins;case l.NodeType.CData:return this._builderOptions.convert.cdata;default:throw new Error("Invalid node type.")}},f}(i(50).BaseWriter);r.ObjectWriter=p},function(n,r,i){var a=i(4),o=i(93);a({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function o(){this._items={},this._nullItems={}}return o.prototype.set=function(s,u){s===null?this._nullItems[u]=!0:(this._items[s]||(this._items[s]={}),this._items[s][u]=!0)},o.prototype.has=function(s,u){return s===null?this._nullItems[u]===!0:!!this._items[s]&&this._items[s][u]===!0},o}();r.LocalNameSet=a},function(n,r,i){var a=this&&this.__read||function(p,c){var f=typeof Symbol=="function"&&p[Symbol.iterator];if(!f)return p;var h,v,y=f.call(p),x=[];try{for(;(c===void 0||c-- >0)&&!(h=y.next()).done;)x.push(h.value)}catch(m){v={error:m}}finally{try{h&&!h.done&&(f=y.return)&&f.call(y)}finally{if(v)throw v.error}}return x};Object.defineProperty(r,"__esModule",{value:!0});var o=i(9),s=i(3),u=i(0),l=function(){function p(){}return Object.defineProperty(p.prototype,"_eventListenerList",{get:function(){return this.__eventListenerList||(this.__eventListenerList=[])},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"_eventHandlerMap",{get:function(){return this.__eventHandlerMap||(this.__eventHandlerMap={})},enumerable:!0,configurable:!0}),p.prototype.addEventListener=function(c,f,h){h===void 0&&(h={passive:!1,once:!1,capture:!1});var v,y=a(u.eventTarget_flattenMore(h),3),x=y[0],m=y[1],g=y[2];f&&(v=s.Guard.isEventListener(f)?f:{handleEvent:f},u.eventTarget_addEventListener(this,{type:c,callback:v,capture:x,passive:m,once:g,removed:!1}))},p.prototype.removeEventListener=function(c,f,h){h===void 0&&(h={capture:!1});var v=u.eventTarget_flatten(h);if(f)for(var y=0;y<this._eventListenerList.length;y++){var x=this._eventListenerList[y];if(x.type===c&&x.capture===v){if(s.Guard.isEventListener(f)&&x.callback===f){u.eventTarget_removeEventListener(this,x,y);break}if(f&&x.callback.handleEvent===f){u.eventTarget_removeEventListener(this,x,y);break}}}},p.prototype.dispatchEvent=function(c){if(c._dispatchFlag||!c._initializedFlag)throw new o.InvalidStateError;return c._isTrusted=!1,u.event_dispatch(c,this)},p.prototype._getTheParent=function(c){return null},p}();r.EventTargetImpl=l},function(n,r,i){var a,o=this&&this.__extends||(a=function(p,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var v in h)h.hasOwnProperty(v)&&(f[v]=h[v])})(p,c)},function(p,c){function f(){this.constructor=p}a(p,c),p.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(34),u=i(0),l=function(p){function c(f){var h=p.call(this)||this;return h._data=f,h}return o(c,p),Object.defineProperty(c.prototype,"data",{get:function(){return this._data},set:function(f){u.characterData_replaceData(this,0,this._data.length,f)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"length",{get:function(){return this._data.length},enumerable:!0,configurable:!0}),c.prototype.substringData=function(f,h){return u.characterData_substringData(this,f,h)},c.prototype.appendData=function(f){return u.characterData_replaceData(this,this._data.length,0,f)},c.prototype.insertData=function(f,h){u.characterData_replaceData(this,f,0,h)},c.prototype.deleteData=function(f,h){u.characterData_replaceData(this,f,h,"")},c.prototype.replaceData=function(f,h,v){u.characterData_replaceData(this,f,h,v)},Object.defineProperty(c.prototype,"previousElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"nextElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),c.prototype.before=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];throw new Error("Mixin: ChildNode not implemented.")},c.prototype.after=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];throw new Error("Mixin: ChildNode not implemented.")},c.prototype.replaceWith=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];throw new Error("Mixin: ChildNode not implemented.")},c.prototype.remove=function(){throw new Error("Mixin: ChildNode not implemented.")},c}(s.NodeImpl);r.CharacterDataImpl=l},function(n,r,i){var a=this&&this.__values||function(m){var g=typeof Symbol=="function"&&Symbol.iterator,d=g&&m[g],S=0;if(d)return d.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&S>=m.length&&(m=void 0),{value:m&&m[S++],done:!m}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(m,g){var d=typeof Symbol=="function"&&m[Symbol.iterator];if(!d)return m;var S,T,C=d.call(m),w=[];try{for(;(g===void 0||g-- >0)&&!(S=C.next()).done;)w.push(S.value)}catch(_){T={error:_}}finally{try{S&&!S.done&&(d=C.return)&&d.call(C)}finally{if(T)throw T.error}}return w},s=this&&this.__spread||function(){for(var m=[],g=0;g<arguments.length;g++)m=m.concat(o(arguments[g]));return m};Object.defineProperty(r,"__esModule",{value:!0});var u=i(6),l=i(3),p=i(1),c=i(17),f=i(51);function h(m){u.dom.window._signalSlots.add(m),f.observer_queueAMutationObserverMicrotask()}function v(m,g){g===void 0&&(g=!1);var d=l.Cast.asNode(m)._parent;if(d===null)return null;var S=d._shadowRoot||null;if(S===null||g&&S._mode!=="open")return null;for(var T=c.tree_getFirstDescendantNode(S,!1,!0,function(C){return l.Guard.isSlot(C)});T!==null;){if(T._name===m._name)return T;T=c.tree_getNextDescendantNode(S,T,!1,!0,function(C){return l.Guard.isSlot(C)})}return null}function y(m){var g,d,S=[],T=c.tree_rootNode(m);if(!l.Guard.isShadowRoot(T))return S;var C=T._host;try{for(var w=a(C._children),_=w.next();!_.done;_=w.next()){var E=_.value;l.Guard.isSlotable(E)&&v(E)===m&&S.push(E)}}catch(D){g={error:D}}finally{try{_&&!_.done&&(d=w.return)&&d.call(w)}finally{if(g)throw g.error}}return S}function x(m){var g,d,S=y(m);if(S.length===m._assignedNodes.length){for(var T=!0,C=0;C<S.length;C++)if(S[C]!==m._assignedNodes[C]){T=!1;break}T||h(m)}m._assignedNodes=S;try{for(var w=a(S),_=w.next();!_.done;_=w.next())_.value._assignedSlot=m}catch(E){g={error:E}}finally{try{_&&!_.done&&(d=w.return)&&d.call(w)}finally{if(g)throw g.error}}}r.shadowTree_signalASlotChange=h,r.shadowTree_isConnected=function(m){return l.Guard.isDocumentNode(c.tree_rootNode(m,!0))},r.shadowTree_isAssigned=function(m){return m._assignedSlot!==null},r.shadowTree_findASlot=v,r.shadowTree_findSlotables=y,r.shadowTree_findFlattenedSlotables=function m(g){var d,S,T,C,w=[],_=c.tree_rootNode(g);if(!l.Guard.isShadowRoot(_))return w;var E=y(g);if(p.isEmpty(E))try{for(var D=a(g._children),O=D.next();!O.done;O=D.next()){var N=O.value;l.Guard.isSlotable(N)&&E.push(N)}}catch(j){d={error:j}}finally{try{O&&!O.done&&(S=D.return)&&S.call(D)}finally{if(d)throw d.error}}try{for(var R=a(E),M=R.next();!M.done;M=R.next()){var A=M.value;if(l.Guard.isSlot(A)&&l.Guard.isShadowRoot(c.tree_rootNode(A))){var G=m(A);w.push.apply(w,s(G))}else w.push(A)}}catch(j){T={error:j}}finally{try{M&&!M.done&&(C=R.return)&&C.call(R)}finally{if(T)throw T.error}}return w},r.shadowTree_assignSlotables=x,r.shadowTree_assignSlotablesForATree=function(m){for(var g=c.tree_getFirstDescendantNode(m,!0,!1,function(d){return l.Guard.isSlot(d)});g!==null;)x(g),g=c.tree_getNextDescendantNode(m,g,!0,!1,function(d){return l.Guard.isSlot(d)})},r.shadowTree_assignASlot=function(m){var g=v(m);g!==null&&x(g)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=/[a-z]([\0-\t\x2D\._a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*-([\0-\t\x2D\._a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*/,o=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]),s=new Set(["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"]),u=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),l=new Set(["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"]);r.customElement_isValidCustomElementName=function(p){return!!a.test(p)&&!o.has(p)},r.customElement_isValidElementName=function(p){return s.has(p)},r.customElement_isVoidElementName=function(p){return u.has(p)},r.customElement_isValidShadowHostName=function(p){return l.has(p)},r.customElement_enqueueACustomElementUpgradeReaction=function(p,c){},r.customElement_enqueueACustomElementCallbackReaction=function(p,c,f){},r.customElement_upgrade=function(p,c){},r.customElement_tryToUpgrade=function(p){},r.customElement_lookUpACustomElementDefinition=function(p,c,f,h){return null}},function(n,r,i){i(4)({target:"String",proto:!0},{repeat:i(259)})},function(n,r,i){i(278),i(68),i(179),i(94),Object.defineProperty(r,"__esModule",{value:!0});var a=i(109),o=function(){function s(u){this._builderOptions=u,u.parser&&Object.assign(this,u.parser)}return s.prototype._docType=function(u,l,p,c){return u.dtd({name:l,pubID:p,sysID:c})},s.prototype._comment=function(u,l){return u.com(l)},s.prototype._text=function(u,l){return u.txt(l)},s.prototype._instruction=function(u,l,p){return u.ins(l,p)},s.prototype._cdata=function(u,l){return u.dat(l)},s.prototype._element=function(u,l,p){return l===void 0?u.ele(p):u.ele(l,p)},s.prototype._attribute=function(u,l,p,c){return l===void 0?u.att(p,c):u.att(l,p,c)},s.prototype._sanitize=function(u){return a.sanitizeInput(u,this._builderOptions.invalidCharReplacement)},s.prototype._decodeText=function(u){return u==null?u:u.replace(/&(quot|amp|apos|lt|gt);/g,function(l,p){return s._entityTable[p]}).replace(/&#(?:x([a-fA-F0-9]+)|([0-9]+));/g,function(l,p,c){return String.fromCodePoint(parseInt(p||c,p?16:10))})},s.prototype._decodeAttributeValue=function(u){return this._decodeText(u)},s.prototype.parse=function(u,l){return this._parse(u,l)},s.prototype.docType=function(u,l,p,c){return this._docType(u,l,p,c)},s.prototype.comment=function(u,l){return this._comment(u,l)},s.prototype.text=function(u,l){return this._text(u,l)},s.prototype.instruction=function(u,l,p){return this._instruction(u,l,p)},s.prototype.cdata=function(u,l){return this._cdata(u,l)},s.prototype.element=function(u,l,p){return this._element(u,l,p)},s.prototype.attribute=function(u,l,p,c){return this._attribute(u,l,p,c)},s.prototype.sanitize=function(u){return this._sanitize(u)},s._entityTable={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},s}();r.BaseReader=o},function(n,r,i){var a=i(39);n.exports=a.DEFAULT=new a({include:[i(54)],explicit:[i(299),i(300),i(301)]})},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(185);r.XMLBuilderImpl=a.XMLBuilderImpl;var o=i(304);r.XMLBuilderCBImpl=o.XMLBuilderCBImpl;var s=i(183);r.builder=s.builder,r.create=s.create,r.fragment=s.fragment,r.convert=s.convert;var u=i(309);r.createCB=u.createCB,r.fragmentCB=u.fragmentCB},function(n,r){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}n.exports=i},function(n,r,i){var a={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,s=o&&!a.call({1:2},1);r.f=s?function(u){var l=o(this,u);return!!l&&l.enumerable}:a},function(n,r,i){var a=i(11),o=i(21);n.exports=function(s,u){try{o(a,s,u)}catch{a[s]=u}return u}},function(n,r,i){var a=i(44),o=i(118);(n.exports=function(s,u){return o[s]||(o[s]=u!==void 0?u:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(n,r,i){var a=i(121),o=i(84).concat("length","prototype");r.f=Object.getOwnPropertyNames||function(s){return a(s,o)}},function(n,r,i){var a=i(47),o=Math.max,s=Math.min;n.exports=function(u,l){var p=a(u);return p<0?o(p+l,0):s(p,l)}},function(n,r){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,r){r.f=Object.getOwnPropertySymbols},function(n,r,i){var a=i(8);n.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},function(n,r,i){var a=i(127);n.exports=function(o,s,u){if(a(o),s===void 0)return o;switch(u){case 0:return function(){return o.call(s)};case 1:return function(l){return o.call(s,l)};case 2:return function(l,p){return o.call(s,l,p)};case 3:return function(l,p,c){return o.call(s,l,p,c)}}return function(){return o.apply(s,arguments)}}},function(n,r,i){var a=i(4),o=i(195),s=i(132),u=i(133),l=i(62),p=i(21),c=i(25),f=i(5),h=i(44),v=i(49),y=i(131),x=y.IteratorPrototype,m=y.BUGGY_SAFARI_ITERATORS,g=f("iterator"),d=function(){return this};n.exports=function(S,T,C,w,_,E,D){o(C,T,w);var O,N,R,M=function($){if($===_&&F)return F;if(!m&&$ in j)return j[$];switch($){case"keys":case"values":case"entries":return function(){return new C(this,$)}}return function(){return new C(this)}},A=T+" Iterator",G=!1,j=S.prototype,k=j[g]||j["@@iterator"]||_&&j[_],F=!m&&k||M(_),B=T=="Array"&&j.entries||k;if(B&&(O=s(B.call(new S)),x!==Object.prototype&&O.next&&(h||s(O)===x||(u?u(O,x):typeof O[g]!="function"&&p(O,g,d)),l(O,A,!0,!0),h&&(v[A]=d))),_=="values"&&k&&k.name!=="values"&&(G=!0,F=function(){return k.call(this)}),h&&!D||j[g]===F||p(j,g,F),v[T]=F,_)if(N={values:M("values"),keys:E?F:M("keys"),entries:M("entries")},D)for(R in N)(m||G||!(R in j))&&c(j,R,N[R]);else a({target:T,proto:!0,forced:m||G},N);return N}},function(n,r,i){var a=i(4),o=i(13),s=i(59),u=i(83),l=i(26),p=i(24),c=i(134),f=i(5),h=i(63),v=i(28),y=h("slice"),x=v("slice",{ACCESSORS:!0,0:0,1:2}),m=f("species"),g=[].slice,d=Math.max;a({target:"Array",proto:!0,forced:!y||!x},{slice:function(S,T){var C,w,_,E=p(this),D=l(E.length),O=u(S,D),N=u(T===void 0?D:T,D);if(s(E)&&(typeof(C=E.constructor)!="function"||C!==Array&&!s(C.prototype)?o(C)&&(C=C[m])===null&&(C=void 0):C=void 0,C===Array||C===void 0))return g.call(E,O,N);for(w=new(C===void 0?Array:C)(d(N-O,0)),_=0;O<N;O++,_++)O in E&&c(w,_,E[O]);return w.length=_,w}})},function(n,r,i){var a={};a[i(5)("toStringTag")]="z",n.exports=String(a)==="[object z]"},function(n,r,i){i(19),i(138),i(20),i(92),i(22),i(23),Object.defineProperty(r,"__esModule",{value:!0}),r.DefaultBuilderOptions={version:"1.0",encoding:void 0,standalone:void 0,keepNullNodes:!1,keepNullAttributes:!1,ignoreConverters:!1,convert:{att:"@",ins:"?",text:"#",cdata:"$",comment:"!"},defaultNamespace:{ele:void 0,att:void 0},namespaceAlias:{html:"http://www.w3.org/1999/xhtml",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},invalidCharReplacement:void 0,parser:void 0},r.XMLBuilderOptionKeys=new Set(Object.keys(r.DefaultBuilderOptions)),r.DefaultXMLBuilderCBOptions={format:"xml",wellFormed:!1,prettyPrint:!1,indent:"  ",newline:`
`,offset:0,width:0,allowEmptyTags:!1,spaceBeforeSlash:!1,keepNullNodes:!1,keepNullAttributes:!1,ignoreConverters:!1,convert:{att:"@",ins:"?",text:"#",cdata:"$",comment:"!"},defaultNamespace:{ele:void 0,att:void 0},namespaceAlias:{html:"http://www.w3.org/1999/xhtml",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"}}},function(n,r,i){var a=i(139),o=i(143);n.exports=a("Set",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},o)},function(n,r,i){var a,o,s=i(136),u=i(221),l=RegExp.prototype.exec,p=String.prototype.replace,c=l,f=(a=/a/,o=/b*/g,l.call(a,"a"),l.call(o,"a"),a.lastIndex!==0||o.lastIndex!==0),h=u.UNSUPPORTED_Y||u.BROKEN_CARET,v=/()??/.exec("")[1]!==void 0;(f||v||h)&&(c=function(y){var x,m,g,d,S=this,T=h&&S.sticky,C=s.call(S),w=S.source,_=0,E=y;return T&&((C=C.replace("y","")).indexOf("g")===-1&&(C+="g"),E=String(y).slice(S.lastIndex),S.lastIndex>0&&(!S.multiline||S.multiline&&y[S.lastIndex-1]!==`
`)&&(w="(?: "+w+")",E=" "+E,_++),m=new RegExp("^(?:"+w+")",C)),v&&(m=new RegExp("^"+w+"$(?!\\s)",C)),f&&(x=S.lastIndex),g=l.call(T?m:S,E),T?g?(g.input=g.input.slice(_),g[0]=g[0].slice(_),g.index=S.lastIndex,S.lastIndex+=g[0].length):S.lastIndex=0:f&&g&&(S.lastIndex=S.global?g.index+g[0].length:x),v&&g&&g.length>1&&p.call(g[0],m,function(){for(d=1;d<arguments.length-2;d++)arguments[d]===void 0&&(g[d]=void 0)}),g}),n.exports=c},function(n,r,i){var a=i(225),o=i(18),s=i(27),u=i(26),l=i(47),p=i(35),c=i(226),f=i(227),h=Math.max,v=Math.min,y=Math.floor,x=/\$([$&'`]|\d\d?|<[^>]*>)/g,m=/\$([$&'`]|\d\d?)/g;a("replace",2,function(g,d,S,T){var C=T.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,w=T.REPLACE_KEEPS_$0,_=C?"$":"$0";return[function(D,O){var N=p(this),R=D==null?void 0:D[g];return R!==void 0?R.call(D,N,O):d.call(String(N),D,O)},function(D,O){if(!C&&w||typeof O=="string"&&O.indexOf(_)===-1){var N=S(d,D,this,O);if(N.done)return N.value}var R=o(D),M=String(this),A=typeof O=="function";A||(O=String(O));var G=R.global;if(G){var j=R.unicode;R.lastIndex=0}for(var k=[];;){var F=f(R,M);if(F===null||(k.push(F),!G))break;String(F[0])===""&&(R.lastIndex=c(M,u(R.lastIndex),j))}for(var B,$="",H=0,X=0;X<k.length;X++){F=k[X];for(var J=String(F[0]),q=h(v(l(F.index),M.length),0),ee=[],re=1;re<F.length;re++)ee.push((B=F[re])===void 0?B:String(B));var ae=F.groups;if(A){var te=[J].concat(ee,q,M);ae!==void 0&&te.push(ae);var L=String(O.apply(void 0,te))}else L=E(J,M,q,ee,ae,O);q>=H&&($+=M.slice(H,q)+L,H=q+J.length)}return $+M.slice(H)}];function E(D,O,N,R,M,A){var G=N+D.length,j=R.length,k=m;return M!==void 0&&(M=s(M),k=x),d.call(A,k,function(F,B){var $;switch(B.charAt(0)){case"$":return"$";case"&":return D;case"`":return O.slice(0,N);case"'":return O.slice(G);case"<":$=M[B.slice(1,-1)];break;default:var H=+B;if(H===0)return F;if(H>j){var X=y(H/10);return X===0?F:X<=j?R[X-1]===void 0?B.charAt(1):R[X-1]+B.charAt(1):F}$=R[H-1]}return $===void 0?"":$})}})},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function o(){this._items={},this._nullItems=[]}return o.prototype.copy=function(){var s=new o;for(var u in this._items)s._items[u]=this._items[u].slice(0);return s._nullItems=this._nullItems.slice(0),s},o.prototype.get=function(s,u){var l=u===null?this._nullItems:this._items[u]||null;if(l===null)return null;for(var p=null,c=0;c<l.length;c++)if((p=l[c])===s)return p;return p},o.prototype.has=function(s,u){var l=u===null?this._nullItems:this._items[u]||null;return l!==null&&l.indexOf(s)!==-1},o.prototype.hasPrefix=function(s){if(this._nullItems.indexOf(s)!==-1)return!0;for(var u in this._items)if(this._items[u].indexOf(s)!==-1)return!0;return!1},o.prototype.set=function(s,u){var l=u===null?this._nullItems:this._items[u]||null;u!==null&&l===null?this._items[u]=[s]:l.push(s)},o}();r.NamespacePrefixMap=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.Surrogate=/[\uD800-\uDFFF]/,r.ScalarValue=/[\uD800-\uDFFF]/,r.NonCharacter=/[\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]/,r.ASCIICodePoint=/[\u0000-\u007F]/,r.ASCIITabOrNewLine=/[\t\n\r]/,r.ASCIIWhiteSpace=/[\t\n\f\r ]/,r.C0Control=/[\u0000-\u001F]/,r.C0ControlOrSpace=/[\u0000-\u001F ]/,r.Control=/[\u0000-\u001F\u007F-\u009F]/,r.ASCIIDigit=/[0-9]/,r.ASCIIUpperHexDigit=/[0-9A-F]/,r.ASCIILowerHexDigit=/[0-9a-f]/,r.ASCIIHexDigit=/[0-9A-Fa-f]/,r.ASCIIUpperAlpha=/[A-Z]/,r.ASCIILowerAlpha=/[a-z]/,r.ASCIIAlpha=/[A-Za-z]/,r.ASCIIAlphanumeric=/[0-9A-Za-z]/},function(n,r,i){var a=this&&this.__values||function(O){var N=typeof Symbol=="function"&&Symbol.iterator,R=N&&O[N],M=0;if(R)return R.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&M>=O.length&&(O=void 0),{value:O&&O[M++],done:!O}}};throw new TypeError(N?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(O,N){var R=typeof Symbol=="function"&&O[Symbol.iterator];if(!R)return O;var M,A,G=R.call(O),j=[];try{for(;(N===void 0||N-- >0)&&!(M=G.next()).done;)j.push(M.value)}catch(k){A={error:k}}finally{try{M&&!M.done&&(R=G.return)&&R.call(G)}finally{if(A)throw A.error}}return j},s=this&&this.__spread||function(){for(var O=[],N=0;N<arguments.length;N++)O=O.concat(o(arguments[N]));return O};Object.defineProperty(r,"__esModule",{value:!0});var u=i(6),l=i(2),p=i(3),c=i(171),f=i(104),h=i(9),v=i(17),y=i(72),x=i(30);function m(O,N){N===void 0&&(N=void 0),N===void 0&&(N=null);var R=g(O,N,new Date,{});return R._isTrusted=!0,R}function g(O,N,R,M){var A=new O("");return A._initializedFlag=!0,A._timeStamp=R.getTime(),Object.assign(A,M),u.dom.features.steps&&x.dom_runEventConstructingSteps(A),A}function d(O,N,R,M){var A,G,j,k;R===void 0&&(R=!1),M===void 0&&(M={value:!1});var F=!1;O._dispatchFlag=!0;var B=N;if(R){var $=N._associatedDocument;p.Guard.isDocumentNode($)&&(B=$)}var H=null,X=v.tree_retarget(O._relatedTarget,N);if(N!==X||N===O._relatedTarget){var J=[];try{for(var q=a(O._touchTargetList),ee=q.next();!ee.done;ee=q.next()){var re=ee.value;J.push(v.tree_retarget(re,N))}}catch(ue){A={error:ue}}finally{try{ee&&!ee.done&&(G=q.return)&&G.call(q)}finally{if(A)throw A.error}}S(O,N,B,X,J,!1);var ae=p.Guard.isMouseEvent(O)&&O._type==="click";ae&&N._activationBehavior!==void 0&&(H=N);for(var te=p.Guard.isSlotable(N)&&y.shadowTree_isAssigned(N)?N:null,L=!1,b=N._getTheParent(O);b!==null&&p.Guard.isNode(b);){if(te!==null){if(!p.Guard.isSlot(b))throw new Error("Parent node of a slotable should be a slot.");te=null;var U=v.tree_rootNode(b,!0);p.Guard.isShadowRoot(U)&&U._mode==="closed"&&(L=!0)}p.Guard.isSlotable(b)&&y.shadowTree_isAssigned(b)&&(te=b),X=v.tree_retarget(O._relatedTarget,b),J=[];try{for(var V=(j=void 0,a(O._touchTargetList)),I=V.next();!I.done;I=V.next())re=I.value,J.push(v.tree_retarget(re,b))}catch(ue){j={error:ue}}finally{try{I&&!I.done&&(k=V.return)&&k.call(V)}finally{if(j)throw j.error}}p.Guard.isWindow(b)||p.Guard.isNode(b)&&p.Guard.isNode(N)&&v.tree_isAncestorOf(v.tree_rootNode(N,!0),b,!0,!0)?(ae&&O._bubbles&&H===null&&b._activationBehavior&&(H=b),S(O,b,null,X,J,L)):b===X?b=null:(N=b,ae&&H===null&&N._activationBehavior&&(H=N),S(O,b,N,X,J,L)),b!==null&&(b=b._getTheParent(O)),L=!1}for(var z=null,W=O._path,Y=W.length-1;Y>=0;Y--)if((oe=W[Y]).shadowAdjustedTarget!==null){z=oe;break}if(z!==null)if(p.Guard.isNode(z.shadowAdjustedTarget)&&p.Guard.isShadowRoot(v.tree_rootNode(z.shadowAdjustedTarget,!0)))F=!0;else if(p.Guard.isNode(z.relatedTarget)&&p.Guard.isShadowRoot(v.tree_rootNode(z.relatedTarget,!0)))F=!0;else for(var ne=0;ne<z.touchTargetList.length;ne++){var oe=z.touchTargetList[ne];if(p.Guard.isNode(oe)&&p.Guard.isShadowRoot(v.tree_rootNode(oe,!0))){F=!0;break}}for(H!==null&&H._legacyPreActivationBehavior!==void 0&&H._legacyPreActivationBehavior(O),Y=W.length-1;Y>=0;Y--)(oe=W[Y]).shadowAdjustedTarget!==null?O._eventPhase=l.EventPhase.AtTarget:O._eventPhase=l.EventPhase.Capturing,T(oe,O,"capturing",M);for(Y=0;Y<W.length;Y++){if((oe=W[Y]).shadowAdjustedTarget!==null)O._eventPhase=l.EventPhase.AtTarget;else{if(!O._bubbles)continue;O._eventPhase=l.EventPhase.Bubbling}T(oe,O,"bubbling",M)}}return O._eventPhase=l.EventPhase.None,O._currentTarget=null,O._path=[],O._dispatchFlag=!1,O._stopPropagationFlag=!1,O._stopImmediatePropagationFlag=!1,F&&(O._target=null,O._relatedTarget=null,O._touchTargetList=[]),H!==null&&(O._canceledFlag||H._activationBehavior===void 0?H._legacyCanceledActivationBehavior!==void 0&&H._legacyCanceledActivationBehavior(O):H._activationBehavior(O)),!O._canceledFlag}function S(O,N,R,M,A,G){var j=!1;p.Guard.isNode(N)&&p.Guard.isShadowRoot(v.tree_rootNode(N))&&(j=!0);var k=!1;p.Guard.isShadowRoot(N)&&N._mode==="closed"&&(k=!0),O._path.push({invocationTarget:N,invocationTargetInShadowTree:j,shadowAdjustedTarget:R,relatedTarget:M,touchTargetList:A,rootOfClosedTree:k,slotInClosedTree:G})}function T(O,N,R,M){M===void 0&&(M={value:!1});for(var A=N._path,G=-1,j=0;j<A.length;j++)if(A[j]===O){G=j;break}if(G!==-1){var k=A[G];(k.shadowAdjustedTarget!==null||G>0&&(k=A[G-1]).shadowAdjustedTarget!==null)&&(N._target=k.shadowAdjustedTarget)}if(N._relatedTarget=O.relatedTarget,N._touchTargetList=O.touchTargetList,!N._stopPropagationFlag){N._currentTarget=O.invocationTarget;var F=N._currentTarget._eventListenerList,B=new(Array.bind.apply(Array,s([void 0],F)));if(!C(N,B,R,O,M)&&N._isTrusted){var $=N._type;$==="animationend"?N._type="webkitAnimationEnd":$==="animationiteration"?N._type="webkitAnimationIteration":$==="animationstart"?N._type="webkitAnimationStart":$==="transitionend"&&(N._type="webkitTransitionEnd"),C(N,B,R,O,M),N._type=$}}}function C(O,N,R,M,A){A===void 0&&(A={value:!1});for(var G=!1,j=0;j<N.length;j++){var k=N[j];if(!k.removed){if(O._type!==k.type||(G=!0,R==="capturing"&&!k.capture)||R==="bubbling"&&k.capture)continue;if(k.once&&O._currentTarget!==null){for(var F=O._currentTarget,B=-1,$=0;$<F._eventListenerList.length;$++)if(F._eventListenerList[$]===k){B=$;break}B!==-1&&F._eventListenerList.splice(B,1)}var H=void 0,X=void 0;p.Guard.isWindow(H)&&(X=H._currentEvent,M.invocationTargetInShadowTree===!1&&(H._currentEvent=O)),k.passive&&(O._inPassiveListenerFlag=!0);try{k.callback.handleEvent.call(O._currentTarget,O)}catch{A.value=!0}if(k.passive&&(O._inPassiveListenerFlag=!1),p.Guard.isWindow(H)&&(H._currentEvent=X),O._stopImmediatePropagationFlag)return G}}return G}function w(O,N){return null}function _(O,N){return null}function E(O,N){}function D(O,N){}r.event_setTheCanceledFlag=function(O){O._cancelable&&!O._inPassiveListenerFlag&&(O._canceledFlag=!0)},r.event_initialize=function(O,N,R,M){O._initializedFlag=!0,O._stopPropagationFlag=!1,O._stopImmediatePropagationFlag=!1,O._canceledFlag=!1,O._isTrusted=!1,O._target=null,O._type=N,O._bubbles=R,O._cancelable=M},r.event_createAnEvent=m,r.event_innerEventCreationSteps=g,r.event_dispatch=d,r.event_appendToAnEventPath=S,r.event_invoke=T,r.event_innerInvoke=C,r.event_fireAnEvent=function(O,N,R,M,A){R===void 0&&(R=f.EventImpl);var G=m(R);if(G._type=O,M)for(var j in M)G[j]=M[j];return d(G,N,A)},r.event_createLegacyEvent=function(O){var N=null;switch(O.toLowerCase()){case"beforeunloadevent":case"compositionevent":break;case"customevent":N=c.CustomEventImpl;break;case"devicemotionevent":case"deviceorientationevent":case"dragevent":break;case"event":case"events":N=f.EventImpl}if(N===null)throw new h.NotSupportedError("Event constructor not found for interface "+O+".");var R=new N("");return R._type="",R._timeStamp=new Date().getTime(),R._isTrusted=!1,R._initializedFlag=!1,R},r.event_getterEventHandlerIDLAttribute=function(O,N){return null},r.event_setterEventHandlerIDLAttribute=function(O,N,R){},r.event_determineTheTargetOfAnEventHandler=w,r.event_getTheCurrentValueOfAnEventHandler=_,r.event_activateAnEventHandler=E,r.event_deactivateAnEventHandler=D},function(n,r,i){var a,o=this&&this.__extends||(a=function(S,T){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,w){C.__proto__=w}||function(C,w){for(var _ in w)w.hasOwnProperty(_)&&(C[_]=w[_])})(S,T)},function(S,T){function C(){this.constructor=S}a(S,T),S.prototype=T===null?Object.create(T):(C.prototype=T.prototype,new C)}),s=this&&this.__values||function(S){var T=typeof Symbol=="function"&&Symbol.iterator,C=T&&S[T],w=0;if(C)return C.call(S);if(S&&typeof S.length=="number")return{next:function(){return S&&w>=S.length&&(S=void 0),{value:S&&S[w++],done:!S}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(S,T){var C=typeof Symbol=="function"&&S[Symbol.iterator];if(!C)return S;var w,_,E=C.call(S),D=[];try{for(;(T===void 0||T-- >0)&&!(w=E.next()).done;)D.push(w.value)}catch(O){_={error:O}}finally{try{w&&!w.done&&(C=E.return)&&C.call(E)}finally{if(_)throw _.error}}return D};Object.defineProperty(r,"__esModule",{value:!0});var l=i(6),p=i(2),c=i(9),f=i(34),h=i(3),v=i(1),y=i(7),x=i(152),m=i(0),g=i(12),d=function(S){function T(){var C=S.call(this)||this;return C._children=new Set,C._encoding={name:"UTF-8",labels:["unicode-1-1-utf-8","utf-8","utf8"]},C._contentType="application/xml",C._URL={scheme:"about",username:"",password:"",host:null,port:null,path:["blank"],query:null,fragment:null,_cannotBeABaseURLFlag:!0,_blobURLEntry:null},C._origin=null,C._type="xml",C._mode="no-quirks",C._documentElement=null,C._hasNamespaces=!1,C._nodeDocumentOverwrite=null,C}return o(T,S),Object.defineProperty(T.prototype,"_nodeDocument",{get:function(){return this._nodeDocumentOverwrite||this},set:function(C){this._nodeDocumentOverwrite=C},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"implementation",{get:function(){return this._implementation||(this._implementation=m.create_domImplementation(this))},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"URL",{get:function(){return x.urlSerializer(this._URL)},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"documentURI",{get:function(){return this.URL},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"origin",{get:function(){return"null"},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"compatMode",{get:function(){return this._mode==="quirks"?"BackCompat":"CSS1Compat"},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"characterSet",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"charset",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"inputEncoding",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"contentType",{get:function(){return this._contentType},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"doctype",{get:function(){var C,w;try{for(var _=s(this._children),E=_.next();!E.done;E=_.next()){var D=E.value;if(h.Guard.isDocumentTypeNode(D))return D}}catch(O){C={error:O}}finally{try{E&&!E.done&&(w=_.return)&&w.call(_)}finally{if(C)throw C.error}}return null},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"documentElement",{get:function(){return this._documentElement},enumerable:!0,configurable:!0}),T.prototype.getElementsByTagName=function(C){return m.node_listOfElementsWithQualifiedName(C,this)},T.prototype.getElementsByTagNameNS=function(C,w){return m.node_listOfElementsWithNamespace(C,w,this)},T.prototype.getElementsByClassName=function(C){return m.node_listOfElementsWithClassNames(C,this)},T.prototype.createElement=function(C,w){if(!m.xml_isName(C))throw new c.InvalidCharacterError;this._type==="html"&&(C=C.toLowerCase());var _=null;w!==void 0&&(_=v.isString(w)?w:w.is);var E=this._type==="html"||this._contentType==="application/xhtml+xml"?y.namespace.HTML:null;return m.element_createAnElement(this,C,E,null,_,!0)},T.prototype.createElementNS=function(C,w,_){return m.document_internalCreateElementNS(this,C,w,_)},T.prototype.createDocumentFragment=function(){return m.create_documentFragment(this)},T.prototype.createTextNode=function(C){return m.create_text(this,C)},T.prototype.createCDATASection=function(C){if(this._type==="html")throw new c.NotSupportedError;if(C.indexOf("]]>")!==-1)throw new c.InvalidCharacterError;return m.create_cdataSection(this,C)},T.prototype.createComment=function(C){return m.create_comment(this,C)},T.prototype.createProcessingInstruction=function(C,w){if(!m.xml_isName(C))throw new c.InvalidCharacterError;if(w.indexOf("?>")!==-1)throw new c.InvalidCharacterError;return m.create_processingInstruction(this,C,w)},T.prototype.importNode=function(C,w){if(w===void 0&&(w=!1),h.Guard.isDocumentNode(C)||h.Guard.isShadowRoot(C))throw new c.NotSupportedError;return m.node_clone(C,this,w)},T.prototype.adoptNode=function(C){if(h.Guard.isDocumentNode(C))throw new c.NotSupportedError;if(h.Guard.isShadowRoot(C))throw new c.HierarchyRequestError;return m.document_adopt(C,this),C},T.prototype.createAttribute=function(C){if(!m.xml_isName(C))throw new c.InvalidCharacterError;return this._type==="html"&&(C=C.toLowerCase()),m.create_attr(this,C)},T.prototype.createAttributeNS=function(C,w){var _=u(m.namespace_validateAndExtract(C,w),3),E=_[0],D=_[1],O=_[2],N=m.create_attr(this,O);return N._namespace=E,N._namespacePrefix=D,N},T.prototype.createEvent=function(C){return m.event_createLegacyEvent(C)},T.prototype.createRange=function(){var C=m.create_range();return C._start=[this,0],C._end=[this,0],C},T.prototype.createNodeIterator=function(C,w,_){w===void 0&&(w=p.WhatToShow.All),_===void 0&&(_=null);var E=m.create_nodeIterator(C,C,!0);return E._whatToShow=w,E._iteratorCollection=m.create_nodeList(C),v.isFunction(_)?(E._filter=m.create_nodeFilter(),E._filter.acceptNode=_):E._filter=_,E},T.prototype.createTreeWalker=function(C,w,_){w===void 0&&(w=p.WhatToShow.All),_===void 0&&(_=null);var E=m.create_treeWalker(C,C);return E._whatToShow=w,v.isFunction(_)?(E._filter=m.create_nodeFilter(),E._filter.acceptNode=_):E._filter=_,E},T.prototype._getTheParent=function(C){return C._type==="load"?null:l.dom.window},T.prototype.getElementById=function(C){throw new Error("Mixin: NonElementParentNode not implemented.")},Object.defineProperty(T.prototype,"children",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"firstElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"lastElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"childElementCount",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),T.prototype.prepend=function(){for(var C=[],w=0;w<arguments.length;w++)C[w]=arguments[w];throw new Error("Mixin: ParentNode not implemented.")},T.prototype.append=function(){for(var C=[],w=0;w<arguments.length;w++)C[w]=arguments[w];throw new Error("Mixin: ParentNode not implemented.")},T.prototype.querySelector=function(C){throw new Error("Mixin: ParentNode not implemented.")},T.prototype.querySelectorAll=function(C){throw new Error("Mixin: ParentNode not implemented.")},T}(f.NodeImpl);r.DocumentImpl=d,g.idl_defineConst(d.prototype,"_nodeType",p.NodeType.Document)},function(n,r,i){var a,o=this&&this.__extends||(a=function(x,m){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var S in d)d.hasOwnProperty(S)&&(g[S]=d[S])})(x,m)},function(x,m){function g(){this.constructor=x}a(x,m),x.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}),s=this&&this.__values||function(x){var m=typeof Symbol=="function"&&Symbol.iterator,g=m&&x[m],d=0;if(g)return g.call(x);if(x&&typeof x.length=="number")return{next:function(){return x&&d>=x.length&&(x=void 0),{value:x&&x[d++],done:!x}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(x,m){var g=typeof Symbol=="function"&&x[Symbol.iterator];if(!g)return x;var d,S,T=g.call(x),C=[];try{for(;(m===void 0||m-- >0)&&!(d=T.next()).done;)C.push(d.value)}catch(w){S={error:w}}finally{try{d&&!d.done&&(g=T.return)&&g.call(T)}finally{if(S)throw S.error}}return C};Object.defineProperty(r,"__esModule",{value:!0});var l=i(2),p=i(34),c=i(9),f=i(7),h=i(0),v=i(12),y=function(x){function m(){var g=x.call(this)||this;return g._children=new Set,g._namespace=null,g._namespacePrefix=null,g._localName="",g._customElementState="undefined",g._customElementDefinition=null,g._is=null,g._shadowRoot=null,g._attributeList=h.create_namedNodeMap(g),g._attributeChangeSteps=[],g._name="",g._assignedSlot=null,g}return o(m,x),Object.defineProperty(m.prototype,"namespaceURI",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"prefix",{get:function(){return this._namespacePrefix},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"localName",{get:function(){return this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"tagName",{get:function(){return this._htmlUppercasedQualifiedName},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"id",{get:function(){return h.element_getAnAttributeValue(this,"id")},set:function(g){h.element_setAnAttributeValue(this,"id",g)},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"className",{get:function(){return h.element_getAnAttributeValue(this,"class")},set:function(g){h.element_setAnAttributeValue(this,"class",g)},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"classList",{get:function(){var g=h.element_getAnAttributeByName("class",this);return g===null&&(g=h.create_attr(this._nodeDocument,"class")),h.create_domTokenList(this,g)},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"slot",{get:function(){return h.element_getAnAttributeValue(this,"slot")},set:function(g){h.element_setAnAttributeValue(this,"slot",g)},enumerable:!0,configurable:!0}),m.prototype.hasAttributes=function(){return this._attributeList.length!==0},Object.defineProperty(m.prototype,"attributes",{get:function(){return this._attributeList},enumerable:!0,configurable:!0}),m.prototype.getAttributeNames=function(){var g,d,S=[];try{for(var T=s(this._attributeList),C=T.next();!C.done;C=T.next()){var w=C.value;S.push(w._qualifiedName)}}catch(_){g={error:_}}finally{try{C&&!C.done&&(d=T.return)&&d.call(T)}finally{if(g)throw g.error}}return S},m.prototype.getAttribute=function(g){var d=h.element_getAnAttributeByName(g,this);return d?d._value:null},m.prototype.getAttributeNS=function(g,d){var S=h.element_getAnAttributeByNamespaceAndLocalName(g,d,this);return S?S._value:null},m.prototype.setAttribute=function(g,d){if(!h.xml_isName(g))throw new c.InvalidCharacterError;this._namespace===f.namespace.HTML&&this._nodeDocument._type==="html"&&(g=g.toLowerCase());for(var S=null,T=0;T<this._attributeList.length;T++){var C=this._attributeList[T];if(C._qualifiedName===g){S=C;break}}if(S===null)return(S=h.create_attr(this._nodeDocument,g))._value=d,void h.element_append(S,this);h.element_change(S,this,d)},m.prototype.setAttributeNS=function(g,d,S){var T=u(h.namespace_validateAndExtract(g,d),3),C=T[0],w=T[1],_=T[2];h.element_setAnAttributeValue(this,_,S,w,C)},m.prototype.removeAttribute=function(g){h.element_removeAnAttributeByName(g,this)},m.prototype.removeAttributeNS=function(g,d){h.element_removeAnAttributeByNamespaceAndLocalName(g,d,this)},m.prototype.hasAttribute=function(g){this._namespace===f.namespace.HTML&&this._nodeDocument._type==="html"&&(g=g.toLowerCase());for(var d=0;d<this._attributeList.length;d++)if(this._attributeList[d]._qualifiedName===g)return!0;return!1},m.prototype.toggleAttribute=function(g,d){if(!h.xml_isName(g))throw new c.InvalidCharacterError;this._namespace===f.namespace.HTML&&this._nodeDocument._type==="html"&&(g=g.toLowerCase());for(var S=null,T=0;T<this._attributeList.length;T++){var C=this._attributeList[T];if(C._qualifiedName===g){S=C;break}}return S===null?(d===void 0||d===!0)&&((S=h.create_attr(this._nodeDocument,g))._value="",h.element_append(S,this),!0):d!==void 0&&d!==!1||(h.element_removeAnAttributeByName(g,this),!1)},m.prototype.hasAttributeNS=function(g,d){for(var S=g||null,T=0;T<this._attributeList.length;T++){var C=this._attributeList[T];if(C._namespace===S&&C._localName===d)return!0}return!1},m.prototype.getAttributeNode=function(g){return h.element_getAnAttributeByName(g,this)},m.prototype.getAttributeNodeNS=function(g,d){return h.element_getAnAttributeByNamespaceAndLocalName(g,d,this)},m.prototype.setAttributeNode=function(g){return h.element_setAnAttribute(g,this)},m.prototype.setAttributeNodeNS=function(g){return h.element_setAnAttribute(g,this)},m.prototype.removeAttributeNode=function(g){for(var d=!1,S=0;S<this._attributeList.length;S++)if(this._attributeList[S]===g){d=!0;break}if(!d)throw new c.NotFoundError;return h.element_remove(g,this),g},m.prototype.attachShadow=function(g){if(this._namespace!==f.namespace.HTML)throw new c.NotSupportedError;if(!h.customElement_isValidCustomElementName(this._localName)&&!h.customElement_isValidShadowHostName(this._localName))throw new c.NotSupportedError;if(h.customElement_isValidCustomElementName(this._localName)||this._is!==null){var d=h.customElement_lookUpACustomElementDefinition(this._nodeDocument,this._namespace,this._localName,this._is);if(d!==null&&d.disableShadow===!0)throw new c.NotSupportedError}if(this._shadowRoot!==null)throw new c.NotSupportedError;var S=h.create_shadowRoot(this._nodeDocument,this);return S._mode=g.mode,this._shadowRoot=S,S},Object.defineProperty(m.prototype,"shadowRoot",{get:function(){var g=this._shadowRoot;return g===null||g.mode==="closed"?null:g},enumerable:!0,configurable:!0}),m.prototype.closest=function(g){throw new c.NotImplementedError},m.prototype.matches=function(g){throw new c.NotImplementedError},m.prototype.webkitMatchesSelector=function(g){return this.matches(g)},m.prototype.getElementsByTagName=function(g){return h.node_listOfElementsWithQualifiedName(g,this)},m.prototype.getElementsByTagNameNS=function(g,d){return h.node_listOfElementsWithNamespace(g,d,this)},m.prototype.getElementsByClassName=function(g){return h.node_listOfElementsWithClassNames(g,this)},m.prototype.insertAdjacentElement=function(g,d){return h.element_insertAdjacent(this,g,d)},m.prototype.insertAdjacentText=function(g,d){var S=h.create_text(this._nodeDocument,d);h.element_insertAdjacent(this,g,S)},Object.defineProperty(m.prototype,"_qualifiedName",{get:function(){return this._namespacePrefix?this._namespacePrefix+":"+this._localName:this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"_htmlUppercasedQualifiedName",{get:function(){var g=this._qualifiedName;return this._namespace===f.namespace.HTML&&this._nodeDocument._type==="html"&&(g=g.toUpperCase()),g},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"children",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"firstElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"lastElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"childElementCount",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),m.prototype.prepend=function(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];throw new Error("Mixin: ParentNode not implemented.")},m.prototype.append=function(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];throw new Error("Mixin: ParentNode not implemented.")},m.prototype.querySelector=function(g){throw new Error("Mixin: ParentNode not implemented.")},m.prototype.querySelectorAll=function(g){throw new Error("Mixin: ParentNode not implemented.")},Object.defineProperty(m.prototype,"previousElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"nextElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),m.prototype.before=function(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];throw new Error("Mixin: ChildNode not implemented.")},m.prototype.after=function(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];throw new Error("Mixin: ChildNode not implemented.")},m.prototype.replaceWith=function(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];throw new Error("Mixin: ChildNode not implemented.")},m.prototype.remove=function(){throw new Error("Mixin: ChildNode not implemented.")},Object.defineProperty(m.prototype,"assignedSlot",{get:function(){throw new Error("Mixin: Slotable not implemented.")},enumerable:!0,configurable:!0}),m._create=function(g,d,S,T){S===void 0&&(S=null),T===void 0&&(T=null);var C=new m;return C._localName=d,C._namespace=S,C._namespacePrefix=T,C._nodeDocument=g,C},m}(p.NodeImpl);r.ElementImpl=y,v.idl_defineConst(y.prototype,"_nodeType",l.NodeType.Element)},function(n,r,i){var a,o=this&&this.__extends||(a=function(c,f){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(c,f)},function(c,f){function h(){this.constructor=c}a(c,f),c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(2),u=i(34),l=i(12),p=function(c){function f(h){h===void 0&&(h=null);var v=c.call(this)||this;return v._children=new Set,v._host=h,v}return o(f,c),f.prototype.getElementById=function(h){throw new Error("Mixin: NonElementParentNode not implemented.")},Object.defineProperty(f.prototype,"children",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"firstElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"lastElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"childElementCount",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),f.prototype.prepend=function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];throw new Error("Mixin: ParentNode not implemented.")},f.prototype.append=function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];throw new Error("Mixin: ParentNode not implemented.")},f.prototype.querySelector=function(h){throw new Error("Mixin: ParentNode not implemented.")},f.prototype.querySelectorAll=function(h){throw new Error("Mixin: ParentNode not implemented.")},f._create=function(h,v){v===void 0&&(v=null);var y=new f(v);return y._nodeDocument=h,y},f}(u.NodeImpl);r.DocumentFragmentImpl=p,l.idl_defineConst(p.prototype,"_nodeType",s.NodeType.DocumentFragment)},function(n,r,i){var a,o=this&&this.__extends||(a=function(h,v){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,x){y.__proto__=x}||function(y,x){for(var m in x)x.hasOwnProperty(m)&&(y[m]=x[m])})(h,v)},function(h,v){function y(){this.constructor=h}a(h,v),h.prototype=v===null?Object.create(v):(y.prototype=v.prototype,new y)}),s=this&&this.__values||function(h){var v=typeof Symbol=="function"&&Symbol.iterator,y=v&&h[v],x=0;if(y)return y.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&x>=h.length&&(h=void 0),{value:h&&h[x++],done:!h}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var u=i(2),l=i(71),p=i(0),c=i(12),f=function(h){function v(y){y===void 0&&(y="");var x=h.call(this,y)||this;return x._name="",x._assignedSlot=null,x}return o(v,h),Object.defineProperty(v.prototype,"wholeText",{get:function(){var y,x,m="";try{for(var g=s(p.text_contiguousTextNodes(this,!0)),d=g.next();!d.done;d=g.next())m+=d.value._data}catch(S){y={error:S}}finally{try{d&&!d.done&&(x=g.return)&&x.call(g)}finally{if(y)throw y.error}}return m},enumerable:!0,configurable:!0}),v.prototype.splitText=function(y){return p.text_split(this,y)},Object.defineProperty(v.prototype,"assignedSlot",{get:function(){throw new Error("Mixin: Slotable not implemented.")},enumerable:!0,configurable:!0}),v._create=function(y,x){x===void 0&&(x="");var m=new v(x);return m._nodeDocument=y,m},v}(l.CharacterDataImpl);r.TextImpl=f,c.idl_defineConst(f.prototype,"_nodeType",u.NodeType.Text)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function o(){}return Object.defineProperty(o.prototype,"_startNode",{get:function(){return this._start[0]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_startOffset",{get:function(){return this._start[1]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_endNode",{get:function(){return this._end[0]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_endOffset",{get:function(){return this._end[1]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_collapsed",{get:function(){return this._start[0]===this._end[0]&&this._start[1]===this._end[1]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startContainer",{get:function(){return this._startNode},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startOffset",{get:function(){return this._startOffset},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endContainer",{get:function(){return this._endNode},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endOffset",{get:function(){return this._endOffset},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"collapsed",{get:function(){return this._collapsed},enumerable:!0,configurable:!0}),o}();r.AbstractRangeImpl=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(2),o=function(){function s(u){this._activeFlag=!1,this._root=u,this._whatToShow=a.WhatToShow.All,this._filter=null}return Object.defineProperty(s.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"whatToShow",{get:function(){return this._whatToShow},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"filter",{get:function(){return this._filter},enumerable:!0,configurable:!0}),s}();r.TraverserImpl=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(2),o=i(0),s=i(12),u=function(){function l(p,c){this._target=null,this._relatedTarget=null,this._touchTargetList=[],this._path=[],this._currentTarget=null,this._eventPhase=a.EventPhase.None,this._stopPropagationFlag=!1,this._stopImmediatePropagationFlag=!1,this._canceledFlag=!1,this._inPassiveListenerFlag=!1,this._composedFlag=!1,this._initializedFlag=!1,this._dispatchFlag=!1,this._isTrusted=!1,this._bubbles=!1,this._cancelable=!1,this._type=p,c&&(this._bubbles=c.bubbles||!1,this._cancelable=c.cancelable||!1,this._composedFlag=c.composed||!1),this._initializedFlag=!0,this._timeStamp=new Date().getTime()}return Object.defineProperty(l.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"srcElement",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0}),l.prototype.composedPath=function(){var p=[],c=this._path;if(c.length===0)return p;var f=this._currentTarget;if(f===null)throw new Error("Event currentTarget is null.");p.push(f);for(var h=0,v=0,y=c.length-1;y>=0;){if(c[y].rootOfClosedTree&&v++,c[y].invocationTarget===f){h=y;break}c[y].slotInClosedTree&&v--,y--}var x=v,m=v;for(y=h-1;y>=0;)c[y].rootOfClosedTree&&x++,x<=m&&p.unshift(c[y].invocationTarget),c[y].slotInClosedTree&&--x<m&&(m=x),y--;for(x=v,m=v,y=h+1;y<c.length;)c[y].slotInClosedTree&&x++,x<=m&&p.push(c[y].invocationTarget),c[y].rootOfClosedTree&&--x<m&&(m=x),y++;return p},Object.defineProperty(l.prototype,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0}),l.prototype.stopPropagation=function(){this._stopPropagationFlag=!0},Object.defineProperty(l.prototype,"cancelBubble",{get:function(){return this._stopPropagationFlag},set:function(p){p&&this.stopPropagation()},enumerable:!0,configurable:!0}),l.prototype.stopImmediatePropagation=function(){this._stopPropagationFlag=!0,this._stopImmediatePropagationFlag=!0},Object.defineProperty(l.prototype,"bubbles",{get:function(){return this._bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"cancelable",{get:function(){return this._cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"returnValue",{get:function(){return!this._canceledFlag},set:function(p){p||o.event_setTheCanceledFlag(this)},enumerable:!0,configurable:!0}),l.prototype.preventDefault=function(){o.event_setTheCanceledFlag(this)},Object.defineProperty(l.prototype,"defaultPrevented",{get:function(){return this._canceledFlag},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"composed",{get:function(){return this._composedFlag},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isTrusted",{get:function(){return this._isTrusted},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"timeStamp",{get:function(){return this._timeStamp},enumerable:!0,configurable:!0}),l.prototype.initEvent=function(p,c,f){c===void 0&&(c=!1),f===void 0&&(f=!1),this._dispatchFlag||o.event_initialize(this,p,c,f)},l.NONE=0,l.CAPTURING_PHASE=1,l.AT_TARGET=2,l.BUBBLING_PHASE=3,l}();r.EventImpl=u,s.idl_defineConst(u.prototype,"NONE",0),s.idl_defineConst(u.prototype,"CAPTURING_PHASE",1),s.idl_defineConst(u.prototype,"AT_TARGET",2),s.idl_defineConst(u.prototype,"BUBBLING_PHASE",3)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(2),o=i(9);r.traversal_filter=function(s,u){if(s._activeFlag)throw new o.InvalidStateError;var l=1<<u._nodeType-1;if(!(s.whatToShow&l))return a.FilterResult.Skip;if(!s.filter)return a.FilterResult.Accept;s._activeFlag=!0;var p=a.FilterResult.Reject;try{p=s.filter.acceptNode(u)}catch(c){throw s._activeFlag=!1,c}return s._activeFlag=!1,p}},function(n,r,i){var a=this&&this.__read||function(m,g){var d=typeof Symbol=="function"&&m[Symbol.iterator];if(!d)return m;var S,T,C=d.call(m),w=[];try{for(;(g===void 0||g-- >0)&&!(S=C.next()).done;)w.push(S.value)}catch(_){T={error:_}}finally{try{S&&!S.done&&(d=C.return)&&d.call(C)}finally{if(T)throw T.error}}return w},o=this&&this.__values||function(m){var g=typeof Symbol=="function"&&Symbol.iterator,d=g&&m[g],S=0;if(d)return d.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&S>=m.length&&(m=void 0),{value:m&&m[S++],done:!m}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=i(6),u=i(3),l=i(1),p=i(99),c=i(73),f=i(17),h=i(173),v=i(30),y=i(52),x=i(37);r.document_elementInterface=function(m,g){return p.ElementImpl},r.document_internalCreateElementNS=function(m,g,d,S){var T=a(h.namespace_validateAndExtract(g,d),3),C=T[0],w=T[1],_=T[2],E=null;return S!==void 0&&(E=l.isString(S)?S:S.is),y.element_createAnElement(m,_,C,w,E,!0)},r.document_adopt=function(m,g){var d,S;if(m._nodeDocument!==g||m._parent!==null){var T=m._nodeDocument;if(m._parent&&x.mutation_remove(m,m._parent),g!==T)for(var C=f.tree_getFirstDescendantNode(m,!0,!0);C!==null;){if(C._nodeDocument=g,u.Guard.isElementNode(C))try{for(var w=(d=void 0,o(C._attributeList._asArray())),_=w.next();!_.done;_=w.next())_.value._nodeDocument=g}catch(E){d={error:E}}finally{try{_&&!_.done&&(S=w.return)&&S.call(w)}finally{if(d)throw d.error}}s.dom.features.customElements&&u.Guard.isElementNode(C)&&C._customElementState==="custom"&&c.customElement_enqueueACustomElementCallbackReaction(C,"adoptedCallback",[T,g]),s.dom.features.steps&&v.dom_runAdoptingSteps(C,T),C=f.tree_getNextDescendantNode(m,C,!0,!0)}}}},function(n,r,i){var a=this&&this.__values||function(f){var h=typeof Symbol=="function"&&Symbol.iterator,v=h&&f[h],y=0;if(v)return v.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&y>=f.length&&(f=void 0),{value:f&&f[y++],done:!f}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=i(3),u=i(9),l=i(17),p=i(51),c=i(30);r.characterData_replaceData=function(f,h,v,y){var x,m,g=l.tree_nodeLength(f);if(h>g)throw new u.IndexSizeError("Offset exceeds character data length. Offset: "+h+", Length: "+g+", Node is "+f.nodeName+".");h+v>g&&(v=g-h),o.dom.features.mutationObservers&&p.observer_queueMutationRecord("characterData",f,null,null,f._data,[],[],null,null);var d=f._data.substring(0,h)+y+f._data.substring(h+v);f._data=d;try{for(var S=a(o.dom.rangeList),T=S.next();!T.done;T=S.next()){var C=T.value;C._start[0]===f&&C._start[1]>h&&C._start[1]<=h+v&&(C._start[1]=h),C._end[0]===f&&C._end[1]>h&&C._end[1]<=h+v&&(C._end[1]=h),C._start[0]===f&&C._start[1]>h+v&&(C._start[1]+=y.length-v),C._end[0]===f&&C._end[1]>h+v&&(C._end[1]+=y.length-v)}}catch(w){x={error:w}}finally{try{T&&!T.done&&(m=S.return)&&m.call(S)}finally{if(x)throw x.error}}o.dom.features.steps&&s.Guard.isTextNode(f)&&f._parent!==null&&c.dom_runChildTextContentChangeSteps(f._parent)},r.characterData_substringData=function(f,h,v){var y=l.tree_nodeLength(f);if(h>y)throw new u.IndexSizeError("Offset exceeds character data length. Offset: "+h+", Length: "+y+", Node is "+f.nodeName+".");return h+v>y?f._data.substr(h):f._data.substr(h,v)}},function(n,r,i){var a=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var v,y,x=h.call(c),m=[];try{for(;(f===void 0||f-- >0)&&!(v=x.next()).done;)m.push(v.value)}catch(g){y={error:g}}finally{try{v&&!v.done&&(h=x.return)&&h.call(x)}finally{if(y)throw y.error}}return m},o=this&&this.__spread||function(){for(var c=[],f=0;f<arguments.length;f++)c=c.concat(a(arguments[f]));return c},s=this&&this.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&c[f],v=0;if(h)return h.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&v>=c.length&&(c=void 0),{value:c&&c[v++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var u=i(7);function l(c){var f=u.string.splitAStringOnASCIIWhitespace(c);return new Set(f)}function p(c){return o(c).join(" ")}r.orderedSet_parse=l,r.orderedSet_serialize=p,r.orderedSet_sanitize=function(c){return p(l(c))},r.orderedSet_contains=function(c,f,h){var v,y,x,m;try{for(var g=s(f),d=g.next();!d.done;d=g.next()){var S=d.value,T=!1;try{for(var C=(x=void 0,s(c)),w=C.next();!w.done;w=C.next()){var _=w.value;if(h){if(_===S){T=!0;break}}else if(_.toUpperCase()===S.toUpperCase()){T=!0;break}}}catch(E){x={error:E}}finally{try{w&&!w.done&&(m=C.return)&&m.call(C)}finally{if(x)throw x.error}}if(!T)return!1}}catch(E){v={error:E}}finally{try{d&&!d.done&&(y=g.return)&&y.call(g)}finally{if(v)throw v.error}}return!0}},function(n,r,i){i(179),Object.defineProperty(r,"__esModule",{value:!0});var a=i(262),o=i(110),s=i(1);o.dom.setFeatures(!1),r.createDocument=function(){var u=new a.DOMImplementation().createDocument(null,"root",null);return u.documentElement&&u.removeChild(u.documentElement),u},r.sanitizeInput=function(u,l){if(u==null)return u;if(l===void 0)return u+"";var p="";u+="";for(var c=0;c<u.length;c++){var f=u.charCodeAt(c);if(f===9||f===10||f===13||f>=32&&f<=55295||f>=57344&&f<=65533)p+=u.charAt(c);else if(f>=55296&&f<=56319&&c<u.length-1){var h=u.charCodeAt(c+1);h>=56320&&h<=57343?(f=1024*(f-55296)+h-56320+65536,p+=String.fromCodePoint(f),c++):p+=s.isString(l)?l:l(u.charAt(c),c,u)}else p+=s.isString(l)?l:l(u.charAt(c),c,u)}return p}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(1),o=i(153);r.AbortController=o.AbortControllerImpl;var s=i(154);r.AbortSignal=s.AbortSignalImpl;var u=i(102);r.AbstractRange=u.AbstractRangeImpl;var l=i(157);r.Attr=l.AttrImpl;var p=i(158);r.CDATASection=p.CDATASectionImpl;var c=i(71);r.CharacterData=c.CharacterDataImpl;var f=i(263),h=i(159);r.Comment=h.CommentImpl;var v=i(171);r.CustomEvent=v.CustomEventImpl;var y=i(100);r.DocumentFragment=y.DocumentFragmentImpl;var x=i(98);r.Document=x.DocumentImpl;var m=i(264),g=i(155);r.DocumentType=g.DocumentTypeImpl;var d=i(6);r.dom=d.dom;var S=i(148);r.DOMImplementation=S.DOMImplementationImpl;var T=i(170);r.DOMTokenList=T.DOMTokenListImpl;var C=i(99);r.Element=C.ElementImpl;var w=i(104);r.Event=w.EventImpl;var _=i(70);r.EventTarget=_.EventTargetImpl;var E=i(161);r.HTMLCollection=E.HTMLCollectionImpl;var D=i(265);r.MutationObserver=D.MutationObserverImpl;var O=i(169);r.MutationRecord=O.MutationRecordImpl;var N=i(164);r.NamedNodeMap=N.NamedNodeMapImpl;var R=i(168);r.NodeFilter=R.NodeFilterImpl;var M=i(34);r.Node=M.NodeImpl;var A=i(166);r.NodeIterator=A.NodeIteratorImpl;var G=i(162);r.NodeList=G.NodeListImpl;var j=i(163);r.NodeListStatic=j.NodeListStaticImpl;var k=i(266),F=i(267),B=i(268),$=i(160);r.ProcessingInstruction=$.ProcessingInstructionImpl;var H=i(165);r.Range=H.RangeImpl;var X=i(156);r.ShadowRoot=X.ShadowRootImpl;var J=i(269),q=i(270);r.StaticRange=q.StaticRangeImpl;var ee=i(101);r.Text=ee.TextImpl;var re=i(103);r.Traverser=re.TraverserImpl;var ae=i(167);r.TreeWalker=ae.TreeWalkerImpl;var te=i(149);r.Window=te.WindowImpl;var L=i(151);r.XMLDocument=L.XMLDocumentImpl,a.applyMixin(C.ElementImpl,f.ChildNodeImpl),a.applyMixin(c.CharacterDataImpl,f.ChildNodeImpl),a.applyMixin(g.DocumentTypeImpl,f.ChildNodeImpl),a.applyMixin(x.DocumentImpl,m.DocumentOrShadowRootImpl),a.applyMixin(X.ShadowRootImpl,m.DocumentOrShadowRootImpl),a.applyMixin(C.ElementImpl,k.NonDocumentTypeChildNodeImpl),a.applyMixin(c.CharacterDataImpl,k.NonDocumentTypeChildNodeImpl),a.applyMixin(x.DocumentImpl,F.NonElementParentNodeImpl),a.applyMixin(y.DocumentFragmentImpl,F.NonElementParentNodeImpl),a.applyMixin(x.DocumentImpl,B.ParentNodeImpl),a.applyMixin(y.DocumentFragmentImpl,B.ParentNodeImpl),a.applyMixin(C.ElementImpl,B.ParentNodeImpl),a.applyMixin(ee.TextImpl,J.SlotableImpl),a.applyMixin(C.ElementImpl,J.SlotableImpl)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),function(a){a[a.EOF=0]="EOF",a[a.Declaration=1]="Declaration",a[a.DocType=2]="DocType",a[a.Element=3]="Element",a[a.Text=4]="Text",a[a.CDATA=5]="CDATA",a[a.PI=6]="PI",a[a.Comment=7]="Comment",a[a.ClosingTag=8]="ClosingTag"}(r.TokenType||(r.TokenType={}))},function(n,r,i){i(64),i(20),i(66);var a,o=this&&this.__extends||(a=function(l,p){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)f.hasOwnProperty(h)&&(c[h]=f[h])})(l,p)},function(l,p){function c(){this.constructor=l}a(l,p),l.prototype=p===null?Object.create(p):(c.prototype=p.prototype,new c)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),u=function(l){function p(){return l!==null&&l.apply(this,arguments)||this}return o(p,l),p.prototype._parse=function(c,f){var h=this,v=this._builderOptions,y=null;return s.isFunction(f)?y=this.parse(c,f.apply(this)):s.isArray(f)||s.isSet(f)?s.forEachArray(f,function(x){return y=h.parse(c,x)},this):s.isMap(f)||s.isObject(f)?s.forEachObject(f,function(x,m){if(s.isFunction(m)&&(m=m.apply(h)),v.ignoreConverters||x.indexOf(v.convert.att)!==0)if(v.ignoreConverters||x.indexOf(v.convert.text)!==0)if(v.ignoreConverters||x.indexOf(v.convert.cdata)!==0)if(v.ignoreConverters||x.indexOf(v.convert.comment)!==0)if(v.ignoreConverters||x.indexOf(v.convert.ins)!==0){if(!((s.isArray(m)||s.isSet(m))&&s.isEmpty(m))){if((s.isMap(m)||s.isObject(m))&&s.isEmpty(m))y=h.element(c,void 0,h.sanitize(x))||y;else if(v.keepNullNodes||m!=null)if(s.isArray(m)||s.isSet(m))s.forEachArray(m,function(C){var w={};w[x]=C,y=h.parse(c,w)},h);else if(s.isMap(m)||s.isObject(m))(g=h.element(c,void 0,h.sanitize(x)))&&(y=g,h.parse(g,m));else if(m!=null&&m!==""){var g;(g=h.element(c,void 0,h.sanitize(x)))&&(y=g,h.text(g,h._decodeText(h.sanitize(m))))}else y=h.element(c,void 0,h.sanitize(x))||y}}else if(s.isString(m)){var d=m.indexOf(" "),S=d===-1?m:m.substr(0,d),T=d===-1?"":m.substr(d+1);y=h.instruction(c,h.sanitize(S),h.sanitize(T))||y}else s.isArray(m)||s.isSet(m)?s.forEachArray(m,function(C){var w=C.indexOf(" "),_=w===-1?C:C.substr(0,w),E=w===-1?"":C.substr(w+1);y=h.instruction(c,h.sanitize(_),h.sanitize(E))||y},h):s.forEachObject(m,function(C,w){return y=h.instruction(c,h.sanitize(C),h.sanitize(w))||y},h);else s.isArray(m)||s.isSet(m)?s.forEachArray(m,function(C){return y=h.comment(c,h.sanitize(C))||y},h):y=h.comment(c,h.sanitize(m))||y;else s.isArray(m)||s.isSet(m)?s.forEachArray(m,function(C){return y=h.cdata(c,h.sanitize(C))||y},h):y=h.cdata(c,h.sanitize(m))||y;else y=s.isMap(m)||s.isObject(m)?h.parse(c,m):h.text(c,h._decodeText(h.sanitize(m)))||y;else if(x===v.convert.att){if(s.isArray(m)||s.isSet(m))throw new Error("Invalid attribute: "+m.toString()+". "+c._debugInfo());s.forEachObject(m,function(C,w){y=h.attribute(c,void 0,h.sanitize(C),h._decodeAttributeValue(h.sanitize(w)))||y})}else y=h.attribute(c,void 0,h.sanitize(x.substr(v.convert.att.length)),h._decodeAttributeValue(h.sanitize(m)))||y},this):(v.keepNullNodes||f!=null)&&(y=this.text(c,this._decodeText(this.sanitize(f)))||y),y||c},p}(i(75).BaseReader);r.ObjectReader=u},function(n,r,i){var a=i(39);n.exports=new a({explicit:[i(286),i(287),i(288)]})},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(o){this.level=0,this._builderOptions=o,this._writerOptions=o};r.BaseCBWriter=a},function(n,r,i){var a=i(16),o=i(8),s=i(116);n.exports=!a&&!o(function(){return Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a!=7})},function(n,r,i){var a=i(11),o=i(13),s=a.document,u=o(s)&&o(s.createElement);n.exports=function(l){return u?s.createElement(l):{}}},function(n,r,i){var a=i(118),o=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(s){return o.call(s)}),n.exports=a.inspectSource},function(n,r,i){var a=i(11),o=i(80),s=a["__core-js_shared__"]||o("__core-js_shared__",{});n.exports=s},function(n,r,i){var a=i(14),o=i(187),s=i(55),u=i(15);n.exports=function(l,p){for(var c=o(p),f=u.f,h=s.f,v=0;v<c.length;v++){var y=c[v];a(l,y)||f(l,y,h(p,y))}}},function(n,r,i){var a=i(11);n.exports=a},function(n,r,i){var a=i(14),o=i(24),s=i(122).indexOf,u=i(45);n.exports=function(l,p){var c,f=o(l),h=0,v=[];for(c in f)!a(u,c)&&a(f,c)&&v.push(c);for(;p.length>h;)a(f,c=p[h++])&&(~s(v,c)||v.push(c));return v}},function(n,r,i){var a=i(24),o=i(26),s=i(83),u=function(l){return function(p,c,f){var h,v=a(p),y=o(v.length),x=s(f,y);if(l&&c!=c){for(;y>x;)if((h=v[x++])!=h)return!0}else for(;y>x;x++)if((l||x in v)&&v[x]===c)return l||x||0;return!l&&-1}};n.exports={includes:u(!0),indexOf:u(!1)}},function(n,r,i){var a=i(8),o=/#|\.prototype\./,s=function(f,h){var v=l[u(f)];return v==c||v!=p&&(typeof h=="function"?a(h):!!h)},u=s.normalize=function(f){return String(f).replace(o,".").toLowerCase()},l=s.data={},p=s.NATIVE="N",c=s.POLYFILL="P";n.exports=s},function(n,r,i){var a=i(86);n.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(n,r,i){var a=i(5);r.f=a},function(n,r,i){var a=i(120),o=i(14),s=i(125),u=i(15).f;n.exports=function(l){var p=a.Symbol||(a.Symbol={});o(p,l)||u(p,l,{value:s.f(l)})}},function(n,r){n.exports=function(i){if(typeof i!="function")throw TypeError(String(i)+" is not a function");return i}},function(n,r,i){var a=i(13),o=i(59),s=i(5)("species");n.exports=function(u,l){var p;return o(u)&&(typeof(p=u.constructor)!="function"||p!==Array&&!o(p.prototype)?a(p)&&(p=p[s])===null&&(p=void 0):p=void 0),new(p===void 0?Array:p)(l===0?0:l)}},function(n,r,i){var a,o,s=i(11),u=i(193),l=s.process,p=l&&l.versions,c=p&&p.v8;c?o=(a=c.split("."))[0]+a[1]:u&&(!(a=u.match(/Edge\/(\d+)/))||a[1]>=74)&&(a=u.match(/Chrome\/(\d+)/))&&(o=a[1]),n.exports=o&&+o},function(n,r,i){var a=i(5),o=i(60),s=i(15),u=a("unscopables"),l=Array.prototype;l[u]==null&&s.f(l,u,{configurable:!0,value:o(null)}),n.exports=function(p){l[u][p]=!0}},function(n,r,i){var a,o,s,u=i(132),l=i(21),p=i(14),c=i(5),f=i(44),h=c("iterator"),v=!1;[].keys&&("next"in(s=[].keys())?(o=u(u(s)))!==Object.prototype&&(a=o):v=!0),a==null&&(a={}),f||p(a,h)||l(a,h,function(){return this}),n.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:v}},function(n,r,i){var a=i(14),o=i(27),s=i(57),u=i(196),l=s("IE_PROTO"),p=Object.prototype;n.exports=u?Object.getPrototypeOf:function(c){return c=o(c),a(c,l)?c[l]:typeof c.constructor=="function"&&c instanceof c.constructor?c.constructor.prototype:c instanceof Object?p:null}},function(n,r,i){var a=i(18),o=i(197);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var s,u=!1,l={};try{(s=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(l,[]),u=l instanceof Array}catch{}return function(p,c){return a(p),o(c),u?s.call(p,c):p.__proto__=c,p}}():void 0)},function(n,r,i){var a=i(56),o=i(15),s=i(40);n.exports=function(u,l,p){var c=a(l);c in u?o.f(u,c,s(0,p)):u[c]=p}},function(n,r,i){var a=i(90),o=i(42),s=i(5)("toStringTag"),u=o(function(){return arguments}())=="Arguments";n.exports=a?o:function(l){var p,c,f;return l===void 0?"Undefined":l===null?"Null":typeof(c=function(h,v){try{return h[v]}catch{}}(p=Object(l),s))=="string"?c:u?o(p):(f=o(p))=="Object"&&typeof p.callee=="function"?"Arguments":f}},function(n,r,i){var a=i(18);n.exports=function(){var o=a(this),s="";return o.global&&(s+="g"),o.ignoreCase&&(s+="i"),o.multiline&&(s+="m"),o.dotAll&&(s+="s"),o.unicode&&(s+="u"),o.sticky&&(s+="y"),s}},function(n,r,i){var a=i(47),o=i(35),s=function(u){return function(l,p){var c,f,h=String(o(l)),v=a(p),y=h.length;return v<0||v>=y?u?"":void 0:(c=h.charCodeAt(v))<55296||c>56319||v+1===y||(f=h.charCodeAt(v+1))<56320||f>57343?u?h.charAt(v):c:u?h.slice(v,v+2):f-56320+(c-55296<<10)+65536}};n.exports={codeAt:s(!1),charAt:s(!0)}},function(n,r,i){var a=i(4),o=i(27),s=i(61);a({target:"Object",stat:!0,forced:i(8)(function(){s(1)})},{keys:function(u){return s(o(u))}})},function(n,r,i){var a=i(4),o=i(11),s=i(123),u=i(25),l=i(140),p=i(141),c=i(142),f=i(13),h=i(8),v=i(208),y=i(62),x=i(209);n.exports=function(m,g,d){var S=m.indexOf("Map")!==-1,T=m.indexOf("Weak")!==-1,C=S?"set":"add",w=o[m],_=w&&w.prototype,E=w,D={},O=function(j){var k=_[j];u(_,j,j=="add"?function(F){return k.call(this,F===0?0:F),this}:j=="delete"?function(F){return!(T&&!f(F))&&k.call(this,F===0?0:F)}:j=="get"?function(F){return T&&!f(F)?void 0:k.call(this,F===0?0:F)}:j=="has"?function(F){return!(T&&!f(F))&&k.call(this,F===0?0:F)}:function(F,B){return k.call(this,F===0?0:F,B),this})};if(s(m,typeof w!="function"||!(T||_.forEach&&!h(function(){new w().entries().next()}))))E=d.getConstructor(g,m,S,C),l.REQUIRED=!0;else if(s(m,!0)){var N=new E,R=N[C](T?{}:-0,1)!=N,M=h(function(){N.has(1)}),A=v(function(j){new w(j)}),G=!T&&h(function(){for(var j=new w,k=5;k--;)j[C](k,k);return!j.has(-0)});A||((E=g(function(j,k){c(j,E,m);var F=x(new w,j,E);return k!=null&&p(k,F[C],F,S),F})).prototype=_,_.constructor=E),(M||G)&&(O("delete"),O("has"),S&&O("get")),(G||R)&&O(C),T&&_.clear&&delete _.clear}return D[m]=E,a({global:!0,forced:E!=w},D),y(E,m),T||d.setStrong(E,m,S),E}},function(n,r,i){var a=i(45),o=i(13),s=i(14),u=i(15).f,l=i(58),p=i(204),c=l("meta"),f=0,h=Object.isExtensible||function(){return!0},v=function(x){u(x,c,{value:{objectID:"O"+ ++f,weakData:{}}})},y=n.exports={REQUIRED:!1,fastKey:function(x,m){if(!o(x))return typeof x=="symbol"?x:(typeof x=="string"?"S":"P")+x;if(!s(x,c)){if(!h(x))return"F";if(!m)return"E";v(x)}return x[c].objectID},getWeakData:function(x,m){if(!s(x,c)){if(!h(x))return!0;if(!m)return!1;v(x)}return x[c].weakData},onFreeze:function(x){return p&&y.REQUIRED&&h(x)&&!s(x,c)&&v(x),x}};a[c]=!0},function(n,r,i){var a=i(18),o=i(205),s=i(26),u=i(87),l=i(206),p=i(207),c=function(f,h){this.stopped=f,this.result=h};(n.exports=function(f,h,v,y,x){var m,g,d,S,T,C,w,_=u(h,v,y?2:1);if(x)m=f;else{if(typeof(g=l(f))!="function")throw TypeError("Target is not iterable");if(o(g)){for(d=0,S=s(f.length);S>d;d++)if((T=y?_(a(w=f[d])[0],w[1]):_(f[d]))&&T instanceof c)return T;return new c(!1)}m=g.call(f)}for(C=m.next;!(w=C.call(m)).done;)if(typeof(T=p(m,_,w.value,y))=="object"&&T&&T instanceof c)return T;return new c(!1)}).stop=function(f){return new c(!0,f)}},function(n,r){n.exports=function(i,a,o){if(!(i instanceof a))throw TypeError("Incorrect "+(o?o+" ":"")+"invocation");return i}},function(n,r,i){var a=i(15).f,o=i(60),s=i(210),u=i(87),l=i(142),p=i(141),c=i(88),f=i(211),h=i(16),v=i(140).fastKey,y=i(43),x=y.set,m=y.getterFor;n.exports={getConstructor:function(g,d,S,T){var C=g(function(D,O){l(D,C,d),x(D,{type:d,index:o(null),first:void 0,last:void 0,size:0}),h||(D.size=0),O!=null&&p(O,D[T],D,S)}),w=m(d),_=function(D,O,N){var R,M,A=w(D),G=E(D,O);return G?G.value=N:(A.last=G={index:M=v(O,!0),key:O,value:N,previous:R=A.last,next:void 0,removed:!1},A.first||(A.first=G),R&&(R.next=G),h?A.size++:D.size++,M!=="F"&&(A.index[M]=G)),D},E=function(D,O){var N,R=w(D),M=v(O);if(M!=="F")return R.index[M];for(N=R.first;N;N=N.next)if(N.key==O)return N};return s(C.prototype,{clear:function(){for(var D=w(this),O=D.index,N=D.first;N;)N.removed=!0,N.previous&&(N.previous=N.previous.next=void 0),delete O[N.index],N=N.next;D.first=D.last=void 0,h?D.size=0:this.size=0},delete:function(D){var O=w(this),N=E(this,D);if(N){var R=N.next,M=N.previous;delete O.index[N.index],N.removed=!0,M&&(M.next=R),R&&(R.previous=M),O.first==N&&(O.first=R),O.last==N&&(O.last=M),h?O.size--:this.size--}return!!N},forEach:function(D){for(var O,N=w(this),R=u(D,arguments.length>1?arguments[1]:void 0,3);O=O?O.next:N.first;)for(R(O.value,O.key,this);O&&O.removed;)O=O.previous},has:function(D){return!!E(this,D)}}),s(C.prototype,S?{get:function(D){var O=E(this,D);return O&&O.value},set:function(D,O){return _(this,D===0?0:D,O)}}:{add:function(D){return _(this,D=D===0?0:D,D)}}),h&&a(C.prototype,"size",{get:function(){return w(this).size}}),C},setStrong:function(g,d,S){var T=d+" Iterator",C=m(d),w=m(T);c(g,d,function(_,E){x(this,{type:T,target:_,state:C(_),kind:E,last:void 0})},function(){for(var _=w(this),E=_.kind,D=_.last;D&&D.removed;)D=D.previous;return _.target&&(_.last=D=D?D.next:_.state.first)?E=="keys"?{value:D.key,done:!1}:E=="values"?{value:D.value,done:!1}:{value:[D.key,D.value],done:!1}:(_.target=void 0,{value:void 0,done:!0})},S?"entries":"values",!S,!0),f(d)}}},function(n,r,i){var a,o=i(4),s=i(55).f,u=i(26),l=i(222),p=i(35),c=i(224),f=i(44),h="".endsWith,v=Math.min,y=c("endsWith");o({target:"String",proto:!0,forced:!!(f||y||(a=s(String.prototype,"endsWith"),!a||a.writable))&&!y},{endsWith:function(x){var m=String(p(this));l(x);var g=arguments.length>1?arguments[1]:void 0,d=u(m.length),S=g===void 0?d:v(u(g),d),T=String(x);return h?h.call(m,T,S):m.slice(S-T.length,S)===T}})},function(n,r,i){(function(a){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var o=i(229),s=i(230),u=i(231);function l(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function p(L,b){if(l()<b)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(L=new Uint8Array(b)).__proto__=c.prototype:(L===null&&(L=new c(b)),L.length=b),L}function c(L,b,U){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(L,b,U);if(typeof L=="number"){if(typeof b=="string")throw new Error("If encoding is specified then the first argument must be a string");return v(this,L)}return f(this,L,b,U)}function f(L,b,U,V){if(typeof b=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&b instanceof ArrayBuffer?function(I,z,W,Y){if(z.byteLength,W<0||z.byteLength<W)throw new RangeError("'offset' is out of bounds");if(z.byteLength<W+(Y||0))throw new RangeError("'length' is out of bounds");return z=W===void 0&&Y===void 0?new Uint8Array(z):Y===void 0?new Uint8Array(z,W):new Uint8Array(z,W,Y),c.TYPED_ARRAY_SUPPORT?(I=z).__proto__=c.prototype:I=y(I,z),I}(L,b,U,V):typeof b=="string"?function(I,z,W){if(typeof W=="string"&&W!==""||(W="utf8"),!c.isEncoding(W))throw new TypeError('"encoding" must be a valid string encoding');var Y=0|m(z,W),ne=(I=p(I,Y)).write(z,W);return ne!==Y&&(I=I.slice(0,ne)),I}(L,b,U):function(I,z){if(c.isBuffer(z)){var W=0|x(z.length);return(I=p(I,W)).length===0||z.copy(I,0,0,W),I}if(z){if(typeof ArrayBuffer<"u"&&z.buffer instanceof ArrayBuffer||"length"in z)return typeof z.length!="number"||(Y=z.length)!=Y?p(I,0):y(I,z);if(z.type==="Buffer"&&u(z.data))return y(I,z.data)}var Y;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(L,b)}function h(L){if(typeof L!="number")throw new TypeError('"size" argument must be a number');if(L<0)throw new RangeError('"size" argument must not be negative')}function v(L,b){if(h(b),L=p(L,b<0?0:0|x(b)),!c.TYPED_ARRAY_SUPPORT)for(var U=0;U<b;++U)L[U]=0;return L}function y(L,b){var U=b.length<0?0:0|x(b.length);L=p(L,U);for(var V=0;V<U;V+=1)L[V]=255&b[V];return L}function x(L){if(L>=l())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l().toString(16)+" bytes");return 0|L}function m(L,b){if(c.isBuffer(L))return L.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(L)||L instanceof ArrayBuffer))return L.byteLength;typeof L!="string"&&(L=""+L);var U=L.length;if(U===0)return 0;for(var V=!1;;)switch(b){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":case void 0:return re(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*U;case"hex":return U>>>1;case"base64":return ae(L).length;default:if(V)return re(L).length;b=(""+b).toLowerCase(),V=!0}}function g(L,b,U){var V=!1;if((b===void 0||b<0)&&(b=0),b>this.length||((U===void 0||U>this.length)&&(U=this.length),U<=0)||(U>>>=0)<=(b>>>=0))return"";for(L||(L="utf8");;)switch(L){case"hex":return G(this,b,U);case"utf8":case"utf-8":return R(this,b,U);case"ascii":return M(this,b,U);case"latin1":case"binary":return A(this,b,U);case"base64":return N(this,b,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,b,U);default:if(V)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),V=!0}}function d(L,b,U){var V=L[b];L[b]=L[U],L[U]=V}function S(L,b,U,V,I){if(L.length===0)return-1;if(typeof U=="string"?(V=U,U=0):U>2147483647?U=2147483647:U<-2147483648&&(U=-2147483648),U=+U,isNaN(U)&&(U=I?0:L.length-1),U<0&&(U=L.length+U),U>=L.length){if(I)return-1;U=L.length-1}else if(U<0){if(!I)return-1;U=0}if(typeof b=="string"&&(b=c.from(b,V)),c.isBuffer(b))return b.length===0?-1:T(L,b,U,V,I);if(typeof b=="number")return b&=255,c.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?I?Uint8Array.prototype.indexOf.call(L,b,U):Uint8Array.prototype.lastIndexOf.call(L,b,U):T(L,[b],U,V,I);throw new TypeError("val must be string, number or Buffer")}function T(L,b,U,V,I){var z,W=1,Y=L.length,ne=b.length;if(V!==void 0&&((V=String(V).toLowerCase())==="ucs2"||V==="ucs-2"||V==="utf16le"||V==="utf-16le")){if(L.length<2||b.length<2)return-1;W=2,Y/=2,ne/=2,U/=2}function oe(je,Ne){return W===1?je[Ne]:je.readUInt16BE(Ne*W)}if(I){var ue=-1;for(z=U;z<Y;z++)if(oe(L,z)===oe(b,ue===-1?0:z-ue)){if(ue===-1&&(ue=z),z-ue+1===ne)return ue*W}else ue!==-1&&(z-=z-ue),ue=-1}else for(U+ne>Y&&(U=Y-ne),z=U;z>=0;z--){for(var Te=!0,me=0;me<ne;me++)if(oe(L,z+me)!==oe(b,me)){Te=!1;break}if(Te)return z}return-1}function C(L,b,U,V){U=Number(U)||0;var I=L.length-U;V?(V=Number(V))>I&&(V=I):V=I;var z=b.length;if(z%2!=0)throw new TypeError("Invalid hex string");V>z/2&&(V=z/2);for(var W=0;W<V;++W){var Y=parseInt(b.substr(2*W,2),16);if(isNaN(Y))return W;L[U+W]=Y}return W}function w(L,b,U,V){return te(re(b,L.length-U),L,U,V)}function _(L,b,U,V){return te(function(I){for(var z=[],W=0;W<I.length;++W)z.push(255&I.charCodeAt(W));return z}(b),L,U,V)}function E(L,b,U,V){return _(L,b,U,V)}function D(L,b,U,V){return te(ae(b),L,U,V)}function O(L,b,U,V){return te(function(I,z){for(var W,Y,ne,oe=[],ue=0;ue<I.length&&!((z-=2)<0);++ue)W=I.charCodeAt(ue),Y=W>>8,ne=W%256,oe.push(ne),oe.push(Y);return oe}(b,L.length-U),L,U,V)}function N(L,b,U){return b===0&&U===L.length?o.fromByteArray(L):o.fromByteArray(L.slice(b,U))}function R(L,b,U){U=Math.min(L.length,U);for(var V=[],I=b;I<U;){var z,W,Y,ne,oe=L[I],ue=null,Te=oe>239?4:oe>223?3:oe>191?2:1;if(I+Te<=U)switch(Te){case 1:oe<128&&(ue=oe);break;case 2:(192&(z=L[I+1]))==128&&(ne=(31&oe)<<6|63&z)>127&&(ue=ne);break;case 3:z=L[I+1],W=L[I+2],(192&z)==128&&(192&W)==128&&(ne=(15&oe)<<12|(63&z)<<6|63&W)>2047&&(ne<55296||ne>57343)&&(ue=ne);break;case 4:z=L[I+1],W=L[I+2],Y=L[I+3],(192&z)==128&&(192&W)==128&&(192&Y)==128&&(ne=(15&oe)<<18|(63&z)<<12|(63&W)<<6|63&Y)>65535&&ne<1114112&&(ue=ne)}ue===null?(ue=65533,Te=1):ue>65535&&(ue-=65536,V.push(ue>>>10&1023|55296),ue=56320|1023&ue),V.push(ue),I+=Te}return function(me){var je=me.length;if(je<=4096)return String.fromCharCode.apply(String,me);for(var Ne="",he=0;he<je;)Ne+=String.fromCharCode.apply(String,me.slice(he,he+=4096));return Ne}(V)}r.Buffer=c,r.SlowBuffer=function(L){return+L!=L&&(L=0),c.alloc(+L)},r.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=a.TYPED_ARRAY_SUPPORT!==void 0?a.TYPED_ARRAY_SUPPORT:function(){try{var L=new Uint8Array(1);return L.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},L.foo()===42&&typeof L.subarray=="function"&&L.subarray(1,1).byteLength===0}catch{return!1}}(),r.kMaxLength=l(),c.poolSize=8192,c._augment=function(L){return L.__proto__=c.prototype,L},c.from=function(L,b,U){return f(null,L,b,U)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(L,b,U){return function(V,I,z,W){return h(I),I<=0?p(V,I):z!==void 0?typeof W=="string"?p(V,I).fill(z,W):p(V,I).fill(z):p(V,I)}(null,L,b,U)},c.allocUnsafe=function(L){return v(null,L)},c.allocUnsafeSlow=function(L){return v(null,L)},c.isBuffer=function(L){return!(L==null||!L._isBuffer)},c.compare=function(L,b){if(!c.isBuffer(L)||!c.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(L===b)return 0;for(var U=L.length,V=b.length,I=0,z=Math.min(U,V);I<z;++I)if(L[I]!==b[I]){U=L[I],V=b[I];break}return U<V?-1:V<U?1:0},c.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(L,b){if(!u(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return c.alloc(0);var U;if(b===void 0)for(b=0,U=0;U<L.length;++U)b+=L[U].length;var V=c.allocUnsafe(b),I=0;for(U=0;U<L.length;++U){var z=L[U];if(!c.isBuffer(z))throw new TypeError('"list" argument must be an Array of Buffers');z.copy(V,I),I+=z.length}return V},c.byteLength=m,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var L=this.length;if(L%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<L;b+=2)d(this,b,b+1);return this},c.prototype.swap32=function(){var L=this.length;if(L%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<L;b+=4)d(this,b,b+3),d(this,b+1,b+2);return this},c.prototype.swap64=function(){var L=this.length;if(L%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<L;b+=8)d(this,b,b+7),d(this,b+1,b+6),d(this,b+2,b+5),d(this,b+3,b+4);return this},c.prototype.toString=function(){var L=0|this.length;return L===0?"":arguments.length===0?R(this,0,L):g.apply(this,arguments)},c.prototype.equals=function(L){if(!c.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L||c.compare(this,L)===0},c.prototype.inspect=function(){var L="",b=r.INSPECT_MAX_BYTES;return this.length>0&&(L=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(L+=" ... ")),"<Buffer "+L+">"},c.prototype.compare=function(L,b,U,V,I){if(!c.isBuffer(L))throw new TypeError("Argument must be a Buffer");if(b===void 0&&(b=0),U===void 0&&(U=L?L.length:0),V===void 0&&(V=0),I===void 0&&(I=this.length),b<0||U>L.length||V<0||I>this.length)throw new RangeError("out of range index");if(V>=I&&b>=U)return 0;if(V>=I)return-1;if(b>=U)return 1;if(this===L)return 0;for(var z=(I>>>=0)-(V>>>=0),W=(U>>>=0)-(b>>>=0),Y=Math.min(z,W),ne=this.slice(V,I),oe=L.slice(b,U),ue=0;ue<Y;++ue)if(ne[ue]!==oe[ue]){z=ne[ue],W=oe[ue];break}return z<W?-1:W<z?1:0},c.prototype.includes=function(L,b,U){return this.indexOf(L,b,U)!==-1},c.prototype.indexOf=function(L,b,U){return S(this,L,b,U,!0)},c.prototype.lastIndexOf=function(L,b,U){return S(this,L,b,U,!1)},c.prototype.write=function(L,b,U,V){if(b===void 0)V="utf8",U=this.length,b=0;else if(U===void 0&&typeof b=="string")V=b,U=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b|=0,isFinite(U)?(U|=0,V===void 0&&(V="utf8")):(V=U,U=void 0)}var I=this.length-b;if((U===void 0||U>I)&&(U=I),L.length>0&&(U<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");V||(V="utf8");for(var z=!1;;)switch(V){case"hex":return C(this,L,b,U);case"utf8":case"utf-8":return w(this,L,b,U);case"ascii":return _(this,L,b,U);case"latin1":case"binary":return E(this,L,b,U);case"base64":return D(this,L,b,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,L,b,U);default:if(z)throw new TypeError("Unknown encoding: "+V);V=(""+V).toLowerCase(),z=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(L,b,U){var V="";U=Math.min(L.length,U);for(var I=b;I<U;++I)V+=String.fromCharCode(127&L[I]);return V}function A(L,b,U){var V="";U=Math.min(L.length,U);for(var I=b;I<U;++I)V+=String.fromCharCode(L[I]);return V}function G(L,b,U){var V=L.length;(!b||b<0)&&(b=0),(!U||U<0||U>V)&&(U=V);for(var I="",z=b;z<U;++z)I+=ee(L[z]);return I}function j(L,b,U){for(var V=L.slice(b,U),I="",z=0;z<V.length;z+=2)I+=String.fromCharCode(V[z]+256*V[z+1]);return I}function k(L,b,U){if(L%1!=0||L<0)throw new RangeError("offset is not uint");if(L+b>U)throw new RangeError("Trying to access beyond buffer length")}function F(L,b,U,V,I,z){if(!c.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>I||b<z)throw new RangeError('"value" argument is out of bounds');if(U+V>L.length)throw new RangeError("Index out of range")}function B(L,b,U,V){b<0&&(b=65535+b+1);for(var I=0,z=Math.min(L.length-U,2);I<z;++I)L[U+I]=(b&255<<8*(V?I:1-I))>>>8*(V?I:1-I)}function $(L,b,U,V){b<0&&(b=4294967295+b+1);for(var I=0,z=Math.min(L.length-U,4);I<z;++I)L[U+I]=b>>>8*(V?I:3-I)&255}function H(L,b,U,V,I,z){if(U+V>L.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function X(L,b,U,V,I){return I||H(L,0,U,4),s.write(L,b,U,V,23,4),U+4}function J(L,b,U,V,I){return I||H(L,0,U,8),s.write(L,b,U,V,52,8),U+8}c.prototype.slice=function(L,b){var U,V=this.length;if((L=~~L)<0?(L+=V)<0&&(L=0):L>V&&(L=V),(b=b===void 0?V:~~b)<0?(b+=V)<0&&(b=0):b>V&&(b=V),b<L&&(b=L),c.TYPED_ARRAY_SUPPORT)(U=this.subarray(L,b)).__proto__=c.prototype;else{var I=b-L;U=new c(I,void 0);for(var z=0;z<I;++z)U[z]=this[z+L]}return U},c.prototype.readUIntLE=function(L,b,U){L|=0,b|=0,U||k(L,b,this.length);for(var V=this[L],I=1,z=0;++z<b&&(I*=256);)V+=this[L+z]*I;return V},c.prototype.readUIntBE=function(L,b,U){L|=0,b|=0,U||k(L,b,this.length);for(var V=this[L+--b],I=1;b>0&&(I*=256);)V+=this[L+--b]*I;return V},c.prototype.readUInt8=function(L,b){return b||k(L,1,this.length),this[L]},c.prototype.readUInt16LE=function(L,b){return b||k(L,2,this.length),this[L]|this[L+1]<<8},c.prototype.readUInt16BE=function(L,b){return b||k(L,2,this.length),this[L]<<8|this[L+1]},c.prototype.readUInt32LE=function(L,b){return b||k(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+16777216*this[L+3]},c.prototype.readUInt32BE=function(L,b){return b||k(L,4,this.length),16777216*this[L]+(this[L+1]<<16|this[L+2]<<8|this[L+3])},c.prototype.readIntLE=function(L,b,U){L|=0,b|=0,U||k(L,b,this.length);for(var V=this[L],I=1,z=0;++z<b&&(I*=256);)V+=this[L+z]*I;return V>=(I*=128)&&(V-=Math.pow(2,8*b)),V},c.prototype.readIntBE=function(L,b,U){L|=0,b|=0,U||k(L,b,this.length);for(var V=b,I=1,z=this[L+--V];V>0&&(I*=256);)z+=this[L+--V]*I;return z>=(I*=128)&&(z-=Math.pow(2,8*b)),z},c.prototype.readInt8=function(L,b){return b||k(L,1,this.length),128&this[L]?-1*(255-this[L]+1):this[L]},c.prototype.readInt16LE=function(L,b){b||k(L,2,this.length);var U=this[L]|this[L+1]<<8;return 32768&U?4294901760|U:U},c.prototype.readInt16BE=function(L,b){b||k(L,2,this.length);var U=this[L+1]|this[L]<<8;return 32768&U?4294901760|U:U},c.prototype.readInt32LE=function(L,b){return b||k(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},c.prototype.readInt32BE=function(L,b){return b||k(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},c.prototype.readFloatLE=function(L,b){return b||k(L,4,this.length),s.read(this,L,!0,23,4)},c.prototype.readFloatBE=function(L,b){return b||k(L,4,this.length),s.read(this,L,!1,23,4)},c.prototype.readDoubleLE=function(L,b){return b||k(L,8,this.length),s.read(this,L,!0,52,8)},c.prototype.readDoubleBE=function(L,b){return b||k(L,8,this.length),s.read(this,L,!1,52,8)},c.prototype.writeUIntLE=function(L,b,U,V){L=+L,b|=0,U|=0,V||F(this,L,b,U,Math.pow(2,8*U)-1,0);var I=1,z=0;for(this[b]=255&L;++z<U&&(I*=256);)this[b+z]=L/I&255;return b+U},c.prototype.writeUIntBE=function(L,b,U,V){L=+L,b|=0,U|=0,V||F(this,L,b,U,Math.pow(2,8*U)-1,0);var I=U-1,z=1;for(this[b+I]=255&L;--I>=0&&(z*=256);)this[b+I]=L/z&255;return b+U},c.prototype.writeUInt8=function(L,b,U){return L=+L,b|=0,U||F(this,L,b,1,255,0),c.TYPED_ARRAY_SUPPORT||(L=Math.floor(L)),this[b]=255&L,b+1},c.prototype.writeUInt16LE=function(L,b,U){return L=+L,b|=0,U||F(this,L,b,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[b]=255&L,this[b+1]=L>>>8):B(this,L,b,!0),b+2},c.prototype.writeUInt16BE=function(L,b,U){return L=+L,b|=0,U||F(this,L,b,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[b]=L>>>8,this[b+1]=255&L):B(this,L,b,!1),b+2},c.prototype.writeUInt32LE=function(L,b,U){return L=+L,b|=0,U||F(this,L,b,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[b+3]=L>>>24,this[b+2]=L>>>16,this[b+1]=L>>>8,this[b]=255&L):$(this,L,b,!0),b+4},c.prototype.writeUInt32BE=function(L,b,U){return L=+L,b|=0,U||F(this,L,b,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[b]=L>>>24,this[b+1]=L>>>16,this[b+2]=L>>>8,this[b+3]=255&L):$(this,L,b,!1),b+4},c.prototype.writeIntLE=function(L,b,U,V){if(L=+L,b|=0,!V){var I=Math.pow(2,8*U-1);F(this,L,b,U,I-1,-I)}var z=0,W=1,Y=0;for(this[b]=255&L;++z<U&&(W*=256);)L<0&&Y===0&&this[b+z-1]!==0&&(Y=1),this[b+z]=(L/W>>0)-Y&255;return b+U},c.prototype.writeIntBE=function(L,b,U,V){if(L=+L,b|=0,!V){var I=Math.pow(2,8*U-1);F(this,L,b,U,I-1,-I)}var z=U-1,W=1,Y=0;for(this[b+z]=255&L;--z>=0&&(W*=256);)L<0&&Y===0&&this[b+z+1]!==0&&(Y=1),this[b+z]=(L/W>>0)-Y&255;return b+U},c.prototype.writeInt8=function(L,b,U){return L=+L,b|=0,U||F(this,L,b,1,127,-128),c.TYPED_ARRAY_SUPPORT||(L=Math.floor(L)),L<0&&(L=255+L+1),this[b]=255&L,b+1},c.prototype.writeInt16LE=function(L,b,U){return L=+L,b|=0,U||F(this,L,b,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[b]=255&L,this[b+1]=L>>>8):B(this,L,b,!0),b+2},c.prototype.writeInt16BE=function(L,b,U){return L=+L,b|=0,U||F(this,L,b,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[b]=L>>>8,this[b+1]=255&L):B(this,L,b,!1),b+2},c.prototype.writeInt32LE=function(L,b,U){return L=+L,b|=0,U||F(this,L,b,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[b]=255&L,this[b+1]=L>>>8,this[b+2]=L>>>16,this[b+3]=L>>>24):$(this,L,b,!0),b+4},c.prototype.writeInt32BE=function(L,b,U){return L=+L,b|=0,U||F(this,L,b,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),c.TYPED_ARRAY_SUPPORT?(this[b]=L>>>24,this[b+1]=L>>>16,this[b+2]=L>>>8,this[b+3]=255&L):$(this,L,b,!1),b+4},c.prototype.writeFloatLE=function(L,b,U){return X(this,L,b,!0,U)},c.prototype.writeFloatBE=function(L,b,U){return X(this,L,b,!1,U)},c.prototype.writeDoubleLE=function(L,b,U){return J(this,L,b,!0,U)},c.prototype.writeDoubleBE=function(L,b,U){return J(this,L,b,!1,U)},c.prototype.copy=function(L,b,U,V){if(U||(U=0),V||V===0||(V=this.length),b>=L.length&&(b=L.length),b||(b=0),V>0&&V<U&&(V=U),V===U||L.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("sourceStart out of bounds");if(V<0)throw new RangeError("sourceEnd out of bounds");V>this.length&&(V=this.length),L.length-b<V-U&&(V=L.length-b+U);var I,z=V-U;if(this===L&&U<b&&b<V)for(I=z-1;I>=0;--I)L[I+b]=this[I+U];else if(z<1e3||!c.TYPED_ARRAY_SUPPORT)for(I=0;I<z;++I)L[I+b]=this[I+U];else Uint8Array.prototype.set.call(L,this.subarray(U,U+z),b);return z},c.prototype.fill=function(L,b,U,V){if(typeof L=="string"){if(typeof b=="string"?(V=b,b=0,U=this.length):typeof U=="string"&&(V=U,U=this.length),L.length===1){var I=L.charCodeAt(0);I<256&&(L=I)}if(V!==void 0&&typeof V!="string")throw new TypeError("encoding must be a string");if(typeof V=="string"&&!c.isEncoding(V))throw new TypeError("Unknown encoding: "+V)}else typeof L=="number"&&(L&=255);if(b<0||this.length<b||this.length<U)throw new RangeError("Out of range index");if(U<=b)return this;var z;if(b>>>=0,U=U===void 0?this.length:U>>>0,L||(L=0),typeof L=="number")for(z=b;z<U;++z)this[z]=L;else{var W=c.isBuffer(L)?L:re(new c(L,V).toString()),Y=W.length;for(z=0;z<U-b;++z)this[z+b]=W[z%Y]}return this};var q=/[^+\/0-9A-Za-z-_]/g;function ee(L){return L<16?"0"+L.toString(16):L.toString(16)}function re(L,b){var U;b=b||1/0;for(var V=L.length,I=null,z=[],W=0;W<V;++W){if((U=L.charCodeAt(W))>55295&&U<57344){if(!I){if(U>56319){(b-=3)>-1&&z.push(239,191,189);continue}if(W+1===V){(b-=3)>-1&&z.push(239,191,189);continue}I=U;continue}if(U<56320){(b-=3)>-1&&z.push(239,191,189),I=U;continue}U=65536+(I-55296<<10|U-56320)}else I&&(b-=3)>-1&&z.push(239,191,189);if(I=null,U<128){if((b-=1)<0)break;z.push(U)}else if(U<2048){if((b-=2)<0)break;z.push(U>>6|192,63&U|128)}else if(U<65536){if((b-=3)<0)break;z.push(U>>12|224,U>>6&63|128,63&U|128)}else{if(!(U<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;z.push(U>>18|240,U>>12&63|128,U>>6&63|128,63&U|128)}}return z}function ae(L){return o.toByteArray(function(b){if((b=function(U){return U.trim?U.trim():U.replace(/^\s+|\s+$/g,"")}(b).replace(q,"")).length<2)return"";for(;b.length%4!=0;)b+="=";return b}(L))}function te(L,b,U,V){for(var I=0;I<V&&!(I+U>=b.length||I>=L.length);++I)b[I+U]=L[I];return I}}).call(this,i(78))},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.isASCIIByte=function(a){return a>=0&&a<=127}},function(n,r,i){var a=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var p,c,f=l.call(s),h=[];try{for(;(u===void 0||u-- >0)&&!(p=f.next()).done;)h.push(p.value)}catch(v){c={error:v}}finally{try{p&&!p.done&&(l=f.return)&&l.call(f)}finally{if(c)throw c.error}}return h},o=this&&this.__spread||function(){for(var s=[],u=0;u<arguments.length;u++)s=s.concat(a(arguments[u]));return s};Object.defineProperty(r,"__esModule",{value:!0}),r.length=function(s){return s.length},r.byteLowercase=function(s){for(var u=0;u<s.length;u++){var l=s[u];l>=65&&l<=90&&(s[u]=l+32)}},r.byteUppercase=function(s){for(var u=0;u<s.length;u++){var l=s[u];l>=97&&l<=122&&(s[u]=l-32)}},r.byteCaseInsensitiveMatch=function(s,u){if(s.length!==u.length)return!1;for(var l=0;l<s.length;l++){var p=s[l],c=u[l];if(p>=65&&p<=90&&(p+=32),c>=65&&c<=90&&(c+=32),p!==c)return!1}return!0},r.startsWith=function(s,u){for(var l=0;;){if(l>=s.length)return!1;if(l>=u.length)return!0;if(s[l]!==u[l])return!1;l++}},r.byteLessThan=function(s,u){for(var l=0;;){if(l>=s.length)return!1;if(l>=u.length)return!0;var p=s[l],c=u[l];if(p<c)return!0;if(p>c)return!1;l++}},r.isomorphicDecode=function(s){return String.fromCodePoint.apply(String,o(s))}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(6),o=i(7),s=i(0),u=i(12),l=function(){function p(c){this._associatedDocument=c||a.dom.window.document}return p.prototype.createDocumentType=function(c,f,h){return s.namespace_validate(c),s.create_documentType(this._associatedDocument,c,f,h)},p.prototype.createDocument=function(c,f,h){h===void 0&&(h=null);var v=s.create_xmlDocument(),y=null;return f&&(y=s.document_internalCreateElementNS(v,c,f)),h&&v.appendChild(h),y&&v.appendChild(y),v._origin=this._associatedDocument._origin,c===o.namespace.HTML?v._contentType="application/xhtml+xml":c===o.namespace.SVG?v._contentType="image/svg+xml":v._contentType="application/xml",v},p.prototype.createHTMLDocument=function(c){var f=s.create_document();f._type="html",f._contentType="text/html",f.appendChild(s.create_documentType(f,"html","",""));var h=s.element_createAnElement(f,"html",o.namespace.HTML);f.appendChild(h);var v=s.element_createAnElement(f,"head",o.namespace.HTML);if(h.appendChild(v),c!==void 0){var y=s.element_createAnElement(f,"title",o.namespace.HTML);v.appendChild(y);var x=s.create_text(f,c);y.appendChild(x)}var m=s.element_createAnElement(f,"body",o.namespace.HTML);return h.appendChild(m),f._origin=this._associatedDocument._origin,f},p.prototype.hasFeature=function(){return!0},p._create=function(c){return new p(c)},p}();r.DOMImplementationImpl=l,u.idl_defineConst(l.prototype,"_ID","@oozcitak/dom")},function(n,r,i){var a,o=this&&this.__extends||(a=function(c,f){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(c,f)},function(c,f){function h(){this.constructor=c}a(c,f),c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(70),u=i(1),l=i(0),p=function(c){function f(){var h=c.call(this)||this;return h._signalSlots=new Set,h._mutationObserverMicrotaskQueued=!1,h._mutationObservers=new Set,h._iteratorList=new u.FixedSizeSet,h._associatedDocument=l.create_document(),h}return o(f,c),Object.defineProperty(f.prototype,"document",{get:function(){return this._associatedDocument},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"event",{get:function(){return this._currentEvent},enumerable:!0,configurable:!0}),f._create=function(){return new f},f}(s.EventTargetImpl);r.WindowImpl=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(2),o=function(){function s(){}return s.isNode=function(u){return!!u&&u._nodeType!==void 0},s.isDocumentNode=function(u){return s.isNode(u)&&u._nodeType===a.NodeType.Document},s.isDocumentTypeNode=function(u){return s.isNode(u)&&u._nodeType===a.NodeType.DocumentType},s.isDocumentFragmentNode=function(u){return s.isNode(u)&&u._nodeType===a.NodeType.DocumentFragment},s.isAttrNode=function(u){return s.isNode(u)&&u._nodeType===a.NodeType.Attribute},s.isCharacterDataNode=function(u){if(!s.isNode(u))return!1;var l=u._nodeType;return l===a.NodeType.Text||l===a.NodeType.ProcessingInstruction||l===a.NodeType.Comment||l===a.NodeType.CData},s.isTextNode=function(u){return s.isNode(u)&&(u._nodeType===a.NodeType.Text||u._nodeType===a.NodeType.CData)},s.isExclusiveTextNode=function(u){return s.isNode(u)&&u._nodeType===a.NodeType.Text},s.isCDATASectionNode=function(u){return s.isNode(u)&&u._nodeType===a.NodeType.CData},s.isCommentNode=function(u){return s.isNode(u)&&u._nodeType===a.NodeType.Comment},s.isProcessingInstructionNode=function(u){return s.isNode(u)&&u._nodeType===a.NodeType.ProcessingInstruction},s.isElementNode=function(u){return s.isNode(u)&&u._nodeType===a.NodeType.Element},s.isCustomElementNode=function(u){return s.isElementNode(u)&&u._customElementState==="custom"},s.isShadowRoot=function(u){return!!u&&u.host!==void 0},s.isMouseEvent=function(u){return!!u&&u.screenX!==void 0&&u.screenY!=null},s.isSlotable=function(u){return!!u&&u._name!==void 0&&u._assignedSlot!==void 0&&(s.isTextNode(u)||s.isElementNode(u))},s.isSlot=function(u){return!!u&&u._name!==void 0&&u._assignedNodes!==void 0&&s.isElementNode(u)},s.isWindow=function(u){return!!u&&u.navigator!==void 0},s.isEventListener=function(u){return!!u&&u.handleEvent!==void 0},s.isRegisteredObserver=function(u){return!!u&&u.observer!==void 0&&u.options!==void 0},s.isTransientRegisteredObserver=function(u){return!!u&&u.source!==void 0&&s.isRegisteredObserver(u)},s}();r.Guard=o},function(n,r,i){var a,o=this&&this.__extends||(a=function(u,l){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,c){p.__proto__=c}||function(p,c){for(var f in c)c.hasOwnProperty(f)&&(p[f]=c[f])})(u,l)},function(u,l){function p(){this.constructor=u}a(u,l),u.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(u){function l(){return u.call(this)||this}return o(l,u),l}(i(98).DocumentImpl);r.XMLDocumentImpl=s},function(n,r,i){var a=this&&this.__values||function(V){var I=typeof Symbol=="function"&&Symbol.iterator,z=I&&V[I],W=0;if(z)return z.call(V);if(V&&typeof V.length=="number")return{next:function(){return V&&W>=V.length&&(V=void 0),{value:V&&V[W++],done:!V}}};throw new TypeError(I?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(V,I){var z=typeof Symbol=="function"&&V[Symbol.iterator];if(!z)return V;var W,Y,ne=z.call(V),oe=[];try{for(;(I===void 0||I-- >0)&&!(W=ne.next()).done;)oe.push(W.value)}catch(ue){Y={error:ue}}finally{try{W&&!W.done&&(z=ne.return)&&z.call(ne)}finally{if(Y)throw Y.error}}return oe};Object.defineProperty(r,"__esModule",{value:!0});var s,u=i(1),l=i(243),p=i(7),c=i(244),f={ftp:21,file:null,http:80,https:443,ws:80,wss:443},h=/[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,v=/[ "<>`]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,y=/[ "<>`#?{}]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,x=/[ "<>`#?{}/:;=@\[\]\\\^\|]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,m=/[0-9A-Za-z!\$&-\/:;=\?@_~\xA0-\uD7FF\uE000-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB40-\uDB7E\uDB80-\uDBBE\uDBC0-\uDBFE][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDC00-\uDFFD]/,g=/[\0\t\f\r #%/:?@\[\\\]]/;function d(V){s!==void 0&&s.call(null,"Validation Error: "+V)}function S(){return{scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,_cannotBeABaseURLFlag:!1,_blobURLEntry:null}}function T(V){return V in f}function C(V){return T(V.scheme)}function w(V){return f[V]||null}function _(V){return V.username!==""||V.password!==""}function E(V,I){var z,W;I===void 0&&(I=!1);var Y=V.scheme+":";if(V.host!==null?(Y+="//",_(V)&&(Y+=V.username,V.password!==""&&(Y+=":"+V.password),Y+="@"),Y+=D(V.host),V.port!==null&&(Y+=":"+V.port)):V.host===null&&V.scheme==="file"&&(Y+="//"),V._cannotBeABaseURLFlag)Y+=V.path[0];else try{for(var ne=a(V.path),oe=ne.next();!oe.done;oe=ne.next())Y+="/"+oe.value}catch(ue){z={error:ue}}finally{try{oe&&!oe.done&&(W=ne.return)&&W.call(ne)}finally{if(z)throw z.error}}return V.query!==null&&(Y+="?"+V.query),I||V.fragment===null||(Y+="#"+V.fragment),Y}function D(V){return u.isNumber(V)?O(V):u.isArray(V)?"["+N(V)+"]":V}function O(V){for(var I="",z=V,W=1;W<=4;W++)I=(z%256).toString()+I,W!==4&&(I="."+I),z=Math.floor(z/256);return I}function N(V){for(var I="",z=null,W=-1,Y=0,ne=0,oe=0;oe<8;oe++)if(V[oe]===0){Y=1;for(var ue=oe+1;ue<8&&V[ue]===0;ue++)Y++;Y>ne&&(ne=Y,W=oe)}ne>1&&(z=W);for(var Te=!1,me=0;me<8;me++)Te&&V[me]===0||(Te&&(Te=!1),z!==me?(I+=V[me].toString(16),me!==7&&(I+=":")):(I+=me===0?"::":":",Te=!0));return I}function R(V,I,z,W,Y){var ne,oe,ue,Te;if(W===void 0){W={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,_cannotBeABaseURLFlag:!1,_blobURLEntry:null};var me=/^[\u0000-\u001F\u0020]+/,je=/[\u0000-\u001F\u0020]+$/;(me.test(V)||je.test(V))&&d("Input string contains leading or trailing control characters or space."),V=(V=V.replace(me,"")).replace(je,"")}var Ne=/[\u0009\u000A\u000D]/g;Ne.test(V)&&d("Input string contains tab or newline characters."),V=V.replace(Ne,"");var he=Y===void 0?l.ParserState.SchemeStart:Y;I===void 0&&(I=null);for(var Je=z===void 0||z==="replacement"||z==="UTF-16BE"||z==="UTF-16LE"?"UTF-8":z,K="",Ce=!1,we=!1,de=!1,Z=new u.StringWalker(V);;){switch(he){case l.ParserState.SchemeStart:if(p.codePoint.ASCIIAlpha.test(Z.c()))K+=Z.c().toLowerCase(),he=l.ParserState.Scheme;else{if(Y!==void 0)return d("Invalid scheme start character."),null;he=l.ParserState.NoScheme,Z.pointer--}break;case l.ParserState.Scheme:if(p.codePoint.ASCIIAlphanumeric.test(Z.c())||Z.c()==="+"||Z.c()==="-"||Z.c()===".")K+=Z.c().toLowerCase();else{if(Z.c()!==":"){if(Y===void 0){K="",he=l.ParserState.NoScheme,Z.pointer=0;continue}return d("Invalid input string."),null}if(Y!==void 0&&(T(W.scheme)&&!T(K)||!T(W.scheme)&&T(K)||(_(W)||W.port!==null)&&K==="file"||W.scheme==="file"&&(W.host===""||W.host===null)))return W;if(W.scheme=K,Y!==void 0)return W.port===w(W.scheme)&&(W.port=null),W;K="",W.scheme==="file"?(Z.remaining().startsWith("//")||d("Invalid file URL scheme, '//' expected."),he=l.ParserState.File):C(W)&&I!==null&&I.scheme===W.scheme?he=l.ParserState.SpecialRelativeOrAuthority:C(W)?he=l.ParserState.SpecialAuthoritySlashes:Z.remaining().startsWith("/")?(he=l.ParserState.PathOrAuthority,Z.pointer++):(W._cannotBeABaseURLFlag=!0,W.path.push(""),he=l.ParserState.CannotBeABaseURLPath)}break;case l.ParserState.NoScheme:if(I===null||I._cannotBeABaseURLFlag&&Z.c()!=="#")return d("Invalid input string."),null;I._cannotBeABaseURLFlag&&Z.c()==="#"?(W.scheme=I.scheme,W.path=p.list.clone(I.path),W.query=I.query,W.fragment="",W._cannotBeABaseURLFlag=!0,he=l.ParserState.Fragment):I.scheme!=="file"?(he=l.ParserState.Relative,Z.pointer--):(he=l.ParserState.File,Z.pointer--);break;case l.ParserState.SpecialRelativeOrAuthority:Z.c()==="/"&&Z.remaining().startsWith("/")?(he=l.ParserState.SpecialAuthorityIgnoreSlashes,Z.pointer++):(d("Invalid input string."),he=l.ParserState.Relative,Z.pointer--);break;case l.ParserState.PathOrAuthority:Z.c()==="/"?he=l.ParserState.Authority:(he=l.ParserState.Path,Z.pointer--);break;case l.ParserState.Relative:if(I===null)throw new Error("Invalid parser state. Base URL is null.");switch(W.scheme=I.scheme,Z.c()){case"":W.username=I.username,W.password=I.password,W.host=I.host,W.port=I.port,W.path=p.list.clone(I.path),W.query=I.query;break;case"/":he=l.ParserState.RelativeSlash;break;case"?":W.username=I.username,W.password=I.password,W.host=I.host,W.port=I.port,W.path=p.list.clone(I.path),W.query="",he=l.ParserState.Query;break;case"#":W.username=I.username,W.password=I.password,W.host=I.host,W.port=I.port,W.path=p.list.clone(I.path),W.query=I.query,W.fragment="",he=l.ParserState.Fragment;break;default:C(W)&&Z.c()==="\\"?(d("Invalid input string."),he=l.ParserState.RelativeSlash):(W.username=I.username,W.password=I.password,W.host=I.host,W.port=I.port,W.path=p.list.clone(I.path),W.path.length!==0&&W.path.splice(W.path.length-1,1),he=l.ParserState.Path,Z.pointer--)}break;case l.ParserState.RelativeSlash:if(!C(W)||Z.c()!=="/"&&Z.c()!=="\\")if(Z.c()==="/")he=l.ParserState.Authority;else{if(I===null)throw new Error("Invalid parser state. Base URL is null.");W.username=I.username,W.password=I.password,W.host=I.host,W.port=I.port,he=l.ParserState.Path,Z.pointer--}else Z.c()==="\\"&&d("Invalid input string."),he=l.ParserState.SpecialAuthorityIgnoreSlashes;break;case l.ParserState.SpecialAuthoritySlashes:Z.c()==="/"&&Z.remaining().startsWith("/")?(he=l.ParserState.SpecialAuthorityIgnoreSlashes,Z.pointer++):(d("Expected '//'."),he=l.ParserState.SpecialAuthorityIgnoreSlashes,Z.pointer--);break;case l.ParserState.SpecialAuthorityIgnoreSlashes:Z.c()!=="/"&&Z.c()!=="\\"?(he=l.ParserState.Authority,Z.pointer--):d("Unexpected '/' or '\\'.");break;case l.ParserState.Authority:if(Z.c()==="@"){d("Unexpected '@'."),Ce&&(K="%40"+K),Ce=!0;try{for(var se=(ne=void 0,a(K)),pe=se.next();!pe.done;pe=se.next()){var fe=pe.value;if(fe!==":"||de){var ve=te(fe,x);de?W.password+=ve:W.username+=ve}else de=!0}}catch(Tn){ne={error:Tn}}finally{try{pe&&!pe.done&&(oe=se.return)&&oe.call(se)}finally{if(ne)throw ne.error}}K=""}else if(Z.c()===""||Z.c()==="/"||Z.c()==="?"||Z.c()==="#"||C(W)&&Z.c()==="\\"){if(Ce&&K==="")return d("Invalid input string."),null;Z.pointer-=K.length+1,K="",he=l.ParserState.Host}else K+=Z.c();break;case l.ParserState.Host:case l.ParserState.Hostname:if(Y!==void 0&&W.scheme==="file")Z.pointer--,he=l.ParserState.FileHost;else if(Z.c()!==":"||we)if(Z.c()===""||Z.c()==="/"||Z.c()==="?"||Z.c()==="#"||C(W)&&Z.c()==="\\"){if(Z.pointer--,C(W)&&K==="")return d("Invalid input string."),null;if(Y!==void 0&&K===""&&(_(W)||W.port!==null))return d("Invalid input string."),W;if((xe=B(K,!C(W)))===null)return null;if(W.host=xe,K="",he=l.ParserState.PathStart,Y!==void 0)return W}else Z.c()==="["&&(we=!0),Z.c()==="]"&&(we=!1),K+=Z.c();else{if(K==="")return d("Invalid input string."),null;if((xe=B(K,!C(W)))===null)return null;if(W.host=xe,K="",he=l.ParserState.Port,Y===l.ParserState.Hostname)return W}break;case l.ParserState.Port:if(p.codePoint.ASCIIDigit.test(Z.c()))K+=Z.c();else{if(!(Z.c()===""||Z.c()==="/"||Z.c()==="?"||Z.c()==="#"||C(W)&&Z.c()==="\\"||Y))return d("Invalid input string."),null;if(K!==""&&K!==""){var ke=parseInt(K,10);if(ke>Math.pow(2,16)-1)return d("Invalid port number."),null;W.port=ke===w(W.scheme)?null:ke,K=""}if(Y!==void 0)return W;he=l.ParserState.PathStart,Z.pointer--}break;case l.ParserState.File:if(W.scheme="file",Z.c()==="/"||Z.c()==="\\")Z.c()==="\\"&&d("Invalid input string."),he=l.ParserState.FileSlash;else if(I!==null&&I.scheme==="file")switch(Z.c()){case"":W.host=I.host,W.path=p.list.clone(I.path),W.query=I.query;break;case"?":W.host=I.host,W.path=p.list.clone(I.path),W.query="",he=l.ParserState.Query;break;case"#":W.host=I.host,W.path=p.list.clone(I.path),W.query=I.query,W.fragment="",he=l.ParserState.Fragment;break;default:F(Z.substring())?d("Unexpected windows drive letter in input string."):(W.host=I.host,W.path=p.list.clone(I.path),G(W)),he=l.ParserState.Path,Z.pointer--}else he=l.ParserState.Path,Z.pointer--;break;case l.ParserState.FileSlash:Z.c()==="/"||Z.c()==="\\"?(Z.c()==="\\"&&d("Invalid input string."),he=l.ParserState.FileHost):(I===null||I.scheme!=="file"||F(Z.substring())||(j(I.path[0])?W.path.push(I.path[0]):W.host=I.host),he=l.ParserState.Path,Z.pointer--);break;case l.ParserState.FileHost:if(Z.c()===""||Z.c()==="/"||Z.c()==="\\"||Z.c()==="?"||Z.c()==="#")if(Z.pointer--,Y===void 0&&k(K))d("Unexpected windows drive letter in input string."),he=l.ParserState.Path;else if(K===""){if(W.host="",Y!==void 0)return W;he=l.ParserState.PathStart}else{var xe;if((xe=B(K,!C(W)))===null)return null;if(xe==="localhost"&&(xe=""),W.host=xe,Y!==void 0)return W;K="",he=l.ParserState.PathStart}else K+=Z.c();break;case l.ParserState.PathStart:C(W)?(Z.c()==="\\"&&d("Invalid input string."),he=l.ParserState.Path,Z.c()!=="/"&&Z.c()!=="\\"&&Z.pointer--):Y===void 0&&Z.c()==="?"?(W.query="",he=l.ParserState.Query):Y===void 0&&Z.c()==="#"?(W.fragment="",he=l.ParserState.Fragment):Z.c()!==""&&(he=l.ParserState.Path,Z.c()!=="/"&&Z.pointer--);break;case l.ParserState.Path:if(Z.c()===""||Z.c()==="/"||C(W)&&Z.c()==="\\"||Y===void 0&&(Z.c()==="?"||Z.c()==="#")){if(C(W)&&Z.c()==="\\"&&d("Invalid input string."),A(K))G(W),Z.c()==="/"||C(W)&&Z.c()==="\\"||W.path.push("");else if(!M(K)||Z.c()==="/"||C(W)&&Z.c()==="\\"){if(!M(K)){if(W.scheme==="file"&&W.path.length===0&&k(K)){W.host!==null&&W.host!==""&&(d("Invalid input string."),W.host="");var Ve=Array.from(K);K=Ve.slice(0,1)+":"+Ve.slice(2)}W.path.push(K)}}else W.path.push("");if(K="",W.scheme==="file"&&(Z.c()===""||Z.c()==="?"||Z.c()==="#"))for(;W.path.length>1&&W.path[0]==="";)d("Invalid input string."),W.path.splice(0,1);Z.c()==="?"&&(W.query="",he=l.ParserState.Query),Z.c()==="#"&&(W.fragment="",he=l.ParserState.Fragment)}else m.test(Z.c())||Z.c()==="%"||d("Character is not a URL code point or a percent encoded character."),Z.c()!=="%"||/^[0-9a-fA-F][0-9a-fA-F]/.test(Z.remaining())||d("Percent encoded character must be followed by two hex digits."),K+=te(Z.c(),y);break;case l.ParserState.CannotBeABaseURLPath:Z.c()==="?"?(W.query="",he=l.ParserState.Query):Z.c()==="#"?(W.fragment="",he=l.ParserState.Fragment):(Z.c()===""||m.test(Z.c())||Z.c()==="%"||d("Character is not a URL code point or a percent encoded character."),Z.c()!=="%"||/^[0-9a-fA-F][0-9a-fA-F]/.test(Z.remaining())||d("Percent encoded character must be followed by two hex digits."),Z.c()!==""&&(W.path[0]+=te(Z.c(),h)));break;case l.ParserState.Query:if(Je==="UTF-8"||C(W)&&W.scheme!=="ws"&&W.scheme!=="wss"||(Je="UTF-8"),Y===void 0&&Z.c()==="#")W.fragment="",he=l.ParserState.Fragment;else if(Z.c()!==""){if(m.test(Z.c())||Z.c()==="%"||d("Character is not a URL code point or a percent encoded character."),Z.c()!=="%"||/^[0-9a-fA-F][0-9a-fA-F]/.test(Z.remaining())||d("Percent encoded character must be followed by two hex digits."),Je.toUpperCase()!=="UTF-8")throw new Error("Only UTF-8 encoding is supported.");var Ue=u.utf8Encode(Z.c());if(Ue.length>=3&&Ue[0]===38&&Ue[1]===35&&Ue[Ue.length-1]===59)Ue=Ue.subarray(2,Ue.length-1),W.query+="%26%23"+p.byteSequence.isomorphicDecode(Ue)+"%3B";else try{for(var Dt=(ue=void 0,a(Ue)),$t=Dt.next();!$t.done;$t=Dt.next()){var at=$t.value;at<33||at>126||at===34||at===35||at===60||at===62||at===39&&C(W)?W.query+=ee(at):W.query+=String.fromCharCode(at)}}catch(Tn){ue={error:Tn}}finally{try{$t&&!$t.done&&(Te=Dt.return)&&Te.call(Dt)}finally{if(ue)throw ue.error}}}break;case l.ParserState.Fragment:Z.c()===""||(Z.c()==="\0"?d("NULL character in input string."):(m.test(Z.c())||Z.c()==="%"||d("Unexpected character in fragment string."),Z.c()!=="%"||/^[A-Za-z0-9][A-Za-z0-9]/.test(Z.remaining())||d("Unexpected character in fragment string."),W.fragment+=te(Z.c(),v)))}if(Z.eof)break;Z.pointer++}return W}function M(V){return V==="."||V.toLowerCase()==="%2e"}function A(V){var I=V.toLowerCase();return I===".."||I===".%2e"||I==="%2e."||I==="%2e%2e"}function G(V){var I=V.path;I.length!==0&&(V.scheme==="file"&&I.length===1&&j(I[0])||V.path.splice(V.path.length-1,1))}function j(V){return V.length>=2&&p.codePoint.ASCIIAlpha.test(V[0])&&V[1]===":"}function k(V){return V.length>=2&&p.codePoint.ASCIIAlpha.test(V[0])&&(V[1]===":"||V[1]==="|")}function F(V){return V.length>=2&&k(V)&&(V.length===2||V[2]==="/"||V[2]==="\\"||V[2]==="?"||V[2]==="#")}function B(V,I){if(I===void 0&&(I=!1),V.startsWith("["))return V.endsWith("]")?X(V.substring(1,V.length-1)):(d("Expected ']' after '['."),null);if(I)return J(V);var z=U(u.utf8Decode(ae(V)));if(z===null||g.test(z))return d("Invalid domain."),null;var W=H(z);return W===null||u.isNumber(W)?W:z}function $(V,I){I===void 0&&(I={value:!1});var z=10;return V.startsWith("0x")||V.startsWith("0X")?(I.value=!0,V=V.substr(2),z=16):V.length>=2&&V[0]==="0"&&(I.value=!0,V=V.substr(1),z=8),V===""?0:(z===10?/^[0-9]+$/:z===16?/^[0-9A-Fa-f]+$/:/^[0-7]+$/).test(V)?parseInt(V,z):null}function H(V){var I,z,W,Y,ne={value:!1},oe=V.split(".");if(oe[oe.length-1]===""&&(ne.value=!0,oe.length>1&&oe.pop()),oe.length>4)return V;var ue=[];try{for(var Te=a(oe),me=Te.next();!me.done;me=Te.next()){var je=me.value;if(je===""||(we=$(je,ne))===null)return V;ue.push(we)}}catch(de){I={error:de}}finally{try{me&&!me.done&&(z=Te.return)&&z.call(Te)}finally{if(I)throw I.error}}ne.value&&d("Invalid IP v4 address.");for(var Ne=0;Ne<ue.length;Ne++)if(ue[Ne]>255&&(d("Invalid IP v4 address."),Ne<ue.length-1))return null;if(ue[ue.length-1]>=Math.pow(256,5-ue.length))return d("Invalid IP v4 address."),null;var he=ue[ue.length-1];ue.pop();var Je=0;try{for(var K=a(ue),Ce=K.next();!Ce.done;Ce=K.next()){var we;he+=(we=Ce.value)*Math.pow(256,3-Je),Je++}}catch(de){W={error:de}}finally{try{Ce&&!Ce.done&&(Y=K.return)&&Y.call(K)}finally{if(W)throw W.error}}return he}function X(V){var I,z=[0,0,0,0,0,0,0,0],W=0,Y=null,ne=new u.StringWalker(V);if(ne.c()===":"){if(!ne.remaining().startsWith(":"))return d("Invalid IP v6 address."),null;ne.pointer+=2,Y=W+=1}for(;ne.c()!=="";){if(W===8)return d("Invalid IP v6 address."),null;if(ne.c()!==":"){for(var oe=0,ue=0;ue<4&&p.codePoint.ASCIIHexDigit.test(ne.c());)oe=16*oe+parseInt(ne.c(),16),ne.pointer++,ue++;if(ne.c()==="."){if(ue===0||(ne.pointer-=ue,W>6))return d("Invalid IP v6 address."),null;for(var Te=0;ne.c()!=="";){var me=null;if(Te>0){if(!(ne.c()==="."&&Te<4))return d("Invalid IP v6 address."),null;ne.pointer++}if(!p.codePoint.ASCIIDigit.test(ne.c()))return d("Invalid IP v6 address."),null;for(;p.codePoint.ASCIIDigit.test(ne.c());){var je=parseInt(ne.c(),10);if(me===null)me=je;else{if(me===0)return d("Invalid IP v6 address."),null;me=10*me+je}if(me>255)return d("Invalid IP v6 address."),null;ne.pointer++}if(me===null)return d("Invalid IP v6 address."),null;z[W]=256*z[W]+me,++Te!==2&&Te!==4||W++}if(Te!==4)return d("Invalid IP v6 address."),null;break}if(ne.c()===":"){if(ne.pointer++,ne.c()==="")return d("Invalid IP v6 address."),null}else if(ne.c()!=="")return d("Invalid IP v6 address."),null;z[W]=oe,W++}else{if(Y!==null)return d("Invalid IP v6 address."),null;ne.pointer++,Y=++W}}if(Y!==null){var Ne=W-Y;for(W=7;W!==0&&Ne>0;)I=o([z[Y+Ne-1],z[W]],2),z[W]=I[0],z[Y+Ne-1]=I[1],W--,Ne--}else if(Y===null&&W!==8)return d("Invalid IP v6 address."),null;return z}function J(V){var I,z;if(/[\x00\t\f\r #/:?@\[\\\]]/.test(V))return d("Invalid host string."),null;var W="";try{for(var Y=a(V),ne=Y.next();!ne.done;ne=Y.next())W+=te(ne.value,h)}catch(oe){I={error:oe}}finally{try{ne&&!ne.done&&(z=Y.return)&&z.call(Y)}finally{if(I)throw I.error}}return W}function q(V){return null}function ee(V){return"%"+("00"+V.toString(16).toUpperCase()).slice(-2)}function re(V){for(var I=function(ue){return ue>=48&&ue<=57||ue>=65&&ue<=70||ue>=97&&ue<=102},z=new Uint8Array(V.length),W=0,Y=0;Y<V.length;Y++){var ne=V[Y];if(ne!==37)z[W]=ne,W++;else if(ne===37&&Y>=V.length-2)z[W]=ne,W++;else if(ne!==37||I(V[Y+1])&&I(V[Y+2])){var oe=parseInt(u.utf8Decode(Uint8Array.of(V[Y+1],V[Y+2])),16);z[W]=oe,W++,Y+=2}else z[W]=ne,W++}return z.subarray(0,W)}function ae(V){return re(u.utf8Encode(V))}function te(V,I){var z,W;if(!I.test(V))return V;var Y=u.utf8Encode(V),ne="";try{for(var oe=a(Y),ue=oe.next();!ue.done;ue=oe.next())ne+=ee(ue.value)}catch(Te){z={error:Te}}finally{try{ue&&!ue.done&&(W=oe.return)&&W.call(oe)}finally{if(z)throw z.error}}return ne}function L(V){var I,z,W,Y,ne=[],oe=[];try{for(var ue=a(V),Te=ue.next();!Te.done;Te=ue.next()){var me=Te.value;me===38?(ne.push(Uint8Array.from(oe)),oe=[]):oe.push(me)}}catch(pe){I={error:pe}}finally{try{Te&&!Te.done&&(z=ue.return)&&z.call(ue)}finally{if(I)throw I.error}}oe.length!==0&&ne.push(Uint8Array.from(oe));var je=[];try{for(var Ne=a(ne),he=Ne.next();!he.done;he=Ne.next()){var Je=he.value;if(Je.length!==0){for(var K=Je.indexOf(61),Ce=K!==-1?Je.slice(0,K):Je,we=K!==-1?Je.slice(K+1):new Uint8Array,de=0;de<Ce.length;de++)Ce[de]===43&&(Ce[de]=32);for(de=0;de<we.length;de++)we[de]===43&&(we[de]=32);var Z=u.utf8Decode(Ce),se=u.utf8Decode(we);je.push([Z,se])}}}catch(pe){W={error:pe}}finally{try{he&&!he.done&&(Y=Ne.return)&&Y.call(Ne)}finally{if(W)throw W.error}}return je}function b(V){var I,z,W="";try{for(var Y=a(V),ne=Y.next();!ne.done;ne=Y.next()){var oe=ne.value;W+=oe===32?"+":oe===42||oe===45||oe===46||oe>=48&&oe<=57||oe>=65&&oe<=90||oe===95||oe>=97&&oe<=122?String.fromCodePoint(oe):ee(oe)}}catch(ue){I={error:ue}}finally{try{ne&&!ne.done&&(z=Y.return)&&z.call(Y)}finally{if(I)throw I.error}}return W}function U(V,I){var z=c.domainToASCII(V);return z===""?(d("Invalid domain name."),null):z}r.setValidationErrorCallback=function(V){s=V},r.newURL=S,r.isSpecialScheme=T,r.isSpecial=C,r.defaultPort=w,r.includesCredentials=_,r.cannotHaveAUsernamePasswordPort=function(V){return V.host===null||V.host===""||V._cannotBeABaseURLFlag||V.scheme==="file"},r.urlSerializer=E,r.hostSerializer=D,r.iPv4Serializer=O,r.iPv6Serializer=N,r.urlParser=function(V,I,z){var W=R(V,I,z);return W===null?null:(W.scheme!=="blob"||(W._blobURLEntry=null),W)},r.basicURLParser=R,r.setTheUsername=function(V,I){var z,W,Y="";try{for(var ne=a(I),oe=ne.next();!oe.done;oe=ne.next())Y+=te(oe.value,x)}catch(ue){z={error:ue}}finally{try{oe&&!oe.done&&(W=ne.return)&&W.call(ne)}finally{if(z)throw z.error}}V.username=Y},r.setThePassword=function(V,I){var z,W,Y="";try{for(var ne=a(I),oe=ne.next();!oe.done;oe=ne.next())Y+=te(oe.value,x)}catch(ue){z={error:ue}}finally{try{oe&&!oe.done&&(W=ne.return)&&W.call(ne)}finally{if(z)throw z.error}}V.password=Y},r.isSingleDotPathSegment=M,r.isDoubleDotPathSegment=A,r.shorten=G,r.isNormalizedWindowsDriveLetter=j,r.isWindowsDriveLetter=k,r.startsWithAWindowsDriveLetter=F,r.hostParser=B,r.iPv4NumberParser=$,r.iPv4Parser=H,r.iPv6Parser=X,r.opaqueHostParser=J,r.resolveABlobURL=q,r.percentEncode=ee,r.percentDecode=re,r.stringPercentDecode=ae,r.utf8PercentEncode=te,r.hostEquals=function(V,I){return V===I},r.urlEquals=function(V,I,z){return z===void 0&&(z=!1),E(V,z)===E(I,z)},r.urlEncodedStringParser=function(V){return L(u.utf8Encode(V))},r.urlEncodedParser=L,r.urlEncodedByteSerializer=b,r.urlEncodedSerializer=function(V,I){var z,W;if((I===void 0||I==="replacement"||I==="UTF-16BE"||I==="UTF-16LE"?"UTF-8":I).toUpperCase()!=="UTF-8")throw new Error("Only UTF-8 encoding is supported.");var Y="";try{for(var ne=a(V),oe=ne.next();!oe.done;oe=ne.next()){var ue=oe.value,Te=b(u.utf8Encode(ue[0])),me=ue[1];me=b(u.utf8Encode(me)),Y!==""&&(Y+="&"),Y+=Te+"="+me}}catch(je){z={error:je}}finally{try{oe&&!oe.done&&(W=ne.return)&&W.call(ne)}finally{if(z)throw z.error}}return Y},r.origin=function V(I){switch(I.scheme){case"blob":I._blobURLEntry;var z=R(I.path[0]);return z===null?l.OpaqueOrigin:V(z);case"ftp":case"http":case"https":case"ws":case"wss":return[I.scheme,I.host===null?"":I.host,I.port,null];case"file":default:return l.OpaqueOrigin}},r.domainToASCII=U,r.domainToUnicode=function(V,I){var z=c.domainToUnicode(V);return z===""&&d("Invalid domain name."),z},r.asciiSerializationOfAnOrigin=function(V){if(V[0]===""&&V[1]===""&&V[2]===null&&V[3]===null)return"null";var I=V[0]+"://"+D(V[1]);return V[2]!==null&&(I+=":"+V[2].toString()),I}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),o=function(){function s(){this._signal=a.create_abortSignal()}return Object.defineProperty(s.prototype,"signal",{get:function(){return this._signal},enumerable:!0,configurable:!0}),s.prototype.abort=function(){a.abort_signalAbort(this._signal)},s}();r.AbortControllerImpl=o},function(n,r,i){var a,o=this&&this.__extends||(a=function(p,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var v in h)h.hasOwnProperty(v)&&(f[v]=h[v])})(p,c)},function(p,c){function f(){this.constructor=p}a(p,c),p.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(70),u=i(0),l=function(p){function c(){var f=p.call(this)||this;return f._abortedFlag=!1,f._abortAlgorithms=new Set,f}return o(c,p),Object.defineProperty(c.prototype,"aborted",{get:function(){return this._abortedFlag},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"onabort",{get:function(){return u.event_getterEventHandlerIDLAttribute(this,"onabort")},set:function(f){u.event_setterEventHandlerIDLAttribute(this,"onabort",f)},enumerable:!0,configurable:!0}),c._create=function(){return new c},c}(s.EventTargetImpl);r.AbortSignalImpl=l},function(n,r,i){var a,o=this&&this.__extends||(a=function(c,f){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(c,f)},function(c,f){function h(){this.constructor=c}a(c,f),c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(2),u=i(34),l=i(12),p=function(c){function f(h,v,y){var x=c.call(this)||this;return x._name="",x._publicId="",x._systemId="",x._name=h,x._publicId=v,x._systemId=y,x}return o(f,c),Object.defineProperty(f.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"publicId",{get:function(){return this._publicId},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"systemId",{get:function(){return this._systemId},enumerable:!0,configurable:!0}),f.prototype.before=function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];throw new Error("Mixin: ChildNode not implemented.")},f.prototype.after=function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];throw new Error("Mixin: ChildNode not implemented.")},f.prototype.replaceWith=function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];throw new Error("Mixin: ChildNode not implemented.")},f.prototype.remove=function(){throw new Error("Mixin: ChildNode not implemented.")},f._create=function(h,v,y,x){y===void 0&&(y=""),x===void 0&&(x="");var m=new f(v,y,x);return m._nodeDocument=h,m},f}(u.NodeImpl);r.DocumentTypeImpl=p,l.idl_defineConst(p.prototype,"_nodeType",s.NodeType.DocumentType)},function(n,r,i){var a,o=this&&this.__extends||(a=function(c,f){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(c,f)},function(c,f){function h(){this.constructor=c}a(c,f),c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(100),u=i(1),l=i(0),p=function(c){function f(h,v){var y=c.call(this)||this;return y._host=h,y._mode=v,y}return o(f,c),Object.defineProperty(f.prototype,"mode",{get:function(){return this._mode},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),f.prototype._getTheParent=function(h){return h._composedFlag||u.isEmpty(h._path)||l.tree_rootNode(h._path[0].invocationTarget)!==this?this._host:null},f._create=function(h,v){return new f(v,"closed")},f}(s.DocumentFragmentImpl);r.ShadowRootImpl=p},function(n,r,i){var a,o=this&&this.__extends||(a=function(f,h){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,y){v.__proto__=y}||function(v,y){for(var x in y)y.hasOwnProperty(x)&&(v[x]=y[x])})(f,h)},function(f,h){function v(){this.constructor=f}a(f,h),f.prototype=h===null?Object.create(h):(v.prototype=h.prototype,new v)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(2),u=i(34),l=i(0),p=i(12),c=function(f){function h(v){var y=f.call(this)||this;return y._namespace=null,y._namespacePrefix=null,y._element=null,y._value="",y._localName=v,y}return o(h,f),Object.defineProperty(h.prototype,"ownerElement",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"namespaceURI",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"prefix",{get:function(){return this._namespacePrefix},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"localName",{get:function(){return this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"name",{get:function(){return this._qualifiedName},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"value",{get:function(){return this._value},set:function(v){l.attr_setAnExistingAttributeValue(this,v)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"_qualifiedName",{get:function(){return this._namespacePrefix!==null?this._namespacePrefix+":"+this._localName:this._localName},enumerable:!0,configurable:!0}),h._create=function(v,y){var x=new h(y);return x._nodeDocument=v,x},h}(u.NodeImpl);r.AttrImpl=c,p.idl_defineConst(c.prototype,"_nodeType",s.NodeType.Attribute),p.idl_defineConst(c.prototype,"specified",!0)},function(n,r,i){var a,o=this&&this.__extends||(a=function(c,f){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(c,f)},function(c,f){function h(){this.constructor=c}a(c,f),c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(101),u=i(2),l=i(12),p=function(c){function f(h){return c.call(this,h)||this}return o(f,c),f._create=function(h,v){v===void 0&&(v="");var y=new f(v);return y._nodeDocument=h,y},f}(s.TextImpl);r.CDATASectionImpl=p,l.idl_defineConst(p.prototype,"_nodeType",u.NodeType.CData)},function(n,r,i){var a,o=this&&this.__extends||(a=function(c,f){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(c,f)},function(c,f){function h(){this.constructor=c}a(c,f),c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(2),u=i(71),l=i(12),p=function(c){function f(h){return h===void 0&&(h=""),c.call(this,h)||this}return o(f,c),f._create=function(h,v){v===void 0&&(v="");var y=new f(v);return y._nodeDocument=h,y},f}(u.CharacterDataImpl);r.CommentImpl=p,l.idl_defineConst(p.prototype,"_nodeType",s.NodeType.Comment)},function(n,r,i){var a,o=this&&this.__extends||(a=function(c,f){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(c,f)},function(c,f){function h(){this.constructor=c}a(c,f),c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(2),u=i(71),l=i(12),p=function(c){function f(h,v){var y=c.call(this,v)||this;return y._target=h,y}return o(f,c),Object.defineProperty(f.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),f._create=function(h,v,y){var x=new f(v,y);return x._nodeDocument=h,x},f}(u.CharacterDataImpl);r.ProcessingInstructionImpl=p,l.idl_defineConst(p.prototype,"_nodeType",s.NodeType.ProcessingInstruction)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(7),o=i(0),s=i(3),u=i(1),l=function(){function p(c,f){return this._live=!0,this._root=c,this._filter=f,new Proxy(this,this)}return Object.defineProperty(p.prototype,"length",{get:function(){for(var c=this,f=0,h=o.tree_getFirstDescendantNode(this._root,!1,!1,function(v){return s.Guard.isElementNode(v)&&c._filter(v)});h!==null;)f++,h=o.tree_getNextDescendantNode(this._root,h,!1,!1,function(v){return s.Guard.isElementNode(v)&&c._filter(v)});return f},enumerable:!0,configurable:!0}),p.prototype.item=function(c){for(var f=this,h=0,v=o.tree_getFirstDescendantNode(this._root,!1,!1,function(y){return s.Guard.isElementNode(y)&&f._filter(y)});v!==null;){if(h===c)return v;h++,v=o.tree_getNextDescendantNode(this._root,v,!1,!1,function(y){return s.Guard.isElementNode(y)&&f._filter(y)})}return null},p.prototype.namedItem=function(c){var f=this;if(c==="")return null;for(var h=o.tree_getFirstDescendantNode(this._root,!1,!1,function(x){return s.Guard.isElementNode(x)&&f._filter(x)});h!=null;){if(h._uniqueIdentifier===c)return h;if(h._namespace===a.namespace.HTML)for(var v=0;v<h._attributeList.length;v++){var y=h._attributeList[v];if(y._localName==="name"&&y._namespace===null&&y._namespacePrefix===null&&y._value===c)return h}h=o.tree_getNextDescendantNode(this._root,h,!1,!1,function(x){return s.Guard.isElementNode(x)&&f._filter(x)})}return null},p.prototype[Symbol.iterator]=function(){var c=this._root,f=this._filter,h=o.tree_getFirstDescendantNode(c,!1,!1,function(v){return s.Guard.isElementNode(v)&&f(v)});return{next:function(){if(h===null)return{done:!0,value:null};var v={done:!1,value:h};return h=o.tree_getNextDescendantNode(c,h,!1,!1,function(y){return s.Guard.isElementNode(y)&&f(y)}),v}}},p.prototype.get=function(c,f,h){if(!u.isString(f)||p.reservedNames.indexOf(f)!==-1)return Reflect.get(c,f,h);var v=Number(f);return isNaN(v)?c.namedItem(f)||void 0:c.item(v)||void 0},p.prototype.set=function(c,f,h,v){if(!u.isString(f)||p.reservedNames.indexOf(f)!==-1)return Reflect.set(c,f,h,v);var y=Number(f),x=isNaN(y)?c.namedItem(f)||void 0:c.item(y)||void 0;return!(!x||!x._parent)&&(o.mutation_replace(x,h,x._parent),!0)},p._create=function(c,f){return f===void 0&&(f=function(){return!0}),new p(c,f)},p.reservedNames=["_root","_live","_filter","length","item","namedItem","get","set"],p}();r.HTMLCollectionImpl=l},function(n,r,i){var a=this&&this.__values||function(p){var c=typeof Symbol=="function"&&Symbol.iterator,f=c&&p[c],h=0;if(f)return f.call(p);if(p&&typeof p.length=="number")return{next:function(){return p&&h>=p.length&&(p=void 0),{value:p&&p[h++],done:!p}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=i(1),u=i(0),l=function(){function p(c){return this._live=!0,this._filter=null,this._length=0,this._root=c,new Proxy(this,this)}return Object.defineProperty(p.prototype,"length",{get:function(){return this._root._children.size},enumerable:!0,configurable:!0}),p.prototype.item=function(c){if(c<0||c>this.length-1)return null;if(c<this.length/2){for(var f=0,h=this._root._firstChild;h!==null&&f!==c;)h=h._nextSibling,f++;return h}for(f=this.length-1,h=this._root._lastChild;h!==null&&f!==c;)h=h._previousSibling,f--;return h},p.prototype.keys=function(){var c;return(c={})[Symbol.iterator]=(function(){var f=0;return{next:(function(){return f===this.length?{done:!0,value:null}:{done:!1,value:f++}}).bind(this)}}).bind(this),c},p.prototype.values=function(){var c;return(c={})[Symbol.iterator]=(function(){var f=this[Symbol.iterator]();return{next:function(){return f.next()}}}).bind(this),c},p.prototype.entries=function(){var c;return(c={})[Symbol.iterator]=(function(){var f=this[Symbol.iterator](),h=0;return{next:function(){var v=f.next();return v.done?{done:!0,value:null}:{done:!1,value:[h++,v.value]}}}}).bind(this),c},p.prototype[Symbol.iterator]=function(){return this._root._children[Symbol.iterator]()},p.prototype.forEach=function(c,f){var h,v;f===void 0&&(f=o.dom.window);var y=0;try{for(var x=a(this._root._children),m=x.next();!m.done;m=x.next()){var g=m.value;c.call(f,g,y++,this)}}catch(d){h={error:d}}finally{try{m&&!m.done&&(v=x.return)&&v.call(x)}finally{if(h)throw h.error}}},p.prototype.get=function(c,f,h){if(!s.isString(f))return Reflect.get(c,f,h);var v=Number(f);return isNaN(v)?Reflect.get(c,f,h):c.item(v)||void 0},p.prototype.set=function(c,f,h,v){if(!s.isString(f))return Reflect.set(c,f,h,v);var y=Number(f);if(isNaN(y))return Reflect.set(c,f,h,v);var x=c.item(y)||void 0;return!!x&&!!x._parent&&(u.mutation_replace(x,h,x._parent),!0)},p._create=function(c){return new p(c)},p}();r.NodeListImpl=l},function(n,r,i){var a=this&&this.__values||function(l){var p=typeof Symbol=="function"&&Symbol.iterator,c=p&&l[p],f=0;if(c)return c.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&f>=l.length&&(l=void 0),{value:l&&l[f++],done:!l}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=i(1),u=function(){function l(p){return this._live=!1,this._items=[],this._length=0,this._root=p,this._items=[],this._filter=function(c){return!0},new Proxy(this,this)}return Object.defineProperty(l.prototype,"length",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),l.prototype.item=function(p){return p<0||p>this.length-1?null:this._items[p]},l.prototype.keys=function(){var p;return(p={})[Symbol.iterator]=(function(){var c=0;return{next:(function(){return c===this.length?{done:!0,value:null}:{done:!1,value:c++}}).bind(this)}}).bind(this),p},l.prototype.values=function(){var p;return(p={})[Symbol.iterator]=(function(){var c=this[Symbol.iterator]();return{next:function(){return c.next()}}}).bind(this),p},l.prototype.entries=function(){var p;return(p={})[Symbol.iterator]=(function(){var c=this[Symbol.iterator](),f=0;return{next:function(){var h=c.next();return h.done?{done:!0,value:null}:{done:!1,value:[f++,h.value]}}}}).bind(this),p},l.prototype[Symbol.iterator]=function(){var p=this._items[Symbol.iterator]();return{next:function(){return p.next()}}},l.prototype.forEach=function(p,c){var f,h;c===void 0&&(c=o.dom.window);var v=0;try{for(var y=a(this._items),x=y.next();!x.done;x=y.next()){var m=x.value;p.call(c,m,v++,this)}}catch(g){f={error:g}}finally{try{x&&!x.done&&(h=y.return)&&h.call(y)}finally{if(f)throw f.error}}},l.prototype.get=function(p,c,f){if(!s.isString(c))return Reflect.get(p,c,f);var h=Number(c);return isNaN(h)?Reflect.get(p,c,f):p._items[h]||void 0},l.prototype.set=function(p,c,f,h){if(!s.isString(c))return Reflect.set(p,c,f,h);var v=Number(c);return isNaN(v)?Reflect.set(p,c,f,h):v>=0&&v<p._items.length&&(p._items[v]=f,!0)},l._create=function(p,c){var f=new l(p);return f._items=c,f},l}();r.NodeListStaticImpl=u},function(n,r,i){var a,o=this&&this.__extends||(a=function(p,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var v in h)h.hasOwnProperty(v)&&(f[v]=h[v])})(p,c)},function(p,c){function f(){this.constructor=p}a(p,c),p.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(9),u=i(0),l=function(p){function c(f){var h=p.call(this)||this;return h._element=f,Object.setPrototypeOf(h,c.prototype),h}return o(c,p),c.prototype._asArray=function(){return this},c.prototype.item=function(f){return this[f]||null},c.prototype.getNamedItem=function(f){return u.element_getAnAttributeByName(f,this._element)},c.prototype.getNamedItemNS=function(f,h){return u.element_getAnAttributeByNamespaceAndLocalName(f||"",h,this._element)},c.prototype.setNamedItem=function(f){return u.element_setAnAttribute(f,this._element)},c.prototype.setNamedItemNS=function(f){return u.element_setAnAttribute(f,this._element)},c.prototype.removeNamedItem=function(f){var h=u.element_removeAnAttributeByName(f,this._element);if(h===null)throw new s.NotFoundError;return h},c.prototype.removeNamedItemNS=function(f,h){var v=u.element_removeAnAttributeByNamespaceAndLocalName(f||"",h,this._element);if(v===null)throw new s.NotFoundError;return v},c._create=function(f){return new c(f)},c}(Array);r.NamedNodeMapImpl=l},function(n,r,i){var a,o=this&&this.__extends||(a=function(x,m){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var S in d)d.hasOwnProperty(S)&&(g[S]=d[S])})(x,m)},function(x,m){function g(){this.constructor=x}a(x,m),x.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}),s=this&&this.__values||function(x){var m=typeof Symbol=="function"&&Symbol.iterator,g=m&&x[m],d=0;if(g)return g.call(x);if(x&&typeof x.length=="number")return{next:function(){return x&&d>=x.length&&(x=void 0),{value:x&&x[d++],done:!x}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var u=i(6),l=i(2),p=i(102),c=i(9),f=i(0),h=i(12),v=i(3),y=function(x){function m(){var g=x.call(this)||this,d=u.dom.window._associatedDocument;return g._start=[d,0],g._end=[d,0],u.dom.rangeList.add(g),g}return o(m,x),Object.defineProperty(m.prototype,"commonAncestorContainer",{get:function(){for(var g=this._start[0];!f.tree_isAncestorOf(this._end[0],g,!0);){if(g._parent===null)throw new Error("Parent node  is null.");g=g._parent}return g},enumerable:!0,configurable:!0}),m.prototype.setStart=function(g,d){f.range_setTheStart(this,g,d)},m.prototype.setEnd=function(g,d){f.range_setTheEnd(this,g,d)},m.prototype.setStartBefore=function(g){var d=g._parent;if(d===null)throw new c.InvalidNodeTypeError;f.range_setTheStart(this,d,f.tree_index(g))},m.prototype.setStartAfter=function(g){var d=g._parent;if(d===null)throw new c.InvalidNodeTypeError;f.range_setTheStart(this,d,f.tree_index(g)+1)},m.prototype.setEndBefore=function(g){var d=g._parent;if(d===null)throw new c.InvalidNodeTypeError;f.range_setTheEnd(this,d,f.tree_index(g))},m.prototype.setEndAfter=function(g){var d=g._parent;if(d===null)throw new c.InvalidNodeTypeError;f.range_setTheEnd(this,d,f.tree_index(g)+1)},m.prototype.collapse=function(g){g?this._end=this._start:this._start=this._end},m.prototype.selectNode=function(g){f.range_select(g,this)},m.prototype.selectNodeContents=function(g){if(v.Guard.isDocumentTypeNode(g))throw new c.InvalidNodeTypeError;var d=f.tree_nodeLength(g);this._start=[g,0],this._end=[g,d]},m.prototype.compareBoundaryPoints=function(g,d){if(g!==l.HowToCompare.StartToStart&&g!==l.HowToCompare.StartToEnd&&g!==l.HowToCompare.EndToEnd&&g!==l.HowToCompare.EndToStart)throw new c.NotSupportedError;if(f.range_root(this)!==f.range_root(d))throw new c.WrongDocumentError;var S,T;switch(g){case l.HowToCompare.StartToStart:S=this._start,T=d._start;break;case l.HowToCompare.StartToEnd:S=this._end,T=d._start;break;case l.HowToCompare.EndToEnd:S=this._end,T=d._end;break;case l.HowToCompare.EndToStart:S=this._start,T=d._end;break;default:throw new c.NotSupportedError}var C=f.boundaryPoint_position(S,T);return C===l.BoundaryPosition.Before?-1:C===l.BoundaryPosition.After?1:0},m.prototype.deleteContents=function(){var g,d,S,T;if(!f.range_collapsed(this)){var C=this._startNode,w=this._startOffset,_=this._endNode,E=this._endOffset;if(C===_&&v.Guard.isCharacterDataNode(C))f.characterData_replaceData(C,w,E-w,"");else{var D,O,N=[];try{for(var R=s(f.range_getContainedNodes(this)),M=R.next();!M.done;M=R.next()){var A=(F=M.value)._parent;A!==null&&f.range_isContained(A,this)||N.push(F)}}catch(B){g={error:B}}finally{try{M&&!M.done&&(d=R.return)&&d.call(R)}finally{if(g)throw g.error}}if(f.tree_isAncestorOf(_,C,!0))D=C,O=w;else{for(var G=C;G._parent!==null&&!f.tree_isAncestorOf(_,G._parent,!0);)G=G._parent;if(G._parent===null)throw new Error("Parent node is null.");D=G._parent,O=f.tree_index(G)+1}v.Guard.isCharacterDataNode(C)&&f.characterData_replaceData(C,w,f.tree_nodeLength(C)-w,"");try{for(var j=s(N),k=j.next();!k.done;k=j.next()){var F;(F=k.value)._parent&&f.mutation_remove(F,F._parent)}}catch(B){S={error:B}}finally{try{k&&!k.done&&(T=j.return)&&T.call(j)}finally{if(S)throw S.error}}v.Guard.isCharacterDataNode(_)&&f.characterData_replaceData(_,0,E,""),this._start=[D,O],this._end=[D,O]}}},m.prototype.extractContents=function(){return f.range_extract(this)},m.prototype.cloneContents=function(){return f.range_cloneTheContents(this)},m.prototype.insertNode=function(g){return f.range_insert(g,this)},m.prototype.surroundContents=function(g){var d,S;try{for(var T=s(f.range_getPartiallyContainedNodes(this)),C=T.next();!C.done;C=T.next()){var w=C.value;if(!v.Guard.isTextNode(w))throw new c.InvalidStateError}}catch(E){d={error:E}}finally{try{C&&!C.done&&(S=T.return)&&S.call(T)}finally{if(d)throw d.error}}if(v.Guard.isDocumentNode(g)||v.Guard.isDocumentTypeNode(g)||v.Guard.isDocumentFragmentNode(g))throw new c.InvalidNodeTypeError;var _=f.range_extract(this);g._children.size!==0&&f.mutation_replaceAll(null,g),f.range_insert(g,this),f.mutation_append(_,g),f.range_select(g,this)},m.prototype.cloneRange=function(){return f.create_range(this._start,this._end)},m.prototype.detach=function(){u.dom.rangeList.delete(this)},m.prototype.isPointInRange=function(g,d){if(f.tree_rootNode(g)!==f.range_root(this))return!1;if(v.Guard.isDocumentTypeNode(g))throw new c.InvalidNodeTypeError;if(d>f.tree_nodeLength(g))throw new c.IndexSizeError;var S=[g,d];return f.boundaryPoint_position(S,this._start)!==l.BoundaryPosition.Before&&f.boundaryPoint_position(S,this._end)!==l.BoundaryPosition.After},m.prototype.comparePoint=function(g,d){if(f.tree_rootNode(g)!==f.range_root(this))throw new c.WrongDocumentError;if(v.Guard.isDocumentTypeNode(g))throw new c.InvalidNodeTypeError;if(d>f.tree_nodeLength(g))throw new c.IndexSizeError;var S=[g,d];return f.boundaryPoint_position(S,this._start)===l.BoundaryPosition.Before?-1:f.boundaryPoint_position(S,this._end)===l.BoundaryPosition.After?1:0},m.prototype.intersectsNode=function(g){if(f.tree_rootNode(g)!==f.range_root(this))return!1;var d=g._parent;if(d===null)return!0;var S=f.tree_index(g);return f.boundaryPoint_position([d,S],this._end)===l.BoundaryPosition.Before&&f.boundaryPoint_position([d,S+1],this._start)===l.BoundaryPosition.After},m.prototype.toString=function(){var g,d,S="";if(this._startNode===this._endNode&&v.Guard.isTextNode(this._startNode))return this._startNode._data.substring(this._startOffset,this._endOffset);v.Guard.isTextNode(this._startNode)&&(S+=this._startNode._data.substring(this._startOffset));try{for(var T=s(f.range_getContainedNodes(this)),C=T.next();!C.done;C=T.next()){var w=C.value;v.Guard.isTextNode(w)&&(S+=w._data)}}catch(_){g={error:_}}finally{try{C&&!C.done&&(d=T.return)&&d.call(T)}finally{if(g)throw g.error}}return v.Guard.isTextNode(this._endNode)&&(S+=this._endNode._data.substring(0,this._endOffset)),S},m._create=function(g,d){var S=new m;return g&&(S._start=g),d&&(S._end=d),S},m.START_TO_START=0,m.START_TO_END=1,m.END_TO_END=2,m.END_TO_START=3,m}(p.AbstractRangeImpl);r.RangeImpl=y,h.idl_defineConst(y.prototype,"START_TO_START",0),h.idl_defineConst(y.prototype,"START_TO_END",1),h.idl_defineConst(y.prototype,"END_TO_END",2),h.idl_defineConst(y.prototype,"END_TO_START",3)},function(n,r,i){var a,o=this&&this.__extends||(a=function(p,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var v in h)h.hasOwnProperty(v)&&(f[v]=h[v])})(p,c)},function(p,c){function f(){this.constructor=p}a(p,c),p.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(103),u=i(0),l=function(p){function c(f,h,v){var y=p.call(this,f)||this;return y._iteratorCollection=void 0,y._reference=h,y._pointerBeforeReference=v,u.nodeIterator_iteratorList().add(y),y}return o(c,p),Object.defineProperty(c.prototype,"referenceNode",{get:function(){return this._reference},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"pointerBeforeReferenceNode",{get:function(){return this._pointerBeforeReference},enumerable:!0,configurable:!0}),c.prototype.nextNode=function(){return u.nodeIterator_traverse(this,!0)},c.prototype.previousNode=function(){return u.nodeIterator_traverse(this,!1)},c.prototype.detach=function(){u.nodeIterator_iteratorList().delete(this)},c._create=function(f,h,v){return new c(f,h,v)},c}(s.TraverserImpl);r.NodeIteratorImpl=l},function(n,r,i){var a,o=this&&this.__extends||(a=function(c,f){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(c,f)},function(c,f){function h(){this.constructor=c}a(c,f),c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(2),u=i(103),l=i(0),p=function(c){function f(h,v){var y=c.call(this,h)||this;return y._current=v,y}return o(f,c),Object.defineProperty(f.prototype,"currentNode",{get:function(){return this._current},set:function(h){this._current=h},enumerable:!0,configurable:!0}),f.prototype.parentNode=function(){for(var h=this._current;h!==null&&h!==this._root;)if((h=h._parent)!==null&&l.traversal_filter(this,h)===s.FilterResult.Accept)return this._current=h,h;return null},f.prototype.firstChild=function(){return l.treeWalker_traverseChildren(this,!0)},f.prototype.lastChild=function(){return l.treeWalker_traverseChildren(this,!1)},f.prototype.nextSibling=function(){return l.treeWalker_traverseSiblings(this,!0)},f.prototype.previousNode=function(){for(var h=this._current;h!==this._root;){for(var v=h._previousSibling;v;){h=v;for(var y=l.traversal_filter(this,h);y!==s.FilterResult.Reject&&h._lastChild;)h=h._lastChild,y=l.traversal_filter(this,h);if(y===s.FilterResult.Accept)return this._current=h,h;v=h._previousSibling}if(h===this._root||h._parent===null)return null;if(h=h._parent,l.traversal_filter(this,h)===s.FilterResult.Accept)return this._current=h,h}return null},f.prototype.previousSibling=function(){return l.treeWalker_traverseSiblings(this,!1)},f.prototype.nextNode=function(){for(var h=this._current,v=s.FilterResult.Accept;;){for(;v!==s.FilterResult.Reject&&h._firstChild;)if(h=h._firstChild,(v=l.traversal_filter(this,h))===s.FilterResult.Accept)return this._current=h,h;for(var y=null,x=h;x!==null;){if(x===this._root)return null;if((y=x._nextSibling)!==null){h=y;break}x=x._parent}if((v=l.traversal_filter(this,h))===s.FilterResult.Accept)return this._current=h,h}},f._create=function(h,v){return new f(h,v)},f}(u.TraverserImpl);r.TreeWalkerImpl=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(2),o=i(12),s=function(){function u(){}return u.prototype.acceptNode=function(l){return a.FilterResult.Accept},u._create=function(){return new u},u.FILTER_ACCEPT=1,u.FILTER_REJECT=2,u.FILTER_SKIP=3,u.SHOW_ALL=4294967295,u.SHOW_ELEMENT=1,u.SHOW_ATTRIBUTE=2,u.SHOW_TEXT=4,u.SHOW_CDATA_SECTION=8,u.SHOW_ENTITY_REFERENCE=16,u.SHOW_ENTITY=32,u.SHOW_PROCESSING_INSTRUCTION=64,u.SHOW_COMMENT=128,u.SHOW_DOCUMENT=256,u.SHOW_DOCUMENT_TYPE=512,u.SHOW_DOCUMENT_FRAGMENT=1024,u.SHOW_NOTATION=2048,u}();r.NodeFilterImpl=s,o.idl_defineConst(s.prototype,"FILTER_ACCEPT",1),o.idl_defineConst(s.prototype,"FILTER_REJECT",2),o.idl_defineConst(s.prototype,"FILTER_SKIP",3),o.idl_defineConst(s.prototype,"SHOW_ALL",4294967295),o.idl_defineConst(s.prototype,"SHOW_ELEMENT",1),o.idl_defineConst(s.prototype,"SHOW_ATTRIBUTE",2),o.idl_defineConst(s.prototype,"SHOW_TEXT",4),o.idl_defineConst(s.prototype,"SHOW_CDATA_SECTION",8),o.idl_defineConst(s.prototype,"SHOW_ENTITY_REFERENCE",16),o.idl_defineConst(s.prototype,"SHOW_ENTITY",32),o.idl_defineConst(s.prototype,"SHOW_PROCESSING_INSTRUCTION",64),o.idl_defineConst(s.prototype,"SHOW_COMMENT",128),o.idl_defineConst(s.prototype,"SHOW_DOCUMENT",256),o.idl_defineConst(s.prototype,"SHOW_DOCUMENT_TYPE",512),o.idl_defineConst(s.prototype,"SHOW_DOCUMENT_FRAGMENT",1024),o.idl_defineConst(s.prototype,"SHOW_NOTATION",2048)},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function o(s,u,l,p,c,f,h,v,y){this._type=s,this._target=u,this._addedNodes=l,this._removedNodes=p,this._previousSibling=c,this._nextSibling=f,this._attributeName=h,this._attributeNamespace=v,this._oldValue=y}return Object.defineProperty(o.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"addedNodes",{get:function(){return this._addedNodes},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"removedNodes",{get:function(){return this._removedNodes},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"previousSibling",{get:function(){return this._previousSibling},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"nextSibling",{get:function(){return this._nextSibling},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"attributeName",{get:function(){return this._attributeName},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"attributeNamespace",{get:function(){return this._attributeNamespace},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"oldValue",{get:function(){return this._oldValue},enumerable:!0,configurable:!0}),o._create=function(s,u,l,p,c,f,h,v,y){return new o(s,u,l,p,c,f,h,v,y)},o}();r.MutationRecordImpl=a},function(n,r,i){var a=this&&this.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&c[f],v=0;if(h)return h.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&v>=c.length&&(c=void 0),{value:c&&c[v++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=i(9),u=i(7),l=i(0),p=function(){function c(f,h){this._element=f,this._attribute=h,this._tokenSet=new Set;var v=h._localName,y=l.element_getAnAttributeValue(f,v),x=this;this._element._attributeChangeSteps.push(function(m,g,d,S,T){g===x._attribute._localName&&T===null&&(S?x._tokenSet=l.orderedSet_parse(S):x._tokenSet.clear())}),o.dom.features.steps&&l.dom_runAttributeChangeSteps(f,v,y,y,null)}return Object.defineProperty(c.prototype,"length",{get:function(){return this._tokenSet.size},enumerable:!0,configurable:!0}),c.prototype.item=function(f){var h,v,y=0;try{for(var x=a(this._tokenSet),m=x.next();!m.done;m=x.next()){var g=m.value;if(y===f)return g;y++}}catch(d){h={error:d}}finally{try{m&&!m.done&&(v=x.return)&&v.call(x)}finally{if(h)throw h.error}}return null},c.prototype.contains=function(f){return this._tokenSet.has(f)},c.prototype.add=function(){for(var f,h,v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];try{for(var x=a(v),m=x.next();!m.done;m=x.next()){var g=m.value;if(g==="")throw new s.SyntaxError("Cannot add an empty token.");if(u.codePoint.ASCIIWhiteSpace.test(g))throw new s.InvalidCharacterError("Token cannot contain whitespace.");this._tokenSet.add(g)}}catch(d){f={error:d}}finally{try{m&&!m.done&&(h=x.return)&&h.call(x)}finally{if(f)throw f.error}}l.tokenList_updateSteps(this)},c.prototype.remove=function(){for(var f,h,v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];try{for(var x=a(v),m=x.next();!m.done;m=x.next()){var g=m.value;if(g==="")throw new s.SyntaxError("Cannot remove an empty token.");if(u.codePoint.ASCIIWhiteSpace.test(g))throw new s.InvalidCharacterError("Token cannot contain whitespace.");this._tokenSet.delete(g)}}catch(d){f={error:d}}finally{try{m&&!m.done&&(h=x.return)&&h.call(x)}finally{if(f)throw f.error}}l.tokenList_updateSteps(this)},c.prototype.toggle=function(f,h){if(h===void 0&&(h=void 0),f==="")throw new s.SyntaxError("Cannot toggle an empty token.");if(u.codePoint.ASCIIWhiteSpace.test(f))throw new s.InvalidCharacterError("Token cannot contain whitespace.");return this._tokenSet.has(f)?h!==void 0&&h!==!1||(this._tokenSet.delete(f),l.tokenList_updateSteps(this),!1):(h===void 0||h===!0)&&(this._tokenSet.add(f),l.tokenList_updateSteps(this),!0)},c.prototype.replace=function(f,h){if(f===""||h==="")throw new s.SyntaxError("Cannot replace an empty token.");if(u.codePoint.ASCIIWhiteSpace.test(f)||u.codePoint.ASCIIWhiteSpace.test(h))throw new s.InvalidCharacterError("Token cannot contain whitespace.");return!!this._tokenSet.has(f)&&(u.set.replace(this._tokenSet,f,h),l.tokenList_updateSteps(this),!0)},c.prototype.supports=function(f){return l.tokenList_validationSteps(this,f)},Object.defineProperty(c.prototype,"value",{get:function(){return l.tokenList_serializeSteps(this)},set:function(f){l.element_setAnAttributeValue(this._element,this._attribute._localName,f)},enumerable:!0,configurable:!0}),c.prototype[Symbol.iterator]=function(){var f=this._tokenSet[Symbol.iterator]();return{next:function(){return f.next()}}},c._create=function(f,h){return new c(f,h)},c}();r.DOMTokenListImpl=p},function(n,r,i){var a,o=this&&this.__extends||(a=function(p,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var v in h)h.hasOwnProperty(v)&&(f[v]=h[v])})(p,c)},function(p,c){function f(){this.constructor=p}a(p,c),p.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(104),u=i(0),l=function(p){function c(f,h){var v=p.call(this,f,h)||this;return v._detail=null,v._detail=h&&h.detail||null,v}return o(c,p),Object.defineProperty(c.prototype,"detail",{get:function(){return this._detail},enumerable:!0,configurable:!0}),c.prototype.initCustomEvent=function(f,h,v,y){h===void 0&&(h=!1),v===void 0&&(v=!1),y===void 0&&(y=null),this._dispatchFlag||(u.event_initialize(this,f,h,v),this._detail=y)},c}(s.EventImpl);r.CustomEventImpl=l},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(6),o=i(2),s=i(105),u=i(17);r.nodeIterator_traverse=function(l,p){for(var c=l._reference,f=l._pointerBeforeReference;;){if(p)if(f)f=!1;else{var h=u.tree_getFollowingNode(l._root,c);if(!h)return null;c=h}else if(f){var v=u.tree_getPrecedingNode(l.root,c);if(!v)return null;c=v}else f=!0;if(s.traversal_filter(l,c)===o.FilterResult.Accept)break}return l._reference=c,l._pointerBeforeReference=f,c},r.nodeIterator_iteratorList=function(){return a.dom.window._iteratorList}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(9),o=i(7),s=i(174);function u(l){if(!s.xml_isName(l))throw new a.InvalidCharacterError("Invalid XML name: "+l);if(!s.xml_isQName(l))throw new a.InvalidCharacterError("Invalid XML qualified name: "+l+".")}r.namespace_validate=u,r.namespace_validateAndExtract=function(l,p){l||(l=null),u(p);var c=p.split(":"),f=c.length===2?c[0]:null,h=c.length===2?c[1]:p;if(f&&l===null)throw new a.NamespaceError("Qualified name includes a prefix but the namespace is null.");if(f==="xml"&&l!==o.namespace.XML)throw new a.NamespaceError('Qualified name includes the "xml" prefix but the namespace is not the XML namespace.');if(l!==o.namespace.XMLNS&&(f==="xmlns"||p==="xmlns"))throw new a.NamespaceError('Qualified name includes the "xmlns" prefix but the namespace is not the XMLNS namespace.');if(l===o.namespace.XMLNS&&f!=="xmlns"&&p!=="xmlns")throw new a.NamespaceError('Qualified name does not include the "xmlns" prefix but the namespace is the XMLNS namespace.');return[l,f,h]},r.namespace_extractQName=function(l){u(l);var p=l.split(":");return[p.length===2?p[0]:null,p.length===2?p[1]:l]}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.xml_isName=function(a){for(var o=0;o<a.length;o++){var s=a.charCodeAt(o);if(!(s>=97&&s<=122||s>=65&&s<=90||s===58||s===95||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8204&&s<=8205||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533)&&(o===0||!(s===45||s===46||s>=48&&s<=57||s===183||s>=768&&s<=879||s>=8255&&s<=8256))){if(s>=55296&&s<=56319&&o<a.length-1){var u=a.charCodeAt(o+1);if(u>=56320&&u<=57343&&(o++,(s=1024*(s-55296)+u-56320+65536)>=65536&&s<=983039))continue}return!1}}return!0},r.xml_isQName=function(a){for(var o=!1,s=0;s<a.length;s++){var u=a.charCodeAt(s);if(!(u>=97&&u<=122||u>=65&&u<=90||u===95||u>=192&&u<=214||u>=216&&u<=246||u>=248&&u<=767||u>=880&&u<=893||u>=895&&u<=8191||u>=8204&&u<=8205||u>=8304&&u<=8591||u>=11264&&u<=12271||u>=12289&&u<=55295||u>=63744&&u<=64975||u>=65008&&u<=65533)&&(s===0||!(u===45||u===46||u>=48&&u<=57||u===183||u>=768&&u<=879||u>=8255&&u<=8256))){if(s===0||u!==58){if(u>=55296&&u<=56319&&s<a.length-1){var l=a.charCodeAt(s+1);if(l>=56320&&l<=57343&&(s++,(u=1024*(u-55296)+l-56320+65536)>=65536&&u<=983039))continue}return!1}if(o||s===a.length-1)return!1;o=!0}}return!0},r.xml_isLegalChar=function(a){for(var o=0;o<a.length;o++){var s=a.charCodeAt(o);if(!(s===9||s===10||s===13||s>=32&&s<=55295||s>=57344&&s<=65533)){if(s>=55296&&s<=56319&&o<a.length-1){var u=a.charCodeAt(o+1);if(u>=56320&&u<=57343&&(o++,(s=1024*(s-55296)+u-56320+65536)>=65536&&s<=1114111))continue}return!1}}return!0},r.xml_isPubidChar=function(a){for(var o=0;o<a.length;o++){var s=a.charCodeAt(o);if(!(s>=97&&s<=122||s>=65&&s<=90||s>=39&&s<=59||s===32||s===13||s===10||s>=35&&s<=37||s===33||s===61||s===63||s===64||s===95))return!1}return!0}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(2),o=i(17);r.boundaryPoint_position=function s(u,l){var p=u[0],c=u[1],f=l[0],h=l[1];if(console.assert(o.tree_rootNode(p)===o.tree_rootNode(f),"Boundary points must share the same root node."),p===f)return c===h?a.BoundaryPosition.Equal:c<h?a.BoundaryPosition.Before:a.BoundaryPosition.After;if(o.tree_isFollowing(f,p)){var v=s([f,h],[p,c]);if(v===a.BoundaryPosition.Before)return a.BoundaryPosition.After;if(v===a.BoundaryPosition.After)return a.BoundaryPosition.Before}if(o.tree_isAncestorOf(f,p)){for(var y=f;!o.tree_isChildOf(p,y);)y._parent!==null&&(y=y._parent);if(o.tree_index(y)<c)return a.BoundaryPosition.After}return a.BoundaryPosition.Before}},function(n,r,i){var a=this&&this.__values||function(v){var y=typeof Symbol=="function"&&Symbol.iterator,x=y&&v[y],m=0;if(x)return x.call(v);if(v&&typeof v.length=="number")return{next:function(){return v&&m>=v.length&&(v=void 0),{value:v&&v[m++],done:!v}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=i(3),u=i(7),l=i(29),p=i(108),c=i(30),f=i(37),h=i(52);r.node_stringReplaceAll=function(v,y){var x=null;v!==""&&(x=l.create_text(y._nodeDocument,v)),f.mutation_replaceAll(x,y)},r.node_clone=function v(y,x,m){var g,d,S,T,C;if(x===void 0&&(x=null),m===void 0&&(m=!1),x===null&&(x=y._nodeDocument),s.Guard.isElementNode(y)){C=h.element_createAnElement(x,y._localName,y._namespace,y._namespacePrefix,y._is,!1);try{for(var w=a(y._attributeList),_=w.next();!_.done;_=w.next()){var E=v(_.value,x);h.element_append(E,C)}}catch(A){g={error:A}}finally{try{_&&!_.done&&(d=w.return)&&d.call(w)}finally{if(g)throw g.error}}}else if(s.Guard.isDocumentNode(y)){var D=l.create_document();D._encoding=y._encoding,D._contentType=y._contentType,D._URL=y._URL,D._origin=y._origin,D._type=y._type,D._mode=y._mode,C=D}else if(s.Guard.isDocumentTypeNode(y))C=l.create_documentType(x,y._name,y._publicId,y._systemId);else if(s.Guard.isAttrNode(y)){var O=l.create_attr(x,y.localName);O._namespace=y._namespace,O._namespacePrefix=y._namespacePrefix,O._value=y._value,C=O}else C=s.Guard.isExclusiveTextNode(y)?l.create_text(x,y._data):s.Guard.isCDATASectionNode(y)?l.create_cdataSection(x,y._data):s.Guard.isCommentNode(y)?l.create_comment(x,y._data):s.Guard.isProcessingInstructionNode(y)?l.create_processingInstruction(x,y._target,y._data):s.Guard.isDocumentFragmentNode(y)?l.create_documentFragment(x):Object.create(y);if(s.Guard.isDocumentNode(C)?(C._nodeDocument=C,x=C):C._nodeDocument=x,o.dom.features.steps&&c.dom_runCloningSteps(C,y,x,m),m)try{for(var N=a(y._children),R=N.next();!R.done;R=N.next()){var M=v(R.value,x,!0);f.mutation_append(M,C)}}catch(A){S={error:A}}finally{try{R&&!R.done&&(T=N.return)&&T.call(N)}finally{if(S)throw S.error}}return C},r.node_equals=function v(y,x){var m,g,d,S;if(y._nodeType!==x._nodeType)return!1;if(s.Guard.isDocumentTypeNode(y)&&s.Guard.isDocumentTypeNode(x)){if(y._name!==x._name||y._publicId!==x._publicId||y._systemId!==x._systemId)return!1}else if(s.Guard.isElementNode(y)&&s.Guard.isElementNode(x)){if(y._namespace!==x._namespace||y._namespacePrefix!==x._namespacePrefix||y._localName!==x._localName||y._attributeList.length!==x._attributeList.length)return!1}else if(s.Guard.isAttrNode(y)&&s.Guard.isAttrNode(x)){if(y._namespace!==x._namespace||y._localName!==x._localName||y._value!==x._value)return!1}else if(s.Guard.isProcessingInstructionNode(y)&&s.Guard.isProcessingInstructionNode(x)){if(y._target!==x._target||y._data!==x._data)return!1}else if(s.Guard.isCharacterDataNode(y)&&s.Guard.isCharacterDataNode(x)&&y._data!==x._data)return!1;if(s.Guard.isElementNode(y)&&s.Guard.isElementNode(x)){var T={};try{for(var C=a(y._attributeList),w=C.next();!w.done;w=C.next())T[(D=w.value)._localName]=D}catch(G){m={error:G}}finally{try{w&&!w.done&&(g=C.return)&&g.call(C)}finally{if(m)throw m.error}}try{for(var _=a(x._attributeList),E=_.next();!E.done;E=_.next()){var D,O=E.value;if(!(D=T[O._localName])||!v(D,O))return!1}}catch(G){d={error:G}}finally{try{E&&!E.done&&(S=_.return)&&S.call(_)}finally{if(d)throw d.error}}}if(y._children.size!==x._children.size)return!1;for(var N=y._children[Symbol.iterator](),R=x._children[Symbol.iterator](),M=N.next(),A=R.next();!M.done&&!A.done;){if(!v(M.value,A.value))return!1;M=N.next(),A=R.next()}return!0},r.node_listOfElementsWithQualifiedName=function(v,y){return v==="*"?l.create_htmlCollection(y):y._nodeDocument._type==="html"?l.create_htmlCollection(y,function(x){return x._namespace===u.namespace.HTML&&x._qualifiedName===v.toLowerCase()||x._namespace!==u.namespace.HTML&&x._qualifiedName===v}):l.create_htmlCollection(y,function(x){return x._qualifiedName===v})},r.node_listOfElementsWithNamespace=function(v,y,x){return v===""&&(v=null),v==="*"&&y==="*"?l.create_htmlCollection(x):v==="*"?l.create_htmlCollection(x,function(m){return m._localName===y}):y==="*"?l.create_htmlCollection(x,function(m){return m._namespace===v}):l.create_htmlCollection(x,function(m){return m._localName===y&&m._namespace===v})},r.node_listOfElementsWithClassNames=function(v,y){var x=p.orderedSet_parse(v);if(x.size===0)return l.create_htmlCollection(y,function(){return!1});var m=y._nodeDocument._mode!=="quirks";return l.create_htmlCollection(y,function(g){var d=g.classList;return p.orderedSet_contains(d._tokenSet,x,m)})},r.node_locateANamespacePrefix=function v(y,x){if(y._namespace===x&&y._namespacePrefix!==null)return y._namespacePrefix;for(var m=0;m<y._attributeList.length;m++){var g=y._attributeList[m];if(g._namespacePrefix==="xmlns"&&g._value===x)return g._localName}return y._parent&&s.Guard.isElementNode(y._parent)?v(y._parent,x):null},r.node_locateANamespace=function v(y,x){if(s.Guard.isElementNode(y)){if(y._namespace!==null&&y._namespacePrefix===x)return y._namespace;for(var m=0;m<y._attributeList.length;m++){var g=y._attributeList[m];if(g._namespace===u.namespace.XMLNS&&g._namespacePrefix==="xmlns"&&g._localName===x||x===null&&g._namespace===u.namespace.XMLNS&&g._namespacePrefix===null&&g._localName==="xmlns")return g._value||null}return y.parentElement===null?null:v(y.parentElement,x)}return s.Guard.isDocumentNode(y)?y.documentElement===null?null:v(y.documentElement,x):s.Guard.isDocumentTypeNode(y)||s.Guard.isDocumentFragmentNode(y)?null:s.Guard.isAttrNode(y)?y._element===null?null:v(y._element,x):y._parent&&s.Guard.isElementNode(y._parent)?v(y._parent,x):null}},function(n,r,i){var a=this&&this.__values||function(h){var v=typeof Symbol=="function"&&Symbol.iterator,y=v&&h[v],x=0;if(y)return y.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&x>=h.length&&(h=void 0),{value:h&&h[x++],done:!h}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=i(3),u=i(9),l=i(29),p=i(17),c=i(107),f=i(37);r.text_contiguousTextNodes=function(h,v){var y;return v===void 0&&(v=!1),(y={})[Symbol.iterator]=function(){for(var x=h;x&&s.Guard.isTextNode(x._previousSibling);)x=x._previousSibling;return{next:function(){if(x&&!v&&x===h&&(x=s.Guard.isTextNode(x._nextSibling)?x._nextSibling:null),x===null)return{done:!0,value:null};var m={done:!1,value:x};return x=s.Guard.isTextNode(x._nextSibling)?x._nextSibling:null,m}}},y},r.text_contiguousExclusiveTextNodes=function(h,v){var y;return v===void 0&&(v=!1),(y={})[Symbol.iterator]=function(){for(var x=h;x&&s.Guard.isExclusiveTextNode(x._previousSibling);)x=x._previousSibling;return{next:function(){if(x&&!v&&x===h&&(x=s.Guard.isExclusiveTextNode(x._nextSibling)?x._nextSibling:null),x===null)return{done:!0,value:null};var m={done:!1,value:x};return x=s.Guard.isExclusiveTextNode(x._nextSibling)?x._nextSibling:null,m}}},y},r.text_descendantTextContent=function(h){for(var v="",y=p.tree_getFirstDescendantNode(h,!1,!1,function(x){return s.Guard.isTextNode(x)});y!==null;)v+=y._data,y=p.tree_getNextDescendantNode(h,y,!1,!1,function(x){return s.Guard.isTextNode(x)});return v},r.text_split=function(h,v){var y,x,m=h._data.length;if(v>m)throw new u.IndexSizeError;var g=m-v,d=c.characterData_substringData(h,v,g),S=l.create_text(h._nodeDocument,d),T=h._parent;if(T!==null){f.mutation_insert(S,T,h._nextSibling);try{for(var C=a(o.dom.rangeList),w=C.next();!w.done;w=C.next()){var _=w.value;_._start[0]===h&&_._start[1]>v&&(_._start[0]=S,_._start[1]-=v),_._end[0]===h&&_._end[1]>v&&(_._end[0]=S,_._end[1]-=v);var E=p.tree_index(h);_._start[0]===T&&_._start[1]===E+1&&_._start[1]++,_._end[0]===T&&_._end[1]===E+1&&_._end[1]++}}catch(D){y={error:D}}finally{try{w&&!w.done&&(x=C.return)&&x.call(C)}finally{if(y)throw y.error}}}return c.characterData_replaceData(h,v,g,""),S}},function(n,r,i){var a=i(4),o=i(41),s=i(24),u=i(48),l=[].join,p=o!=Object,c=u("join",",");a({target:"Array",proto:!0,forced:p||!c},{join:function(f){return l.call(s(this),f===void 0?",":f)}})},function(n,r,i){var a=i(4),o=i(83),s=String.fromCharCode,u=String.fromCodePoint;a({target:"String",stat:!0,forced:!!u&&u.length!=1},{fromCodePoint:function(l){for(var p,c=[],f=arguments.length,h=0;f>h;){if(p=+arguments[h++],o(p,1114111)!==p)throw RangeError(p+" is not a valid code point");c.push(p<65536?s(p):s(55296+((p-=65536)>>10),p%1024+56320))}return c.join("")}})},function(n,r,i){var a=this&&this.__read||function(u,l){var p=typeof Symbol=="function"&&u[Symbol.iterator];if(!p)return u;var c,f,h=p.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(c=h.next()).done;)v.push(c.value)}catch(y){f={error:y}}finally{try{c&&!c.done&&(p=h.return)&&p.call(h)}finally{if(f)throw f.error}}return v};Object.defineProperty(r,"__esModule",{value:!0});var o=i(111),s=function(){function u(l,p){this._options={skipWhitespaceOnlyText:!1},this.err={line:-1,col:-1,index:-1,str:""},this._str=l,this._index=0,this._length=l.length,p&&(this._options.skipWhitespaceOnlyText=p.skipWhitespaceOnlyText||!1)}return u.prototype.nextToken=function(){if(this.eof())return{type:o.TokenType.EOF};var l=this.skipIfStartsWith("<")?this.openBracket():this.text();return this._options.skipWhitespaceOnlyText&&l.type===o.TokenType.Text&&u.isWhiteSpaceToken(l)&&(l=this.nextToken()),l},u.prototype.openBracket=function(){return this.skipIfStartsWith("?")?this.skipIfStartsWith("xml")?u.isSpace(this._str[this._index])?this.declaration():(this.seek(-3),this.pi()):this.pi():this.skipIfStartsWith("!")?this.skipIfStartsWith("--")?this.comment():this.skipIfStartsWith("[CDATA[")?this.cdata():this.skipIfStartsWith("DOCTYPE")?this.doctype():void this.throwError("Invalid '!' in opening tag."):this.skipIfStartsWith("/")?this.closeTag():this.openTag()},u.prototype.declaration=function(){for(var l="",p="",c="";!this.eof();){if(this.skipSpace(),this.skipIfStartsWith("?>"))return{type:o.TokenType.Declaration,version:l,encoding:p,standalone:c};var f=a(this.attribute(),2),h=f[0],v=f[1];h==="version"?l=v:h==="encoding"?p=v:h==="standalone"?c=v:this.throwError("Invalid attribute name: "+h)}this.throwError("Missing declaration end symbol `?>`")},u.prototype.doctype=function(){var l="",p="";this.skipSpace();var c=this.takeUntil2("[",">",!0);return this.skipSpace(),this.skipIfStartsWith("PUBLIC")?(l=this.quotedString(),p=this.quotedString()):this.skipIfStartsWith("SYSTEM")&&(p=this.quotedString()),this.skipSpace(),this.skipIfStartsWith("[")&&(this.skipUntil("]"),this.skipIfStartsWith("]")||this.throwError("Missing end bracket of DTD internal subset")),this.skipSpace(),this.skipIfStartsWith(">")||this.throwError("Missing doctype end symbol `>`"),{type:o.TokenType.DocType,name:c,pubId:l,sysId:p}},u.prototype.pi=function(){var l=this.takeUntilStartsWith("?>",!0);if(this.eof()&&this.throwError("Missing processing instruction end symbol `?>`"),this.skipSpace(),this.skipIfStartsWith("?>"))return{type:o.TokenType.PI,target:l,data:""};var p=this.takeUntilStartsWith("?>");return this.eof()&&this.throwError("Missing processing instruction end symbol `?>`"),this.seek(2),{type:o.TokenType.PI,target:l,data:p}},u.prototype.text=function(){var l=this.takeUntil("<");return{type:o.TokenType.Text,data:l}},u.prototype.comment=function(){var l=this.takeUntilStartsWith("-->");return this.eof()&&this.throwError("Missing comment end symbol `-->`"),this.seek(3),{type:o.TokenType.Comment,data:l}},u.prototype.cdata=function(){var l=this.takeUntilStartsWith("]]>");return this.eof()&&this.throwError("Missing CDATA end symbol `]>`"),this.seek(3),{type:o.TokenType.CDATA,data:l}},u.prototype.openTag=function(){this.skipSpace();var l=this.takeUntil2(">","/",!0);if(this.skipSpace(),this.skipIfStartsWith(">"))return{type:o.TokenType.Element,name:l,attributes:[],selfClosing:!1};if(this.skipIfStartsWith("/>"))return{type:o.TokenType.Element,name:l,attributes:[],selfClosing:!0};for(var p=[];!this.eof();){if(this.skipSpace(),this.skipIfStartsWith(">"))return{type:o.TokenType.Element,name:l,attributes:p,selfClosing:!1};if(this.skipIfStartsWith("/>"))return{type:o.TokenType.Element,name:l,attributes:p,selfClosing:!0};var c=this.attribute();p.push(c)}this.throwError("Missing opening element tag end symbol `>`")},u.prototype.closeTag=function(){this.skipSpace();var l=this.takeUntil(">",!0);return this.skipSpace(),this.skipIfStartsWith(">")||this.throwError("Missing closing element tag end symbol `>`"),{type:o.TokenType.ClosingTag,name:l}},u.prototype.attribute=function(){this.skipSpace();var l=this.takeUntil("=",!0);return this.skipSpace(),this.skipIfStartsWith("=")||this.throwError("Missing equals sign before attribute value"),[l,this.quotedString()]},u.prototype.quotedString=function(){this.skipSpace();var l=this.take(1);u.isQuote(l)||this.throwError("Missing start quote character before quoted value");var p=this.takeUntil(l);return this.skipIfStartsWith(l)||this.throwError("Missing end quote character after quoted value"),p},u.prototype.eof=function(){return this._index>=this._length},u.prototype.skipIfStartsWith=function(l){var p=l.length;if(p===1)return this._str[this._index]===l&&(this._index++,!0);for(var c=0;c<p;c++)if(this._str[this._index+c]!==l[c])return!1;return this._index+=p,!0},u.prototype.seek=function(l){this._index+=l,this._index<0&&(this._index=0),this._index>this._length&&(this._index=this._length)},u.prototype.skipSpace=function(){for(;!this.eof()&&u.isSpace(this._str[this._index]);)this._index++},u.prototype.take=function(l){if(l===1)return this._str[this._index++];var p=this._index;return this.seek(l),this._str.slice(p,this._index)},u.prototype.takeUntil=function(l,p){p===void 0&&(p=!1);for(var c=this._index;this._index<this._length;){var f=this._str[this._index];if(f===l||p&&u.isSpace(f))break;this._index++}return this._str.slice(c,this._index)},u.prototype.takeUntil2=function(l,p,c){c===void 0&&(c=!1);for(var f=this._index;this._index<this._length;){var h=this._str[this._index];if(h===l||h===p||c&&u.isSpace(h))break;this._index++}return this._str.slice(f,this._index)},u.prototype.takeUntilStartsWith=function(l,p){p===void 0&&(p=!1);for(var c=this._index,f=l.length;this._index<this._length;){for(var h=!0,v=0;v<f;v++){var y=this._str[this._index+v],x=l[v];if(p&&u.isSpace(y))return this._str.slice(c,this._index);if(y!==x){this._index++,h=!1;break}}if(h)return this._str.slice(c,this._index)}return this._index=this._length,this._str.slice(c)},u.prototype.skipUntil=function(l){for(;this._index<this._length&&this._str[this._index]!==l;)this._index++},u.isWhiteSpaceToken=function(l){for(var p=l.data,c=0;c<p.length;c++){var f=p[c];if(f!==" "&&f!==`
`&&f!=="\r"&&f!=="	"&&f!=="\f")return!1}return!0},u.isSpace=function(l){return l===" "||l===`
`||l==="\r"||l==="	"},u.isQuote=function(l){return l==='"'||l==="'"},u.prototype.throwError=function(l){for(var p=/\r\n|\r|\n/g,c=null,f=0,h=0,v=this._str.length;(c=p.exec(this._str))!==null&&c!==null;)if(f++,c.index<this._index&&(h=p.lastIndex),c.index>this._index){v=c.index;break}throw this.err={line:f,col:this._index-h,index:this._index,str:this._str.substring(h,v)},new Error(l+`
Index: `+this.err.index+`
Ln: `+this.err.line+", Col: "+this.err.col+`
Input: `+this.err.str)},u.prototype[Symbol.iterator]=function(){return this._index=0,{next:(function(){var l=this.nextToken();return l.type===o.TokenType.EOF?{done:!0,value:null}:{done:!1,value:l}}).bind(this)}},u}();r.XMLStringLexer=s},function(n,r,i){var a=i(39);n.exports=new a({include:[i(182)]})},function(n,r,i){var a=i(39);n.exports=new a({include:[i(113)],implicit:[i(289),i(290),i(291),i(292)]})},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(91),o=i(1),s=i(3),u=i(77),l=i(109);function p(v,y){var x=f(v===void 0||c(v)?v:a.DefaultBuilderOptions),m=c(v)?y:v,g=l.createDocument();h(g,x);var d=new u.XMLBuilderImpl(g);return m!==void 0&&d.ele(m),d}function c(v){if(!o.isPlainObject(v))return!1;for(var y in v)if(v.hasOwnProperty(y)&&!a.XMLBuilderOptionKeys.has(y))return!1;return!0}function f(v){v===void 0&&(v={});var y=o.applyDefaults(v,a.DefaultBuilderOptions);if(y.convert.att.length===0||y.convert.ins.length===0||y.convert.text.length===0||y.convert.cdata.length===0||y.convert.comment.length===0)throw new Error("JS object converter strings cannot be zero length.");return y}function h(v,y,x){var m=v;m._xmlBuilderOptions=y,m._isFragment=x}r.builder=function(v,y){var x=f(c(v)?v:a.DefaultBuilderOptions),m=s.Guard.isNode(v)||o.isArray(v)?v:y;if(m===void 0)throw new Error("Invalid arguments.");if(o.isArray(m)){for(var g=[],d=0;d<m.length;d++){var S=new u.XMLBuilderImpl(m[d]);S.set(x),g.push(S)}return g}var T=new u.XMLBuilderImpl(m);return T.set(x),T},r.create=p,r.fragment=function(v,y){var x=f(v===void 0||c(v)?v:a.DefaultBuilderOptions),m=c(v)?y:v,g=l.createDocument();h(g,x,!0);var d=new u.XMLBuilderImpl(g.createDocumentFragment());return m!==void 0&&d.ele(m),d},r.convert=function(v,y,x){var m,g,d;return c(v)&&y!==void 0?(m=v,g=y,d=x):(m=a.DefaultBuilderOptions,g=v,d=y||void 0),p(m,g).end(d)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(77);r.builder=a.builder,r.create=a.create,r.fragment=a.fragment,r.convert=a.convert,r.createCB=a.createCB,r.fragmentCB=a.fragmentCB},function(n,r,i){i(31),i(32),i(33),i(191),i(192),i(194),i(64),i(19),i(198),i(199),i(89),i(201),i(65),i(20),i(66),i(22),i(23);var a=this&&this.__read||function(m,g){var d=typeof Symbol=="function"&&m[Symbol.iterator];if(!d)return m;var S,T,C=d.call(m),w=[];try{for(;(g===void 0||g-- >0)&&!(S=C.next()).done;)w.push(S.value)}catch(_){T={error:_}}finally{try{S&&!S.done&&(d=C.return)&&d.call(C)}finally{if(T)throw T.error}}return w},o=this&&this.__values||function(m){var g=typeof Symbol=="function"&&Symbol.iterator,d=g&&m[g],S=0;if(d)return d.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&S>=m.length&&(m=void 0),{value:m&&m[S++],done:!m}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=i(91),u=i(1),l=i(217),p=i(2),c=i(3),f=i(0),h=i(109),v=i(7),y=i(276),x=function(){function m(g){this._domNode=g}return Object.defineProperty(m.prototype,"node",{get:function(){return this._domNode},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),m.prototype.set=function(g){return this._options=u.applyDefaults(u.applyDefaults(this._options,g,!0),s.DefaultBuilderOptions),this},m.prototype.ele=function(g,d,S){var T,C,w,_,E,D;if(u.isObject(g))return new y.ObjectReader(this._options).parse(this,g);if(g!==null&&/^\s*</.test(g))return new y.XMLReader(this._options).parse(this,g);if(g!==null&&/^\s*[\{\[]/.test(g))return new y.JSONReader(this._options).parse(this,g);if(g!==null&&/^(\s*|(#.*)|(%.*))*---/.test(g))return new y.YAMLReader(this._options).parse(this,g);if((g===null||u.isString(g))&&u.isString(d))_=(T=a([g,d,S],3))[0],E=T[1],D=T[2];else{if(g===null)throw new Error("Element name cannot be null. "+this._debugInfo());_=(C=a([void 0,g,u.isObject(d)?d:void 0],3))[0],E=C[1],D=C[2]}if(D&&(D=u.getValue(D)),_=(w=a(this._extractNamespace(h.sanitizeInput(_,this._options.invalidCharReplacement),h.sanitizeInput(E,this._options.invalidCharReplacement),!0),2))[0],E=w[1],_===void 0){var O=a(f.namespace_extractQName(E),1)[0];_=this.node.lookupNamespaceURI(O)}var N=_!=null?this._doc.createElementNS(_,E):this._doc.createElement(E);this.node.appendChild(N);var R=new m(N),M=this._doc.doctype;if(N===this._doc.documentElement&&M!==null){var A=this._doc.implementation.createDocumentType(this._doc.documentElement.tagName,M.publicId,M.systemId);this._doc.replaceChild(A,M)}return D&&!u.isEmpty(D)&&R.att(D),R},m.prototype.remove=function(){var g=this.up();return g.node.removeChild(this.node),g},m.prototype.att=function(g,d,S){var T,C,w,_,E,D,O=this;if(u.isMap(g)||u.isObject(g))return u.forEachObject(g,function(k,F){return O.att(k,F)},this),this;if(g!=null&&(g=u.getValue(g+"")),d!=null&&(d=u.getValue(d+"")),S!=null&&(S=u.getValue(S+"")),g!==null&&!u.isString(g)||!u.isString(d)||S!==null&&!u.isString(S)){if(!u.isString(g)||d!=null&&!u.isString(d))throw new Error("Attribute name and value not specified. "+this._debugInfo());_=(C=a([void 0,g,d],3))[0],E=C[1],D=C[2]}else _=(T=a([g,d,S],3))[0],E=T[1],D=T[2];if(this._options.keepNullAttributes&&D==null)D="";else if(D==null)return this;if(!c.Guard.isElementNode(this.node))throw new Error("An attribute can only be assigned to an element node.");var N=this.node;_=(w=a(this._extractNamespace(_,E,!1),2))[0],E=w[1],E=h.sanitizeInput(E,this._options.invalidCharReplacement),_=h.sanitizeInput(_,this._options.invalidCharReplacement),D=h.sanitizeInput(D,this._options.invalidCharReplacement);var R=a(f.namespace_extractQName(E),2),M=R[0],A=R[1],G=a(f.namespace_extractQName(N.prefix?N.prefix+":"+N.localName:N.localName),1)[0],j=null;return M==="xmlns"?(_=v.namespace.XMLNS,N.namespaceURI===null&&G===A&&(j=D)):M===null&&A==="xmlns"&&G===null&&(_=v.namespace.XMLNS,j=D),j!==null&&(this._updateNamespace(j),N=this.node),_!==void 0?N.setAttributeNS(_,E,D):N.setAttribute(E,D),this},m.prototype.removeAtt=function(g,d){var S,T,C=this;if(!c.Guard.isElementNode(this.node))throw new Error("An attribute can only be removed from an element node.");if(g=u.getValue(g),d!==void 0&&(d=u.getValue(d)),g!==null&&d===void 0)T=g;else{if(g!==null&&!u.isString(g)||d===void 0)throw new Error("Attribute namespace must be a string. "+this._debugInfo());S=g,T=d}return u.isArray(T)||u.isSet(T)?u.forEachArray(T,function(w){return S===void 0?C.removeAtt(w):C.removeAtt(S,w)},this):S!==void 0?(T=h.sanitizeInput(T,this._options.invalidCharReplacement),S=h.sanitizeInput(S,this._options.invalidCharReplacement),this.node.removeAttributeNS(S,T)):(T=h.sanitizeInput(T,this._options.invalidCharReplacement),this.node.removeAttribute(T)),this},m.prototype.txt=function(g){if(g==null){if(!this._options.keepNullNodes)return this;g=""}var d=this._doc.createTextNode(h.sanitizeInput(g,this._options.invalidCharReplacement));return this.node.appendChild(d),this},m.prototype.com=function(g){if(g==null){if(!this._options.keepNullNodes)return this;g=""}var d=this._doc.createComment(h.sanitizeInput(g,this._options.invalidCharReplacement));return this.node.appendChild(d),this},m.prototype.dat=function(g){if(g==null){if(!this._options.keepNullNodes)return this;g=""}var d=this._doc.createCDATASection(h.sanitizeInput(g,this._options.invalidCharReplacement));return this.node.appendChild(d),this},m.prototype.ins=function(g,d){var S=this;if(d===void 0&&(d=""),d==null){if(!this._options.keepNullNodes)return this;d=""}if(u.isArray(g)||u.isSet(g))u.forEachArray(g,function(C){var w=(C+="").indexOf(" "),_=w===-1?C:C.substr(0,w),E=w===-1?"":C.substr(w+1);S.ins(_,E)},this);else if(u.isMap(g)||u.isObject(g))u.forEachObject(g,function(C,w){return S.ins(C,w)},this);else{var T=this._doc.createProcessingInstruction(h.sanitizeInput(g,this._options.invalidCharReplacement),h.sanitizeInput(d,this._options.invalidCharReplacement));this.node.appendChild(T)}return this},m.prototype.dec=function(g){return this._options.version=g.version||"1.0",this._options.encoding=g.encoding,this._options.standalone=g.standalone,this},m.prototype.dtd=function(g){var d=h.sanitizeInput(g&&g.name||(this._doc.documentElement?this._doc.documentElement.tagName:"ROOT"),this._options.invalidCharReplacement),S=h.sanitizeInput(g&&g.pubID||"",this._options.invalidCharReplacement),T=h.sanitizeInput(g&&g.sysID||"",this._options.invalidCharReplacement);if(this._doc.documentElement!==null&&d!==this._doc.documentElement.tagName)throw new Error("DocType name does not match document element name.");var C=this._doc.implementation.createDocumentType(d,S,T);return this._doc.doctype!==null?this._doc.replaceChild(C,this._doc.doctype):this._doc.insertBefore(C,this._doc.documentElement),this},m.prototype.import=function(g){var d,S,T=this._domNode,C=this._doc,w=g.node;if(c.Guard.isDocumentNode(w)){var _=w.documentElement;if(_===null)throw new Error("Imported document has no document element node. "+this._debugInfo());var E=C.importNode(_,!0);T.appendChild(E);var D=a(f.namespace_extractQName(E.prefix?E.prefix+":"+E.localName:E.localName),1)[0],O=T.lookupNamespaceURI(D);new m(E)._updateNamespace(O)}else if(c.Guard.isDocumentFragmentNode(w))try{for(var N=o(w.childNodes),R=N.next();!R.done;R=N.next()){var M=R.value;E=C.importNode(M,!0),T.appendChild(E),c.Guard.isElementNode(E)&&(D=a(f.namespace_extractQName(E.prefix?E.prefix+":"+E.localName:E.localName),1)[0],O=T.lookupNamespaceURI(D),new m(E)._updateNamespace(O))}}catch(A){d={error:A}}finally{try{R&&!R.done&&(S=N.return)&&S.call(N)}finally{if(d)throw d.error}}else E=C.importNode(w,!0),T.appendChild(E),c.Guard.isElementNode(E)&&(D=a(f.namespace_extractQName(E.prefix?E.prefix+":"+E.localName:E.localName),1)[0],O=T.lookupNamespaceURI(D),new m(E)._updateNamespace(O));return this},m.prototype.doc=function(){if(this._doc._isFragment){for(var g=this.node;g&&g.nodeType!==p.NodeType.DocumentFragment;)g=g.parentNode;if(g===null)throw new Error("Node has no parent node while searching for document fragment ancestor. "+this._debugInfo());return new m(g)}return new m(this._doc)},m.prototype.root=function(){var g=this._doc.documentElement;if(!g)throw new Error("Document root element is null. "+this._debugInfo());return new m(g)},m.prototype.up=function(){var g=this._domNode.parentNode;if(!g)throw new Error("Parent node is null. "+this._debugInfo());return new m(g)},m.prototype.prev=function(){var g=this._domNode.previousSibling;if(!g)throw new Error("Previous sibling node is null. "+this._debugInfo());return new m(g)},m.prototype.next=function(){var g=this._domNode.nextSibling;if(!g)throw new Error("Next sibling node is null. "+this._debugInfo());return new m(g)},m.prototype.first=function(){var g=this._domNode.firstChild;if(!g)throw new Error("First child node is null. "+this._debugInfo());return new m(g)},m.prototype.last=function(){var g=this._domNode.lastChild;if(!g)throw new Error("Last child node is null. "+this._debugInfo());return new m(g)},m.prototype.each=function(g,d,S,T){d===void 0&&(d=!1),S===void 0&&(S=!1);for(var C=this._getFirstDescendantNode(this._domNode,d,S);C[0];){var w=this._getNextDescendantNode(this._domNode,C[0],S,C[1],C[2]);g.call(T,new m(C[0]),C[1],C[2]),C=w}return this},m.prototype.map=function(g,d,S,T){d===void 0&&(d=!1),S===void 0&&(S=!1);var C=[];return this.each(function(w,_,E){return C.push(g.call(T,w,_,E))},d,S),C},m.prototype.reduce=function(g,d,S,T,C){S===void 0&&(S=!1),T===void 0&&(T=!1);var w=d;return this.each(function(_,E,D){return w=g.call(C,w,_,E,D)},S,T),w},m.prototype.find=function(g,d,S,T){d===void 0&&(d=!1),S===void 0&&(S=!1);for(var C=this._getFirstDescendantNode(this._domNode,d,S);C[0];){var w=new m(C[0]);if(g.call(T,w,C[1],C[2]))return w;C=this._getNextDescendantNode(this._domNode,C[0],S,C[1],C[2])}},m.prototype.filter=function(g,d,S,T){d===void 0&&(d=!1),S===void 0&&(S=!1);var C=[];return this.each(function(w,_,E){g.call(T,w,_,E)&&C.push(w)},d,S),C},m.prototype.every=function(g,d,S,T){d===void 0&&(d=!1),S===void 0&&(S=!1);for(var C=this._getFirstDescendantNode(this._domNode,d,S);C[0];){var w=new m(C[0]);if(!g.call(T,w,C[1],C[2]))return!1;C=this._getNextDescendantNode(this._domNode,C[0],S,C[1],C[2])}return!0},m.prototype.some=function(g,d,S,T){d===void 0&&(d=!1),S===void 0&&(S=!1);for(var C=this._getFirstDescendantNode(this._domNode,d,S);C[0];){var w=new m(C[0]);if(g.call(T,w,C[1],C[2]))return!0;C=this._getNextDescendantNode(this._domNode,C[0],S,C[1],C[2])}return!1},m.prototype.toArray=function(g,d){g===void 0&&(g=!1),d===void 0&&(d=!1);var S=[];return this.each(function(T){return S.push(T)},g,d),S},m.prototype.toString=function(g){return(g=g||{}).format===void 0&&(g.format="xml"),this._serialize(g)},m.prototype.toObject=function(g){return(g=g||{}).format===void 0&&(g.format="object"),this._serialize(g)},m.prototype.end=function(g){return(g=g||{}).format===void 0&&(g.format="xml"),this.doc()._serialize(g)},m.prototype._getFirstDescendantNode=function(g,d,S){return d?[this._domNode,0,0]:S?this._getNextDescendantNode(g,g,S,0,0):[this._domNode.firstChild,0,1]},m.prototype._getNextDescendantNode=function(g,d,S,T,C){if(!S)return g===d?[d.firstChild,0,C+1]:[d.nextSibling,T+1,C];if(d.firstChild)return[d.firstChild,0,C+1];if(d===g)return[null,-1,-1];if(d.nextSibling)return[d.nextSibling,T+1,C];for(var w=d.parentNode;w&&w!==g;){if(w.nextSibling)return[w.nextSibling,f.tree_index(w.nextSibling),C-1];w=w.parentNode,C--}return[null,-1,-1]},m.prototype._serialize=function(g){if(g.format==="xml")return new l.XMLWriter(this._options,g).serialize(this.node);if(g.format==="map")return new l.MapWriter(this._options,g).serialize(this.node);if(g.format==="object")return new l.ObjectWriter(this._options,g).serialize(this.node);if(g.format==="json")return new l.JSONWriter(this._options,g).serialize(this.node);if(g.format==="yaml")return new l.YAMLWriter(this._options,g).serialize(this.node);throw new Error("Invalid writer format: "+g.format+". "+this._debugInfo())},m.prototype._extractNamespace=function(g,d,S){var T=d.indexOf("@");if(T>0&&(g===void 0&&(g=d.slice(T+1)),d=d.slice(0,T)),g===void 0)g=S?this._options.defaultNamespace.ele:this._options.defaultNamespace.att;else if(g!==null&&g[0]==="@"){var C=g.slice(1);if((g=this._options.namespaceAlias[C])===void 0)throw new Error("Namespace alias `"+C+"` is not defined. "+this._debugInfo())}return[g,d]},m.prototype._updateNamespace=function(g){var d,S,T,C,w=this._domNode;if(c.Guard.isElementNode(w)&&g!==null&&w.namespaceURI!==g){var _=a(f.namespace_extractQName(w.prefix?w.prefix+":"+w.localName:w.localName),2),E=_[0],D=_[1],O=f.create_element(this._doc,D,g,E);try{for(var N=o(w.attributes),R=N.next();!R.done;R=N.next()){var M=R.value,A=M.prefix?M.prefix+":"+M.localName:M.localName,G=a(f.namespace_extractQName(A),1)[0],j=M.namespaceURI;j===null&&G!==null&&(j=w.lookupNamespaceURI(G)),j===null?O.setAttribute(A,M.value):O.setAttributeNS(j,A,M.value)}}catch(J){d={error:J}}finally{try{R&&!R.done&&(S=N.return)&&S.call(N)}finally{if(d)throw d.error}}var k=w.parentNode;if(k===null)throw new Error("Parent node is null."+this._debugInfo());k.replaceChild(O,w),this._domNode=O;try{for(var F=o(w.childNodes),B=F.next();!B.done;B=F.next()){var $=B.value.cloneNode(!0);if(O.appendChild($),c.Guard.isElementNode($)){var H=a(f.namespace_extractQName($.prefix?$.prefix+":"+$.localName:$.localName),1)[0],X=O.lookupNamespaceURI(H);new m($)._updateNamespace(X)}}}catch(J){T={error:J}}finally{try{B&&!B.done&&(C=F.return)&&C.call(F)}finally{if(T)throw T.error}}}},Object.defineProperty(m.prototype,"_doc",{get:function(){var g=this.node;if(c.Guard.isDocumentNode(g))return g;var d=g.ownerDocument;if(!d)throw new Error("Owner document is null. "+this._debugInfo());return d},enumerable:!0,configurable:!0}),m.prototype._debugInfo=function(g){var d=this.node,S=d.parentNode;g=g||d.nodeName;var T=S?S.nodeName:"";return T?"node: <"+g+">, parent: <"+T+">":"node: <"+g+">"},Object.defineProperty(m.prototype,"_options",{get:function(){var g=this._doc;if(g._xmlBuilderOptions===void 0)throw new Error("Builder options is not set.");return g._xmlBuilderOptions},set:function(g){this._doc._xmlBuilderOptions=g},enumerable:!0,configurable:!0}),m}();r.XMLBuilderImpl=x},function(n,r,i){var a=i(11),o=i(117),s=a.WeakMap;n.exports=typeof s=="function"&&/native code/.test(o(s))},function(n,r,i){var a=i(46),o=i(82),s=i(85),u=i(18);n.exports=a("Reflect","ownKeys")||function(l){var p=o.f(u(l)),c=s.f;return c?p.concat(c(l)):p}},function(n,r,i){var a=i(16),o=i(15),s=i(18),u=i(61);n.exports=a?Object.defineProperties:function(l,p){s(l);for(var c,f=u(p),h=f.length,v=0;h>v;)o.f(l,c=f[v++],p[c]);return l}},function(n,r,i){var a=i(46);n.exports=a("document","documentElement")},function(n,r,i){var a=i(24),o=i(82).f,s={}.toString,u=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(l){return u&&s.call(l)=="[object Window]"?function(p){try{return o(p)}catch{return u.slice()}}(l):o(a(l))}},function(n,r,i){var a=i(4),o=i(36).every,s=i(48),u=i(28),l=s("every"),p=u("every");a({target:"Array",proto:!0,forced:!l||!p},{every:function(c){return o(this,c,arguments.length>1?arguments[1]:void 0)}})},function(n,r,i){var a=i(4),o=i(36).filter,s=i(63),u=i(28),l=s("filter"),p=u("filter");a({target:"Array",proto:!0,forced:!l||!p},{filter:function(c){return o(this,c,arguments.length>1?arguments[1]:void 0)}})},function(n,r,i){var a=i(46);n.exports=a("navigator","userAgent")||""},function(n,r,i){var a=i(4),o=i(36).find,s=i(130),u=i(28),l=!0,p=u("find");"find"in[]&&Array(1).find(function(){l=!1}),a({target:"Array",proto:!0,forced:l||!p},{find:function(c){return o(this,c,arguments.length>1?arguments[1]:void 0)}}),s("find")},function(n,r,i){var a=i(131).IteratorPrototype,o=i(60),s=i(40),u=i(62),l=i(49),p=function(){return this};n.exports=function(c,f,h){var v=f+" Iterator";return c.prototype=o(a,{next:s(1,h)}),u(c,v,!1,!0),l[v]=p,c}},function(n,r,i){var a=i(8);n.exports=!a(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},function(n,r,i){var a=i(13);n.exports=function(o){if(!a(o)&&o!==null)throw TypeError("Can't set "+String(o)+" as a prototype");return o}},function(n,r,i){var a=i(4),o=i(36).map,s=i(63),u=i(28),l=s("map"),p=u("map");a({target:"Array",proto:!0,forced:!l||!p},{map:function(c){return o(this,c,arguments.length>1?arguments[1]:void 0)}})},function(n,r,i){var a=i(4),o=i(200).left,s=i(48),u=i(28),l=s("reduce"),p=u("reduce",{1:0});a({target:"Array",proto:!0,forced:!l||!p},{reduce:function(c){return o(this,c,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(n,r,i){var a=i(127),o=i(27),s=i(41),u=i(26),l=function(p){return function(c,f,h,v){a(f);var y=o(c),x=s(y),m=u(y.length),g=p?m-1:0,d=p?-1:1;if(h<2)for(;;){if(g in x){v=x[g],g+=d;break}if(g+=d,p?g<0:m<=g)throw TypeError("Reduce of empty array with no initial value")}for(;p?g>=0:m>g;g+=d)g in x&&(v=f(v,x[g],g,y));return v}};n.exports={left:l(!1),right:l(!0)}},function(n,r,i){var a=i(4),o=i(36).some,s=i(48),u=i(28),l=s("some"),p=u("some");a({target:"Array",proto:!0,forced:!l||!p},{some:function(c){return o(this,c,arguments.length>1?arguments[1]:void 0)}})},function(n,r,i){var a=i(90),o=i(135);n.exports=a?{}.toString:function(){return"[object "+o(this)+"]"}},function(n,r){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,r,i){var a=i(8);n.exports=!a(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(n,r,i){var a=i(5),o=i(49),s=a("iterator"),u=Array.prototype;n.exports=function(l){return l!==void 0&&(o.Array===l||u[s]===l)}},function(n,r,i){var a=i(135),o=i(49),s=i(5)("iterator");n.exports=function(u){if(u!=null)return u[s]||u["@@iterator"]||o[a(u)]}},function(n,r,i){var a=i(18);n.exports=function(o,s,u,l){try{return l?s(a(u)[0],u[1]):s(u)}catch(c){var p=o.return;throw p!==void 0&&a(p.call(o)),c}}},function(n,r,i){var a=i(5)("iterator"),o=!1;try{var s=0,u={next:function(){return{done:!!s++}},return:function(){o=!0}};u[a]=function(){return this},Array.from(u,function(){throw 2})}catch{}n.exports=function(l,p){if(!p&&!o)return!1;var c=!1;try{var f={};f[a]=function(){return{next:function(){return{done:c=!0}}}},l(f)}catch{}return c}},function(n,r,i){var a=i(13),o=i(133);n.exports=function(s,u,l){var p,c;return o&&typeof(p=u.constructor)=="function"&&p!==l&&a(c=p.prototype)&&c!==l.prototype&&o(s,c),s}},function(n,r,i){var a=i(25);n.exports=function(o,s,u){for(var l in s)a(o,l,s[l],u);return o}},function(n,r,i){var a=i(46),o=i(15),s=i(5),u=i(16),l=s("species");n.exports=function(p){var c=a(p),f=o.f;u&&c&&!c[l]&&f(c,l,{configurable:!0,get:function(){return this}})}},function(n,r,i){var a=this&&this.__generator||function(u,l){var p,c,f,h,v={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(x){return function(m){return function(g){if(p)throw new TypeError("Generator is already executing.");for(;v;)try{if(p=1,c&&(f=2&g[0]?c.return:g[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,g[1])).done)return f;switch(c=0,f&&(g=[2&g[0],f.value]),g[0]){case 0:case 1:f=g;break;case 4:return v.label++,{value:g[1],done:!1};case 5:v.label++,c=g[1],g=[0];continue;case 7:g=v.ops.pop(),v.trys.pop();continue;default:if(f=v.trys,!((f=f.length>0&&f[f.length-1])||g[0]!==6&&g[0]!==2)){v=0;continue}if(g[0]===3&&(!f||g[1]>f[0]&&g[1]<f[3])){v.label=g[1];break}if(g[0]===6&&v.label<f[1]){v.label=f[1],f=g;break}if(f&&v.label<f[2]){v.label=f[2],v.ops.push(g);break}f[2]&&v.ops.pop(),v.trys.pop();continue}g=l.call(u,v)}catch(d){g=[6,d],c=0}finally{p=f=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([x,m])}}},o=this&&this.__values||function(u){var l=typeof Symbol=="function"&&Symbol.iterator,p=l&&u[l],c=0;if(p)return p.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&c>=u.length&&(u=void 0),{value:u&&u[c++],done:!u}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function u(l){l===void 0&&(l=1e3),this._items=new Set,this._limit=l}return u.prototype.add=function(l){if(this._items.add(l),this._items.size>this._limit){var p=this._items.values().next();p.done||this._items.delete(p.value)}return this},u.prototype.delete=function(l){return this._items.delete(l)},u.prototype.has=function(l){return this._items.has(l)},u.prototype.clear=function(){this._items.clear()},Object.defineProperty(u.prototype,"size",{get:function(){return this._items.size},enumerable:!0,configurable:!0}),u.prototype.forEach=function(l,p){var c=this;this._items.forEach(function(f){return l.call(p,f,f,c)})},u.prototype.keys=function(){return a(this,function(l){switch(l.label){case 0:return[5,o(this._items.keys())];case 1:return l.sent(),[2]}})},u.prototype.values=function(){return a(this,function(l){switch(l.label){case 0:return[5,o(this._items.values())];case 1:return l.sent(),[2]}})},u.prototype.entries=function(){return a(this,function(l){switch(l.label){case 0:return[5,o(this._items.entries())];case 1:return l.sent(),[2]}})},u.prototype[Symbol.iterator]=function(){return a(this,function(l){switch(l.label){case 0:return[5,o(this._items)];case 1:return l.sent(),[2]}})},Object.defineProperty(u.prototype,Symbol.toStringTag,{get:function(){return"FixedSizeSet"},enumerable:!0,configurable:!0}),u}();r.FixedSizeSet=s},function(n,r,i){var a=this&&this.__generator||function(u,l){var p,c,f,h,v={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(x){return function(m){return function(g){if(p)throw new TypeError("Generator is already executing.");for(;v;)try{if(p=1,c&&(f=2&g[0]?c.return:g[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,g[1])).done)return f;switch(c=0,f&&(g=[2&g[0],f.value]),g[0]){case 0:case 1:f=g;break;case 4:return v.label++,{value:g[1],done:!1};case 5:v.label++,c=g[1],g=[0];continue;case 7:g=v.ops.pop(),v.trys.pop();continue;default:if(f=v.trys,!((f=f.length>0&&f[f.length-1])||g[0]!==6&&g[0]!==2)){v=0;continue}if(g[0]===3&&(!f||g[1]>f[0]&&g[1]<f[3])){v.label=g[1];break}if(g[0]===6&&v.label<f[1]){v.label=f[1],f=g;break}if(f&&v.label<f[2]){v.label=f[2],v.ops.push(g);break}f[2]&&v.ops.pop(),v.trys.pop();continue}g=l.call(u,v)}catch(d){g=[6,d],c=0}finally{p=f=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([x,m])}}},o=this&&this.__values||function(u){var l=typeof Symbol=="function"&&Symbol.iterator,p=l&&u[l],c=0;if(p)return p.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&c>=u.length&&(u=void 0),{value:u&&u[c++],done:!u}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function u(l){l===void 0&&(l=1e3),this._items=new Map,this._limit=l}return u.prototype.get=function(l){return this._items.get(l)},u.prototype.set=function(l,p){if(this._items.set(l,p),this._items.size>this._limit){var c=this._items.keys().next();c.done||this._items.delete(c.value)}},u.prototype.delete=function(l){return this._items.delete(l)},u.prototype.has=function(l){return this._items.has(l)},u.prototype.clear=function(){this._items.clear()},Object.defineProperty(u.prototype,"size",{get:function(){return this._items.size},enumerable:!0,configurable:!0}),u.prototype.forEach=function(l,p){this._items.forEach(function(c,f){return l.call(p,f,c)})},u.prototype.keys=function(){return a(this,function(l){switch(l.label){case 0:return[5,o(this._items.keys())];case 1:return l.sent(),[2]}})},u.prototype.values=function(){return a(this,function(l){switch(l.label){case 0:return[5,o(this._items.values())];case 1:return l.sent(),[2]}})},u.prototype.entries=function(){return a(this,function(l){switch(l.label){case 0:return[5,o(this._items.entries())];case 1:return l.sent(),[2]}})},u.prototype[Symbol.iterator]=function(){return a(this,function(l){switch(l.label){case 0:return[5,o(this._items)];case 1:return l.sent(),[2]}})},Object.defineProperty(u.prototype,Symbol.toStringTag,{get:function(){return"ObjectCache"},enumerable:!0,configurable:!0}),u}();r.ObjectCache=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function o(s){s===void 0&&(s=1e3),this._items=new Map,this._limit=s}return o.prototype.check=function(s,u){if(this._items.get(s)===u)return!0;if(this._items.get(u)===s)return!1;var l=Math.random()<.5;if(l?this._items.set(s,u):this._items.set(u,s),this._items.size>this._limit){var p=this._items.keys().next();p.done||this._items.delete(p.value)}return l},o}();r.CompareCache=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function o(s){this._initialized=!1,this._value=void 0,this._initFunc=s}return Object.defineProperty(o.prototype,"value",{get:function(){return this._initialized||(this._value=this._initFunc(),this._initialized=!0),this._value},enumerable:!0,configurable:!0}),o}();r.Lazy=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function o(s){this._pointer=0,this._chars=Array.from(s),this._length=this._chars.length}return Object.defineProperty(o.prototype,"eof",{get:function(){return this._pointer>=this._length},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),o.prototype.codePoint=function(){if(this._codePoint===void 0)if(this.eof)this._codePoint=-1;else{var s=this._chars[this._pointer].codePointAt(0);this._codePoint=s!==void 0?s:-1}return this._codePoint},o.prototype.c=function(){return this._c===void 0&&(this._c=this.eof?"":this._chars[this._pointer]),this._c},o.prototype.remaining=function(){return this._remaining===void 0&&(this._remaining=this.eof?"":this._chars.slice(this._pointer+1).join("")),this._remaining},o.prototype.substring=function(){return this._substring===void 0&&(this._substring=this.eof?"":this._chars.slice(this._pointer).join("")),this._substring},Object.defineProperty(o.prototype,"pointer",{get:function(){return this._pointer},set:function(s){s!==this._pointer&&(this._pointer=s,this._codePoint=void 0,this._c=void 0,this._remaining=void 0,this._substring=void 0)},enumerable:!0,configurable:!0}),o}();r.StringWalker=a},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(218);r.MapWriter=a.MapWriter;var o=i(258);r.XMLWriter=o.XMLWriter;var s=i(67);r.ObjectWriter=s.ObjectWriter;var u=i(260);r.JSONWriter=u.JSONWriter;var l=i(261);r.YAMLWriter=l.YAMLWriter},function(n,r,i){i(19),i(219),i(20),i(22),i(23);var a,o=this&&this.__extends||(a=function(p,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var v in h)h.hasOwnProperty(v)&&(f[v]=h[v])})(p,c)},function(p,c){function f(){this.constructor=p}a(p,c),p.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),u=i(67),l=function(p){function c(f,h){var v=p.call(this,f)||this;return v._writerOptions=s.applyDefaults(h,{format:"map",wellFormed:!1,group:!1,verbose:!1}),v}return o(c,p),c.prototype.serialize=function(f){var h=s.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1,verbose:!1}),v=new u.ObjectWriter(this._builderOptions,h).serialize(f);return this._convertObject(v)},c.prototype._convertObject=function(f){if(s.isArray(f)){for(var h=0;h<f.length;h++)f[h]=this._convertObject(f[h]);return f}if(s.isObject(f)){var v=new Map;for(var y in f)v.set(y,this._convertObject(f[y]));return v}return f},c}(i(50).BaseWriter);r.MapWriter=l},function(n,r,i){var a=i(139),o=i(143);n.exports=a("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},o)},function(n,r,i){var a=i(4),o=i(8),s=i(59),u=i(13),l=i(27),p=i(26),c=i(134),f=i(128),h=i(63),v=i(5),y=i(129),x=v("isConcatSpreadable"),m=y>=51||!o(function(){var S=[];return S[x]=!1,S.concat()[0]!==S}),g=h("concat"),d=function(S){if(!u(S))return!1;var T=S[x];return T!==void 0?!!T:s(S)};a({target:"Array",proto:!0,forced:!m||!g},{concat:function(S){var T,C,w,_,E,D=l(this),O=f(D,0),N=0;for(T=-1,w=arguments.length;T<w;T++)if(d(E=T===-1?D:arguments[T])){if(N+(_=p(E.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(C=0;C<_;C++,N++)C in E&&c(O,N,E[C])}else{if(N>=9007199254740991)throw TypeError("Maximum allowed index exceeded");c(O,N++,E)}return O.length=N,O}})},function(n,r,i){var a=i(8);function o(s,u){return RegExp(s,u)}r.UNSUPPORTED_Y=a(function(){var s=o("a","y");return s.lastIndex=2,s.exec("abcd")!=null}),r.BROKEN_CARET=a(function(){var s=o("^r","gy");return s.lastIndex=2,s.exec("str")!=null})},function(n,r,i){var a=i(223);n.exports=function(o){if(a(o))throw TypeError("The method doesn't accept regular expressions");return o}},function(n,r,i){var a=i(13),o=i(42),s=i(5)("match");n.exports=function(u){var l;return a(u)&&((l=u[s])!==void 0?!!l:o(u)=="RegExp")}},function(n,r,i){var a=i(5)("match");n.exports=function(o){var s=/./;try{"/./"[o](s)}catch{try{return s[a]=!1,"/./"[o](s)}catch{}}return!1}},function(n,r,i){i(68);var a=i(25),o=i(8),s=i(5),u=i(93),l=i(21),p=s("species"),c=!o(function(){var x=/./;return x.exec=function(){var m=[];return m.groups={a:"7"},m},"".replace(x,"$<a>")!=="7"}),f="a".replace(/./,"$0")==="$0",h=s("replace"),v=!!/./[h]&&/./[h]("a","$0")==="",y=!o(function(){var x=/(?:)/,m=x.exec;x.exec=function(){return m.apply(this,arguments)};var g="ab".split(x);return g.length!==2||g[0]!=="a"||g[1]!=="b"});n.exports=function(x,m,g,d){var S=s(x),T=!o(function(){var O={};return O[S]=function(){return 7},""[x](O)!=7}),C=T&&!o(function(){var O=!1,N=/a/;return x==="split"&&((N={}).constructor={},N.constructor[p]=function(){return N},N.flags="",N[S]=/./[S]),N.exec=function(){return O=!0,null},N[S](""),!O});if(!T||!C||x==="replace"&&(!c||!f||v)||x==="split"&&!y){var w=/./[S],_=g(S,""[x],function(O,N,R,M,A){return N.exec===u?T&&!A?{done:!0,value:w.call(N,R,M)}:{done:!0,value:O.call(R,N,M)}:{done:!1}},{REPLACE_KEEPS_$0:f,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:v}),E=_[0],D=_[1];a(String.prototype,x,E),a(RegExp.prototype,S,m==2?function(O,N){return D.call(O,this,N)}:function(O){return D.call(O,this)})}d&&l(RegExp.prototype[S],"sham",!0)}},function(n,r,i){var a=i(137).charAt;n.exports=function(o,s,u){return s+(u?a(o,s).length:1)}},function(n,r,i){var a=i(42),o=i(93);n.exports=function(s,u){var l=s.exec;if(typeof l=="function"){var p=l.call(s,u);if(typeof p!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return p}if(a(s)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return o.call(s,u)}},function(n,r,i){(function(a){Object.defineProperty(r,"__esModule",{value:!0});var o=i(96);r.forgivingBase64Encode=function(s){return a.from(s).toString("base64")},r.forgivingBase64Decode=function(s){return s===""?"":((s=s.replace(o.ASCIIWhiteSpace,"")).length%4==0&&(s.endsWith("==")?s=s.substr(0,s.length-2):s.endsWith("=")&&(s=s.substr(0,s.length-1))),s.length%4==1?null:/[0-9A-Za-z+/]/.test(s)?a.from(s,"base64").toString("utf8"):null)}}).call(this,i(145).Buffer)},function(n,r,i){r.byteLength=function(h){var v=c(h),y=v[0],x=v[1];return 3*(y+x)/4-x},r.toByteArray=function(h){var v,y,x=c(h),m=x[0],g=x[1],d=new s(function(C,w,_){return 3*(w+_)/4-_}(0,m,g)),S=0,T=g>0?m-4:m;for(y=0;y<T;y+=4)v=o[h.charCodeAt(y)]<<18|o[h.charCodeAt(y+1)]<<12|o[h.charCodeAt(y+2)]<<6|o[h.charCodeAt(y+3)],d[S++]=v>>16&255,d[S++]=v>>8&255,d[S++]=255&v;return g===2&&(v=o[h.charCodeAt(y)]<<2|o[h.charCodeAt(y+1)]>>4,d[S++]=255&v),g===1&&(v=o[h.charCodeAt(y)]<<10|o[h.charCodeAt(y+1)]<<4|o[h.charCodeAt(y+2)]>>2,d[S++]=v>>8&255,d[S++]=255&v),d},r.fromByteArray=function(h){for(var v,y=h.length,x=y%3,m=[],g=0,d=y-x;g<d;g+=16383)m.push(f(h,g,g+16383>d?d:g+16383));return x===1?(v=h[y-1],m.push(a[v>>2]+a[v<<4&63]+"==")):x===2&&(v=(h[y-2]<<8)+h[y-1],m.push(a[v>>10]+a[v>>4&63]+a[v<<2&63]+"=")),m.join("")};for(var a=[],o=[],s=typeof Uint8Array<"u"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,p=u.length;l<p;++l)a[l]=u[l],o[u.charCodeAt(l)]=l;function c(h){var v=h.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=h.indexOf("=");return y===-1&&(y=v),[y,y===v?0:4-y%4]}function f(h,v,y){for(var x,m,g=[],d=v;d<y;d+=3)x=(h[d]<<16&16711680)+(h[d+1]<<8&65280)+(255&h[d+2]),g.push(a[(m=x)>>18&63]+a[m>>12&63]+a[m>>6&63]+a[63&m]);return g.join("")}o[45]=62,o[95]=63},function(n,r){r.read=function(i,a,o,s,u){var l,p,c=8*u-s-1,f=(1<<c)-1,h=f>>1,v=-7,y=o?u-1:0,x=o?-1:1,m=i[a+y];for(y+=x,l=m&(1<<-v)-1,m>>=-v,v+=c;v>0;l=256*l+i[a+y],y+=x,v-=8);for(p=l&(1<<-v)-1,l>>=-v,v+=s;v>0;p=256*p+i[a+y],y+=x,v-=8);if(l===0)l=1-h;else{if(l===f)return p?NaN:1/0*(m?-1:1);p+=Math.pow(2,s),l-=h}return(m?-1:1)*p*Math.pow(2,l-s)},r.write=function(i,a,o,s,u,l){var p,c,f,h=8*l-u-1,v=(1<<h)-1,y=v>>1,x=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=s?0:l-1,g=s?1:-1,d=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(c=isNaN(a)?1:0,p=v):(p=Math.floor(Math.log(a)/Math.LN2),a*(f=Math.pow(2,-p))<1&&(p--,f*=2),(a+=p+y>=1?x/f:x*Math.pow(2,1-y))*f>=2&&(p++,f/=2),p+y>=v?(c=0,p=v):p+y>=1?(c=(a*f-1)*Math.pow(2,u),p+=y):(c=a*Math.pow(2,y-1)*Math.pow(2,u),p=0));u>=8;i[o+m]=255&c,m+=g,c/=256,u-=8);for(p=p<<u|c,h+=u;h>0;i[o+m]=255&p,m+=g,p/=256,h-=8);i[o+m-g]|=128*d}},function(n,r){var i={}.toString;n.exports=Array.isArray||function(a){return i.call(a)=="[object Array]"}},function(n,r,i){var a=this&&this.__values||function(u){var l=typeof Symbol=="function"&&Symbol.iterator,p=l&&u[l],c=0;if(p)return p.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&c>=u.length&&(u=void 0),{value:u&&u[c++],done:!u}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=i(1);function s(u){var l,p;if(u===null||o.isString(u)||o.isNumber(u))return u;if(o.isArray(u)){var c=new Array;try{for(var f=a(u),h=f.next();!h.done;h=f.next()){var v=h.value;c.push(s(v))}}catch(m){l={error:m}}finally{try{h&&!h.done&&(p=f.return)&&p.call(f)}finally{if(l)throw l.error}}return c}if(o.isObject(u)){c=new Map;for(var y in u)if(u.hasOwnProperty(y)){var x=u[y];c.set(y,s(x))}return c}return u}r.parseJSONFromBytes=function(u){var l=o.utf8Decode(u);return JSON.parse.call(void 0,l)},r.serializeJSONToBytes=function(u){var l=JSON.stringify.call(void 0,u);return o.utf8Encode(l)},r.parseJSONIntoInfraValues=function(u){return s(JSON.parse.call(void 0,u))},r.convertAJSONDerivedJavaScriptValueToAnInfraValue=s},function(n,r,i){var a=this&&this.__generator||function(p,c){var f,h,v,y,x={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return y={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function m(g){return function(d){return function(S){if(f)throw new TypeError("Generator is already executing.");for(;x;)try{if(f=1,h&&(v=2&S[0]?h.return:S[0]?h.throw||((v=h.return)&&v.call(h),0):h.next)&&!(v=v.call(h,S[1])).done)return v;switch(h=0,v&&(S=[2&S[0],v.value]),S[0]){case 0:case 1:v=S;break;case 4:return x.label++,{value:S[1],done:!1};case 5:x.label++,h=S[1],S=[0];continue;case 7:S=x.ops.pop(),x.trys.pop();continue;default:if(v=x.trys,!((v=v.length>0&&v[v.length-1])||S[0]!==6&&S[0]!==2)){x=0;continue}if(S[0]===3&&(!v||S[1]>v[0]&&S[1]<v[3])){x.label=S[1];break}if(S[0]===6&&x.label<v[1]){x.label=v[1],v=S;break}if(v&&x.label<v[2]){x.label=v[2],x.ops.push(S);break}v[2]&&x.ops.pop(),x.trys.pop();continue}S=c.call(p,x)}catch(T){S=[6,T],h=0}finally{f=v=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([g,d])}}},o=this&&this.__read||function(p,c){var f=typeof Symbol=="function"&&p[Symbol.iterator];if(!f)return p;var h,v,y=f.call(p),x=[];try{for(;(c===void 0||c-- >0)&&!(h=y.next()).done;)x.push(h.value)}catch(m){v={error:m}}finally{try{h&&!h.done&&(f=y.return)&&f.call(y)}finally{if(v)throw v.error}}return x},s=this&&this.__spread||function(){for(var p=[],c=0;c<arguments.length;c++)p=p.concat(o(arguments[c]));return p},u=this&&this.__values||function(p){var c=typeof Symbol=="function"&&Symbol.iterator,f=c&&p[c],h=0;if(f)return f.call(p);if(p&&typeof p.length=="number")return{next:function(){return p&&h>=p.length&&(p=void 0),{value:p&&p[h++],done:!p}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var l=i(1);r.append=function(p,c){p.push(c)},r.extend=function(p,c){p.push.apply(p,s(c))},r.prepend=function(p,c){p.unshift(c)},r.replace=function(p,c,f){var h,v,y=0;try{for(var x=u(p),m=x.next();!m.done;m=x.next()){var g=m.value;if(l.isFunction(c))c.call(null,g)&&(p[y]=f);else if(g===c)return void(p[y]=f);y++}}catch(d){h={error:d}}finally{try{m&&!m.done&&(v=x.return)&&v.call(x)}finally{if(h)throw h.error}}},r.insert=function(p,c,f){p.splice(f,0,c)},r.remove=function(p,c){for(var f=p.length;f--;){var h=p[f];if(l.isFunction(c))c.call(null,h)&&p.splice(f,1);else if(h===c)return void p.splice(f,1)}},r.empty=function(p){p.length=0},r.contains=function(p,c){var f,h;try{for(var v=u(p),y=v.next();!y.done;y=v.next()){var x=y.value;if(l.isFunction(c)){if(c.call(null,x))return!0}else if(x===c)return!0}}catch(m){f={error:m}}finally{try{y&&!y.done&&(h=v.return)&&h.call(v)}finally{if(f)throw f.error}}return!1},r.size=function(p,c){var f,h;if(c===void 0)return p.length;var v=0;try{for(var y=u(p),x=y.next();!x.done;x=y.next()){var m=x.value;c.call(null,m)&&v++}}catch(g){f={error:g}}finally{try{x&&!x.done&&(h=y.return)&&h.call(y)}finally{if(f)throw f.error}}return v},r.isEmpty=function(p){return p.length===0},r.forEach=function(p,c){var f,h,v,y,x,m;return a(this,function(g){switch(g.label){case 0:return c!==void 0?[3,2]:[5,u(p)];case 1:return g.sent(),[3,9];case 2:g.trys.push([2,7,8,9]),f=u(p),h=f.next(),g.label=3;case 3:return h.done?[3,6]:(v=h.value,c.call(null,v)?[4,v]:[3,5]);case 4:g.sent(),g.label=5;case 5:return h=f.next(),[3,3];case 6:return[3,9];case 7:return y=g.sent(),x={error:y},[3,9];case 8:try{h&&!h.done&&(m=f.return)&&m.call(f)}finally{if(x)throw x.error}return[7];case 9:return[2]}})},r.clone=function(p){return new(Array.bind.apply(Array,s([void 0],p)))},r.sortInAscendingOrder=function(p,c){return p.sort(function(f,h){return c.call(null,f,h)?-1:1})},r.sortInDescendingOrder=function(p,c){return p.sort(function(f,h){return c.call(null,f,h)?1:-1})}},function(n,r,i){var a=this&&this.__generator||function(p,c){var f,h,v,y,x={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return y={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function m(g){return function(d){return function(S){if(f)throw new TypeError("Generator is already executing.");for(;x;)try{if(f=1,h&&(v=2&S[0]?h.return:S[0]?h.throw||((v=h.return)&&v.call(h),0):h.next)&&!(v=v.call(h,S[1])).done)return v;switch(h=0,v&&(S=[2&S[0],v.value]),S[0]){case 0:case 1:v=S;break;case 4:return x.label++,{value:S[1],done:!1};case 5:x.label++,h=S[1],S=[0];continue;case 7:S=x.ops.pop(),x.trys.pop();continue;default:if(v=x.trys,!((v=v.length>0&&v[v.length-1])||S[0]!==6&&S[0]!==2)){x=0;continue}if(S[0]===3&&(!v||S[1]>v[0]&&S[1]<v[3])){x.label=S[1];break}if(S[0]===6&&x.label<v[1]){x.label=v[1],v=S;break}if(v&&x.label<v[2]){x.label=v[2],x.ops.push(S);break}v[2]&&x.ops.pop(),x.trys.pop();continue}S=c.call(p,x)}catch(T){S=[6,T],h=0}finally{f=v=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([g,d])}}},o=this&&this.__values||function(p){var c=typeof Symbol=="function"&&Symbol.iterator,f=c&&p[c],h=0;if(f)return f.call(p);if(p&&typeof p.length=="number")return{next:function(){return p&&h>=p.length&&(p=void 0),{value:p&&p[h++],done:!p}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(p,c){var f=typeof Symbol=="function"&&p[Symbol.iterator];if(!f)return p;var h,v,y=f.call(p),x=[];try{for(;(c===void 0||c-- >0)&&!(h=y.next()).done;)x.push(h.value)}catch(m){v={error:m}}finally{try{h&&!h.done&&(f=y.return)&&f.call(y)}finally{if(v)throw v.error}}return x},u=this&&this.__spread||function(){for(var p=[],c=0;c<arguments.length;c++)p=p.concat(s(arguments[c]));return p};Object.defineProperty(r,"__esModule",{value:!0});var l=i(1);r.get=function(p,c){return p.get(c)},r.set=function(p,c,f){p.set(c,f)},r.remove=function(p,c){var f,h,v,y;if(l.isFunction(c)){var x=[];try{for(var m=o(p),g=m.next();!g.done;g=m.next()){var d=g.value;c.call(null,d)&&x.push(d[0])}}catch(w){f={error:w}}finally{try{g&&!g.done&&(h=m.return)&&h.call(m)}finally{if(f)throw f.error}}try{for(var S=o(x),T=S.next();!T.done;T=S.next()){var C=T.value;p.delete(C)}}catch(w){v={error:w}}finally{try{T&&!T.done&&(y=S.return)&&y.call(S)}finally{if(v)throw v.error}}}else p.delete(c)},r.contains=function(p,c){var f,h;if(l.isFunction(c)){try{for(var v=o(p),y=v.next();!y.done;y=v.next()){var x=y.value;if(c.call(null,x))return!0}}catch(m){f={error:m}}finally{try{y&&!y.done&&(h=v.return)&&h.call(v)}finally{if(f)throw f.error}}return!1}return p.has(c)},r.keys=function(p){return new Set(p.keys())},r.values=function(p){return u(p.values())},r.size=function(p,c){var f,h;if(c===void 0)return p.size;var v=0;try{for(var y=o(p),x=y.next();!x.done;x=y.next()){var m=x.value;c.call(null,m)&&v++}}catch(g){f={error:g}}finally{try{x&&!x.done&&(h=y.return)&&h.call(y)}finally{if(f)throw f.error}}return v},r.isEmpty=function(p){return p.size===0},r.forEach=function(p,c){var f,h,v,y,x,m;return a(this,function(g){switch(g.label){case 0:return c!==void 0?[3,2]:[5,o(p)];case 1:return g.sent(),[3,9];case 2:g.trys.push([2,7,8,9]),f=o(p),h=f.next(),g.label=3;case 3:return h.done?[3,6]:(v=h.value,c.call(null,v)?[4,v]:[3,5]);case 4:g.sent(),g.label=5;case 5:return h=f.next(),[3,3];case 6:return[3,9];case 7:return y=g.sent(),x={error:y},[3,9];case 8:try{h&&!h.done&&(m=f.return)&&m.call(f)}finally{if(x)throw x.error}return[7];case 9:return[2]}})},r.clone=function(p){return new Map(p)},r.sortInAscendingOrder=function(p,c){var f=new(Array.bind.apply(Array,u([void 0],p)));return f.sort(function(h,v){return c.call(null,h,v)?-1:1}),new Map(f)},r.sortInDescendingOrder=function(p,c){var f=new(Array.bind.apply(Array,u([void 0],p)));return f.sort(function(h,v){return c.call(null,h,v)?1:-1}),new Map(f)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.HTML="http://www.w3.org/1999/xhtml",r.XML="http://www.w3.org/XML/1998/namespace",r.XMLNS="http://www.w3.org/2000/xmlns/",r.MathML="http://www.w3.org/1998/Math/MathML",r.SVG="http://www.w3.org/2000/svg",r.XLink="http://www.w3.org/1999/xlink"},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.enqueue=function(a,o){a.push(o)},r.dequeue=function(a){return a.shift()||null}},function(n,r,i){var a=this&&this.__generator||function(c,f){var h,v,y,x,m={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return x={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function g(d){return function(S){return function(T){if(h)throw new TypeError("Generator is already executing.");for(;m;)try{if(h=1,v&&(y=2&T[0]?v.return:T[0]?v.throw||((y=v.return)&&y.call(v),0):v.next)&&!(y=y.call(v,T[1])).done)return y;switch(v=0,y&&(T=[2&T[0],y.value]),T[0]){case 0:case 1:y=T;break;case 4:return m.label++,{value:T[1],done:!1};case 5:m.label++,v=T[1],T=[0];continue;case 7:T=m.ops.pop(),m.trys.pop();continue;default:if(y=m.trys,!((y=y.length>0&&y[y.length-1])||T[0]!==6&&T[0]!==2)){m=0;continue}if(T[0]===3&&(!y||T[1]>y[0]&&T[1]<y[3])){m.label=T[1];break}if(T[0]===6&&m.label<y[1]){m.label=y[1],y=T;break}if(y&&m.label<y[2]){m.label=y[2],m.ops.push(T);break}y[2]&&m.ops.pop(),m.trys.pop();continue}T=f.call(c,m)}catch(C){T=[6,C],v=0}finally{h=y=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([d,S])}}},o=this&&this.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&c[f],v=0;if(h)return h.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&v>=c.length&&(c=void 0),{value:c&&c[v++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(c,f){var h=typeof Symbol=="function"&&c[Symbol.iterator];if(!h)return c;var v,y,x=h.call(c),m=[];try{for(;(f===void 0||f-- >0)&&!(v=x.next()).done;)m.push(v.value)}catch(g){y={error:g}}finally{try{v&&!v.done&&(h=x.return)&&h.call(x)}finally{if(y)throw y.error}}return m},u=this&&this.__spread||function(){for(var c=[],f=0;f<arguments.length;f++)c=c.concat(s(arguments[f]));return c};Object.defineProperty(r,"__esModule",{value:!0});var l=i(1);function p(c,f){var h,v;try{for(var y=o(c),x=y.next();!x.done;x=y.next()){var m=x.value;if(!f.has(m))return!1}}catch(g){h={error:g}}finally{try{x&&!x.done&&(v=y.return)&&v.call(y)}finally{if(h)throw h.error}}return!0}r.append=function(c,f){c.add(f)},r.extend=function(c,f){f.forEach(c.add,c)},r.prepend=function(c,f){var h=new Set(c);c.clear(),c.add(f),h.forEach(c.add,c)},r.replace=function(c,f,h){var v,y,x=new Set;try{for(var m=o(c),g=m.next();!g.done;g=m.next()){var d=g.value;l.isFunction(f)?f.call(null,d)?x.add(h):x.add(d):d===f?x.add(h):x.add(d)}}catch(S){v={error:S}}finally{try{g&&!g.done&&(y=m.return)&&y.call(m)}finally{if(v)throw v.error}}c.clear(),x.forEach(c.add,c)},r.insert=function(c,f,h){var v,y,x=new Set,m=0;try{for(var g=o(c),d=g.next();!d.done;d=g.next()){var S=d.value;m===h&&x.add(f),x.add(S),m++}}catch(T){v={error:T}}finally{try{d&&!d.done&&(y=g.return)&&y.call(g)}finally{if(v)throw v.error}}c.clear(),x.forEach(c.add,c)},r.remove=function(c,f){var h,v,y,x;if(l.isFunction(f)){var m=[];try{for(var g=o(c),d=g.next();!d.done;d=g.next()){var S=d.value;f.call(null,S)&&m.push(S)}}catch(_){h={error:_}}finally{try{d&&!d.done&&(v=g.return)&&v.call(g)}finally{if(h)throw h.error}}try{for(var T=o(m),C=T.next();!C.done;C=T.next()){var w=C.value;c.delete(w)}}catch(_){y={error:_}}finally{try{C&&!C.done&&(x=T.return)&&x.call(T)}finally{if(y)throw y.error}}}else c.delete(f)},r.empty=function(c){c.clear()},r.contains=function(c,f){var h,v;if(!l.isFunction(f))return c.has(f);try{for(var y=o(c),x=y.next();!x.done;x=y.next()){var m=x.value;if(f.call(null,m))return!0}}catch(g){h={error:g}}finally{try{x&&!x.done&&(v=y.return)&&v.call(y)}finally{if(h)throw h.error}}return!1},r.size=function(c,f){var h,v;if(f===void 0)return c.size;var y=0;try{for(var x=o(c),m=x.next();!m.done;m=x.next()){var g=m.value;f.call(null,g)&&y++}}catch(d){h={error:d}}finally{try{m&&!m.done&&(v=x.return)&&v.call(x)}finally{if(h)throw h.error}}return y},r.isEmpty=function(c){return c.size===0},r.forEach=function(c,f){var h,v,y,x,m,g;return a(this,function(d){switch(d.label){case 0:return f!==void 0?[3,2]:[5,o(c)];case 1:return d.sent(),[3,9];case 2:d.trys.push([2,7,8,9]),h=o(c),v=h.next(),d.label=3;case 3:return v.done?[3,6]:(y=v.value,f.call(null,y)?[4,y]:[3,5]);case 4:d.sent(),d.label=5;case 5:return v=h.next(),[3,3];case 6:return[3,9];case 7:return x=d.sent(),m={error:x},[3,9];case 8:try{v&&!v.done&&(g=h.return)&&g.call(h)}finally{if(m)throw m.error}return[7];case 9:return[2]}})},r.clone=function(c){return new Set(c)},r.sortInAscendingOrder=function(c,f){var h=new(Array.bind.apply(Array,u([void 0],c)));return h.sort(function(v,y){return f.call(null,v,y)?-1:1}),new Set(h)},r.sortInDescendingOrder=function(c,f){var h=new(Array.bind.apply(Array,u([void 0],c)));return h.sort(function(v,y){return f.call(null,v,y)?1:-1}),new Set(h)},r.isSubsetOf=p,r.isSupersetOf=function(c,f){return p(f,c)},r.intersection=function(c,f){var h,v,y=new Set;try{for(var x=o(c),m=x.next();!m.done;m=x.next()){var g=m.value;f.has(g)&&y.add(g)}}catch(d){h={error:d}}finally{try{m&&!m.done&&(v=x.return)&&v.call(x)}finally{if(h)throw h.error}}return y},r.union=function(c,f){var h=new Set(c);return f.forEach(h.add,h),h},r.range=function(c,f){for(var h=new Set,v=c;v<=f;v++)h.add(v);return h}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.push=function(a,o){a.push(o)},r.pop=function(a){return a.pop()||null}},function(n,r,i){var a=this&&this.__values||function(m){var g=typeof Symbol=="function"&&Symbol.iterator,d=g&&m[g],S=0;if(d)return d.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&S>=m.length&&(m=void 0),{value:m&&m[S++],done:!m}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=i(96),s=i(147),u=i(146),l=i(1);function p(m,g){for(var d=0;;){var S=d<m.length?m.charCodeAt(d):null,T=d<g.length?g.charCodeAt(d):null;if(S===null)return!0;if(S!==T)return!1;d++}}function c(m){var g,d,S=Array.from(m),T=new Uint8Array(S.length),C=0;try{for(var w=a(m),_=w.next();!_.done;_=w.next()){var E=_.value.codePointAt(0);console.assert(E!==void 0&&E<=255,"isomorphicEncode requires string bytes to be less than or equal to 0x00FF."),E!==void 0&&E<=255&&(T[C++]=E)}}catch(D){g={error:D}}finally{try{_&&!_.done&&(d=w.return)&&d.call(w)}finally{if(g)throw g.error}}return T}function f(m){return/^[\u0000-\u007F]*$/.test(m)}function h(m){var g,d,S="";try{for(var T=a(m),C=T.next();!C.done;C=T.next()){var w=C.value,_=w.codePointAt(0);S+=_!==void 0&&_>=65&&_<=90?String.fromCodePoint(_+32):w}}catch(E){g={error:E}}finally{try{C&&!C.done&&(d=T.return)&&d.call(T)}finally{if(g)throw g.error}}return S}function v(m){return m.replace(/^[\t\n\f\r ]+/,"").replace(/[\t\n\f\r ]+$/,"")}function y(m,g,d){if(!l.isArray(g))return y(m,Array.from(g),d);for(var S="";d.position<g.length&&m.call(null,g[d.position]);)S+=g[d.position],d.position++;return S}function x(m,g){y(function(d){return o.ASCIIWhiteSpace.test(d)},m,g)}r.isCodeUnitPrefix=p,r.isCodeUnitLessThan=function(m,g){if(p(g,m))return!1;if(p(m,g))return!0;for(var d=0;d<Math.min(m.length,g.length);d++){var S=m.charCodeAt(d),T=g.charCodeAt(d);if(S!==T)return S<T}return!1},r.isomorphicEncode=c,r.isASCIIString=f,r.asciiLowercase=h,r.asciiUppercase=function(m){var g,d,S="";try{for(var T=a(m),C=T.next();!C.done;C=T.next()){var w=C.value,_=w.codePointAt(0);S+=_!==void 0&&_>=97&&_<=122?String.fromCodePoint(_-32):w}}catch(E){g={error:E}}finally{try{C&&!C.done&&(d=T.return)&&d.call(T)}finally{if(g)throw g.error}}return S},r.asciiCaseInsensitiveMatch=function(m,g){return h(m)===h(g)},r.asciiEncode=function(m){return console.assert(f(m),"asciiEncode requires an ASCII string."),c(m)},r.asciiDecode=function(m){var g,d;try{for(var S=a(m),T=S.next();!T.done;T=S.next()){var C=T.value;console.assert(u.isASCIIByte(C),"asciiDecode requires an ASCII byte sequence.")}}catch(w){g={error:w}}finally{try{T&&!T.done&&(d=S.return)&&d.call(S)}finally{if(g)throw g.error}}return s.isomorphicDecode(m)},r.stripNewlines=function(m){return m.replace(/[\n\r]/g,"")},r.normalizeNewlines=function(m){return m.replace(/\r\n/g,`
`).replace(/\r/g,`
`)},r.stripLeadingAndTrailingASCIIWhitespace=v,r.stripAndCollapseASCIIWhitespace=function(m){return v(m.replace(/[\t\n\f\r ]{2,}/g," "))},r.collectASequenceOfCodePoints=y,r.skipASCIIWhitespace=x,r.strictlySplit=function m(g,d){if(!l.isArray(g))return m(Array.from(g),d);var S={position:0},T=[],C=y(function(w){return d!==w},g,S);for(T.push(C);S.position<g.length;)console.assert(g[S.position]===d,"strictlySplit found no delimiter in input string."),S.position++,C=y(function(w){return d!==w},g,S),T.push(C);return T},r.splitAStringOnASCIIWhitespace=function m(g){if(!l.isArray(g))return m(Array.from(g));var d={position:0},S=[];for(x(g,d);d.position<g.length;){var T=y(function(C){return!o.ASCIIWhiteSpace.test(C)},g,d);S.push(T),x(g,d)}return S},r.splitAStringOnCommas=function m(g){if(!l.isArray(g))return m(Array.from(g));for(var d={position:0},S=[];d.position<g.length;){var T=y(function(C){return C!==","},g,d);S.push(v(T)),d.position<g.length&&(console.assert(g[d.position]===",","splitAStringOnCommas found no delimiter in input string."),d.position++)}return S},r.concatenate=function(m,g){return g===void 0&&(g=""),m.length===0?"":m.join(g)}},function(n,r,i){var a=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],p=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&p>=s.length&&(s=void 0),{value:s&&s[p++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=i(97);r.abort_add=function(s,u){u._abortedFlag||u._abortAlgorithms.add(s)},r.abort_remove=function(s,u){u._abortAlgorithms.delete(s)},r.abort_signalAbort=function(s){var u,l;if(!s._abortedFlag){s._abortedFlag=!0;try{for(var p=a(s._abortAlgorithms),c=p.next();!c.done;c=p.next())c.value.call(s)}catch(f){u={error:f}}finally{try{c&&!c.done&&(l=p.return)&&l.call(p)}finally{if(u)throw u.error}}s._abortAlgorithms.clear(),o.event_fireAnEvent("abort",s)}}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(150),o=function(){function s(){}return s.asNode=function(u){if(a.Guard.isNode(u))return u;throw new Error("Invalid object. Node expected.")},s}();r.Cast=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function s(){}return Object.defineProperty(s.prototype,"size",{get:function(){return 0},enumerable:!0,configurable:!0}),s.prototype.add=function(u){throw new Error("Cannot add to an empty set.")},s.prototype.clear=function(){},s.prototype.delete=function(u){return!1},s.prototype.forEach=function(u,l){},s.prototype.has=function(u){return!1},s.prototype[Symbol.iterator]=function(){return new o},s.prototype.entries=function(){return new o},s.prototype.keys=function(){return new o},s.prototype.values=function(){return new o},Object.defineProperty(s.prototype,Symbol.toStringTag,{get:function(){return"EmptySet"},enumerable:!0,configurable:!0}),s}();r.EmptySet=a;var o=function(){function s(){}return s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){return{done:!0,value:null}},s}()},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),function(a){a[a.SchemeStart=0]="SchemeStart",a[a.Scheme=1]="Scheme",a[a.NoScheme=2]="NoScheme",a[a.SpecialRelativeOrAuthority=3]="SpecialRelativeOrAuthority",a[a.PathOrAuthority=4]="PathOrAuthority",a[a.Relative=5]="Relative",a[a.RelativeSlash=6]="RelativeSlash",a[a.SpecialAuthoritySlashes=7]="SpecialAuthoritySlashes",a[a.SpecialAuthorityIgnoreSlashes=8]="SpecialAuthorityIgnoreSlashes",a[a.Authority=9]="Authority",a[a.Host=10]="Host",a[a.Hostname=11]="Hostname",a[a.Port=12]="Port",a[a.File=13]="File",a[a.FileSlash=14]="FileSlash",a[a.FileHost=15]="FileHost",a[a.PathStart=16]="PathStart",a[a.Path=17]="Path",a[a.CannotBeABaseURLPath=18]="CannotBeABaseURLPath",a[a.Query=19]="Query",a[a.Fragment=20]="Fragment"}(r.ParserState||(r.ParserState={})),r.OpaqueOrigin=["","",null,null]},function(n,r,i){var a=i(245),o=i(247);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=T,r.resolve=function(C,w){return T(C,!1,!0).resolve(w)},r.resolveObject=function(C,w){return C?T(C,!1,!0).resolveObject(w):w},r.format=function(C){return o.isString(C)&&(C=T(C)),C instanceof s?C.format():s.prototype.format.call(C)},r.Url=s;var u=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),f=["'"].concat(c),h=["%","/","?",";","#"].concat(f),v=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,x=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},d={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=i(248);function T(C,w,_){if(C&&o.isObject(C)&&C instanceof s)return C;var E=new s;return E.parse(C,w,_),E}s.prototype.parse=function(C,w,_){if(!o.isString(C))throw new TypeError("Parameter 'url' must be a string, not "+typeof C);var E=C.indexOf("?"),D=E!==-1&&E<C.indexOf("#")?"?":"#",O=C.split(D);O[0]=O[0].replace(/\\/g,"/");var N=C=O.join(D);if(N=N.trim(),!_&&C.split("#").length===1){var R=p.exec(N);if(R)return this.path=N,this.href=N,this.pathname=R[1],R[2]?(this.search=R[2],this.query=w?S.parse(this.search.substr(1)):this.search.substr(1)):w&&(this.search="",this.query={}),this}var M=u.exec(N);if(M){var A=(M=M[0]).toLowerCase();this.protocol=A,N=N.substr(M.length)}if(_||M||N.match(/^\/\/[^@\/]+@[^@\/]+/)){var G=N.substr(0,2)==="//";!G||M&&g[M]||(N=N.substr(2),this.slashes=!0)}if(!g[M]&&(G||M&&!d[M])){for(var j,k,F=-1,B=0;B<v.length;B++)($=N.indexOf(v[B]))!==-1&&(F===-1||$<F)&&(F=$);for((k=F===-1?N.lastIndexOf("@"):N.lastIndexOf("@",F))!==-1&&(j=N.slice(0,k),N=N.slice(k+1),this.auth=decodeURIComponent(j)),F=-1,B=0;B<h.length;B++){var $;($=N.indexOf(h[B]))!==-1&&(F===-1||$<F)&&(F=$)}F===-1&&(F=N.length),this.host=N.slice(0,F),N=N.slice(F),this.parseHost(),this.hostname=this.hostname||"";var H=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!H)for(var X=this.hostname.split(/\./),J=(B=0,X.length);B<J;B++){var q=X[B];if(q&&!q.match(y)){for(var ee="",re=0,ae=q.length;re<ae;re++)q.charCodeAt(re)>127?ee+="x":ee+=q[re];if(!ee.match(y)){var te=X.slice(0,B),L=X.slice(B+1),b=q.match(x);b&&(te.push(b[1]),L.unshift(b[2])),L.length&&(N="/"+L.join(".")+N),this.hostname=te.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),H||(this.hostname=a.toASCII(this.hostname));var U=this.port?":"+this.port:"",V=this.hostname||"";this.host=V+U,this.href+=this.host,H&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),N[0]!=="/"&&(N="/"+N))}if(!m[A])for(B=0,J=f.length;B<J;B++){var I=f[B];if(N.indexOf(I)!==-1){var z=encodeURIComponent(I);z===I&&(z=escape(I)),N=N.split(I).join(z)}}var W=N.indexOf("#");W!==-1&&(this.hash=N.substr(W),N=N.slice(0,W));var Y=N.indexOf("?");if(Y!==-1?(this.search=N.substr(Y),this.query=N.substr(Y+1),w&&(this.query=S.parse(this.query)),N=N.slice(0,Y)):w&&(this.search="",this.query={}),N&&(this.pathname=N),d[A]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var ne=this.search||"";this.path=U+ne}return this.href=this.format(),this},s.prototype.format=function(){var C=this.auth||"";C&&(C=(C=encodeURIComponent(C)).replace(/%3A/i,":"),C+="@");var w=this.protocol||"",_=this.pathname||"",E=this.hash||"",D=!1,O="";this.host?D=C+this.host:this.hostname&&(D=C+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(D+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(O=S.stringify(this.query));var N=this.search||O&&"?"+O||"";return w&&w.substr(-1)!==":"&&(w+=":"),this.slashes||(!w||d[w])&&D!==!1?(D="//"+(D||""),_&&_.charAt(0)!=="/"&&(_="/"+_)):D||(D=""),E&&E.charAt(0)!=="#"&&(E="#"+E),N&&N.charAt(0)!=="?"&&(N="?"+N),w+D+(_=_.replace(/[?#]/g,function(R){return encodeURIComponent(R)}))+(N=N.replace("#","%23"))+E},s.prototype.resolve=function(C){return this.resolveObject(T(C,!1,!0)).format()},s.prototype.resolveObject=function(C){if(o.isString(C)){var w=new s;w.parse(C,!1,!0),C=w}for(var _=new s,E=Object.keys(this),D=0;D<E.length;D++){var O=E[D];_[O]=this[O]}if(_.hash=C.hash,C.href==="")return _.href=_.format(),_;if(C.slashes&&!C.protocol){for(var N=Object.keys(C),R=0;R<N.length;R++){var M=N[R];M!=="protocol"&&(_[M]=C[M])}return d[_.protocol]&&_.hostname&&!_.pathname&&(_.path=_.pathname="/"),_.href=_.format(),_}if(C.protocol&&C.protocol!==_.protocol){if(!d[C.protocol]){for(var A=Object.keys(C),G=0;G<A.length;G++){var j=A[G];_[j]=C[j]}return _.href=_.format(),_}if(_.protocol=C.protocol,C.host||g[C.protocol])_.pathname=C.pathname;else{for(var k=(C.pathname||"").split("/");k.length&&!(C.host=k.shift()););C.host||(C.host=""),C.hostname||(C.hostname=""),k[0]!==""&&k.unshift(""),k.length<2&&k.unshift(""),_.pathname=k.join("/")}if(_.search=C.search,_.query=C.query,_.host=C.host||"",_.auth=C.auth,_.hostname=C.hostname||C.host,_.port=C.port,_.pathname||_.search){var F=_.pathname||"",B=_.search||"";_.path=F+B}return _.slashes=_.slashes||C.slashes,_.href=_.format(),_}var $=_.pathname&&_.pathname.charAt(0)==="/",H=C.host||C.pathname&&C.pathname.charAt(0)==="/",X=H||$||_.host&&C.pathname,J=X,q=_.pathname&&_.pathname.split("/")||[],ee=(k=C.pathname&&C.pathname.split("/")||[],_.protocol&&!d[_.protocol]);if(ee&&(_.hostname="",_.port=null,_.host&&(q[0]===""?q[0]=_.host:q.unshift(_.host)),_.host="",C.protocol&&(C.hostname=null,C.port=null,C.host&&(k[0]===""?k[0]=C.host:k.unshift(C.host)),C.host=null),X=X&&(k[0]===""||q[0]==="")),H)_.host=C.host||C.host===""?C.host:_.host,_.hostname=C.hostname||C.hostname===""?C.hostname:_.hostname,_.search=C.search,_.query=C.query,q=k;else if(k.length)q||(q=[]),q.pop(),q=q.concat(k),_.search=C.search,_.query=C.query;else if(!o.isNullOrUndefined(C.search))return ee&&(_.hostname=_.host=q.shift(),(b=!!(_.host&&_.host.indexOf("@")>0)&&_.host.split("@"))&&(_.auth=b.shift(),_.host=_.hostname=b.shift())),_.search=C.search,_.query=C.query,o.isNull(_.pathname)&&o.isNull(_.search)||(_.path=(_.pathname?_.pathname:"")+(_.search?_.search:"")),_.href=_.format(),_;if(!q.length)return _.pathname=null,_.search?_.path="/"+_.search:_.path=null,_.href=_.format(),_;for(var re=q.slice(-1)[0],ae=(_.host||C.host||q.length>1)&&(re==="."||re==="..")||re==="",te=0,L=q.length;L>=0;L--)(re=q[L])==="."?q.splice(L,1):re===".."?(q.splice(L,1),te++):te&&(q.splice(L,1),te--);if(!X&&!J)for(;te--;te)q.unshift("..");!X||q[0]===""||q[0]&&q[0].charAt(0)==="/"||q.unshift(""),ae&&q.join("/").substr(-1)!=="/"&&q.push("");var b,U=q[0]===""||q[0]&&q[0].charAt(0)==="/";return ee&&(_.hostname=_.host=U?"":q.length?q.shift():"",(b=!!(_.host&&_.host.indexOf("@")>0)&&_.host.split("@"))&&(_.auth=b.shift(),_.host=_.hostname=b.shift())),(X=X||_.host&&q.length)&&!U&&q.unshift(""),q.length?_.pathname=q.join("/"):(_.pathname=null,_.path=null),o.isNull(_.pathname)&&o.isNull(_.search)||(_.path=(_.pathname?_.pathname:"")+(_.search?_.search:"")),_.auth=C.auth||_.auth,_.slashes=_.slashes||C.slashes,_.href=_.format(),_},s.prototype.parseHost=function(){var C=this.host,w=l.exec(C);w&&((w=w[0])!==":"&&(this.port=w.substr(1)),C=C.substr(0,C.length-w.length)),C&&(this.hostname=C)}},function(n,r,i){(function(a,o){var s;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(u){r&&r.nodeType,a&&a.nodeType;var l=typeof o=="object"&&o;l.global!==l&&l.window!==l&&l.self;var p,c=2147483647,f=/^xn--/,h=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=Math.floor,m=String.fromCharCode;function g(O){throw new RangeError(y[O])}function d(O,N){for(var R=O.length,M=[];R--;)M[R]=N(O[R]);return M}function S(O,N){var R=O.split("@"),M="";return R.length>1&&(M=R[0]+"@",O=R[1]),M+d((O=O.replace(v,".")).split("."),N).join(".")}function T(O){for(var N,R,M=[],A=0,G=O.length;A<G;)(N=O.charCodeAt(A++))>=55296&&N<=56319&&A<G?(64512&(R=O.charCodeAt(A++)))==56320?M.push(((1023&N)<<10)+(1023&R)+65536):(M.push(N),A--):M.push(N);return M}function C(O){return d(O,function(N){var R="";return N>65535&&(R+=m((N-=65536)>>>10&1023|55296),N=56320|1023&N),R+=m(N)}).join("")}function w(O,N){return O+22+75*(O<26)-((N!=0)<<5)}function _(O,N,R){var M=0;for(O=R?x(O/700):O>>1,O+=x(O/N);O>455;M+=36)O=x(O/35);return x(M+36*O/(O+38))}function E(O){var N,R,M,A,G,j,k,F,B,$,H,X=[],J=O.length,q=0,ee=128,re=72;for((R=O.lastIndexOf("-"))<0&&(R=0),M=0;M<R;++M)O.charCodeAt(M)>=128&&g("not-basic"),X.push(O.charCodeAt(M));for(A=R>0?R+1:0;A<J;){for(G=q,j=1,k=36;A>=J&&g("invalid-input"),((F=(H=O.charCodeAt(A++))-48<10?H-22:H-65<26?H-65:H-97<26?H-97:36)>=36||F>x((c-q)/j))&&g("overflow"),q+=F*j,!(F<(B=k<=re?1:k>=re+26?26:k-re));k+=36)j>x(c/($=36-B))&&g("overflow"),j*=$;re=_(q-G,N=X.length+1,G==0),x(q/N)>c-ee&&g("overflow"),ee+=x(q/N),q%=N,X.splice(q++,0,ee)}return C(X)}function D(O){var N,R,M,A,G,j,k,F,B,$,H,X,J,q,ee,re=[];for(X=(O=T(O)).length,N=128,R=0,G=72,j=0;j<X;++j)(H=O[j])<128&&re.push(m(H));for(M=A=re.length,A&&re.push("-");M<X;){for(k=c,j=0;j<X;++j)(H=O[j])>=N&&H<k&&(k=H);for(k-N>x((c-R)/(J=M+1))&&g("overflow"),R+=(k-N)*J,N=k,j=0;j<X;++j)if((H=O[j])<N&&++R>c&&g("overflow"),H==N){for(F=R,B=36;!(F<($=B<=G?1:B>=G+26?26:B-G));B+=36)ee=F-$,q=36-$,re.push(m(w($+ee%q,0))),F=x(ee/q);re.push(m(w(F,0))),G=_(R,J,M==A),R=0,++M}++R,++N}return re.join("")}p={version:"1.4.1",ucs2:{decode:T,encode:C},decode:E,encode:D,toASCII:function(O){return S(O,function(N){return h.test(N)?"xn--"+D(N):N})},toUnicode:function(O){return S(O,function(N){return f.test(N)?E(N.slice(4).toLowerCase()):N})}},(s=(function(){return p}).call(r,i,r,a))===void 0||(a.exports=s)})()}).call(this,i(246)(n),i(78))},function(n,r){n.exports=function(i){return i.webpackPolyfill||(i.deprecate=function(){},i.paths=[],i.children||(i.children=[]),Object.defineProperty(i,"loaded",{enumerable:!0,get:function(){return i.l}}),Object.defineProperty(i,"id",{enumerable:!0,get:function(){return i.i}}),i.webpackPolyfill=1),i}},function(n,r,i){n.exports={isString:function(a){return typeof a=="string"},isObject:function(a){return typeof a=="object"&&a!==null},isNull:function(a){return a===null},isNullOrUndefined:function(a){return a==null}}},function(n,r,i){r.decode=r.parse=i(249),r.encode=r.stringify=i(250)},function(n,r,i){function a(s,u){return Object.prototype.hasOwnProperty.call(s,u)}n.exports=function(s,u,l,p){u=u||"&",l=l||"=";var c={};if(typeof s!="string"||s.length===0)return c;var f=/\+/g;s=s.split(u);var h=1e3;p&&typeof p.maxKeys=="number"&&(h=p.maxKeys);var v=s.length;h>0&&v>h&&(v=h);for(var y=0;y<v;++y){var x,m,g,d,S=s[y].replace(f,"%20"),T=S.indexOf(l);T>=0?(x=S.substr(0,T),m=S.substr(T+1)):(x=S,m=""),g=decodeURIComponent(x),d=decodeURIComponent(m),a(c,g)?o(c[g])?c[g].push(d):c[g]=[c[g],d]:c[g]=d}return c};var o=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"}},function(n,r,i){var a=function(l){switch(typeof l){case"string":return l;case"boolean":return l?"true":"false";case"number":return isFinite(l)?l:"";default:return""}};n.exports=function(l,p,c,f){return p=p||"&",c=c||"=",l===null&&(l=void 0),typeof l=="object"?s(u(l),function(h){var v=encodeURIComponent(a(h))+c;return o(l[h])?s(l[h],function(y){return v+encodeURIComponent(a(y))}).join(p):v+encodeURIComponent(a(l[h]))}).join(p):f?encodeURIComponent(a(f))+c+encodeURIComponent(a(l)):""};var o=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function s(l,p){if(l.map)return l.map(p);for(var c=[],f=0;f<l.length;f++)c.push(p(l[f],f));return c}var u=Object.keys||function(l){var p=[];for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&p.push(c);return p}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(52);r.attr_setAnExistingAttributeValue=function(o,s){o._element===null?o._value=s:a.element_change(o,o._element,s)}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(108),o=i(30),s=i(52);r.tokenList_validationSteps=function(u,l){if(!o.dom_hasSupportedTokens(u._attribute._localName))throw new TypeError("There are no supported tokens defined for attribute name: '"+u._attribute._localName+"'.");return o.dom_getSupportedTokens(u._attribute._localName).has(l.toLowerCase())},r.tokenList_updateSteps=function(u){(u._element.hasAttribute(u._attribute._localName)||u._tokenSet.size!==0)&&s.element_setAnAttributeValue(u._element,u._attribute._localName,a.orderedSet_serialize(u._tokenSet))},r.tokenList_serializeSteps=function(u){return s.element_getAnAttributeValue(u._element,u._attribute._localName)}},function(n,r,i){var a=this&&this.__values||function(u){var l=typeof Symbol=="function"&&Symbol.iterator,p=l&&u[l],c=0;if(p)return p.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&c>=u.length&&(u=void 0),{value:u&&u[c++],done:!u}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=i(1);function s(u){return o.isBoolean(u)?u:u.capture||!1}r.eventTarget_flatten=s,r.eventTarget_flattenMore=function(u){var l=s(u),p=!1,c=!1;return o.isBoolean(u)||(p=u.once||!1,c=u.passive||!1),[l,c,p]},r.eventTarget_addEventListener=function(u,l){if(l.callback!==null){for(var p=0;p<u._eventListenerList.length;p++){var c=u._eventListenerList[p];if(c.type===l.type&&c.callback.handleEvent===l.callback.handleEvent&&c.capture===l.capture)return}u._eventListenerList.push(l)}},r.eventTarget_removeEventListener=function(u,l,p){l.removed=!0,u._eventListenerList.splice(p,1)},r.eventTarget_removeAllEventListeners=function(u){var l,p;try{for(var c=a(u._eventListenerList),f=c.next();!f.done;f=c.next())f.value.removed=!0}catch(h){l={error:h}}finally{try{f&&!f.done&&(p=c.return)&&p.call(c)}finally{if(l)throw l.error}}u._eventListenerList.length=0}},function(n,r,i){var a=this&&this.__values||function(u){var l=typeof Symbol=="function"&&Symbol.iterator,p=l&&u[l],c=0;if(p)return p.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&c>=u.length&&(u=void 0),{value:u&&u[c++],done:!u}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),s=i(29);r.parentNode_convertNodesIntoANode=function(u,l){for(var p,c,f=null,h=0;h<u.length;h++){var v=u[h];if(o.isString(v)){var y=s.create_text(l,v);u[h]=y}}if(u.length===1)f=u[0];else{var x=f=s.create_documentFragment(l);try{for(var m=a(u),g=m.next();!g.done;g=m.next())v=g.value,x.appendChild(v)}catch(d){p={error:d}}finally{try{g&&!g.done&&(c=m.return)&&c.call(m)}finally{if(p)throw p.error}}}return f}},function(n,r,i){var a=this&&this.__values||function(w){var _=typeof Symbol=="function"&&Symbol.iterator,E=_&&w[_],D=0;if(E)return E.call(w);if(w&&typeof w.length=="number")return{next:function(){return w&&D>=w.length&&(w=void 0),{value:w&&w[D++],done:!w}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(w,_){var E=typeof Symbol=="function"&&w[Symbol.iterator];if(!E)return w;var D,O,N=E.call(w),R=[];try{for(;(_===void 0||_-- >0)&&!(D=N.next()).done;)R.push(D.value)}catch(M){O={error:M}}finally{try{D&&!D.done&&(E=N.return)&&E.call(N)}finally{if(O)throw O.error}}return R},s=this&&this.__spread||function(){for(var w=[],_=0;_<arguments.length;_++)w=w.concat(o(arguments[_]));return w};Object.defineProperty(r,"__esModule",{value:!0});var u=i(2),l=i(9),p=i(3),c=i(29),f=i(17),h=i(175),v=i(107),y=i(176),x=i(37),m=i(177);function g(w){return w._startNode===w._endNode&&w._startOffset===w._endOffset}function d(w){return f.tree_rootNode(w._startNode)}function S(w,_){return f.tree_rootNode(w)===d(_)&&h.boundaryPoint_position([w,0],_._start)===u.BoundaryPosition.After&&h.boundaryPoint_position([w,f.tree_nodeLength(w)],_._end)===u.BoundaryPosition.Before}function T(w,_){var E=f.tree_isAncestorOf(_._startNode,w,!0),D=f.tree_isAncestorOf(_._endNode,w,!0);return E&&!D||!E&&D}function C(w){var _,E,D,O,N,R,M=c.create_documentFragment(w._startNode._nodeDocument);if(g(w))return M;var A=w._startNode,G=w._startOffset,j=w._endNode,k=w._endOffset;if(A===j&&p.Guard.isCharacterDataNode(A))return(V=y.node_clone(A))._data=v.characterData_substringData(A,G,k-G),x.mutation_append(V,M),v.characterData_replaceData(A,G,k-G,""),M;for(var F=A;!f.tree_isAncestorOf(j,F,!0);){if(F._parent===null)throw new Error("Parent node  is null.");F=F._parent}var B=null;if(!f.tree_isAncestorOf(j,A,!0))try{for(var $=a(F._children),H=$.next();!H.done;H=$.next())if(T(ee=H.value,w)){B=ee;break}}catch(ne){_={error:ne}}finally{try{H&&!H.done&&(E=$.return)&&E.call($)}finally{if(_)throw _.error}}var X=null;if(!f.tree_isAncestorOf(A,j,!0))for(var J=s(F._children),q=J.length-1;q>0;q--){var ee;if(T(ee=J[q],w)){X=ee;break}}var re,ae,te=[];try{for(var L=a(F._children),b=L.next();!b.done;b=L.next())if(S(Y=b.value,w)){if(p.Guard.isDocumentTypeNode(Y))throw new l.HierarchyRequestError;te.push(Y)}}catch(ne){D={error:ne}}finally{try{b&&!b.done&&(O=L.return)&&O.call(L)}finally{if(D)throw D.error}}if(f.tree_isAncestorOf(j,A,!0))re=A,ae=G;else{for(var U=A;U._parent!==null&&!f.tree_isAncestorOf(j,U._parent);)U=U._parent;if(U._parent===null)throw new Error("Parent node is null.");re=U._parent,ae=1+f.tree_index(U)}if(p.Guard.isCharacterDataNode(B))(V=y.node_clone(A))._data=v.characterData_substringData(A,G,f.tree_nodeLength(A)-G),x.mutation_append(V,M),v.characterData_replaceData(A,G,f.tree_nodeLength(A)-G,"");else if(B!==null){var V=y.node_clone(B);x.mutation_append(V,M);var I=C(c.create_range([A,G],[B,f.tree_nodeLength(B)]));x.mutation_append(I,V)}try{for(var z=a(te),W=z.next();!W.done;W=z.next()){var Y=W.value;x.mutation_append(Y,M)}}catch(ne){N={error:ne}}finally{try{W&&!W.done&&(R=z.return)&&R.call(z)}finally{if(N)throw N.error}}return p.Guard.isCharacterDataNode(X)?((V=y.node_clone(j))._data=v.characterData_substringData(j,0,k),x.mutation_append(V,M),v.characterData_replaceData(j,0,k,"")):X!==null&&(V=y.node_clone(X),x.mutation_append(V,M),I=C(c.create_range([X,0],[j,k])),x.mutation_append(I,V)),w._start=[re,ae],w._end=[re,ae],M}r.range_collapsed=g,r.range_root=d,r.range_isContained=S,r.range_isPartiallyContained=T,r.range_setTheStart=function(w,_,E){if(p.Guard.isDocumentTypeNode(_))throw new l.InvalidNodeTypeError;if(E>f.tree_nodeLength(_))throw new l.IndexSizeError;var D=[_,E];d(w)===f.tree_rootNode(_)&&h.boundaryPoint_position(D,w._end)!==u.BoundaryPosition.After||(w._end=D),w._start=D},r.range_setTheEnd=function(w,_,E){if(p.Guard.isDocumentTypeNode(_))throw new l.InvalidNodeTypeError;if(E>f.tree_nodeLength(_))throw new l.IndexSizeError;var D=[_,E];d(w)===f.tree_rootNode(_)&&h.boundaryPoint_position(D,w._start)!==u.BoundaryPosition.Before||(w._start=D),w._end=D},r.range_select=function(w,_){var E=w._parent;if(E===null)throw new l.InvalidNodeTypeError;var D=f.tree_index(w);_._start=[E,D],_._end=[E,D+1]},r.range_extract=C,r.range_cloneTheContents=function w(_){var E,D,O,N,R,M,A=c.create_documentFragment(_._startNode._nodeDocument);if(g(_))return A;var G=_._startNode,j=_._startOffset,k=_._endNode,F=_._endOffset;G===k&&p.Guard.isCharacterDataNode(G)&&((b=y.node_clone(G))._data=v.characterData_substringData(G,j,F-j),x.mutation_append(b,A));for(var B=G;!f.tree_isAncestorOf(k,B,!0);){if(B._parent===null)throw new Error("Parent node  is null.");B=B._parent}var $=null;if(!f.tree_isAncestorOf(k,G,!0))try{for(var H=a(B._children),X=H.next();!X.done;X=H.next())if(T(re=X.value,_)){$=re;break}}catch(W){E={error:W}}finally{try{X&&!X.done&&(D=H.return)&&D.call(H)}finally{if(E)throw E.error}}var J=null;if(!f.tree_isAncestorOf(G,k,!0))for(var q=s(B._children),ee=q.length-1;ee>0;ee--){var re;if(T(re=q[ee],_)){J=re;break}}var ae=[];try{for(var te=a(B._children),L=te.next();!L.done;L=te.next())if(S(z=L.value,_)){if(p.Guard.isDocumentTypeNode(z))throw new l.HierarchyRequestError;ae.push(z)}}catch(W){O={error:W}}finally{try{L&&!L.done&&(N=te.return)&&N.call(te)}finally{if(O)throw O.error}}if(p.Guard.isCharacterDataNode($))(b=y.node_clone(G))._data=v.characterData_substringData(G,j,f.tree_nodeLength(G)-j),x.mutation_append(b,A);else if($!==null){var b=y.node_clone($);x.mutation_append(b,A);var U=w(c.create_range([G,j],[$,f.tree_nodeLength($)]));x.mutation_append(U,b)}try{for(var V=a(ae),I=V.next();!I.done;I=V.next()){var z=I.value,b=y.node_clone(z);x.mutation_append(b,A)}}catch(W){R={error:W}}finally{try{I&&!I.done&&(M=V.return)&&M.call(V)}finally{if(R)throw R.error}}return p.Guard.isCharacterDataNode(J)?((b=y.node_clone(k))._data=v.characterData_substringData(k,0,F),x.mutation_append(b,A)):J!==null&&(b=y.node_clone(J),A.append(b),U=C(c.create_range([J,0],[k,F])),x.mutation_append(U,b)),A},r.range_insert=function(w,_){var E,D;if(p.Guard.isProcessingInstructionNode(_._startNode)||p.Guard.isCommentNode(_._startNode)||p.Guard.isTextNode(_._startNode)&&_._startNode._parent===null||_._startNode===w)throw new l.HierarchyRequestError;var O,N=null;if(p.Guard.isTextNode(_._startNode))N=_._startNode;else{var R=0;try{for(var M=a(_._startNode._children),A=M.next();!A.done;A=M.next()){var G=A.value;if(R===_._startOffset){N=G;break}R++}}catch(k){E={error:k}}finally{try{A&&!A.done&&(D=M.return)&&D.call(M)}finally{if(E)throw E.error}}}if(N===null)O=_._startNode;else{if(N._parent===null)throw new Error("Parent node is null.");O=N._parent}x.mutation_ensurePreInsertionValidity(w,O,N),p.Guard.isTextNode(_._startNode)&&(N=m.text_split(_._startNode,_._startOffset)),w===N&&(N=w._nextSibling),w._parent!==null&&x.mutation_remove(w,w._parent);var j=N===null?f.tree_nodeLength(O):f.tree_index(N);p.Guard.isDocumentFragmentNode(w)?j+=f.tree_nodeLength(w):j++,x.mutation_preInsert(w,O,N),g(_)&&(_._end=[O,j])},r.range_getContainedNodes=function(w){var _;return(_={})[Symbol.iterator]=function(){var E=w.commonAncestorContainer,D=f.tree_getFirstDescendantNode(E);return{next:function(){for(;D&&!S(D,w);)D=f.tree_getNextDescendantNode(E,D);if(D===null)return{done:!0,value:null};var O={done:!1,value:D};return D=f.tree_getNextDescendantNode(E,D),O}}},_},r.range_getPartiallyContainedNodes=function(w){var _;return(_={})[Symbol.iterator]=function(){var E=w.commonAncestorContainer,D=f.tree_getFirstDescendantNode(E);return{next:function(){for(;D&&!T(D,w);)D=f.tree_getNextDescendantNode(E,D);if(D===null)return{done:!0,value:null};var O={done:!1,value:D};return D=f.tree_getNextDescendantNode(E,D),O}}},_}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(9);r.selectors_scopeMatchASelectorsString=function(o,s){throw new a.NotSupportedError}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(2),o=i(105);r.treeWalker_traverseChildren=function(s,u){for(var l=u?s._current._firstChild:s._current._lastChild;l!==null;){var p=o.traversal_filter(s,l);if(p===a.FilterResult.Accept)return s._current=l,l;if(p===a.FilterResult.Skip){var c=u?l._firstChild:l._lastChild;if(c!==null){l=c;continue}}for(;l!==null;){var f=u?l._nextSibling:l._previousSibling;if(f!==null){l=f;break}var h=l._parent;if(h===null||h===s._root||h===s._current)return null;l=h}}return null},r.treeWalker_traverseSiblings=function(s,u){var l=s._current;if(l===s._root)return null;for(;;){for(var p=u?l._nextSibling:l._previousSibling;p!==null;){l=p;var c=o.traversal_filter(s,l);if(c===a.FilterResult.Accept)return s._current=l,l;p=u?l._firstChild:l._lastChild,c!==a.FilterResult.Reject&&p!==null||(p=u?l._nextSibling:l._previousSibling)}if((l=l._parent)===null||l===s._root||o.traversal_filter(s,l)===a.FilterResult.Accept)return null}}},function(n,r,i){i(89),i(74);var a,o=this&&this.__extends||(a=function(f,h){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,y){v.__proto__=y}||function(v,y){for(var x in y)y.hasOwnProperty(x)&&(v[x]=y[x])})(f,h)},function(f,h){function v(){this.constructor=f}a(f,h),f.prototype=h===null?Object.create(h):(v.prototype=h.prototype,new v)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),u=i(2),l=i(50),p=i(3),c=function(f){function h(v,y){var x=f.call(this,v)||this;return x._indentation={},x._lengthToLastNewline=0,x._writerOptions=s.applyDefaults(y,{wellFormed:!1,headless:!1,prettyPrint:!1,indent:"  ",newline:`
`,offset:0,width:0,allowEmptyTags:!1,indentTextOnlyNodes:!1,spaceBeforeSlash:!1}),x}return o(h,f),h.prototype.serialize=function(v){return this._refs={suppressPretty:!1,emptyNode:!1,markup:""},v.nodeType!==u.NodeType.Document||this._writerOptions.headless||this.declaration(this._builderOptions.version,this._builderOptions.encoding,this._builderOptions.standalone),this.serializeNode(v,this._writerOptions.wellFormed),this._writerOptions.prettyPrint&&this._refs.markup.slice(-this._writerOptions.newline.length)===this._writerOptions.newline&&(this._refs.markup=this._refs.markup.slice(0,-this._writerOptions.newline.length)),this._refs.markup},h.prototype.declaration=function(v,y,x){this._beginLine(),this._refs.markup+='<?xml version="'+v+'"',y!==void 0&&(this._refs.markup+=' encoding="'+y+'"'),x!==void 0&&(this._refs.markup+=' standalone="'+(x?"yes":"no")+'"'),this._refs.markup+="?>",this._endLine()},h.prototype.docType=function(v,y,x){this._beginLine(),this._refs.markup+=y&&x?"<!DOCTYPE "+v+' PUBLIC "'+y+'" "'+x+'">':y?"<!DOCTYPE "+v+' PUBLIC "'+y+'">':x?"<!DOCTYPE "+v+' SYSTEM "'+x+'">':"<!DOCTYPE "+v+">",this._endLine()},h.prototype.openTagBegin=function(v){this._beginLine(),this._refs.markup+="<"+v},h.prototype.openTagEnd=function(v,y,x){if(this._refs.suppressPretty=!1,this._refs.emptyNode=!1,this._writerOptions.prettyPrint&&!y&&!x){for(var m=!0,g=!0,d=this.currentNode.firstChild,S=0,T=0;d;){if(p.Guard.isExclusiveTextNode(d))T++;else{if(!p.Guard.isCDATASectionNode(d)){m=!1,g=!1;break}S++}d.data!==""&&(g=!1),d=d.nextSibling}this._refs.suppressPretty=!this._writerOptions.indentTextOnlyNodes&&m&&(S<=1&&T===0||S===0),this._refs.emptyNode=g}(x||y||this._refs.emptyNode)&&this._writerOptions.allowEmptyTags?this._refs.markup+="></"+v+">":this._refs.markup+=x?" />":y||this._refs.emptyNode?this._writerOptions.spaceBeforeSlash?" />":"/>":">",this._endLine()},h.prototype.closeTag=function(v){this._refs.emptyNode||(this._beginLine(),this._refs.markup+="</"+v+">"),this._refs.suppressPretty=!1,this._refs.emptyNode=!1,this._endLine()},h.prototype.attribute=function(v,y){var x=v+'="'+y+'"';this._writerOptions.prettyPrint&&this._writerOptions.width>0&&this._refs.markup.length-this._lengthToLastNewline+1+x.length>this._writerOptions.width?(this._endLine(),this._beginLine(),this._refs.markup+=this._indent(1)+x):this._refs.markup+=" "+x},h.prototype.text=function(v){v!==""&&(this._beginLine(),this._refs.markup+=v,this._endLine())},h.prototype.cdata=function(v){v!==""&&(this._beginLine(),this._refs.markup+="<![CDATA["+v+"]]>",this._endLine())},h.prototype.comment=function(v){this._beginLine(),this._refs.markup+="<!--"+v+"-->",this._endLine()},h.prototype.instruction=function(v,y){this._beginLine(),this._refs.markup+="<?"+(y===""?v:v+" "+y)+"?>",this._endLine()},h.prototype._beginLine=function(){this._writerOptions.prettyPrint&&!this._refs.suppressPretty&&(this._refs.markup+=this._indent(this._writerOptions.offset+this.level))},h.prototype._endLine=function(){this._writerOptions.prettyPrint&&!this._refs.suppressPretty&&(this._refs.markup+=this._writerOptions.newline,this._lengthToLastNewline=this._refs.markup.length)},h.prototype._indent=function(v){if(v<=0)return"";if(this._indentation[v]!==void 0)return this._indentation[v];var y=this._writerOptions.indent.repeat(v);return this._indentation[v]=y,y},h}(l.BaseWriter);r.XMLWriter=c},function(n,r,i){var a=i(47),o=i(35);n.exports="".repeat||function(s){var u=String(o(this)),l="",p=a(s);if(p<0||p==1/0)throw RangeError("Wrong number of repetitions");for(;p>0;(p>>>=1)&&(u+=u))1&p&&(l+=u);return l}},function(n,r,i){i(31),i(32),i(33),i(19),i(178),i(20),i(22),i(23);var a,o=this&&this.__extends||(a=function(c,f){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(c,f)},function(c,f){function h(){this.constructor=c}a(c,f),c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}),s=this&&this.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&c[f],v=0;if(h)return h.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&v>=c.length&&(c=void 0),{value:c&&c[v++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var u=i(67),l=i(1),p=function(c){function f(h,v){var y=c.call(this,h)||this;return y._writerOptions=l.applyDefaults(v,{wellFormed:!1,prettyPrint:!1,indent:"  ",newline:`
`,offset:0,group:!1,verbose:!1}),y}return o(f,c),f.prototype.serialize=function(h){var v=l.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1}),y=new u.ObjectWriter(this._builderOptions,v).serialize(h);return this._beginLine(this._writerOptions,0)+this._convertObject(y,this._writerOptions)},f.prototype._convertObject=function(h,v,y){var x,m,g=this;y===void 0&&(y=0);var d="",S=this._isLeafNode(h);if(l.isArray(h)){d+="[";var T=h.length,C=0;try{for(var w=s(h),_=w.next();!_.done;_=w.next()){var E=_.value;d+=this._endLine(v,y+1)+this._beginLine(v,y+1)+this._convertObject(E,v,y+1),C<T-1&&(d+=","),C++}}catch(N){x={error:N}}finally{try{_&&!_.done&&(m=w.return)&&m.call(w)}finally{if(x)throw x.error}}d+=this._endLine(v,y)+this._beginLine(v,y),d+="]"}else if(l.isObject(h)){d+="{";var D=l.objectLength(h),O=0;l.forEachObject(h,function(N,R){S&&v.prettyPrint?d+=" ":d+=g._endLine(v,y+1)+g._beginLine(v,y+1),d+=g._key(N),v.prettyPrint&&(d+=" "),d+=g._convertObject(R,v,y+1),O<D-1&&(d+=","),O++},this),S&&v.prettyPrint?d+=" ":d+=this._endLine(v,y)+this._beginLine(v,y),d+="}"}else d+=this._val(h);return d},f.prototype._beginLine=function(h,v){if(!h.prettyPrint)return"";var y=h.offset+v+1;return y>0?new Array(y).join(h.indent):""},f.prototype._endLine=function(h,v){return h.prettyPrint?h.newline:""},f.prototype._key=function(h){return'"'+h+'":'},f.prototype._val=function(h){return JSON.stringify(h)},f.prototype._isLeafNode=function(h){return this._descendantCount(h)<=1},f.prototype._descendantCount=function(h,v){var y=this;return v===void 0&&(v=0),l.isArray(h)?l.forEachArray(h,function(x){return v+=y._descendantCount(x,v)},this):l.isObject(h)?l.forEachObject(h,function(x,m){return v+=y._descendantCount(m,v)},this):v++,v},f}(i(50).BaseWriter);r.JSONWriter=p},function(n,r,i){i(31),i(32),i(33),i(19),i(178),i(89),i(20),i(22),i(23);var a,o=this&&this.__extends||(a=function(c,f){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(c,f)},function(c,f){function h(){this.constructor=c}a(c,f),c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}),s=this&&this.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,h=f&&c[f],v=0;if(h)return h.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&v>=c.length&&(c=void 0),{value:c&&c[v++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var u=i(67),l=i(1),p=function(c){function f(h,v){var y=c.call(this,h)||this;if(y._writerOptions=l.applyDefaults(v,{wellFormed:!1,indent:"  ",newline:`
`,offset:0,group:!1,verbose:!1}),y._writerOptions.indent.length<2)throw new Error("YAML indententation string must be at least two characters long.");if(y._writerOptions.offset<0)throw new Error("YAML offset should be zero or a positive number.");return y}return o(f,c),f.prototype.serialize=function(h){var v=l.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1}),y=new u.ObjectWriter(this._builderOptions,v).serialize(h),x=this._beginLine(this._writerOptions,0)+"---"+this._endLine(this._writerOptions)+this._convertObject(y,this._writerOptions,0);return x.slice(-this._writerOptions.newline.length)===this._writerOptions.newline&&(x=x.slice(0,-this._writerOptions.newline.length)),x},f.prototype._convertObject=function(h,v,y,x){var m,g,d=this;x===void 0&&(x=!1);var S="";if(l.isArray(h))try{for(var T=s(h),C=T.next();!C.done;C=T.next()){var w=C.value;S+=this._beginLine(v,y,!0),l.isObject(w)?l.isEmpty(w)?S+='""'+this._endLine(v):S+=this._convertObject(w,v,y,!0):S+=this._val(w)+this._endLine(v)}}catch(_){m={error:_}}finally{try{C&&!C.done&&(g=T.return)&&g.call(T)}finally{if(m)throw m.error}}else l.forEachObject(h,function(_,E){x?(S+=d._key(_),x=!1):S+=d._beginLine(v,y)+d._key(_),l.isObject(E)?l.isEmpty(E)?S+=' ""'+d._endLine(v):S+=d._endLine(v)+d._convertObject(E,v,y+1):S+=" "+d._val(E)+d._endLine(v)},this);return S},f.prototype._beginLine=function(h,v,y){y===void 0&&(y=!1);var x=h.offset+v+1,m=new Array(x).join(h.indent);return y?m.substr(0,m.length-2)+"-"+m.substr(-1,1):m},f.prototype._endLine=function(h){return h.newline},f.prototype._key=function(h){return'"'+h+'":'},f.prototype._val=function(h){return JSON.stringify(h)},f}(i(50).BaseWriter);r.YAMLWriter=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0}),i(110).dom.setFeatures(!0);var a=i(110);r.DOMImplementation=a.DOMImplementation;var o=i(271);r.DOMParser=o.DOMParser;var s=i(274);r.XMLSerializer=s.XMLSerializer},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(3),o=i(0),s=function(){function u(){}return u.prototype.before=function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];var c=a.Cast.asNode(this),f=c._parent;if(f!==null){for(var h=c._previousSibling,v=!0;v&&h;){v=!1;for(var y=0;y<l.length;y++){var x=l[y];if(x===h){h=h._previousSibling,v=!0;break}}}var m=o.parentNode_convertNodesIntoANode(l,c._nodeDocument);h=h===null?f._firstChild:h._nextSibling,o.mutation_preInsert(m,f,h)}},u.prototype.after=function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];var c=a.Cast.asNode(this),f=c._parent;if(f){for(var h=c._nextSibling,v=!0;v&&h;){v=!1;for(var y=0;y<l.length;y++){var x=l[y];if(x===h){h=h._nextSibling,v=!0;break}}}var m=o.parentNode_convertNodesIntoANode(l,c._nodeDocument);o.mutation_preInsert(m,f,h)}},u.prototype.replaceWith=function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];var c=a.Cast.asNode(this),f=c._parent;if(f){for(var h=c._nextSibling,v=!0;v&&h;){v=!1;for(var y=0;y<l.length;y++){var x=l[y];if(x===h){h=h._nextSibling,v=!0;break}}}var m=o.parentNode_convertNodesIntoANode(l,c._nodeDocument);c._parent===f?o.mutation_replace(c,m,f):o.mutation_preInsert(m,f,h)}},u.prototype.remove=function(){var l=a.Cast.asNode(this),p=l._parent;p&&o.mutation_remove(l,p)},u}();r.ChildNodeImpl=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){};r.DocumentOrShadowRootImpl=a},function(n,r,i){var a=this&&this.__values||function(p){var c=typeof Symbol=="function"&&Symbol.iterator,f=c&&p[c],h=0;if(f)return f.call(p);if(p&&typeof p.length=="number")return{next:function(){return p&&h>=p.length&&(p=void 0),{value:p&&p[h++],done:!p}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=i(3),u=i(7),l=function(){function p(c){this._nodeList=[],this._recordQueue=[],this._callback=c;var f=o.dom.window;u.set.append(f._mutationObservers,this)}return p.prototype.observe=function(c,f){var h,v;if((f=f||{childList:!1,subtree:!1}).attributeOldValue===void 0&&f.attributeFilter===void 0||f.attributes!==void 0||(f.attributes=!0),f.characterDataOldValue!==void 0&&f.characterData===void 0&&(f.characterData=!0),!f.childList&&!f.attributes&&!f.characterData)throw new TypeError;if(f.attributeOldValue&&!f.attributes)throw new TypeError;if(f.attributeFilter!==void 0&&!f.attributes)throw new TypeError;if(f.characterDataOldValue&&!f.characterData)throw new TypeError;var y=!1,x=f,m=function(T){var C,w;if(T.observer===g){y=!0;try{for(var _=(C=void 0,a(g._nodeList)),E=_.next();!E.done;E=_.next()){var D=E.value;u.list.remove(D._registeredObserverList,function(O){return s.Guard.isTransientRegisteredObserver(O)&&O.source===T})}}catch(O){C={error:O}}finally{try{E&&!E.done&&(w=_.return)&&w.call(_)}finally{if(C)throw C.error}}T.options=x}},g=this;try{for(var d=a(c._registeredObserverList),S=d.next();!S.done;S=d.next())m(S.value)}catch(T){h={error:T}}finally{try{S&&!S.done&&(v=d.return)&&v.call(d)}finally{if(h)throw h.error}}y||(c._registeredObserverList.push({observer:this,options:f}),this._nodeList.push(c))},p.prototype.disconnect=function(){var c,f,h=this;try{for(var v=a(this._nodeList),y=v.next();!y.done;y=v.next()){var x=y.value;u.list.remove(x._registeredObserverList,function(m){return m.observer===h})}}catch(m){c={error:m}}finally{try{y&&!y.done&&(f=v.return)&&f.call(v)}finally{if(c)throw c.error}}this._recordQueue=[]},p.prototype.takeRecords=function(){var c=this._recordQueue;return this._recordQueue=[],c},p}();r.MutationObserverImpl=l},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(3),o=function(){function s(){}return Object.defineProperty(s.prototype,"previousElementSibling",{get:function(){for(var u=a.Cast.asNode(this)._previousSibling;u;){if(a.Guard.isElementNode(u))return u;u=u._previousSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"nextElementSibling",{get:function(){for(var u=a.Cast.asNode(this)._nextSibling;u;){if(a.Guard.isElementNode(u))return u;u=u._nextSibling}return null},enumerable:!0,configurable:!0}),s}();r.NonDocumentTypeChildNodeImpl=o},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(3),o=i(0),s=function(){function u(){}return u.prototype.getElementById=function(l){for(var p=o.tree_getFirstDescendantNode(a.Cast.asNode(this),!1,!1,function(c){return a.Guard.isElementNode(c)});p!==null;){if(p._uniqueIdentifier===l)return p;p=o.tree_getNextDescendantNode(a.Cast.asNode(this),p,!1,!1,function(c){return a.Guard.isElementNode(c)})}return null},u}();r.NonElementParentNodeImpl=s},function(n,r,i){var a=this&&this.__values||function(l){var p=typeof Symbol=="function"&&Symbol.iterator,c=p&&l[p],f=0;if(c)return c.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&f>=l.length&&(l=void 0),{value:l&&l[f++],done:!l}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=i(3),s=i(0),u=function(){function l(){}return Object.defineProperty(l.prototype,"children",{get:function(){return s.create_htmlCollection(o.Cast.asNode(this))},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"firstElementChild",{get:function(){for(var p=o.Cast.asNode(this)._firstChild;p;){if(o.Guard.isElementNode(p))return p;p=p._nextSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"lastElementChild",{get:function(){for(var p=o.Cast.asNode(this)._lastChild;p;){if(o.Guard.isElementNode(p))return p;p=p._previousSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"childElementCount",{get:function(){var p,c,f=0;try{for(var h=a(o.Cast.asNode(this)._children),v=h.next();!v.done;v=h.next()){var y=v.value;o.Guard.isElementNode(y)&&f++}}catch(x){p={error:x}}finally{try{v&&!v.done&&(c=h.return)&&c.call(h)}finally{if(p)throw p.error}}return f},enumerable:!0,configurable:!0}),l.prototype.prepend=function(){for(var p=[],c=0;c<arguments.length;c++)p[c]=arguments[c];var f=o.Cast.asNode(this),h=s.parentNode_convertNodesIntoANode(p,f._nodeDocument);s.mutation_preInsert(h,f,f._firstChild)},l.prototype.append=function(){for(var p=[],c=0;c<arguments.length;c++)p[c]=arguments[c];var f=o.Cast.asNode(this),h=s.parentNode_convertNodesIntoANode(p,f._nodeDocument);s.mutation_append(h,f)},l.prototype.querySelector=function(p){var c=o.Cast.asNode(this),f=s.selectors_scopeMatchASelectorsString(p,c);return f.length===0?null:f[0]},l.prototype.querySelectorAll=function(p){var c=o.Cast.asNode(this),f=s.selectors_scopeMatchASelectorsString(p,c);return s.create_nodeListStatic(c,f)},l}();r.ParentNodeImpl=u},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),o=function(){function s(){}return Object.defineProperty(s.prototype,"_name",{get:function(){return this.__name||""},set:function(u){this.__name=u},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"_assignedSlot",{get:function(){return this.__assignedSlot||null},set:function(u){this.__assignedSlot=u},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"assignedSlot",{get:function(){return a.shadowTree_findASlot(this,!0)},enumerable:!0,configurable:!0}),s}();r.SlotableImpl=o},function(n,r,i){var a,o=this&&this.__extends||(a=function(c,f){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(c,f)},function(c,f){function h(){this.constructor=c}a(c,f),c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(102),u=i(9),l=i(3),p=function(c){function f(h){var v=c.call(this)||this;if(l.Guard.isDocumentTypeNode(h.startContainer)||l.Guard.isAttrNode(h.startContainer)||l.Guard.isDocumentTypeNode(h.endContainer)||l.Guard.isAttrNode(h.endContainer))throw new u.InvalidNodeTypeError;return v._start=[h.startContainer,h.startOffset],v._end=[h.endContainer,h.endOffset],v}return o(f,c),f}(s.AbstractRangeImpl);r.StaticRangeImpl=p},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(272);r.DOMParser=a.DOMParserImpl},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(0),o=i(273),s=function(){function u(){}return u.prototype.parseFromString=function(l,p){if(p==="text/html")throw new Error("HTML parser not implemented.");try{return(c=new o.XMLParserImpl().parse(l))._contentType=p,c}catch(y){var c,f="http://www.mozilla.org/newlayout/xml/parsererror.xml",h=(c=a.create_xmlDocument()).createElementNS(f,"parsererror"),v=c.createElementNS(f,"error");return v.setAttribute("message",y.message),h.appendChild(v),c.appendChild(h),c}},u}();r.DOMParserImpl=s},function(n,r,i){var a=this&&this.__read||function(h,v){var y=typeof Symbol=="function"&&h[Symbol.iterator];if(!y)return h;var x,m,g=y.call(h),d=[];try{for(;(v===void 0||v-- >0)&&!(x=g.next()).done;)d.push(x.value)}catch(S){m={error:S}}finally{try{x&&!x.done&&(y=g.return)&&y.call(g)}finally{if(m)throw m.error}}return d},o=this&&this.__values||function(h){var v=typeof Symbol=="function"&&Symbol.iterator,y=v&&h[v],x=0;if(y)return y.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&x>=h.length&&(h=void 0),{value:h&&h[x++],done:!h}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=i(180),u=i(111),l=i(7),p=i(0),c=i(69),f=function(){function h(){}return h.prototype.parse=function(v){for(var y,x,m,g,d=new s.XMLStringLexer(v,{skipWhitespaceOnlyText:!0}),S=p.create_document(),T=S,C=d.nextToken();C.type!==u.TokenType.EOF;){switch(C.type){case u.TokenType.Declaration:var w=C;if(w.version!=="1.0")throw new Error("Invalid xml version: "+w.version);break;case u.TokenType.DocType:var _=C;if(!p.xml_isPubidChar(_.pubId))throw new Error("DocType public identifier does not match PubidChar construct.");if(!p.xml_isLegalChar(_.sysId)||_.sysId.indexOf('"')!==-1&&_.sysId.indexOf("'")!==-1)throw new Error("DocType system identifier contains invalid characters.");T.appendChild(S.implementation.createDocumentType(_.name,_.pubId,_.sysId));break;case u.TokenType.CDATA:var E=C;if(!p.xml_isLegalChar(E.data)||E.data.indexOf("]]>")!==-1)throw new Error("CDATA contains invalid characters.");T.appendChild(S.createCDATASection(E.data));break;case u.TokenType.Comment:var D=C;if(!p.xml_isLegalChar(D.data)||D.data.indexOf("--")!==-1||D.data.endsWith("-"))throw new Error("Comment data contains invalid characters.");T.appendChild(S.createComment(D.data));break;case u.TokenType.PI:var O=C;if(O.target.indexOf(":")!==-1||/^xml$/i.test(O.target))throw new Error("Processing instruction target contains invalid characters.");if(!p.xml_isLegalChar(O.data)||O.data.indexOf("?>")!==-1)throw new Error("Processing instruction data contains invalid characters.");T.appendChild(S.createProcessingInstruction(O.target,O.data));break;case u.TokenType.Text:var N=C;if(!p.xml_isLegalChar(N.data))throw new Error("Text data contains invalid characters.");T.appendChild(S.createTextNode(this._decodeText(N.data)));break;case u.TokenType.Element:var R=C,M=a(p.namespace_extractQName(R.name),2),A=M[0],G=M[1];if(G.indexOf(":")!==-1||!p.xml_isName(G))throw new Error("Node local name contains invalid characters.");if(A==="xmlns")throw new Error("An element cannot have the 'xmlns' prefix.");var j=T.lookupNamespaceURI(A),k={};try{for(var F=(y=void 0,o(R.attributes)),B=F.next();!B.done;B=F.next()){var $=a(B.value,2),H=$[0],X=$[1];if(H==="xmlns")j=X;else{var J=a(p.namespace_extractQName(H),2),q=J[0],ee=J[1];q==="xmlns"&&(ee===A&&(j=X),k[ee]=X)}}}catch(I){y={error:I}}finally{try{B&&!B.done&&(x=F.return)&&x.call(F)}finally{if(y)throw y.error}}var re=j!==null?S.createElementNS(j,R.name):S.createElement(R.name);T.appendChild(re);var ae=new c.LocalNameSet;try{for(var te=(m=void 0,o(R.attributes)),L=te.next();!L.done;L=te.next()){var b=a(L.value,2),U=(H=b[0],X=b[1],a(p.namespace_extractQName(H),2)),V=(q=U[0],ee=U[1],null);if(q==="xmlns"||q===null&&ee==="xmlns"?V=l.namespace.XMLNS:(V=re.lookupNamespaceURI(q))!==null&&re.isDefaultNamespace(V)?V=null:V===null&&q!==null&&(V=k[q]||null),ae.has(V,ee))throw new Error("Element contains duplicate attributes.");if(ae.set(V,ee),V===l.namespace.XMLNS&&X===l.namespace.XMLNS)throw new Error("XMLNS namespace is reserved.");if(ee.indexOf(":")!==-1||!p.xml_isName(ee))throw new Error("Attribute local name contains invalid characters.");if(q==="xmlns"&&X==="")throw new Error("Empty XML namespace is not allowed.");V!==null?re.setAttributeNS(V,H,this._decodeAttributeValue(X)):re.setAttribute(H,this._decodeAttributeValue(X))}}catch(I){m={error:I}}finally{try{L&&!L.done&&(g=te.return)&&g.call(te)}finally{if(m)throw m.error}}R.selfClosing||(T=re);break;case u.TokenType.ClosingTag:if(C.name!==T.nodeName)throw new Error("Closing tag name does not match opening tag name.");T._parent&&(T=T._parent)}C=d.nextToken()}return S},h.prototype._decodeText=function(v){return v==null?v:v.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},h.prototype._decodeAttributeValue=function(v){return v==null?v:v.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},h}();r.XMLParserImpl=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(275);r.XMLSerializer=a.XMLSerializerImpl},function(n,r,i){var a=this&&this.__values||function(h){var v=typeof Symbol=="function"&&Symbol.iterator,y=v&&h[v],x=0;if(y)return y.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&x>=h.length&&(h=void 0),{value:h&&h[x++],done:!h}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=i(2),s=i(69),u=i(95),l=i(9),p=i(7),c=i(0),f=function(){function h(){}return h.prototype.serializeToString=function(v){return this._xmlSerialization(v,!1)},h.prototype._xmlSerialization=function(v,y){if(v._nodeDocument===void 0||v._nodeDocument._hasNamespaces){var x=new u.NamespacePrefixMap;x.set("xml",p.namespace.XML);try{return this._serializeNodeNS(v,null,x,{value:1},y)}catch{throw new l.InvalidStateError}}else try{return this._serializeNode(v,y)}catch{throw new l.InvalidStateError}},h.prototype._serializeNodeNS=function(v,y,x,m,g){switch(v.nodeType){case o.NodeType.Element:return this._serializeElementNS(v,y,x,m,g);case o.NodeType.Document:return this._serializeDocumentNS(v,y,x,m,g);case o.NodeType.Comment:return this._serializeComment(v,g);case o.NodeType.Text:return this._serializeText(v,g);case o.NodeType.DocumentFragment:return this._serializeDocumentFragmentNS(v,y,x,m,g);case o.NodeType.DocumentType:return this._serializeDocumentType(v,g);case o.NodeType.ProcessingInstruction:return this._serializeProcessingInstruction(v,g);case o.NodeType.CData:return this._serializeCData(v,g);default:throw new Error("Unknown node type: "+v.nodeType)}},h.prototype._serializeNode=function(v,y){switch(v.nodeType){case o.NodeType.Element:return this._serializeElement(v,y);case o.NodeType.Document:return this._serializeDocument(v,y);case o.NodeType.Comment:return this._serializeComment(v,y);case o.NodeType.Text:return this._serializeText(v,y);case o.NodeType.DocumentFragment:return this._serializeDocumentFragment(v,y);case o.NodeType.DocumentType:return this._serializeDocumentType(v,y);case o.NodeType.ProcessingInstruction:return this._serializeProcessingInstruction(v,y);case o.NodeType.CData:return this._serializeCData(v,y);default:throw new Error("Unknown node type: "+v.nodeType)}},h.prototype._serializeElementNS=function(v,y,x,m,g){var d,S;if(g&&(v.localName.indexOf(":")!==-1||!c.xml_isName(v.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var T="<",C="",w=!1,_=!1,E=x.copy(),D={},O=this._recordNamespaceInformation(v,E,D),N=y,R=v.namespaceURI;if(N===R)O!==null&&(_=!0),T+=C=R===p.namespace.XML?"xml:"+v.localName:v.localName;else{var M=v.prefix,A=null;if(M===null&&R===O||(A=E.get(M,R)),M==="xmlns"){if(g)throw new Error("An element cannot have the 'xmlns' prefix (well-formed required).");A=M}A!==null?(C=A+":"+v.localName,O!==null&&O!==p.namespace.XML&&(N=O||null),T+=C):M!==null?(M in D&&(M=this._generatePrefix(R,E,m)),E.set(M,R),T+=C+=M+":"+v.localName,T+=" xmlns:"+M+'="'+this._serializeAttributeValue(R,g)+'"',O!==null&&(N=O||null)):O===null||O!==null&&O!==R?(_=!0,N=R,T+=C+=v.localName,T+=' xmlns="'+this._serializeAttributeValue(R,g)+'"'):(N=R,T+=C+=v.localName)}T+=this._serializeAttributesNS(v,E,m,D,_,g);var G=R===p.namespace.HTML;if(G&&v.childNodes.length===0&&h._VoidElementNames.has(v.localName)?(T+=" /",w=!0):G||v.childNodes.length!==0||(T+="/",w=!0),T+=">",w)return T;if(!(G&&v.localName==="template"))try{for(var j=a(v._children||v.childNodes),k=j.next();!k.done;k=j.next()){var F=k.value;T+=this._serializeNodeNS(F,N,E,m,g)}}catch(B){d={error:B}}finally{try{k&&!k.done&&(S=j.return)&&S.call(j)}finally{if(d)throw d.error}}return T+="</"+C+">"},h.prototype._serializeDocumentNS=function(v,y,x,m,g){var d,S;if(g&&v.documentElement===null)throw new Error("Missing document element (well-formed required).");var T="";try{for(var C=a(v._children||v.childNodes),w=C.next();!w.done;w=C.next()){var _=w.value;T+=this._serializeNodeNS(_,y,x,m,g)}}catch(E){d={error:E}}finally{try{w&&!w.done&&(S=C.return)&&S.call(C)}finally{if(d)throw d.error}}return T},h.prototype._serializeComment=function(v,y){if(y&&(!c.xml_isLegalChar(v.data)||v.data.indexOf("--")!==-1||v.data.endsWith("-")))throw new Error("Comment data contains invalid characters (well-formed required).");return"<!--"+v.data+"-->"},h.prototype._serializeText=function(v,y){if(y&&!c.xml_isLegalChar(v.data))throw new Error("Text data contains invalid characters (well-formed required).");for(var x="",m=0;m<v.data.length;m++){var g=v.data[m];x+=g==="&"?"&amp;":g==="<"?"&lt;":g===">"?"&gt;":g}return x},h.prototype._serializeDocumentFragmentNS=function(v,y,x,m,g){var d,S,T="";try{for(var C=a(v._children||v.childNodes),w=C.next();!w.done;w=C.next()){var _=w.value;T+=this._serializeNodeNS(_,y,x,m,g)}}catch(E){d={error:E}}finally{try{w&&!w.done&&(S=C.return)&&S.call(C)}finally{if(d)throw d.error}}return T},h.prototype._serializeDocumentType=function(v,y){if(y&&!c.xml_isPubidChar(v.publicId))throw new Error("DocType public identifier does not match PubidChar construct (well-formed required).");if(y&&(!c.xml_isLegalChar(v.systemId)||v.systemId.indexOf('"')!==-1&&v.systemId.indexOf("'")!==-1))throw new Error("DocType system identifier contains invalid characters (well-formed required).");return v.publicId&&v.systemId?"<!DOCTYPE "+v.name+' PUBLIC "'+v.publicId+'" "'+v.systemId+'">':v.publicId?"<!DOCTYPE "+v.name+' PUBLIC "'+v.publicId+'">':v.systemId?"<!DOCTYPE "+v.name+' SYSTEM "'+v.systemId+'">':"<!DOCTYPE "+v.name+">"},h.prototype._serializeProcessingInstruction=function(v,y){if(y&&(v.target.indexOf(":")!==-1||/^xml$/i.test(v.target)))throw new Error("Processing instruction target contains invalid characters (well-formed required).");if(y&&(!c.xml_isLegalChar(v.data)||v.data.indexOf("?>")!==-1))throw new Error("Processing instruction data contains invalid characters (well-formed required).");return"<?"+(v.data===""?v.target:v.target+" "+v.data)+"?>"},h.prototype._serializeCData=function(v,y){if(y&&v.data.indexOf("]]>")!==-1)throw new Error("CDATA contains invalid characters (well-formed required).");return"<![CDATA["+v.data+"]]>"},h.prototype._serializeAttributesNS=function(v,y,x,m,g,d){var S,T,C="",w=d?new s.LocalNameSet:void 0;try{for(var _=a(v.attributes),E=_.next();!E.done;E=_.next()){var D=E.value;if(g||d||D.namespaceURI!==null){if(d&&w&&w.has(D.namespaceURI,D.localName))throw new Error("Element contains duplicate attributes (well-formed required).");d&&w&&w.set(D.namespaceURI,D.localName);var O=D.namespaceURI,N=null;if(O!==null)if(N=y.get(D.prefix,O),O===p.namespace.XMLNS){if(D.value===p.namespace.XML||D.prefix===null&&g||D.prefix!==null&&(!(D.localName in m)||m[D.localName]!==D.value)&&y.has(D.localName,D.value))continue;if(d&&D.value===p.namespace.XMLNS)throw new Error("XMLNS namespace is reserved (well-formed required).");if(d&&D.value==="")throw new Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).");D.prefix==="xmlns"&&(N="xmlns")}else N===null&&(C+=" xmlns:"+(N=D.prefix===null||y.hasPrefix(D.prefix)&&!y.has(D.prefix,O)?this._generatePrefix(O,y,x):D.prefix)+'="'+this._serializeAttributeValue(O,d)+'"');if(C+=" ",N!==null&&(C+=N+":"),d&&(D.localName.indexOf(":")!==-1||!c.xml_isName(D.localName)||D.localName==="xmlns"&&O===null))throw new Error("Attribute local name contains invalid characters (well-formed required).");C+=D.localName+'="'+this._serializeAttributeValue(D.value,d)+'"'}else C+=" "+D.localName+'="'+this._serializeAttributeValue(D.value,d)+'"'}}catch(R){S={error:R}}finally{try{E&&!E.done&&(T=_.return)&&T.call(_)}finally{if(S)throw S.error}}return C},h.prototype._recordNamespaceInformation=function(v,y,x){var m,g,d=null;try{for(var S=a(v.attributes),T=S.next();!T.done;T=S.next()){var C=T.value,w=C.namespaceURI,_=C.prefix;if(w===p.namespace.XMLNS){if(_===null){d=C.value;continue}var E=C.localName,D=C.value;if(D===p.namespace.XML||(D===""&&(D=null),y.has(E,D)))continue;y.set(E,D),x[E]=D||""}}}catch(O){m={error:O}}finally{try{T&&!T.done&&(g=S.return)&&g.call(S)}finally{if(m)throw m.error}}return d},h.prototype._generatePrefix=function(v,y,x){var m="ns"+x.value;return x.value++,y.set(m,v),m},h.prototype._serializeAttributeValue=function(v,y){if(y&&v!==null&&!c.xml_isLegalChar(v))throw new Error("Invalid characters in attribute value.");if(v===null)return"";for(var x="",m=0;m<v.length;m++){var g=v[m];x+=g==='"'?"&quot;":g==="&"?"&amp;":g==="<"?"&lt;":g===">"?"&gt;":g}return x},h.prototype._serializeElement=function(v,y){var x,m;if(y&&(v.localName.indexOf(":")!==-1||!c.xml_isName(v.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var g=!1,d=v.localName,S="<"+d;if(S+=this._serializeAttributes(v,y),v._children.size===0&&(S+="/",g=!0),S+=">",g)return S;try{for(var T=a(v._children),C=T.next();!C.done;C=T.next()){var w=C.value;S+=this._serializeNode(w,y)}}catch(_){x={error:_}}finally{try{C&&!C.done&&(m=T.return)&&m.call(T)}finally{if(x)throw x.error}}return S+="</"+d+">"},h.prototype._serializeDocument=function(v,y){var x,m;if(y&&v.documentElement===null)throw new Error("Missing document element (well-formed required).");var g="";try{for(var d=a(v._children),S=d.next();!S.done;S=d.next()){var T=S.value;g+=this._serializeNode(T,y)}}catch(C){x={error:C}}finally{try{S&&!S.done&&(m=d.return)&&m.call(d)}finally{if(x)throw x.error}}return g},h.prototype._serializeDocumentFragment=function(v,y){var x,m,g="";try{for(var d=a(v._children),S=d.next();!S.done;S=d.next()){var T=S.value;g+=this._serializeNode(T,y)}}catch(C){x={error:C}}finally{try{S&&!S.done&&(m=d.return)&&m.call(d)}finally{if(x)throw x.error}}return g},h.prototype._serializeAttributes=function(v,y){var x,m,g="",d=y?{}:void 0;try{for(var S=a(v.attributes),T=S.next();!T.done;T=S.next()){var C=T.value;if(y&&d&&C.localName in d)throw new Error("Element contains duplicate attributes (well-formed required).");if(y&&d&&(d[C.localName]=!0),y&&(C.localName.indexOf(":")!==-1||!c.xml_isName(C.localName)))throw new Error("Attribute local name contains invalid characters (well-formed required).");g+=" "+C.localName+'="'+this._serializeAttributeValue(C.value,y)+'"'}}catch(w){x={error:w}}finally{try{T&&!T.done&&(m=S.return)&&m.call(S)}finally{if(x)throw x.error}}return g},h._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),h}();r.XMLSerializerImpl=f},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(277);r.XMLReader=a.XMLReader;var o=i(112);r.ObjectReader=o.ObjectReader;var s=i(280);r.JSONReader=s.JSONReader;var u=i(281);r.YAMLReader=u.YAMLReader},function(n,r,i){i(31),i(32),i(33),i(19),i(65),i(20),i(22),i(23);var a,o=this&&this.__extends||(a=function(v,y){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,m){x.__proto__=m}||function(x,m){for(var g in m)m.hasOwnProperty(g)&&(x[g]=m[g])})(v,y)},function(v,y){function x(){this.constructor=v}a(v,y),v.prototype=y===null?Object.create(y):(x.prototype=y.prototype,new x)}),s=this&&this.__read||function(v,y){var x=typeof Symbol=="function"&&v[Symbol.iterator];if(!x)return v;var m,g,d=x.call(v),S=[];try{for(;(y===void 0||y-- >0)&&!(m=d.next()).done;)S.push(m.value)}catch(T){g={error:T}}finally{try{m&&!m.done&&(x=d.return)&&x.call(d)}finally{if(g)throw g.error}}return S},u=this&&this.__values||function(v){var y=typeof Symbol=="function"&&Symbol.iterator,x=y&&v[y],m=0;if(x)return x.call(v);if(v&&typeof v.length=="number")return{next:function(){return v&&m>=v.length&&(v=void 0),{value:v&&v[m++],done:!v}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var l=i(180),p=i(111),c=i(7),f=i(0),h=function(v){function y(){return v!==null&&v.apply(this,arguments)||this}return o(y,v),y.prototype._parse=function(x,m){for(var g,d,S,T,C=new l.XMLStringLexer(m,{skipWhitespaceOnlyText:!0}),w=x,_=x,E=C.nextToken();E.type!==p.TokenType.EOF;){switch(E.type){case p.TokenType.Declaration:var D=E,O=this.sanitize(D.version);if(O!=="1.0")throw new Error("Invalid xml version: "+O);var N={version:O};D.encoding&&(N.encoding=this.sanitize(D.encoding)),D.standalone&&(N.standalone=this.sanitize(D.standalone)==="yes"),_.set(N);break;case p.TokenType.DocType:var R=E;_=this.docType(_,this.sanitize(R.name),this.sanitize(R.pubId),this.sanitize(R.sysId))||_;break;case p.TokenType.CDATA:var M=E;_=this.cdata(_,this.sanitize(M.data))||_;break;case p.TokenType.Comment:var A=E;_=this.comment(_,this.sanitize(A.data))||_;break;case p.TokenType.PI:var G=E;_=this.instruction(_,this.sanitize(G.target),this.sanitize(G.data))||_;break;case p.TokenType.Text:var j=E;_=this.text(_,this._decodeText(this.sanitize(j.data)))||_;break;case p.TokenType.Element:var k=E,F=this.sanitize(k.name),B=s(f.namespace_extractQName(F),1)[0],$=_.node.lookupNamespaceURI(B),H={};try{for(var X=(g=void 0,u(k.attributes)),J=X.next();!J.done;J=X.next()){var q=s(J.value,2),ee=q[0],re=q[1];if(ee=this.sanitize(ee),re=this.sanitize(re),ee==="xmlns")$=re;else{var ae=s(f.namespace_extractQName(ee),2),te=ae[0],L=ae[1];te==="xmlns"&&(L===B&&($=re),H[L]=re)}}}catch(Y){g={error:Y}}finally{try{J&&!J.done&&(d=X.return)&&d.call(X)}finally{if(g)throw g.error}}var b=$!==null?this.element(_,$,F):this.element(_,void 0,F);if(b===void 0)break;_.node===x.node&&(w=b);try{for(var U=(S=void 0,u(k.attributes)),V=U.next();!V.done;V=U.next()){var I=s(V.value,2);ee=I[0],re=I[1],ee=this.sanitize(ee),re=this.sanitize(re);var z=s(f.namespace_extractQName(ee),2),W=(te=z[0],L=z[1],null);te==="xmlns"||te===null&&L==="xmlns"?W=c.namespace.XMLNS:(W=b.node.lookupNamespaceURI(te))!==null&&b.node.isDefaultNamespace(W)?W=null:W===null&&te!==null&&(W=H[te]||null),W!==null?this.attribute(b,W,ee,this._decodeAttributeValue(re)):this.attribute(b,void 0,ee,this._decodeAttributeValue(re))}}catch(Y){S={error:Y}}finally{try{V&&!V.done&&(T=U.return)&&T.call(U)}finally{if(S)throw S.error}}k.selfClosing||(_=b);break;case p.TokenType.ClosingTag:_.node.parentNode&&(_=_.up())}E=C.nextToken()}return w},y}(i(75).BaseReader);r.XMLReader=h},function(n,r,i){var a=i(4),o=i(279);a({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(n,r,i){var a=i(16),o=i(8),s=i(61),u=i(85),l=i(79),p=i(27),c=i(41),f=Object.assign,h=Object.defineProperty;n.exports=!f||o(function(){if(a&&f({b:1},f(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var v={},y={},x=Symbol();return v[x]=7,"abcdefghijklmnopqrst".split("").forEach(function(m){y[m]=m}),f({},v)[x]!=7||s(f({},y)).join("")!="abcdefghijklmnopqrst"})?function(v,y){for(var x=p(v),m=arguments.length,g=1,d=u.f,S=l.f;m>g;)for(var T,C=c(arguments[g++]),w=d?s(C).concat(d(C)):s(C),_=w.length,E=0;_>E;)T=w[E++],a&&!S.call(C,T)||(x[T]=C[T]);return x}:f},function(n,r,i){var a,o=this&&this.__extends||(a=function(l,p){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)f.hasOwnProperty(h)&&(c[h]=f[h])})(l,p)},function(l,p){function c(){this.constructor=l}a(l,p),l.prototype=p===null?Object.create(p):(c.prototype=p.prototype,new c)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(112),u=function(l){function p(){return l!==null&&l.apply(this,arguments)||this}return o(p,l),p.prototype._parse=function(c,f){return new s.ObjectReader(this._builderOptions).parse(c,JSON.parse(f))},p}(i(75).BaseReader);r.JSONReader=u},function(n,r,i){var a,o=this&&this.__extends||(a=function(c,f){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(c,f)},function(c,f){function h(){this.constructor=c}a(c,f),c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=i(112),u=i(75),l=i(282),p=function(c){function f(){return c!==null&&c.apply(this,arguments)||this}return o(f,c),f.prototype._parse=function(h,v){var y=l.safeLoad(v);if(y===void 0)throw new Error("Unable to parse YAML document.");return new s.ObjectReader(this._builderOptions).parse(h,y)},f}(u.BaseReader);r.YAMLReader=p},function(n,r,i){var a=i(283);n.exports=a},function(n,r,i){var a=i(284),o=i(303);function s(u){return function(){throw new Error("Function "+u+" is deprecated and cannot be used.")}}n.exports.Type=i(10),n.exports.Schema=i(39),n.exports.FAILSAFE_SCHEMA=i(113),n.exports.JSON_SCHEMA=i(182),n.exports.CORE_SCHEMA=i(181),n.exports.DEFAULT_SAFE_SCHEMA=i(54),n.exports.DEFAULT_FULL_SCHEMA=i(76),n.exports.load=a.load,n.exports.loadAll=a.loadAll,n.exports.safeLoad=a.safeLoad,n.exports.safeLoadAll=a.safeLoadAll,n.exports.dump=o.dump,n.exports.safeDump=o.safeDump,n.exports.YAMLException=i(53),n.exports.MINIMAL_SCHEMA=i(113),n.exports.SAFE_SCHEMA=i(54),n.exports.DEFAULT_SCHEMA=i(76),n.exports.scan=s("scan"),n.exports.parse=s("parse"),n.exports.compose=s("compose"),n.exports.addConstructor=s("addConstructor")},function(n,r,i){var a=i(38),o=i(53),s=i(285),u=i(54),l=i(76),p=Object.prototype.hasOwnProperty,c=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,f=/[\x85\u2028\u2029]/,h=/[,\[\]\{\}]/,v=/^(?:!|!!|![a-z\-]+!)$/i,y=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function x(b){return Object.prototype.toString.call(b)}function m(b){return b===10||b===13}function g(b){return b===9||b===32}function d(b){return b===9||b===32||b===10||b===13}function S(b){return b===44||b===91||b===93||b===123||b===125}function T(b){var U;return 48<=b&&b<=57?b-48:97<=(U=32|b)&&U<=102?U-97+10:-1}function C(b){return b===48?"\0":b===97?"\x07":b===98?"\b":b===116||b===9?"	":b===110?`
`:b===118?"\v":b===102?"\f":b===114?"\r":b===101?"\x1B":b===32?" ":b===34?'"':b===47?"/":b===92?"\\":b===78?"":b===95?"":b===76?"\u2028":b===80?"\u2029":""}function w(b){return b<=65535?String.fromCharCode(b):String.fromCharCode(55296+(b-65536>>10),56320+(b-65536&1023))}for(var _=new Array(256),E=new Array(256),D=0;D<256;D++)_[D]=C(D)?1:0,E[D]=C(D);function O(b,U){this.input=b,this.filename=U.filename||null,this.schema=U.schema||l,this.onWarning=U.onWarning||null,this.legacy=U.legacy||!1,this.json=U.json||!1,this.listener=U.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=b.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function N(b,U){return new o(U,new s(b.filename,b.input,b.position,b.line,b.position-b.lineStart))}function R(b,U){throw N(b,U)}function M(b,U){b.onWarning&&b.onWarning.call(null,N(b,U))}var A={YAML:function(b,U,V){var I,z,W;b.version!==null&&R(b,"duplication of %YAML directive"),V.length!==1&&R(b,"YAML directive accepts exactly one argument"),(I=/^([0-9]+)\.([0-9]+)$/.exec(V[0]))===null&&R(b,"ill-formed argument of the YAML directive"),z=parseInt(I[1],10),W=parseInt(I[2],10),z!==1&&R(b,"unacceptable YAML version of the document"),b.version=V[0],b.checkLineBreaks=W<2,W!==1&&W!==2&&M(b,"unsupported YAML version of the document")},TAG:function(b,U,V){var I,z;V.length!==2&&R(b,"TAG directive accepts exactly two arguments"),I=V[0],z=V[1],v.test(I)||R(b,"ill-formed tag handle (first argument) of the TAG directive"),p.call(b.tagMap,I)&&R(b,'there is a previously declared suffix for "'+I+'" tag handle'),y.test(z)||R(b,"ill-formed tag prefix (second argument) of the TAG directive"),b.tagMap[I]=z}};function G(b,U,V,I){var z,W,Y,ne;if(U<V){if(ne=b.input.slice(U,V),I)for(z=0,W=ne.length;z<W;z+=1)(Y=ne.charCodeAt(z))===9||32<=Y&&Y<=1114111||R(b,"expected valid JSON character");else c.test(ne)&&R(b,"the stream contains non-printable characters");b.result+=ne}}function j(b,U,V,I){var z,W,Y,ne;for(a.isObject(V)||R(b,"cannot merge mappings; the provided source object is unacceptable"),Y=0,ne=(z=Object.keys(V)).length;Y<ne;Y+=1)W=z[Y],p.call(U,W)||(U[W]=V[W],I[W]=!0)}function k(b,U,V,I,z,W,Y,ne){var oe,ue;if(Array.isArray(z))for(oe=0,ue=(z=Array.prototype.slice.call(z)).length;oe<ue;oe+=1)Array.isArray(z[oe])&&R(b,"nested arrays are not supported inside keys"),typeof z=="object"&&x(z[oe])==="[object Object]"&&(z[oe]="[object Object]");if(typeof z=="object"&&x(z)==="[object Object]"&&(z="[object Object]"),z=String(z),U===null&&(U={}),I==="tag:yaml.org,2002:merge")if(Array.isArray(W))for(oe=0,ue=W.length;oe<ue;oe+=1)j(b,U,W[oe],V);else j(b,U,W,V);else b.json||p.call(V,z)||!p.call(U,z)||(b.line=Y||b.line,b.position=ne||b.position,R(b,"duplicated mapping key")),U[z]=W,delete V[z];return U}function F(b){var U;(U=b.input.charCodeAt(b.position))===10?b.position++:U===13?(b.position++,b.input.charCodeAt(b.position)===10&&b.position++):R(b,"a line break is expected"),b.line+=1,b.lineStart=b.position}function B(b,U,V){for(var I=0,z=b.input.charCodeAt(b.position);z!==0;){for(;g(z);)z=b.input.charCodeAt(++b.position);if(U&&z===35)do z=b.input.charCodeAt(++b.position);while(z!==10&&z!==13&&z!==0);if(!m(z))break;for(F(b),z=b.input.charCodeAt(b.position),I++,b.lineIndent=0;z===32;)b.lineIndent++,z=b.input.charCodeAt(++b.position)}return V!==-1&&I!==0&&b.lineIndent<V&&M(b,"deficient indentation"),I}function $(b){var U,V=b.position;return!((U=b.input.charCodeAt(V))!==45&&U!==46||U!==b.input.charCodeAt(V+1)||U!==b.input.charCodeAt(V+2)||(V+=3,(U=b.input.charCodeAt(V))!==0&&!d(U)))}function H(b,U){U===1?b.result+=" ":U>1&&(b.result+=a.repeat(`
`,U-1))}function X(b,U){var V,I,z=b.tag,W=b.anchor,Y=[],ne=!1;for(b.anchor!==null&&(b.anchorMap[b.anchor]=Y),I=b.input.charCodeAt(b.position);I!==0&&I===45&&d(b.input.charCodeAt(b.position+1));)if(ne=!0,b.position++,B(b,!0,-1)&&b.lineIndent<=U)Y.push(null),I=b.input.charCodeAt(b.position);else if(V=b.line,ee(b,U,3,!1,!0),Y.push(b.result),B(b,!0,-1),I=b.input.charCodeAt(b.position),(b.line===V||b.lineIndent>U)&&I!==0)R(b,"bad indentation of a sequence entry");else if(b.lineIndent<U)break;return!!ne&&(b.tag=z,b.anchor=W,b.kind="sequence",b.result=Y,!0)}function J(b){var U,V,I,z,W=!1,Y=!1;if((z=b.input.charCodeAt(b.position))!==33)return!1;if(b.tag!==null&&R(b,"duplication of a tag property"),(z=b.input.charCodeAt(++b.position))===60?(W=!0,z=b.input.charCodeAt(++b.position)):z===33?(Y=!0,V="!!",z=b.input.charCodeAt(++b.position)):V="!",U=b.position,W){do z=b.input.charCodeAt(++b.position);while(z!==0&&z!==62);b.position<b.length?(I=b.input.slice(U,b.position),z=b.input.charCodeAt(++b.position)):R(b,"unexpected end of the stream within a verbatim tag")}else{for(;z!==0&&!d(z);)z===33&&(Y?R(b,"tag suffix cannot contain exclamation marks"):(V=b.input.slice(U-1,b.position+1),v.test(V)||R(b,"named tag handle cannot contain such characters"),Y=!0,U=b.position+1)),z=b.input.charCodeAt(++b.position);I=b.input.slice(U,b.position),h.test(I)&&R(b,"tag suffix cannot contain flow indicator characters")}return I&&!y.test(I)&&R(b,"tag name cannot contain such characters: "+I),W?b.tag=I:p.call(b.tagMap,V)?b.tag=b.tagMap[V]+I:V==="!"?b.tag="!"+I:V==="!!"?b.tag="tag:yaml.org,2002:"+I:R(b,'undeclared tag handle "'+V+'"'),!0}function q(b){var U,V;if((V=b.input.charCodeAt(b.position))!==38)return!1;for(b.anchor!==null&&R(b,"duplication of an anchor property"),V=b.input.charCodeAt(++b.position),U=b.position;V!==0&&!d(V)&&!S(V);)V=b.input.charCodeAt(++b.position);return b.position===U&&R(b,"name of an anchor node must contain at least one character"),b.anchor=b.input.slice(U,b.position),!0}function ee(b,U,V,I,z){var W,Y,ne,oe,ue,Te,me,je,Ne=1,he=!1,Je=!1;if(b.listener!==null&&b.listener("open",b),b.tag=null,b.anchor=null,b.kind=null,b.result=null,W=Y=ne=V===4||V===3,I&&B(b,!0,-1)&&(he=!0,b.lineIndent>U?Ne=1:b.lineIndent===U?Ne=0:b.lineIndent<U&&(Ne=-1)),Ne===1)for(;J(b)||q(b);)B(b,!0,-1)?(he=!0,ne=W,b.lineIndent>U?Ne=1:b.lineIndent===U?Ne=0:b.lineIndent<U&&(Ne=-1)):ne=!1;if(ne&&(ne=he||z),Ne!==1&&V!==4||(me=V===1||V===2?U:U+1,je=b.position-b.lineStart,Ne===1?ne&&(X(b,je)||function(K,Ce,we){var de,Z,se,pe,fe,ve=K.tag,ke=K.anchor,xe={},Ve={},Ue=null,Dt=null,$t=null,at=!1,Tn=!1;for(K.anchor!==null&&(K.anchorMap[K.anchor]=xe),fe=K.input.charCodeAt(K.position);fe!==0;){if(de=K.input.charCodeAt(K.position+1),se=K.line,pe=K.position,fe!==63&&fe!==58||!d(de)){if(!ee(K,we,2,!1,!0))break;if(K.line===se){for(fe=K.input.charCodeAt(K.position);g(fe);)fe=K.input.charCodeAt(++K.position);if(fe===58)d(fe=K.input.charCodeAt(++K.position))||R(K,"a whitespace character is expected after the key-value separator within a block mapping"),at&&(k(K,xe,Ve,Ue,Dt,null),Ue=Dt=$t=null),Tn=!0,at=!1,Z=!1,Ue=K.tag,Dt=K.result;else{if(!Tn)return K.tag=ve,K.anchor=ke,!0;R(K,"can not read an implicit mapping pair; a colon is missed")}}else{if(!Tn)return K.tag=ve,K.anchor=ke,!0;R(K,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else fe===63?(at&&(k(K,xe,Ve,Ue,Dt,null),Ue=Dt=$t=null),Tn=!0,at=!0,Z=!0):at?(at=!1,Z=!0):R(K,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),K.position+=1,fe=de;if((K.line===se||K.lineIndent>Ce)&&(ee(K,Ce,4,!0,Z)&&(at?Dt=K.result:$t=K.result),at||(k(K,xe,Ve,Ue,Dt,$t,se,pe),Ue=Dt=$t=null),B(K,!0,-1),fe=K.input.charCodeAt(K.position)),K.lineIndent>Ce&&fe!==0)R(K,"bad indentation of a mapping entry");else if(K.lineIndent<Ce)break}return at&&k(K,xe,Ve,Ue,Dt,null),Tn&&(K.tag=ve,K.anchor=ke,K.kind="mapping",K.result=xe),Tn}(b,je,me))||function(K,Ce){var we,de,Z,se,pe,fe,ve,ke,xe,Ve,Ue=!0,Dt=K.tag,$t=K.anchor,at={};if((Ve=K.input.charCodeAt(K.position))===91)Z=93,fe=!1,de=[];else{if(Ve!==123)return!1;Z=125,fe=!0,de={}}for(K.anchor!==null&&(K.anchorMap[K.anchor]=de),Ve=K.input.charCodeAt(++K.position);Ve!==0;){if(B(K,!0,Ce),(Ve=K.input.charCodeAt(K.position))===Z)return K.position++,K.tag=Dt,K.anchor=$t,K.kind=fe?"mapping":"sequence",K.result=de,!0;Ue||R(K,"missed comma between flow collection entries"),xe=null,se=pe=!1,Ve===63&&d(K.input.charCodeAt(K.position+1))&&(se=pe=!0,K.position++,B(K,!0,Ce)),we=K.line,ee(K,Ce,1,!1,!0),ke=K.tag,ve=K.result,B(K,!0,Ce),Ve=K.input.charCodeAt(K.position),!pe&&K.line!==we||Ve!==58||(se=!0,Ve=K.input.charCodeAt(++K.position),B(K,!0,Ce),ee(K,Ce,1,!1,!0),xe=K.result),fe?k(K,de,at,ke,ve,xe):se?de.push(k(K,null,at,ke,ve,xe)):de.push(ve),B(K,!0,Ce),(Ve=K.input.charCodeAt(K.position))===44?(Ue=!0,Ve=K.input.charCodeAt(++K.position)):Ue=!1}R(K,"unexpected end of the stream within a flow collection")}(b,me)?Je=!0:(Y&&function(K,Ce){var we,de,Z,se,pe,fe=1,ve=!1,ke=!1,xe=Ce,Ve=0,Ue=!1;if((se=K.input.charCodeAt(K.position))===124)de=!1;else{if(se!==62)return!1;de=!0}for(K.kind="scalar",K.result="";se!==0;)if((se=K.input.charCodeAt(++K.position))===43||se===45)fe===1?fe=se===43?3:2:R(K,"repeat of a chomping mode identifier");else{if(!((Z=48<=(pe=se)&&pe<=57?pe-48:-1)>=0))break;Z===0?R(K,"bad explicit indentation width of a block scalar; it cannot be less than one"):ke?R(K,"repeat of an indentation width identifier"):(xe=Ce+Z-1,ke=!0)}if(g(se)){do se=K.input.charCodeAt(++K.position);while(g(se));if(se===35)do se=K.input.charCodeAt(++K.position);while(!m(se)&&se!==0)}for(;se!==0;){for(F(K),K.lineIndent=0,se=K.input.charCodeAt(K.position);(!ke||K.lineIndent<xe)&&se===32;)K.lineIndent++,se=K.input.charCodeAt(++K.position);if(!ke&&K.lineIndent>xe&&(xe=K.lineIndent),m(se))Ve++;else{if(K.lineIndent<xe){fe===3?K.result+=a.repeat(`
`,ve?1+Ve:Ve):fe===1&&ve&&(K.result+=`
`);break}for(de?g(se)?(Ue=!0,K.result+=a.repeat(`
`,ve?1+Ve:Ve)):Ue?(Ue=!1,K.result+=a.repeat(`
`,Ve+1)):Ve===0?ve&&(K.result+=" "):K.result+=a.repeat(`
`,Ve):K.result+=a.repeat(`
`,ve?1+Ve:Ve),ve=!0,ke=!0,Ve=0,we=K.position;!m(se)&&se!==0;)se=K.input.charCodeAt(++K.position);G(K,we,K.position,!1)}}return!0}(b,me)||function(K,Ce){var we,de,Z;if((we=K.input.charCodeAt(K.position))!==39)return!1;for(K.kind="scalar",K.result="",K.position++,de=Z=K.position;(we=K.input.charCodeAt(K.position))!==0;)if(we===39){if(G(K,de,K.position,!0),(we=K.input.charCodeAt(++K.position))!==39)return!0;de=K.position,K.position++,Z=K.position}else m(we)?(G(K,de,Z,!0),H(K,B(K,!1,Ce)),de=Z=K.position):K.position===K.lineStart&&$(K)?R(K,"unexpected end of the document within a single quoted scalar"):(K.position++,Z=K.position);R(K,"unexpected end of the stream within a single quoted scalar")}(b,me)||function(K,Ce){var we,de,Z,se,pe,fe,ve;if((fe=K.input.charCodeAt(K.position))!==34)return!1;for(K.kind="scalar",K.result="",K.position++,we=de=K.position;(fe=K.input.charCodeAt(K.position))!==0;){if(fe===34)return G(K,we,K.position,!0),K.position++,!0;if(fe===92){if(G(K,we,K.position,!0),m(fe=K.input.charCodeAt(++K.position)))B(K,!1,Ce);else if(fe<256&&_[fe])K.result+=E[fe],K.position++;else if((pe=(ve=fe)===120?2:ve===117?4:ve===85?8:0)>0){for(Z=pe,se=0;Z>0;Z--)(pe=T(fe=K.input.charCodeAt(++K.position)))>=0?se=(se<<4)+pe:R(K,"expected hexadecimal character");K.result+=w(se),K.position++}else R(K,"unknown escape sequence");we=de=K.position}else m(fe)?(G(K,we,de,!0),H(K,B(K,!1,Ce)),we=de=K.position):K.position===K.lineStart&&$(K)?R(K,"unexpected end of the document within a double quoted scalar"):(K.position++,de=K.position)}R(K,"unexpected end of the stream within a double quoted scalar")}(b,me)?Je=!0:function(K){var Ce,we,de;if((de=K.input.charCodeAt(K.position))!==42)return!1;for(de=K.input.charCodeAt(++K.position),Ce=K.position;de!==0&&!d(de)&&!S(de);)de=K.input.charCodeAt(++K.position);return K.position===Ce&&R(K,"name of an alias node must contain at least one character"),we=K.input.slice(Ce,K.position),K.anchorMap.hasOwnProperty(we)||R(K,'unidentified alias "'+we+'"'),K.result=K.anchorMap[we],B(K,!0,-1),!0}(b)?(Je=!0,b.tag===null&&b.anchor===null||R(b,"alias node should not have any properties")):function(K,Ce,we){var de,Z,se,pe,fe,ve,ke,xe,Ve=K.kind,Ue=K.result;if(d(xe=K.input.charCodeAt(K.position))||S(xe)||xe===35||xe===38||xe===42||xe===33||xe===124||xe===62||xe===39||xe===34||xe===37||xe===64||xe===96||(xe===63||xe===45)&&(d(de=K.input.charCodeAt(K.position+1))||we&&S(de)))return!1;for(K.kind="scalar",K.result="",Z=se=K.position,pe=!1;xe!==0;){if(xe===58){if(d(de=K.input.charCodeAt(K.position+1))||we&&S(de))break}else if(xe===35){if(d(K.input.charCodeAt(K.position-1)))break}else{if(K.position===K.lineStart&&$(K)||we&&S(xe))break;if(m(xe)){if(fe=K.line,ve=K.lineStart,ke=K.lineIndent,B(K,!1,-1),K.lineIndent>=Ce){pe=!0,xe=K.input.charCodeAt(K.position);continue}K.position=se,K.line=fe,K.lineStart=ve,K.lineIndent=ke;break}}pe&&(G(K,Z,se,!1),H(K,K.line-fe),Z=se=K.position,pe=!1),g(xe)||(se=K.position+1),xe=K.input.charCodeAt(++K.position)}return G(K,Z,se,!1),!!K.result||(K.kind=Ve,K.result=Ue,!1)}(b,me,V===1)&&(Je=!0,b.tag===null&&(b.tag="?")),b.anchor!==null&&(b.anchorMap[b.anchor]=b.result)):Ne===0&&(Je=ne&&X(b,je))),b.tag!==null&&b.tag!=="!")if(b.tag==="?"){for(b.result!==null&&b.kind!=="scalar"&&R(b,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+b.kind+'"'),oe=0,ue=b.implicitTypes.length;oe<ue;oe+=1)if((Te=b.implicitTypes[oe]).resolve(b.result)){b.result=Te.construct(b.result),b.tag=Te.tag,b.anchor!==null&&(b.anchorMap[b.anchor]=b.result);break}}else p.call(b.typeMap[b.kind||"fallback"],b.tag)?(Te=b.typeMap[b.kind||"fallback"][b.tag],b.result!==null&&Te.kind!==b.kind&&R(b,"unacceptable node kind for !<"+b.tag+'> tag; it should be "'+Te.kind+'", not "'+b.kind+'"'),Te.resolve(b.result)?(b.result=Te.construct(b.result),b.anchor!==null&&(b.anchorMap[b.anchor]=b.result)):R(b,"cannot resolve a node with !<"+b.tag+"> explicit tag")):R(b,"unknown tag !<"+b.tag+">");return b.listener!==null&&b.listener("close",b),b.tag!==null||b.anchor!==null||Je}function re(b){var U,V,I,z,W=b.position,Y=!1;for(b.version=null,b.checkLineBreaks=b.legacy,b.tagMap={},b.anchorMap={};(z=b.input.charCodeAt(b.position))!==0&&(B(b,!0,-1),z=b.input.charCodeAt(b.position),!(b.lineIndent>0||z!==37));){for(Y=!0,z=b.input.charCodeAt(++b.position),U=b.position;z!==0&&!d(z);)z=b.input.charCodeAt(++b.position);for(I=[],(V=b.input.slice(U,b.position)).length<1&&R(b,"directive name must not be less than one character in length");z!==0;){for(;g(z);)z=b.input.charCodeAt(++b.position);if(z===35){do z=b.input.charCodeAt(++b.position);while(z!==0&&!m(z));break}if(m(z))break;for(U=b.position;z!==0&&!d(z);)z=b.input.charCodeAt(++b.position);I.push(b.input.slice(U,b.position))}z!==0&&F(b),p.call(A,V)?A[V](b,V,I):M(b,'unknown document directive "'+V+'"')}B(b,!0,-1),b.lineIndent===0&&b.input.charCodeAt(b.position)===45&&b.input.charCodeAt(b.position+1)===45&&b.input.charCodeAt(b.position+2)===45?(b.position+=3,B(b,!0,-1)):Y&&R(b,"directives end mark is expected"),ee(b,b.lineIndent-1,4,!1,!0),B(b,!0,-1),b.checkLineBreaks&&f.test(b.input.slice(W,b.position))&&M(b,"non-ASCII line breaks are interpreted as content"),b.documents.push(b.result),b.position===b.lineStart&&$(b)?b.input.charCodeAt(b.position)===46&&(b.position+=3,B(b,!0,-1)):b.position<b.length-1&&R(b,"end of the stream or a document separator is expected")}function ae(b,U){U=U||{},(b=String(b)).length!==0&&(b.charCodeAt(b.length-1)!==10&&b.charCodeAt(b.length-1)!==13&&(b+=`
`),b.charCodeAt(0)===65279&&(b=b.slice(1)));var V=new O(b,U),I=b.indexOf("\0");for(I!==-1&&(V.position=I,R(V,"null byte is not allowed in input")),V.input+="\0";V.input.charCodeAt(V.position)===32;)V.lineIndent+=1,V.position+=1;for(;V.position<V.length-1;)re(V);return V.documents}function te(b,U,V){U!==null&&typeof U=="object"&&V===void 0&&(V=U,U=null);var I=ae(b,V);if(typeof U!="function")return I;for(var z=0,W=I.length;z<W;z+=1)U(I[z])}function L(b,U){var V=ae(b,U);if(V.length!==0){if(V.length===1)return V[0];throw new o("expected a single document in the stream, but found more")}}n.exports.loadAll=te,n.exports.load=L,n.exports.safeLoadAll=function(b,U,V){return typeof U=="object"&&U!==null&&V===void 0&&(V=U,U=null),te(b,U,a.extend({schema:u},V))},n.exports.safeLoad=function(b,U){return L(b,a.extend({schema:u},U))}},function(n,r,i){var a=i(38);function o(s,u,l,p,c){this.name=s,this.buffer=u,this.position=l,this.line=p,this.column=c}o.prototype.getSnippet=function(s,u){var l,p,c,f,h;if(!this.buffer)return null;for(s=s||4,u=u||75,l="",p=this.position;p>0&&`\0\r
\u2028\u2029`.indexOf(this.buffer.charAt(p-1))===-1;)if(p-=1,this.position-p>u/2-1){l=" ... ",p+=5;break}for(c="",f=this.position;f<this.buffer.length&&`\0\r
\u2028\u2029`.indexOf(this.buffer.charAt(f))===-1;)if((f+=1)-this.position>u/2-1){c=" ... ",f-=5;break}return h=this.buffer.slice(p,f),a.repeat(" ",s)+l+h+c+`
`+a.repeat(" ",s+this.position-p+l.length)+"^"},o.prototype.toString=function(s){var u,l="";return this.name&&(l+='in "'+this.name+'" '),l+="at line "+(this.line+1)+", column "+(this.column+1),s||(u=this.getSnippet())&&(l+=`:
`+u),l},n.exports=o},function(n,r,i){var a=i(10);n.exports=new a("tag:yaml.org,2002:str",{kind:"scalar",construct:function(o){return o!==null?o:""}})},function(n,r,i){var a=i(10);n.exports=new a("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(o){return o!==null?o:[]}})},function(n,r,i){var a=i(10);n.exports=new a("tag:yaml.org,2002:map",{kind:"mapping",construct:function(o){return o!==null?o:{}}})},function(n,r,i){var a=i(10);n.exports=new a("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(o){if(o===null)return!0;var s=o.length;return s===1&&o==="~"||s===4&&(o==="null"||o==="Null"||o==="NULL")},construct:function(){return null},predicate:function(o){return o===null},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},function(n,r,i){var a=i(10);n.exports=new a("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(o){if(o===null)return!1;var s=o.length;return s===4&&(o==="true"||o==="True"||o==="TRUE")||s===5&&(o==="false"||o==="False"||o==="FALSE")},construct:function(o){return o==="true"||o==="True"||o==="TRUE"},predicate:function(o){return Object.prototype.toString.call(o)==="[object Boolean]"},represent:{lowercase:function(o){return o?"true":"false"},uppercase:function(o){return o?"TRUE":"FALSE"},camelcase:function(o){return o?"True":"False"}},defaultStyle:"lowercase"})},function(n,r,i){var a=i(38),o=i(10);function s(l){return 48<=l&&l<=55}function u(l){return 48<=l&&l<=57}n.exports=new o("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(l){if(l===null)return!1;var p,c,f=l.length,h=0,v=!1;if(!f)return!1;if((p=l[h])!=="-"&&p!=="+"||(p=l[++h]),p==="0"){if(h+1===f)return!0;if((p=l[++h])==="b"){for(h++;h<f;h++)if((p=l[h])!=="_"){if(p!=="0"&&p!=="1")return!1;v=!0}return v&&p!=="_"}if(p==="x"){for(h++;h<f;h++)if((p=l[h])!=="_"){if(!(48<=(c=l.charCodeAt(h))&&c<=57||65<=c&&c<=70||97<=c&&c<=102))return!1;v=!0}return v&&p!=="_"}for(;h<f;h++)if((p=l[h])!=="_"){if(!s(l.charCodeAt(h)))return!1;v=!0}return v&&p!=="_"}if(p==="_")return!1;for(;h<f;h++)if((p=l[h])!=="_"){if(p===":")break;if(!u(l.charCodeAt(h)))return!1;v=!0}return!(!v||p==="_")&&(p!==":"||/^(:[0-5]?[0-9])+$/.test(l.slice(h)))},construct:function(l){var p,c,f=l,h=1,v=[];return f.indexOf("_")!==-1&&(f=f.replace(/_/g,"")),(p=f[0])!=="-"&&p!=="+"||(p==="-"&&(h=-1),p=(f=f.slice(1))[0]),f==="0"?0:p==="0"?f[1]==="b"?h*parseInt(f.slice(2),2):f[1]==="x"?h*parseInt(f,16):h*parseInt(f,8):f.indexOf(":")!==-1?(f.split(":").forEach(function(y){v.unshift(parseInt(y,10))}),f=0,c=1,v.forEach(function(y){f+=y*c,c*=60}),h*f):h*parseInt(f,10)},predicate:function(l){return Object.prototype.toString.call(l)==="[object Number]"&&l%1==0&&!a.isNegativeZero(l)},represent:{binary:function(l){return l>=0?"0b"+l.toString(2):"-0b"+l.toString(2).slice(1)},octal:function(l){return l>=0?"0"+l.toString(8):"-0"+l.toString(8).slice(1)},decimal:function(l){return l.toString(10)},hexadecimal:function(l){return l>=0?"0x"+l.toString(16).toUpperCase():"-0x"+l.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},function(n,r,i){var a=i(38),o=i(10),s=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),u=/^[-+]?[0-9]+e/;n.exports=new o("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(l){return l!==null&&!(!s.test(l)||l[l.length-1]==="_")},construct:function(l){var p,c,f,h;return c=(p=l.replace(/_/g,"").toLowerCase())[0]==="-"?-1:1,h=[],"+-".indexOf(p[0])>=0&&(p=p.slice(1)),p===".inf"?c===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:p===".nan"?NaN:p.indexOf(":")>=0?(p.split(":").forEach(function(v){h.unshift(parseFloat(v,10))}),p=0,f=1,h.forEach(function(v){p+=v*f,f*=60}),c*p):c*parseFloat(p,10)},predicate:function(l){return Object.prototype.toString.call(l)==="[object Number]"&&(l%1!=0||a.isNegativeZero(l))},represent:function(l,p){var c;if(isNaN(l))switch(p){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===l)switch(p){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===l)switch(p){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(a.isNegativeZero(l))return"-0.0";return c=l.toString(10),u.test(c)?c.replace("e",".e"):c},defaultStyle:"lowercase"})},function(n,r,i){var a=i(10),o=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),s=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");n.exports=new a("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(u){return u!==null&&(o.exec(u)!==null||s.exec(u)!==null)},construct:function(u){var l,p,c,f,h,v,y,x,m=0,g=null;if((l=o.exec(u))===null&&(l=s.exec(u)),l===null)throw new Error("Date resolve error");if(p=+l[1],c=+l[2]-1,f=+l[3],!l[4])return new Date(Date.UTC(p,c,f));if(h=+l[4],v=+l[5],y=+l[6],l[7]){for(m=l[7].slice(0,3);m.length<3;)m+="0";m=+m}return l[9]&&(g=6e4*(60*+l[10]+ +(l[11]||0)),l[9]==="-"&&(g=-g)),x=new Date(Date.UTC(p,c,f,h,v,y,m)),g&&x.setTime(x.getTime()-g),x},instanceOf:Date,represent:function(u){return u.toISOString()}})},function(n,r,i){var a=i(10);n.exports=new a("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(o){return o==="<<"||o===null}})},function(n,r,i){var a;try{a=i(145).Buffer}catch{}var o=i(10),s=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;n.exports=new o("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(u){if(u===null)return!1;var l,p,c=0,f=u.length,h=s;for(p=0;p<f;p++)if(!((l=h.indexOf(u.charAt(p)))>64)){if(l<0)return!1;c+=6}return c%8==0},construct:function(u){var l,p,c=u.replace(/[\r\n=]/g,""),f=c.length,h=s,v=0,y=[];for(l=0;l<f;l++)l%4==0&&l&&(y.push(v>>16&255),y.push(v>>8&255),y.push(255&v)),v=v<<6|h.indexOf(c.charAt(l));return(p=f%4*6)===0?(y.push(v>>16&255),y.push(v>>8&255),y.push(255&v)):p===18?(y.push(v>>10&255),y.push(v>>2&255)):p===12&&y.push(v>>4&255),a?a.from?a.from(y):new a(y):y},predicate:function(u){return a&&a.isBuffer(u)},represent:function(u){var l,p,c="",f=0,h=u.length,v=s;for(l=0;l<h;l++)l%3==0&&l&&(c+=v[f>>18&63],c+=v[f>>12&63],c+=v[f>>6&63],c+=v[63&f]),f=(f<<8)+u[l];return(p=h%3)===0?(c+=v[f>>18&63],c+=v[f>>12&63],c+=v[f>>6&63],c+=v[63&f]):p===2?(c+=v[f>>10&63],c+=v[f>>4&63],c+=v[f<<2&63],c+=v[64]):p===1&&(c+=v[f>>2&63],c+=v[f<<4&63],c+=v[64],c+=v[64]),c}})},function(n,r,i){var a=i(10),o=Object.prototype.hasOwnProperty,s=Object.prototype.toString;n.exports=new a("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(u){if(u===null)return!0;var l,p,c,f,h,v=[],y=u;for(l=0,p=y.length;l<p;l+=1){if(c=y[l],h=!1,s.call(c)!=="[object Object]")return!1;for(f in c)if(o.call(c,f)){if(h)return!1;h=!0}if(!h||v.indexOf(f)!==-1)return!1;v.push(f)}return!0},construct:function(u){return u!==null?u:[]}})},function(n,r,i){var a=i(10),o=Object.prototype.toString;n.exports=new a("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(s){if(s===null)return!0;var u,l,p,c,f,h=s;for(f=new Array(h.length),u=0,l=h.length;u<l;u+=1){if(p=h[u],o.call(p)!=="[object Object]"||(c=Object.keys(p)).length!==1)return!1;f[u]=[c[0],p[c[0]]]}return!0},construct:function(s){if(s===null)return[];var u,l,p,c,f,h=s;for(f=new Array(h.length),u=0,l=h.length;u<l;u+=1)p=h[u],c=Object.keys(p),f[u]=[c[0],p[c[0]]];return f}})},function(n,r,i){var a=i(10),o=Object.prototype.hasOwnProperty;n.exports=new a("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(s){if(s===null)return!0;var u,l=s;for(u in l)if(o.call(l,u)&&l[u]!==null)return!1;return!0},construct:function(s){return s!==null?s:{}}})},function(n,r,i){var a=i(10);n.exports=new a("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(o){return o===void 0},represent:function(){return""}})},function(n,r,i){var a=i(10);n.exports=new a("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(o){if(o===null||o.length===0)return!1;var s=o,u=/\/([gim]*)$/.exec(o),l="";return!(s[0]==="/"&&(u&&(l=u[1]),l.length>3||s[s.length-l.length-1]!=="/"))},construct:function(o){var s=o,u=/\/([gim]*)$/.exec(o),l="";return s[0]==="/"&&(u&&(l=u[1]),s=s.slice(1,s.length-l.length-1)),new RegExp(s,l)},predicate:function(o){return Object.prototype.toString.call(o)==="[object RegExp]"},represent:function(o){var s="/"+o.source+"/";return o.global&&(s+="g"),o.multiline&&(s+="m"),o.ignoreCase&&(s+="i"),s}})},function(n,r,i){var a;try{a=i(302)}catch{typeof window<"u"&&(a=window.esprima)}var o=i(10);n.exports=new o("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(s){if(s===null)return!1;try{var u="("+s+")",l=a.parse(u,{range:!0});return l.type==="Program"&&l.body.length===1&&l.body[0].type==="ExpressionStatement"&&(l.body[0].expression.type==="ArrowFunctionExpression"||l.body[0].expression.type==="FunctionExpression")}catch{return!1}},construct:function(s){var u,l="("+s+")",p=a.parse(l,{range:!0}),c=[];if(p.type!=="Program"||p.body.length!==1||p.body[0].type!=="ExpressionStatement"||p.body[0].expression.type!=="ArrowFunctionExpression"&&p.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return p.body[0].expression.params.forEach(function(f){c.push(f.name)}),u=p.body[0].expression.body.range,p.body[0].expression.body.type==="BlockStatement"?new Function(c,l.slice(u[0]+1,u[1]-1)):new Function(c,"return "+l.slice(u[0],u[1]))},predicate:function(s){return Object.prototype.toString.call(s)==="[object Function]"},represent:function(s){return s.toString()}})},function(n,r,i){var a;a=function(){return function(o){var s={};function u(l){if(s[l])return s[l].exports;var p=s[l]={exports:{},id:l,loaded:!1};return o[l].call(p.exports,p,p.exports,u),p.loaded=!0,p.exports}return u.m=o,u.c=s,u.p="",u(0)}([function(o,s,u){Object.defineProperty(s,"__esModule",{value:!0});var l=u(1),p=u(3),c=u(8),f=u(15);function h(y,x,m){var g=null,d=function(D,O){m&&m(D,O),g&&g.visit(D,O)},S=typeof m=="function"?d:null,T=!1;if(x){T=typeof x.comment=="boolean"&&x.comment;var C=typeof x.attachComment=="boolean"&&x.attachComment;(T||C)&&((g=new l.CommentHandler).attach=C,x.comment=!0,S=d)}var w,_=!1;x&&typeof x.sourceType=="string"&&(_=x.sourceType==="module"),w=x&&typeof x.jsx=="boolean"&&x.jsx?new p.JSXParser(y,x,S):new c.Parser(y,x,S);var E=_?w.parseModule():w.parseScript();return T&&g&&(E.comments=g.comments),w.config.tokens&&(E.tokens=w.tokens),w.config.tolerant&&(E.errors=w.errorHandler.errors),E}s.parse=h,s.parseModule=function(y,x,m){var g=x||{};return g.sourceType="module",h(y,g,m)},s.parseScript=function(y,x,m){var g=x||{};return g.sourceType="script",h(y,g,m)},s.tokenize=function(y,x,m){var g,d=new f.Tokenizer(y,x);g=[];try{for(;;){var S=d.getNextToken();if(!S)break;m&&(S=m(S)),g.push(S)}}catch(T){d.errorHandler.tolerate(T)}return d.errorHandler.tolerant&&(g.errors=d.errors()),g};var v=u(2);s.Syntax=v.Syntax,s.version="4.0.1"},function(o,s,u){Object.defineProperty(s,"__esModule",{value:!0});var l=u(2),p=function(){function c(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return c.prototype.insertInnerComments=function(f,h){if(f.type===l.Syntax.BlockStatement&&f.body.length===0){for(var v=[],y=this.leading.length-1;y>=0;--y){var x=this.leading[y];h.end.offset>=x.start&&(v.unshift(x.comment),this.leading.splice(y,1),this.trailing.splice(y,1))}v.length&&(f.innerComments=v)}},c.prototype.findTrailingComments=function(f){var h=[];if(this.trailing.length>0){for(var v=this.trailing.length-1;v>=0;--v){var y=this.trailing[v];y.start>=f.end.offset&&h.unshift(y.comment)}return this.trailing.length=0,h}var x=this.stack[this.stack.length-1];if(x&&x.node.trailingComments){var m=x.node.trailingComments[0];m&&m.range[0]>=f.end.offset&&(h=x.node.trailingComments,delete x.node.trailingComments)}return h},c.prototype.findLeadingComments=function(f){for(var h,v=[];this.stack.length>0&&(m=this.stack[this.stack.length-1])&&m.start>=f.start.offset;)h=m.node,this.stack.pop();if(h){for(var y=(h.leadingComments?h.leadingComments.length:0)-1;y>=0;--y){var x=h.leadingComments[y];x.range[1]<=f.start.offset&&(v.unshift(x),h.leadingComments.splice(y,1))}return h.leadingComments&&h.leadingComments.length===0&&delete h.leadingComments,v}for(y=this.leading.length-1;y>=0;--y){var m;(m=this.leading[y]).start<=f.start.offset&&(v.unshift(m.comment),this.leading.splice(y,1))}return v},c.prototype.visitNode=function(f,h){if(!(f.type===l.Syntax.Program&&f.body.length>0)){this.insertInnerComments(f,h);var v=this.findTrailingComments(h),y=this.findLeadingComments(h);y.length>0&&(f.leadingComments=y),v.length>0&&(f.trailingComments=v),this.stack.push({node:f,start:h.start.offset})}},c.prototype.visitComment=function(f,h){var v=f.type[0]==="L"?"Line":"Block",y={type:v,value:f.value};if(f.range&&(y.range=f.range),f.loc&&(y.loc=f.loc),this.comments.push(y),this.attach){var x={comment:{type:v,value:f.value,range:[h.start.offset,h.end.offset]},start:h.start.offset};f.loc&&(x.comment.loc=f.loc),f.type=v,this.leading.push(x),this.trailing.push(x)}},c.prototype.visit=function(f,h){f.type==="LineComment"||f.type==="BlockComment"?this.visitComment(f,h):this.attach&&this.visitNode(f,h)},c}();s.CommentHandler=p},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(o,s,u){var l,p=this&&this.__extends||(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,T){S.__proto__=T}||function(S,T){for(var C in T)T.hasOwnProperty(C)&&(S[C]=T[C])},function(S,T){function C(){this.constructor=S}l(S,T),S.prototype=T===null?Object.create(T):(C.prototype=T.prototype,new C)});Object.defineProperty(s,"__esModule",{value:!0});var c=u(4),f=u(5),h=u(6),v=u(7),y=u(8),x=u(13),m=u(14);function g(S){var T;switch(S.type){case h.JSXSyntax.JSXIdentifier:T=S.name;break;case h.JSXSyntax.JSXNamespacedName:var C=S;T=g(C.namespace)+":"+g(C.name);break;case h.JSXSyntax.JSXMemberExpression:var w=S;T=g(w.object)+"."+g(w.property)}return T}x.TokenName[100]="JSXIdentifier",x.TokenName[101]="JSXText";var d=function(S){function T(C,w,_){return S.call(this,C,w,_)||this}return p(T,S),T.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():S.prototype.parsePrimaryExpression.call(this)},T.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},T.prototype.finishJSX=function(){this.nextToken()},T.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},T.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},T.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},T.prototype.scanXHTMLEntity=function(C){for(var w="&",_=!0,E=!1,D=!1,O=!1;!this.scanner.eof()&&_&&!E;){var N=this.scanner.source[this.scanner.index];if(N===C)break;if(E=N===";",w+=N,++this.scanner.index,!E)switch(w.length){case 2:D=N==="#";break;case 3:D&&(_=(O=N==="x")||c.Character.isDecimalDigit(N.charCodeAt(0)),D=D&&!O);break;default:_=(_=_&&!(D&&!c.Character.isDecimalDigit(N.charCodeAt(0))))&&!(O&&!c.Character.isHexDigit(N.charCodeAt(0)))}}if(_&&E&&w.length>2){var R=w.substr(1,w.length-2);D&&R.length>1?w=String.fromCharCode(parseInt(R.substr(1),10)):O&&R.length>2?w=String.fromCharCode(parseInt("0"+R.substr(1),16)):D||O||!m.XHTMLEntities[R]||(w=m.XHTMLEntities[R])}return w},T.prototype.lexJSX=function(){var C=this.scanner.source.charCodeAt(this.scanner.index);if(C===60||C===62||C===47||C===58||C===61||C===123||C===125)return{type:7,value:N=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(C===34||C===39){for(var w=this.scanner.index,_=this.scanner.source[this.scanner.index++],E="";!this.scanner.eof()&&(R=this.scanner.source[this.scanner.index++])!==_;)E+=R==="&"?this.scanXHTMLEntity(_):R;return{type:8,value:E,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:w,end:this.scanner.index}}if(C===46){var D=this.scanner.source.charCodeAt(this.scanner.index+1),O=this.scanner.source.charCodeAt(this.scanner.index+2),N=D===46&&O===46?"...":".";return w=this.scanner.index,this.scanner.index+=N.length,{type:7,value:N,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:w,end:this.scanner.index}}if(C===96)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(c.Character.isIdentifierStart(C)&&C!==92){for(w=this.scanner.index,++this.scanner.index;!this.scanner.eof();){var R=this.scanner.source.charCodeAt(this.scanner.index);if(c.Character.isIdentifierPart(R)&&R!==92)++this.scanner.index;else{if(R!==45)break;++this.scanner.index}}return{type:100,value:this.scanner.source.slice(w,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:w,end:this.scanner.index}}return this.scanner.lex()},T.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var C=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(C)),C},T.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var C=this.scanner.index,w="";!this.scanner.eof();){var _=this.scanner.source[this.scanner.index];if(_==="{"||_==="<")break;++this.scanner.index,w+=_,c.Character.isLineTerminator(_.charCodeAt(0))&&(++this.scanner.lineNumber,_==="\r"&&this.scanner.source[this.scanner.index]===`
`&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var E={type:101,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:C,end:this.scanner.index};return w.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(E)),E},T.prototype.peekJSXToken=function(){var C=this.scanner.saveState();this.scanner.scanComments();var w=this.lexJSX();return this.scanner.restoreState(C),w},T.prototype.expectJSX=function(C){var w=this.nextJSXToken();w.type===7&&w.value===C||this.throwUnexpectedToken(w)},T.prototype.matchJSX=function(C){var w=this.peekJSXToken();return w.type===7&&w.value===C},T.prototype.parseJSXIdentifier=function(){var C=this.createJSXNode(),w=this.nextJSXToken();return w.type!==100&&this.throwUnexpectedToken(w),this.finalize(C,new f.JSXIdentifier(w.value))},T.prototype.parseJSXElementName=function(){var C=this.createJSXNode(),w=this.parseJSXIdentifier();if(this.matchJSX(":")){var _=w;this.expectJSX(":");var E=this.parseJSXIdentifier();w=this.finalize(C,new f.JSXNamespacedName(_,E))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var D=w;this.expectJSX(".");var O=this.parseJSXIdentifier();w=this.finalize(C,new f.JSXMemberExpression(D,O))}return w},T.prototype.parseJSXAttributeName=function(){var C,w=this.createJSXNode(),_=this.parseJSXIdentifier();if(this.matchJSX(":")){var E=_;this.expectJSX(":");var D=this.parseJSXIdentifier();C=this.finalize(w,new f.JSXNamespacedName(E,D))}else C=_;return C},T.prototype.parseJSXStringLiteralAttribute=function(){var C=this.createJSXNode(),w=this.nextJSXToken();w.type!==8&&this.throwUnexpectedToken(w);var _=this.getTokenRaw(w);return this.finalize(C,new v.Literal(w.value,_))},T.prototype.parseJSXExpressionAttribute=function(){var C=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var w=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(C,new f.JSXExpressionContainer(w))},T.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},T.prototype.parseJSXNameValueAttribute=function(){var C=this.createJSXNode(),w=this.parseJSXAttributeName(),_=null;return this.matchJSX("=")&&(this.expectJSX("="),_=this.parseJSXAttributeValue()),this.finalize(C,new f.JSXAttribute(w,_))},T.prototype.parseJSXSpreadAttribute=function(){var C=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var w=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(C,new f.JSXSpreadAttribute(w))},T.prototype.parseJSXAttributes=function(){for(var C=[];!this.matchJSX("/")&&!this.matchJSX(">");){var w=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();C.push(w)}return C},T.prototype.parseJSXOpeningElement=function(){var C=this.createJSXNode();this.expectJSX("<");var w=this.parseJSXElementName(),_=this.parseJSXAttributes(),E=this.matchJSX("/");return E&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(C,new f.JSXOpeningElement(w,E,_))},T.prototype.parseJSXBoundaryElement=function(){var C=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var w=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(C,new f.JSXClosingElement(w))}var _=this.parseJSXElementName(),E=this.parseJSXAttributes(),D=this.matchJSX("/");return D&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(C,new f.JSXOpeningElement(_,D,E))},T.prototype.parseJSXEmptyExpression=function(){var C=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(C,new f.JSXEmptyExpression)},T.prototype.parseJSXExpressionContainer=function(){var C,w=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(C=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),C=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(w,new f.JSXExpressionContainer(C))},T.prototype.parseJSXChildren=function(){for(var C=[];!this.scanner.eof();){var w=this.createJSXChildNode(),_=this.nextJSXText();if(_.start<_.end){var E=this.getTokenRaw(_),D=this.finalize(w,new f.JSXText(_.value,E));C.push(D)}if(this.scanner.source[this.scanner.index]!=="{")break;var O=this.parseJSXExpressionContainer();C.push(O)}return C},T.prototype.parseComplexJSXElement=function(C){for(var w=[];!this.scanner.eof();){C.children=C.children.concat(this.parseJSXChildren());var _=this.createJSXChildNode(),E=this.parseJSXBoundaryElement();if(E.type===h.JSXSyntax.JSXOpeningElement){var D=E;if(D.selfClosing){var O=this.finalize(_,new f.JSXElement(D,[],null));C.children.push(O)}else w.push(C),C={node:_,opening:D,closing:null,children:[]}}if(E.type===h.JSXSyntax.JSXClosingElement){C.closing=E;var N=g(C.opening.name);if(N!==g(C.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",N),!(w.length>0))break;O=this.finalize(C.node,new f.JSXElement(C.opening,C.children,C.closing)),(C=w[w.length-1]).children.push(O),w.pop()}}return C},T.prototype.parseJSXElement=function(){var C=this.createJSXNode(),w=this.parseJSXOpeningElement(),_=[],E=null;if(!w.selfClosing){var D=this.parseComplexJSXElement({node:C,opening:w,closing:E,children:_});_=D.children,E=D.closing}return this.finalize(C,new f.JSXElement(w,_,E))},T.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var C=this.parseJSXElement();return this.finishJSX(),C},T.prototype.isStartOfExpression=function(){return S.prototype.isStartOfExpression.call(this)||this.match("<")},T}(y.Parser);s.JSXParser=d},function(o,s){Object.defineProperty(s,"__esModule",{value:!0});var u={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};s.Character={fromCodePoint:function(l){return l<65536?String.fromCharCode(l):String.fromCharCode(55296+(l-65536>>10))+String.fromCharCode(56320+(l-65536&1023))},isWhiteSpace:function(l){return l===32||l===9||l===11||l===12||l===160||l>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(l)>=0},isLineTerminator:function(l){return l===10||l===13||l===8232||l===8233},isIdentifierStart:function(l){return l===36||l===95||l>=65&&l<=90||l>=97&&l<=122||l===92||l>=128&&u.NonAsciiIdentifierStart.test(s.Character.fromCodePoint(l))},isIdentifierPart:function(l){return l===36||l===95||l>=65&&l<=90||l>=97&&l<=122||l>=48&&l<=57||l===92||l>=128&&u.NonAsciiIdentifierPart.test(s.Character.fromCodePoint(l))},isDecimalDigit:function(l){return l>=48&&l<=57},isHexDigit:function(l){return l>=48&&l<=57||l>=65&&l<=70||l>=97&&l<=102},isOctalDigit:function(l){return l>=48&&l<=55}}},function(o,s,u){Object.defineProperty(s,"__esModule",{value:!0});var l=u(6),p=function(T){this.type=l.JSXSyntax.JSXClosingElement,this.name=T};s.JSXClosingElement=p;var c=function(T,C,w){this.type=l.JSXSyntax.JSXElement,this.openingElement=T,this.children=C,this.closingElement=w};s.JSXElement=c;var f=function(){this.type=l.JSXSyntax.JSXEmptyExpression};s.JSXEmptyExpression=f;var h=function(T){this.type=l.JSXSyntax.JSXExpressionContainer,this.expression=T};s.JSXExpressionContainer=h;var v=function(T){this.type=l.JSXSyntax.JSXIdentifier,this.name=T};s.JSXIdentifier=v;var y=function(T,C){this.type=l.JSXSyntax.JSXMemberExpression,this.object=T,this.property=C};s.JSXMemberExpression=y;var x=function(T,C){this.type=l.JSXSyntax.JSXAttribute,this.name=T,this.value=C};s.JSXAttribute=x;var m=function(T,C){this.type=l.JSXSyntax.JSXNamespacedName,this.namespace=T,this.name=C};s.JSXNamespacedName=m;var g=function(T,C,w){this.type=l.JSXSyntax.JSXOpeningElement,this.name=T,this.selfClosing=C,this.attributes=w};s.JSXOpeningElement=g;var d=function(T){this.type=l.JSXSyntax.JSXSpreadAttribute,this.argument=T};s.JSXSpreadAttribute=d;var S=function(T,C){this.type=l.JSXSyntax.JSXText,this.value=T,this.raw=C};s.JSXText=S},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(o,s,u){Object.defineProperty(s,"__esModule",{value:!0});var l=u(2),p=function(ie){this.type=l.Syntax.ArrayExpression,this.elements=ie};s.ArrayExpression=p;var c=function(ie){this.type=l.Syntax.ArrayPattern,this.elements=ie};s.ArrayPattern=c;var f=function(ie,le,be){this.type=l.Syntax.ArrowFunctionExpression,this.id=null,this.params=ie,this.body=le,this.generator=!1,this.expression=be,this.async=!1};s.ArrowFunctionExpression=f;var h=function(ie,le,be){this.type=l.Syntax.AssignmentExpression,this.operator=ie,this.left=le,this.right=be};s.AssignmentExpression=h;var v=function(ie,le){this.type=l.Syntax.AssignmentPattern,this.left=ie,this.right=le};s.AssignmentPattern=v;var y=function(ie,le,be){this.type=l.Syntax.ArrowFunctionExpression,this.id=null,this.params=ie,this.body=le,this.generator=!1,this.expression=be,this.async=!0};s.AsyncArrowFunctionExpression=y;var x=function(ie,le,be){this.type=l.Syntax.FunctionDeclaration,this.id=ie,this.params=le,this.body=be,this.generator=!1,this.expression=!1,this.async=!0};s.AsyncFunctionDeclaration=x;var m=function(ie,le,be){this.type=l.Syntax.FunctionExpression,this.id=ie,this.params=le,this.body=be,this.generator=!1,this.expression=!1,this.async=!0};s.AsyncFunctionExpression=m;var g=function(ie){this.type=l.Syntax.AwaitExpression,this.argument=ie};s.AwaitExpression=g;var d=function(ie,le,be){var cn=ie==="||"||ie==="&&";this.type=cn?l.Syntax.LogicalExpression:l.Syntax.BinaryExpression,this.operator=ie,this.left=le,this.right=be};s.BinaryExpression=d;var S=function(ie){this.type=l.Syntax.BlockStatement,this.body=ie};s.BlockStatement=S;var T=function(ie){this.type=l.Syntax.BreakStatement,this.label=ie};s.BreakStatement=T;var C=function(ie,le){this.type=l.Syntax.CallExpression,this.callee=ie,this.arguments=le};s.CallExpression=C;var w=function(ie,le){this.type=l.Syntax.CatchClause,this.param=ie,this.body=le};s.CatchClause=w;var _=function(ie){this.type=l.Syntax.ClassBody,this.body=ie};s.ClassBody=_;var E=function(ie,le,be){this.type=l.Syntax.ClassDeclaration,this.id=ie,this.superClass=le,this.body=be};s.ClassDeclaration=E;var D=function(ie,le,be){this.type=l.Syntax.ClassExpression,this.id=ie,this.superClass=le,this.body=be};s.ClassExpression=D;var O=function(ie,le){this.type=l.Syntax.MemberExpression,this.computed=!0,this.object=ie,this.property=le};s.ComputedMemberExpression=O;var N=function(ie,le,be){this.type=l.Syntax.ConditionalExpression,this.test=ie,this.consequent=le,this.alternate=be};s.ConditionalExpression=N;var R=function(ie){this.type=l.Syntax.ContinueStatement,this.label=ie};s.ContinueStatement=R;var M=function(){this.type=l.Syntax.DebuggerStatement};s.DebuggerStatement=M;var A=function(ie,le){this.type=l.Syntax.ExpressionStatement,this.expression=ie,this.directive=le};s.Directive=A;var G=function(ie,le){this.type=l.Syntax.DoWhileStatement,this.body=ie,this.test=le};s.DoWhileStatement=G;var j=function(){this.type=l.Syntax.EmptyStatement};s.EmptyStatement=j;var k=function(ie){this.type=l.Syntax.ExportAllDeclaration,this.source=ie};s.ExportAllDeclaration=k;var F=function(ie){this.type=l.Syntax.ExportDefaultDeclaration,this.declaration=ie};s.ExportDefaultDeclaration=F;var B=function(ie,le,be){this.type=l.Syntax.ExportNamedDeclaration,this.declaration=ie,this.specifiers=le,this.source=be};s.ExportNamedDeclaration=B;var $=function(ie,le){this.type=l.Syntax.ExportSpecifier,this.exported=le,this.local=ie};s.ExportSpecifier=$;var H=function(ie){this.type=l.Syntax.ExpressionStatement,this.expression=ie};s.ExpressionStatement=H;var X=function(ie,le,be){this.type=l.Syntax.ForInStatement,this.left=ie,this.right=le,this.body=be,this.each=!1};s.ForInStatement=X;var J=function(ie,le,be){this.type=l.Syntax.ForOfStatement,this.left=ie,this.right=le,this.body=be};s.ForOfStatement=J;var q=function(ie,le,be,cn){this.type=l.Syntax.ForStatement,this.init=ie,this.test=le,this.update=be,this.body=cn};s.ForStatement=q;var ee=function(ie,le,be,cn){this.type=l.Syntax.FunctionDeclaration,this.id=ie,this.params=le,this.body=be,this.generator=cn,this.expression=!1,this.async=!1};s.FunctionDeclaration=ee;var re=function(ie,le,be,cn){this.type=l.Syntax.FunctionExpression,this.id=ie,this.params=le,this.body=be,this.generator=cn,this.expression=!1,this.async=!1};s.FunctionExpression=re;var ae=function(ie){this.type=l.Syntax.Identifier,this.name=ie};s.Identifier=ae;var te=function(ie,le,be){this.type=l.Syntax.IfStatement,this.test=ie,this.consequent=le,this.alternate=be};s.IfStatement=te;var L=function(ie,le){this.type=l.Syntax.ImportDeclaration,this.specifiers=ie,this.source=le};s.ImportDeclaration=L;var b=function(ie){this.type=l.Syntax.ImportDefaultSpecifier,this.local=ie};s.ImportDefaultSpecifier=b;var U=function(ie){this.type=l.Syntax.ImportNamespaceSpecifier,this.local=ie};s.ImportNamespaceSpecifier=U;var V=function(ie,le){this.type=l.Syntax.ImportSpecifier,this.local=ie,this.imported=le};s.ImportSpecifier=V;var I=function(ie,le){this.type=l.Syntax.LabeledStatement,this.label=ie,this.body=le};s.LabeledStatement=I;var z=function(ie,le){this.type=l.Syntax.Literal,this.value=ie,this.raw=le};s.Literal=z;var W=function(ie,le){this.type=l.Syntax.MetaProperty,this.meta=ie,this.property=le};s.MetaProperty=W;var Y=function(ie,le,be,cn,Yc){this.type=l.Syntax.MethodDefinition,this.key=ie,this.computed=le,this.value=be,this.kind=cn,this.static=Yc};s.MethodDefinition=Y;var ne=function(ie){this.type=l.Syntax.Program,this.body=ie,this.sourceType="module"};s.Module=ne;var oe=function(ie,le){this.type=l.Syntax.NewExpression,this.callee=ie,this.arguments=le};s.NewExpression=oe;var ue=function(ie){this.type=l.Syntax.ObjectExpression,this.properties=ie};s.ObjectExpression=ue;var Te=function(ie){this.type=l.Syntax.ObjectPattern,this.properties=ie};s.ObjectPattern=Te;var me=function(ie,le,be,cn,Yc,K9){this.type=l.Syntax.Property,this.key=le,this.computed=be,this.value=cn,this.kind=ie,this.method=Yc,this.shorthand=K9};s.Property=me;var je=function(ie,le,be,cn){this.type=l.Syntax.Literal,this.value=ie,this.raw=le,this.regex={pattern:be,flags:cn}};s.RegexLiteral=je;var Ne=function(ie){this.type=l.Syntax.RestElement,this.argument=ie};s.RestElement=Ne;var he=function(ie){this.type=l.Syntax.ReturnStatement,this.argument=ie};s.ReturnStatement=he;var Je=function(ie){this.type=l.Syntax.Program,this.body=ie,this.sourceType="script"};s.Script=Je;var K=function(ie){this.type=l.Syntax.SequenceExpression,this.expressions=ie};s.SequenceExpression=K;var Ce=function(ie){this.type=l.Syntax.SpreadElement,this.argument=ie};s.SpreadElement=Ce;var we=function(ie,le){this.type=l.Syntax.MemberExpression,this.computed=!1,this.object=ie,this.property=le};s.StaticMemberExpression=we;var de=function(){this.type=l.Syntax.Super};s.Super=de;var Z=function(ie,le){this.type=l.Syntax.SwitchCase,this.test=ie,this.consequent=le};s.SwitchCase=Z;var se=function(ie,le){this.type=l.Syntax.SwitchStatement,this.discriminant=ie,this.cases=le};s.SwitchStatement=se;var pe=function(ie,le){this.type=l.Syntax.TaggedTemplateExpression,this.tag=ie,this.quasi=le};s.TaggedTemplateExpression=pe;var fe=function(ie,le){this.type=l.Syntax.TemplateElement,this.value=ie,this.tail=le};s.TemplateElement=fe;var ve=function(ie,le){this.type=l.Syntax.TemplateLiteral,this.quasis=ie,this.expressions=le};s.TemplateLiteral=ve;var ke=function(){this.type=l.Syntax.ThisExpression};s.ThisExpression=ke;var xe=function(ie){this.type=l.Syntax.ThrowStatement,this.argument=ie};s.ThrowStatement=xe;var Ve=function(ie,le,be){this.type=l.Syntax.TryStatement,this.block=ie,this.handler=le,this.finalizer=be};s.TryStatement=Ve;var Ue=function(ie,le){this.type=l.Syntax.UnaryExpression,this.operator=ie,this.argument=le,this.prefix=!0};s.UnaryExpression=Ue;var Dt=function(ie,le,be){this.type=l.Syntax.UpdateExpression,this.operator=ie,this.argument=le,this.prefix=be};s.UpdateExpression=Dt;var $t=function(ie,le){this.type=l.Syntax.VariableDeclaration,this.declarations=ie,this.kind=le};s.VariableDeclaration=$t;var at=function(ie,le){this.type=l.Syntax.VariableDeclarator,this.id=ie,this.init=le};s.VariableDeclarator=at;var Tn=function(ie,le){this.type=l.Syntax.WhileStatement,this.test=ie,this.body=le};s.WhileStatement=Tn;var $9=function(ie,le){this.type=l.Syntax.WithStatement,this.object=ie,this.body=le};s.WithStatement=$9;var H9=function(ie,le){this.type=l.Syntax.YieldExpression,this.argument=ie,this.delegate=le};s.YieldExpression=H9},function(o,s,u){Object.defineProperty(s,"__esModule",{value:!0});var l=u(9),p=u(10),c=u(11),f=u(7),h=u(12),v=u(2),y=u(13),x=function(){function m(g,d,S){d===void 0&&(d={}),this.config={range:typeof d.range=="boolean"&&d.range,loc:typeof d.loc=="boolean"&&d.loc,source:null,tokens:typeof d.tokens=="boolean"&&d.tokens,comment:typeof d.comment=="boolean"&&d.comment,tolerant:typeof d.tolerant=="boolean"&&d.tolerant},this.config.loc&&d.source&&d.source!==null&&(this.config.source=String(d.source)),this.delegate=S,this.errorHandler=new p.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new h.Scanner(g,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return m.prototype.throwError=function(g){for(var d=[],S=1;S<arguments.length;S++)d[S-1]=arguments[S];var T=Array.prototype.slice.call(arguments,1),C=g.replace(/%(\d)/g,function(D,O){return l.assert(O<T.length,"Message reference must be in range"),T[O]}),w=this.lastMarker.index,_=this.lastMarker.line,E=this.lastMarker.column+1;throw this.errorHandler.createError(w,_,E,C)},m.prototype.tolerateError=function(g){for(var d=[],S=1;S<arguments.length;S++)d[S-1]=arguments[S];var T=Array.prototype.slice.call(arguments,1),C=g.replace(/%(\d)/g,function(D,O){return l.assert(O<T.length,"Message reference must be in range"),T[O]}),w=this.lastMarker.index,_=this.scanner.lineNumber,E=this.lastMarker.column+1;this.errorHandler.tolerateError(w,_,E,C)},m.prototype.unexpectedTokenError=function(g,d){var S,T=d||c.Messages.UnexpectedToken;if(g?(d||(T=g.type===2?c.Messages.UnexpectedEOS:g.type===3?c.Messages.UnexpectedIdentifier:g.type===6?c.Messages.UnexpectedNumber:g.type===8?c.Messages.UnexpectedString:g.type===10?c.Messages.UnexpectedTemplate:c.Messages.UnexpectedToken,g.type===4&&(this.scanner.isFutureReservedWord(g.value)?T=c.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(g.value)&&(T=c.Messages.StrictReservedWord))),S=g.value):S="ILLEGAL",T=T.replace("%0",S),g&&typeof g.lineNumber=="number"){var C=g.start,w=g.lineNumber,_=this.lastMarker.index-this.lastMarker.column,E=g.start-_+1;return this.errorHandler.createError(C,w,E,T)}return C=this.lastMarker.index,w=this.lastMarker.line,E=this.lastMarker.column+1,this.errorHandler.createError(C,w,E,T)},m.prototype.throwUnexpectedToken=function(g,d){throw this.unexpectedTokenError(g,d)},m.prototype.tolerateUnexpectedToken=function(g,d){this.errorHandler.tolerate(this.unexpectedTokenError(g,d))},m.prototype.collectComments=function(){if(this.config.comment){var g=this.scanner.scanComments();if(g.length>0&&this.delegate)for(var d=0;d<g.length;++d){var S=g[d],T=void 0;T={type:S.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(S.slice[0],S.slice[1])},this.config.range&&(T.range=S.range),this.config.loc&&(T.loc=S.loc);var C={start:{line:S.loc.start.line,column:S.loc.start.column,offset:S.range[0]},end:{line:S.loc.end.line,column:S.loc.end.column,offset:S.range[1]}};this.delegate(T,C)}}else this.scanner.scanComments()},m.prototype.getTokenRaw=function(g){return this.scanner.source.slice(g.start,g.end)},m.prototype.convertToken=function(g){var d={type:y.TokenName[g.type],value:this.getTokenRaw(g)};if(this.config.range&&(d.range=[g.start,g.end]),this.config.loc&&(d.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),g.type===9){var S=g.pattern,T=g.flags;d.regex={pattern:S,flags:T}}return d},m.prototype.nextToken=function(){var g=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var d=this.scanner.lex();return this.hasLineTerminator=g.lineNumber!==d.lineNumber,d&&this.context.strict&&d.type===3&&this.scanner.isStrictModeReservedWord(d.value)&&(d.type=4),this.lookahead=d,this.config.tokens&&d.type!==2&&this.tokens.push(this.convertToken(d)),g},m.prototype.nextRegexToken=function(){this.collectComments();var g=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(g))),this.lookahead=g,this.nextToken(),g},m.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},m.prototype.startNode=function(g,d){d===void 0&&(d=0);var S=g.start-g.lineStart,T=g.lineNumber;return S<0&&(S+=d,T--),{index:g.start,line:T,column:S}},m.prototype.finalize=function(g,d){if(this.config.range&&(d.range=[g.index,this.lastMarker.index]),this.config.loc&&(d.loc={start:{line:g.line,column:g.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(d.loc.source=this.config.source)),this.delegate){var S={start:{line:g.line,column:g.column,offset:g.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(d,S)}return d},m.prototype.expect=function(g){var d=this.nextToken();d.type===7&&d.value===g||this.throwUnexpectedToken(d)},m.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var g=this.lookahead;g.type===7&&g.value===","?this.nextToken():g.type===7&&g.value===";"?(this.nextToken(),this.tolerateUnexpectedToken(g)):this.tolerateUnexpectedToken(g,c.Messages.UnexpectedToken)}else this.expect(",")},m.prototype.expectKeyword=function(g){var d=this.nextToken();d.type===4&&d.value===g||this.throwUnexpectedToken(d)},m.prototype.match=function(g){return this.lookahead.type===7&&this.lookahead.value===g},m.prototype.matchKeyword=function(g){return this.lookahead.type===4&&this.lookahead.value===g},m.prototype.matchContextualKeyword=function(g){return this.lookahead.type===3&&this.lookahead.value===g},m.prototype.matchAssign=function(){if(this.lookahead.type!==7)return!1;var g=this.lookahead.value;return g==="="||g==="*="||g==="**="||g==="/="||g==="%="||g==="+="||g==="-="||g==="<<="||g===">>="||g===">>>="||g==="&="||g==="^="||g==="|="},m.prototype.isolateCoverGrammar=function(g){var d=this.context.isBindingElement,S=this.context.isAssignmentTarget,T=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var C=g.call(this);return this.context.firstCoverInitializedNameError!==null&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=d,this.context.isAssignmentTarget=S,this.context.firstCoverInitializedNameError=T,C},m.prototype.inheritCoverGrammar=function(g){var d=this.context.isBindingElement,S=this.context.isAssignmentTarget,T=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var C=g.call(this);return this.context.isBindingElement=this.context.isBindingElement&&d,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&S,this.context.firstCoverInitializedNameError=T||this.context.firstCoverInitializedNameError,C},m.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type===2||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},m.prototype.parsePrimaryExpression=function(){var g,d,S,T=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&this.lookahead.value==="await"&&this.tolerateUnexpectedToken(this.lookahead),g=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(T,new f.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,c.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,d=this.nextToken(),S=this.getTokenRaw(d),g=this.finalize(T,new f.Literal(d.value,S));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,d=this.nextToken(),S=this.getTokenRaw(d),g=this.finalize(T,new f.Literal(d.value==="true",S));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,d=this.nextToken(),S=this.getTokenRaw(d),g=this.finalize(T,new f.Literal(null,S));break;case 10:g=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,g=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":g=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":g=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,d=this.nextRegexToken(),S=this.getTokenRaw(d),g=this.finalize(T,new f.RegexLiteral(d.regex,S,d.pattern,d.flags));break;default:g=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?g=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?g=this.finalize(T,new f.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?g=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),g=this.finalize(T,new f.ThisExpression)):g=this.matchKeyword("class")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:g=this.throwUnexpectedToken(this.nextToken())}return g},m.prototype.parseSpreadElement=function(){var g=this.createNode();this.expect("...");var d=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(g,new f.SpreadElement(d))},m.prototype.parseArrayInitializer=function(){var g=this.createNode(),d=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),d.push(null);else if(this.match("...")){var S=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),d.push(S)}else d.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(g,new f.ArrayExpression(d))},m.prototype.parsePropertyMethod=function(g){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var d=this.context.strict,S=this.context.allowStrictDirective;this.context.allowStrictDirective=g.simple;var T=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&g.firstRestricted&&this.tolerateUnexpectedToken(g.firstRestricted,g.message),this.context.strict&&g.stricted&&this.tolerateUnexpectedToken(g.stricted,g.message),this.context.strict=d,this.context.allowStrictDirective=S,T},m.prototype.parsePropertyMethodFunction=function(){var g=this.createNode(),d=this.context.allowYield;this.context.allowYield=!0;var S=this.parseFormalParameters(),T=this.parsePropertyMethod(S);return this.context.allowYield=d,this.finalize(g,new f.FunctionExpression(null,S.params,T,!1))},m.prototype.parsePropertyMethodAsyncFunction=function(){var g=this.createNode(),d=this.context.allowYield,S=this.context.await;this.context.allowYield=!1,this.context.await=!0;var T=this.parseFormalParameters(),C=this.parsePropertyMethod(T);return this.context.allowYield=d,this.context.await=S,this.finalize(g,new f.AsyncFunctionExpression(null,T.params,C))},m.prototype.parseObjectPropertyKey=function(){var g,d=this.createNode(),S=this.nextToken();switch(S.type){case 8:case 6:this.context.strict&&S.octal&&this.tolerateUnexpectedToken(S,c.Messages.StrictOctalLiteral);var T=this.getTokenRaw(S);g=this.finalize(d,new f.Literal(S.value,T));break;case 3:case 1:case 5:case 4:g=this.finalize(d,new f.Identifier(S.value));break;case 7:S.value==="["?(g=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):g=this.throwUnexpectedToken(S);break;default:g=this.throwUnexpectedToken(S)}return g},m.prototype.isPropertyKey=function(g,d){return g.type===v.Syntax.Identifier&&g.name===d||g.type===v.Syntax.Literal&&g.value===d},m.prototype.parseObjectProperty=function(g){var d,S=this.createNode(),T=this.lookahead,C=null,w=null,_=!1,E=!1,D=!1,O=!1;if(T.type===3){var N=T.value;this.nextToken(),_=this.match("["),C=(O=!(this.hasLineTerminator||N!=="async"||this.match(":")||this.match("(")||this.match("*")||this.match(",")))?this.parseObjectPropertyKey():this.finalize(S,new f.Identifier(N))}else this.match("*")?this.nextToken():(_=this.match("["),C=this.parseObjectPropertyKey());var R=this.qualifiedPropertyName(this.lookahead);if(T.type===3&&!O&&T.value==="get"&&R)d="get",_=this.match("["),C=this.parseObjectPropertyKey(),this.context.allowYield=!1,w=this.parseGetterMethod();else if(T.type===3&&!O&&T.value==="set"&&R)d="set",_=this.match("["),C=this.parseObjectPropertyKey(),w=this.parseSetterMethod();else if(T.type===7&&T.value==="*"&&R)d="init",_=this.match("["),C=this.parseObjectPropertyKey(),w=this.parseGeneratorMethod(),E=!0;else if(C||this.throwUnexpectedToken(this.lookahead),d="init",this.match(":")&&!O)!_&&this.isPropertyKey(C,"__proto__")&&(g.value&&this.tolerateError(c.Messages.DuplicateProtoProperty),g.value=!0),this.nextToken(),w=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))w=O?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),E=!0;else if(T.type===3)if(N=this.finalize(S,new f.Identifier(T.value)),this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),D=!0;var M=this.isolateCoverGrammar(this.parseAssignmentExpression);w=this.finalize(S,new f.AssignmentPattern(N,M))}else D=!0,w=N;else this.throwUnexpectedToken(this.nextToken());return this.finalize(S,new f.Property(d,C,_,w,E,D))},m.prototype.parseObjectInitializer=function(){var g=this.createNode();this.expect("{");for(var d=[],S={value:!1};!this.match("}");)d.push(this.parseObjectProperty(S)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(g,new f.ObjectExpression(d))},m.prototype.parseTemplateHead=function(){l.assert(this.lookahead.head,"Template literal must start with a template head");var g=this.createNode(),d=this.nextToken(),S=d.value,T=d.cooked;return this.finalize(g,new f.TemplateElement({raw:S,cooked:T},d.tail))},m.prototype.parseTemplateElement=function(){this.lookahead.type!==10&&this.throwUnexpectedToken();var g=this.createNode(),d=this.nextToken(),S=d.value,T=d.cooked;return this.finalize(g,new f.TemplateElement({raw:S,cooked:T},d.tail))},m.prototype.parseTemplateLiteral=function(){var g=this.createNode(),d=[],S=[],T=this.parseTemplateHead();for(S.push(T);!T.tail;)d.push(this.parseExpression()),T=this.parseTemplateElement(),S.push(T);return this.finalize(g,new f.TemplateLiteral(S,d))},m.prototype.reinterpretExpressionAsPattern=function(g){switch(g.type){case v.Syntax.Identifier:case v.Syntax.MemberExpression:case v.Syntax.RestElement:case v.Syntax.AssignmentPattern:break;case v.Syntax.SpreadElement:g.type=v.Syntax.RestElement,this.reinterpretExpressionAsPattern(g.argument);break;case v.Syntax.ArrayExpression:g.type=v.Syntax.ArrayPattern;for(var d=0;d<g.elements.length;d++)g.elements[d]!==null&&this.reinterpretExpressionAsPattern(g.elements[d]);break;case v.Syntax.ObjectExpression:for(g.type=v.Syntax.ObjectPattern,d=0;d<g.properties.length;d++)this.reinterpretExpressionAsPattern(g.properties[d].value);break;case v.Syntax.AssignmentExpression:g.type=v.Syntax.AssignmentPattern,delete g.operator,this.reinterpretExpressionAsPattern(g.left)}},m.prototype.parseGroupExpression=function(){var g;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),g={type:"ArrowParameterPlaceHolder",params:[],async:!1};else{var d=this.lookahead,S=[];if(this.match("..."))g=this.parseRestElement(S),this.expect(")"),this.match("=>")||this.expect("=>"),g={type:"ArrowParameterPlaceHolder",params:[g],async:!1};else{var T=!1;if(this.context.isBindingElement=!0,g=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var C=[];for(this.context.isAssignmentTarget=!1,C.push(g);this.lookahead.type!==2&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var w=0;w<C.length;w++)this.reinterpretExpressionAsPattern(C[w]);T=!0,g={type:"ArrowParameterPlaceHolder",params:C,async:!1}}else if(this.match("...")){for(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),C.push(this.parseRestElement(S)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1,w=0;w<C.length;w++)this.reinterpretExpressionAsPattern(C[w]);T=!0,g={type:"ArrowParameterPlaceHolder",params:C,async:!1}}else C.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(T)break}T||(g=this.finalize(this.startNode(d),new f.SequenceExpression(C)))}if(!T){if(this.expect(")"),this.match("=>")&&(g.type===v.Syntax.Identifier&&g.name==="yield"&&(T=!0,g={type:"ArrowParameterPlaceHolder",params:[g],async:!1}),!T)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),g.type===v.Syntax.SequenceExpression)for(w=0;w<g.expressions.length;w++)this.reinterpretExpressionAsPattern(g.expressions[w]);else this.reinterpretExpressionAsPattern(g);g={type:"ArrowParameterPlaceHolder",params:g.type===v.Syntax.SequenceExpression?g.expressions:[g],async:!1}}this.context.isBindingElement=!1}}}return g},m.prototype.parseArguments=function(){this.expect("(");var g=[];if(!this.match(")"))for(;;){var d=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(g.push(d),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),g},m.prototype.isIdentifierName=function(g){return g.type===3||g.type===4||g.type===1||g.type===5},m.prototype.parseIdentifierName=function(){var g=this.createNode(),d=this.nextToken();return this.isIdentifierName(d)||this.throwUnexpectedToken(d),this.finalize(g,new f.Identifier(d.value))},m.prototype.parseNewExpression=function(){var g,d=this.createNode(),S=this.parseIdentifierName();if(l.assert(S.name==="new","New expression must start with `new`"),this.match("."))if(this.nextToken(),this.lookahead.type===3&&this.context.inFunctionBody&&this.lookahead.value==="target"){var T=this.parseIdentifierName();g=new f.MetaProperty(S,T)}else this.throwUnexpectedToken(this.lookahead);else{var C=this.isolateCoverGrammar(this.parseLeftHandSideExpression),w=this.match("(")?this.parseArguments():[];g=new f.NewExpression(C,w),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(d,g)},m.prototype.parseAsyncArgument=function(){var g=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,g},m.prototype.parseAsyncArguments=function(){this.expect("(");var g=[];if(!this.match(")"))for(;;){var d=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(g.push(d),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),g},m.prototype.parseLeftHandSideExpressionAllowCall=function(){var g,d=this.lookahead,S=this.matchContextualKeyword("async"),T=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(g=this.createNode(),this.nextToken(),g=this.finalize(g,new f.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):g=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var C=this.parseIdentifierName();g=this.finalize(this.startNode(d),new f.StaticMemberExpression(g,C))}else if(this.match("(")){var w=S&&d.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var _=w?this.parseAsyncArguments():this.parseArguments();if(g=this.finalize(this.startNode(d),new f.CallExpression(g,_)),w&&this.match("=>")){for(var E=0;E<_.length;++E)this.reinterpretExpressionAsPattern(_[E]);g={type:"ArrowParameterPlaceHolder",params:_,async:!0}}}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),C=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),g=this.finalize(this.startNode(d),new f.ComputedMemberExpression(g,C));else{if(this.lookahead.type!==10||!this.lookahead.head)break;var D=this.parseTemplateLiteral();g=this.finalize(this.startNode(d),new f.TaggedTemplateExpression(g,D))}return this.context.allowIn=T,g},m.prototype.parseSuper=function(){var g=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(g,new f.Super)},m.prototype.parseLeftHandSideExpression=function(){l.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var g=this.startNode(this.lookahead),d=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var S=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),d=this.finalize(g,new f.ComputedMemberExpression(d,S))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),S=this.parseIdentifierName(),d=this.finalize(g,new f.StaticMemberExpression(d,S));else{if(this.lookahead.type!==10||!this.lookahead.head)break;var T=this.parseTemplateLiteral();d=this.finalize(g,new f.TaggedTemplateExpression(d,T))}return d},m.prototype.parseUpdateExpression=function(){var g,d=this.lookahead;if(this.match("++")||this.match("--")){var S=this.startNode(d),T=this.nextToken();g=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&g.type===v.Syntax.Identifier&&this.scanner.isRestrictedWord(g.name)&&this.tolerateError(c.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(c.Messages.InvalidLHSInAssignment);var C=!0;g=this.finalize(S,new f.UpdateExpression(T.value,g,C)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(g=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&this.lookahead.type===7&&(this.match("++")||this.match("--"))){this.context.strict&&g.type===v.Syntax.Identifier&&this.scanner.isRestrictedWord(g.name)&&this.tolerateError(c.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(c.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var w=this.nextToken().value;C=!1,g=this.finalize(this.startNode(d),new f.UpdateExpression(w,g,C))}return g},m.prototype.parseAwaitExpression=function(){var g=this.createNode();this.nextToken();var d=this.parseUnaryExpression();return this.finalize(g,new f.AwaitExpression(d))},m.prototype.parseUnaryExpression=function(){var g;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var d=this.startNode(this.lookahead),S=this.nextToken();g=this.inheritCoverGrammar(this.parseUnaryExpression),g=this.finalize(d,new f.UnaryExpression(S.value,g)),this.context.strict&&g.operator==="delete"&&g.argument.type===v.Syntax.Identifier&&this.tolerateError(c.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else g=this.context.await&&this.matchContextualKeyword("await")?this.parseAwaitExpression():this.parseUpdateExpression();return g},m.prototype.parseExponentiationExpression=function(){var g=this.lookahead,d=this.inheritCoverGrammar(this.parseUnaryExpression);if(d.type!==v.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var S=d,T=this.isolateCoverGrammar(this.parseExponentiationExpression);d=this.finalize(this.startNode(g),new f.BinaryExpression("**",S,T))}return d},m.prototype.binaryPrecedence=function(g){var d=g.value;return g.type===7?this.operatorPrecedence[d]||0:g.type===4&&(d==="instanceof"||this.context.allowIn&&d==="in")?7:0},m.prototype.parseBinaryExpression=function(){var g=this.lookahead,d=this.inheritCoverGrammar(this.parseExponentiationExpression),S=this.lookahead,T=this.binaryPrecedence(S);if(T>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var C=[g,this.lookahead],w=d,_=this.isolateCoverGrammar(this.parseExponentiationExpression),E=[w,S.value,_],D=[T];!((T=this.binaryPrecedence(this.lookahead))<=0);){for(;E.length>2&&T<=D[D.length-1];){_=E.pop();var O=E.pop();D.pop(),w=E.pop(),C.pop();var N=this.startNode(C[C.length-1]);E.push(this.finalize(N,new f.BinaryExpression(O,w,_)))}E.push(this.nextToken().value),D.push(T),C.push(this.lookahead),E.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var R=E.length-1;d=E[R];for(var M=C.pop();R>1;){var A=C.pop(),G=M&&M.lineStart;N=this.startNode(A,G),O=E[R-1],d=this.finalize(N,new f.BinaryExpression(O,E[R-2],d)),R-=2,M=A}}return d},m.prototype.parseConditionalExpression=function(){var g=this.lookahead,d=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var S=this.context.allowIn;this.context.allowIn=!0;var T=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=S,this.expect(":");var C=this.isolateCoverGrammar(this.parseAssignmentExpression);d=this.finalize(this.startNode(g),new f.ConditionalExpression(d,T,C)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return d},m.prototype.checkPatternParam=function(g,d){switch(d.type){case v.Syntax.Identifier:this.validateParam(g,d,d.name);break;case v.Syntax.RestElement:this.checkPatternParam(g,d.argument);break;case v.Syntax.AssignmentPattern:this.checkPatternParam(g,d.left);break;case v.Syntax.ArrayPattern:for(var S=0;S<d.elements.length;S++)d.elements[S]!==null&&this.checkPatternParam(g,d.elements[S]);break;case v.Syntax.ObjectPattern:for(S=0;S<d.properties.length;S++)this.checkPatternParam(g,d.properties[S].value)}g.simple=g.simple&&d instanceof f.Identifier},m.prototype.reinterpretAsCoverFormalsList=function(g){var d,S=[g],T=!1;switch(g.type){case v.Syntax.Identifier:break;case"ArrowParameterPlaceHolder":S=g.params,T=g.async;break;default:return null}d={simple:!0,paramSet:{}};for(var C=0;C<S.length;++C)(w=S[C]).type===v.Syntax.AssignmentPattern?w.right.type===v.Syntax.YieldExpression&&(w.right.argument&&this.throwUnexpectedToken(this.lookahead),w.right.type=v.Syntax.Identifier,w.right.name="yield",delete w.right.argument,delete w.right.delegate):T&&w.type===v.Syntax.Identifier&&w.name==="await"&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(d,w),S[C]=w;if(this.context.strict||!this.context.allowYield)for(C=0;C<S.length;++C){var w;(w=S[C]).type===v.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(d.message===c.Messages.StrictParamDupe){var _=this.context.strict?d.stricted:d.firstRestricted;this.throwUnexpectedToken(_,d.message)}return{simple:d.simple,params:S,stricted:d.stricted,firstRestricted:d.firstRestricted,message:d.message}},m.prototype.parseAssignmentExpression=function(){var g;if(!this.context.allowYield&&this.matchKeyword("yield"))g=this.parseYieldExpression();else{var d=this.lookahead,S=d;if(g=this.parseConditionalExpression(),S.type===3&&S.lineNumber===this.lookahead.lineNumber&&S.value==="async"&&(this.lookahead.type===3||this.matchKeyword("yield"))){var T=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(T),g={type:"ArrowParameterPlaceHolder",params:[T],async:!0}}if(g.type==="ArrowParameterPlaceHolder"||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var C=g.async,w=this.reinterpretAsCoverFormalsList(g);if(w){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var _=this.context.strict,E=this.context.allowStrictDirective;this.context.allowStrictDirective=w.simple;var D=this.context.allowYield,O=this.context.await;this.context.allowYield=!0,this.context.await=C;var N=this.startNode(d);this.expect("=>");var R=void 0;if(this.match("{")){var M=this.context.allowIn;this.context.allowIn=!0,R=this.parseFunctionSourceElements(),this.context.allowIn=M}else R=this.isolateCoverGrammar(this.parseAssignmentExpression);var A=R.type!==v.Syntax.BlockStatement;this.context.strict&&w.firstRestricted&&this.throwUnexpectedToken(w.firstRestricted,w.message),this.context.strict&&w.stricted&&this.tolerateUnexpectedToken(w.stricted,w.message),g=C?this.finalize(N,new f.AsyncArrowFunctionExpression(w.params,R,A)):this.finalize(N,new f.ArrowFunctionExpression(w.params,R,A)),this.context.strict=_,this.context.allowStrictDirective=E,this.context.allowYield=D,this.context.await=O}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(c.Messages.InvalidLHSInAssignment),this.context.strict&&g.type===v.Syntax.Identifier){var G=g;this.scanner.isRestrictedWord(G.name)&&this.tolerateUnexpectedToken(S,c.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(G.name)&&this.tolerateUnexpectedToken(S,c.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(g):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);var j=(S=this.nextToken()).value,k=this.isolateCoverGrammar(this.parseAssignmentExpression);g=this.finalize(this.startNode(d),new f.AssignmentExpression(j,g,k)),this.context.firstCoverInitializedNameError=null}}return g},m.prototype.parseExpression=function(){var g=this.lookahead,d=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var S=[];for(S.push(d);this.lookahead.type!==2&&this.match(",");)this.nextToken(),S.push(this.isolateCoverGrammar(this.parseAssignmentExpression));d=this.finalize(this.startNode(g),new f.SequenceExpression(S))}return d},m.prototype.parseStatementListItem=function(){var g;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,this.lookahead.type===4)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,c.Messages.IllegalExportDeclaration),g=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,c.Messages.IllegalImportDeclaration),g=this.parseImportDeclaration();break;case"const":g=this.parseLexicalDeclaration({inFor:!1});break;case"function":g=this.parseFunctionDeclaration();break;case"class":g=this.parseClassDeclaration();break;case"let":g=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:g=this.parseStatement()}else g=this.parseStatement();return g},m.prototype.parseBlock=function(){var g=this.createNode();this.expect("{");for(var d=[];!this.match("}");)d.push(this.parseStatementListItem());return this.expect("}"),this.finalize(g,new f.BlockStatement(d))},m.prototype.parseLexicalBinding=function(g,d){var S=this.createNode(),T=this.parsePattern([],g);this.context.strict&&T.type===v.Syntax.Identifier&&this.scanner.isRestrictedWord(T.name)&&this.tolerateError(c.Messages.StrictVarName);var C=null;return g==="const"?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.match("=")?(this.nextToken(),C=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(c.Messages.DeclarationMissingInitializer,"const")):(!d.inFor&&T.type!==v.Syntax.Identifier||this.match("="))&&(this.expect("="),C=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(S,new f.VariableDeclarator(T,C))},m.prototype.parseBindingList=function(g,d){for(var S=[this.parseLexicalBinding(g,d)];this.match(",");)this.nextToken(),S.push(this.parseLexicalBinding(g,d));return S},m.prototype.isLexicalDeclaration=function(){var g=this.scanner.saveState();this.scanner.scanComments();var d=this.scanner.lex();return this.scanner.restoreState(g),d.type===3||d.type===7&&d.value==="["||d.type===7&&d.value==="{"||d.type===4&&d.value==="let"||d.type===4&&d.value==="yield"},m.prototype.parseLexicalDeclaration=function(g){var d=this.createNode(),S=this.nextToken().value;l.assert(S==="let"||S==="const","Lexical declaration must be either let or const");var T=this.parseBindingList(S,g);return this.consumeSemicolon(),this.finalize(d,new f.VariableDeclaration(T,S))},m.prototype.parseBindingRestElement=function(g,d){var S=this.createNode();this.expect("...");var T=this.parsePattern(g,d);return this.finalize(S,new f.RestElement(T))},m.prototype.parseArrayPattern=function(g,d){var S=this.createNode();this.expect("[");for(var T=[];!this.match("]");)if(this.match(","))this.nextToken(),T.push(null);else{if(this.match("...")){T.push(this.parseBindingRestElement(g,d));break}T.push(this.parsePatternWithDefault(g,d)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(S,new f.ArrayPattern(T))},m.prototype.parsePropertyPattern=function(g,d){var S,T,C=this.createNode(),w=!1,_=!1;if(this.lookahead.type===3){var E=this.lookahead;S=this.parseVariableIdentifier();var D=this.finalize(C,new f.Identifier(E.value));if(this.match("=")){g.push(E),_=!0,this.nextToken();var O=this.parseAssignmentExpression();T=this.finalize(this.startNode(E),new f.AssignmentPattern(D,O))}else this.match(":")?(this.expect(":"),T=this.parsePatternWithDefault(g,d)):(g.push(E),_=!0,T=D)}else w=this.match("["),S=this.parseObjectPropertyKey(),this.expect(":"),T=this.parsePatternWithDefault(g,d);return this.finalize(C,new f.Property("init",S,w,T,!1,_))},m.prototype.parseObjectPattern=function(g,d){var S=this.createNode(),T=[];for(this.expect("{");!this.match("}");)T.push(this.parsePropertyPattern(g,d)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(S,new f.ObjectPattern(T))},m.prototype.parsePattern=function(g,d){var S;return this.match("[")?S=this.parseArrayPattern(g,d):this.match("{")?S=this.parseObjectPattern(g,d):(!this.matchKeyword("let")||d!=="const"&&d!=="let"||this.tolerateUnexpectedToken(this.lookahead,c.Messages.LetInLexicalBinding),g.push(this.lookahead),S=this.parseVariableIdentifier(d)),S},m.prototype.parsePatternWithDefault=function(g,d){var S=this.lookahead,T=this.parsePattern(g,d);if(this.match("=")){this.nextToken();var C=this.context.allowYield;this.context.allowYield=!0;var w=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=C,T=this.finalize(this.startNode(S),new f.AssignmentPattern(T,w))}return T},m.prototype.parseVariableIdentifier=function(g){var d=this.createNode(),S=this.nextToken();return S.type===4&&S.value==="yield"?this.context.strict?this.tolerateUnexpectedToken(S,c.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(S):S.type!==3?this.context.strict&&S.type===4&&this.scanner.isStrictModeReservedWord(S.value)?this.tolerateUnexpectedToken(S,c.Messages.StrictReservedWord):(this.context.strict||S.value!=="let"||g!=="var")&&this.throwUnexpectedToken(S):(this.context.isModule||this.context.await)&&S.type===3&&S.value==="await"&&this.tolerateUnexpectedToken(S),this.finalize(d,new f.Identifier(S.value))},m.prototype.parseVariableDeclaration=function(g){var d=this.createNode(),S=this.parsePattern([],"var");this.context.strict&&S.type===v.Syntax.Identifier&&this.scanner.isRestrictedWord(S.name)&&this.tolerateError(c.Messages.StrictVarName);var T=null;return this.match("=")?(this.nextToken(),T=this.isolateCoverGrammar(this.parseAssignmentExpression)):S.type===v.Syntax.Identifier||g.inFor||this.expect("="),this.finalize(d,new f.VariableDeclarator(S,T))},m.prototype.parseVariableDeclarationList=function(g){var d={inFor:g.inFor},S=[];for(S.push(this.parseVariableDeclaration(d));this.match(",");)this.nextToken(),S.push(this.parseVariableDeclaration(d));return S},m.prototype.parseVariableStatement=function(){var g=this.createNode();this.expectKeyword("var");var d=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(g,new f.VariableDeclaration(d,"var"))},m.prototype.parseEmptyStatement=function(){var g=this.createNode();return this.expect(";"),this.finalize(g,new f.EmptyStatement)},m.prototype.parseExpressionStatement=function(){var g=this.createNode(),d=this.parseExpression();return this.consumeSemicolon(),this.finalize(g,new f.ExpressionStatement(d))},m.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(c.Messages.StrictFunction),this.parseStatement()},m.prototype.parseIfStatement=function(){var g,d=this.createNode(),S=null;this.expectKeyword("if"),this.expect("(");var T=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),g=this.finalize(this.createNode(),new f.EmptyStatement)):(this.expect(")"),g=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),S=this.parseIfClause())),this.finalize(d,new f.IfStatement(T,g,S))},m.prototype.parseDoWhileStatement=function(){var g=this.createNode();this.expectKeyword("do");var d=this.context.inIteration;this.context.inIteration=!0;var S=this.parseStatement();this.context.inIteration=d,this.expectKeyword("while"),this.expect("(");var T=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(g,new f.DoWhileStatement(S,T))},m.prototype.parseWhileStatement=function(){var g,d=this.createNode();this.expectKeyword("while"),this.expect("(");var S=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),g=this.finalize(this.createNode(),new f.EmptyStatement);else{this.expect(")");var T=this.context.inIteration;this.context.inIteration=!0,g=this.parseStatement(),this.context.inIteration=T}return this.finalize(d,new f.WhileStatement(S,g))},m.prototype.parseForStatement=function(){var g,d,S,T=null,C=null,w=null,_=!0,E=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){T=this.createNode(),this.nextToken();var D=this.context.allowIn;this.context.allowIn=!1;var O=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=D,O.length===1&&this.matchKeyword("in")){var N=O[0];N.init&&(N.id.type===v.Syntax.ArrayPattern||N.id.type===v.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(c.Messages.ForInOfLoopInitializer,"for-in"),T=this.finalize(T,new f.VariableDeclaration(O,"var")),this.nextToken(),g=T,d=this.parseExpression(),T=null}else O.length===1&&O[0].init===null&&this.matchContextualKeyword("of")?(T=this.finalize(T,new f.VariableDeclaration(O,"var")),this.nextToken(),g=T,d=this.parseAssignmentExpression(),T=null,_=!1):(T=this.finalize(T,new f.VariableDeclaration(O,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){T=this.createNode();var R=this.nextToken().value;this.context.strict||this.lookahead.value!=="in"?(D=this.context.allowIn,this.context.allowIn=!1,O=this.parseBindingList(R,{inFor:!0}),this.context.allowIn=D,O.length===1&&O[0].init===null&&this.matchKeyword("in")?(T=this.finalize(T,new f.VariableDeclaration(O,R)),this.nextToken(),g=T,d=this.parseExpression(),T=null):O.length===1&&O[0].init===null&&this.matchContextualKeyword("of")?(T=this.finalize(T,new f.VariableDeclaration(O,R)),this.nextToken(),g=T,d=this.parseAssignmentExpression(),T=null,_=!1):(this.consumeSemicolon(),T=this.finalize(T,new f.VariableDeclaration(O,R)))):(T=this.finalize(T,new f.Identifier(R)),this.nextToken(),g=T,d=this.parseExpression(),T=null)}else{var M=this.lookahead;if(D=this.context.allowIn,this.context.allowIn=!1,T=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=D,this.matchKeyword("in"))this.context.isAssignmentTarget&&T.type!==v.Syntax.AssignmentExpression||this.tolerateError(c.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(T),g=T,d=this.parseExpression(),T=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&T.type!==v.Syntax.AssignmentExpression||this.tolerateError(c.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(T),g=T,d=this.parseAssignmentExpression(),T=null,_=!1;else{if(this.match(",")){for(var A=[T];this.match(",");)this.nextToken(),A.push(this.isolateCoverGrammar(this.parseAssignmentExpression));T=this.finalize(this.startNode(M),new f.SequenceExpression(A))}this.expect(";")}}if(g===void 0&&(this.match(";")||(C=this.parseExpression()),this.expect(";"),this.match(")")||(w=this.parseExpression())),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),S=this.finalize(this.createNode(),new f.EmptyStatement);else{this.expect(")");var G=this.context.inIteration;this.context.inIteration=!0,S=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=G}return g===void 0?this.finalize(E,new f.ForStatement(T,C,w,S)):_?this.finalize(E,new f.ForInStatement(g,d,S)):this.finalize(E,new f.ForOfStatement(g,d,S))},m.prototype.parseContinueStatement=function(){var g=this.createNode();this.expectKeyword("continue");var d=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var S=this.parseVariableIdentifier();d=S;var T="$"+S.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,T)||this.throwError(c.Messages.UnknownLabel,S.name)}return this.consumeSemicolon(),d!==null||this.context.inIteration||this.throwError(c.Messages.IllegalContinue),this.finalize(g,new f.ContinueStatement(d))},m.prototype.parseBreakStatement=function(){var g=this.createNode();this.expectKeyword("break");var d=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var S=this.parseVariableIdentifier(),T="$"+S.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,T)||this.throwError(c.Messages.UnknownLabel,S.name),d=S}return this.consumeSemicolon(),d!==null||this.context.inIteration||this.context.inSwitch||this.throwError(c.Messages.IllegalBreak),this.finalize(g,new f.BreakStatement(d))},m.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(c.Messages.IllegalReturn);var g=this.createNode();this.expectKeyword("return");var d=(this.match(";")||this.match("}")||this.hasLineTerminator||this.lookahead.type===2)&&this.lookahead.type!==8&&this.lookahead.type!==10?null:this.parseExpression();return this.consumeSemicolon(),this.finalize(g,new f.ReturnStatement(d))},m.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(c.Messages.StrictModeWith);var g,d=this.createNode();this.expectKeyword("with"),this.expect("(");var S=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),g=this.finalize(this.createNode(),new f.EmptyStatement)):(this.expect(")"),g=this.parseStatement()),this.finalize(d,new f.WithStatement(S,g))},m.prototype.parseSwitchCase=function(){var g,d=this.createNode();this.matchKeyword("default")?(this.nextToken(),g=null):(this.expectKeyword("case"),g=this.parseExpression()),this.expect(":");for(var S=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)S.push(this.parseStatementListItem());return this.finalize(d,new f.SwitchCase(g,S))},m.prototype.parseSwitchStatement=function(){var g=this.createNode();this.expectKeyword("switch"),this.expect("(");var d=this.parseExpression();this.expect(")");var S=this.context.inSwitch;this.context.inSwitch=!0;var T=[],C=!1;for(this.expect("{");!this.match("}");){var w=this.parseSwitchCase();w.test===null&&(C&&this.throwError(c.Messages.MultipleDefaultsInSwitch),C=!0),T.push(w)}return this.expect("}"),this.context.inSwitch=S,this.finalize(g,new f.SwitchStatement(d,T))},m.prototype.parseLabelledStatement=function(){var g,d=this.createNode(),S=this.parseExpression();if(S.type===v.Syntax.Identifier&&this.match(":")){this.nextToken();var T=S,C="$"+T.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,C)&&this.throwError(c.Messages.Redeclaration,"Label",T.name),this.context.labelSet[C]=!0;var w=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),w=this.parseClassDeclaration();else if(this.matchKeyword("function")){var _=this.lookahead,E=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(_,c.Messages.StrictFunction):E.generator&&this.tolerateUnexpectedToken(_,c.Messages.GeneratorInLegacyContext),w=E}else w=this.parseStatement();delete this.context.labelSet[C],g=new f.LabeledStatement(T,w)}else this.consumeSemicolon(),g=new f.ExpressionStatement(S);return this.finalize(d,g)},m.prototype.parseThrowStatement=function(){var g=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(c.Messages.NewlineAfterThrow);var d=this.parseExpression();return this.consumeSemicolon(),this.finalize(g,new f.ThrowStatement(d))},m.prototype.parseCatchClause=function(){var g=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var d=[],S=this.parsePattern(d),T={},C=0;C<d.length;C++){var w="$"+d[C].value;Object.prototype.hasOwnProperty.call(T,w)&&this.tolerateError(c.Messages.DuplicateBinding,d[C].value),T[w]=!0}this.context.strict&&S.type===v.Syntax.Identifier&&this.scanner.isRestrictedWord(S.name)&&this.tolerateError(c.Messages.StrictCatchVariable),this.expect(")");var _=this.parseBlock();return this.finalize(g,new f.CatchClause(S,_))},m.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},m.prototype.parseTryStatement=function(){var g=this.createNode();this.expectKeyword("try");var d=this.parseBlock(),S=this.matchKeyword("catch")?this.parseCatchClause():null,T=this.matchKeyword("finally")?this.parseFinallyClause():null;return S||T||this.throwError(c.Messages.NoCatchOrFinally),this.finalize(g,new f.TryStatement(d,S,T))},m.prototype.parseDebuggerStatement=function(){var g=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(g,new f.DebuggerStatement)},m.prototype.parseStatement=function(){var g;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:g=this.parseExpressionStatement();break;case 7:var d=this.lookahead.value;g=d==="{"?this.parseBlock():d==="("?this.parseExpressionStatement():d===";"?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:g=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":g=this.parseBreakStatement();break;case"continue":g=this.parseContinueStatement();break;case"debugger":g=this.parseDebuggerStatement();break;case"do":g=this.parseDoWhileStatement();break;case"for":g=this.parseForStatement();break;case"function":g=this.parseFunctionDeclaration();break;case"if":g=this.parseIfStatement();break;case"return":g=this.parseReturnStatement();break;case"switch":g=this.parseSwitchStatement();break;case"throw":g=this.parseThrowStatement();break;case"try":g=this.parseTryStatement();break;case"var":g=this.parseVariableStatement();break;case"while":g=this.parseWhileStatement();break;case"with":g=this.parseWithStatement();break;default:g=this.parseExpressionStatement()}break;default:g=this.throwUnexpectedToken(this.lookahead)}return g},m.prototype.parseFunctionSourceElements=function(){var g=this.createNode();this.expect("{");var d=this.parseDirectivePrologues(),S=this.context.labelSet,T=this.context.inIteration,C=this.context.inSwitch,w=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;this.lookahead.type!==2&&!this.match("}");)d.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=S,this.context.inIteration=T,this.context.inSwitch=C,this.context.inFunctionBody=w,this.finalize(g,new f.BlockStatement(d))},m.prototype.validateParam=function(g,d,S){var T="$"+S;this.context.strict?(this.scanner.isRestrictedWord(S)&&(g.stricted=d,g.message=c.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(g.paramSet,T)&&(g.stricted=d,g.message=c.Messages.StrictParamDupe)):g.firstRestricted||(this.scanner.isRestrictedWord(S)?(g.firstRestricted=d,g.message=c.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(S)?(g.firstRestricted=d,g.message=c.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(g.paramSet,T)&&(g.stricted=d,g.message=c.Messages.StrictParamDupe)),typeof Object.defineProperty=="function"?Object.defineProperty(g.paramSet,T,{value:!0,enumerable:!0,writable:!0,configurable:!0}):g.paramSet[T]=!0},m.prototype.parseRestElement=function(g){var d=this.createNode();this.expect("...");var S=this.parsePattern(g);return this.match("=")&&this.throwError(c.Messages.DefaultRestParameter),this.match(")")||this.throwError(c.Messages.ParameterAfterRestParameter),this.finalize(d,new f.RestElement(S))},m.prototype.parseFormalParameter=function(g){for(var d=[],S=this.match("...")?this.parseRestElement(d):this.parsePatternWithDefault(d),T=0;T<d.length;T++)this.validateParam(g,d[T],d[T].value);g.simple=g.simple&&S instanceof f.Identifier,g.params.push(S)},m.prototype.parseFormalParameters=function(g){var d;if(d={simple:!0,params:[],firstRestricted:g},this.expect("("),!this.match(")"))for(d.paramSet={};this.lookahead.type!==2&&(this.parseFormalParameter(d),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),{simple:d.simple,params:d.params,stricted:d.stricted,firstRestricted:d.firstRestricted,message:d.message}},m.prototype.matchAsyncFunction=function(){var g=this.matchContextualKeyword("async");if(g){var d=this.scanner.saveState();this.scanner.scanComments();var S=this.scanner.lex();this.scanner.restoreState(d),g=d.lineNumber===S.lineNumber&&S.type===4&&S.value==="function"}return g},m.prototype.parseFunctionDeclaration=function(g){var d=this.createNode(),S=this.matchContextualKeyword("async");S&&this.nextToken(),this.expectKeyword("function");var T,C=!S&&this.match("*");C&&this.nextToken();var w=null,_=null;if(!g||!this.match("(")){var E=this.lookahead;w=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(E.value)&&this.tolerateUnexpectedToken(E,c.Messages.StrictFunctionName):this.scanner.isRestrictedWord(E.value)?(_=E,T=c.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(E.value)&&(_=E,T=c.Messages.StrictReservedWord)}var D=this.context.await,O=this.context.allowYield;this.context.await=S,this.context.allowYield=!C;var N=this.parseFormalParameters(_),R=N.params,M=N.stricted;_=N.firstRestricted,N.message&&(T=N.message);var A=this.context.strict,G=this.context.allowStrictDirective;this.context.allowStrictDirective=N.simple;var j=this.parseFunctionSourceElements();return this.context.strict&&_&&this.throwUnexpectedToken(_,T),this.context.strict&&M&&this.tolerateUnexpectedToken(M,T),this.context.strict=A,this.context.allowStrictDirective=G,this.context.await=D,this.context.allowYield=O,S?this.finalize(d,new f.AsyncFunctionDeclaration(w,R,j)):this.finalize(d,new f.FunctionDeclaration(w,R,j,C))},m.prototype.parseFunctionExpression=function(){var g=this.createNode(),d=this.matchContextualKeyword("async");d&&this.nextToken(),this.expectKeyword("function");var S,T=!d&&this.match("*");T&&this.nextToken();var C,w=null,_=this.context.await,E=this.context.allowYield;if(this.context.await=d,this.context.allowYield=!T,!this.match("(")){var D=this.lookahead;w=this.context.strict||T||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(D.value)&&this.tolerateUnexpectedToken(D,c.Messages.StrictFunctionName):this.scanner.isRestrictedWord(D.value)?(C=D,S=c.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(D.value)&&(C=D,S=c.Messages.StrictReservedWord)}var O=this.parseFormalParameters(C),N=O.params,R=O.stricted;C=O.firstRestricted,O.message&&(S=O.message);var M=this.context.strict,A=this.context.allowStrictDirective;this.context.allowStrictDirective=O.simple;var G=this.parseFunctionSourceElements();return this.context.strict&&C&&this.throwUnexpectedToken(C,S),this.context.strict&&R&&this.tolerateUnexpectedToken(R,S),this.context.strict=M,this.context.allowStrictDirective=A,this.context.await=_,this.context.allowYield=E,d?this.finalize(g,new f.AsyncFunctionExpression(w,N,G)):this.finalize(g,new f.FunctionExpression(w,N,G,T))},m.prototype.parseDirective=function(){var g=this.lookahead,d=this.createNode(),S=this.parseExpression(),T=S.type===v.Syntax.Literal?this.getTokenRaw(g).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(d,T?new f.Directive(S,T):new f.ExpressionStatement(S))},m.prototype.parseDirectivePrologues=function(){for(var g=null,d=[];;){var S=this.lookahead;if(S.type!==8)break;var T=this.parseDirective();d.push(T);var C=T.directive;if(typeof C!="string")break;C==="use strict"?(this.context.strict=!0,g&&this.tolerateUnexpectedToken(g,c.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(S,c.Messages.IllegalLanguageModeDirective)):!g&&S.octal&&(g=S)}return d},m.prototype.qualifiedPropertyName=function(g){switch(g.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return g.value==="["}return!1},m.prototype.parseGetterMethod=function(){var g=this.createNode(),d=this.context.allowYield;this.context.allowYield=!0;var S=this.parseFormalParameters();S.params.length>0&&this.tolerateError(c.Messages.BadGetterArity);var T=this.parsePropertyMethod(S);return this.context.allowYield=d,this.finalize(g,new f.FunctionExpression(null,S.params,T,!1))},m.prototype.parseSetterMethod=function(){var g=this.createNode(),d=this.context.allowYield;this.context.allowYield=!0;var S=this.parseFormalParameters();S.params.length!==1?this.tolerateError(c.Messages.BadSetterArity):S.params[0]instanceof f.RestElement&&this.tolerateError(c.Messages.BadSetterRestParameter);var T=this.parsePropertyMethod(S);return this.context.allowYield=d,this.finalize(g,new f.FunctionExpression(null,S.params,T,!1))},m.prototype.parseGeneratorMethod=function(){var g=this.createNode(),d=this.context.allowYield;this.context.allowYield=!0;var S=this.parseFormalParameters();this.context.allowYield=!1;var T=this.parsePropertyMethod(S);return this.context.allowYield=d,this.finalize(g,new f.FunctionExpression(null,S.params,T,!0))},m.prototype.isStartOfExpression=function(){var g=!0,d=this.lookahead.value;switch(this.lookahead.type){case 7:g=d==="["||d==="("||d==="{"||d==="+"||d==="-"||d==="!"||d==="~"||d==="++"||d==="--"||d==="/"||d==="/=";break;case 4:g=d==="class"||d==="delete"||d==="function"||d==="let"||d==="new"||d==="super"||d==="this"||d==="typeof"||d==="void"||d==="yield"}return g},m.prototype.parseYieldExpression=function(){var g=this.createNode();this.expectKeyword("yield");var d=null,S=!1;if(!this.hasLineTerminator){var T=this.context.allowYield;this.context.allowYield=!1,(S=this.match("*"))?(this.nextToken(),d=this.parseAssignmentExpression()):this.isStartOfExpression()&&(d=this.parseAssignmentExpression()),this.context.allowYield=T}return this.finalize(g,new f.YieldExpression(d,S))},m.prototype.parseClassElement=function(g){var d=this.lookahead,S=this.createNode(),T="",C=null,w=null,_=!1,E=!1,D=!1,O=!1;if(this.match("*"))this.nextToken();else if(_=this.match("["),(C=this.parseObjectPropertyKey()).name==="static"&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(d=this.lookahead,D=!0,_=this.match("["),this.match("*")?this.nextToken():C=this.parseObjectPropertyKey()),d.type===3&&!this.hasLineTerminator&&d.value==="async"){var N=this.lookahead.value;N!==":"&&N!=="("&&N!=="*"&&(O=!0,d=this.lookahead,C=this.parseObjectPropertyKey(),d.type===3&&d.value==="constructor"&&this.tolerateUnexpectedToken(d,c.Messages.ConstructorIsAsync))}var R=this.qualifiedPropertyName(this.lookahead);return d.type===3?d.value==="get"&&R?(T="get",_=this.match("["),C=this.parseObjectPropertyKey(),this.context.allowYield=!1,w=this.parseGetterMethod()):d.value==="set"&&R&&(T="set",_=this.match("["),C=this.parseObjectPropertyKey(),w=this.parseSetterMethod()):d.type===7&&d.value==="*"&&R&&(T="init",_=this.match("["),C=this.parseObjectPropertyKey(),w=this.parseGeneratorMethod(),E=!0),!T&&C&&this.match("(")&&(T="init",w=O?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),E=!0),T||this.throwUnexpectedToken(this.lookahead),T==="init"&&(T="method"),_||(D&&this.isPropertyKey(C,"prototype")&&this.throwUnexpectedToken(d,c.Messages.StaticPrototype),!D&&this.isPropertyKey(C,"constructor")&&((T!=="method"||!E||w&&w.generator)&&this.throwUnexpectedToken(d,c.Messages.ConstructorSpecialMethod),g.value?this.throwUnexpectedToken(d,c.Messages.DuplicateConstructor):g.value=!0,T="constructor")),this.finalize(S,new f.MethodDefinition(C,_,w,T,D))},m.prototype.parseClassElementList=function(){var g=[],d={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():g.push(this.parseClassElement(d));return this.expect("}"),g},m.prototype.parseClassBody=function(){var g=this.createNode(),d=this.parseClassElementList();return this.finalize(g,new f.ClassBody(d))},m.prototype.parseClassDeclaration=function(g){var d=this.createNode(),S=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var T=g&&this.lookahead.type!==3?null:this.parseVariableIdentifier(),C=null;this.matchKeyword("extends")&&(this.nextToken(),C=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var w=this.parseClassBody();return this.context.strict=S,this.finalize(d,new f.ClassDeclaration(T,C,w))},m.prototype.parseClassExpression=function(){var g=this.createNode(),d=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var S=this.lookahead.type===3?this.parseVariableIdentifier():null,T=null;this.matchKeyword("extends")&&(this.nextToken(),T=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var C=this.parseClassBody();return this.context.strict=d,this.finalize(g,new f.ClassExpression(S,T,C))},m.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var g=this.createNode(),d=this.parseDirectivePrologues();this.lookahead.type!==2;)d.push(this.parseStatementListItem());return this.finalize(g,new f.Module(d))},m.prototype.parseScript=function(){for(var g=this.createNode(),d=this.parseDirectivePrologues();this.lookahead.type!==2;)d.push(this.parseStatementListItem());return this.finalize(g,new f.Script(d))},m.prototype.parseModuleSpecifier=function(){var g=this.createNode();this.lookahead.type!==8&&this.throwError(c.Messages.InvalidModuleSpecifier);var d=this.nextToken(),S=this.getTokenRaw(d);return this.finalize(g,new f.Literal(d.value,S))},m.prototype.parseImportSpecifier=function(){var g,d,S=this.createNode();return this.lookahead.type===3?(d=g=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),d=this.parseVariableIdentifier())):(d=g=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),d=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(S,new f.ImportSpecifier(d,g))},m.prototype.parseNamedImports=function(){this.expect("{");for(var g=[];!this.match("}");)g.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),g},m.prototype.parseImportDefaultSpecifier=function(){var g=this.createNode(),d=this.parseIdentifierName();return this.finalize(g,new f.ImportDefaultSpecifier(d))},m.prototype.parseImportNamespaceSpecifier=function(){var g=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(c.Messages.NoAsAfterImportNamespace),this.nextToken();var d=this.parseIdentifierName();return this.finalize(g,new f.ImportNamespaceSpecifier(d))},m.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(c.Messages.IllegalImportDeclaration);var g,d=this.createNode();this.expectKeyword("import");var S=[];if(this.lookahead.type===8)g=this.parseModuleSpecifier();else{if(this.match("{")?S=S.concat(this.parseNamedImports()):this.match("*")?S.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(S.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?S.push(this.parseImportNamespaceSpecifier()):this.match("{")?S=S.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var T=this.lookahead.value?c.Messages.UnexpectedToken:c.Messages.MissingFromClause;this.throwError(T,this.lookahead.value)}this.nextToken(),g=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(d,new f.ImportDeclaration(S,g))},m.prototype.parseExportSpecifier=function(){var g=this.createNode(),d=this.parseIdentifierName(),S=d;return this.matchContextualKeyword("as")&&(this.nextToken(),S=this.parseIdentifierName()),this.finalize(g,new f.ExportSpecifier(d,S))},m.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(c.Messages.IllegalExportDeclaration);var g,d=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var S=this.parseFunctionDeclaration(!0);g=this.finalize(d,new f.ExportDefaultDeclaration(S))}else this.matchKeyword("class")?(S=this.parseClassDeclaration(!0),g=this.finalize(d,new f.ExportDefaultDeclaration(S))):this.matchContextualKeyword("async")?(S=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression(),g=this.finalize(d,new f.ExportDefaultDeclaration(S))):(this.matchContextualKeyword("from")&&this.throwError(c.Messages.UnexpectedToken,this.lookahead.value),S=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression(),this.consumeSemicolon(),g=this.finalize(d,new f.ExportDefaultDeclaration(S)));else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var T=this.lookahead.value?c.Messages.UnexpectedToken:c.Messages.MissingFromClause;this.throwError(T,this.lookahead.value)}this.nextToken();var C=this.parseModuleSpecifier();this.consumeSemicolon(),g=this.finalize(d,new f.ExportAllDeclaration(C))}else if(this.lookahead.type===4){switch(S=void 0,this.lookahead.value){case"let":case"const":S=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":S=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}g=this.finalize(d,new f.ExportNamedDeclaration(S,[],null))}else if(this.matchAsyncFunction())S=this.parseFunctionDeclaration(),g=this.finalize(d,new f.ExportNamedDeclaration(S,[],null));else{var w=[],_=null,E=!1;for(this.expect("{");!this.match("}");)E=E||this.matchKeyword("default"),w.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");this.expect("}"),this.matchContextualKeyword("from")?(this.nextToken(),_=this.parseModuleSpecifier(),this.consumeSemicolon()):E?(T=this.lookahead.value?c.Messages.UnexpectedToken:c.Messages.MissingFromClause,this.throwError(T,this.lookahead.value)):this.consumeSemicolon(),g=this.finalize(d,new f.ExportNamedDeclaration(null,w,_))}return g},m}();s.Parser=x},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.assert=function(u,l){if(!u)throw new Error("ASSERT: "+l)}},function(o,s){Object.defineProperty(s,"__esModule",{value:!0});var u=function(){function l(){this.errors=[],this.tolerant=!1}return l.prototype.recordError=function(p){this.errors.push(p)},l.prototype.tolerate=function(p){if(!this.tolerant)throw p;this.recordError(p)},l.prototype.constructError=function(p,c){var f=new Error(p);try{throw f}catch(h){Object.create&&Object.defineProperty&&(f=Object.create(h),Object.defineProperty(f,"column",{value:c}))}return f},l.prototype.createError=function(p,c,f,h){var v="Line "+c+": "+h,y=this.constructError(v,f);return y.index=p,y.lineNumber=c,y.description=h,y},l.prototype.throwError=function(p,c,f,h){throw this.createError(p,c,f,h)},l.prototype.tolerateError=function(p,c,f,h){var v=this.createError(p,c,f,h);if(!this.tolerant)throw v;this.recordError(v)},l}();s.ErrorHandler=u},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(o,s,u){Object.defineProperty(s,"__esModule",{value:!0});var l=u(9),p=u(4),c=u(11);function f(y){return"0123456789abcdef".indexOf(y.toLowerCase())}function h(y){return"01234567".indexOf(y)}var v=function(){function y(x,m){this.source=x,this.errorHandler=m,this.trackComment=!1,this.isModule=!1,this.length=x.length,this.index=0,this.lineNumber=x.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return y.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},y.prototype.restoreState=function(x){this.index=x.index,this.lineNumber=x.lineNumber,this.lineStart=x.lineStart},y.prototype.eof=function(){return this.index>=this.length},y.prototype.throwUnexpectedToken=function(x){return x===void 0&&(x=c.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,x)},y.prototype.tolerateUnexpectedToken=function(x){x===void 0&&(x=c.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,x)},y.prototype.skipSingleLineComment=function(x){var m,g,d=[];for(this.trackComment&&(d=[],m=this.index-x,g={start:{line:this.lineNumber,column:this.index-this.lineStart-x},end:{}});!this.eof();){var S=this.source.charCodeAt(this.index);if(++this.index,p.Character.isLineTerminator(S)){if(this.trackComment){g.end={line:this.lineNumber,column:this.index-this.lineStart-1};var T={multiLine:!1,slice:[m+x,this.index-1],range:[m,this.index-1],loc:g};d.push(T)}return S===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,d}}return this.trackComment&&(g.end={line:this.lineNumber,column:this.index-this.lineStart},T={multiLine:!1,slice:[m+x,this.index],range:[m,this.index],loc:g},d.push(T)),d},y.prototype.skipMultiLineComment=function(){var x,m,g=[];for(this.trackComment&&(g=[],x=this.index-2,m={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var d=this.source.charCodeAt(this.index);if(p.Character.isLineTerminator(d))d===13&&this.source.charCodeAt(this.index+1)===10&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(d===42){if(this.source.charCodeAt(this.index+1)===47){if(this.index+=2,this.trackComment){m.end={line:this.lineNumber,column:this.index-this.lineStart};var S={multiLine:!0,slice:[x+2,this.index-2],range:[x,this.index],loc:m};g.push(S)}return g}++this.index}else++this.index}return this.trackComment&&(m.end={line:this.lineNumber,column:this.index-this.lineStart},S={multiLine:!0,slice:[x+2,this.index],range:[x,this.index],loc:m},g.push(S)),this.tolerateUnexpectedToken(),g},y.prototype.scanComments=function(){var x;this.trackComment&&(x=[]);for(var m=this.index===0;!this.eof();){var g=this.source.charCodeAt(this.index);if(p.Character.isWhiteSpace(g))++this.index;else if(p.Character.isLineTerminator(g))++this.index,g===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,m=!0;else if(g===47)if((g=this.source.charCodeAt(this.index+1))===47){this.index+=2;var d=this.skipSingleLineComment(2);this.trackComment&&(x=x.concat(d)),m=!0}else{if(g!==42)break;this.index+=2,d=this.skipMultiLineComment(),this.trackComment&&(x=x.concat(d))}else if(m&&g===45){if(this.source.charCodeAt(this.index+1)!==45||this.source.charCodeAt(this.index+2)!==62)break;this.index+=3,d=this.skipSingleLineComment(3),this.trackComment&&(x=x.concat(d))}else{if(g!==60||this.isModule||this.source.slice(this.index+1,this.index+4)!=="!--")break;this.index+=4,d=this.skipSingleLineComment(4),this.trackComment&&(x=x.concat(d))}}return x},y.prototype.isFutureReservedWord=function(x){switch(x){case"enum":case"export":case"import":case"super":return!0;default:return!1}},y.prototype.isStrictModeReservedWord=function(x){switch(x){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},y.prototype.isRestrictedWord=function(x){return x==="eval"||x==="arguments"},y.prototype.isKeyword=function(x){switch(x.length){case 2:return x==="if"||x==="in"||x==="do";case 3:return x==="var"||x==="for"||x==="new"||x==="try"||x==="let";case 4:return x==="this"||x==="else"||x==="case"||x==="void"||x==="with"||x==="enum";case 5:return x==="while"||x==="break"||x==="catch"||x==="throw"||x==="const"||x==="yield"||x==="class"||x==="super";case 6:return x==="return"||x==="typeof"||x==="delete"||x==="switch"||x==="export"||x==="import";case 7:return x==="default"||x==="finally"||x==="extends";case 8:return x==="function"||x==="continue"||x==="debugger";case 10:return x==="instanceof";default:return!1}},y.prototype.codePointAt=function(x){var m=this.source.charCodeAt(x);if(m>=55296&&m<=56319){var g=this.source.charCodeAt(x+1);g>=56320&&g<=57343&&(m=1024*(m-55296)+g-56320+65536)}return m},y.prototype.scanHexEscape=function(x){for(var m=x==="u"?4:2,g=0,d=0;d<m;++d){if(this.eof()||!p.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;g=16*g+f(this.source[this.index++])}return String.fromCharCode(g)},y.prototype.scanUnicodeCodePointEscape=function(){var x=this.source[this.index],m=0;for(x==="}"&&this.throwUnexpectedToken();!this.eof()&&(x=this.source[this.index++],p.Character.isHexDigit(x.charCodeAt(0)));)m=16*m+f(x);return(m>1114111||x!=="}")&&this.throwUnexpectedToken(),p.Character.fromCodePoint(m)},y.prototype.getIdentifier=function(){for(var x=this.index++;!this.eof();){var m=this.source.charCodeAt(this.index);if(m===92)return this.index=x,this.getComplexIdentifier();if(m>=55296&&m<57343)return this.index=x,this.getComplexIdentifier();if(!p.Character.isIdentifierPart(m))break;++this.index}return this.source.slice(x,this.index)},y.prototype.getComplexIdentifier=function(){var x,m=this.codePointAt(this.index),g=p.Character.fromCodePoint(m);for(this.index+=g.length,m===92&&(this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,x=this.scanUnicodeCodePointEscape()):(x=this.scanHexEscape("u"))!==null&&x!=="\\"&&p.Character.isIdentifierStart(x.charCodeAt(0))||this.throwUnexpectedToken(),g=x);!this.eof()&&(m=this.codePointAt(this.index),p.Character.isIdentifierPart(m));)g+=x=p.Character.fromCodePoint(m),this.index+=x.length,m===92&&(g=g.substr(0,g.length-1),this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,x=this.scanUnicodeCodePointEscape()):(x=this.scanHexEscape("u"))!==null&&x!=="\\"&&p.Character.isIdentifierPart(x.charCodeAt(0))||this.throwUnexpectedToken(),g+=x);return g},y.prototype.octalToDecimal=function(x){var m=x!=="0",g=h(x);return!this.eof()&&p.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(m=!0,g=8*g+h(this.source[this.index++]),"0123".indexOf(x)>=0&&!this.eof()&&p.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(g=8*g+h(this.source[this.index++]))),{code:g,octal:m}},y.prototype.scanIdentifier=function(){var x,m=this.index,g=this.source.charCodeAt(m)===92?this.getComplexIdentifier():this.getIdentifier();if((x=g.length===1?3:this.isKeyword(g)?4:g==="null"?5:g==="true"||g==="false"?1:3)!=3&&m+g.length!==this.index){var d=this.index;this.index=m,this.tolerateUnexpectedToken(c.Messages.InvalidEscapedReservedWord),this.index=d}return{type:x,value:g,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},y.prototype.scanPunctuator=function(){var x=this.index,m=this.source[this.index];switch(m){case"(":case"{":m==="{"&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,this.source[this.index]==="."&&this.source[this.index+1]==="."&&(this.index+=2,m="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:(m=this.source.substr(this.index,4))===">>>="?this.index+=4:(m=m.substr(0,3))==="==="||m==="!=="||m===">>>"||m==="<<="||m===">>="||m==="**="?this.index+=3:(m=m.substr(0,2))==="&&"||m==="||"||m==="=="||m==="!="||m==="+="||m==="-="||m==="*="||m==="/="||m==="++"||m==="--"||m==="<<"||m===">>"||m==="&="||m==="|="||m==="^="||m==="%="||m==="<="||m===">="||m==="=>"||m==="**"?this.index+=2:(m=this.source[this.index],"<>=!+-*%&|^/".indexOf(m)>=0&&++this.index)}return this.index===x&&this.throwUnexpectedToken(),{type:7,value:m,lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}},y.prototype.scanHexLiteral=function(x){for(var m="";!this.eof()&&p.Character.isHexDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];return m.length===0&&this.throwUnexpectedToken(),p.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+m,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}},y.prototype.scanBinaryLiteral=function(x){for(var m,g="";!this.eof()&&((m=this.source[this.index])==="0"||m==="1");)g+=this.source[this.index++];return g.length===0&&this.throwUnexpectedToken(),this.eof()||(m=this.source.charCodeAt(this.index),(p.Character.isIdentifierStart(m)||p.Character.isDecimalDigit(m))&&this.throwUnexpectedToken()),{type:6,value:parseInt(g,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}},y.prototype.scanOctalLiteral=function(x,m){var g="",d=!1;for(p.Character.isOctalDigit(x.charCodeAt(0))?(d=!0,g="0"+this.source[this.index++]):++this.index;!this.eof()&&p.Character.isOctalDigit(this.source.charCodeAt(this.index));)g+=this.source[this.index++];return d||g.length!==0||this.throwUnexpectedToken(),(p.Character.isIdentifierStart(this.source.charCodeAt(this.index))||p.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(g,8),octal:d,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},y.prototype.isImplicitOctalLiteral=function(){for(var x=this.index+1;x<this.length;++x){var m=this.source[x];if(m==="8"||m==="9")return!1;if(!p.Character.isOctalDigit(m.charCodeAt(0)))return!0}return!0},y.prototype.scanNumericLiteral=function(){var x=this.index,m=this.source[x];l.assert(p.Character.isDecimalDigit(m.charCodeAt(0))||m===".","Numeric literal must start with a decimal digit or a decimal point");var g="";if(m!=="."){if(g=this.source[this.index++],m=this.source[this.index],g==="0"){if(m==="x"||m==="X")return++this.index,this.scanHexLiteral(x);if(m==="b"||m==="B")return++this.index,this.scanBinaryLiteral(x);if(m==="o"||m==="O")return this.scanOctalLiteral(m,x);if(m&&p.Character.isOctalDigit(m.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(m,x)}for(;p.Character.isDecimalDigit(this.source.charCodeAt(this.index));)g+=this.source[this.index++];m=this.source[this.index]}if(m==="."){for(g+=this.source[this.index++];p.Character.isDecimalDigit(this.source.charCodeAt(this.index));)g+=this.source[this.index++];m=this.source[this.index]}if(m==="e"||m==="E")if(g+=this.source[this.index++],(m=this.source[this.index])!=="+"&&m!=="-"||(g+=this.source[this.index++]),p.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;p.Character.isDecimalDigit(this.source.charCodeAt(this.index));)g+=this.source[this.index++];else this.throwUnexpectedToken();return p.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(g),lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}},y.prototype.scanStringLiteral=function(){var x=this.index,m=this.source[x];l.assert(m==="'"||m==='"',"String literal must starts with a quote"),++this.index;for(var g=!1,d="";!this.eof();){var S=this.source[this.index++];if(S===m){m="";break}if(S==="\\")if((S=this.source[this.index++])&&p.Character.isLineTerminator(S.charCodeAt(0)))++this.lineNumber,S==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(S){case"u":if(this.source[this.index]==="{")++this.index,d+=this.scanUnicodeCodePointEscape();else{var T=this.scanHexEscape(S);T===null&&this.throwUnexpectedToken(),d+=T}break;case"x":var C=this.scanHexEscape(S);C===null&&this.throwUnexpectedToken(c.Messages.InvalidHexEscapeSequence),d+=C;break;case"n":d+=`
`;break;case"r":d+="\r";break;case"t":d+="	";break;case"b":d+="\b";break;case"f":d+="\f";break;case"v":d+="\v";break;case"8":case"9":d+=S,this.tolerateUnexpectedToken();break;default:if(S&&p.Character.isOctalDigit(S.charCodeAt(0))){var w=this.octalToDecimal(S);g=w.octal||g,d+=String.fromCharCode(w.code)}else d+=S}else{if(p.Character.isLineTerminator(S.charCodeAt(0)))break;d+=S}}return m!==""&&(this.index=x,this.throwUnexpectedToken()),{type:8,value:d,octal:g,lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}},y.prototype.scanTemplate=function(){var x="",m=!1,g=this.index,d=this.source[g]==="`",S=!1,T=2;for(++this.index;!this.eof();){var C=this.source[this.index++];if(C==="`"){T=1,S=!0,m=!0;break}if(C==="$"){if(this.source[this.index]==="{"){this.curlyStack.push("${"),++this.index,m=!0;break}x+=C}else if(C==="\\")if(C=this.source[this.index++],p.Character.isLineTerminator(C.charCodeAt(0)))++this.lineNumber,C==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(C){case"n":x+=`
`;break;case"r":x+="\r";break;case"t":x+="	";break;case"u":if(this.source[this.index]==="{")++this.index,x+=this.scanUnicodeCodePointEscape();else{var w=this.index,_=this.scanHexEscape(C);_!==null?x+=_:(this.index=w,x+=C)}break;case"x":var E=this.scanHexEscape(C);E===null&&this.throwUnexpectedToken(c.Messages.InvalidHexEscapeSequence),x+=E;break;case"b":x+="\b";break;case"f":x+="\f";break;case"v":x+="\v";break;default:C==="0"?(p.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(c.Messages.TemplateOctalLiteral),x+="\0"):p.Character.isOctalDigit(C.charCodeAt(0))?this.throwUnexpectedToken(c.Messages.TemplateOctalLiteral):x+=C}else p.Character.isLineTerminator(C.charCodeAt(0))?(++this.lineNumber,C==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index,x+=`
`):x+=C}return m||this.throwUnexpectedToken(),d||this.curlyStack.pop(),{type:10,value:this.source.slice(g+1,this.index-T),cooked:x,head:d,tail:S,lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}},y.prototype.testRegExp=function(x,m){var g=x,d=this;m.indexOf("u")>=0&&(g=g.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(S,T,C){var w=parseInt(T||C,16);return w>1114111&&d.throwUnexpectedToken(c.Messages.InvalidRegExp),w<=65535?String.fromCharCode(w):""}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,""));try{RegExp(g)}catch{this.throwUnexpectedToken(c.Messages.InvalidRegExp)}try{return new RegExp(x,m)}catch{return null}},y.prototype.scanRegExpBody=function(){var x=this.source[this.index];l.assert(x==="/","Regular expression literal must start with a slash");for(var m=this.source[this.index++],g=!1,d=!1;!this.eof();)if(m+=x=this.source[this.index++],x==="\\")x=this.source[this.index++],p.Character.isLineTerminator(x.charCodeAt(0))&&this.throwUnexpectedToken(c.Messages.UnterminatedRegExp),m+=x;else if(p.Character.isLineTerminator(x.charCodeAt(0)))this.throwUnexpectedToken(c.Messages.UnterminatedRegExp);else if(g)x==="]"&&(g=!1);else{if(x==="/"){d=!0;break}x==="["&&(g=!0)}return d||this.throwUnexpectedToken(c.Messages.UnterminatedRegExp),m.substr(1,m.length-2)},y.prototype.scanRegExpFlags=function(){for(var x="";!this.eof();){var m=this.source[this.index];if(!p.Character.isIdentifierPart(m.charCodeAt(0)))break;if(++this.index,m!=="\\"||this.eof())x+=m;else if((m=this.source[this.index])==="u"){++this.index;var g=this.index,d=this.scanHexEscape("u");if(d!==null)for(x+=d;g<this.index;++g)this.source[g];else this.index=g,x+="u";this.tolerateUnexpectedToken()}else this.tolerateUnexpectedToken()}return x},y.prototype.scanRegExp=function(){var x=this.index,m=this.scanRegExpBody(),g=this.scanRegExpFlags();return{type:9,value:"",pattern:m,flags:g,regex:this.testRegExp(m,g),lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}},y.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var x=this.source.charCodeAt(this.index);return p.Character.isIdentifierStart(x)?this.scanIdentifier():x===40||x===41||x===59?this.scanPunctuator():x===39||x===34?this.scanStringLiteral():x===46?p.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():p.Character.isDecimalDigit(x)?this.scanNumericLiteral():x===96||x===125&&this.curlyStack[this.curlyStack.length-1]==="${"?this.scanTemplate():x>=55296&&x<57343&&p.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},y}();s.Scanner=v},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.TokenName={},s.TokenName[1]="Boolean",s.TokenName[2]="<end>",s.TokenName[3]="Identifier",s.TokenName[4]="Keyword",s.TokenName[5]="Null",s.TokenName[6]="Numeric",s.TokenName[7]="Punctuator",s.TokenName[8]="String",s.TokenName[9]="RegularExpression",s.TokenName[10]="Template"},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",lang:"",rang:""}},function(o,s,u){Object.defineProperty(s,"__esModule",{value:!0});var l=u(10),p=u(12),c=u(13),f=function(){function v(){this.values=[],this.curly=this.paren=-1}return v.prototype.beforeFunctionExpression=function(y){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(y)>=0},v.prototype.isRegexStart=function(){var y=this.values[this.values.length-1],x=y!==null;switch(y){case"this":case"]":x=!1;break;case")":var m=this.values[this.paren-1];x=m==="if"||m==="while"||m==="for"||m==="with";break;case"}":if(x=!1,this.values[this.curly-3]==="function")x=!!(g=this.values[this.curly-4])&&!this.beforeFunctionExpression(g);else if(this.values[this.curly-4]==="function"){var g;x=!(g=this.values[this.curly-5])||!this.beforeFunctionExpression(g)}}return x},v.prototype.push=function(y){y.type===7||y.type===4?(y.value==="{"?this.curly=this.values.length:y.value==="("&&(this.paren=this.values.length),this.values.push(y.value)):this.values.push(null)},v}(),h=function(){function v(y,x){this.errorHandler=new l.ErrorHandler,this.errorHandler.tolerant=!!x&&typeof x.tolerant=="boolean"&&x.tolerant,this.scanner=new p.Scanner(y,this.errorHandler),this.scanner.trackComment=!!x&&typeof x.comment=="boolean"&&x.comment,this.trackRange=!!x&&typeof x.range=="boolean"&&x.range,this.trackLoc=!!x&&typeof x.loc=="boolean"&&x.loc,this.buffer=[],this.reader=new f}return v.prototype.errors=function(){return this.errorHandler.errors},v.prototype.getNextToken=function(){if(this.buffer.length===0){var y=this.scanner.scanComments();if(this.scanner.trackComment)for(var x=0;x<y.length;++x){var m=y[x],g=this.scanner.source.slice(m.slice[0],m.slice[1]),d={type:m.multiLine?"BlockComment":"LineComment",value:g};this.trackRange&&(d.range=m.range),this.trackLoc&&(d.loc=m.loc),this.buffer.push(d)}if(!this.scanner.eof()){var S=void 0;this.trackLoc&&(S={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var T=this.scanner.source[this.scanner.index]==="/"&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(T);var C={type:c.TokenName[T.type],value:this.scanner.source.slice(T.start,T.end)};if(this.trackRange&&(C.range=[T.start,T.end]),this.trackLoc&&(S.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},C.loc=S),T.type===9){var w=T.pattern,_=T.flags;C.regex={pattern:w,flags:_}}this.buffer.push(C)}}return this.buffer.shift()},v}();s.Tokenizer=h}])},n.exports=a()},function(n,r,i){var a=i(38),o=i(53),s=i(76),u=i(54),l=Object.prototype.toString,p=Object.prototype.hasOwnProperty,c={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},f=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function h(M){var A,G,j;if(A=M.toString(16).toUpperCase(),M<=255)G="x",j=2;else if(M<=65535)G="u",j=4;else{if(!(M<=4294967295))throw new o("code point within a string may not be greater than 0xFFFFFFFF");G="U",j=8}return"\\"+G+a.repeat("0",j-A.length)+A}function v(M){this.schema=M.schema||s,this.indent=Math.max(1,M.indent||2),this.noArrayIndent=M.noArrayIndent||!1,this.skipInvalid=M.skipInvalid||!1,this.flowLevel=a.isNothing(M.flowLevel)?-1:M.flowLevel,this.styleMap=function(A,G){var j,k,F,B,$,H,X;if(G===null)return{};for(j={},F=0,B=(k=Object.keys(G)).length;F<B;F+=1)$=k[F],H=String(G[$]),$.slice(0,2)==="!!"&&($="tag:yaml.org,2002:"+$.slice(2)),(X=A.compiledTypeMap.fallback[$])&&p.call(X.styleAliases,H)&&(H=X.styleAliases[H]),j[$]=H;return j}(this.schema,M.styles||null),this.sortKeys=M.sortKeys||!1,this.lineWidth=M.lineWidth||80,this.noRefs=M.noRefs||!1,this.noCompatMode=M.noCompatMode||!1,this.condenseFlow=M.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function y(M,A){for(var G,j=a.repeat(" ",A),k=0,F=-1,B="",$=M.length;k<$;)(F=M.indexOf(`
`,k))===-1?(G=M.slice(k),k=$):(G=M.slice(k,F+1),k=F+1),G.length&&G!==`
`&&(B+=j),B+=G;return B}function x(M,A){return`
`+a.repeat(" ",M.indent*A)}function m(M){return M===32||M===9}function g(M){return 32<=M&&M<=126||161<=M&&M<=55295&&M!==8232&&M!==8233||57344<=M&&M<=65533&&M!==65279||65536<=M&&M<=1114111}function d(M,A){return g(M)&&M!==65279&&M!==44&&M!==91&&M!==93&&M!==123&&M!==125&&M!==58&&(M!==35||A&&function(G){return g(G)&&!m(G)&&G!==65279&&G!==13&&G!==10}(A))}function S(M){return/^\n* /.test(M)}function T(M,A,G,j,k){var F,B,$,H,X=!1,J=!1,q=j!==-1,ee=-1,re=g(H=M.charCodeAt(0))&&H!==65279&&!m(H)&&H!==45&&H!==63&&H!==58&&H!==44&&H!==91&&H!==93&&H!==123&&H!==125&&H!==35&&H!==38&&H!==42&&H!==33&&H!==124&&H!==61&&H!==62&&H!==39&&H!==34&&H!==37&&H!==64&&H!==96&&!m(M.charCodeAt(M.length-1));if(A)for(F=0;F<M.length;F++){if(!g(B=M.charCodeAt(F)))return 5;$=F>0?M.charCodeAt(F-1):null,re=re&&d(B,$)}else{for(F=0;F<M.length;F++){if((B=M.charCodeAt(F))===10)X=!0,q&&(J=J||F-ee-1>j&&M[ee+1]!==" ",ee=F);else if(!g(B))return 5;$=F>0?M.charCodeAt(F-1):null,re=re&&d(B,$)}J=J||q&&F-ee-1>j&&M[ee+1]!==" "}return X||J?G>9&&S(M)?5:J?4:3:re&&!k(M)?1:2}function C(M,A,G,j){M.dump=function(){if(A.length===0)return"''";if(!M.noCompatMode&&f.indexOf(A)!==-1)return"'"+A+"'";var k=M.indent*Math.max(1,G),F=M.lineWidth===-1?-1:Math.max(Math.min(M.lineWidth,40),M.lineWidth-k),B=j||M.flowLevel>-1&&G>=M.flowLevel;switch(T(A,B,M.indent,F,function($){return function(H,X){var J,q;for(J=0,q=H.implicitTypes.length;J<q;J+=1)if(H.implicitTypes[J].resolve(X))return!0;return!1}(M,$)})){case 1:return A;case 2:return"'"+A.replace(/'/g,"''")+"'";case 3:return"|"+w(A,M.indent)+_(y(A,k));case 4:return">"+w(A,M.indent)+_(y(function($,H){for(var X,J,q=/(\n+)([^\n]*)/g,ee=(ae=$.indexOf(`
`),ae=ae!==-1?ae:$.length,q.lastIndex=ae,E($.slice(0,ae),H)),re=$[0]===`
`||$[0]===" ",ae;J=q.exec($);){var te=J[1],L=J[2];X=L[0]===" ",ee+=te+(re||X||L===""?"":`
`)+E(L,H),re=X}return ee}(A,F),k));case 5:return'"'+function($){for(var H,X,J,q="",ee=0;ee<$.length;ee++)(H=$.charCodeAt(ee))>=55296&&H<=56319&&(X=$.charCodeAt(ee+1))>=56320&&X<=57343?(q+=h(1024*(H-55296)+X-56320+65536),ee++):(J=c[H],q+=!J&&g(H)?$[ee]:J||h(H));return q}(A)+'"';default:throw new o("impossible error: invalid scalar style")}}()}function w(M,A){var G=S(M)?String(A):"",j=M[M.length-1]===`
`;return G+(j&&(M[M.length-2]===`
`||M===`
`)?"+":j?"":"-")+`
`}function _(M){return M[M.length-1]===`
`?M.slice(0,-1):M}function E(M,A){if(M===""||M[0]===" ")return M;for(var G,j,k=/ [^ ]/g,F=0,B=0,$=0,H="";G=k.exec(M);)($=G.index)-F>A&&(j=B>F?B:$,H+=`
`+M.slice(F,j),F=j+1),B=$;return H+=`
`,M.length-F>A&&B>F?H+=M.slice(F,B)+`
`+M.slice(B+1):H+=M.slice(F),H.slice(1)}function D(M,A,G){var j,k,F,B,$,H;for(F=0,B=(k=G?M.explicitTypes:M.implicitTypes).length;F<B;F+=1)if((($=k[F]).instanceOf||$.predicate)&&(!$.instanceOf||typeof A=="object"&&A instanceof $.instanceOf)&&(!$.predicate||$.predicate(A))){if(M.tag=G?$.tag:"?",$.represent){if(H=M.styleMap[$.tag]||$.defaultStyle,l.call($.represent)==="[object Function]")j=$.represent(A,H);else{if(!p.call($.represent,H))throw new o("!<"+$.tag+'> tag resolver accepts not "'+H+'" style');j=$.represent[H](A,H)}M.dump=j}return!0}return!1}function O(M,A,G,j,k,F){M.tag=null,M.dump=G,D(M,G,!1)||D(M,G,!0);var B=l.call(M.dump);j&&(j=M.flowLevel<0||M.flowLevel>A);var $,H,X=B==="[object Object]"||B==="[object Array]";if(X&&(H=($=M.duplicates.indexOf(G))!==-1),(M.tag!==null&&M.tag!=="?"||H||M.indent!==2&&A>0)&&(k=!1),H&&M.usedDuplicates[$])M.dump="*ref_"+$;else{if(X&&H&&!M.usedDuplicates[$]&&(M.usedDuplicates[$]=!0),B==="[object Object]")j&&Object.keys(M.dump).length!==0?(function(q,ee,re,ae){var te,L,b,U,V,I,z="",W=q.tag,Y=Object.keys(re);if(q.sortKeys===!0)Y.sort();else if(typeof q.sortKeys=="function")Y.sort(q.sortKeys);else if(q.sortKeys)throw new o("sortKeys must be a boolean or a function");for(te=0,L=Y.length;te<L;te+=1)I="",ae&&te===0||(I+=x(q,ee)),U=re[b=Y[te]],O(q,ee+1,b,!0,!0,!0)&&((V=q.tag!==null&&q.tag!=="?"||q.dump&&q.dump.length>1024)&&(q.dump&&q.dump.charCodeAt(0)===10?I+="?":I+="? "),I+=q.dump,V&&(I+=x(q,ee)),O(q,ee+1,U,!0,V)&&(q.dump&&q.dump.charCodeAt(0)===10?I+=":":I+=": ",z+=I+=q.dump));q.tag=W,q.dump=z||"{}"}(M,A,M.dump,k),H&&(M.dump="&ref_"+$+M.dump)):(function(q,ee,re){var ae,te,L,b,U,V="",I=q.tag,z=Object.keys(re);for(ae=0,te=z.length;ae<te;ae+=1)U="",ae!==0&&(U+=", "),q.condenseFlow&&(U+='"'),b=re[L=z[ae]],O(q,ee,L,!1,!1)&&(q.dump.length>1024&&(U+="? "),U+=q.dump+(q.condenseFlow?'"':"")+":"+(q.condenseFlow?"":" "),O(q,ee,b,!1,!1)&&(V+=U+=q.dump));q.tag=I,q.dump="{"+V+"}"}(M,A,M.dump),H&&(M.dump="&ref_"+$+" "+M.dump));else if(B==="[object Array]"){var J=M.noArrayIndent&&A>0?A-1:A;j&&M.dump.length!==0?(function(q,ee,re,ae){var te,L,b="",U=q.tag;for(te=0,L=re.length;te<L;te+=1)O(q,ee+1,re[te],!0,!0)&&(ae&&te===0||(b+=x(q,ee)),q.dump&&q.dump.charCodeAt(0)===10?b+="-":b+="- ",b+=q.dump);q.tag=U,q.dump=b||"[]"}(M,J,M.dump,k),H&&(M.dump="&ref_"+$+M.dump)):(function(q,ee,re){var ae,te,L="",b=q.tag;for(ae=0,te=re.length;ae<te;ae+=1)O(q,ee,re[ae],!1,!1)&&(ae!==0&&(L+=","+(q.condenseFlow?"":" ")),L+=q.dump);q.tag=b,q.dump="["+L+"]"}(M,J,M.dump),H&&(M.dump="&ref_"+$+" "+M.dump))}else{if(B!=="[object String]"){if(M.skipInvalid)return!1;throw new o("unacceptable kind of an object to dump "+B)}M.tag!=="?"&&C(M,M.dump,A,F)}M.tag!==null&&M.tag!=="?"&&(M.dump="!<"+M.tag+"> "+M.dump)}return!0}function N(M,A){var G,j,k=[],F=[];for(function B($,H,X){var J,q,ee;if($!==null&&typeof $=="object")if((q=H.indexOf($))!==-1)X.indexOf(q)===-1&&X.push(q);else if(H.push($),Array.isArray($))for(q=0,ee=$.length;q<ee;q+=1)B($[q],H,X);else for(J=Object.keys($),q=0,ee=J.length;q<ee;q+=1)B($[J[q]],H,X)}(M,k,F),G=0,j=F.length;G<j;G+=1)A.duplicates.push(k[F[G]]);A.usedDuplicates=new Array(j)}function R(M,A){var G=new v(A=A||{});return G.noRefs||N(M,G),O(G,0,M,!0,!0)?G.dump+`
`:""}n.exports.dump=R,n.exports.safeDump=function(M,A){return R(M,a.extend({schema:u},A))}},function(n,r,i){i(31),i(32),i(33),i(64),i(19),i(65),i(20),i(68),i(92),i(144),i(22),i(94),i(23);var a,o=this&&this.__extends||(a=function(T,C){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,_){w.__proto__=_}||function(w,_){for(var E in _)_.hasOwnProperty(E)&&(w[E]=_[E])})(T,C)},function(T,C){function w(){this.constructor=T}a(T,C),T.prototype=C===null?Object.create(C):(w.prototype=C.prototype,new w)}),s=this&&this.__values||function(T){var C=typeof Symbol=="function"&&Symbol.iterator,w=C&&T[C],_=0;if(w)return w.call(T);if(T&&typeof T.length=="number")return{next:function(){return T&&_>=T.length&&(T=void 0),{value:T&&T[_++],done:!T}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(T,C){var w=typeof Symbol=="function"&&T[Symbol.iterator];if(!w)return T;var _,E,D=w.call(T),O=[];try{for(;(C===void 0||C-- >0)&&!(_=D.next()).done;)O.push(_.value)}catch(N){E={error:N}}finally{try{_&&!_.done&&(w=D.return)&&w.call(D)}finally{if(E)throw E.error}}return O};Object.defineProperty(r,"__esModule",{value:!0});var l=i(91),p=i(1),c=i(183),f=i(0),h=i(7),v=i(95),y=i(69),x=i(3),m=i(305),g=i(306),d=i(307),S=function(T){function C(w,_){_===void 0&&(_=!1);var E=T.call(this)||this;return E._hasDeclaration=!1,E._docTypeName="",E._hasDocumentElement=!1,E._currentElementSerialized=!1,E._openTags=[],E._ended=!1,E._fragment=_,E._options=p.applyDefaults(w||{},l.DefaultXMLBuilderCBOptions),E._builderOptions={defaultNamespace:E._options.defaultNamespace,namespaceAlias:E._options.namespaceAlias},E._options.format==="json"?E._writer=new g.JSONCBWriter(E._options):E._options.format==="yaml"?E._writer=new d.YAMLCBWriter(E._options):E._writer=new m.XMLCBWriter(E._options),E._options.data!==void 0&&E.on("data",E._options.data),E._options.end!==void 0&&E.on("end",E._options.end),E._options.error!==void 0&&E.on("error",E._options.error),E._prefixMap=new v.NamespacePrefixMap,E._prefixMap.set("xml",h.namespace.XML),E._prefixIndex={value:1},E._push(E._writer.frontMatter()),E}return o(C,T),C.prototype.ele=function(w,_,E){var D,O;if(p.isObject(w)||p.isString(w)&&(/^\s*</.test(w)||/^\s*[\{\[]/.test(w)||/^(\s*|(#.*)|(%.*))*---/.test(w))){var N=c.fragment().set(this._options);try{N.ele(w)}catch(G){return this.emit("error",G),this}try{for(var R=s(N.node.childNodes),M=R.next();!M.done;M=R.next()){var A=M.value;this._fromNode(A)}}catch(G){D={error:G}}finally{try{M&&!M.done&&(O=R.return)&&O.call(R)}finally{if(D)throw D.error}}return this}if(this._serializeOpenTag(!0),!this._fragment&&this._hasDocumentElement&&this._writer.level===0)return this.emit("error",new Error("Document cannot have multiple document element nodes.")),this;try{this._currentElement=c.fragment(this._builderOptions).ele(w,_,E)}catch(G){return this.emit("error",G),this}return this._fragment||this._hasDocumentElement||this._docTypeName===""||this._currentElement.node._qualifiedName===this._docTypeName?(this._currentElementSerialized=!1,this._fragment||(this._hasDocumentElement=!0),this):(this.emit("error",new Error("Document element name does not match DocType declaration name.")),this)},C.prototype.att=function(w,_,E){if(this._currentElement===void 0)return this.emit("error",new Error("Cannot insert an attribute node as child of a document node.")),this;try{this._currentElement.att(w,_,E)}catch(D){return this.emit("error",D),this}return this},C.prototype.com=function(w){var _;this._serializeOpenTag(!0);try{_=c.fragment(this._builderOptions).com(w).first().node}catch(E){return this.emit("error",E),this}return!this._options.wellFormed||f.xml_isLegalChar(_.data)&&_.data.indexOf("--")===-1&&!_.data.endsWith("-")?(this._push(this._writer.comment(_.data)),this):(this.emit("error",new Error("Comment data contains invalid characters (well-formed required).")),this)},C.prototype.txt=function(w){if(!this._fragment&&this._currentElement===void 0)return this.emit("error",new Error("Cannot insert a text node as child of a document node.")),this;var _;this._serializeOpenTag(!0);try{_=c.fragment(this._builderOptions).txt(w).first().node}catch(D){return this.emit("error",D),this}if(this._options.wellFormed&&!f.xml_isLegalChar(_.data))return this.emit("error",new Error("Text data contains invalid characters (well-formed required).")),this;var E=_.data.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return this._push(this._writer.text(E)),this},C.prototype.ins=function(w,_){var E;_===void 0&&(_=""),this._serializeOpenTag(!0);try{E=c.fragment(this._builderOptions).ins(w,_).first().node}catch(D){return this.emit("error",D),this}return this._options.wellFormed&&(E.target.indexOf(":")!==-1||/^xml$/i.test(E.target))?(this.emit("error",new Error("Processing instruction target contains invalid characters (well-formed required).")),this):this._options.wellFormed&&!f.xml_isLegalChar(E.data)?(this.emit("error",Error("Processing instruction data contains invalid characters (well-formed required).")),this):(this._push(this._writer.instruction(E.target,E.data)),this)},C.prototype.dat=function(w){var _;this._serializeOpenTag(!0);try{_=c.fragment(this._builderOptions).dat(w).first().node}catch(E){return this.emit("error",E),this}return this._push(this._writer.cdata(_.data)),this},C.prototype.dec=function(w){return w===void 0&&(w={version:"1.0"}),this._fragment?(this.emit("error",Error("Cannot insert an XML declaration into a document fragment.")),this):this._hasDeclaration?(this.emit("error",Error("XML declaration is already inserted.")),this):(this._push(this._writer.declaration(w.version||"1.0",w.encoding,w.standalone)),this._hasDeclaration=!0,this)},C.prototype.dtd=function(w){if(this._fragment)return this.emit("error",Error("Cannot insert a DocType declaration into a document fragment.")),this;if(this._docTypeName!=="")return this.emit("error",new Error("DocType declaration is already inserted.")),this;if(this._hasDocumentElement)return this.emit("error",new Error("Cannot insert DocType declaration after document element.")),this;var _;try{_=c.create().dtd(w).first().node}catch(E){return this.emit("error",E),this}return this._options.wellFormed&&!f.xml_isPubidChar(_.publicId)?(this.emit("error",new Error("DocType public identifier does not match PubidChar construct (well-formed required).")),this):this._options.wellFormed&&(!f.xml_isLegalChar(_.systemId)||_.systemId.indexOf('"')!==-1&&_.systemId.indexOf("'")!==-1)?(this.emit("error",new Error("DocType system identifier contains invalid characters (well-formed required).")),this):(this._docTypeName=w.name,this._push(this._writer.docType(w.name,_.publicId,_.systemId)),this)},C.prototype.import=function(w){var _,E,D=c.fragment().set(this._options);try{D.import(w)}catch(M){return this.emit("error",M),this}try{for(var O=s(D.node.childNodes),N=O.next();!N.done;N=O.next()){var R=N.value;this._fromNode(R)}}catch(M){_={error:M}}finally{try{N&&!N.done&&(E=O.return)&&E.call(O)}finally{if(_)throw _.error}}return this},C.prototype.up=function(){return this._serializeOpenTag(!1),this._serializeCloseTag(),this},C.prototype.end=function(){for(this._serializeOpenTag(!1);this._openTags.length>0;)this._serializeCloseTag();return this._push(null),this},C.prototype._serializeOpenTag=function(w){if(!this._currentElementSerialized&&this._currentElement!==void 0){var _=this._currentElement.node;if(!this._options.wellFormed||_.localName.indexOf(":")===-1&&f.xml_isName(_.localName)){var E="",D=!1,O=this._prefixMap.copy(),N={},R=this._recordNamespaceInformation(_,O,N),M=this._openTags.length===0?null:this._openTags[this._openTags.length-1][1],A=_.namespaceURI;if(A===null&&(A=M),M===A)R!==null&&(D=!0),E=A===h.namespace.XML?"xml:"+_.localName:_.localName,this._writer.beginElement(E),this._push(this._writer.openTagBegin(E));else{var G=_.prefix,j=null;if(G===null&&A===R||(j=O.get(G,A)),G==="xmlns"){if(this._options.wellFormed)return void this.emit("error",new Error("An element cannot have the 'xmlns' prefix (well-formed required)."));j=G}j!==null?(E=j+":"+_.localName,R!==null&&R!==h.namespace.XML&&(M=R||null),this._writer.beginElement(E),this._push(this._writer.openTagBegin(E))):G!==null?(G in N&&(G=this._generatePrefix(A,O,this._prefixIndex)),O.set(G,A),E+=G+":"+_.localName,this._writer.beginElement(E),this._push(this._writer.openTagBegin(E)),this._push(this._writer.attribute("xmlns:"+G,this._serializeAttributeValue(A,this._options.wellFormed))),R!==null&&(M=R||null)):R===null||R!==null&&R!==A?(D=!0,E+=_.localName,M=A,this._writer.beginElement(E),this._push(this._writer.openTagBegin(E)),this._push(this._writer.attribute("xmlns",this._serializeAttributeValue(A,this._options.wellFormed)))):(E+=_.localName,M=A,this._writer.beginElement(E),this._push(this._writer.openTagBegin(E)))}this._serializeAttributes(_,O,this._prefixIndex,N,D,this._options.wellFormed);var k=A===h.namespace.HTML;k&&!w&&C._VoidElementNames.has(_.localName)?(this._push(this._writer.openTagEnd(E,!0,!0)),this._writer.endElement(E)):k||w?this._push(this._writer.openTagEnd(E,!1,!1)):(this._push(this._writer.openTagEnd(E,!0,!1)),this._writer.endElement(E)),this._currentElementSerialized=!0,this._openTags.push([E,M,this._prefixMap,w]),this._isPrefixMapModified(this._prefixMap,O)&&(this._prefixMap=O),this._writer.level++}else this.emit("error",new Error("Node local name contains invalid characters (well-formed required)."))}},C.prototype._serializeCloseTag=function(){this._writer.level--;var w=this._openTags.pop();if(w!==void 0){var _=u(w,4),E=_[0],D=(_[1],_[2]),O=_[3];this._prefixMap=D,O&&(this._push(this._writer.closeTag(E)),this._writer.endElement(E))}else this.emit("error",new Error("Last element is undefined."))},C.prototype._push=function(w){w===null?(this._ended=!0,this.emit("end")):this._ended?this.emit("error",new Error("Cannot push to ended stream.")):w.length!==0&&(this._writer.hasData=!0,this.emit("data",w,this._writer.level))},C.prototype._fromNode=function(w){var _,E,D,O;if(x.Guard.isElementNode(w)){var N=w.prefix?w.prefix+":"+w.localName:w.localName;w.namespaceURI!==null?this.ele(w.namespaceURI,N):this.ele(N);try{for(var R=s(w.attributes),M=R.next();!M.done;M=R.next()){var A=M.value,G=A.prefix?A.prefix+":"+A.localName:A.localName;A.namespaceURI!==null?this.att(A.namespaceURI,G,A.value):this.att(G,A.value)}}catch(B){_={error:B}}finally{try{M&&!M.done&&(E=R.return)&&E.call(R)}finally{if(_)throw _.error}}try{for(var j=s(w.childNodes),k=j.next();!k.done;k=j.next()){var F=k.value;this._fromNode(F)}}catch(B){D={error:B}}finally{try{k&&!k.done&&(O=j.return)&&O.call(j)}finally{if(D)throw D.error}}this.up()}else x.Guard.isExclusiveTextNode(w)&&w.data?this.txt(w.data):x.Guard.isCommentNode(w)?this.com(w.data):x.Guard.isCDATASectionNode(w)?this.dat(w.data):x.Guard.isProcessingInstructionNode(w)&&this.ins(w.target,w.data)},C.prototype._serializeAttributes=function(w,_,E,D,O,N){var R,M,A=N?new y.LocalNameSet:void 0;try{for(var G=s(w.attributes),j=G.next();!j.done;j=G.next()){var k=j.value;if(N||O||k.namespaceURI!==null){if(N&&A&&A.has(k.namespaceURI,k.localName))return void this.emit("error",new Error("Element contains duplicate attributes (well-formed required)."));N&&A&&A.set(k.namespaceURI,k.localName);var F=k.namespaceURI,B=null;if(F!==null)if(B=_.get(k.prefix,F),F===h.namespace.XMLNS){if(k.value===h.namespace.XML||k.prefix===null&&O||k.prefix!==null&&(!(k.localName in D)||D[k.localName]!==k.value)&&_.has(k.localName,k.value))continue;if(N&&k.value===h.namespace.XMLNS)return void this.emit("error",new Error("XMLNS namespace is reserved (well-formed required)."));if(N&&k.value==="")return void this.emit("error",new Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required)."));k.prefix==="xmlns"&&(B="xmlns")}else B===null&&(B=k.prefix===null||_.hasPrefix(k.prefix)&&!_.has(k.prefix,F)?this._generatePrefix(F,_,E):k.prefix,this._push(this._writer.attribute("xmlns:"+B,this._serializeAttributeValue(F,this._options.wellFormed))));if(N&&(k.localName.indexOf(":")!==-1||!f.xml_isName(k.localName)||k.localName==="xmlns"&&F===null))return void this.emit("error",new Error("Attribute local name contains invalid characters (well-formed required)."));this._push(this._writer.attribute((B!==null?B+":":"")+k.localName,this._serializeAttributeValue(k.value,this._options.wellFormed)))}else this._push(this._writer.attribute(k.localName,this._serializeAttributeValue(k.value,this._options.wellFormed)))}}catch($){R={error:$}}finally{try{j&&!j.done&&(M=G.return)&&M.call(G)}finally{if(R)throw R.error}}},C.prototype._serializeAttributeValue=function(w,_){return _&&w!==null&&!f.xml_isLegalChar(w)?(this.emit("error",new Error("Invalid characters in attribute value.")),""):w===null?"":w.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},C.prototype._recordNamespaceInformation=function(w,_,E){var D,O,N=null;try{for(var R=s(w.attributes),M=R.next();!M.done;M=R.next()){var A=M.value,G=A.namespaceURI,j=A.prefix;if(G===h.namespace.XMLNS){if(j===null){N=A.value;continue}var k=A.localName,F=A.value;if(F===h.namespace.XML||(F===""&&(F=null),_.has(k,F)))continue;_.set(k,F),E[k]=F||""}}}catch(B){D={error:B}}finally{try{M&&!M.done&&(O=R.return)&&O.call(R)}finally{if(D)throw D.error}}return N},C.prototype._generatePrefix=function(w,_,E){var D="ns"+E.value;return E.value++,_.set(D,w),D},C.prototype._isPrefixMapModified=function(w,_){var E=w._items,D=_._items,O=w._nullItems,N=_._nullItems;for(var R in D){var M=E[R];if(M===void 0)return!0;var A=D[R];if(M.length!==A.length)return!0;for(var G=0;G<M.length;G++)if(M[G]!==A[G])return!0}if(O.length!==N.length)return!0;for(G=0;G<O.length;G++)if(O[G]!==N[G])return!0;return!1},C._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),C}(i(308).EventEmitter);r.XMLBuilderCBImpl=S},function(n,r,i){i(74);var a,o=this&&this.__extends||(a=function(u,l){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,c){p.__proto__=c}||function(p,c){for(var f in c)c.hasOwnProperty(f)&&(p[f]=c[f])})(u,l)},function(u,l){function p(){this.constructor=u}a(u,l),u.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(u){function l(p){var c=u.call(this,p)||this;return c._lineLength=0,c}return o(l,u),l.prototype.frontMatter=function(){return""},l.prototype.declaration=function(p,c,f){var h=this._beginLine()+"<?xml";return h+=' version="'+p+'"',c!==void 0&&(h+=' encoding="'+c+'"'),f!==void 0&&(h+=' standalone="'+(f?"yes":"no")+'"'),h+="?>"},l.prototype.docType=function(p,c,f){var h=this._beginLine();return h+=c&&f?"<!DOCTYPE "+p+' PUBLIC "'+c+'" "'+f+'">':c?"<!DOCTYPE "+p+' PUBLIC "'+c+'">':f?"<!DOCTYPE "+p+' SYSTEM "'+f+'">':"<!DOCTYPE "+p+">"},l.prototype.comment=function(p){return this._beginLine()+"<!--"+p+"-->"},l.prototype.text=function(p){return this._beginLine()+p},l.prototype.instruction=function(p,c){return c?this._beginLine()+"<?"+p+" "+c+"?>":this._beginLine()+"<?"+p+"?>"},l.prototype.cdata=function(p){return this._beginLine()+"<![CDATA["+p+"]]>"},l.prototype.openTagBegin=function(p){return this._lineLength+=1+p.length,this._beginLine()+"<"+p},l.prototype.openTagEnd=function(p,c,f){return f?" />":c?this._writerOptions.allowEmptyTags?"></"+p+">":this._writerOptions.spaceBeforeSlash?" />":"/>":">"},l.prototype.closeTag=function(p){return this._beginLine()+"</"+p+">"},l.prototype.attribute=function(p,c){var f=p+'="'+c+'"';return this._writerOptions.prettyPrint&&this._writerOptions.width>0&&this._lineLength+1+f.length>this._writerOptions.width?(f=this._beginLine()+this._indent(1)+f,this._lineLength=f.length,f):(this._lineLength+=1+f.length," "+f)},l.prototype.beginElement=function(p){},l.prototype.endElement=function(p){},l.prototype._beginLine=function(){if(this._writerOptions.prettyPrint){var p=(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level);return this._lineLength=p.length,p}return""},l.prototype._indent=function(p){return p<=0?"":this._writerOptions.indent.repeat(p)},l}(i(114).BaseCBWriter);r.XMLCBWriter=s},function(n,r,i){i(74);var a,o=this&&this.__extends||(a=function(u,l){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,c){p.__proto__=c}||function(p,c){for(var f in c)c.hasOwnProperty(f)&&(p[f]=c[f])})(u,l)},function(u,l){function p(){this.constructor=u}a(u,l),u.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(u){function l(p){var c=u.call(this,p)||this;return c._hasChildren=[],c._additionalLevel=0,c}return o(l,u),l.prototype.frontMatter=function(){return""},l.prototype.declaration=function(p,c,f){return""},l.prototype.docType=function(p,c,f){return""},l.prototype.comment=function(p){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.comment)+this._sep()+this._val(p)+this._sep()+"}"},l.prototype.text=function(p){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.text)+this._sep()+this._val(p)+this._sep()+"}"},l.prototype.instruction=function(p,c){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.ins)+this._sep()+this._val(c?p+" "+c:p)+this._sep()+"}"},l.prototype.cdata=function(p){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.cdata)+this._sep()+this._val(p)+this._sep()+"}"},l.prototype.attribute=function(p,c){return this._comma()+this._beginLine(1)+"{"+this._sep()+this._key(this._builderOptions.convert.att+p)+this._sep()+this._val(c)+this._sep()+"}"},l.prototype.openTagBegin=function(p){var c=this._comma()+this._beginLine()+"{"+this._sep()+this._key(p)+this._sep()+"{";return this._additionalLevel++,this.hasData=!0,c+=this._beginLine()+this._key(this._builderOptions.convert.text)+this._sep()+"[",this._hasChildren.push(!1),c},l.prototype.openTagEnd=function(p,c,f){if(c){var h=this._sep()+"]";return this._additionalLevel--,h+=this._beginLine()+"}"+this._sep()+"}"}return""},l.prototype.closeTag=function(p){var c=this._beginLine()+"]";return this._additionalLevel--,c+=this._beginLine()+"}"+this._sep()+"}"},l.prototype.beginElement=function(p){},l.prototype.endElement=function(p){this._hasChildren.pop()},l.prototype._beginLine=function(p){return p===void 0&&(p=0),this._writerOptions.prettyPrint?(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level+p):""},l.prototype._indent=function(p){return p+this._additionalLevel<=0?"":this._writerOptions.indent.repeat(p+this._additionalLevel)},l.prototype._comma=function(){var p=this._hasChildren[this._hasChildren.length-1]?",":"";return this._hasChildren.length>0&&(this._hasChildren[this._hasChildren.length-1]=!0),p},l.prototype._sep=function(){return this._writerOptions.prettyPrint?" ":""},l.prototype._key=function(p){return'"'+p+'":'},l.prototype._val=function(p){return JSON.stringify(p)},l}(i(114).BaseCBWriter);r.JSONCBWriter=s},function(n,r,i){i(74);var a,o=this&&this.__extends||(a=function(u,l){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,c){p.__proto__=c}||function(p,c){for(var f in c)c.hasOwnProperty(f)&&(p[f]=c[f])})(u,l)},function(u,l){function p(){this.constructor=u}a(u,l),u.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(u){function l(p){var c=u.call(this,p)||this;if(c._rootWritten=!1,c._additionalLevel=0,p.indent.length<2)throw new Error("YAML indententation string must be at least two characters long.");if(p.offset<0)throw new Error("YAML offset should be zero or a positive number.");return c}return o(l,u),l.prototype.frontMatter=function(){return this._beginLine()+"---"},l.prototype.declaration=function(p,c,f){return""},l.prototype.docType=function(p,c,f){return""},l.prototype.comment=function(p){return this._beginLine()+this._key(this._builderOptions.convert.comment)+" "+this._val(p)},l.prototype.text=function(p){return this._beginLine()+this._key(this._builderOptions.convert.text)+" "+this._val(p)},l.prototype.instruction=function(p,c){return this._beginLine()+this._key(this._builderOptions.convert.ins)+" "+this._val(c?p+" "+c:p)},l.prototype.cdata=function(p){return this._beginLine()+this._key(this._builderOptions.convert.cdata)+" "+this._val(p)},l.prototype.attribute=function(p,c){this._additionalLevel++;var f=this._beginLine()+this._key(this._builderOptions.convert.att+p)+" "+this._val(c);return this._additionalLevel--,f},l.prototype.openTagBegin=function(p){var c=this._beginLine()+this._key(p);return this._rootWritten||(this._rootWritten=!0),this.hasData=!0,this._additionalLevel++,c+=this._beginLine(!0)+this._key(this._builderOptions.convert.text)},l.prototype.openTagEnd=function(p,c,f){return c?" "+this._val(""):""},l.prototype.closeTag=function(p){return this._additionalLevel--,""},l.prototype.beginElement=function(p){},l.prototype.endElement=function(p){},l.prototype._beginLine=function(p){return p===void 0&&(p=!1),(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level,p)},l.prototype._indent=function(p,c){if(p+this._additionalLevel<=0)return"";var f=this._writerOptions.indent.repeat(p+this._additionalLevel);return!c&&this._rootWritten?f.substr(0,f.length-2)+"-"+f.substr(-1,1):f},l.prototype._key=function(p){return'"'+p+'":'},l.prototype._val=function(p){return JSON.stringify(p)},l}(i(114).BaseCBWriter);r.YAMLCBWriter=s},function(n,r,i){var a,o=typeof Reflect=="object"?Reflect:null,s=o&&typeof o.apply=="function"?o.apply:function(d,S,T){return Function.prototype.apply.call(d,S,T)};a=o&&typeof o.ownKeys=="function"?o.ownKeys:Object.getOwnPropertySymbols?function(d){return Object.getOwnPropertyNames(d).concat(Object.getOwnPropertySymbols(d))}:function(d){return Object.getOwnPropertyNames(d)};var u=Number.isNaN||function(d){return d!=d};function l(){l.init.call(this)}n.exports=l,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var p=10;function c(d){if(typeof d!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof d)}function f(d){return d._maxListeners===void 0?l.defaultMaxListeners:d._maxListeners}function h(d,S,T,C){var w,_,E,D;if(c(T),(_=d._events)===void 0?(_=d._events=Object.create(null),d._eventsCount=0):(_.newListener!==void 0&&(d.emit("newListener",S,T.listener?T.listener:T),_=d._events),E=_[S]),E===void 0)E=_[S]=T,++d._eventsCount;else if(typeof E=="function"?E=_[S]=C?[T,E]:[E,T]:C?E.unshift(T):E.push(T),(w=f(d))>0&&E.length>w&&!E.warned){E.warned=!0;var O=new Error("Possible EventEmitter memory leak detected. "+E.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");O.name="MaxListenersExceededWarning",O.emitter=d,O.type=S,O.count=E.length,D=O,console&&console.warn&&console.warn(D)}return d}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(d,S,T){var C={fired:!1,wrapFn:void 0,target:d,type:S,listener:T},w=v.bind(C);return w.listener=T,C.wrapFn=w,w}function x(d,S,T){var C=d._events;if(C===void 0)return[];var w=C[S];return w===void 0?[]:typeof w=="function"?T?[w.listener||w]:[w]:T?function(_){for(var E=new Array(_.length),D=0;D<E.length;++D)E[D]=_[D].listener||_[D];return E}(w):g(w,w.length)}function m(d){var S=this._events;if(S!==void 0){var T=S[d];if(typeof T=="function")return 1;if(T!==void 0)return T.length}return 0}function g(d,S){for(var T=new Array(S),C=0;C<S;++C)T[C]=d[C];return T}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return p},set:function(d){if(typeof d!="number"||d<0||u(d))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+d+".");p=d}}),l.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(d){if(typeof d!="number"||d<0||u(d))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+d+".");return this._maxListeners=d,this},l.prototype.getMaxListeners=function(){return f(this)},l.prototype.emit=function(d){for(var S=[],T=1;T<arguments.length;T++)S.push(arguments[T]);var C=d==="error",w=this._events;if(w!==void 0)C=C&&w.error===void 0;else if(!C)return!1;if(C){var _;if(S.length>0&&(_=S[0]),_ instanceof Error)throw _;var E=new Error("Unhandled error."+(_?" ("+_.message+")":""));throw E.context=_,E}var D=w[d];if(D===void 0)return!1;if(typeof D=="function")s(D,this,S);else{var O=D.length,N=g(D,O);for(T=0;T<O;++T)s(N[T],this,S)}return!0},l.prototype.addListener=function(d,S){return h(this,d,S,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(d,S){return h(this,d,S,!0)},l.prototype.once=function(d,S){return c(S),this.on(d,y(this,d,S)),this},l.prototype.prependOnceListener=function(d,S){return c(S),this.prependListener(d,y(this,d,S)),this},l.prototype.removeListener=function(d,S){var T,C,w,_,E;if(c(S),(C=this._events)===void 0)return this;if((T=C[d])===void 0)return this;if(T===S||T.listener===S)--this._eventsCount==0?this._events=Object.create(null):(delete C[d],C.removeListener&&this.emit("removeListener",d,T.listener||S));else if(typeof T!="function"){for(w=-1,_=T.length-1;_>=0;_--)if(T[_]===S||T[_].listener===S){E=T[_].listener,w=_;break}if(w<0)return this;w===0?T.shift():function(D,O){for(;O+1<D.length;O++)D[O]=D[O+1];D.pop()}(T,w),T.length===1&&(C[d]=T[0]),C.removeListener!==void 0&&this.emit("removeListener",d,E||S)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(d){var S,T,C;if((T=this._events)===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[d]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete T[d]),this;if(arguments.length===0){var w,_=Object.keys(T);for(C=0;C<_.length;++C)(w=_[C])!=="removeListener"&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(S=T[d])=="function")this.removeListener(d,S);else if(S!==void 0)for(C=S.length-1;C>=0;C--)this.removeListener(d,S[C]);return this},l.prototype.listeners=function(d){return x(this,d,!0)},l.prototype.rawListeners=function(d){return x(this,d,!1)},l.listenerCount=function(d,S){return typeof d.listenerCount=="function"?d.listenerCount(S):m.call(d,S)},l.prototype.listenerCount=m,l.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var a=i(77);r.createCB=function(o){return new a.XMLBuilderCBImpl(o)},r.fragmentCB=function(o){return new a.XMLBuilderCBImpl(o,!0)}}])})})(U9);var gV=U9.exports;const fn=[];fn[45]=62;fn[95]=63;const Ua="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(let t=0;t<Ua.length;t++)fn[Ua.charCodeAt(t)]=t;function nr(t){return fn[t.charCodeAt(0)]!==void 0}function dV(t){const e=t.length,n=[];let r=null;for(let i=0;i<e;i++)nr(t[i])?(r||(r={start:i,count:0}),r.count++,r.end=i):t[i]==="="&&r&&(n.push(r),r=null);return r&&n.push(r),n}function vV(t,e,n,r){const{start:i,count:a}=e,o=a%4,s=Math.floor(a/4);let u=i,l=null,p=n;for(let c=0;c<s;c++){for(;!nr(t[u]);)u++;for(l=fn[t.charCodeAt(u++)]<<18;!nr(t[u]);)u++;for(l|=fn[t.charCodeAt(u++)]<<12;!nr(t[u]);)u++;for(l|=fn[t.charCodeAt(u++)]<<6;!nr(t[u]);)u++;l|=fn[t.charCodeAt(u++)],r[p++]=l>>16&255,r[p++]=l>>8&255,r[p++]=l&255}switch(o){case 3:for(;!nr(t[u]);)u++;for(l=fn[t.charCodeAt(u++)]<<10;!nr(t[u]);)u++;for(l|=fn[t.charCodeAt(u++)]<<4;!nr(t[u]);)u++;l|=fn[t.charCodeAt(u++)]>>2,r[p++]=l>>8&255,r[p++]=l&255;break;case 2:for(;!nr(t[u]);)u++;for(l=fn[t.charCodeAt(u++)]<<2;!nr(t[u]);)u++;l|=fn[t.charCodeAt(u++)]>>4,r[p++]=l&255;break;case 1:throw new Error("BASE64: remain 1 should not happen")}return p}function yV(t){const e=dV(t),n=e[e.length-1].end+1,r=(4-n%4)%4,i=(n+r)*3/4-r,a=new ArrayBuffer(i),o=new Uint8Array(a);let s=0;for(let u=0;u<e.length;u++)s+=vV(t,e[u],s,o),s+=(4-e[u].count%4)%4;return a}function T2(t,e,n){const r=(t<<16)+(e<<8)+n;return Ua[r>>18]+Ua[r>>12&63]+Ua[r>>6&63]+Ua[r&63]}function mV(t){const e=new Uint8Array(t),n=t.byteLength%3,r=t.byteLength-n,i=Array(r/3);for(let a=0;a<i.length;a++){const o=a*3;i[a]=T2(e[o],e[o+1],e[o+2])}if(n>0){const a=T2(e[r],e[r+1]||0,e[r+2]||0);n===1?i.push(`${a.substr(0,2)}==`):n===2&&i.push(`${a.substr(0,3)}=`)}return i.join("")}var _1={toArrayBuffer:yV,fromArrayBuffer:mV};function xV(t,e){e.classHierarchy.push("vtkStringArray"),t.getComponent=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.values[n*e.numberOfComponents+r]},t.setComponent=(n,r,i)=>{i!==e.values[n*e.numberOfComponents+r]&&(e.values[n*e.numberOfComponents+r]=i,t.modified())},t.getData=()=>e.values,t.getTuple=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=e.numberOfComponents||1;r.length&&(r.length=i);const a=n*i;for(let o=0;o<i;o++)r[o]=e.values[a+o];return r},t.getTupleLocation=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*e.numberOfComponents},t.getNumberOfComponents=()=>e.numberOfComponents,t.getNumberOfValues=()=>e.values.length,t.getNumberOfTuples=()=>e.values.length/e.numberOfComponents,t.getDataType=()=>e.dataType,t.newClone=()=>P9({name:e.name,numberOfComponents:e.numberOfComponents,empty:!0}),t.getName=()=>(e.name||t.setName(`vtkStringArray${t.getMTime()}`),e.name),t.setData=(n,r)=>{e.values=n,e.size=n.length,r&&(e.numberOfComponents=r),e.size%e.numberOfComponents!==0&&(e.numberOfComponents=1),t.modified()}}const SV={name:"",numberOfComponents:1,size:0,dataType:"string"};function G9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,SV,n),!e.empty&&!e.values&&!e.size)throw new TypeError("Cannot create vtkStringArray object without: size > 0, values");e.values?Array.isArray(e.values)&&(e.values=[...e.values]):e.values=[],e.values&&(e.size=e.values.length),P.obj(t,e),P.set(t,e,["name"]),xV(t,e)}const P9=P.newInstance(G9,"vtkStringArray");var TV={newInstance:P9,extend:G9};function I9(t){return new TextDecoder("latin1").decode(t)}function CV(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const r=I9(t),i=e.exec(r);if(!i)return{text:r};const a=i.index+i[0].length,o=r.substring(0,a);let s=null;const u=n?n.exec(r):null;if(u){const l=r.substr(u.index);s={text:o+l,binaryBuffer:t.slice(a,u.index)}}else s={text:o,binaryBuffer:t.slice(a)};return s}var wV={arrayBufferToString:I9,extractBinary:CV};const{vtkErrorMacro:z9,vtkDebugMacro:_V}=P,E1=()=>(z9("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead."),Promise.reject(new Error("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead.")));let po=0;function qc(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=new XMLHttpRequest;return r.open(t,e,!0),n.headers&&Object.entries(n.headers).forEach(i=>{let[a,o]=i;return r.setRequestHeader(a,o)}),n.progressCallback&&r.addEventListener("progress",n.progressCallback),r}function EV(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,r)=>{const i=qc("GET",t,e);i.onreadystatechange=a=>{i.readyState===4&&(i.status===200||i.status===0?n(i.response):r({xhr:i,e:a}))},i.responseType="arraybuffer",i.send()})}function DV(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return r&&r.compression?E1():n.ref&&!n.ref.pending?new Promise((i,a)=>{const o=[e,n.ref.basepath,n.ref.id].join("/"),s=qc("GET",o,r);s.onreadystatechange=u=>{s.readyState===1&&(n.ref.pending=!0,++po===1&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!0)),s.readyState===4&&(n.ref.pending=!1,s.status===200||s.status===0?(n.buffer=s.response,n.ref.encode==="JSON"?n.values=JSON.parse(n.buffer):(Qa.ENDIANNESS!==n.ref.encode&&Qa.ENDIANNESS&&(_V(`Swap bytes of ${n.name}`),Qa.swapBytes(n.buffer,i1[n.dataType])),n.values=P.newTypedArray(n.dataType,n.buffer)),n.values.length!==n.size&&z9(`Error in FetchArray: ${n.name}, does not have the proper array size. Got ${n.values.length}, instead of ${n.size}`),delete n.ref,--po===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),t!=null&&t.modified&&t.modified(),i(n)):a({xhr:s,e:u}))},s.responseType=n.dataType!=="string"?"arraybuffer":"text",s.send()}):Promise.resolve(n)}function OV(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n&&n.compression?E1():new Promise((r,i)=>{const a=qc("GET",e,n);a.onreadystatechange=o=>{a.readyState===1&&++po===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),a.readyState===4&&(--po===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),a.status===200||a.status===0?r(JSON.parse(a.responseText)):i({xhr:a,e:o}))},a.responseType="text",a.send()})}function bV(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n&&n.compression?E1():new Promise((r,i)=>{const a=qc("GET",e,n);a.onreadystatechange=o=>{a.readyState===1&&++po===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),a.readyState===4&&(--po===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),a.status===200||a.status===0?r(a.responseText):i({xhr:a,e:o}))},a.responseType="text",a.send()})}function NV(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((r,i)=>{const a=new Image;n.crossOrigin&&(a.crossOrigin=n.crossOrigin),a.onload=()=>r(a),a.onerror=i,a.src=e})}const MV={fetchArray:DV,fetchJSON:OV,fetchText:bV,fetchBinary:EV,fetchImage:NV};A9("http")||w1("http",t=>MV);function RV(t,e){return[...t.getElementsByTagName(e)]}function C2(t,e){return RV(t,e)[0]}function FV(t){return gV.create(t)}function LV(t){const e=/^\s*<AppendedData\s+encoding="raw">\s*_/m,n=/\n\s*<\/AppendedData>/m;return wV.extractBinary(t,e,n)}const ai={Int8:Int8Array,UInt8:Uint8Array,Int16:Int16Array,UInt16:Uint16Array,Int32:Int32Array,UInt32:Uint32Array,Int64:Int32Array,UInt64:Uint32Array,Float32:Float32Array,Float64:Float64Array},Bs={Int8:1,UInt8:1,Int16:2,UInt16:2,Int32:4,UInt32:4,Int64:8,UInt64:8,Float32:4,Float64:8};function Sp(t){const e=t.length-1;return t.filter((n,r)=>r<e&&r%2===0)}function Tp(t,e,n){if(!["UInt64","UInt32"].includes(n))throw new Error(`Cannot handle a header type of ${n}`);let r=ai[n],i=ai[e],a=!1;n==="UInt64"&&(r=ai.UInt32),/^U?Int64$/.test(e)&&(a=!0,i=ai[e.replace("64","32")]);const{byteOffset:o}=t,s=Bs[e],u=Bs[n];let l;o%u===0?l=new r(t.buffer,o,1):l=new r(t.buffer.slice(o,o+u));const p=Number(l[0]);let c,f=p/s;a&&(f*=2);const h=o+u;return h%s===0?c=new i(t.buffer,h,f):c=new i(t.buffer.slice(h,h+p)),a&&(c=Sp(c)),c}function kV(t,e){if(e==="UInt64"){let l=new Uint32Array(t.buffer,0,6);const p=l[0],c=l[2],f=l[4],h=[8,p,c,f];l=new Uint32Array(t.buffer,3*8,p*2);for(let v=0;v<p;v++)h.push(l[v*2]);return h}let n=new Uint32Array(t.buffer,0,3);const r=4,i=n[0],a=n[1],o=n[2],s=[r,i,a,o];n=new Uint32Array(t.buffer,3*4,i);for(let u=0;u<i;u++)s.push(n[u]);return s}function BV(t,e){const[n]=t;return(t.length-1)*n}function VV(t,e){const n=lo(t);e.uint8.set(n,e.offset),e.offset+=n.length}function D1(t,e){const n=kV(t,e),r=n[1],i=n[2],a=n[3];let o=0;r>0&&(a===0?o=r*i:o=(r-1)*i+a);const s=new ArrayBuffer(o),u={offset:0,uint8:new Uint8Array(s)};let l=BV(n);for(;l<t.length&&t[l]!==120;)l++;for(let p=0;p<r;p++){const c=n[4+p],f=new Uint8Array(t.buffer,l,c);VV(f,u),l+=c}return u.uint8}function Vs(t,e,n,r,i,a){const o=e.getAttribute("type"),s=e.getAttribute("Name"),u=e.getAttribute("format"),l=Number(e.getAttribute("NumberOfComponents")||"1");let p=null;if(u==="ascii"){p=new ai[o](t*l);let c=0;e.firstChild.nodeValue.split(/[\\t \\n]+/).forEach(f=>{f.trim().length&&(p[c++]=Number(f))})}else if(u==="binary"){const c=new Uint8Array(_1.toArrayBuffer(e.firstChild.nodeValue.trim()));if(n==="vtkZLibDataCompressor"){const f=D1(c,i);p=new ai[o](f.buffer),/^U?Int64$/.test(o)&&(p=Sp(p))}else p=new ai[o](c.buffer,Bs[i]),o.indexOf("Int64")!==-1&&(p=Sp(p))}else if(u==="appended"){const c=Number(e.getAttribute("offset"));p=Tp(new Uint8Array(a,c),o,i)}else console.error("Format not supported",u);return{name:s,values:p,numberOfComponents:l}}function Jl(t){return new TextDecoder().decode(t).split("\0").slice(0,-1)}function AV(t,e,n,r,i){const a=t.getAttribute("Name"),o=t.getAttribute("format"),s=Number(t.getAttribute("NumberOfComponents")||"1"),l=Number(t.getAttribute("NumberOfTuples")||"1")*s,p=[];if(o==="ascii"){const c=t.firstChild.nodeValue.trim().split(/\s+/);let f=0;const h=[];for(;p.length<l;){const v=Number(c[f++]);v===0?(p.push(h.join("")),h.length=0):h.push(String.fromCharCode(v))}}else if(o==="binary"){const c=new Uint8Array(_1.toArrayBuffer(t.firstChild.nodeValue.trim()));if(e==="vtkZLibDataCompressor"){const f=D1(c,r);p.push(...Jl(f))}else{const f=Tp(c,"UInt8",r);p.push(...Jl(f))}}else if(o==="appended"){const c=Number(t.getAttribute("offset")),f=Tp(new Uint8Array(i,c),"UInt8",r);p.push(...Jl(f))}else P.vtkErrorMacro(`Format not supported: ${o}`);return{name:a,values:p,numberOfComponents:s}}function UV(t,e,n,r,i,a){const o={},s=e.getElementsByTagName("DataArray");for(let v=0;v<s.length;v++){const y=s[v];o[y.getAttribute("Name")]=y}const u=Vs(t,o.offsets,n,r,i,a).values,l=u[u.length-1],p=Vs(l,o.connectivity,n,r,i,a).values,c=new Uint32Array(t+l);let f=0,h=0;return u.forEach(v=>{const y=v-h;c[f++]=y;for(let x=0;x<y;x++)c[f++]=p[h+x];h=v}),c}function GV(t,e,n,r,i,a,o){if(e){const s=["Scalars","Vectors","Normals","Tensors","TCoords"],u={};s.forEach(c=>{const f=e.getAttribute(c);f&&(u[f]=n[`set${c}`])});const l=e.getElementsByTagName("DataArray"),p=l.length;for(let c=0;c<p;c++){const f=l[c],h=Ee.newInstance(Vs(t,f,r,i,a,o)),v=h.getName();(u[v]||n.addArray)(h)}}}function PV(t,e,n,r,i){const a=[...t.getElementsByTagName("DataArray")].map(s=>Ee.newInstance(Vs(Number(s.getAttribute("NumberOfTuples")),s,e,n,r,i))),o=[...t.getElementsByTagName("Array")].filter(s=>s.getAttribute("type")==="String").map(s=>TV.newInstance(AV(s,e,n,r,i)));return[...a,...o]}function IV(t,e){e.classHierarchy.push("vtkXMLReader"),e.dataAccessHelper||(e.dataAccessHelper=aV.get("http"));function n(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.dataAccessHelper.fetchBinary(r,i)}t.setUrl=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.url=r;const a=r.split("/");return a.pop(),e.baseURL=a.join("/"),t.loadData(i)},t.loadData=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return n(e.url,r).then(t.parseAsArrayBuffer)},t.parseAsArrayBuffer=r=>{if(!r)return!1;if(r!==e.rawDataBuffer)t.modified();else return!0;const{text:i,binaryBuffer:a}=LV(r);e.rawDataBuffer=r,e.binaryBuffer=a;const s=FV(i).root(),u=s.node,l=u.getAttribute("type"),p=u.getAttribute("compressor"),c=u.getAttribute("byte_order"),f=u.getAttribute("header_type")||"UInt32";if(p&&p!=="vtkZLibDataCompressor")return console.error("Invalid compressor",p),!1;if(c&&c!=="LittleEndian")return console.error("Only LittleEndian encoding is supported"),!1;if(l!==e.dataType)return console.error("Invalid data type",l,"expecting",e.dataType),!1;if(C2(u,"AppendedData")){const y=C2(u,"AppendedData"),x=y.getAttribute("encoding"),m=s.filter(w=>{const{node:_}=w;return _.nodeType===Node.ELEMENT_NODE&&_.getAttribute("format")==="appended"&&_.hasAttribute("offset")},!1,!0).map(w=>({node:w.node,offset:Number(w.node.getAttribute("offset"))}));m.sort((w,_)=>w.offset-_.offset);let g=e.binaryBuffer;x==="base64"&&(g=y.textContent.trim().substr(1));const d=[];for(let w=0;w<m.length;++w){const _=m[w].offset;let E=0;w===m.length-1?E=g.length||g.byteLength:E=m[w+1].offset,x==="base64"?d.push(new Uint8Array(_1.toArrayBuffer(g.substring(_,E)))):d.push(new Uint8Array(g.slice(_,E)))}if(p==="vtkZLibDataCompressor")for(let w=0;w<d.length;++w){const _=d[w],E=D1(_,f),D=new Uint8Array(E.length+Bs[f]);new ai[f](D.buffer,0,1)[0]=E.length,D.set(E,Bs[f]),d[w]=D}const S=d.reduce((w,_)=>w+_.length,0),T=new ArrayBuffer(S),C=new Uint8Array(T);for(let w=0,_=0;w<d.length;++w)m[w].node.setAttribute("offset",_),C.set(d[w],_),_+=d[w].length;if(e.binaryBuffer=T,!e.binaryBuffer)return console.error("Processing appended data format: requires binaryBuffer to parse"),!1}t.parseXML(u,l,p,c,f);const v=u.getElementsByTagName(l)[0].getElementsByTagName("FieldData")[0];if(v){const y=PV(v,p,c,f,e.binaryBuffer);for(let x=0;x<e.output.length;x++){const m=e.output[x].getFieldData();for(let g=0;g<y.length;g++)m.addArray(y[g])}}return!0},t.requestData=(r,i)=>{t.parseAsArrayBuffer(e.rawDataBuffer)}}const zV={};function WV(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,zV,n),P.obj(t,e),P.get(t,e,["url","baseURL"]),P.setGet(t,e,["dataAccessHelper"]),P.algo(t,e,0,1),IV(t,e)}var Cp={extend:WV,processDataArray:Vs,processFieldData:GV,processCells:UV};function jV(t,e){e.classHierarchy.push("vtkXMLImageDataReader"),t.parseXML=(n,r,i,a,o)=>{var h;const s=n.getElementsByTagName(e.dataType)[0],u=s.getAttribute("Origin").split(" ").map(v=>Number(v)),l=s.getAttribute("Spacing").split(" ").map(v=>Number(v)),p=(h=s.getAttribute("Direction"))==null?void 0:h.split(" ").map(v=>Number(v)),c=s.getElementsByTagName("Piece"),f=c.length;for(let v=0;v<f;v++){const y=c[v],x=y.getAttribute("Extent").split(" ").map(g=>Number(g)),m=u5.newInstance({origin:u,spacing:l,direction:p,extent:x});Cp.processFieldData(m.getNumberOfPoints(),y.getElementsByTagName("PointData")[0],m.getPointData(),i,a,o,e.binaryBuffer),Cp.processFieldData(m.getNumberOfCells(),y.getElementsByTagName("CellData")[0],m.getCellData(),i,a,o,e.binaryBuffer),e.output[v]=m}}}const $V={dataType:"ImageData"};function W9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$V,n),Cp.extend(t,e,n),jV(t,e)}const HV=P.newInstance(W9,"vtkXMLImageDataReader");var KV={newInstance:HV,extend:W9};const XV="/voi-viewer/assets/heart.vti";function qV(t,e){e.classHierarchy.push("vtkCylinderSource");function n(r,i){if(e.deleted)return;let a=i[0];const o=2*Math.PI/e.resolution;let s=2*e.resolution,u=5*e.resolution;e.capping&&(s=4*e.resolution,u=7*e.resolution+2);const l=P.newTypedArray(e.pointType,s*3);let p=0;const c=new Uint32Array(u),f=new Float32Array(s*3),h=Ee.newInstance({numberOfComponents:3,values:f,name:"Normals"}),v=new Float32Array(s*2),y=Ee.newInstance({numberOfComponents:2,values:v,name:"TCoords"}),x=[0,0,0],m=[0,0,0],g=[0,0,0],d=[0,0,0],S=[0,0],T=[0,0],C=e.otherRadius==null?e.radius:e.otherRadius;for(let w=0;w<e.resolution;w++){x[0]=Math.cos(w*o+e.initAngle),m[0]=x[0],g[0]=e.radius*x[0]+e.center[0],d[0]=g[0],S[0]=Math.abs(2*w/e.resolution-1),T[0]=S[0],g[1]=.5*e.height+e.center[1],d[1]=-.5*e.height+e.center[1],S[1]=0,T[1]=1,x[2]=-Math.sin(w*o+e.initAngle),m[2]=x[2],g[2]=C*x[2]+e.center[2],d[2]=g[2];const _=2*w;for(let E=0;E<3;E++)f[_*3+E]=x[E],f[(_+1)*3+E]=m[E],l[_*3+E]=g[E],l[(_+1)*3+E]=d[E],E<2&&(v[_*2+E]=S[E],v[(_+1)*2+E]=T[E])}for(let w=0;w<e.resolution;w++){c[p++]=4,c[p++]=2*w,c[p++]=2*w+1;const _=(2*w+3)%(2*e.resolution);c[p++]=_,c[p++]=_-1}if(e.capping){for(let w=0;w<e.resolution;w++){g[0]=e.radius*Math.cos(w*o+e.initAngle),d[0]=g[0],S[0]=g[0],T[0]=g[0],g[0]+=e.center[0],d[0]+=e.center[0],x[1]=1,m[1]=-1,g[1]=.5*e.height+e.center[1],d[1]=-.5*e.height+e.center[1],g[2]=-C*Math.sin(w*o+e.initAngle),d[2]=g[2],S[1]=g[2],T[1]=g[2],g[2]+=e.center[2],d[2]+=e.center[2];const _=2*e.resolution+w,E=3*e.resolution+e.resolution-w-1;for(let D=0;D<3;D++)f[3*_+D]=x[D],f[3*E+D]=m[D],l[3*_+D]=g[D],l[3*E+D]=d[D],D<2&&(v[2*_+D]=S[D],v[2*E+D]=T[D])}c[p++]=e.resolution;for(let w=0;w<e.resolution;w++)c[p++]=2*e.resolution+w;c[p++]=e.resolution;for(let w=0;w<e.resolution;w++)c[p++]=3*e.resolution+w}Ho.buildFromRadian().translate(...e.center).rotateFromDirections([0,1,0],e.direction).translate(...e.center.map(w=>w*-1)).apply(l),a=sn.newInstance(),a.getPoints().setData(l,3),a.getPolys().setData(c,1),a.getPointData().setNormals(h),a.getPointData().setTCoords(y),i[0]=a}t.requestData=n}const YV={height:1,initAngle:0,radius:1,resolution:6,center:[0,0,0],direction:[0,1,0],capping:!0,pointType:"Float64Array"};function j9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,YV,n),P.obj(t,e),P.setGet(t,e,["height","initAngle","otherRadius","radius","resolution","capping"]),P.setGetArray(t,e,["center","direction"],3),P.algo(t,e,0,1),qV(t,e)}const JV=P.newInstance(j9,"vtkCylinderSource");var QV={newInstance:JV,extend:j9};function Ca(t,e,n){const r=QV.newInstance({height:t,radius:e,center:n,direction:[0,0,1],resolution:20}),i=ua.newInstance();i.setInputConnection(r.getOutputPort());const a=sa.newInstance();return a.setMapper(i),a.getProperty().setOpacity(.4),a.getProperty().setColor(236/255,80/255,85/255),a}var ZV=[{Name:"KAAMS",IndexedColors:[1,1,1,1,0,0,0,1,0,0,0,1,1,1,0,1,0,1,0,1,1,.63,.63,1,.67,.5,.33,1,.5,.75,.53,.35,.7,1,.75,.5],Annotations:[0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11]},{ColorSpace:"Diverging",Name:"Cool to Warm",NanColor:[1,1,0],RGBPoints:[0,.23137254902,.298039215686,.752941176471,.5,.865,.865,.865,1,.705882352941,.0156862745098,.149019607843]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Cool to Warm (Extended)",NanColor:[.25,0,0],RGBPoints:[0,0,0,.34902,.03125,.039216,.062745,.380392,.0625,.062745,.117647,.411765,.09375,.090196,.184314,.45098,.125,.12549,.262745,.501961,.15625,.160784,.337255,.541176,.1875,.2,.396078,.568627,.21875,.239216,.454902,.6,.25,.286275,.521569,.65098,.28125,.337255,.592157,.701961,.3125,.388235,.654902,.74902,.34375,.466667,.737255,.819608,.375,.572549,.819608,.878431,.40625,.654902,.866667,.909804,.4375,.752941,.917647,.941176,.46875,.823529,.956863,.968627,.5,.988235,.960784,.901961,.5,.941176,.984314,.988235,.52,.988235,.945098,.85098,.54,.980392,.898039,.784314,.5625,.968627,.835294,.698039,.59375,.94902,.733333,.588235,.625,.929412,.65098,.509804,.65625,.909804,.564706,.435294,.6875,.878431,.458824,.352941,.71875,.839216,.388235,.286275,.75,.760784,.294118,.211765,.78125,.701961,.211765,.168627,.8125,.65098,.156863,.129412,.84375,.6,.094118,.094118,.875,.54902,.066667,.098039,.90625,.501961,.05098,.12549,.9375,.45098,.054902,.172549,.96875,.4,.054902,.192157,1,.34902,.070588,.211765]},{ColorSpace:"Diverging",Name:"Warm to Cool",NanColor:[1,1,0],RGBPoints:[0,.705882352941,.0156862745098,.149019607843,.5,.865,.865,.865,1,.23137254902,.298039215686,.752941176471]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Warm to Cool (Extended)",NanColor:[.250004,0,0],RGBPoints:[0,.34902,0,.129412,.025,.4,.00392157,.101961,.05,.470588,.0156863,.0901961,.075,.54902,.027451,.0705882,.1,.619608,.0627451,.0431373,.125,.690196,.12549,.0627451,.15,.741176,.184314,.0745098,.175,.788235,.266667,.0941176,.2,.811765,.345098,.113725,.225,.831373,.411765,.133333,.25,.85098,.47451,.145098,.275,.870588,.54902,.156863,.3,.878431,.619608,.168627,.325,.890196,.658824,.196078,.35,.909804,.717647,.235294,.375,.929412,.776471,.278431,.395522,.94902,.823529,.321569,.418905,.968627,.87451,.407843,.444278,.980392,.917647,.509804,.470149,.988235,.956863,.643137,.483582,.992157,.964706,.713725,.499,.988235,.980392,.870588,.5,1,1,1,.501,.913725,.988235,.937255,.516418,.827451,.980392,.886275,.531343,.764706,.980392,.866667,.546766,.658824,.980392,.843137,.564179,.572549,.964706,.835294,.587562,.423529,.941176,.87451,.60597,.262745,.901961,.862745,.629851,.0705882,.854902,.870588,.651741,.0509804,.8,.85098,.681592,.0235294,.709804,.831373,.712935,.0313725,.615686,.811765,.75,.0313725,.537255,.788235,.775,.0392157,.466667,.768627,.8,.0509804,.396078,.741176,.825,.054902,.317647,.709804,.85,.054902,.243137,.678431,.875,.0431373,.164706,.639216,.9,.0313725,.0980392,.6,.925,.0392157,.0392157,.560784,.95,.105882,.0509804,.509804,.975,.113725,.0235294,.45098,1,.12549,0,.380392]},{ColorSpace:"RGB",Name:"Rainbow Desaturated",NanColor:[1,1,0],RGBPoints:[0,.278431372549,.278431372549,.858823529412,.143,0,0,.360784313725,.285,0,1,1,.429,0,.501960784314,0,.571,1,1,0,.714,1,.380392156863,0,.857,.419607843137,0,0,1,.878431372549,.301960784314,.301960784314]},{ColorSpace:"RGB",Name:"Cold and Hot",NanColor:[1,1,0],RGBPoints:[0,0,1,1,.45,0,0,1,.5,0,0,.501960784314,.55,1,0,0,1,1,1,0]},{ColorSpace:"RGB",Name:"Black-Body Radiation",NanColor:[0,.498039215686,1],RGBPoints:[0,0,0,0,.4,.901960784314,0,0,.8,.901960784314,.901960784314,0,1,1,1,1]},{ColorSpace:"RGB",Name:"X Ray",NanColor:[1,0,0],RGBPoints:[0,1,1,1,1,0,0,0]},{ColorSpace:"RGB",Name:"Grayscale",NanColor:[1,0,0],RGBPoints:[0,0,0,0,1,1,1,1]},{ColorSpace:"RGB",Name:"BkRd",NanColor:[0,1,1],RGBPoints:[0,0,0,0,1,1,0,0]},{ColorSpace:"RGB",Name:"BkGn",NanColor:[1,0,1],RGBPoints:[0,0,0,0,1,0,1,0]},{ColorSpace:"RGB",Name:"BkBu",NanColor:[1,1,0],RGBPoints:[0,0,0,0,1,0,0,1]},{ColorSpace:"RGB",Name:"BkMa",NanColor:[0,1,0],RGBPoints:[0,0,0,0,1,1,0,1]},{ColorSpace:"RGB",Name:"BkCy",NanColor:[0,1,1],RGBPoints:[0,0,0,0,1,0,1,1]},{ColorSpace:"RGB",Name:"Black, Blue and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,0,0,.501960784314,.666,0,.501960784314,1,1,1,1,1]},{ColorSpace:"RGB",Name:"Black, Orange and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,.501960784314,0,0,.666,1,.501960784314,0,1,1,1,1]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Linear YGB 1211g",NanColor:[.25,0,0],RGBPoints:[0,1,.988235,.968627,.02,1,.952941,.878431,.05,.968627,.905882,.776471,.1,.94902,.898039,.647059,.15,.901961,.878431,.556863,.2,.847059,.858824,.482353,.25,.690196,.819608,.435294,.3,.513725,.768627,.384314,.35,.337255,.721569,.337255,.4,.278431,.658824,.392157,.45,.231373,.639216,.435294,.5,.203922,.6,.486275,.55,.172549,.568627,.537255,.6,.141176,.517647,.54902,.65,.133333,.458824,.541176,.7,.12549,.396078,.529412,.75,.117647,.321569,.521569,.8,.121569,.258824,.509804,.85,.133333,.227451,.501961,.9,.145098,.192157,.490196,.95,.188235,.164706,.470588,1,.258824,.196078,.439216]},{ColorSpace:"CIELAB",Creator:"Francesca Samsel",Name:"Linear Green (Gr4L)",NanColor:[.25,0,0],RGBPoints:[0,.054902,.109804,.121569,.05,.07451,.172549,.180392,.1,.086275,.231373,.219608,.15,.094118,.278431,.25098,.2,.109804,.34902,.278431,.25,.113725,.4,.278431,.3,.117647,.45098,.270588,.35,.117647,.490196,.243137,.4,.113725,.521569,.203922,.45,.109804,.54902,.152941,.5,.082353,.588235,.082353,.55,.109804,.631373,.05098,.6,.211765,.678431,.082353,.65,.317647,.721569,.113725,.7,.431373,.760784,.160784,.75,.556863,.8,.239216,.8,.666667,.839216,.294118,.85,.784314,.878431,.396078,.9,.886275,.921569,.533333,.95,.960784,.94902,.670588,1,1,.984314,.901961]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Linear Blue (8_31f)",NanColor:[.25,0,0],RGBPoints:[0,.960784,1,.980392,.05,.815686,.960784,.913725,.1,.670588,.929412,.870588,.15,.556863,.901961,.843137,.2,.478431,.870588,.823529,.25,.439216,.831373,.803922,.3,.4,.8,.788235,.35,.376471,.768627,.768627,.4,.34902,.709804,.729412,.45,.32549,.654902,.690196,.5,.301961,.607843,.658824,.55,.247059,.545098,.619608,.6,.239216,.494118,.580392,.65,.227451,.439216,.541176,.7,.227451,.403922,.521569,.75,.231373,.368627,.501961,.8,.227451,.321569,.470588,.85,.219608,.282353,.439216,.9,.192157,.235294,.4,.95,.160784,.184314,.34902,1,.133333,.12549,.301961]},{ColorSpace:"HSV",Name:"Blue to Red Rainbow",NanColor:[.498039215686,.498039215686,.498039215686],RGBPoints:[0,0,0,1,1,1,0,0]},{ColorSpace:"HSV",Name:"Red to Blue Rainbow",NanColor:[.498039215686,.498039215686,.498039215686],RGBPoints:[0,1,0,0,1,0,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended White",NanColor:[1,1,0],RGBPoints:[0,1,1,1,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended Grey",NanColor:[1,1,0],RGBPoints:[0,.317647058824,.341176470588,.43137254902,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended Black",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Blue to Yellow",NanColor:[1,0,0],RGBPoints:[0,.0392156862745,.0392156862745,.949019607843,1,.949019607843,.949019607843,.0392156862745]},{ColorSpace:"HSV",Name:"blot",RGBPoints:[0,0,0,1,.166,0,0,1,.167,1,0,1,.332,1,0,1,.333,0,1,1,.5,0,1,1,.501,0,1,0,.666,0,1,0,.667,1,1,0,.832,1,1,0,.833,1,0,0,1,1,0,0]},{ColorSpace:"Lab",Name:"CIELab Blue to Red",NanColor:[1,1,0],RGBPoints:[0,0,.6,.749019607843,1,.76862745098,.466666666667,.341176470588]},{ColorSpace:"RGB",Name:"jet",RGBPoints:[-1,0,0,.5625,-.777778,0,0,1,-.269841,0,1,1,-.015873,.5,1,.5,.238095,1,1,0,.746032,1,0,0,1,.5,0,0]},{ColorSpace:"RGB",Name:"rainbow",RGBPoints:[-1,0,0,1,-.5,0,1,1,0,0,1,0,.5,1,1,0,1,1,0,0]},{ColorSpace:"Lab",Name:"erdc_rainbow_bright",RGBPoints:[-1,.32549,.14902,.960784,-.866221,.297047,.375586,.963836,-.732441,.180302,.536818,.964627,-.598662,.1302,.649207,.929647,-.464883,.0445143,.749654,.855998,-.331104,.0271325,.830713,.721527,-.197324,.259504,.866145,.543555,-.0635452,.428364,.890725,.329819,.0702341,.568503,.898508,.187623,.204013,.738259,.890317,.0825461,.337793,.84546,.86136,.0147555,.471572,.912191,.808018,0,.605351,.962848,.710445,0,.73913,.999469,.600258,.0176284,.87291,.994156,.445975,.193912,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"erdc_rainbow_dark",RGBPoints:[-1,0,0,.423499,-.866221,0,.119346,.529237,-.732441,0,.238691,.634976,-.598662,0,.346852,.68788,-.464883,0,.45022,.718141,-.331104,0,.553554,.664839,-.197324,0,.651082,.519303,-.0635452,.115841,.72479,.352857,.0702341,.326771,.781195,.140187,.204013,.522765,.798524,.0284624,.337793,.703162,.788685,.00885756,.471572,.845118,.751133,0,.605351,.955734,.690825,0,.73913,.995402,.567916,.0618524,.87291,.987712,.403398,.164851,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"nic_CubicL",RGBPoints:[-1,.479965,.0118108,.5307,-.87451,.522213,.0551282,.706919,-.74902,.50839,.237278,.867764,-.623529,.451617,.373834,.987255,-.498039,.39365,.497255,.97506,-.372549,.328631,.599639,.891843,-.247059,.250043,.690286,.778553,-.121569,.249656,.764905,.645857,.00392157,.297954,.821466,.50449,.129412,.337509,.872595,.358447,.254902,.430011,.913789,.297079,.380392,.587191,.931381,.333353,.505882,.727937,.93591,.353742,.631373,.826403,.921081,.365066,.756863,.893201,.846317,.372662,.882353,.965347,.73884,.378506,1,.983235,.597451,.366856]},{ColorSpace:"Lab",Name:"nic_CubicYF",RGBPoints:[-1,.5151,.0482,.6697,-.87451,.520711,.168955,.800574,-.74902,.493694,.278596,.911824,-.623529,.440026,.369475,.984978,-.498039,.398932,.457593,.987053,-.372549,.350651,.540644,.929608,-.247059,.298827,.615625,.857729,-.121569,.239928,.685061,.769531,.00392157,.228832,.739349,.673287,.129412,.263297,.78608,.569988,.254902,.298107,.828337,.460214,.380392,.33092,.864071,.352674,.505882,.38306,.898169,.287309,.631373,.49023,.917481,.307961,.756863,.62372,.926026,.332309,.882353,.717458,.92527,.342476,1,.8,.9255,.3529]},{ColorSpace:"Lab",Name:"gist_earth",RGBPoints:[-1,0,0,0,-.87451,.239216,.027451,.415686,-.74902,.0901961,.254902,.556863,-.623529,.0941176,.352941,.54902,-.498039,.105882,.435294,.533333,-.372549,.12549,.52549,.501961,-.247059,.156863,.596078,.443137,-.121569,.196078,.65098,.380392,.00392157,.282353,.717647,.301961,.129412,.466667,.772549,.27451,.254902,.678431,.784314,.309804,.380392,.901961,.756863,.376471,.505882,.992157,.705882,.521569,.631373,1,.721569,.701961,.756863,1,.784314,.784314,.882353,1,.866667,.866667,1,1,1,1]},{ColorSpace:"Lab",Name:"2hot",RGBPoints:[-1,.0416667,0,0,-.873016,.208333,0,0,-.746032,.375,0,0,-.619048,.541667,0,0,-.492063,.708333,0,0,-.365079,.854137,0,0,-.238095,.937488,.039062,0,-.111111,1,.208333,0,.015873,1,.375,0,.142857,1,.541667,0,.269841,1,.708333,0,.396825,1,.858805,.03125,.52381,1,.947392,.15625,.650794,1,1,.3125,.777778,1,1,.5625,.904762,1,1,.8125,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_red2yellow_BW",RGBPoints:[-1,754296e-12,0,109827e-10,-.87451,.18285,.0264094,0,-.74902,.3066,0,0,-.623529,.422841,0,0,-.498039,.522945,0,0,-.372549,.605721,0,0,-.247059,.672502,.14168,0,-.121569,.728167,.244025,0,.00392157,.781215,.333454,0,.129412,.825,.423586,0,.254902,.855893,.516793,0,.380392,.880491,.608846,0,.505882,.910305,.695505,0,.631373,.94109,.779067,.223528,.756863,.967873,.858572,.473521,.882353,.986815,.933211,.751583,1,1,1,.999997]},{ColorSpace:"Lab",Name:"erdc_marine2gold_BW",RGBPoints:[-1,111641e-12,0,162551e-11,-.87451,.0413146,.0619808,.209857,-.74902,.0185557,.101341,.350684,-.623529,.00486405,.149847,.461054,-.498039,.0836345,.210845,.517906,-.372549,.173222,.276134,.541793,-.247059,.259857,.343877,.535869,-.121569,.362299,.408124,.504293,.00392157,.468266,.468276,.468257,.129412,.582781,.527545,.374914,.254902,.691591,.585251,.274266,.380392,.784454,.645091,.247332,.505882,.862299,.710383,.27518,.631373,.920863,.782923,.351563,.756863,.955792,.859699,.533541,.882353,.976162,.93433,.780671,1,1,1,.999983]},{ColorSpace:"Lab",Name:"erdc_blue2gold_BW",RGBPoints:[-1,0,0,0,-.87451,.0742735,.0440331,.230013,-.74902,.125276,.0258685,.415826,-.623529,.143879,.0163031,.591346,-.498039,.212261,.0627855,.705239,-.372549,.306048,.141178,.763636,-.247059,.391537,.232286,.773263,-.121569,.461734,.336633,.708321,.00392157,.54209,.427581,.590007,.129412,.61704,.508623,.460978,.254902,.702703,.579586,.309117,.380392,.790336,.644811,.170397,.505882,.870173,.710733,.117134,.631373,.93656,.781991,.157144,.756863,.965672,.862068,.409836,.882353,.985751,.936296,.714162,1,1,1,.999999]},{ColorSpace:"Lab",Name:"erdc_sapphire2gold_BW",RGBPoints:[-1,.107704,.107708,.107694,-.87451,.1851,.112354,.308554,-.74902,.236782,.114233,.48788,-.623529,.28296,.126187,.639464,-.498039,.344787,.171643,.739713,-.372549,.413325,.242371,.76913,-.247059,.481863,.3131,.719841,-.121569,.550402,.383829,.612222,.00392157,.61894,.454558,.51126,.129412,.687478,.525287,.39993,.254902,.756017,.596016,.289923,.380392,.824555,.666745,.255498,.505882,.892979,.736822,.27696,.631373,.938851,.804966,.351734,.756863,.966491,.874853,.53572,.882353,.982105,.94153,.782579,1,1,1,.999986]},{ColorSpace:"Lab",Name:"erdc_red2purple_BW",RGBPoints:[-1,0,0,0,-.87451,.167793,.0166271,.0431278,-.74902,.262608,.0107595,.0791181,-.623529,.351902,.0101858,.100926,-.498039,.441257,.0160835,.131919,-.372549,.5221,.0555972,.195625,-.247059,.593852,.104294,.310234,-.121569,.654628,.158115,.448486,.00392157,.707443,.220914,.570253,.129412,.749504,.293268,.67897,.254902,.781587,.370517,.779269,.380392,.809951,.451099,.855831,.505882,.84424,.531462,.900451,.631373,.865174,.620901,.91606,.756863,.875041,.714054,.910284,.882353,.880764,.80554,.896276,1,.887572,.887591,.887556]},{ColorSpace:"Lab",Name:"erdc_purple2pink_BW",RGBPoints:[-1,0,0,0,-.87451,.117562,.0291202,.175876,-.74902,.178368,.0458476,.285454,-.623529,.237731,.0680173,.387717,-.498039,.300877,.0956291,.484802,-.372549,.370929,.136858,.554985,-.247059,.449033,.189273,.58863,-.121569,.529971,.245796,.598587,.00392157,.609914,.300643,.610244,.129412,.697079,.351286,.616371,.254902,.785858,.401991,.617376,.380392,.862517,.45745,.64463,.505882,.91359,.525462,.705336,.631373,.932583,.61064,.767412,.756863,.922478,.706966,.817522,.882353,.901302,.803071,.856311,1,.887571,.887591,.887549]},{ColorSpace:"Lab",Name:"erdc_pbj_lin",RGBPoints:[-1,0,0,0,-.87451,.091821,.0611476,.10617,-.74902,.160311,.0900022,.192713,-.623529,.22484,.12126,.272128,-.498039,.291263,.157469,.340828,-.372549,.360015,.200388,.388903,-.247059,.437497,.250058,.387201,-.121569,.512636,.304969,.355955,.00392157,.582603,.360874,.33488,.129412,.655126,.416374,.306351,.254902,.725889,.473329,.279051,.380392,.778125,.537928,.302697,.505882,.815894,.606931,.382431,.631373,.839159,.679308,.497608,.756863,.854748,.751666,.631792,.882353,.869483,.822508,.768592,1,.887572,.887589,.887565]},{ColorSpace:"Lab",Name:"erdc_blue2green_muted",RGBPoints:[-1,.107704,.107708,.107695,-.87451,.141522,.13066,.270741,-.74902,.180123,.146119,.42308,-.623529,.210161,.169674,.551795,-.498039,.239701,.212939,.634969,-.372549,.253916,.282947,.653641,-.247059,.242791,.366933,.608521,-.121569,.226302,.446776,.52693,.00392157,.236237,.514689,.458798,.129412,.274641,.577589,.376069,.254902,.349625,.633993,.288131,.380392,.4437,.683677,.260497,.505882,.536247,.731214,.285424,.631373,.628472,.777128,.349151,.756863,.718259,.819287,.496825,.882353,.804768,.856164,.703299,1,.887571,.887591,.887548]},{ColorSpace:"Lab",Name:"erdc_blue2green_BW",RGBPoints:[-1,363578e-12,0,529374e-11,-.87451,.0539915,.0577948,.212806,-.74902,.0620393,.0758942,.388959,-.623529,.0697499,.102032,.54177,-.498039,.113295,.156156,.64334,-.372549,.152047,.243196,.670283,-.247059,.158096,.344084,.622864,-.121569,.151142,.43922,.532767,.00392157,.17155,.521588,.457719,.129412,.225861,.599141,.363997,.254902,.32328,.67007,.259083,.380392,.442344,.733697,.223754,.505882,.558409,.794941,.257411,.631373,.673875,.854344,.340822,.756863,.787244,.909326,.524717,.882353,.896483,.958063,.775914,1,1,1,.999982]},{ColorSpace:"Lab",Name:"GREEN-WHITE_LINEAR",RGBPoints:[-1,0,0,0,-.87451,0,.062745,0,-.74902,0,.12549,0,-.623529,0,.188235,0,-.498039,0,.25098,0,-.372549,0,.313725,0,-.247059,0,.376471,0,-.121569,.094118,.439216,0,.00392157,.196078,.501961,0,.129412,.294118,.564706,0,.254902,.396078,.627451,0,.380392,.498039,.690196,0,.505882,.6,.752941,.145098,.631373,.701961,.815686,.364706,.756863,.8,.878431,.580392,.882353,.901961,.941176,.796078,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_green2yellow_BW",RGBPoints:[-1,0,0,0,-.87451,0,.105542,.0603919,-.74902,0,.159454,.104148,-.623529,0,.219502,.15542,-.498039,0,.282276,.203811,-.372549,0,.346331,.235652,-.247059,0,.411765,.235428,-.121569,0,.477177,.217977,.00392157,.0593644,.541635,.21361,.129412,.233081,.604722,.210591,.254902,.369803,.664942,.226536,.380392,.498446,.722367,.288237,.505882,.601929,.782244,.380815,.631373,.703207,.840497,.512134,.756863,.803186,.896433,.674462,.882353,.903834,.950266,.846715,1,1,1,.999981]},{ColorSpace:"Lab",Name:"blue2cyan",RGBPoints:[-1,0,0,0,-.87451,0,.152941,.364706,-.74902,0,.254902,.470588,-.623529,0,.34902,.572549,-.498039,0,.443137,.670588,-.372549,0,.537255,.772549,-.247059,0,.627451,.870588,-.121569,0,.717647,.964706,.00392157,.0784314,.772549,1,.129412,.207843,.858824,1,.254902,.32549,.941176,1,.380392,.45098,1,1,.505882,.560784,1,1,.631373,.662745,1,1,.756863,.760784,1,1,.882353,.870588,1,1,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_blue2cyan_BW",RGBPoints:[-1,405298e-12,0,59012e-10,-.87451,.0207526,.0740933,.18093,-.74902,0,.121033,.30343,-.623529,0,.166892,.416095,-.498039,0,.216768,.524796,-.372549,.0164769,.275471,.608585,-.247059,.0544527,.344824,.659267,-.121569,.0880643,.419118,.688675,.00392157,.127938,.492556,.720256,.129412,.149476,.566946,.756918,.254902,.188961,.641333,.792122,.380392,.245482,.715336,.827609,.505882,.329216,.786235,.874761,.631373,.453558,.852803,.918466,.756863,.626281,.910493,.954,.882353,.82257,.958709,.980146,1,1,1,.999989]},{ColorSpace:"Lab",Name:"erdc_blue_BW",RGBPoints:[-1,0,0,0,-.87451,.0425591,.0763529,.150682,-.74902,.0569472,.119154,.275403,-.623529,.0635978,.164772,.395427,-.498039,.0774342,.213851,.510014,-.372549,.106815,.267034,.615102,-.247059,.122093,.324649,.720068,-.121569,.160851,.387068,.806956,.00392157,.213754,.453516,.878012,.129412,.26722,.524656,.932436,.254902,.326844,.599279,.968038,.380392,.403403,.674712,.984784,.505882,.499703,.745519,1,.631373,.615055,.813983,1,.756863,.74405,.879228,1,.882353,.877909,.941913,1,1,1,1,.999996]},{ColorSpace:"Lab",Name:"BLUE-WHITE",RGBPoints:[-1,0,0,0,-.87451,0,0,.082353,-.74902,0,0,.168627,-.623529,0,0,.254902,-.498039,0,0,.337255,-.372549,0,0,.423529,-.247059,0,0,.509804,-.121569,0,.101961,.592157,.00392157,0,.203922,.678431,.129412,0,.301961,.764706,.254902,0,.403922,.85098,.380392,0,.505882,.933333,.505882,0,.603922,1,.631373,.254902,.705882,1,.756863,.509804,.807843,1,.882353,.764706,.905882,1,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_purple_BW",RGBPoints:[-1,4264e-11,0,620844e-12,-.87451,.100579,.0593111,.145666,-.74902,.167794,.0889224,.254953,-.623529,.231446,.123339,.360511,-.498039,.296699,.163027,.461278,-.372549,.363211,.209286,.55306,-.247059,.431136,.260776,.637195,-.121569,.498202,.320012,.705799,.00392157,.567456,.380459,.778091,.129412,.629381,.445284,.8448,.254902,.688373,.517374,.895694,.380392,.74891,.590906,.93976,.505882,.805017,.667956,.977626,.631373,.850914,.752618,.992396,.756863,.89724,.838454,.994093,.882353,.948461,.922603,.994449,1,1,1,.999967]},{ColorSpace:"Lab",Name:"erdc_magenta_BW",RGBPoints:[-1,0,0,254023e-10,-.87451,.128696,.0456782,.11635,-.74902,.228133,.0476299,.201452,-.623529,.327273,.0374065,.282107,-.498039,.420953,.0408166,.35709,-.372549,.511562,.0642203,.430511,-.247059,.599552,.102686,.504257,-.121569,.684646,.150536,.579429,.00392157,.765817,.205978,.656062,.129412,.839176,.27229,.731807,.254902,.89536,.357594,.797309,.380392,.930238,.457825,.846984,.505882,.945921,.564536,.880571,.631373,.948995,.670753,.902279,.756863,.947124,.772819,.918171,.882353,.947265,.869424,.934352,1,.954719,.95475,.954726]},{ColorSpace:"Lab",Name:"magenta",RGBPoints:[-1,0,0,0,-.87451,.364706,0,.152941,-.74902,.470588,0,.254902,-.623529,.572549,0,.34902,-.498039,.670588,0,.443137,-.372549,.772549,0,.537255,-.247059,.870588,0,.627451,-.121569,.964706,0,.717647,.00392157,1,.0784314,.772549,.129412,1,.207843,.858824,.254902,1,.32549,.941176,.380392,1,.45098,1,.505882,1,.560784,1,.631373,1,.662745,1,.756863,1,.760784,1,.882353,1,.870588,1,1,1,1,1]},{ColorSpace:"Lab",Name:"RED-PURPLE",RGBPoints:[-1,0,0,0,-.87451,.188235,0,.007843,-.74902,.345098,0,.035294,-.623529,.439216,0,.098039,-.498039,.533333,0,.152941,-.372549,.627451,.015686,.211765,-.247059,.721569,.031373,.266667,-.121569,.8,.047059,.329412,.00392157,.862745,.047059,.403922,.129412,.941176,.062745,.466667,.254902,.988235,.078431,.54902,.380392,.988235,.141176,.643137,.505882,.988235,.25098,.729412,.631373,.988235,.376471,.811765,.756863,.988235,.54902,.886275,.882353,.988235,.752941,.952941,1,.996078,.996078,.996078]},{ColorSpace:"Lab",Name:"erdc_red_BW",RGBPoints:[-1,0,0,0,-.87451,.147204,.0480135,.0401815,-.74902,.253411,.0617478,.0301333,-.623529,.356059,.0746331,.0446897,-.498039,.457731,.0934935,.0636931,-.372549,.557199,.122714,.0860013,-.247059,.665179,.144238,.105585,-.121569,.763833,.187056,.138326,.00392157,.847035,.254558,.189407,.129412,.905663,.345937,.258215,.254902,.941431,.447111,.346277,.380392,.962608,.546927,.457571,.505882,.987833,.637276,.569944,.631373,.994202,.732176,.687958,.756863,.993304,.826268,.800567,.882353,.994413,.917205,.906393,1,1,1,.999979]},{ColorSpace:"Lab",Name:"RED_TEMPERATURE",RGBPoints:[-1,0,0,0,-.87451,.090196,0,0,-.74902,.180392,0,0,-.623529,.270588,0,0,-.498039,.360784,0,0,-.372549,.45098,0,0,-.247059,.545098,0,0,-.121569,.635294,0,0,.00392157,.72549,.058824,0,.129412,.815686,.176471,0,.254902,.905882,.294118,0,.380392,1,.411765,0,.505882,1,.533333,.027451,.631373,1,.65098,.27451,.756863,1,.768627,.521569,.882353,1,.886275,.768627,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_orange_BW",RGBPoints:[-1,0,0,253806e-10,-.87451,.135871,.0593824,0,-.74902,.224328,.0907216,0,-.623529,.318083,.119647,0,-.498039,.414443,.150246,0,-.372549,.511077,.184884,0,-.247059,.605501,.226033,0,-.121569,.695274,.275491,0,.00392157,.777826,.334445,0,.129412,.851498,.402441,0,.254902,.915899,.47759,602975e-9,.380392,.971984,.557882,.0361443,.505882,1,.641287,.135967,.631373,1,.725198,.27997,.756863,1,.808205,.438135,.882353,1,.89306,.587036,1,1,.977928,.721599]},{ColorSpace:"Lab",Name:"heated_object",RGBPoints:[-1,0,0,0,-.87451,.34902,.0862745,0,-.74902,.45098,.172549,0,-.623529,.52549,.231373,0,-.498039,.580392,.278431,0,-.372549,.623529,.313725,0,-.247059,.670588,.352941,0,-.121569,.717647,.392157,0,.00392157,.772549,.439216,0,.129412,.839216,.494118,0,.254902,.901961,.541176,0,.380392,.968627,.6,0,.505882,1,.658824,0,.631373,1,.721569,0,.756863,1,.827451,.298039,.882353,1,.976471,.72549,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_gold_BW",RGBPoints:[-1,0,0,190933e-10,-.87451,.128363,.0636265,0,-.74902,.193795,.111057,0,-.623529,.25976,.15987,0,-.498039,.328546,.210589,0,-.372549,.399726,.26332,0,-.247059,.472969,.318261,0,-.121569,.546245,.375827,0,.00392157,.61745,.436719,0,.129412,.685545,.501113,0,.254902,.749578,.568799,0,.380392,.80962,.6394,0,.505882,.865572,.712699,.10257,.631373,.917709,.787569,.233665,.756863,.966914,.863138,.369608,.882353,1,.939405,.496104,1,.999225,1,.612275]},{ColorSpace:"Lab",Name:"erdc_brown_BW",RGBPoints:[-1,33216e-11,0,483629e-11,-.87451,.14693,.0518172,0,-.74902,.225806,.0814996,0,-.623529,.301681,.111452,0,-.498039,.370487,.150664,0,-.372549,.43108,.199477,0,-.247059,.4849,.255107,0,-.121569,.536798,.313486,0,.00392157,.59286,.371167,0,.129412,.653119,.428135,0,.254902,.714589,.485917,.0379541,.380392,.774667,.54565,.116634,.505882,.831222,.608047,.183895,.631373,.880305,.674199,.260298,.756863,.922314,.742472,.367086,.882353,.959408,.811222,.497258,1,.993548,.875183,.622093]},{ColorSpace:"Lab",Name:"copper_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0784314,.0501961,.0313725,-.74902,.156863,.100392,.0627451,-.623529,.235294,.150588,.0941176,-.498039,.313725,.200784,.12549,-.372549,.392157,.25098,.156863,-.247059,.470588,.301176,.188235,-.121569,.54902,.351373,.219608,.00392157,.627451,.401569,.25098,.129412,.705882,.451765,.282353,.254902,.784314,.501961,.313725,.380392,.862745,.552157,.345098,.505882,.941176,.602353,.376471,.631373,1,.652549,.407843,.756863,1,.702745,.439216,.882353,1,.752941,.470588,1,1,.8,.5]},{ColorSpace:"Lab",Name:"pink_Matlab",RGBPoints:[-1,0,0,0,-.87451,.312416,.204524,.204524,-.74902,.441822,.289241,.289241,-.623529,.54112,.354246,.354246,-.498039,.624831,.409048,.409048,-.372549,.698582,.45733,.45733,-.247059,.764404,.502282,.500979,-.121569,.791292,.591516,.54112,.00392157,.817297,.66895,.578481,.129412,.842499,.738308,.613572,.254902,.866968,.801687,.646762,.380392,.890766,.86041,.678329,.505882,.913944,.913944,.711254,.631373,.936549,.936549,.79459,.756863,.958621,.958621,.869979,.882353,.980196,.980196,.939336,1,1,1,1]},{ColorSpace:"Lab",Name:"bone_Matlab",RGBPoints:[-1,0,0,0,-.87451,.054902,.054902,.075817,-.74902,.109804,.109804,.151634,-.623529,.164706,.164706,.227451,-.498039,.219608,.219608,.303268,-.372549,.27451,.27451,.379085,-.247059,.329412,.329902,.454412,-.121569,.384314,.405719,.509314,.00392157,.439216,.481536,.564216,.129412,.494118,.557353,.619118,.254902,.54902,.63317,.67402,.380392,.603922,.708987,.728922,.505882,.660294,.783824,.783824,.631373,.746569,.838725,.838725,.756863,.832843,.893627,.893627,.882353,.919118,.948529,.948529,1,1,1,1]},{ColorSpace:"Lab",Name:"gray_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0627451,.0627451,.0627451,-.74902,.12549,.12549,.12549,-.623529,.188235,.188235,.188235,-.498039,.25098,.25098,.25098,-.372549,.313725,.313725,.313725,-.247059,.376471,.376471,.376471,-.121569,.439216,.439216,.439216,.00392157,.501961,.501961,.501961,.129412,.564706,.564706,.564706,.254902,.627451,.627451,.627451,.380392,.690196,.690196,.690196,.505882,.752941,.752941,.752941,.631373,.815686,.815686,.815686,.756863,.878431,.878431,.878431,.882353,.941176,.941176,.941176,1,1,1,1]},{ColorSpace:"Lab",Name:"Purples",RGBPoints:[-1,.247059,0,.490196,-.87451,.288397,.07677,.525629,-.74902,.32975,.153587,.561092,-.623529,.373057,.236263,.600461,-.498039,.416363,.319,.639923,-.372549,.459669,.405613,.685198,-.247059,.503345,.491534,.730058,-.121569,.562399,.54862,.757616,.00392157,.621453,.606075,.785544,.129412,.680508,.674971,.824914,.254902,.739562,.743406,.863899,.380392,.798616,.800492,.893426,.505882,.85684,.856655,.922491,.631373,.898178,.894056,.942176,.756863,.938654,.930919,.961646,.882353,.964245,.958478,.977393,1,.988235,.984314,.992157]},{ColorSpace:"Lab",Name:"Blues",RGBPoints:[-1,.031373,.188235,.419608,-.87451,.031373,.253195,.516063,-.74902,.031757,.318139,.612149,-.623529,.080969,.38113,.661361,-.498039,.130427,.444152,.710327,-.372549,.195386,.509112,.743791,-.247059,.260715,.573841,.777209,-.121569,.341423,.628958,.808704,.00392157,.422745,.684075,.839892,.129412,.523137,.739193,.861546,.254902,.622684,.793464,.883429,.380392,.701423,.826928,.910988,.505882,.778685,.8603,.937993,.631373,.825928,.891795,.953741,.756863,.87328,.923291,.969489,.882353,.922491,.954787,.985236,1,.968627,.984314,1]},{ColorSpace:"Lab",Name:"Greens",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546082,.271326,-.372549,.197232,.609073,.31857,-.247059,.257255,.671742,.365859,-.121569,.357647,.720953,.415071,.00392157,.45767,.769919,.465021,.129412,.546251,.811257,.537855,.254902,.634295,.852211,.610688,.380392,.709097,.883706,.683522,.505882,.78316,.914833,.755894,.631373,.842215,.938454,.818885,.756863,.899977,.961538,.880692,.882353,.935409,.975317,.92203,1,.968627,.988235,.960784]},{ColorSpace:"Lab",Name:"PuBu",RGBPoints:[-1,.301961,0,.294118,-.87451,.404321,.029527,.390573,-.74902,.50599,.059592,.486782,-.623529,.519769,.158016,.551742,-.498039,.533456,.256194,.616301,-.372549,.54133,.33887,.655671,-.247059,.54902,.421592,.695087,-.121569,.54902,.506236,.736424,.00392157,.550127,.590573,.777701,.129412,.585559,.665375,.81707,.254902,.622145,.739023,.855825,.380392,.687105,.784298,.879446,.505882,.752065,.829758,.903253,.631373,.817024,.87897,.930811,.756863,.880907,.927213,.957832,.882353,.926182,.958708,.975548,1,.968627,.988235,.992157]},{ColorSpace:"Lab",Name:"BuPu",RGBPoints:[-1,.007843,.219608,.345098,-.87451,.01178,.286536,.449427,-.74902,.015702,.35328,.553479,-.623529,.01767,.396586,.622376,-.498039,.021115,.4402,.690688,-.372549,.11757,.503191,.722184,-.247059,.214625,.565859,.753633,-.121569,.336671,.615071,.78316,.00392157,.457978,.663975,.812503,.129412,.556401,.703345,.836125,.254902,.65421,.742714,.859669,.380392,.736886,.782084,.881323,.505882,.81827,.821638,.903068,.631373,.873387,.864944,.92669,.756863,.927536,.907605,.949988,.882353,.964937,.9391,.967705,1,1,.968627,.984314]},{ColorSpace:"Lab",Name:"BuGn",RGBPoints:[-1,.031373,.25098,.505882,-.87451,.031373,.329719,.590527,-.74902,.031911,.408397,.674787,-.623529,.100807,.479262,.710219,-.498039,.169704,.550219,.745744,-.372549,.238601,.62699,.787082,-.247059,.307958,.703114,.826759,-.121569,.39654,.752326,.797232,.00392157,.485121,.801046,.767705,.129412,.573702,.83451,.738178,.254902,.661592,.867743,.711034,.380392,.732457,.895302,.74253,.505882,.801845,.922307,.774579,.631373,.841215,.938055,.817885,.756863,.880907,.95391,.861084,.882353,.926182,.971626,.902422,1,.968627,.988235,.941176]},{ColorSpace:"Lab",Name:"GnBu",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546175,.272095,-.372549,.197232,.615071,.368551,-.247059,.256609,.683276,.464867,-.121569,.329443,.722645,.555417,.00392157,.403137,.762138,.645413,.129412,.503529,.805444,.718247,.254902,.603922,.848597,.790465,.380392,.704314,.887966,.847551,.505882,.802307,.926321,.903714,.631373,.851519,.944037,.941115,.756863,.899977,.961538,.976901,.882353,.935409,.975317,.984775,1,.968627,.988235,.992157]},{ColorSpace:"Lab",Name:"GnBuPu",RGBPoints:[-1,.003922,.27451,.211765,-.87451,.003922,.349312,.280661,-.74902,.003937,.423852,.349773,-.623529,.005905,.46519,.446228,-.498039,.009443,.506344,.542837,-.372549,.111803,.535871,.649135,-.247059,.214025,.565859,.753633,-.121569,.310481,.615071,.78316,.00392157,.407797,.663975,.812503,.129412,.531811,.703345,.836125,.254902,.65421,.742714,.859669,.380392,.736886,.782084,.881323,.505882,.81827,.821176,.902884,.631373,.873387,.854641,.922568,.756863,.927536,.888535,.942361,.882353,.964937,.929873,.964014,1,1,.968627,.984314]},{ColorSpace:"Lab",Name:"BuGnYl",RGBPoints:[-1,.031373,.113725,.345098,-.87451,.088458,.159,.463206,-.74902,.145052,.204567,.5807,-.623529,.139146,.287243,.620069,-.498039,.13318,.370196,.659562,-.372549,.123337,.470588,.706805,-.247059,.115386,.570335,.753126,-.121569,.186251,.643168,.761,.00392157,.258716,.71514,.768074,.129412,.380761,.760415,.750358,.254902,.503576,.806075,.732795,.380392,.645306,.861192,.719016,.505882,.783899,.91511,.705606,.631373,.858701,.944637,.6997,.756863,.931349,.973303,.698424,.882353,.966782,.987082,.777163,1,1,1,.85098]},{ColorSpace:"Lab",Name:"PuRd",RGBPoints:[-1,.286275,0,.415686,-.87451,.38273,.001968,.441276,-.74902,.479231,.003922,.466774,-.623529,.581592,.003922,.480554,-.498039,.683799,.00549,.494887,-.372549,.776317,.105882,.544098,-.247059,.867866,.206321,.592618,-.121569,.919047,.308681,.612303,.00392157,.968812,.411226,.632603,.129412,.974717,.519493,.671972,.254902,.980546,.626451,.71065,.380392,.984483,.701253,.732303,.505882,.988328,.77504,.755617,.631373,.990296,.828189,.812703,.756863,.992372,.880907,.869035,.882353,.996309,.926182,.912341,1,1,.968627,.952941]},{ColorSpace:"Lab",Name:"RdPu",RGBPoints:[-1,.403922,0,.121569,-.87451,.500377,0,.192434,-.74902,.596909,277e-6,.263037,-.623529,.703206,.035709,.300438,-.498039,.808612,.071296,.338854,-.372549,.857824,.116571,.441215,-.247059,.905513,.163552,.54293,-.121569,.889765,.281661,.617732,.00392157,.873156,.39897,.691611,.129412,.82985,.491488,.736886,.254902,.789081,.583237,.781853,.380392,.810734,.656071,.819254,.505882,.833126,.729181,.85684,.631373,.870527,.80792,.898178,.756863,.907605,.884398,.938331,.882353,.9391,.921799,.958016,1,.968627,.956863,.976471]},{ColorSpace:"Lab",Name:"Oranges",RGBPoints:[-1,.498039,.152941,.015686,-.87451,.57481,.182468,.013718,-.74902,.651765,.212042,.011734,-.623529,.752157,.247474,.007797,-.498039,.851719,.283368,.004475,-.372549,.898962,.348328,.039908,-.247059,.945652,.413426,.076401,-.121569,.969273,.484291,.157109,.00392157,.992157,.554971,.238185,.129412,.992157,.619931,.330704,.254902,.992157,.684967,.423837,.380392,.992157,.751895,.532103,.505882,.992249,.817716,.639354,.631373,.994218,.861023,.725967,.756863,.996186,.903576,.810965,.882353,.998155,.933103,.868051,1,1,.960784,.921569]},{ColorSpace:"Lab",Name:"Reds",RGBPoints:[-1,.403922,0,.05098,-.87451,.525967,.029527,.066728,-.74902,.647643,.058962,.082476,-.623529,.722445,.076678,.098224,-.498039,.797186,.095194,.114187,-.372549,.868051,.164091,.143714,-.247059,.937809,.233541,.173933,-.121569,.96143,.326059,.232987,.00392157,.984375,.418147,.292657,.129412,.986344,.496886,.371396,.254902,.988235,.575702,.450673,.380392,.988235,.656409,.543191,.505882,.98842,.736747,.635894,.631373,.992357,.809581,.732349,.756863,.996186,.880692,.826759,.882353,.998155,.92203,.885813,1,1,.960784,.941176]},{ColorSpace:"Lab",Name:"RdOr",RGBPoints:[-1,.498039,0,0,-.87451,.6004,0,0,-.74902,.702514,738e-6,477e-6,-.623529,.773379,.095225,.061499,-.498039,.843875,.189865,.12283,-.372549,.891119,.294195,.203537,-.247059,.937855,.397924,.283137,-.121569,.963445,.476663,.316601,.00392157,.988297,.555771,.351665,.129412,.990265,.646321,.436309,.254902,.992157,.735256,.519646,.380392,.992157,.784468,.570827,.505882,.992249,.833218,.623483,.631373,.994218,.872587,.706159,.756863,.996186,.911419,.788189,.882353,.998155,.940946,.859054,1,1,.968627,.92549]},{ColorSpace:"Lab",Name:"BrOrYl",RGBPoints:[-1,.4,.145098,.023529,-.87451,.500392,.174625,.019592,-.74902,.600784,.204291,.015656,-.623529,.701176,.251534,.011719,-.498039,.800984,.299146,.008397,-.372549,.863975,.370012,.043829,-.247059,.926321,.441107,.0794,-.121569,.961753,.521815,.120738,.00392157,.996078,.602645,.163122,.129412,.996078,.68729,.237924,.254902,.996078,.771011,.314879,.380392,.996078,.832034,.444798,.505882,.996171,.892042,.572595,.631373,.998139,.931411,.65724,.756863,1,.969489,.741669,.882353,1,.985236,.822376,1,1,1,.898039]},{ColorSpace:"Lab",Name:"RdOrYl",RGBPoints:[-1,.501961,0,.14902,-.87451,.622038,0,.14902,-.74902,.741761,4e-4,.148866,-.623529,.816563,.05158,.129181,-.498039,.890965,.10356,.110235,-.372549,.940177,.205921,.137793,-.247059,.988281,.308789,.165536,-.121569,.99025,.432803,.200969,.00392157,.992218,.555217,.236278,.129412,.994187,.628051,.267774,.254902,.996078,.701038,.301269,.380392,.996078,.777809,.383945,.505882,.996171,.852826,.466621,.631373,.998139,.892195,.549296,.756863,1,.931349,.632188,.882353,1,.966782,.7188,1,1,1,.8]},{ColorSpace:"Lab",Name:"CIELab_blue2red",RGBPoints:[-1,0,.6,.74902,1,.76863,.46667,.34118]},{ColorSpace:"Lab",Name:"blue2yellow",RGBPoints:[-1,0,0,1,0,.5,.5,.5,1,1,1,0]},{ColorSpace:"Lab",Name:"erdc_blue2gold",RGBPoints:[-1,.175119,.0438468,1,-.874016,.22383,.159771,.94557,-.748031,.27254,.233611,.891216,-.622047,.321251,.296526,.836857,-.496063,.369962,.354296,.782359,-.370079,.418672,.409139,.72754,-.244094,.467383,.462152,.672148,-.11811,.51609,.51396,.615825,.00787402,.572863,.55452,.559172,.133858,.630269,.593822,.517729,.259843,.689588,.624668,.47446,.385827,.745394,.656113,.428638,.511811,.798624,.688104,.379105,.637795,.849926,.720593,.323834,.76378,.899765,.753543,.258657,.889764,.948487,.78692,.171778,1,.990413,.816451,.00729848]},{ColorSpace:"Lab",Name:"erdc_blue2yellow",RGBPoints:[-1,.0830122,0,.495617,-.87451,.141973,.0551288,.57363,-.74902,.193048,.110258,.604561,-.623529,.234231,.165386,.57643,-.498039,.275413,.220515,.548299,-.372549,.316596,.275644,.520169,-.247059,.357778,.330773,.492038,-.121569,.398961,.385901,.463908,.00392157,.449929,.438487,.426815,.129412,.511572,.488299,.379944,.254902,.581222,.53603,.325741,.380392,.650871,.583761,.271538,.505882,.720521,.631493,.217335,.631373,.79017,.679224,.163132,.756863,.85982,.726955,.108929,.882353,.910254,.774159,.14112,1,.927513,.81759,.306289]},{ColorSpace:"Lab",Name:"erdc_cyan2orange",RGBPoints:[-1,.0471513,.213874,.414329,-.87451,.0674702,.256648,.439027,-.74902,.0959957,.299331,.462089,-.623529,.132428,.341872,.483212,-.498039,.188743,.38277,.500597,-.372549,.268511,.420229,.512179,-.247059,.352945,.455602,.519101,-.121569,.43893,.489368,.521538,.00392157,.522445,.522495,.522436,.129412,.600089,.555682,.53205,.254902,.67988,.587981,.539163,.380392,.761011,.619586,.544439,.505882,.84278,.650741,.548567,.631373,.910713,.687347,.557822,.756863,.952232,.734972,.577775,.882353,.975642,.789858,.604868,1,.990752,.843643,.632857]},{ColorSpace:"Lab",Name:"erdc_purple2green",RGBPoints:[-1,.235006,.0483128,.530899,-.87451,.302968,.108419,.552391,-.74902,.360241,.166059,.569502,-.623529,.406746,.226782,.579373,-.498039,.444073,.28964,.582094,-.372549,.473648,.353774,.577947,-.247059,.497636,.418154,.567911,-.121569,.519086,.481741,.553968,.00392157,.542884,.542914,.542875,.129412,.566303,.603989,.527499,.254902,.595218,.662965,.516857,.380392,.628641,.720701,.510673,.505882,.665373,.777849,.508165,.631373,.704182,.834921,.508303,.756863,.743846,.892328,.50999,.882353,.783158,.950422,.512181,1,.818617,1,.513888]},{ColorSpace:"Lab",Name:"erdc_purple2green_dark",RGBPoints:[-1,.107656,0,.428682,-.87451,.1924,0,.449799,-.74902,.255118,.0648939,.466726,-.623529,.304256,.133066,.476703,-.498039,.343202,.19716,.479793,-.372549,.373876,.260353,.476241,-.247059,.398497,.322872,.466953,-.121569,.420016,.384252,.453785,.00392157,.44319,.443216,.443186,.129412,.465553,.502139,.428233,.254902,.492959,.559151,.417591,.380392,.524654,.615092,.411016,.505882,.55959,.670583,.40779,.631373,.596614,.726102,.406948,.756863,.634544,.782032,.407439,.882353,.672183,.838703,.408237,1,.706131,.892759,.408452]},{ColorSpace:"Lab",Name:"coolwarm",RGBPoints:[-1,.229806,.298718,.753683,-.875,.303869,.406535,.844959,-.75,.383013,.509419,.917388,-.625,.466667,.604563,.968155,-.5,.552953,.688929,.995376,-.375,.639176,.7596,.998151,-.25,.722193,.813953,.976575,-.125,.798692,.849786,.931689,0,.865395,.86541,.865396,.125,.924128,.827385,.774508,.25,.958853,.769768,.678008,.375,.969954,.694267,.579375,.5,.958003,.602842,.481776,.625,.923945,.497309,.38797,.75,.869187,.378313,.300267,.875,.795632,.241284,.220526,1,.705673,.0155562,.150233]},{ColorSpace:"Lab",Name:"BuRd",RGBPoints:[-1,.019608,.188235,.380392,-.87451,.088504,.321107,.564937,-.74902,.163399,.444983,.697501,-.623529,.247059,.555709,.754095,-.498039,.420684,.676432,.818685,-.372549,.606459,.789773,.880277,-.247059,.761476,.868512,.924567,-.121569,.878047,.925721,.951942,.00392157,.969089,.966474,.964937,.129412,.983852,.897578,.846828,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"Spectral_lowBlue",RGBPoints:[-1,.368627,.309804,.635294,-.87451,.260361,.450058,.70173,-.74902,.248058,.591311,.717186,-.623529,.376009,.734025,.658132,-.498039,.537947,.814764,.64506,-.372549,.702345,.879585,.636678,-.247059,.84752,.938639,.607151,-.121569,.940408,.976163,.656055,.00392157,.999923,.997616,.745021,.129412,.997463,.921338,.61707,.254902,.995002,.824606,.499885,.380392,.992541,.701576,.39654,.505882,.973472,.547405,.318108,.631373,.937793,.398539,.270127,.756863,.861515,.282891,.299654,.882353,.746482,.144637,.288812,1,.619608,.003922,.258824]},{ColorSpace:"Lab",Name:"GnRP",RGBPoints:[-1,0,.266667,.105882,-.87451,.066436,.394617,.174779,-.74902,.168858,.524567,.25767,-.623529,.323875,.657439,.361015,-.498039,.504883,.772318,.506344,-.372549,.678431,.870127,.654902,-.247059,.803922,.921799,.780392,-.121569,.897116,.951942,.882814,.00392157,.967397,.965936,.967474,.129412,.928028,.879815,.930565,.254902,.866052,.780777,.882891,.380392,.77501,.665129,.821376,.505882,.675663,.537024,.737024,.631373,.57847,.396155,.645982,.756863,.492349,.223914,.547559,.882353,.375548,.096886,.423299,1,.25098,0,.294118]},{ColorSpace:"Lab",Name:"GYPi",RGBPoints:[-1,.152941,.392157,.098039,-.87451,.246444,.505344,.117724,-.74902,.351942,.614533,.161399,-.623529,.474971,.717878,.240138,-.498039,.611995,.811226,.392849,-.372549,.746328,.893118,.565321,-.247059,.859516,.94233,.747405,-.121569,.928105,.96386,.875663,.00392157,.969089,.966859,.968012,.129412,.983852,.910265,.948328,.254902,.979239,.833218,.914648,.380392,.949712,.729873,.862976,.505882,.905652,.58293,.763552,.631373,.85521,.410073,.652211,.756863,.793695,.183699,.531642,.882353,.683737,.063899,.420761,1,.556863,.003922,.321569]},{ColorSpace:"Lab",Name:"GnYlRd",RGBPoints:[-1,0,.407843,.215686,-.87451,.063975,.525952,.277201,-.74902,.177932,.633064,.332718,-.623529,.364937,.724106,.379469,-.498039,.527951,.797155,.40223,-.372549,.678431,.862822,.433449,-.247059,.803922,.916955,.514648,-.121569,.909419,.961861,.625067,.00392157,.999923,.997616,.745021,.129412,.997463,.921338,.61707,.254902,.995002,.824606,.499885,.380392,.992541,.701576,.39654,.505882,.973472,.547405,.318108,.631373,.939023,.389927,.245521,.756863,.867666,.239831,.176624,.882353,.762399,.110727,.151326,1,.647059,0,.14902]},{ColorSpace:"Lab",Name:"GBBr",RGBPoints:[-1,0,.235294,.188235,-.87451,.002461,.338639,.301423,-.74902,.055902,.448981,.417609,-.623529,.183852,.56955,.538178,-.498039,.357785,.700115,.660746,-.372549,.540177,.819531,.77624,-.247059,.714879,.890888,.864821,-.121569,.851134,.934564,.922645,.00392157,.960861,.959785,.95694,.129412,.963322,.927797,.83391,.254902,.939946,.868897,.68935,.380392,.883353,.775394,.517109,.505882,.808074,.625836,.324106,.631373,.717647,.476355,.15494,.756863,.592157,.358247,.06882,.882353,.458593,.26436,.031142,1,.329412,.188235,.019608]},{ColorSpace:"Lab",Name:"PuOr",RGBPoints:[-1,.498039,.231373,.031373,-.87451,.62599,.30273,.026451,-.74902,.746943,.387082,.037524,-.623529,.85767,.490427,.071972,-.498039,.936409,.617762,.236371,-.372549,.992695,.743099,.43291,-.247059,.995156,.841523,.63714,-.121569,.985313,.913802,.813687,.00392157,.966244,.966398,.967705,.129412,.889965,.89504,.938178,.254902,.806151,.804306,.894656,.380392,.712649,.688658,.833141,.505882,.594233,.554325,.744637,.631373,.474894,.404229,.652364,.756863,.366628,.217224,.563783,.882353,.266436,.089965,.434833,1,.176471,0,.294118]},{ColorSpace:"Lab",Name:"PRGn",RGBPoints:[-1,.25098,0,.294118,-.87451,.383852,.103345,.431911,-.74902,.497732,.234679,.55371,-.623529,.583852,.40692,.652134,-.498039,.681968,.545175,.742561,-.372549,.7807,.672357,.825221,-.247059,.871742,.788005,.886736,-.121569,.930488,.885198,.932872,.00392157,.966321,.968089,.965859,.129412,.892503,.950865,.877278,.254902,.796078,.91857,.772549,.380392,.670588,.866897,.647059,.505882,.493195,.765398,.496655,.631373,.314187,.649135,.354556,.756863,.15917,.516263,.251211,.882353,.062284,.386621,.170473,1,0,.266667,.105882]},{ColorSpace:"Lab",Name:"PiYG",RGBPoints:[-1,.556863,.003922,.321569,-.87451,.692195,.067897,.427374,-.74902,.797539,.197847,.539177,-.623529,.859054,.424221,.659746,-.498039,.908574,.592618,.770319,-.372549,.951557,.736332,.866205,-.247059,.981084,.839677,.917878,-.121569,.98293,.913802,.949558,.00392157,.96732,.968474,.965629,.129412,.92549,.963552,.869666,.254902,.852441,.939254,.736025,.380392,.739254,.890042,.553941,.505882,.60323,.805536,.382238,.631373,.467282,.711419,.235217,.756863,.344252,.608074,.156478,.882353,.2406,.49827,.116494,1,.152941,.392157,.098039]},{ColorSpace:"Lab",Name:"OrPu",RGBPoints:[-1,.176471,0,.294118,-.87451,.272434,.095963,.444214,-.74902,.373395,.228912,.56932,-.623529,.481661,.415917,.657901,-.498039,.601922,.562937,.750481,-.372549,.718493,.695886,.836986,-.247059,.811995,.811534,.898501,-.121569,.894733,.8995,.940023,.00392157,.969166,.966859,.963629,.129412,.98639,.910265,.803691,.254902,.995002,.835371,.624375,.380392,.992541,.736947,.420146,.505882,.931949,.609458,.224221,.631373,.85075,.483968,.069819,.756863,.740023,.380623,.035371,.882353,.617993,.29827,.026759,1,.498039,.231373,.031373]},{ColorSpace:"Lab",Name:"BrBG",RGBPoints:[-1,.329412,.188235,.019608,-.87451,.467205,.269435,.031911,-.74902,.6,.365629,.074202,-.623529,.72549,.483737,.160323,-.498039,.812995,.635832,.336409,-.372549,.88689,.781238,.527874,-.247059,.943483,.87474,.700115,-.121569,.963168,.929796,.841599,.00392157,.957247,.959938,.959554,.129412,.84406,.932872,.920185,.254902,.70396,.886428,.859285,.380392,.529258,.815071,.770704,.505882,.346251,.691811,.653057,.631373,.175855,.562015,.530642,.756863,.047905,.441446,.410073,.882353,.002307,.33218,.294348,1,0,.235294,.188235]},{ColorSpace:"Lab",Name:"GyRd",RGBPoints:[-1,.101961,.101961,.101961,-.87451,.227451,.227451,.227451,-.74902,.359939,.359939,.359939,-.623529,.502653,.502653,.502653,-.498039,.631373,.631373,.631373,-.372549,.749865,.749865,.749865,-.247059,.843368,.843368,.843368,-.121569,.926105,.926105,.926105,.00392157,.999846,.997232,.995694,.129412,.994925,.908651,.857901,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"erdc_divHi_purpleGreen",RGBPoints:[-1,.297553,0,.489074,-.87451,.40259,.151146,.567754,-.74902,.516038,.284843,.658231,-.623529,.629783,.423646,.750938,-.498039,.735198,.563697,.835956,-.372549,.82408,.695541,.903582,-.247059,.889091,.807454,.944862,-.121569,.92334,.886917,.951839,.00392157,.921045,.921084,.921003,.129412,.877324,.907455,.845381,.254902,.797649,.849713,.734695,.380392,.691646,.75964,.600532,.505882,.568981,.649159,.453807,.631373,.438945,.529756,.304259,.756863,.30973,.412001,.158303,.882353,.187078,.305111,.00251458,1,.101655,.220836,0]},{ColorSpace:"Lab",Name:"erdc_divHi_purpleGreen_dim",RGBPoints:[-1,.404088,.131038,.592767,-.87451,.486469,.230957,.651243,-.74902,.575165,.339335,.717723,-.623529,.662741,.454332,.784263,-.498039,.742071,.570213,.842918,-.372549,.806935,.678992,.886227,-.247059,.852219,.771315,.90763,-.121569,.873345,.837327,.901572,.00392157,.866783,.86682,.866745,.129412,.82839,.858225,.796812,.254902,.762578,.814287,.700202,.380392,.676429,.744229,.585735,.505882,.577033,.65732,.461526,.631373,.47128,.562476,.33476,.756863,.365461,.467957,.21076,.882353,.264758,.381138,.0878313,1,.182591,.312249,0]},{ColorSpace:"Lab",Name:"erdc_divLow_icePeach",RGBPoints:[-1,.480048,.817441,.998056,-.87451,.425898,.726921,.883187,-.74902,.366682,.629445,.761936,-.623529,.308756,.531002,.640217,-.498039,.258021,.43705,.523433,-.372549,.219244,.352381,.416348,-.247059,.195127,.281032,.322979,-.121569,.186286,.22627,.246525,.00392157,.192352,.19236,.192364,.129412,.255927,.214469,.191756,.254902,.340459,.254426,.206666,.380392,.444655,.309315,.234029,.505882,.565353,.376004,.270969,.631373,.697917,.450748,.314293,.756863,.836657,.529064,.360227,.882353,.972695,.614884,.413123,1,1,.705904,.472699]},{ColorSpace:"Lab",Name:"erdc_divLow_purpleGreen",RGBPoints:[-1,.956034,.666487,.952663,-.87451,.874457,.572698,.936352,-.74902,.753465,.488253,.909063,-.623529,.63309,.413507,.763833,-.498039,.514491,.345878,.620015,-.372549,.405008,.288141,.484376,-.247059,.311388,.241986,.363556,-.121569,.238722,.209044,.263449,.00392157,.192352,.192366,.192362,.129412,.200379,.233201,.168618,.254902,.230151,.291737,.165227,.380392,.279481,.366076,.178607,.505882,.344927,.453267,.205703,.631373,.421554,.549449,.242643,.756863,.503334,.649999,.284377,.882353,.583497,.749672,.324969,1,.650705,.837228,.356264]},{ColorSpace:"Lab",Name:"Haze_green",RGBPoints:[-1,1,.835294,.886275,-.87451,.937255,.756863,.870443,-.74902,.875817,.666376,.857807,-.623529,.778359,.583007,.808134,-.498039,.676253,.494118,.745098,-.372549,.561365,.390123,.682353,-.247059,.438344,.262745,.621496,-.121569,.321133,.141031,.558751,.00392157,.203922,.0217865,.495861,.129412,.265505,.129412,.433261,.254902,.311692,.255338,.37008,.380392,.356282,.377342,.310821,.505882,.39971,.488889,.258243,.631373,.442556,.604357,.205519,.756863,.48671,.71968,.152941,.882353,.529847,.830356,.100944,1,.572549,.933333,.054902]},{ColorSpace:"Lab",Name:"Haze_lime",RGBPoints:[-1,.704034,.784196,1,-.87451,.633111,.691418,.956078,-.74902,.564021,.600606,.912157,-.623529,.496827,.51189,.868235,-.498039,.43157,.425416,.824314,-.372549,.368248,.341347,.780392,-.247059,.306767,.259855,.736471,-.121569,.246862,.181069,.692549,.00392157,.191619,.109542,.648627,.129412,.257404,.194031,.604706,.254902,.321794,.278775,.560784,.380392,.387909,.364617,.516863,.505882,.456569,.451881,.472941,.631373,.527424,.540773,.42902,.756863,.599759,.631427,.385098,.882353,.673065,.723898,.341176,1,.742751,.812252,.3]},{ColorSpace:"RGB",Name:"Haze",RGBPoints:[-1,1,.835294,.996078,-.00392157,.023529,.141176,.498039,.00392157,.015686,.137255,.494118,1,.984314,.764706,0]},{ColorSpace:"Lab",Name:"Haze_cyan",RGBPoints:[-1,.956863,1,.835294,-.87451,.933188,.921714,.760784,-.74902,.870588,.803486,.671605,-.623529,.807843,.684096,.583297,-.498039,.745098,.569208,.494118,-.372549,.682353,.437763,.390123,-.247059,.621496,.288163,.262745,-.121569,.558751,.144517,.141031,.00392157,.495861,.0217865,.0413943,.129412,.433261,.137255,.129412,.254902,.37008,.263181,.255338,.380392,.306318,.381845,.372694,.505882,.243137,.503994,.494263,.631373,.180392,.629484,.619753,.756863,.117647,.754975,.747131,.882353,.054902,.876398,.866812,1,0,.988235,.976471]},{ColorSpace:"Lab",Name:"nic_Edge",RGBPoints:[-1,.191208,.191208,.191208,-.87451,.239484,.00545035,.614821,-.74902,.220593,.0617459,.863547,-.623529,.17509,.278988,.97794,-.498039,.143526,.576069,.998553,-.372549,.166456,.871883,.96594,-.247059,.376202,.993555,.981833,-.121569,.681996,.991297,.999239,.00392157,.954172,.952734,.94374,.129412,.999735,.99301,.662896,.254902,.979399,.991466,.357973,.380392,.968771,.854967,.162659,.505882,.999245,.556697,.144323,.631373,.973959,.26223,.177946,.756863,.852358,.0526707,.222974,.882353,.593889,.00912724,.238855,1,.191208,.191208,.191208]},{ColorSpace:"Lab",Name:"erdc_iceFire_H",RGBPoints:[-1,405432e-12,0,590122e-11,-.87451,0,.120401,.302675,-.74902,0,.216583,.524574,-.623529,.0552475,.345025,.6595,-.498039,.128047,.492588,.720288,-.372549,.188955,.641309,.792092,-.247059,.327673,.784935,.873434,-.121569,.60824,.892164,.935547,.00392157,.881371,.912178,.818099,.129412,.951407,.835621,.449279,.254902,.904481,.690489,0,.380392,.85407,.510864,0,.505882,.777093,.33018,88199e-8,.631373,.672862,.139087,.00269398,.756863,.508815,0,0,.882353,.299417,366289e-9,547829e-9,1,.0157519,.00332021,455569e-13]},{ColorSpace:"Lab",Name:"erdc_iceFire_L",RGBPoints:[-1,.870485,.913768,.832905,-.87451,.586919,.887865,.934003,-.74902,.31583,.776442,.867858,-.623529,.18302,.632034,.787722,-.498039,.117909,.484134,.713825,-.372549,.0507239,.335979,.654741,-.247059,0,.209874,.511832,-.121569,0,.114689,.28935,.00392157,.0157519,.00332021,455569e-13,.129412,.312914,0,0,.254902,.520865,0,0,.380392,.680105,.15255,.0025996,.505882,.785109,.339479,797922e-9,.631373,.857354,.522494,0,.756863,.910974,.699774,0,.882353,.951921,.842817,.478545,1,.881371,.912178,.818099]},{ColorSpace:"RGB",Name:"hsv",RGBPoints:[-1,1,0,0,-.666666,1,0,1,-.333333,0,0,1,0,0,1,1,.33333,0,1,0,.66666,1,1,0,1,1,0,0]},{ColorSpace:"Lab",Name:"hue_L60",RGBPoints:[-1,.964784,.400592,.349549,-.87451,.964915,.372498,.53785,-.74902,.892353,.401039,.759569,-.623529,.79263,.446956,.903017,-.498039,.682208,.49954,.966673,-.372549,.56392,.553082,.968836,-.247059,.442031,.606396,.901601,-.121569,.305499,.65701,.765784,.00392157,.197251,.687914,.620914,.129412,.193882,.701887,.472654,.254902,.249866,.706123,.320005,.380392,.35132,.697417,.202919,.505882,.498097,.669467,.125232,.631373,.637477,.626239,.107431,.756863,.762115,.56872,.155812,.882353,.889434,.481116,.240445,1,.964784,.400592,.349549]},{IndexedColors:[0,0,0,.8941176470588236,.1019607843137255,.1098039215686274,.2156862745098039,.4941176470588236,.7215686274509804,.3019607843137255,.6862745098039216,.2901960784313726,.596078431372549,.3058823529411765,.6392156862745098,1,.4980392156862745,0,.6509803921568628,.3372549019607843,.1568627450980392],Name:"Spectrum",NanColor:[.6509803921568628,.3372549019607843,.1568627450980392]},{IndexedColors:[.4745098039215686,.09019607843137255,.09019607843137255,.7098039215686275,.00392156862745098,.00392156862745098,.9372549019607843,.2784313725490196,.09803921568627451,.9764705882352941,.5137254901960784,.1411764705882353,1,.7058823529411765,0,1,.8980392156862745,.02352941176470588],Name:"Warm",NanColor:[1,.8980392156862745,.02352941176470588]},{IndexedColors:[.4588235294117647,.6941176470588235,.00392156862745098,.3450980392156863,.5019607843137255,.1607843137254902,.3137254901960784,.8431372549019608,.7490196078431373,.1098039215686274,.5843137254901961,.803921568627451,.2313725490196079,.407843137254902,.6705882352941176,.6039215686274509,.407843137254902,1,.3725490196078431,.2,.5019607843137255],Name:"Cool",NanColor:[.3725490196078431,.2,.5019607843137255]},{IndexedColors:[.2313725490196079,.407843137254902,.6705882352941176,.1098039215686274,.5843137254901961,.803921568627451,.3058823529411765,.8509803921568627,.9176470588235294,.4509803921568628,.6039215686274509,.8352941176470589,.2588235294117647,.2392156862745098,.6627450980392157,.3137254901960784,.3294117647058823,.5294117647058824,.06274509803921569,.1647058823529412,.3215686274509804],Name:"Blues",NanColor:[.06274509803921569,.1647058823529412,.3215686274509804]},{IndexedColors:[.1098039215686274,.5843137254901961,.803921568627451,.2313725490196079,.407843137254902,.6705882352941176,.4,.2431372549019608,.7176470588235294,.6352941176470588,.3294117647058823,.8117647058823529,.8705882352941177,.3803921568627451,.807843137254902,.8627450980392157,.3803921568627451,.5843137254901961,.2392156862745098,.06274509803921569,.3215686274509804],Name:"Wild Flower",NanColor:[.2392156862745098,.06274509803921569,.3215686274509804]},{IndexedColors:[.396078431372549,.4862745098039216,.2156862745098039,.4588235294117647,.6941176470588235,.00392156862745098,.6980392156862745,.7294117647058823,.1882352941176471,1,.8980392156862745,.02352941176470588,1,.7058823529411765,0,.9764705882352941,.5137254901960784,.1411764705882353],Name:"Citrus",NanColor:[.9764705882352941,.5137254901960784,.1411764705882353]},{IndexedColors:[.4980392156862745,.2313725490196079,.03137254901960784,.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333,.1764705882352941,0,.2941176470588235],Name:"Brewer Diverging Purple-Orange (11)",NanColor:[.1764705882352941,0,.2941176470588235]},{IndexedColors:[.4980392156862745,.2313725490196079,.03137254901960784,.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333,.1764705882352941,0,.2941176470588235],Name:"Brewer Diverging Purple-Orange (10)",NanColor:[.1764705882352941,0,.2941176470588235]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (9)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (8)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.9450980392156862,.6392156862745098,.2509803921568627,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6,.5568627450980392,.7647058823529411,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (7)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.9450980392156862,.6392156862745098,.2509803921568627,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6,.5568627450980392,.7647058823529411,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (6)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.9019607843137255,.3803921568627451,.00392156862745098,.9921568627450981,.7215686274509804,.3882352941176471,.9686274509803922,.9686274509803922,.9686274509803922,.6980392156862745,.6705882352941176,.8235294117647058,.3686274509803922,.2352941176470588,.6],Name:"Brewer Diverging Purple-Orange (5)",NanColor:[.3686274509803922,.2352941176470588,.6]},{IndexedColors:[.9019607843137255,.3803921568627451,.00392156862745098,.9921568627450981,.7215686274509804,.3882352941176471,.6980392156862745,.6705882352941176,.8235294117647058,.3686274509803922,.2352941176470588,.6],Name:"Brewer Diverging Purple-Orange (4)",NanColor:[.3686274509803922,.2352941176470588,.6]},{IndexedColors:[.9450980392156862,.6392156862745098,.2509803921568627,.9686274509803922,.9686274509803922,.9686274509803922,.6,.5568627450980392,.7647058823529411],Name:"Brewer Diverging Purple-Orange (3)",NanColor:[.6,.5568627450980392,.7647058823529411]},{IndexedColors:[.6196078431372549,.00392156862745098,.2588235294117647,.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353,.3686274509803922,.3098039215686275,.6352941176470588],Name:"Brewer Diverging Spectral (11)",NanColor:[.3686274509803922,.3098039215686275,.6352941176470588]},{IndexedColors:[.6196078431372549,.00392156862745098,.2588235294117647,.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353,.3686274509803922,.3098039215686275,.6352941176470588],Name:"Brewer Diverging Spectral (10)",NanColor:[.3686274509803922,.3098039215686275,.6352941176470588]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (9)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (8)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9882352941176471,.5529411764705883,.3490196078431372,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6,.8352941176470589,.5803921568627451,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (7)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9882352941176471,.5529411764705883,.3490196078431372,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6,.8352941176470589,.5803921568627451,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (6)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8431372549019608,.09803921568627451,.1098039215686274,.9921568627450981,.6823529411764706,.3803921568627451,1,1,.7490196078431373,.6705882352941176,.8666666666666667,.6431372549019608,.1686274509803922,.5137254901960784,.7294117647058823],Name:"Brewer Diverging Spectral (5)",NanColor:[.1686274509803922,.5137254901960784,.7294117647058823]},{IndexedColors:[.8431372549019608,.09803921568627451,.1098039215686274,.9921568627450981,.6823529411764706,.3803921568627451,.6705882352941176,.8666666666666667,.6431372549019608,.1686274509803922,.5137254901960784,.7294117647058823],Name:"Brewer Diverging Spectral (4)",NanColor:[.1686274509803922,.5137254901960784,.7294117647058823]},{IndexedColors:[.9882352941176471,.5529411764705883,.3490196078431372,1,1,.7490196078431373,.6,.8352941176470589,.5803921568627451],Name:"Brewer Diverging Spectral (3)",NanColor:[.6,.8352941176470589,.5803921568627451]},{IndexedColors:[.3294117647058823,.1882352941176471,.0196078431372549,.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922,0,.2352941176470588,.1882352941176471],Name:"Brewer Diverging Brown-Blue-Green (11)",NanColor:[0,.2352941176470588,.1882352941176471]},{IndexedColors:[.3294117647058823,.1882352941176471,.0196078431372549,.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922,0,.2352941176470588,.1882352941176471],Name:"Brewer Diverging Brown-Blue-Green (10)",NanColor:[0,.2352941176470588,.1882352941176471]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (9)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (8)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.8470588235294118,.7019607843137254,.396078431372549,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.3529411764705883,.7058823529411765,.6745098039215687,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (7)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.8470588235294118,.7019607843137254,.396078431372549,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.3529411764705883,.7058823529411765,.6745098039215687,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (6)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.6509803921568628,.3803921568627451,.1019607843137255,.8745098039215686,.7607843137254902,.4901960784313725,.9607843137254902,.9607843137254902,.9607843137254902,.5019607843137255,.803921568627451,.7568627450980392,.00392156862745098,.5215686274509804,.4431372549019608],Name:"Brewer Diverging Brown-Blue-Green (5)",NanColor:[.00392156862745098,.5215686274509804,.4431372549019608]},{IndexedColors:[.6509803921568628,.3803921568627451,.1019607843137255,.8745098039215686,.7607843137254902,.4901960784313725,.5019607843137255,.803921568627451,.7568627450980392,.00392156862745098,.5215686274509804,.4431372549019608],Name:"Brewer Diverging Brown-Blue-Green (4)",NanColor:[.00392156862745098,.5215686274509804,.4431372549019608]},{IndexedColors:[.8470588235294118,.7019607843137254,.396078431372549,.9607843137254902,.9607843137254902,.9607843137254902,.3529411764705883,.7058823529411765,.6745098039215687],Name:"Brewer Diverging Brown-Blue-Green (3)",NanColor:[.3529411764705883,.7058823529411765,.6745098039215687]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8980392156862745,.9607843137254902,.9764705882352941,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.4274509803921568,.1725490196078431,0,.2666666666666667,.1058823529411765],Name:"Brewer Sequential Blue-Green (9)",NanColor:[0,.2666666666666667,.1058823529411765]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8980392156862745,.9607843137254902,.9764705882352941,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.3450980392156863,.1411764705882353],Name:"Brewer Sequential Blue-Green (8)",NanColor:[0,.3450980392156863,.1411764705882353]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.8,.9254901960784314,.9019607843137255,.8,.9254901960784314,.9019607843137255,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.3450980392156863,.1411764705882353],Name:"Brewer Sequential Blue-Green (7)",NanColor:[0,.3450980392156863,.1411764705882353]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.1725490196078431,.6352941176470588,.3725490196078431,0,.4274509803921568,.1725490196078431],Name:"Brewer Sequential Blue-Green (6)",NanColor:[0,.4274509803921568,.1725490196078431]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.6980392156862745,.8862745098039215,.8862745098039215,.4,.7607843137254902,.6431372549019608,.1725490196078431,.6352941176470588,.3725490196078431,0,.4274509803921568,.1725490196078431],Name:"Brewer Sequential Blue-Green (5)",NanColor:[0,.4274509803921568,.1725490196078431]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.6980392156862745,.8862745098039215,.8862745098039215,.4,.7607843137254902,.6431372549019608,.1372549019607843,.5450980392156862,.2705882352941176],Name:"Brewer Sequential Blue-Green (4)",NanColor:[.1372549019607843,.5450980392156862,.2705882352941176]},{IndexedColors:[.8980392156862745,.9607843137254902,.9764705882352941,.6,.8470588235294118,.788235294117647,.1725490196078431,.6352941176470588,.3725490196078431],Name:"Brewer Sequential Blue-Green (3)",NanColor:[.1725490196078431,.6352941176470588,.3725490196078431]},{IndexedColors:[1,1,.8980392156862745,1,.9686274509803922,.7372549019607844,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.6,.203921568627451,.01568627450980392,.4,.1450980392156863,.02352941176470588],Name:"Brewer Sequential Yellow-Orange-Brown (9)",NanColor:[.4,.1450980392156863,.02352941176470588]},{IndexedColors:[1,1,.8980392156862745,1,.9686274509803922,.7372549019607844,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.5490196078431373,.1764705882352941,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (8)",NanColor:[.5490196078431373,.1764705882352941,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.5490196078431373,.1764705882352941,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (7)",NanColor:[.5490196078431373,.1764705882352941,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.8509803921568627,.3725490196078431,.05490196078431372,.6,.203921568627451,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (6)",NanColor:[.6,.203921568627451,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8509803921568627,.5568627450980392,.996078431372549,.6,.1607843137254902,.8509803921568627,.3725490196078431,.05490196078431372,.6,.203921568627451,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (5)",NanColor:[.6,.203921568627451,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8509803921568627,.5568627450980392,.996078431372549,.6,.1607843137254902,.8,.2980392156862745,.00784313725490196],Name:"Brewer Sequential Yellow-Orange-Brown (4)",NanColor:[.8,.2980392156862745,.00784313725490196]},{IndexedColors:[1,.9686274509803922,.7372549019607844,.996078431372549,.7686274509803922,.3098039215686275,.8509803921568627,.3725490196078431,.05490196078431372],Name:"Brewer Sequential Yellow-Orange-Brown (3)",NanColor:[.8509803921568627,.3725490196078431,.05490196078431372]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8784313725490196,.9254901960784314,.9568627450980393,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.5058823529411764,.05882352941176471,.4862745098039216,.3019607843137255,0,.2941176470588235],Name:"Brewer Sequential Blue-Purple (9)",NanColor:[.3019607843137255,0,.2941176470588235]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8784313725490196,.9254901960784314,.9568627450980393,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.4313725490196079,.00392156862745098,.4196078431372549],Name:"Brewer Sequential Blue-Purple (8)",NanColor:[.4313725490196079,.00392156862745098,.4196078431372549]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.4313725490196079,.00392156862745098,.4196078431372549],Name:"Brewer Sequential Blue-Purple (7)",NanColor:[.4313725490196079,.00392156862745098,.4196078431372549]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.3372549019607843,.6549019607843137,.5058823529411764,.05882352941176471,.4862745098039216],Name:"Brewer Sequential Blue-Purple (6)",NanColor:[.5058823529411764,.05882352941176471,.4862745098039216]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7019607843137254,.803921568627451,.8901960784313725,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.3372549019607843,.6549019607843137,.5058823529411764,.05882352941176471,.4862745098039216],Name:"Brewer Sequential Blue-Purple (5)",NanColor:[.5058823529411764,.05882352941176471,.4862745098039216]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7019607843137254,.803921568627451,.8901960784313725,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.2549019607843137,.615686274509804],Name:"Brewer Sequential Blue-Purple (4)",NanColor:[.5333333333333333,.2549019607843137,.615686274509804]},{IndexedColors:[.8784313725490196,.9254901960784314,.9568627450980393,.6196078431372549,.7372549019607844,.8549019607843137,.5333333333333333,.3372549019607843,.6549019607843137],Name:"Brewer Sequential Blue-Purple (3)",NanColor:[.5333333333333333,.3372549019607843,.6549019607843137]},{IndexedColors:[.4980392156862745,.788235294117647,.4980392156862745,.7450980392156863,.6823529411764706,.8313725490196079,.9921568627450981,.7529411764705882,.5254901960784314,1,1,.6,.2196078431372549,.4235294117647059,.6901960784313725,.9411764705882353,.00784313725490196,.4980392156862745,.7490196078431373,.3568627450980392,.09019607843137255,.4,.4,.4],Name:"Brewer Qualitative Accent",NanColor:[.4,.4,.4]},{IndexedColors:[.1058823529411765,.6196078431372549,.4666666666666667,.8509803921568627,.3725490196078431,.00784313725490196,.4588235294117647,.4392156862745098,.7019607843137254,.9058823529411765,.1607843137254902,.5411764705882353,.4,.6509803921568628,.1176470588235294,.9019607843137255,.6705882352941176,.00784313725490196,.6509803921568628,.4627450980392157,.1137254901960784,.4,.4,.4],Name:"Brewer Qualitative Dark2",NanColor:[.4,.4,.4]},{IndexedColors:[.4,.7607843137254902,.6470588235294118,.9882352941176471,.5529411764705883,.3843137254901961,.5529411764705883,.6274509803921569,.796078431372549,.9058823529411765,.5411764705882353,.7647058823529411,.6509803921568628,.8470588235294118,.3294117647058823,1,.8509803921568627,.1843137254901961,.8980392156862745,.7686274509803922,.5803921568627451,.7019607843137254,.7019607843137254,.7019607843137254],Name:"Brewer Qualitative Set2",NanColor:[.7019607843137254,.7019607843137254,.7019607843137254]},{IndexedColors:[.7019607843137254,.8862745098039215,.803921568627451,.9921568627450981,.803921568627451,.6745098039215687,.796078431372549,.8352941176470589,.9098039215686274,.9568627450980393,.792156862745098,.8941176470588236,.9019607843137255,.9607843137254902,.788235294117647,1,.9490196078431372,.6823529411764706,.9450980392156862,.8862745098039215,.8,.8,.8,.8],Name:"Brewer Qualitative Pastel2",NanColor:[.8,.8,.8]},{IndexedColors:[.984313725490196,.7058823529411765,.6823529411764706,.7019607843137254,.803921568627451,.8901960784313725,.8,.9215686274509803,.7725490196078432,.8705882352941177,.796078431372549,.8941176470588236,.996078431372549,.8509803921568627,.6509803921568628,1,1,.8,.8980392156862745,.8470588235294118,.7411764705882353,.9921568627450981,.8549019607843137,.9254901960784314,.9490196078431372,.9490196078431372,.9490196078431372],Name:"Brewer Qualitative Pastel1",NanColor:[.9490196078431372,.9490196078431372,.9490196078431372]},{IndexedColors:[.8941176470588236,.1019607843137255,.1098039215686274,.2156862745098039,.4941176470588236,.7215686274509804,.3019607843137255,.6862745098039216,.2901960784313726,.596078431372549,.3058823529411765,.6392156862745098,1,.4980392156862745,0,1,1,.2,.6509803921568628,.3372549019607843,.1568627450980392,.9686274509803922,.5058823529411764,.7490196078431373,.6,.6,.6],Name:"Brewer Qualitative Set1",NanColor:[.6,.6,.6]},{IndexedColors:[.6509803921568628,.807843137254902,.8901960784313725,.1215686274509804,.4705882352941176,.7058823529411765,.6980392156862745,.8745098039215686,.5411764705882353,.2,.6274509803921569,.1725490196078431,.984313725490196,.6039215686274509,.6,.8901960784313725,.1019607843137255,.1098039215686274,.9921568627450981,.7490196078431373,.4352941176470588,1,.4980392156862745,0,.792156862745098,.6980392156862745,.8392156862745098,.4156862745098039,.2392156862745098,.6039215686274509,1,1,.6],Name:"Brewer Qualitative Paired",NanColor:[1,1,.6]},{IndexedColors:[.5529411764705883,.8274509803921568,.7803921568627451,1,1,.7019607843137254,.7450980392156863,.7294117647058823,.8549019607843137,.984313725490196,.5019607843137255,.4470588235294118,.5019607843137255,.6941176470588235,.8274509803921568,.9921568627450981,.7058823529411765,.3843137254901961,.7019607843137254,.8705882352941177,.4117647058823529,.9882352941176471,.803921568627451,.8980392156862745,.8509803921568627,.8509803921568627,.8509803921568627,.7372549019607844,.5019607843137255,.7411764705882353,.8,.9215686274509803,.7725490196078432,1,.9294117647058824,.4352941176470588],Name:"Brewer Qualitative Set3",NanColor:[1,.9294117647058824,.4352941176470588]},{IndexedColors:[1,0,0,1,.862745,0,0,.695201,0],Name:"Traffic Lights",NanColor:[.803922,0,.803922]},{IndexedColors:[.908659,.604013,.581857,1,.862745,0,0,.695201,0],Name:"Traffic Lights For Deuteranopes",NanColor:[.803922,0,.803922]},{IndexedColors:[.4196078431372549,0,.07058823529411765,.9019607843137255,.9411764705882353,.0196078431372549,.01568627450980392,.6196078431372549,.00784313725490196],Name:"Traffic Lights For Deuteranopes 2",NanColor:[.803922,0,.803922]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Muted Blue-Green",NanColor:[.25,0,0],RGBPoints:[0,.109804,.27451,.301961,.02,.129412,.309804,.341176,.05,.14902,.341176,.380392,.1,.188235,.403922,.458824,.15,.227451,.447059,.521569,.2,.290196,.494118,.588235,.25,.368627,.552941,.670588,.3,.458824,.619608,.74902,.35,.588235,.713725,.85098,.4,.72549,.815686,.941176,.45,.831373,.882353,.980392,.475,.909804,.933333,1,.5,.980392,.984314,1,.5,.996078,1,.94902,.5,1,1,.980392,.5,.980392,.984314,1,.525,.972549,.988235,.890196,.55,.917647,.960784,.835294,.6,.835294,.921569,.772549,.65,.768627,.901961,.737255,.7,.670588,.831373,.654902,.75,.576471,.760784,.584314,.8,.498039,.678431,.521569,.85,.392157,.560784,.427451,.9,.294118,.45098,.333333,.95,.211765,.34902,.254902,1,.152941,.278431,.196078]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Green-Blue Asymmetric Divergent (62Blbc)",NanColor:[.25,0,0],RGBPoints:[0,.121569,.2,.145098,.05,.196078,.301961,.223529,.1,.258824,.4,.278431,.2,.341176,.54902,.341176,.25,.419608,.619608,.376471,.3,.545098,.701961,.392157,.35,.643137,.780392,.403922,.4,.729412,.819608,.45098,.45,.811765,.870588,.521569,.5,.898039,.909804,.564706,.55,.941176,.92549,.686275,.6,.960784,.94902,.776471,.64,1,1,1,.65,.890196,.988235,.972549,.7,.721569,.894118,.901961,.75,.631373,.823529,.839216,.8,.517647,.662745,.701961,.85,.384314,.494118,.54902,.9,.298039,.360784,.45098,.95,.223529,.25098,.34902,.99,.156863,.172549,.25098,1,.137255,.137255,.188235]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Asymmtrical Earth Tones (6_21b)",NanColor:[.25,0,0],RGBPoints:[0,.141176,.14902,.2,.05,.215686,.258824,.321569,.1,.243137,.368627,.380392,.15,.27451,.439216,.4,.2,.32549,.501961,.384314,.25,.403922,.6,.419608,.3,.486275,.701961,.454902,.35,.556863,.74902,.494118,.4,.670588,.8,.545098,.5,.854902,.901961,.631373,.55,.92549,.941176,.694118,.6,.960784,.94902,.776471,.65,.988235,.968627,.909804,.7,.839216,.815686,.772549,.75,.701961,.662745,.615686,.8,.6,.529412,.478431,.85,.501961,.403922,.360784,.9,.439216,.313725,.290196,1,.301961,.164706,.176471]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Yellow 15",NanColor:[.25,0,0],RGBPoints:[0,1,1,.988235,.002,1,1,.988235,.05,.984314,.988235,.843137,.1,.988235,.988235,.741176,.15,.980392,.968627,.654902,.2,.980392,.945098,.576471,.25,.968627,.905882,.486275,.3,.968627,.862745,.388235,.35,.960784,.803922,.286275,.4,.94902,.741176,.219608,.45,.941176,.678431,.14902,.5,.929412,.607843,.094118,.55,.921569,.545098,.054902,.6,.909804,.486275,.035294,.65,.890196,.411765,.019608,.7,.8,.305882,0,.75,.760784,.239216,0,.8,.678431,.180392,.011765,.85,.6,.121569,.023529,.9,.501961,.054902,.031373,.95,.4,.039216,.058824,1,.301961,.047059,.090196]},{ColorSpace:"Diverging",Name:"Magma (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.001462,466e-6,.013866,.003922,.002258,.001295,.018331,.007843,.003279,.002305,.023708,.011765,.004512,.00349,.029965,.015686,.00595,.004843,.03713,.019608,.007588,.006356,.044973,.023529,.009426,.008022,.052844,.027451,.011465,.009828,.06075,.031373,.013708,.011771,.068667,.035294,.016156,.01384,.076603,.039216,.018815,.016026,.084584,.043137,.021692,.01832,.09261,.047059,.024792,.020715,.100676,.05098,.028123,.023201,.108787,.054902,.031696,.025765,.116965,.058824,.03552,.028397,.125209,.062745,.039608,.03109,.133515,.066667,.04383,.03383,.141886,.070588,.048062,.036607,.150327,.07451,.05232,.039407,.158841,.078431,.056615,.04216,.167446,.082353,.060949,.044794,.176129,.086275,.06533,.047318,.184892,.090196,.069764,.049726,.193735,.094118,.074257,.052017,.20266,.098039,.078815,.054184,.211667,.101961,.083446,.056225,.220755,.105882,.088155,.058133,.229922,.109804,.092949,.059904,.239164,.113725,.097833,.061531,.248477,.117647,.102815,.06301,.257854,.121569,.107899,.064335,.267289,.12549,.113094,.065492,.276784,.129412,.118405,.066479,.286321,.133333,.123833,.067295,.295879,.137255,.12938,.067935,.305443,.141176,.135053,.068391,.315,.145098,.140858,.068654,.324538,.14902,.146785,.068738,.334011,.152941,.152839,.068637,.343404,.156863,.159018,.068354,.352688,.160784,.165308,.067911,.361816,.164706,.171713,.067305,.370771,.168627,.178212,.066576,.379497,.172549,.184801,.065732,.387973,.176471,.19146,.064818,.396152,.180392,.198177,.063862,.404009,.184314,.204935,.062907,.411514,.188235,.211718,.061992,.418647,.192157,.218512,.061158,.425392,.196078,.225302,.060445,.431742,.2,.232077,.059889,.437695,.203922,.238826,.059517,.443256,.207843,.245543,.059352,.448436,.211765,.25222,.059415,.453248,.215686,.258857,.059706,.45771,.219608,.265447,.060237,.46184,.223529,.271994,.060994,.46566,.227451,.278493,.061978,.46919,.231373,.284951,.063168,.472451,.235294,.291366,.064553,.475462,.239216,.29774,.066117,.478243,.243137,.304081,.067835,.480812,.247059,.310382,.069702,.483186,.25098,.316654,.07169,.48538,.254902,.322899,.073782,.487408,.258824,.329114,.075972,.489287,.262745,.335308,.078236,.491024,.266667,.341482,.080564,.492631,.270588,.347636,.082946,.494121,.27451,.353773,.085373,.495501,.278431,.359898,.087831,.496778,.282353,.366012,.090314,.49796,.286275,.372116,.092816,.499053,.290196,.378211,.095332,.500067,.294118,.384299,.097855,.501002,.298039,.390384,.100379,.501864,.301961,.396467,.102902,.502658,.305882,.402548,.10542,.503386,.309804,.408629,.10793,.504052,.313725,.414709,.110431,.504662,.317647,.420791,.11292,.505215,.321569,.426877,.115395,.505714,.32549,.432967,.117855,.50616,.329412,.439062,.120298,.506555,.333333,.445163,.122724,.506901,.337255,.451271,.125132,.507198,.341176,.457386,.127522,.507448,.345098,.463508,.129893,.507652,.34902,.46964,.132245,.507809,.352941,.47578,.134577,.507921,.356863,.481929,.136891,.507989,.360784,.488088,.139186,.508011,.364706,.494258,.141462,.507988,.368627,.500438,.143719,.50792,.372549,.506629,.145958,.507806,.376471,.512831,.148179,.507648,.380392,.519045,.150383,.507443,.384314,.52527,.152569,.507192,.388235,.531507,.154739,.506895,.392157,.537755,.156894,.506551,.396078,.544015,.159033,.506159,.4,.550287,.161158,.505719,.403922,.556571,.163269,.50523,.407843,.562866,.165368,.504692,.411765,.569172,.167454,.504105,.415686,.57549,.16953,.503466,.419608,.581819,.171596,.502777,.423529,.588158,.173652,.502035,.427451,.594508,.175701,.501241,.431373,.600868,.177743,.500394,.435294,.607238,.179779,.499492,.439216,.613617,.181811,.498536,.443137,.620005,.18384,.497524,.447059,.626401,.185867,.496456,.45098,.632805,.187893,.495332,.454902,.639216,.189921,.49415,.458824,.645633,.191952,.49291,.462745,.652056,.193986,.491611,.466667,.658483,.196027,.490253,.470588,.664915,.198075,.488836,.47451,.671349,.200133,.487358,.478431,.677786,.202203,.485819,.482353,.684224,.204286,.484219,.486275,.690661,.206384,.482558,.490196,.697098,.208501,.480835,.494118,.703532,.210638,.479049,.498039,.709962,.212797,.477201,.501961,.716387,.214982,.47529,.505882,.722805,.217194,.473316,.509804,.729216,.219437,.471279,.513725,.735616,.221713,.46918,.517647,.742004,.224025,.467018,.521569,.748378,.226377,.464794,.52549,.754737,.228772,.462509,.529412,.761077,.231214,.460162,.533333,.767398,.233705,.457755,.537255,.773695,.236249,.455289,.541176,.779968,.238851,.452765,.545098,.786212,.241514,.450184,.54902,.792427,.244242,.447543,.552941,.798608,.24704,.444848,.556863,.804752,.249911,.442102,.560784,.810855,.252861,.439305,.564706,.816914,.255895,.436461,.568627,.822926,.259016,.433573,.572549,.828886,.262229,.430644,.576471,.834791,.26554,.427671,.580392,.840636,.268953,.424666,.584314,.846416,.272473,.421631,.588235,.852126,.276106,.418573,.592157,.857763,.279857,.415496,.596078,.86332,.283729,.412403,.6,.868793,.287728,.409303,.603922,.874176,.291859,.406205,.607843,.879464,.296125,.403118,.611765,.884651,.30053,.400047,.615686,.889731,.305079,.397002,.619608,.8947,.309773,.393995,.623529,.899552,.314616,.391037,.627451,.904281,.31961,.388137,.631373,.908884,.324755,.385308,.635294,.913354,.330052,.382563,.639216,.917689,.3355,.379915,.643137,.921884,.341098,.377376,.647059,.925937,.346844,.374959,.65098,.929845,.352734,.372677,.654902,.933606,.358764,.370541,.658824,.937221,.364929,.368567,.662745,.940687,.371224,.366762,.666667,.944006,.377643,.365136,.670588,.94718,.384178,.363701,.67451,.95021,.39082,.362468,.678431,.953099,.397563,.361438,.682353,.955849,.4044,.360619,.686275,.958464,.411324,.360014,.690196,.960949,.418323,.35963,.694118,.96331,.42539,.359469,.698039,.965549,.432519,.359529,.701961,.967671,.439703,.35981,.705882,.96968,.446936,.360311,.709804,.971582,.45421,.36103,.713725,.973381,.46152,.361965,.717647,.975082,.468861,.363111,.721569,.97669,.476226,.364466,.72549,.97821,.483612,.366025,.729412,.979645,.491014,.367783,.733333,.981,.498428,.369734,.737255,.982279,.505851,.371874,.741176,.983485,.51328,.374198,.745098,.984622,.520713,.376698,.74902,.985693,.528148,.379371,.752941,.9867,.535582,.38221,.756863,.987646,.543015,.38521,.760784,.988533,.550446,.388365,.764706,.989363,.557873,.391671,.768627,.990138,.565296,.395122,.772549,.990871,.572706,.398714,.776471,.991558,.580107,.402441,.780392,.992196,.587502,.406299,.784314,.992785,.594891,.410283,.788235,.993326,.602275,.41439,.792157,.993834,.609644,.418613,.796078,.994309,.616999,.42295,.8,.994738,.62435,.427397,.803922,.995122,.631696,.431951,.807843,.99548,.639027,.436607,.811765,.99581,.646344,.441361,.815686,.996096,.653659,.446213,.819608,.996341,.660969,.45116,.823529,.99658,.668256,.456192,.827451,.996775,.675541,.461314,.831373,.996925,.682828,.466526,.835294,.997077,.690088,.471811,.839216,.997186,.697349,.477182,.843137,.997254,.704611,.482635,.847059,.997325,.711848,.488154,.85098,.997351,.719089,.493755,.854902,.997351,.726324,.499428,.858824,.997341,.733545,.505167,.862745,.997285,.740772,.510983,.866667,.997228,.747981,.516859,.870588,.997138,.75519,.522806,.87451,.997019,.762398,.528821,.878431,.996898,.769591,.534892,.882353,.996727,.776795,.541039,.886275,.996571,.783977,.547233,.890196,.996369,.791167,.553499,.894118,.996162,.798348,.55982,.898039,.995932,.805527,.566202,.901961,.99568,.812706,.572645,.905882,.995424,.819875,.57914,.909804,.995131,.827052,.585701,.913725,.994851,.834213,.592307,.917647,.994524,.841387,.598983,.921569,.994222,.84854,.605696,.92549,.993866,.855711,.612482,.929412,.993545,.862859,.619299,.933333,.99317,.870024,.626189,.937255,.992831,.877168,.633109,.941176,.99244,.88433,.640099,.945098,.992089,.89147,.647116,.94902,.991688,.898627,.654202,.952941,.991332,.905763,.661309,.956863,.99093,.912915,.668481,.960784,.99057,.920049,.675675,.964706,.990175,.927196,.682926,.968627,.989815,.934329,.690198,.972549,.989434,.94147,.697519,.976471,.989077,.948604,.704863,.980392,.988717,.955742,.712242,.984314,.988367,.962878,.719649,.988235,.988033,.970012,.727077,.992157,.987691,.977154,.734536,.996078,.987387,.984288,.742002,1,.987053,.991438,.749504]},{ColorSpace:"Diverging",Name:"Inferno (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.001462,466e-6,.013866,.003922,.002267,.00127,.01857,.007843,.003299,.002249,.024239,.011765,.004547,.003392,.030909,.015686,.006006,.004692,.038558,.019608,.007676,.006136,.046836,.023529,.009561,.007713,.055143,.027451,.011663,.009417,.06346,.031373,.013995,.011225,.071862,.035294,.016561,.013136,.080282,.039216,.019373,.015133,.088767,.043137,.022447,.017199,.097327,.047059,.025793,.019331,.10593,.05098,.029432,.021503,.114621,.054902,.033385,.023702,.123397,.058824,.037668,.025921,.132232,.062745,.042253,.028139,.141141,.066667,.046915,.030324,.150164,.070588,.051644,.032474,.159254,.07451,.056449,.034569,.168414,.078431,.06134,.03659,.177642,.082353,.066331,.038504,.186962,.086275,.071429,.040294,.196354,.090196,.076637,.041905,.205799,.094118,.081962,.043328,.215289,.098039,.087411,.044556,.224813,.101961,.09299,.045583,.234358,.105882,.098702,.046402,.243904,.109804,.104551,.047008,.25343,.113725,.110536,.047399,.262912,.117647,.116656,.047574,.272321,.121569,.122908,.047536,.281624,.12549,.129285,.047293,.290788,.129412,.135778,.046856,.299776,.133333,.142378,.046242,.308553,.137255,.149073,.045468,.317085,.141176,.15585,.044559,.325338,.145098,.162689,.043554,.333277,.14902,.169575,.042489,.340874,.152941,.176493,.041402,.348111,.156863,.183429,.040329,.354971,.160784,.190367,.039309,.361447,.164706,.197297,.0384,.367535,.168627,.204209,.037632,.373238,.172549,.211095,.03703,.378563,.176471,.217949,.036615,.383522,.180392,.224763,.036405,.388129,.184314,.231538,.036405,.3924,.188235,.238273,.036621,.396353,.192157,.244967,.037055,.400007,.196078,.25162,.037705,.403378,.2,.258234,.038571,.406485,.203922,.26481,.039647,.409345,.207843,.271347,.040922,.411976,.211765,.27785,.042353,.414392,.215686,.284321,.043933,.416608,.219608,.290763,.045644,.418637,.223529,.297178,.04747,.420491,.227451,.303568,.049396,.422182,.231373,.309935,.051407,.423721,.235294,.316282,.05349,.425116,.239216,.32261,.055634,.426377,.243137,.328921,.057827,.427511,.247059,.335217,.06006,.428524,.25098,.3415,.062325,.429425,.254902,.347771,.064616,.430217,.258824,.354032,.066925,.430906,.262745,.360284,.069247,.431497,.266667,.366529,.071579,.431994,.270588,.372768,.073915,.4324,.27451,.379001,.076253,.432719,.278431,.385228,.078591,.432955,.282353,.391453,.080927,.433109,.286275,.397674,.083257,.433183,.290196,.403894,.08558,.433179,.294118,.410113,.087896,.433098,.298039,.416331,.090203,.432943,.301961,.422549,.092501,.432714,.305882,.428768,.09479,.432412,.309804,.434987,.097069,.432039,.313725,.441207,.099338,.431594,.317647,.447428,.101597,.43108,.321569,.453651,.103848,.430498,.32549,.459875,.106089,.429846,.329412,.4661,.108322,.429125,.333333,.472328,.110547,.428334,.337255,.478558,.112764,.427475,.341176,.484789,.114974,.426548,.345098,.491022,.117179,.425552,.34902,.497257,.119379,.424488,.352941,.503493,.121575,.423356,.356863,.50973,.123769,.422156,.360784,.515967,.12596,.420887,.364706,.522206,.12815,.419549,.368627,.528444,.130341,.418142,.372549,.534683,.132534,.416667,.376471,.54092,.134729,.415123,.380392,.547157,.136929,.413511,.384314,.553392,.139134,.411829,.388235,.559624,.141346,.410078,.392157,.565854,.143567,.408258,.396078,.572081,.145797,.406369,.4,.578304,.148039,.404411,.403922,.584521,.150294,.402385,.407843,.590734,.152563,.40029,.411765,.59694,.154848,.398125,.415686,.603139,.157151,.395891,.419608,.60933,.159474,.393589,.423529,.615513,.161817,.391219,.427451,.621685,.164184,.388781,.431373,.627847,.166575,.386276,.435294,.633998,.168992,.383704,.439216,.640135,.171438,.381065,.443137,.64626,.173914,.378359,.447059,.652369,.176421,.375586,.45098,.658463,.178962,.372748,.454902,.66454,.181539,.369846,.458824,.670599,.184153,.366879,.462745,.676638,.186807,.363849,.466667,.682656,.189501,.360757,.470588,.688653,.192239,.357603,.47451,.694627,.195021,.354388,.478431,.700576,.197851,.351113,.482353,.7065,.200728,.347777,.486275,.712396,.203656,.344383,.490196,.718264,.206636,.340931,.494118,.724103,.20967,.337424,.498039,.729909,.212759,.333861,.501961,.735683,.215906,.330245,.505882,.741423,.219112,.326576,.509804,.747127,.222378,.322856,.513725,.752794,.225706,.319085,.517647,.758422,.229097,.315266,.521569,.76401,.232554,.311399,.52549,.769556,.236077,.307485,.529412,.775059,.239667,.303526,.533333,.780517,.243327,.299523,.537255,.785929,.247056,.295477,.541176,.791293,.250856,.29139,.545098,.796607,.254728,.287264,.54902,.801871,.258674,.283099,.552941,.807082,.262692,.278898,.556863,.812239,.266786,.274661,.560784,.817341,.270954,.27039,.564706,.822386,.275197,.266085,.568627,.827372,.279517,.26175,.572549,.832299,.283913,.257383,.576471,.837165,.288385,.252988,.580392,.841969,.292933,.248564,.584314,.846709,.297559,.244113,.588235,.851384,.30226,.239636,.592157,.855992,.307038,.235133,.596078,.860533,.311892,.230606,.6,.865006,.316822,.226055,.603922,.869409,.321827,.221482,.607843,.873741,.326906,.216886,.611765,.878001,.33206,.212268,.615686,.882188,.337287,.207628,.619608,.886302,.342586,.202968,.623529,.890341,.347957,.198286,.627451,.894305,.353399,.193584,.631373,.898192,.358911,.18886,.635294,.902003,.364492,.184116,.639216,.905735,.37014,.17935,.643137,.90939,.375856,.174563,.647059,.912966,.381636,.169755,.65098,.916462,.387481,.164924,.654902,.919879,.393389,.16007,.658824,.923215,.399359,.155193,.662745,.92647,.405389,.150292,.666667,.929644,.411479,.145367,.670588,.932737,.417627,.140417,.67451,.935747,.423831,.13544,.678431,.938675,.430091,.130438,.682353,.941521,.436405,.125409,.686275,.944285,.442772,.120354,.690196,.946965,.449191,.115272,.694118,.949562,.45566,.110164,.698039,.952075,.462178,.105031,.701961,.954506,.468744,.099874,.705882,.956852,.475356,.094695,.709804,.959114,.482014,.089499,.713725,.961293,.488716,.084289,.717647,.963387,.495462,.079073,.721569,.965397,.502249,.073859,.72549,.967322,.509078,.068659,.729412,.969163,.515946,.063488,.733333,.970919,.522853,.058367,.737255,.97259,.529798,.053324,.741176,.974176,.53678,.048392,.745098,.975677,.543798,.043618,.74902,.977092,.55085,.03905,.752941,.978422,.557937,.034931,.756863,.979666,.565057,.031409,.760784,.980824,.572209,.028508,.764706,.981895,.579392,.02625,.768627,.982881,.586606,.024661,.772549,.983779,.593849,.02377,.776471,.984591,.601122,.023606,.780392,.985315,.608422,.024202,.784314,.985952,.61575,.025592,.788235,.986502,.623105,.027814,.792157,.986964,.630485,.030908,.796078,.987337,.63789,.034916,.8,.987622,.64532,.039886,.803922,.987819,.652773,.045581,.807843,.987926,.66025,.05175,.811765,.987945,.667748,.058329,.815686,.987874,.675267,.065257,.819608,.987714,.682807,.072489,.823529,.987464,.690366,.07999,.827451,.987124,.697944,.087731,.831373,.986694,.70554,.095694,.835294,.986175,.713153,.103863,.839216,.985566,.720782,.112229,.843137,.984865,.728427,.120785,.847059,.984075,.736087,.129527,.85098,.983196,.743758,.138453,.854902,.982228,.751442,.147565,.858824,.981173,.759135,.156863,.862745,.980032,.766837,.166353,.866667,.978806,.774545,.176037,.870588,.977497,.782258,.185923,.87451,.976108,.789974,.196018,.878431,.974638,.797692,.206332,.882353,.973088,.805409,.216877,.886275,.971468,.813122,.227658,.890196,.969783,.820825,.238686,.894118,.968041,.828515,.249972,.898039,.966243,.836191,.261534,.901961,.964394,.843848,.273391,.905882,.962517,.851476,.285546,.909804,.960626,.859069,.29801,.913725,.95872,.866624,.31082,.917647,.956834,.874129,.323974,.921569,.954997,.881569,.337475,.92549,.953215,.888942,.351369,.929412,.951546,.896226,.365627,.933333,.950018,.903409,.380271,.937255,.948683,.910473,.395289,.941176,.947594,.917399,.410665,.945098,.946809,.924168,.426373,.94902,.946392,.930761,.442367,.952941,.946403,.937159,.458592,.956863,.946903,.943348,.47497,.960784,.947937,.949318,.491426,.964706,.949545,.955063,.50786,.968627,.95174,.960587,.524203,.972549,.954529,.965896,.540361,.976471,.957896,.971003,.556275,.980392,.961812,.975924,.571925,.984314,.966249,.980678,.587206,.988235,.971162,.985282,.602154,.992157,.976511,.989753,.61676,.996078,.982257,.994109,.631017,1,.988362,.998364,.644924]},{ColorSpace:"Diverging",Name:"Plasma (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.050383,.029803,.527975,.003922,.063536,.028426,.533124,.007843,.075353,.027206,.538007,.011765,.086222,.026125,.542658,.015686,.096379,.025165,.547103,.019608,.10598,.024309,.551368,.023529,.115124,.023556,.555468,.027451,.123903,.022878,.559423,.031373,.132381,.022258,.56325,.035294,.140603,.021687,.566959,.039216,.148607,.021154,.570562,.043137,.156421,.020651,.574065,.047059,.16407,.020171,.577478,.05098,.171574,.019706,.580806,.054902,.17895,.019252,.584054,.058824,.186213,.018803,.587228,.062745,.193374,.018354,.59033,.066667,.200445,.017902,.593364,.070588,.207435,.017442,.596333,.07451,.21435,.016973,.599239,.078431,.221197,.016497,.602083,.082353,.227983,.016007,.604867,.086275,.234715,.015502,.607592,.090196,.241396,.014979,.610259,.094118,.248032,.014439,.612868,.098039,.254627,.013882,.615419,.101961,.261183,.013308,.617911,.105882,.267703,.012716,.620346,.109804,.274191,.012109,.622722,.113725,.280648,.011488,.625038,.117647,.287076,.010855,.627295,.121569,.293478,.010213,.62949,.12549,.299855,.009561,.631624,.129412,.30621,.008902,.633694,.133333,.312543,.008239,.6357,.137255,.318856,.007576,.63764,.141176,.32515,.006915,.639512,.145098,.331426,.006261,.641316,.14902,.337683,.005618,.643049,.152941,.343925,.004991,.64471,.156863,.35015,.004382,.646298,.160784,.356359,.003798,.64781,.164706,.362553,.003243,.649245,.168627,.368733,.002724,.650601,.172549,.374897,.002245,.651876,.176471,.381047,.001814,.653068,.180392,.387183,.001434,.654177,.184314,.393304,.001114,.655199,.188235,.399411,859e-6,.656133,.192157,.405503,678e-6,.656977,.196078,.41158,577e-6,.65773,.2,.417642,564e-6,.65839,.203922,.423689,646e-6,.658956,.207843,.429719,831e-6,.659425,.211765,.435734,.001127,.659797,.215686,.441732,.00154,.660069,.219608,.447714,.00208,.66024,.223529,.453677,.002755,.66031,.227451,.459623,.003574,.660277,.231373,.46555,.004545,.660139,.235294,.471457,.005678,.659897,.239216,.477344,.00698,.659549,.243137,.48321,.00846,.659095,.247059,.489055,.010127,.658534,.25098,.494877,.01199,.657865,.254902,.500678,.014055,.657088,.258824,.506454,.016333,.656202,.262745,.512206,.018833,.655209,.266667,.517933,.021563,.654109,.270588,.523633,.024532,.652901,.27451,.529306,.027747,.651586,.278431,.534952,.031217,.650165,.282353,.54057,.03495,.64864,.286275,.546157,.038954,.64701,.290196,.551715,.043136,.645277,.294118,.557243,.047331,.643443,.298039,.562738,.051545,.641509,.301961,.568201,.055778,.639477,.305882,.573632,.060028,.637349,.309804,.579029,.064296,.635126,.313725,.584391,.068579,.632812,.317647,.589719,.072878,.630408,.321569,.595011,.07719,.627917,.32549,.600266,.081516,.625342,.329412,.605485,.085854,.622686,.333333,.610667,.090204,.619951,.337255,.615812,.094564,.61714,.341176,.620919,.098934,.614257,.345098,.625987,.103312,.611305,.34902,.631017,.107699,.608287,.352941,.636008,.112092,.605205,.356863,.640959,.116492,.602065,.360784,.645872,.120898,.598867,.364706,.650746,.125309,.595617,.368627,.65558,.129725,.592317,.372549,.660374,.134144,.588971,.376471,.665129,.138566,.585582,.380392,.669845,.142992,.582154,.384314,.674522,.147419,.578688,.388235,.67916,.151848,.575189,.392157,.683758,.156278,.57166,.396078,.688318,.160709,.568103,.4,.69284,.165141,.564522,.403922,.697324,.169573,.560919,.407843,.701769,.174005,.557296,.411765,.706178,.178437,.553657,.415686,.710549,.182868,.550004,.419608,.714883,.187299,.546338,.423529,.719181,.191729,.542663,.427451,.723444,.196158,.538981,.431373,.72767,.200586,.535293,.435294,.731862,.205013,.531601,.439216,.736019,.209439,.527908,.443137,.740143,.213864,.524216,.447059,.744232,.218288,.520524,.45098,.748289,.222711,.516834,.454902,.752312,.227133,.513149,.458824,.756304,.231555,.509468,.462745,.760264,.235976,.505794,.466667,.764193,.240396,.502126,.470588,.76809,.244817,.498465,.47451,.771958,.249237,.494813,.478431,.775796,.253658,.491171,.482353,.779604,.258078,.487539,.486275,.783383,.2625,.483918,.490196,.787133,.266922,.480307,.494118,.790855,.271345,.476706,.498039,.794549,.27577,.473117,.501961,.798216,.280197,.469538,.505882,.801855,.284626,.465971,.509804,.805467,.289057,.462415,.513725,.809052,.293491,.45887,.517647,.812612,.297928,.455338,.521569,.816144,.302368,.451816,.52549,.819651,.306812,.448306,.529412,.823132,.311261,.444806,.533333,.826588,.315714,.441316,.537255,.830018,.320172,.437836,.541176,.833422,.324635,.434366,.545098,.836801,.329105,.430905,.54902,.840155,.33358,.427455,.552941,.843484,.338062,.424013,.556863,.846788,.342551,.420579,.560784,.850066,.347048,.417153,.564706,.853319,.351553,.413734,.568627,.856547,.356066,.410322,.572549,.85975,.360588,.406917,.576471,.862927,.365119,.403519,.580392,.866078,.36966,.400126,.584314,.869203,.374212,.396738,.588235,.872303,.378774,.393355,.592157,.875376,.383347,.389976,.596078,.878423,.387932,.3866,.6,.881443,.392529,.383229,.603922,.884436,.397139,.37986,.607843,.887402,.401762,.376494,.611765,.89034,.406398,.37313,.615686,.89325,.411048,.369768,.619608,.896131,.415712,.366407,.623529,.898984,.420392,.363047,.627451,.901807,.425087,.359688,.631373,.904601,.429797,.356329,.635294,.907365,.434524,.35297,.639216,.910098,.439268,.34961,.643137,.9128,.444029,.346251,.647059,.915471,.448807,.34289,.65098,.918109,.453603,.339529,.654902,.920714,.458417,.336166,.658824,.923287,.463251,.332801,.662745,.925825,.468103,.329435,.666667,.928329,.472975,.326067,.670588,.930798,.477867,.322697,.67451,.933232,.48278,.319325,.678431,.93563,.487712,.315952,.682353,.93799,.492667,.312575,.686275,.940313,.497642,.309197,.690196,.942598,.502639,.305816,.694118,.944844,.507658,.302433,.698039,.947051,.512699,.299049,.701961,.949217,.517763,.295662,.705882,.951344,.52285,.292275,.709804,.953428,.52796,.288883,.713725,.95547,.533093,.28549,.717647,.957469,.53825,.282096,.721569,.959424,.543431,.278701,.72549,.961336,.548636,.275305,.729412,.963203,.553865,.271909,.733333,.965024,.559118,.268513,.737255,.966798,.564396,.265118,.741176,.968526,.5697,.261721,.745098,.970205,.575028,.258325,.74902,.971835,.580382,.254931,.752941,.973416,.585761,.25154,.756863,.974947,.591165,.248151,.760784,.976428,.596595,.244767,.764706,.977856,.602051,.241387,.768627,.979233,.607532,.238013,.772549,.980556,.613039,.234646,.776471,.981826,.618572,.231287,.780392,.983041,.624131,.227937,.784314,.984199,.629718,.224595,.788235,.985301,.63533,.221265,.792157,.986345,.640969,.217948,.796078,.987332,.646633,.214648,.8,.98826,.652325,.211364,.803922,.989128,.658043,.2081,.807843,.989935,.663787,.204859,.811765,.990681,.669558,.201642,.815686,.991365,.675355,.198453,.819608,.991985,.681179,.195295,.823529,.992541,.68703,.19217,.827451,.993032,.692907,.189084,.831373,.993456,.69881,.186041,.835294,.993814,.704741,.183043,.839216,.994103,.710698,.180097,.843137,.994324,.716681,.177208,.847059,.994474,.722691,.174381,.85098,.994553,.728728,.171622,.854902,.994561,.734791,.168938,.858824,.994495,.74088,.166335,.862745,.994355,.746995,.163821,.866667,.994141,.753137,.161404,.870588,.993851,.759304,.159092,.87451,.993482,.765499,.156891,.878431,.993033,.77172,.154808,.882353,.992505,.777967,.152855,.886275,.991897,.784239,.151042,.890196,.991209,.790537,.149377,.894118,.990439,.796859,.14787,.898039,.989587,.803205,.146529,.901961,.988648,.809579,.145357,.905882,.987621,.815978,.144363,.909804,.986509,.822401,.143557,.913725,.985314,.828846,.142945,.917647,.984031,.835315,.142528,.921569,.982653,.841812,.142303,.92549,.98119,.848329,.142279,.929412,.979644,.854866,.142453,.933333,.977995,.861432,.142808,.937255,.976265,.868016,.143351,.941176,.974443,.874622,.144061,.945098,.97253,.88125,.144923,.94902,.970533,.887896,.145919,.952941,.968443,.894564,.147014,.956863,.966271,.901249,.14818,.960784,.964021,.90795,.14937,.964706,.961681,.914672,.15052,.968627,.959276,.921407,.151566,.972549,.956808,.928152,.152409,.976471,.954287,.934908,.152921,.980392,.951726,.941671,.152925,.984314,.949151,.948435,.152178,.988235,.946602,.95519,.150328,.992157,.944152,.961916,.146861,.996078,.941896,.96859,.140956,1,.940015,.975158,.131326]},{ColorSpace:"Diverging",Name:"Viridis (matplotlib)",NanColor:[1,0,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Eric Firing",RGBPoints:[0,.267004,.004874,.329415,.003922,.26851,.009605,.335427,.007843,.269944,.014625,.341379,.011765,.271305,.019942,.347269,.015686,.272594,.025563,.353093,.019608,.273809,.031497,.358853,.023529,.274952,.037752,.364543,.027451,.276022,.044167,.370164,.031373,.277018,.050344,.375715,.035294,.277941,.056324,.381191,.039216,.278791,.062145,.386592,.043137,.279566,.067836,.391917,.047059,.280267,.073417,.397163,.05098,.280894,.078907,.402329,.054902,.281446,.08432,.407414,.058824,.281924,.089666,.412415,.062745,.282327,.094955,.417331,.066667,.282656,.100196,.42216,.070588,.28291,.105393,.426902,.07451,.283091,.110553,.431554,.078431,.283197,.11568,.436115,.082353,.283229,.120777,.440584,.086275,.283187,.125848,.44496,.090196,.283072,.130895,.449241,.094118,.282884,.13592,.453427,.098039,.282623,.140926,.457517,.101961,.28229,.145912,.46151,.105882,.281887,.150881,.465405,.109804,.281412,.155834,.469201,.113725,.280868,.160771,.472899,.117647,.280255,.165693,.476498,.121569,.279574,.170599,.479997,.12549,.278826,.17549,.483397,.129412,.278012,.180367,.486697,.133333,.277134,.185228,.489898,.137255,.276194,.190074,.493001,.141176,.275191,.194905,.496005,.145098,.274128,.199721,.498911,.14902,.273006,.20452,.501721,.152941,.271828,.209303,.504434,.156863,.270595,.214069,.507052,.160784,.269308,.218818,.509577,.164706,.267968,.223549,.512008,.168627,.26658,.228262,.514349,.172549,.265145,.232956,.516599,.176471,.263663,.237631,.518762,.180392,.262138,.242286,.520837,.184314,.260571,.246922,.522828,.188235,.258965,.251537,.524736,.192157,.257322,.25613,.526563,.196078,.255645,.260703,.528312,.2,.253935,.265254,.529983,.203922,.252194,.269783,.531579,.207843,.250425,.27429,.533103,.211765,.248629,.278775,.534556,.215686,.246811,.283237,.535941,.219608,.244972,.287675,.53726,.223529,.243113,.292092,.538516,.227451,.241237,.296485,.539709,.231373,.239346,.300855,.540844,.235294,.237441,.305202,.541921,.239216,.235526,.309527,.542944,.243137,.233603,.313828,.543914,.247059,.231674,.318106,.544834,.25098,.229739,.322361,.545706,.254902,.227802,.326594,.546532,.258824,.225863,.330805,.547314,.262745,.223925,.334994,.548053,.266667,.221989,.339161,.548752,.270588,.220057,.343307,.549413,.27451,.21813,.347432,.550038,.278431,.21621,.351535,.550627,.282353,.214298,.355619,.551184,.286275,.212395,.359683,.55171,.290196,.210503,.363727,.552206,.294118,.208623,.367752,.552675,.298039,.206756,.371758,.553117,.301961,.204903,.375746,.553533,.305882,.203063,.379716,.553925,.309804,.201239,.38367,.554294,.313725,.19943,.387607,.554642,.317647,.197636,.391528,.554969,.321569,.19586,.395433,.555276,.32549,.1941,.399323,.555565,.329412,.192357,.403199,.555836,.333333,.190631,.407061,.556089,.337255,.188923,.41091,.556326,.341176,.187231,.414746,.556547,.345098,.185556,.41857,.556753,.34902,.183898,.422383,.556944,.352941,.182256,.426184,.55712,.356863,.180629,.429975,.557282,.360784,.179019,.433756,.55743,.364706,.177423,.437527,.557565,.368627,.175841,.44129,.557685,.372549,.174274,.445044,.557792,.376471,.172719,.448791,.557885,.380392,.171176,.45253,.557965,.384314,.169646,.456262,.55803,.388235,.168126,.459988,.558082,.392157,.166617,.463708,.558119,.396078,.165117,.467423,.558141,.4,.163625,.471133,.558148,.403922,.162142,.474838,.55814,.407843,.160665,.47854,.558115,.411765,.159194,.482237,.558073,.415686,.157729,.485932,.558013,.419608,.15627,.489624,.557936,.423529,.154815,.493313,.55784,.427451,.153364,.497,.557724,.431373,.151918,.500685,.557587,.435294,.150476,.504369,.55743,.439216,.149039,.508051,.55725,.443137,.147607,.511733,.557049,.447059,.14618,.515413,.556823,.45098,.144759,.519093,.556572,.454902,.143343,.522773,.556295,.458824,.141935,.526453,.555991,.462745,.140536,.530132,.555659,.466667,.139147,.533812,.555298,.470588,.13777,.537492,.554906,.47451,.136408,.541173,.554483,.478431,.135066,.544853,.554029,.482353,.133743,.548535,.553541,.486275,.132444,.552216,.553018,.490196,.131172,.555899,.552459,.494118,.129933,.559582,.551864,.498039,.128729,.563265,.551229,.501961,.127568,.566949,.550556,.505882,.126453,.570633,.549841,.509804,.125394,.574318,.549086,.513725,.124395,.578002,.548287,.517647,.123463,.581687,.547445,.521569,.122606,.585371,.546557,.52549,.121831,.589055,.545623,.529412,.121148,.592739,.544641,.533333,.120565,.596422,.543611,.537255,.120092,.600104,.54253,.541176,.119738,.603785,.5414,.545098,.119512,.607464,.540218,.54902,.119423,.611141,.538982,.552941,.119483,.614817,.537692,.556863,.119699,.61849,.536347,.560784,.120081,.622161,.534946,.564706,.120638,.625828,.533488,.568627,.12138,.629492,.531973,.572549,.122312,.633153,.530398,.576471,.123444,.636809,.528763,.580392,.12478,.640461,.527068,.584314,.126326,.644107,.525311,.588235,.128087,.647749,.523491,.592157,.130067,.651384,.521608,.596078,.132268,.655014,.519661,.6,.134692,.658636,.517649,.603922,.137339,.662252,.515571,.607843,.14021,.665859,.513427,.611765,.143303,.669459,.511215,.615686,.146616,.67305,.508936,.619608,.150148,.676631,.506589,.623529,.153894,.680203,.504172,.627451,.157851,.683765,.501686,.631373,.162016,.687316,.499129,.635294,.166383,.690856,.496502,.639216,.170948,.694384,.493803,.643137,.175707,.6979,.491033,.647059,.180653,.701402,.488189,.65098,.185783,.704891,.485273,.654902,.19109,.708366,.482284,.658824,.196571,.711827,.479221,.662745,.202219,.715272,.476084,.666667,.20803,.718701,.472873,.670588,.214,.722114,.469588,.67451,.220124,.725509,.466226,.678431,.226397,.728888,.462789,.682353,.232815,.732247,.459277,.686275,.239374,.735588,.455688,.690196,.24607,.73891,.452024,.694118,.252899,.742211,.448284,.698039,.259857,.745492,.444467,.701961,.266941,.748751,.440573,.705882,.274149,.751988,.436601,.709804,.281477,.755203,.432552,.713725,.288921,.758394,.428426,.717647,.296479,.761561,.424223,.721569,.304148,.764704,.419943,.72549,.311925,.767822,.415586,.729412,.319809,.770914,.411152,.733333,.327796,.77398,.40664,.737255,.335885,.777018,.402049,.741176,.344074,.780029,.397381,.745098,.35236,.783011,.392636,.74902,.360741,.785964,.387814,.752941,.369214,.788888,.382914,.756863,.377779,.791781,.377939,.760784,.386433,.794644,.372886,.764706,.395174,.797475,.367757,.768627,.404001,.800275,.362552,.772549,.412913,.803041,.357269,.776471,.421908,.805774,.35191,.780392,.430983,.808473,.346476,.784314,.440137,.811138,.340967,.788235,.449368,.813768,.335384,.792157,.458674,.816363,.329727,.796078,.468053,.818921,.323998,.8,.477504,.821444,.318195,.803922,.487026,.823929,.312321,.807843,.496615,.826376,.306377,.811765,.506271,.828786,.300362,.815686,.515992,.831158,.294279,.819608,.525776,.833491,.288127,.823529,.535621,.835785,.281908,.827451,.545524,.838039,.275626,.831373,.555484,.840254,.269281,.835294,.565498,.84243,.262877,.839216,.575563,.844566,.256415,.843137,.585678,.846661,.249897,.847059,.595839,.848717,.243329,.85098,.606045,.850733,.236712,.854902,.616293,.852709,.230052,.858824,.626579,.854645,.223353,.862745,.636902,.856542,.21662,.866667,.647257,.8584,.209861,.870588,.657642,.860219,.203082,.87451,.668054,.861999,.196293,.878431,.678489,.863742,.189503,.882353,.688944,.865448,.182725,.886275,.699415,.867117,.175971,.890196,.709898,.868751,.169257,.894118,.720391,.87035,.162603,.898039,.730889,.871916,.156029,.901961,.741388,.873449,.149561,.905882,.751884,.874951,.143228,.909804,.762373,.876424,.137064,.913725,.772852,.877868,.131109,.917647,.783315,.879285,.125405,.921569,.79376,.880678,.120005,.92549,.804182,.882046,.114965,.929412,.814576,.883393,.110347,.933333,.82494,.88472,.106217,.937255,.83527,.886029,.102646,.941176,.845561,.887322,.099702,.945098,.85581,.888601,.097452,.94902,.866013,.889868,.095953,.952941,.876168,.891125,.09525,.956863,.886271,.892374,.095374,.960784,.89632,.893616,.096335,.964706,.906311,.894855,.098125,.968627,.916242,.896091,.100717,.972549,.926106,.89733,.104071,.976471,.935904,.89857,.108131,.980392,.945636,.899815,.112838,.984314,.9553,.901065,.118128,.988235,.964894,.902323,.123941,.992157,.974417,.90359,.130215,.996078,.983868,.904867,.136897,1,.993248,.906157,.143936]},{ShowIndexedColorActiveValues:1,IndexedColors:[.07,.5,.7,1,1,1,.85,1,1,.8,.5,1,.76,1,0,1,.71,.71,.5,.5,.5,.05,.05,1,1,.05,.05,.7,1,1,.7,.89,.96,.67,.36,.95,.54,1,0,.75,.65,.65,.5,.6,.6,1,.5,0,1,1,.19,.12,.94,.12,.5,.82,.89,.56,.25,.83,.24,1,0,.9,.9,.9,.75,.76,.78,.65,.65,.67,.54,.6,.78,.61,.48,.78,.5,.48,.78,.44,.48,.78,.36,.48,.76,1,.48,.38,.49,.5,.69,.76,.56,.56,.4,.56,.56,.74,.5,.89,1,.63,0,.65,.16,.16,.36,.72,.82,.44,.18,.69,0,1,0,.58,1,1,.58,.88,.88,.45,.76,.79,.33,.71,.71,.23,.62,.62,.14,.56,.56,.04,.49,.55,0,.41,.52,.88,.88,1,1,.85,.56,.65,.46,.45,.4,.5,.5,.62,.39,.71,.83,.48,0,.58,0,.58,.26,.62,.69,.34,.09,.56,0,.79,0,.44,.83,1,1,1,.78,.85,1,.78,.78,1,.78,.64,1,.78,.56,1,.78,.38,1,.78,.27,1,.78,.19,1,.78,.12,1,.78,0,1,.61,0,.9,.46,0,.83,.32,0,.75,.22,0,.67,.14,.3,.76,1,.3,.65,1,.13,.58,.84,.15,.49,.67,.15,.4,.59,.09,.33,.53,.96,.93,.82,.8,.82,.12,.71,.71,.76,.65,.33,.3,.34,.35,.38,.62,.31,.71,.67,.36,0,.46,.31,.27,.26,.51,.59,.26,0,.4,0,.49,0,.44,.67,.98,0,.73,1,0,.63,1,0,.56,1,0,.5,1,0,.42,1,.33,.36,.95,.47,.36,.89,.54,.31,.89,.63,.21,.83,.7,.12,.83,.7,.12,.73,.7,.05,.65,.74,.05,.53,.78,0,.4,.8,0,.35,.82,0,.31,.85,0,.27,.88,0,.22,.9,0,.18,.91,0,.15,.92,0,.14,.93,0,.13,.94,0,.12,.95,0,.11,.96,0,.1,.97,0,.09,.98,0,.08,.99,0,.07,1,0,.06],Annotations:[0,"Xx",1,"H",2,"He",3,"Li",4,"Be",5,"B",6,"C",7,"N",8,"O",9,"F",10,"Ne",11,"Na",12,"Mg",13,"Al",14,"Si",15,"P",16,"S",17,"Cl",18,"Ar",19,"K",20,"Ca",21,"Sc",22,"Ti",23,"V",24,"Cr",25,"Mn",26,"Fe",27,"Co",28,"Ni",29,"Cu",30,"Zn",31,"Ga",32,"Ge",33,"As",34,"Se",35,"Br",36,"Kr",37,"Rb",38,"Sr",39,"Y",40,"Zr",41,"Nb",42,"Mo",43,"Tc",44,"Ru",45,"Rh",46,"Pd",47,"Ag",48,"Cd",49,"In",50,"Sn",51,"Sb",52,"Te",53,"I",54,"Xe",55,"Cs",56,"Ba",57,"La",58,"Ce",59,"Pr",60,"Nd",61,"Pm",62,"Sm",63,"Eu",64,"Gd",65,"Tb",66,"Dy",67,"Ho",68,"Er",69,"Tm",70,"Yb",71,"Lu",72,"Hf",73,"Ta",74,"W",75,"Re",76,"Os",77,"Ir",78,"Pt",79,"Au",80,"Hg",81,"Tl",82,"Pb",83,"Bi",84,"Po",85,"At",86,"Rn",87,"Fr",88,"Ra",89,"Ac",90,"Th",91,"Pa",92,"U",93,"Np",94,"Pu",95,"Am",96,"Cm",97,"Bk",98,"Cf",99,"Es",100,"Fm",101,"Md",102,"No",103,"Lr",104,"Rf",105,"Db",106,"Sg",107,"Bh",108,"Hs",109,"Mt",110,"Ds",111,"Rg",112,"Cn",113,"Uut",114,"Uuq",115,"Uup",116,"Uuh",117,"Uus",118,"Uuo"],Name:"BlueObeliskElements"}];const ho=Object.create(null);ZV.filter(t=>t.RGBPoints).filter(t=>t.ColorSpace!=="CIELAB").forEach(t=>{ho[t.Name]=t});const go=Object.keys(ho);go.sort();function eA(t){return ho[t]}function tA(t){!t.RGBPoints||t.ColorSpace==="CIELAB"||(ho[t.Name]||(go.push(t.Name),go.sort()),ho[t.Name]=t)}function nA(t){const e=go.indexOf(t);e>-1&&go.splice(e,1),delete ho[t]}var rA={addPreset:tA,removePresetByName:nA,getPresetByName:eA,rgbPresetNames:go};function iA(){const t=Ga.useRef(null),e=Ga.useRef(null);return Ga.useEffect(()=>{if(!e.current){const n=cB.newInstance({background:[0,0,0]}),r=n.getRenderer(),i=n.getRenderWindow();r.addActor(Ca(112.65835429153337,31.132905384374858,[111.76032930789083,65.10027418222336,117.37352368519767])),r.addActor(Ca(93.94979246465604,31.133017433977397,[83.74153522064732,92.56154847961753,152.36084871496968])),r.addActor(Ca(65.60823284192719,30.280113261143107,[122.87015452410793,68.3415010723188,91.09181384490981])),r.addActor(Ca(56.53156327835792,31.132855192264735,[65.79158089773392,62.136103679053676,133.43551256549014])),r.addActor(Ca(74.30121106188274,30.27996240053903,[74.7402613697195,70.35539485748886,95.63860216092766])),r.addActor(Ca(74.29359904698025,30.2800898089079,[67.06318210038442,117.35535733754338,131.79428493370017]));const a=FB.newInstance(),o=UB.newInstance(),s=KV.newInstance();o.setInputConnection(s.getOutputPort()),o.setBlendModeToComposite(),a.setMapper(o);const u=a.getProperty();u.setUseGradientOpacity(0,!0),u.setGradientOpacityMinimumValue(0,32),u.setGradientOpacityMaximumValue(0,64),u.setGradientOpacityMinimumOpacity(0,0),u.setGradientOpacityMaximumOpacity(0,1),u.setShade(!0),u.setAmbient(.2),u.setDiffuse(.7),u.setSpecular(.3),u.setSpecularPower(8);const l=hV();u.setScalarOpacity(0,l),u.setInterpolationTypeToFastLinear();const p=rA.getPresetByName("Grayscale");a.getProperty().getRGBTransferFunction(0).applyColorMap(p),s.setUrl(XV).then(()=>s.loadData()).then(()=>{r.addVolume(a),r.resetCamera(),i.render()}),r.resetCamera(),i.render()}},[t]),x0.jsx("div",{children:x0.jsx("div",{ref:t})})}B3(document.getElementById("root")).render(x0.jsx(Ga.StrictMode,{children:x0.jsx(iA,{})}));
